// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./utils","../../portal/support/portalItemUtils"],function(e,t,r){"use strict";const a="Map Service";function n(e){return{isValid:"map-image"===e.type&&!e.sourceJSON?.tileInfo,errorMessage:"Layer.type should be 'map-image' and reference a dynamic (non-cached) map service"}}function o(e){const t=e.layerJSON;return Promise.resolve(t&&Object.keys(t).length?t:null)}function s(e,t){return y(e,t),Promise.resolve()}async function i(e,t){const{parsedUrl:a,title:n,fullExtent:o}=e;t.url=a.path,t.title||=n,t.extent=o?await r.getWGS84ExtentForItem(o):null,r.removeTypeKeyword(t,r.typeKeyword.METADATA),y(e,t)}function y(e,t){r.addTypeKeyword(t,r.typeKeyword.DYNAMIC);const a=e.sublayers?.length??0;r.toggleTypeKeyword(t,r.typeKeyword.MULTI_LAYER,a>1),r.toggleTypeKeyword(t,r.typeKeyword.SINGLE_LAYER,1===a)}e.save=async function(e,r){const i={layer:e,itemType:a,validateLayer:n,createItemData:o,errorNamePrefix:"map-image-layer-save",setItemProperties:s};return t.save(i,r)},e.saveAs=async function(e,r,s){const y={layer:e,itemType:a,validateLayer:n,createItemData:o,errorNamePrefix:"map-image-layer-save-as",newItem:r,setItemProperties:i};return t.saveAs(y,s)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});