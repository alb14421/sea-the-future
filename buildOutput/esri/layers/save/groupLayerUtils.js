// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./utils","../../portal/support/jsonContext","../../portal/support/portalItemUtils","../../webdoc/support/resourceUtils"],function(e,r,t,o,s){"use strict";const a="Group Layer",n=o.typeKeyword.GROUP_LAYER_MAP;function c(e){return{isValid:"group"===e.type,errorMessage:"Layer.type should be 'group'"}}function u(e){return{isValid:o.hasTypeKeyword(e,n),errorMessage:`Layer.portalItem.typeKeywords should have '${n}'`}}function i(e,r){return{...t.createForItemWrite(e,"web-map",!0),initiator:r}}function y(e){const r=e.layerJSON;return Promise.resolve(r&&Object.keys(r).length?r:null)}async function l(e,r){r.title||=e.title,o.removeTypeKeyword(r,o.typeKeyword.METADATA),o.addTypeKeyword(r,n)}e.save=async function(e,t){const o={layer:e,itemType:a,validateLayer:c,validateItem:u,createJSONContext:r=>i(r,e),createItemData:y,errorNamePrefix:"group-layer-save",saveResources:async(r,t)=>(e.sourceIsPortalItem||await r.removeAllResources().catch(()=>{}),s.saveResources(e.resourceReferences,t))};return r.save(o,t)},e.saveAs=async function(e,t,o){const n={layer:e,itemType:a,validateLayer:c,createJSONContext:r=>i(r,e),createItemData:y,errorNamePrefix:"group-layer-save-as",newItem:t,setItemProperties:l,saveResources:(r,t)=>s.saveResources(e.resourceReferences,t)};return r.saveAs(n,o)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});