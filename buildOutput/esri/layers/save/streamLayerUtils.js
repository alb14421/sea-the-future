// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./utils","../../portal/support/portalItemUtils"],function(e,t,r){"use strict";const a="Stream Service";function s(e){return{isValid:"stream"===e.type&&!!e.url&&!e.webSocketUrl,errorMessage:"Stream layer should be created using a url to a stream service"}}function n(e){const t=e.layerJSON;return Promise.resolve(t&&Object.keys(t).length?t:null)}async function l(e,t){const{parsedUrl:a,title:s,fullExtent:n}=e;t.url=a.path,t.title||=s,t.extent=null,null!=n&&(t.extent=await r.getWGS84ExtentForItem(n)),r.removeTypeKeyword(t,r.typeKeyword.METADATA),r.addTypeKeyword(t,r.typeKeyword.SINGLE_LAYER)}e.save=async function(e,r){const l={layer:e,itemType:a,additionalItemType:"Feed",validateLayer:s,createItemData:n,errorNamePrefix:"stream-layer-save"};return t.save(l,r)},e.saveAs=async function(e,r,o){const i={layer:e,itemType:a,validateLayer:s,createItemData:n,errorNamePrefix:"stream-layer-save-as",newItem:r,setItemProperties:l};return t.saveAs(i,o)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});