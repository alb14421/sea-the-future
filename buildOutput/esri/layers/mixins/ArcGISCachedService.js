// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../geometry/SpatialReference","../support/TileInfo","../support/TileInfoTilemapCache","../support/TilemapCache"],function(e,r,t,o,a,l,c,i,p,n,s,d){"use strict";e.ArcGISCachedService=e=>{const o=e;let a=class extends o{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}destroy(){this.tilemapCache?.destroy?.()}readMinScale(e,r){return null!=r.minLOD&&null!=r.maxLOD?e:0}readMaxScale(e,r){return null!=r.minLOD&&null!=r.maxLOD?e:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(e,r,t){const o=r.capabilities?.includes("Tilemap");let{minLOD:a,maxLOD:l,minScale:c,maxScale:i}=r;if(null==a&&null==l&&(0!==c||0!==i)){const e=e=>Math.round(1e4*e)/1e4;c=e(c||r.tileInfo.lods[0].scale),i=e(i||r.tileInfo.lods[r.tileInfo.lods.length-1].scale);for(const t of r.tileInfo.lods){const r=e(t.scale);a=r>=c?t.level:a,l=r>=i?t.level:l}}if(o)return new d.TilemapCache({layer:this,minLOD:a,maxLOD:l});if(r.tileInfo){const e=new n;return e.read(r.tileInfo,t),new s(e,a,l)}return null}};return r.__decorate([t.property({json:{read:{source:"copyrightText"}}})],a.prototype,"copyright",void 0),r.__decorate([t.property()],a.prototype,"minScale",void 0),r.__decorate([c.reader("service","minScale")],a.prototype,"readMinScale",null),r.__decorate([t.property()],a.prototype,"maxScale",void 0),r.__decorate([c.reader("service","maxScale")],a.prototype,"readMaxScale",null),r.__decorate([t.property({type:p})],a.prototype,"spatialReference",void 0),r.__decorate([t.property({readOnly:!0})],a.prototype,"supportsBlankTile",null),r.__decorate([t.property({type:n})],a.prototype,"tileInfo",void 0),r.__decorate([t.property()],a.prototype,"tilemapCache",void 0),r.__decorate([c.reader("service","tilemapCache",["capabilities","tileInfo"])],a.prototype,"readTilemapCache",null),r.__decorate([t.property()],a.prototype,"version",void 0),a=r.__decorate([i.subclass("esri.layers.mixins.ArcGISCachedService")],a),a},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});