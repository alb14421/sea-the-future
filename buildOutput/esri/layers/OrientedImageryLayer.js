// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../chunks/tslib.es6","../core/Error","../core/lang","../core/object","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/subclass","../graphic/OrientedImageryGraphicOrigin","./FeatureLayer","./mixins/TemporalLayer","./orientedImagery/core/utils","../tables/AttributeTableTemplate","../chunks/TimeExtent"],function(e,t,r,i,o,a,n,p,y,s,d,c,l,m){"use strict";const u=new Set(["demPathPrefix","demPathSuffix","depthImagePathPrefix","depthImagePathSuffix","elevationSource","horizontalMeasurementUnit","imageGeometryField","imageReferenceField","referenceIDField","sequenceOrderField","verticalMeasurementUnit","videoPathPrefix","videoPathSuffix","timeAnimation","visibilityTimeExtent"]),h=(e,t)=>!u.has(t)&&e;function g(e,t,r,i){const{name:o,write:a,read:n}=((e,t,r)=>{const i=`orientedImageryProperties.${e}`;return{name:i,write:t?{ignoreOrigin:!0,target:i,writer:t}:{ignoreOrigin:!0},read:r?{ignoreOrigin:!0,source:i,reader:r}:{ignoreOrigin:!0}}})(e,t,r),p={name:o,write:a,read:n,origins:{service:{name:`orientedImageryInfo.${o}`,write:t,read:r},"web-scene":{name:o,write:h(a,e),read:h(n,e)},"web-map":{name:o,write:a,read:n}}};return i&&p.origins?(p.type=i,p.origins["web-map"].type=i,p.origins["web-scene"].type=i,p):p}let v=class extends s{constructor(e){super(e),this.attributeTableTemplate=null,this.cameraHeading=null,this.cameraHeight=null,this.cameraPitch=null,this.cameraRoll=null,this.coveragePercent=null,this.demPathPrefix=null,this.demPathSuffix=null,this.depthImagePathPrefix=null,this.depthImagePathSuffix=null,this.elevationSource=null,this.farDistance=null,this.geometryType="point",this.graphicOrigin=new y(this),this.horizontalFieldOfView=null,this.horizontalMeasurementUnit=null,this.imageGeometryField="ImageGeometry",this.imagePathPrefix=null,this.imagePathSuffix=null,this.imageReferenceField="OIObjectID",this.imageRotation=null,this.maximumDistance=null,this.nearDistance=null,this.operationalLayerType="OrientedImageryLayer",this.orientationAccuracy=null,this.orientedImageryType=null,this.referenceIDField="OBJECTID",this.sequenceOrderField="SequenceOrder",this.supportedSourceTypes=new Set(["Oriented Imagery Layer"]),this.type="oriented-imagery",this.timeIntervalUnit="days",this.useViewTime=!0,this.verticalFieldOfView=null,this.verticalMeasurementUnit=null,this.videoPathPrefix=null,this.videoPathSuffix=null,this.visibilityTimeExtent=null}get effectiveElevationSource(){const{elevationSource:e,demPathPrefix:t,demPathSuffix:r}=this;return c.getEffectiveElevationSource(e,t,r)}set portalItem(e){super.portalItem=e}async save(e){return this._debouncedSaveOperations(0,e)}async saveAs(e,t){return this._debouncedSaveOperations(1,t,e)}findFirstValidLayerId(e){return e.layers?.find(e=>this.supportedSourceTypes.has(e.type))?.id}_verifySource(){if(super._verifySource(),"point"!==this.geometryType)throw new t("oriented-imagery-layer:invalid-geometry-type","OrientedImageryLayer only supports point geometry type")}};var f;return e.__decorate([o.property({type:l,json:{write:!1,read:!1}})],v.prototype,"attributeTableTemplate",void 0),e.__decorate([o.property({type:Number,json:g("cameraHeading")})],v.prototype,"cameraHeading",void 0),e.__decorate([o.property({type:Number,json:g("cameraHeight")})],v.prototype,"cameraHeight",void 0),e.__decorate([o.property({type:Number,json:g("cameraPitch")})],v.prototype,"cameraPitch",void 0),e.__decorate([o.property({type:Number,json:g("cameraRoll")})],v.prototype,"cameraRoll",void 0),e.__decorate([o.property({type:Number,json:g("coveragePercent")})],v.prototype,"coveragePercent",void 0),e.__decorate([o.property({type:String,json:g("demPathPrefix")})],v.prototype,"demPathPrefix",void 0),e.__decorate([o.property({type:String,json:g("demPathSuffix")})],v.prototype,"demPathSuffix",void 0),e.__decorate([o.property({type:String,json:g("depthImagePathPrefix")})],v.prototype,"depthImagePathPrefix",void 0),e.__decorate([o.property({type:String,json:g("depthImagePathSuffix")})],v.prototype,"depthImagePathSuffix",void 0),e.__decorate([o.property({type:Object,json:g("elevationSource")})],v.prototype,"elevationSource",void 0),e.__decorate([o.property({readOnly:!0})],v.prototype,"effectiveElevationSource",null),e.__decorate([o.property({type:Number,json:g("farDistance")})],v.prototype,"farDistance",void 0),e.__decorate([o.property()],v.prototype,"geometryType",void 0),e.__decorate([o.property({readOnly:!0,clonable:!1})],v.prototype,"graphicOrigin",void 0),e.__decorate([o.property({type:Number,json:g("horizontalFieldOfView")})],v.prototype,"horizontalFieldOfView",void 0),e.__decorate([o.property({type:String,json:g("horizontalMeasurementUnit")})],v.prototype,"horizontalMeasurementUnit",void 0),e.__decorate([o.property({type:String,json:{...g("imageGeometryField"),default:"ImageGeometry"}})],v.prototype,"imageGeometryField",void 0),e.__decorate([o.property({type:String,json:g("imagePathPrefix")})],v.prototype,"imagePathPrefix",void 0),e.__decorate([o.property({type:String,json:g("imagePathSuffix")})],v.prototype,"imagePathSuffix",void 0),e.__decorate([o.property({type:String,json:{...g("imageReferenceField"),default:"OIObjectID"}})],v.prototype,"imageReferenceField",void 0),e.__decorate([o.property({type:Number,json:g("imageRotation")})],v.prototype,"imageRotation",void 0),e.__decorate([o.property({type:Number,json:g("maximumDistance")})],v.prototype,"maximumDistance",void 0),e.__decorate([o.property({type:Number,json:g("nearDistance")})],v.prototype,"nearDistance",void 0),e.__decorate([o.property({type:["OrientedImageryLayer"],json:{origins:{"portal-item":{name:"layerType",write:{enabled:!0,ignoreOrigin:!0}}}}})],v.prototype,"operationalLayerType",void 0),e.__decorate([o.property({json:{...g("orientationAccuracy",(e,t,r)=>{i.setDeepValue(r,e.join(";"),t)},e=>{const t=e?.split(";")?.map(Number);return c.isOrientationAccuracy(t)?c.padAccuracyArray(t):[0,0,0,0,0,0,0,0]},String)}})],v.prototype,"orientationAccuracy",void 0),e.__decorate([o.property({json:{...g("orientedImageryType",c.orientedImageryTypeMap.write,c.orientedImageryTypeMap.read,c.orientedImageryTypeMap.jsonValues.slice(1))}})],v.prototype,"orientedImageryType",void 0),e.__decorate([o.property({type:String,json:{...g("referenceIDField"),default:"OBJECTID"}})],v.prototype,"referenceIDField",void 0),e.__decorate([o.property({type:String,json:{...g("sequenceOrderField"),default:"SequenceOrder"}})],v.prototype,"sequenceOrderField",void 0),e.__decorate([o.property({json:{read:!1},value:"oriented-imagery",readOnly:!0})],v.prototype,"type",void 0),e.__decorate([o.property({type:c.timeIntervalUnitTypeMap.apiValues,json:{...g("timeIntervalUnit",c.timeIntervalUnitTypeMap.write,c.timeIntervalUnitTypeMap.read,c.timeIntervalUnitTypeMap.jsonValues)}})],v.prototype,"timeIntervalUnit",void 0),e.__decorate([o.property((f=r.clone(d.useViewTimeProperty),f.json?(f.json.origins=f.json.origins??{},f.json.origins["web-scene"]={write:!1,read:!1},f):f))],v.prototype,"useViewTime",void 0),e.__decorate([o.property({type:Number,json:g("verticalFieldOfView")})],v.prototype,"verticalFieldOfView",void 0),e.__decorate([o.property({type:c.verticalMeasurementTypeMap.apiValues,json:{...g("verticalMeasurementUnit",c.verticalMeasurementTypeMap.write,c.verticalMeasurementTypeMap.read,c.verticalMeasurementTypeMap.jsonValues)}})],v.prototype,"verticalMeasurementUnit",void 0),e.__decorate([o.property({type:String,json:g("videoPathPrefix")})],v.prototype,"videoPathPrefix",void 0),e.__decorate([o.property({type:String,json:g("videoPathSuffix")})],v.prototype,"videoPathSuffix",void 0),e.__decorate([o.property({type:m.TimeExtent,json:{origins:{"web-scene":{write:!1,read:!1}}}})],v.prototype,"visibilityTimeExtent",void 0),v=e.__decorate([p.subclass("esri.layers.OrientedImageryLayer")],v),v});