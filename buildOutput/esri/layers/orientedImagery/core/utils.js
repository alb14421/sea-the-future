// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/jsonMap","../../../core/unitUtils","../../../geometry/support/webMercatorUtils","./cameraOrientationRegistry","./ElevationSourceDefinitions"],function(e,t,r,n,i,o){"use strict";function a(e,t,r){return t&&(e=`${t}${e}`),r&&(e+=`${r}`),e}function s(e,t,r){let{url:n}=e;return n?(n=a(n,t,r),new o.ElevationSource({...e,url:n})):null}const l=new t.JSONMap({Minutes:"minutes",Hours:"hours",Days:"days",Weeks:"weeks",Months:"months",Years:"years"}),c=new t.JSONMap({Feet:"feet",Meter:"meter"}),u=new t.JSONMap({360:"360",Horizontal:"horizontal",Inspection:"inspection",Nadir:"nadir",Oblique:"oblique",Terrestrial360Video:"terrestrial-360-video",TerrestrialFrameVideo:"terrestrial-frame-video",Aerial360Video:"aerial-360-video",AerialFrameVideo:"aerial-frame-video","":null}),f=new Map;f.set("1",function(e){const[t,r,n,i,o,a,s,l,c,u,f,p,d,h,y,v,m,M,S,w,D,O]=e.slice(1);return{horizontalWKID:t,verticalWKID:r,x:n,y:i,z:o,heading:a,pitch:s,roll:l,...g([c,u,f,p,d,h],[v,m],[M,S,w],[D,O],y)}}),f.set("3",function(e){const[t,r,n,i,o,a,s,l,c,u,f,p,d,h,y,v,m,M,S,w,D,O]=e.slice(1);return{horizontalWKID:t,verticalWKID:r,x:n,y:i,z:o,yaw:a,pitch:s,roll:l,...g([c,u,f,p,d,h],[v,m],[M,S,w],[D,O],y)}}),f.set("2",function(e){const[t,r,n,i,o,a,s,l,c,u,f,p,d,h,y,v,m,M,S,w,D,O]=e.slice(1);return{horizontalWKID:t,verticalWKID:r,x:n,y:i,z:o,omega:a,phi:s,kappa:l,...g([c,u,f,p,d,h],[v,m],[M,S,w],[D,O],y)}}),f.set("4",function(e){const[t,r,n,o,a,...s]=e.slice(1),l=f.get(a),c=i.get(a)?.constructor;return l&&c?{latitude:t,longitude:r,ellipsoidRadius:n,squaredEccentricity:o,properties:new c(l([a,"",...s]))}:null});const p=e=>{const t=e.map(e=>parseFloat(e)).filter(e=>!isNaN(e));if(t.length===e.length)return t};function g(e,t,r,n,i){const o=p(e),a=p(t),s=p(r),l=p(n);return{affineTransformations:6===o?.length?o:void 0,focalLength:6===o?.length?parseFloat(i):void 0,principalOffsetPoint:2!==a?.length?[0,0]:a,radialDistortionCoefficients:3!==s?.length?[0,0,0]:s,tangentialDistortionCoefficients:2!==l?.length?[0,0]:l}}e.appendPrefixAndSuffix=a,e.convertGeographicToWebMercator=function(e){return e.spatialReference.isGeographic?n.geographicToWebMercator(e):e.clone()},e.createCameraOrientation=function(e){if(!e)return null;const t=`${e}`.split("|");if(0===t.length)return null;const r=i.get(t[0]);if(!r)return null;const n=f.get(t[0]);return n?new(0,r.constructor)(n(t)):null},e.getEffectiveElevationSource=function(e,t,r){return e?o.isConstantElevation(e)?new o.ConstantElevation(e):s(e,t,r):e},e.getMetersPerUnitOfSR=function(e){return e.isGeographic?1:r.getMetersPerUnitForSR(e)},e.isOrientationAccuracy=function(e){return Array.isArray(e)&&e?.length>5&&!e.some(isNaN)},e.orientedImageryTypeMap=u,e.padAccuracyArray=function(e){for(e=e.slice(0,8);e.length<8;)e.push(0);return e},e.processElevationSource=s,e.timeIntervalUnitTypeMap=l,e.transformersRegistry=f,e.verticalMeasurementTypeMap=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});