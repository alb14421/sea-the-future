// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../chunks/tslib.es6","../../request","../../core/JSONSupport","../../core/Loadable","../../core/Logger","../../core/Promise","../../core/accessorSupport/decorators/property","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,a,l,p,u,d){"use strict";let n=class extends o.JSONSupport{constructor(){super(...arguments),this.fieldName=null,this.modelName=null,this.label=null,this.min=null,this.max=null,this.mostFrequentValues=null,this.subLayerIds=null}};return t.__decorate([l.property({type:String})],n.prototype,"fieldName",void 0),t.__decorate([l.property({type:String})],n.prototype,"modelName",void 0),t.__decorate([l.property({type:String})],n.prototype,"label",void 0),t.__decorate([l.property({type:Number})],n.prototype,"min",void 0),t.__decorate([l.property({type:Number})],n.prototype,"max",void 0),t.__decorate([l.property({json:{read:e=>Array.isArray(e)&&(e.every(e=>"string"==typeof e)||e.every(e=>"number"==typeof e))?e.slice():null}})],n.prototype,"mostFrequentValues",void 0),t.__decorate([l.property({type:[Number]})],n.prototype,"subLayerIds",void 0),n=t.__decorate([d.subclass("esri.layers.support.BuildingSummaryStatistics.BuildingFieldStatistics")],n),e.default=class extends(s.LoadableMixin(a.EsriPromiseMixin(o.JSONSupport))){constructor(e){super(e),this.url=null,this.customParameters=null}get fields(){return this.loaded||"loading"===this.loadStatus?this._get("fields"):(i.getLogger(this).error("building summary statistics are not loaded"),null)}load(e){const t=null!=e?e.signal:null;return this.addResolvingPromise(this._fetchService(t)),Promise.resolve(this)}async _fetchService(e){const t=(await r(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e})).data;this.read(t,{origin:"service"})}},t.__decorate([l.property({constructOnly:!0,type:String})],e.default.prototype,"url",void 0),t.__decorate([l.property({constructOnly:!0})],e.default.prototype,"customParameters",void 0),t.__decorate([l.property({constructOnly:!0})],e.default.prototype,"apiKey",void 0),t.__decorate([l.property({readOnly:!0,type:[n],json:{read:{source:"summary"}}})],e.default.prototype,"fields",null),e.default=t.__decorate([d.subclass("esri.layers.support.BuildingSummaryStatistics")],e.default),e.default});