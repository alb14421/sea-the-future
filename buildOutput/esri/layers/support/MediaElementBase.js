// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../chunks/tslib.es6","../../core/Error","../../core/Identifiable","../../core/Loadable","../../core/Logger","../../core/MultiOriginJSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","./ControlPointsGeoreference","./mediaUtils"],function(e,r,t,o,n,c,s,i,a,l,p,d,u,f,g){"use strict";return e.default=class extends(o.NumericIdentifiableMixin(s.MultiOriginJSONMixin(n.Loadable))){constructor(e){super(e),this.georeference=null,this.opacity=1}readGeoreference(e){return f.fromJSON(e)}writeGeoreference(e,r,o,n){const s=n?.resources?.pendingOperations,i=()=>{const s=g.toControlPointsGeoreference(this.georeference,this.contentWidth,this.contentHeight);if(s){if("control-points"!==e.type&&c.getLogger(this).warn(`only georeference of type 'control-points' may be persisted. The georeference of type '${e.type}' has been automatically converted.`),4!==s.controlPoints?.length&&n?.messages)return void n.messages.push(new t("property:unsupported","only 'control-points' georeference with 4 control points may be persisted."));r[o]=s.write({},n)}};if("control-points"!==e.type&&!this.loaded&&s)return r[o]={},void s.push(this.load().then(i));i()}get contentWidth(){return 0}get contentHeight(){return 0}toSource(e){const{georeference:r,contentWidth:t,contentHeight:o}=this;if(null==e||null==r||0===t||0===o)return null;const n=r.toSourceNormalized(e);return null==n?null:(n.x*=t,n.y*=o,n)}},r.__decorate([i.property(g.mediaGeoreferenceProperty)],e.default.prototype,"georeference",void 0),r.__decorate([p.reader("georeference")],e.default.prototype,"readGeoreference",null),r.__decorate([u.writer("georeference")],e.default.prototype,"writeGeoreference",null),r.__decorate([i.property({json:{read:!1,write:!1}})],e.default.prototype,"opacity",void 0),e.default=r.__decorate([d.subclass("esri.layers.support.MediaElementBase")],e.default),e.default});