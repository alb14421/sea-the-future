// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(function(){"use strict";const e=(e,r)=>{const n=r.width*r.height,a=r.pixelType;return Math.floor(e.byteLength/(n*t(a)))},t=e=>{let t=1;switch(e){case Uint8Array:case Int8Array:t=1;break;case Uint16Array:case Int16Array:t=2;break;case Uint32Array:case Int32Array:case Float32Array:t=4;break;case Float64Array:t=8}return t};return class{static decode(r,n){const a=n.pixelType,s=[],i=n.width*n.height,c=e(r,n),{bandIds:l,format:h}=n,y=l?.length||e(r,n),o=r.byteLength-r.byteLength%(i*t(a)),f=new a(r,0,i*c);let u,b,g,A,p=null;if("bip"===h)for(u=0;u<y;u++){for(g=new a(i),A=l?l[u]:u,b=0;b<i;b++)g[b]=f[b*c+A];s.push(g)}else if("bsq"===h)for(u=0;u<y;u++)A=l?l[u]:u,s.push(f.subarray(A*i,(A+1)*i));return o<r.byteLength-1&&(p=((e,t)=>{if(8*e.byteLength<t)return null;const r=new Uint8Array(e,0,Math.ceil(t/8)),n=new Uint8Array(t);let a=0,s=0,i=0,c=0;for(i=0;i<r.length-1;i++)for(s=r[i],c=7;c>=0;c--)n[a++]=s>>c&1;for(c=7;a<t-1;)s=r[r.length-1],n[a++]=s>>c&1,c--;return n})(r.slice(o),i)),{pixels:s,mask:p}}}});