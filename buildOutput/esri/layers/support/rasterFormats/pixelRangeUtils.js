// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports"],function(t){"use strict";const e={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function n(t){return e[t]??[-34028234663852886e22,34028234663852886e22]}const u={u1:1,u2:1,u4:1,u8:1,s8:1,u16:2,s16:2,u32:4,s32:4,f32:4,f64:8,unknown:4,c64:16,c128:32};function s(t){return u[t]}function o(t){return(t?.startsWith("s")||t?.startsWith("u"))??!1}t.clipBandToPixelTypeRange=function(t,e,u,s){let[i,l]=n(u);const r=o(u);return r&&(i-=1e-5,l+=1e-5),r?u.startsWith("u")?function(t,e,n,u){const[s,o]=u;for(let u=0;u<e.length;u++)if(e[u]){const i=t[u];i<s||i>o?e[u]=0:n[u]=i+.5|0}}(t,e,s,[i,l]):function(t,e,n,u){const[s,o]=u;for(let u=0;u<e.length;u++)if(e[u]){const i=t[u];i<s||i>o?e[u]=0:n[u]=i+(i>0?.5:-.5)|0}}(t,e,s,[i,l]):function(t,e,n,u){const[s,o]=u;for(let u=0;u<e.length;u++)if(e[u]){const i=t[u];i<s||i>o?e[u]=0:n[u]=i}}(t,e,s,[i,l])},t.convertNoDataToMask=function(t,e,u){if(t.depthCount&&t.depthCount>1)return;const{pixels:s,statistics:o,pixelType:i}=t,l=s[0].length,r=t.bandMasks??[],c=t.mask??new Uint8Array(l).fill(255),a="f32"===i||"f64"===i,f=n(i);let g=!1;for(let t=0;t<s.length;t++){const n="number"==typeof e?e:e[t];if(null==n)continue;const l=o?.[t]?.minValue??f[0],h=o?.[t]?.maxValue??f[1];if(l>n+Number.EPSILON||h<n-Number.EPSILON)continue;const p=r[t]||c.slice(),b=s[t],d=u?.customFloatTolerance;if(a&&0!==d){let t=d;t||(t=Math.abs(n)>=9999999e31?2e-7*Math.abs(n):"f32"===i?2**-23:Number.EPSILON);for(let e=0;e<b.length;e++)p[e]&&Math.abs(b[e]-n)<t&&(b[e]=0,p[e]=0,c[e]=0,g=!0)}else for(let t=0;t<b.length;t++)p[t]&&b[t]===n&&(b[t]=0,p[t]=0,c[t]=0,g=!0);r[t]=p}if(g){const e=t.bandMasks||t.pixels.length>1?r:null;u?.matchAllNoData?t.mask=e&&e.length>1?function(t){if(t.length<2)return t[0];const e=t[0].length,n=new Uint8Array(e).fill(0);for(let u=0;u<t.length;u++){const s=t[u];for(let t=0;t<e;t++)s[t]&&(n[t]=255)}return n}(e):c:(t.bandMasks=e,t.mask=c)}g&&"updateStatistics"in t&&t.updateStatistics()},t.fixNaN=function(t,e){for(let n=0;n<e.length;n++)e[n]&&isNaN(t[n])&&(e[n]=0,t[n]=0)},t.getByteCount=s,t.getBytesPerPixel=function(t){return s(t.pixelType)*t.bandCount},t.getIntegerPixelType=function(t,e){return null==t||null==e?"s32":t<0?t>=-128&&e<128?"s8":t>=-32768&&e<32768?"s16":"s32":e<256?"u8":e<65536?"u16":"u32"},t.getPixelValueRange=n,t.isIntegerPixelType=o,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});