// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../chunks/tslib.es6","../../core/Collection","../../core/Identifiable","../../core/MultiOriginJSONSupport","../../core/reactiveUtils","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/cast","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/ensureType","../../geometry/Extent"],function(e,t,r,o,l,s,a,i,n,p,d,y,u,c){"use strict";var h;let f=0;return e.default=h=class extends(o.IdentifiableMixin(l.MultiOriginJSONSupport)){constructor(e){super(e),this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.legendUrl=null,this.legendEnabled=!0,this.layer=null,this.maxScale=0,this.minScale=0,this.name=null,this.parent=null,this.popupEnabled=!1,this.queryable=!1,this.sublayers=null,this.spatialReferences=null,this.title=null,this.addHandles([s.on(()=>this.sublayers,"after-add",({item:e})=>{e.parent=this,e.layer=this.layer},s.sync),s.on(()=>this.sublayers,"after-remove",({item:e})=>{e.layer=e.parent=null},s.sync),s.watch(()=>this.sublayers,(e,t)=>{if(t)for(const e of t)e.layer=e.parent=null;if(e)for(const t of e)t.parent=this,t.layer=this.layer},s.sync),s.watch(()=>this.layer,e=>{if(this.sublayers)for(const t of this.sublayers)t.layer=e},s.sync)])}get id(){return this._get("id")??f++}set id(e){this._set("id",e)}readLegendUrl(e,t){return t.legendUrl??t.legendURL??null}get effectiveScaleRange(){const{minScale:e,maxScale:t}=this;return{minScale:e,maxScale:t}}castSublayers(e){return u.ensureType(r.ofType(h),e)}set visible(e){this._setAndNotifyLayer("visible",e)}clone(){const e=new h;return this.hasOwnProperty("description")&&(e.description=this.description),this.hasOwnProperty("fullExtent")&&(e.fullExtent=this.fullExtent.clone()),this.hasOwnProperty("fullExtents")&&(e.fullExtents=this.fullExtents?.map(e=>e.clone())??null),this.hasOwnProperty("legendUrl")&&(e.legendUrl=this.legendUrl),this.hasOwnProperty("legendEnabled")&&(e.legendEnabled=this.legendEnabled),this.hasOwnProperty("layer")&&(e.layer=this.layer),this.hasOwnProperty("name")&&(e.name=this.name),this.hasOwnProperty("parent")&&(e.parent=this.parent),this.hasOwnProperty("queryable")&&(e.queryable=this.queryable),this.hasOwnProperty("sublayers")&&(e.sublayers=this.sublayers?.map(e=>e.clone())),this.hasOwnProperty("spatialReferences")&&(e.spatialReferences=this.spatialReferences?.map(e=>e)),this.hasOwnProperty("visible")&&(e.visible=this.visible),this.hasOwnProperty("title")&&(e.title=this.title),e}_setAndNotifyLayer(e,t){const r=this.layer;this._get(e)!==t&&(this._set(e,t),r&&r.emit("wms-sublayer-update",{propertyName:e,id:this.id}))}},t.__decorate([a.property()],e.default.prototype,"description",void 0),t.__decorate([a.property({readOnly:!0})],e.default.prototype,"dimensions",void 0),t.__decorate([a.property({type:c,json:{name:"extent"}})],e.default.prototype,"fullExtent",void 0),t.__decorate([a.property()],e.default.prototype,"fullExtents",void 0),t.__decorate([a.property({type:Number,json:{write:{enabled:!1,overridePolicy:()=>({ignoreOrigin:!0,enabled:!0})}}})],e.default.prototype,"id",null),t.__decorate([a.property({type:String,json:{name:"legendUrl",write:{ignoreOrigin:!0}}})],e.default.prototype,"legendUrl",void 0),t.__decorate([d.reader("legendUrl",["legendUrl","legendURL"])],e.default.prototype,"readLegendUrl",null),t.__decorate([a.property({type:Boolean,json:{name:"showLegend",origins:{"web-map":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],e.default.prototype,"legendEnabled",void 0),t.__decorate([a.property()],e.default.prototype,"layer",void 0),t.__decorate([a.property()],e.default.prototype,"maxScale",void 0),t.__decorate([a.property()],e.default.prototype,"minScale",void 0),t.__decorate([a.property({readOnly:!0})],e.default.prototype,"effectiveScaleRange",null),t.__decorate([a.property({type:String,json:{write:{ignoreOrigin:!0}}})],e.default.prototype,"name",void 0),t.__decorate([a.property()],e.default.prototype,"parent",void 0),t.__decorate([a.property({type:Boolean,json:{read:{source:"showPopup"},write:{ignoreOrigin:!0,target:"showPopup"}}})],e.default.prototype,"popupEnabled",void 0),t.__decorate([a.property({type:Boolean,json:{write:{ignoreOrigin:!0}}})],e.default.prototype,"queryable",void 0),t.__decorate([a.property()],e.default.prototype,"sublayers",void 0),t.__decorate([i.cast("sublayers")],e.default.prototype,"castSublayers",null),t.__decorate([a.property({type:[Number],json:{read:{source:"spatialReferences"}}})],e.default.prototype,"spatialReferences",void 0),t.__decorate([a.property({type:String,json:{write:{ignoreOrigin:!0}}})],e.default.prototype,"title",void 0),t.__decorate([a.property({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"}}})],e.default.prototype,"visible",null),e.default=h=t.__decorate([y.subclass("esri.layers.support.WMSSublayer")],e.default),e.default});