// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../chunks/tslib.es6","../../core/jsonMap","../../core/JSONSupport","../../core/lang","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/cast","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","../../core/accessorSupport/ensureType","../../geometry/Point","./DimensionalDefinition","./RasterFunction"],function(e,t,r,o,i,s,a,n,c,l,d,p,u,m){"use strict";var h;const y=r.strict()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),f=r.strict()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});return e.default=h=class extends o.JSONSupport{constructor(e){super(e),this.ascending=!0,this.itemRasterFunction=null,this.lockRasterIds=null,this.method="none",this.multidimensionalDefinition=null,this.objectIds=null,this.operation="first",this.sortField=null,this.sortValue=null,this.viewpoint=null,this.where=null}readAscending(e,t){return null!=t.ascending?t.ascending:null==t.sortAscending||t.sortAscending}readMethod(e,t){return function(e){let t;switch(e?e.toLowerCase().replace("esrimosaic",""):""){case"byattribute":case"attribute":t="esriMosaicAttribute";break;case"lockraster":t="esriMosaicLockRaster";break;case"center":t="esriMosaicCenter";break;case"northwest":t="esriMosaicNorthwest";break;case"nadir":t="esriMosaicNadir";break;case"viewpoint":t="esriMosaicViewpoint";break;case"seamline":t="esriMosaicSeamline";break;default:t="esriMosaicNone"}return f.fromJSON(t)}(t.mosaicMethod||t.defaultMosaicMethod)}writeMultidimensionalDefinition(e,t,r){null!=e&&(e=e.filter(({variableName:e,dimensionName:t})=>e&&"*"!==e||t)).length&&(t[r]=e.map(e=>e.toJSON()))}readOperation(e,t){const r=t.mosaicOperation,o=t.mosaicOperator?.toLowerCase(),i=r||(o?y.toJSON(o):null);return y.fromJSON(i)||"first"}castSortValue(e){return null==e||"string"==typeof e||"number"==typeof e?e:`${e}`}clone(){return new h({ascending:this.ascending,itemRasterFunction:i.clone(this.itemRasterFunction),lockRasterIds:i.clone(this.lockRasterIds),method:this.method,multidimensionalDefinition:i.clone(this.multidimensionalDefinition),objectIds:i.clone(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:i.clone(this.viewpoint),where:this.where})}},t.__decorate([s.property({type:Boolean,json:{write:!0}})],e.default.prototype,"ascending",void 0),t.__decorate([n.reader("ascending",["ascending","sortAscending"])],e.default.prototype,"readAscending",null),t.__decorate([s.property({type:m,json:{name:"itemRenderingRule",write:!0}})],e.default.prototype,"itemRasterFunction",void 0),t.__decorate([s.property({type:[d.Integer],json:{write:{overridePolicy(){return{enabled:"lock-raster"===this.method}}}}})],e.default.prototype,"lockRasterIds",void 0),t.__decorate([s.property({type:f.apiValues,json:{type:f.jsonValues,write:{target:"mosaicMethod",writer:f.write,isRequired:!0}}})],e.default.prototype,"method",void 0),t.__decorate([n.reader("method",["mosaicMethod","defaultMosaicMethod"])],e.default.prototype,"readMethod",null),t.__decorate([s.property({type:[u],json:{write:!0}})],e.default.prototype,"multidimensionalDefinition",void 0),t.__decorate([l.writer("multidimensionalDefinition")],e.default.prototype,"writeMultidimensionalDefinition",null),t.__decorate([s.property({type:[d.Integer],json:{name:"fids",write:!0}})],e.default.prototype,"objectIds",void 0),t.__decorate([s.property({type:y.apiValues,json:{type:y.jsonValues,read:{reader:y.read},write:{target:"mosaicOperation",writer:y.write}}})],e.default.prototype,"operation",void 0),t.__decorate([n.reader("operation",["mosaicOperation","mosaicOperator"])],e.default.prototype,"readOperation",null),t.__decorate([s.property({type:String,json:{write:{overridePolicy(){return{enabled:"attribute"===this.method}}}}})],e.default.prototype,"sortField",void 0),t.__decorate([s.property({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:"attribute"===this.method,allowNull:!0}}}}})],e.default.prototype,"sortValue",void 0),t.__decorate([a.cast("sortValue")],e.default.prototype,"castSortValue",null),t.__decorate([s.property({type:p,json:{write:!0}})],e.default.prototype,"viewpoint",void 0),t.__decorate([s.property({type:String,json:{write:!0}})],e.default.prototype,"where",void 0),e.default=h=t.__decorate([c.subclass("esri.layers.support.MosaicRule")],e.default),e.default});