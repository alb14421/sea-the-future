// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../rest/support/Query"],function(e,t){"use strict";function r(e){return a(e)*u(e)}function u(e){return e.capabilities.query.maxRecordCount||2e3}function a(e){return e.capabilities.query.supportsMaxRecordCountFactor?t.MAX_MAX_RECORD_COUNT_FACTOR:1}e.getMaxRecordCountFactor=a,e.getMaximumQuerySize=r,e.getMaximumRecordCount=u,e.queryAllJSON=async function(e,t,u){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=a(e));const o=r(e),n=e.capabilities.query.supportsPagination;t.start=0,t.num=o;let i=null;for(;;){const r=await e.source.queryFeaturesJSON(t,u);if(null==i?i=r:i.features=i.features.concat(r.features),i.exceededTransferLimit=r.exceededTransferLimit,!n||!r.exceededTransferLimit)break;t.start+=o}return i},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});