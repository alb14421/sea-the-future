// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../core/SetUtils","../../support/dateUtils"],function(e,n,i){"use strict";const t=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function l(e){return null!=e&&("date-only"===e.type||"esriFieldTypeDateOnly"===e.type)}function r(e){return null!=e&&("timestamp-offset"===e.type||"esriFieldTypeTimestampOffset"===e.type)}function a(e){return null!=e&&("time-only"===e.type||"esriFieldTypeTimeOnly"===e.type)}const o=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]),u=n.union(t,o);function s(e,n){const i=n??e?.domain;if(!i||"range"!==i.type)return;const o="range"in i?i.range[0]:i.minValue,u="range"in i?i.range[1]:i.maxValue,s=function(e){return null!=e&&t.has(e.type)}(e);return l(e)||a(e)||r(e)?{...m(e,u,o),isInteger:s}:{min:null!=o&&"number"==typeof o?o:null,max:null!=u&&"number"==typeof u?u:null,rawMin:o,rawMax:u,isInteger:s}}function m(e,n,t){return l(e)?{min:i.dateOnlyToDateTime(t)?.toMillis(),max:i.dateOnlyToDateTime(n)?.toMillis(),rawMin:t,rawMax:n}:a(e)?{min:i.timeOnlyToDateTime(t)?.toMillis(),max:i.timeOnlyToDateTime(n)?.toMillis(),rawMin:t,rawMax:n}:r(e)?{min:i.timestampOffsetToDateTime(t)?.toMillis(),max:i.timestampOffsetToDateTime(n)?.toMillis(),rawMin:t,rawMax:n}:{max:null,min:null}}e.dateTimeFieldValuesToNumericRange=m,e.getDomainRange=s,e.isDomainValidForField=function(e,n){switch(n.type){case"range":{const{min:i,max:t}=s(e,n);return l(e)||a(e)||r(e)?!!i&&!!t:"number"==typeof i&&Number.isFinite(i)&&"number"==typeof t&&Number.isFinite(t)}case"codedValue":case"coded-value":{const i=typeof n.codedValues[0].code;if("string"===i&&function(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}(e)||"number"===i&&function(e){return null!=e&&u.has(e.type)}(e))return!0}}return!1},e.validateDomainValue=function(e,n,i){const t=i??e?.domain;if(!t)return null;switch(t.type){case"range":{const{min:i,max:l}=s(e,t);if(null!=i&&+n<i||null!=l&&+n>l)return"domain-validation-error::value-out-of-range";break}case"coded-value":case"codedValue":if(null==t.codedValues||t.codedValues.every(e=>null==e||e.code!==n))return"domain-validation-error::invalid-coded-value"}return null},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});