// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../../chunks/tslib.es6","../../core/Collection","../../core/JSONSupport","../../core/Warning","../../core/Logger","../../core/has","../../core/RandomLCG","../../core/Error","../../core/accessorSupport/decorators/subclass","../../geometry/Polygon","../../geometry/projectionUtils"],function(e,r,t,o,n,s,c,a,i,l,p){"use strict";var u;let f=u=class extends(t.JSONSupportMixin(r.ofType(l))){constructor(e){super(e)}clone(){return new u(this.items.map(e=>e.clone()))}write(e,r){return this.toJSON(r)}toJSON(e){const r=e?.layer?.spatialReference;return r?this.toArray().map(t=>{if(!r.equals(t.spatialReference)){if(!p.canProjectWithoutEngine(t.spatialReference,r))return e?.messages?.push(new o("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:e.layer.spatialReference,context:e})),null;const n=new l;p.projectPolygon(t,n,r),t=n}const n=t.toJSON(e);return delete n.spatialReference,n}).filter(e=>null!=e):this.toArray().map(r=>r.toJSON(e))}static fromJSON(e,r){const t=new u;return e.forEach(e=>t.add(l.fromJSON(e,r))),t}};return f=u=e.__decorate([i.subclass("esri.layers.support.PolygonCollection")],f),f});