// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../request","../../core/Error"],function(e,o,n){"use strict";e.fetchIndexInfo=async function(e,r,t,a,s,d,i){let l=null;if(null!=t){const n=`${e}/nodepages/`,r=n+Math.floor(t.rootIndex/t.nodesPerPage);try{return{type:"page",rootPage:(await o(r,{query:{f:"json",...a,token:s},responseType:"json",signal:i})).data,rootIndex:t.rootIndex,pageSize:t.nodesPerPage,lodMetric:t.lodSelectionMetricType,urlPrefix:n}}catch(e){null!=d&&d.warn("#fetchIndexInfo()","Failed to load root node page. Falling back to node documents.",r,e),l=e}}if(!r)return null;const c=r?.split("/").pop(),u=`${e}/nodes/`,p=u+c;try{return{type:"node",rootNode:(await o(p,{query:{f:"json",...a,token:s},responseType:"json",signal:i})).data,urlPrefix:u}}catch(e){throw new n("sceneservice:root-node-missing","Root node missing.",{pageError:l,nodeError:e,url:p})}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});