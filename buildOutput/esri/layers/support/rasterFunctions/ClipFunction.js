// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../../../chunks/tslib.es6","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","./BaseRasterFunction","./ClipFunctionArguments","./clipUtils","./rasterProjectionHelper"],function(e,t,r,s,o,n,i,p,c,u){"use strict";let a=class extends i{constructor(){super(...arguments),this.functionName="Clip",this.functionArguments=null,this.rasterArgumentNames=["raster"],this.isNoopProcess=!0}_bindSourceRasters(){const e=this.sourceRasterInfos[0].clone();this.outputPixelType=this._getOutputPixelType(e.pixelType),e.pixelType=this.outputPixelType,this.rasterInfo=e;const{functionArguments:t}=this,{clippingGeometry:r,clippingType:s}=t;if(!r)return{success:!1,supportsGPU:!1,error:"missing clipping geometry"};if("outside"===s)try{const{spatialReference:t}=e,s="extent"===r.type?u.projectExtent(r,t):u.projectPolygon(r,t).extent;s&&c.clipRasterInfo(e,s)}catch{}return{success:!0,supportsGPU:!0}}_processPixels(e){return e.pixelBlocks?.[0]}_getWebGLParameters(){const{clippingGeometry:e,clippingType:t}=this.functionArguments;return{clippingGeometry:e.toJSON(),clippingType:t}}};return e.__decorate([t.property({json:{write:!0,name:"rasterFunction"}})],a.prototype,"functionName",void 0),e.__decorate([t.property({type:p,json:{write:!0,name:"rasterFunctionArguments"}})],a.prototype,"functionArguments",void 0),e.__decorate([t.property()],a.prototype,"rasterArgumentNames",void 0),e.__decorate([t.property()],a.prototype,"isNoopProcess",void 0),a=e.__decorate([n.subclass("esri.layers.support.rasterFunctions.ClipFunction")],a),a});