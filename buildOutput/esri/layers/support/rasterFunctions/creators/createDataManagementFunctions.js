// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../colorUtils","../../rasterFunctionConstants","./utils","../../../../renderers/support/colorRampUtils"],function(t,e,n,a,r){"use strict";t.clip=function(t){const{geometry:e,keepOutside:n,outputPixelType:r="unknown",raster:o}=t,s="declaredClass"in e?e.toJSON():e,i=n?2:1;return a.createRasterFunction("Clip",{clippingGeometry:s,clippingType:i,raster:o},r)},t.colormap=function(t){return"colormap"in t?function(t){const n=t.colormap.map(t=>{if("value"in t){const n="string"==typeof t.color?e.getNamedColor(t.color)??e.hexToRgba(t.color):t.color;(t=[t.value,...n])[4]&&t[4]<=1&&(t[4]=Math.round(255*t[4]))}return t}),{raster:r,outputPixelType:o}=t,s={colormap:n,raster:r};return a.createRasterFunction("Colormap",s,o)}(t):"colorRamp"in t?function(t){const{raster:e,colorRamp:n,outputPixelType:r}=t,o={colorRamp:"toJSON"in n?n.toJSON():n,raster:e};return a.createRasterFunction("Colormap",o,r)}(t):function(t){const{colorRampName:e}=t,o=Object.values(n.colormapName).find(t=>t.toLowerCase()===e?.toLowerCase()),s=r.colorRampDict.toJSON(e),{raster:i,outputPixelType:u="unknown"}=t,c=o?{colormapName:o,raster:i}:{colorRampName:s,raster:i};return a.createRasterFunction("Colormap",c,u)}(t)},t.colormapToRGB=function(t){const{raster:e,outputPixelType:n="u8"}=t;return a.createRasterFunction("ColormapToRGB",{raster:e},n)},t.compositeBand=function(t){const{rasters:e,outputPixelType:n}=t;return a.createRasterFunction("CompositeBand",{rasters:e},n)},t.createColorComposite=function(t){const{redBand:e,greenBand:n,blueBand:r,raster:o,outputPixelType:s}=t,i={raster:o,method:"name"===t.method?0:2,bandIndexesR:e,bandIndexesG:n,bandIndexesB:r};return a.createRasterFunction("CreateColorComposite",i,s)},t.extractBand=function(t){const{raster:e,outputPixelType:n="unknown"}=t,r={raster:e,missingBandAction:"fail"===t.missingBandAction?1:0};return"bandIds"in t?r.bandIds=t.bandIds:"bandNames"in t?r.bandNames=t.bandNames:"bandWavelengths"in t&&(r.bandWavelengths=t.bandWavelengths),a.createRasterFunction("ExtractBand",r,n)},t.mask=function(t){const{raster:e,outputPixelType:n="unknown"}=t,r=t.includedRanges?.flatMap(t=>t),o=t.noDataValues?.map(t=>t.join(" ")),s={raster:e,includedRanges:r,noDataInterpretation:"match-all"===t.noDataInterpretation?1:0,noDataValues:o};return a.createRasterFunction("Mask",s,n)},t.remap=function(t){const{allowUnmatched:e,raster:n,rangeMaps:r,outputPixelType:o,replacementValue:s}=t,i=r?.filter(({output:t})=>null!=t),u=i?.flatMap(({range:t})=>t),c=i?.map(({output:t})=>t),l=r?.filter(t=>null==t.output)?.flatMap(({range:t})=>t),p={allowUnmatched:e,raster:n,inputRanges:u,outputValues:c,noDataRanges:l,replacementValue:s};return a.createRasterFunction("Remap",p,o)},t.statisticsHistogram=function(t){const{raster:e,histograms:n,outputPixelType:r}=t,o=t.statistics?.map(t=>({min:t.min,max:t.max,mean:t.avg,standardDeviation:t.stddev}));return a.createRasterFunction("StatisticsHistograms",{raster:e,statistics:o,histograms:n},r)},t.table=function(t){const{raster:e,attributeTable:n,outputPixelType:r="unknown"}=t,o="toJSON"in n?n.toJSON():n;return a.createRasterFunction("Table",{raster:e,attributeTableAsRecordSet:o},r)},t.transposeBits=function(t){const{inputBitPositions:e,raster:n,fillRaster:r,outputBitPositions:o,outputPixelType:s}=t,i={inputBitPositions:e,outputBitPositions:o,raster:n};return null!=r&&("number"==typeof r?(i.constantFillCheck=!0,i.constantFillValue=r):i.fillRaster=r),a.createRasterFunction("TransposeBits",i,s)},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});