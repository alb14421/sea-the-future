// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../chunks/tslib.es6","../../core/JSONSupport","../../core/lang","../../core/Warning","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","../../core/accessorSupport/decorators/persistable","../../geometry/Polygon","../../geometry/projectionUtils"],function(e,t,r,o,s,a,c,p,i,l,n,u,y){"use strict";var d;return e.default=d=class extends r.JSONSupport{constructor(e){super(e),this.geometry=null,this.type="clip"}writeGeometry(e,t,r,o){if(o.layer?.spatialReference&&!o.layer.spatialReference.equals(this.geometry.spatialReference)){if(!y.canProjectWithoutEngine(e.spatialReference,o.layer.spatialReference))return void(o?.messages&&o.messages.push(new s("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:o.layer.spatialReference,context:o})));const a=new u;y.projectPolygon(e,a,o.layer.spatialReference),t[r]=a.toJSON(o)}else t[r]=e.toJSON(o)}clone(){return new d({geometry:o.clone(this.geometry),type:this.type})}},t.__decorate([a.property({type:u}),n.persistable()],e.default.prototype,"geometry",void 0),t.__decorate([l.writer(["web-scene","portal-item"],"geometry")],e.default.prototype,"writeGeometry",null),t.__decorate([a.property({type:["clip","mask","replace"],nonNullable:!0}),n.persistable()],e.default.prototype,"type",void 0),e.default=d=t.__decorate([i.subclass("esri.layers.support.SceneModification")],e.default),e.default});