// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../Graphic","../../core/has","../../core/lang","../../core/typedArrayUtil","../../geometry/SpatialReference","../../geometry/support/jsonUtils","./dehydratedPoint"],function(e,t,n,a,r,i,s,o){"use strict";function l(e){return"declaredClass"in e}function c(e){return"declaredClass"in e}function u(e){return"declaredClass"in e}function m(e){return null==e?null:l(e)?e:s.fromJSON(function(e){const{wkid:t,wkt:n,wkt2:a,latestWkid:r}=e.spatialReference,i={wkid:t,wkt:n,wkt2:a,latestWkid:r};switch(e.type){case"point":{const{x:t,y:n,z:a,m:r}=e;return{x:t,y:n,z:a,m:r,spatialReference:i}}case"polygon":{const{rings:t,hasZ:n,hasM:a}=e;return{rings:h(t),hasZ:n,hasM:a,spatialReference:i}}case"polyline":{const{paths:t,hasZ:n,hasM:a}=e;return{paths:h(t),hasZ:n,hasM:a,spatialReference:i}}case"extent":{const{xmin:t,xmax:n,ymin:a,ymax:r,zmin:s,zmax:o,mmin:l,mmax:c,hasZ:u,hasM:m}=e;return{xmin:t,xmax:n,ymin:a,ymax:r,zmin:s,zmax:o,mmin:l,mmax:c,hasZ:u,hasM:m,spatialReference:i}}case"multipoint":{const{points:t,hasZ:n,hasM:a}=e;return{points:f(t)?y(t):t,hasZ:n,hasM:a,spatialReference:i}}default:return}}(e))}function h(e){return function(e){for(const t of e)if(0!==t.length)return f(t);return!1}(e)?e.map(e=>y(e)):e}function y(e){return e.map(e=>Array.from(e))}function f(e){return e.length>0&&(r.isFloat32Array(e[0])||r.isFloat64Array(e[0]))}e.clonePoint=function(e,t){if(!e)return null;let n;if(c(e)){if(null==t)return e.clone();if(c(t))return t.copy(e)}return null!=t?(n=t,n.x=e.x,n.y=e.y,n.spatialReference=e.spatialReference,e.hasZ?(n.z=e.z,n.hasZ=e.hasZ):(n.z=void 0,n.hasZ=!1),e.hasM?(n.m=e.m,n.hasM=!0):(n.m=void 0,n.hasM=!1)):(n=o.makeDehydratedPoint(e.x,e.y,e.z,e.spatialReference),e.hasM&&(n.m=e.m,n.hasM=!0)),n},e.hydrateGeometry=m,e.hydrateGraphic=function(e,n){return e?u(e)?e:new t({layer:n,sourceLayer:n,visible:e.visible,symbol:a.clone(e.symbol),attributes:a.clone(e.attributes),geometry:m(e.geometry)}):null},e.hydratedSpatialReference=function(e){const{wkid:t,wkt:n,wkt2:a,latestWkid:r}=e,s={wkid:t,wkt:n,wkt2:a,latestWkid:r};return i.fromJSON(s)},e.isHydratedGeometry=l,e.isHydratedGraphic=u,e.isHydratedPoint=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});