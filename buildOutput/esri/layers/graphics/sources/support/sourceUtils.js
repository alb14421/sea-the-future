// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../../core/date","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],function(e,t,i,r,n){"use strict";class s{constructor(e){this.description=e,this.code=null}}class o{constructor(e){this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error=new s(e)}}function l(e){return new o(e)}class u{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}const a=new Set;function c(e,t){let r=t;return n.isNumericField(e)&&"string"==typeof t?r=parseFloat(t):n.isStringField(e)&&null!=t&&"string"!=typeof t?r=String(t):n.isDateField(e)&&"string"==typeof t&&(r=i.parseDate(t)),n.sanitizeNullFieldValue(r)}let p;t.createFeatureEditErrorResult=l,t.createFeatureEditSuccessResult=function(e){return new u(e)},t.loadGeometryEngineForSimplify=async function(t,i){!r.isValid(t)||"esriGeometryPolygon"!==i&&"esriGeometryPolyline"!==i||await async function(){return null==p&&(p=await new Promise((t,i)=>e(["../../../../geometry/geometryEngineJSON"],t,i))),p}()},t.mixAttributes=function(e,t,i,r=!1){a.clear();for(const s in i){const o=e.get(s);if(!o)continue;const u=c(o,i[s]);if(a.add(o.name),o&&(r||o.editable)){const e=n.validateFieldValue(o,u);if(e)return l(n.validationErrorToString(e,o,u));t[o.name]=u}}for(const t of e.requiredFields??[])if(!a.has(t.name))return l(`missing required field "${t.name}"`);return null},t.queryBinsCapabilities={supportsAutoIntervalBin:!0,supportsFixedIntervalBin:!0,supportsFixedBoundariesBin:!0,supportsDateBin:!0,supportsStackBy:!0,supportsSplitBy:!0,supportsNormalization:!0,supportedStatisticTypes:["COUNT","SUM","AVG","VAR","STDDEV","MIN","MAX","PERCENTILE_CONT","PERCENTILE_DISC","CentroidAggregate","EnvelopeAggregate","ConvexHullAggregate"],supportedNormalizationTypes:["field","log","naturalLog","percentOfTotal","squareRoot"]},t.simplify=function(e,t){if(!e||!r.isValid(t))return e;if("rings"in e||"paths"in e){if(null==p)throw new TypeError("geometry engine not loaded");return p.simplify(t,e)}return e},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});