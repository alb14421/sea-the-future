// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../chunks/tslib.es6","../analysis/Viewshed","../analysis/ViewshedAnalysis","../core/Collection","../core/MultiOriginJSONSupport","../core/reactiveUtils","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","./Layer","./mixins/OperationalLayer"],function(e,r,t,s,o,i,a,n,p,c,l,d,y,u){"use strict";let h=class extends(u.OperationalLayer(o.MultiOriginJSONMixin(y))){constructor(e){super(e),this.type="viewshed",this.operationalLayerType="ViewshedLayer",this.source=new t,this.opacity=1}initialize(){this.addHandles(i.watch(()=>this.source,(e,r)=>{null!=r&&r.parent===this&&(r.parent=null),null!=e&&(e.parent=this)},i.syncAndInitial))}async load(){return this.addResolvingPromise(this.source.waitComputeExtent()),this}get spatialReference(){return this.source.spatialReference}get fullExtent(){return this.source.extent}releaseAnalysis(e){this.source===e&&(this.source=new t)}get analysis(){return this.source}set analysis(e){this.source=e}get viewsheds(){return this.source.viewsheds}set viewsheds(e){this.source.viewsheds=e}writeViewsheds(e,r,t,s){r.viewsheds=e.filter(e=>e.valid).toJSON(s)}};return e.__decorate([a.property({json:{read:!1},readOnly:!0})],h.prototype,"type",void 0),e.__decorate([a.property({type:["ViewshedLayer"]})],h.prototype,"operationalLayerType",void 0),e.__decorate([a.property({type:t,nonNullable:!0})],h.prototype,"source",void 0),e.__decorate([a.property({readOnly:!0})],h.prototype,"spatialReference",null),e.__decorate([a.property({readOnly:!0})],h.prototype,"fullExtent",null),e.__decorate([a.property({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],h.prototype,"opacity",void 0),e.__decorate([a.property({type:["show","hide"]})],h.prototype,"listMode",void 0),e.__decorate([a.property({type:s.ofType(r),json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{ignoreOrigin:!0}}}}})],h.prototype,"viewsheds",null),e.__decorate([d.writer("web-scene","viewsheds")],h.prototype,"writeViewsheds",null),h=e.__decorate([l.subclass("esri.layers.ViewshedLayer")],h),h});