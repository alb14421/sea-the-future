// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../core/Error","../../core/object","./parser","./utils"],function(e,t,r,s,n){"use strict";function a(e){const t=s.parse(e);return t?n.isEffectFunctions(t)?t.map(e=>e.toJSON()):t.map(({scale:e,effects:t})=>({scale:e,value:t.map(e=>e.toJSON())})):null}function c(e){if(!e||0===e.length)return null;if(function(e){const t=e[0];return!!t&&"scale"in t}(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:o(r.value)});return t}return o(e)}function o(e){if(!e?.length)return"";const t=[];for(const r of e){let e=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":e=[u(r,"amount")];break;case"blur":e=[u(r,"radius","pt")];break;case"hue-rotate":e=[u(r,"angle","deg")];break;case"drop-shadow":e=[u(r,"xoffset","pt"),u(r,"yoffset","pt"),u(r,"blurRadius","pt"),i(r,"color")];break;case"bloom":e=[u(r,"strength"),u(r,"radius","pt"),u(r,"threshold")]}const n=`${r.type}(${e.filter(Boolean).join(" ")})`;s.parse(n),t.push(n)}return t.join(" ")}function u(e,r,s){if(null==e[r])throw new t("effect:missing-parameter",`Missing parameter '${r}' in ${e.type} effect`,{effect:e});return s?e[r]+s:""+e[r]}function i(e,r){if(null==e[r])throw new t("effect:missing-parameter",`Missing parameter '${r}' in ${e.type} effect`,{effect:e});const s=e[r];return`rgba(${s[0]||0}, ${s[1]||0}, ${s[2]||0}, ${s[3]/255||0})`}e.effectFunctionsFromJSON=o,e.fromJSON=c,e.read=function(e,t,r){try{return c(e)}catch(e){r?.messages?.push(e)}return null},e.toJSON=a,e.write=function(e,t,s,n){try{const n=a(e);r.setDeepValue(s,n,t)}catch(e){n.messages&&n.messages.push(e)}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});