// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./utils"],function(e,t){"use strict";function n(e,t,s,p,i,r,c,u,l){if(c.has(p))return l;for(const f of p.properties){const d=t?`${t}.${f.name}`:f.name,m=s?`${s}.${f.name}`:f.name,g=i.get(m);if(g){const t=r.get(g[e].id);l.push({name:d,type:"ref",ref:g,refName:t,required:f.required}),a(e,m,g[e],i,r,u)}else"string"==typeof f.type?l.push(o(d,f)):(c.add(p),n(e,d,m,f.type,i,r,c,u,l))}return c.delete(p),l}function a(e,t,a,o,p,i){if(i.has(a.id))return i;const r={container:a,text:null,props:[]};return p.get(a.id).forEach(e=>i.set(e,r)),n(e,"",t,a,o,p,new Set,i,r.props),r.props.sort(s),i}function o(e,t){return{name:e,type:t.enum||("string"==typeof t.type?t.type:""),default:JSON.stringify(t.default),required:t.required}}function s(e,t){const n=e.name.localeCompare(t.name);if(0!==n)return n;const a=(e.type||"").localeCompare(t.type||"");return 0!==a?a:(e.default||"").localeCompare(t.default||"")}e.collect=function(e){const n=function(e){const n=t.collectClassPaths(e.api),a=t.collectClassPaths(e.spec),o=new Map;o.set("",{api:e.api,spec:e.spec});for(const[e,t]of n){const n=a.get(e);n&&o.set(e,{api:t,spec:n})}return o}(e),o=[],s=function(e){const t={api:new Map,spec:new Map};for(const n of e.values()){const e=`${n.api.name} (${n.spec.name})${n.api.typeValue?` <${n.api.typeValue}>`:""}`;let a=t.api.get(n.api.id);a||(a=new Set,t.api.set(n.api.id,a)),a.add(e);let o=t.spec.get(n.spec.id);o||(o=new Set,t.spec.set(n.spec.id,o)),o.add(e)}return t}(n),p=new Map;a("api","",e.api,n,s.api,p);const i=new Map;a("spec","",e.spec,n,s.spec,i);const r=function(e){const t=new Map;for(const n of e.keys()){const a=n?n.split(".").length:0,o=e.get(n).api.id;t.has("id")?t.set(o,Math.min(a,t.get(o))):t.set(o,a)}return t}(n);for(const[e,t]of p){if("esri/rest/support/AlgorithmicColorRamp (colorRamp_algorithmic_part_schema.json) <algorithmic>"===e)continue;const n=i.get(e),a=r.get(t.container.id),s=`${t.container.name} (${n.container.name})${t.container.typeValue?` <${t.container.typeValue}>`:""}`;o.push({name:s,api:t,spec:n,indent:a})}return o},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});