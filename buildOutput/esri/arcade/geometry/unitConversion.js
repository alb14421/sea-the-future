// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../enum","../executionError","./extendedUnitData","./wkt","../../core/has","../../core/unitUtils","../../geometry/support/WKIDUnitConversion"],function(e,r,a,t,n,s,i,u){"use strict";function c(e,r){let a;switch(e){case"linear":a=t.linearUnitLookup;break;case"angular":a=t.angularUnitLookup;break;case"area":a=t.areaUnitLookup;break;default:return null}return a.get(r)}function o(e){const r=e.wkid;if(null!=r){const e=u.units[u[r]];if(null!=e)switch(e){case"Meter":return c("linear",9001);case"Foot":return c("linear",9002);case"Foot_US":return c("linear",9003);case"Foot_Clarke":return c("linear",9005);case"Yard_Clarke":return c("linear",9037);case"Link_Clarke":return c("linear",9039);case"Yard_Sears":return c("linear",9040);case"Foot_Sears":return c("linear",9041);case"Chain_Sears":return c("linear",9042);case"Chain_Benoit_1895_B":return c("linear",9062);case"Yard_Indian":return c("linear",9084);case"Yard_Indian_1937":return c("linear",9085);case"Foot_Gold_Coast":return c("linear",9094);case"Chain":return c("linear",9097);case"Chain_Sears_1922_Truncated":return c("linear",9301);case"50_Kilometers":return c("linear",109030);case"150_Kilometers":return c("linear",109031);default:throw new Error(`Unknown unit name: ${e}`)}return i.gradGcsIds.has(r)?c("angular",9105):c("angular",9102)}const a=e.wkt2||e.wkt;if(null!=a){const e=n.findSpatialReferenceUnitFromWkt(a);if(null!=e){if(null!=e.wkid){const r=c(e.type,e.wkid);if(null!=r)return r}return{type:e.type,wkid:-1,factor:e.factor}}}return null}function l(e){if("linear"!==e.type)return null;if(-1===e.wkid)return{type:"area",wkid:-1,factor:e.factor**2};const r=t.linearUnitToAreaUnit.get(e.wkid);return null==r?null:c("area",r)}function m(e,r,a){if(e.type!==r.type)throw new Error(`Incompatible unit types. src=${e.type} dest=${r.type}`);return a*(e.factor/r.factor)}e.meters=t.meters,e.squareMeters=t.squareMeters,e.convert=function(e,r,a){return null==e||null==r?a:m(e,r,a)},e.convertFromSpatialReferenceUnit=function(e,r,a){if(null==e||null==r)return a;const t=o(e);if(null==t)throw new Error("Unknown spatial reference unit.");const n="area"===r.type&&"linear"===t.type?l(t):t;if(null==n)throw new Error(`Unknown spatial reference ${r.type} unit.`);return m(n,r,a)},e.convertToSpatialReferenceUnit=function(e,r,a){if(null==e||null==r)return a;const t=o(r);if(null==t)throw new Error("Unknown spatial reference unit.");const n="area"===e.type&&"linear"===t.type?l(t):t;if(null==n)throw new Error(`Unknown spatial reference ${e.type} unit.`);return m(e,n,a)},e.getSpatialReferenceUnit=o,e.toAreaUnit=function(e){if(null!=e){if("number"==typeof e)return t.areaUnitLookup.get(e)??t.linearUnitLookup.get(e)??t.angularUnitLookup.get(e);if("string"!=typeof e)throw new a.ArcadeExecutionError(null,"InvalidParameter",null);switch(r.toStringEnumKey(e)){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":return t.areaUnitLookup.get(109404);case"miles":case"mile":case"squaremile":case"squaremiles":return t.areaUnitLookup.get(109439);case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"km":return t.areaUnitLookup.get(109414);case"acres":case"acre":case"ac":return t.areaUnitLookup.get(109402);case"hectares":case"hectare":case"ha":return t.areaUnitLookup.get(109401);case"yard":case"yd":case"yards":case"squareyards":case"squareyard":return t.areaUnitLookup.get(109442);case"feet":case"ft":case"foot":case"squarefeet":case"squarefoot":return t.areaUnitLookup.get(109405);case"nmi":case"nauticalmile":case"nauticalmiles":case"squarenauticalmile":case"squarenauticalmiles":return t.areaUnitLookup.get(109409);case"millimeter":case"millimeters":case"squaremillimeter":case"squaremillimeters":return t.areaUnitLookup.get(109452);case"centimeter":case"centimeters":case"squarecentimeter":case"squarecentimeters":return t.areaUnitLookup.get(109451);case"decimeter":case"decimeters":case"squaredecimeter":case"squaredecimeters":return t.areaUnitLookup.get(109450);case"inch":case"inches":case"squareinch":case"squareinches":return t.areaUnitLookup.get(109453);case"usfoot":case"usfeet":case"squareusfoot":case"squareusfeet":return t.areaUnitLookup.get(109406);case"usmile":case"usmiles":case"squareusmile":case"squareusmiles":return t.areaUnitLookup.get(109413)}}},e.toLengthUnit=function(e){if(null!=e){if("number"==typeof e)return t.linearUnitLookup.get(e)??t.angularUnitLookup.get(e)??t.areaUnitLookup.get(e);if("string"!=typeof e)throw new a.ArcadeExecutionError(null,"InvalidParameter",null);switch(r.toStringEnumKey(e)){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":case"hectares":case"hectare":case"ha":return t.linearUnitLookup.get(9001);case"miles":case"mile":case"squaremile":case"squaremiles":return t.linearUnitLookup.get(9093);case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"km":return t.linearUnitLookup.get(9036);case"yard":case"yd":case"yards":case"squareyards":case"squareyard":case"acres":case"acre":case"ac":return t.linearUnitLookup.get(9096);case"feet":case"ft":case"foot":case"squarefeet":case"squarefoot":return t.linearUnitLookup.get(9002);case"nmi":case"nauticalmile":case"nauticalmiles":case"squarenauticalmile":case"squarenauticalmiles":return t.linearUnitLookup.get(9030);case"millimeter":case"millimeters":case"squaremillimeter":case"squaremillimeters":return t.linearUnitLookup.get(109007);case"centimeter":case"centimeters":case"squarecentimeter":case"squarecentimeters":return t.linearUnitLookup.get(109006);case"decimeter":case"decimeters":case"squaredecimeter":case"squaredecimeters":return t.linearUnitLookup.get(109005);case"inch":case"inches":case"squareinch":case"squareinches":return t.linearUnitLookup.get(109008);case"usfoot":case"usfeet":case"squareusfoot":case"squareusfeet":return t.linearUnitLookup.get(9003);case"usmile":case"usmiles":case"squareusmile":case"squareusmiles":return t.linearUnitLookup.get(9035)}}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});