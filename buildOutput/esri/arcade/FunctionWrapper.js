// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../core/promiseUtils"],function(t,e){"use strict";class n{constructor(){}}function r(t,e,r){if(t instanceof n&&!(t instanceof s)){const n=new s;return n.fn=t,n.parameterEvaluator=r,n.context=e,n}return t}class s extends n{constructor(){super(...arguments),this.fn=null,this.context=null}createFunction(t){return this.fn.createFunction(this.context)}call(t,e){return this.fn.marshalledCall(t,e,this.context,this.parameterEvaluator)}marshalledCall(t,e,n){return this.fn.marshalledCall(t,e,this.context,this.parameterEvaluator)}}t.ArcadeFunction=n,t.NativeFunction=class extends n{constructor(t){super(),this.fn=t}createFunction(t){return(...e)=>this.fn(t,{preparsed:!0,arguments:e})}call(t,e){return this.fn(t,e)}marshalledCall(t,a,c,o){return o(t,a,(a,l,i)=>{i=i.map(e=>e instanceof n&&!(e instanceof s)?r(e,t,o):e);const u=this.call(c,{args:i});return e.isPromiseLike(u)?u.then(t=>r(t,c,o)):u})}},t.ScopeMarshalledFunction=s,t.wrapModuleScopedResponse=r,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});