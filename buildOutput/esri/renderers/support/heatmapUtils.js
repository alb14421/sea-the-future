// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../core/mathUtils","../../core/screenUtils","../../chunks/vec42","../../core/libs/gl-matrix-2/factories/vec4f64"],function(t,e,r,n,o){"use strict";function i(t,r,o,i){let{color:a,ratio:c}=r,{color:s,ratio:u}=o;if(u===c){const t=1e-6;1===u?c-=t:u+=t}const l=e.clamp((i-c)/(u-c),0,1);n.lerp(t,a.toArray(),s.toArray(),l)}t.createValueFunction=function(t){return"function"==typeof t?t:t?e=>+e[t]:()=>1},t.evaluateDensityKernel=function(t,e,r){const n=Math.sqrt(t**2+e**2)/r;return n>1?0:3/(Math.PI*r**2)*(1-n**2)**2},t.gaussianBlurRadiusPxToKernelDensityRadiusPt=function(t){return r.px2pt(2.4*t)},t.generateGradient=function(t){const e=new Uint8ClampedArray(2048);if((t=t.filter(({ratio:t})=>t>=0&&t<=1).sort((t,e)=>t.ratio-e.ratio).map(({color:t,ratio:e})=>({color:t,ratio:Math.max(e,.001)}))).length<1)return e;let r=t[0],n=t[0],a=1;const c=o.create();for(let o=0;o<512;o++){const s=(o+.5)/512;for(;s>n.ratio&&a<t.length;)r=n,n=t[a++];i(c,r,n,s),e.set(c,4*o)}return e},t.kernelDensityRadiusPtToGaussianBlurRadiusPx=function(t){return r.pt2px(t)/2.4},t.magicKernelDensityRadiusInflationFactor=2.4,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});