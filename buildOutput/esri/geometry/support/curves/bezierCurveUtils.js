// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/mathUtils","../aaBoundingRect","./mathUtils"],function(t,e,n,o){"use strict";const r=[0,0];function i(t,e,n,o,r){const i=1-r,a=i*i,s=r*r,c=a*i,u=3*r*a,l=3*s*i,f=s*r;return[t[0]*c+e[0]*u+n[0]*l+o[0]*f,t[1]*c+e[1]*u+n[1]*l+o[1]*f]}function a(t,e,n){const i=t,[a,s,c]=e.b,u=o.interpolateSegment([0,0],i,s,n),l=o.interpolateSegment(r,s,c,n),f=o.interpolateSegment([0,0],c,a,n),p=o.interpolateSegment([0,0],u,l,n),d=o.interpolateSegment([0,0],l,f,n);return[{b:[o.interpolateSegment([],p,d,n),u,p]},{b:[[...a],d,f]}]}t.bezierCurveExtent=function(t,e,o){const r=e,[i,a,s]=o.b;return n.expandPointInPlace(t,r),n.expandPointInPlace(t,a),n.expandPointInPlace(t,s),n.expandPointInPlace(t,i),t},t.bezierCurveLength=function(t,e,n){let r=0,i=[e];for(let e=0;e<16;e++){let e=t;const s=[];for(const t of i)s.push(...a(e,t,.5)),e=t.b[0];i=s,e=t,r=0;let c=0;for(const t of i){const[n,i,a]=t.b,s=Math.sqrt(o.distance2(e,n));r+=(s+(Math.sqrt(o.distance2(e,i))+Math.sqrt(o.distance2(i,a))+Math.sqrt(o.distance2(a,n))))/2,c+=s,e=n}if(r-c<n)return r}return r},t.closestPointsOnBezierCurve=function(t,n,r){const a=t,[s,c,u]=n.b,l=o.findClosestAndFurthestCurveParametersToPoint(r,[.1,.5,.9],t=>{const e=1-t,[n,o]=i(a,c,u,s,t);return[n,o,3*e*e*(c[0]-a[0])+6*e*t*(u[0]-c[0])+3*t*t*(s[0]-u[0]),3*e*e*(c[1]-a[1])+6*e*t*(u[1]-c[1])+3*t*t*(s[1]-u[1]),6*e*(u[0]-2*c[0]+a[0])+6*t*(s[0]-2*u[0]+c[0]),6*e*(u[1]-2*c[1]+a[1])+6*t*(s[1]-2*u[1]+c[1])]}).map(t=>Math.min(1,Math.max(0,t)));l.push(0,1);let f=1/0;const p=l.map(t=>{const e=i(a,c,u,s,t),[n,o]=e,l=r[0]-n,p=r[1]-o,d=Math.sqrt(l*l+p*p);return f=Math.min(d,f),{t,curvePoint:e,distance:d}}),d=[];for(const t of p){const{t:n,distance:o}=t;e.floatEqualRelative(o,f)&&!d.some(({t})=>e.floatEqualAbsolute(t,n))&&d.push(t)}return d},t.interpolateBezierCurve=function(t,e,n){const o=t,[r,a,s]=e.b;return i(o,a,s,r,n)},t.interpolateCubicBezier=i,t.splitBezierCurve=a,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});