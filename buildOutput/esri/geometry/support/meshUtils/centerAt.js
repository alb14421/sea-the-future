// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/Logger","../../../chunks/vec32","../../../core/libs/gl-matrix-2/factories/vec3f64","../../projection/projectPointToVector","../MeshGeoreferencedVertexSpace","../MeshLocalVertexSpace","../meshVertexSpaceUtils","./geographicUtils","./projection","./vertexSpaceConversion"],function(e,t,r,o,i,n,c,a,s,l,p){"use strict";const f=()=>t.getLogger("esri.geometry.support.meshUtils.centerAt"),g=o.create(),u=o.create(),x=o.create();e.centerAt=function(e,t,v){if(!e.vertexAttributes?.position)return;const{vertexSpace:R}=e,j=v?.origin??e.origin,d=s.performGlobalOperation(f,R,j.spatialReference,v?.geographic);a.isRelativeVertexSpace(R)?function(e,t,n){const{vertexSpace:c}=e;if(!a.isRelativeVertexSpace(c))return;const s=u,p=g;if(!i.projectPointToVector(t,p,e.spatialReference))return void l.logProjectionError(f(),t.spatialReference,e.spatialReference,l.loadProjectErrorMessage);if(!i.projectPointToVector(n,s,e.spatialReference)){const t=e.origin;return s[0]=t.x,s[1]=t.y,s[2]=t.z,void l.logProjectionError(f(),n.spatialReference,e.spatialReference,l.loadProjectErrorMessage)}const v=r.subtract(x,p,s);c.origin=r.add(o.create(),c.origin,v)}(e,t,j):d?function(e,t,r){const i=o.fromValues(r.x,r.y,r.z??0),a=p.convertVertexSpace(e,new c({origin:i}));if(!a)return;const s=o.fromValues(t.x,t.y,t.z??0),l=p.convertVertexSpace({vertexAttributes:a,spatialReference:e.spatialReference,vertexSpace:new c({origin:s})},n.absolute);if(!l)return;const{position:f,normal:g,tangent:u}=l;e.vertexAttributes.position=f,e.vertexAttributes.normal=g,e.vertexAttributes.tangent=u,e.vertexAttributesChanged()}(e,t,j):function(e,t,r){const o=u,n=g;if(i.projectPointToVector(t,n,e.spatialReference)){if(!i.projectPointToVector(r,o,e.spatialReference)){const t=e.origin;return o[0]=t.x,o[1]=t.y,o[2]=t.z,void l.logProjectionError(f(),r.spatialReference,e.spatialReference,l.loadProjectErrorMessage)}(function(e,t,r){if(e)for(let o=0;o<e.length;o+=3)for(let i=0;i<3;i++)e[o+i]+=t[i]-r[i]})(e.vertexAttributes.position,n,o),e.vertexAttributesChanged()}else l.logProjectionError(f(),t.spatialReference,e.spatialReference,l.loadProjectErrorMessage)}(e,t,j)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});