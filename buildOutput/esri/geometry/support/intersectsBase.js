// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./contains"],function(t,n){"use strict";function e(t,e){return n.extentContainsPoint(t,e)}function r(t,n){const e=t.hasZ&&n.hasZ;let r,o,i;if(t.xmin<=n.xmin){if(r=n.xmin,t.xmax<r)return!1}else if(r=t.xmin,n.xmax<r)return!1;if(t.ymin<=n.ymin){if(o=n.ymin,t.ymax<o)return!1}else if(o=t.ymin,n.ymax<o)return!1;if(e&&n.hasZ)if(t.zmin<=n.zmin){if(i=n.zmin,t.zmax<i)return!1}else if(i=t.zmin,n.zmax<i)return!1;return!0}function o(t,e){const{points:r,hasZ:o}=e,i=o?n.extentContainsCoords3D:n.extentContainsCoords2D;for(const n of r)if(i(t,n))return!0;return!1}const i=[0,0],s=[0,0],c=[0,0],f=[0,0],u=[i,s,c,f],a=[[c,i],[i,s],[s,f],[f,c]];function l(t,e){return function(t,e){i[0]=t.xmin,i[1]=t.ymax,s[0]=t.xmax,s[1]=t.ymax,c[0]=t.xmin,c[1]=t.ymin,f[0]=t.xmax,f[1]=t.ymin;for(const t of u)if(n.ringsContainsCoords(e,t))return!0;for(const r of e){if(!r.length)continue;let e=r[0];if(n.extentContainsCoords2D(t,e))return!0;for(let o=1;o<r.length;o++){const i=r[o];if(n.extentContainsCoords2D(t,i)||y(e,i,a))return!0;e=i}}return!1}(t,e.rings)}function m(t,e){i[0]=t.xmin,i[1]=t.ymax,s[0]=t.xmax,s[1]=t.ymax,c[0]=t.xmin,c[1]=t.ymin,f[0]=t.xmax,f[1]=t.ymin;const r=e.paths;for(const e of r){if(!r.length)continue;let o=e[0];if(n.extentContainsCoords2D(t,o))return!0;for(let r=1;r<e.length;r++){const i=e[r];if(n.extentContainsCoords2D(t,i)||y(o,i,a))return!0;o=i}}return!1}const x=[0,0];function y(t,n,e){for(let r=0;r<e.length;r++)if(g(t,n,e[r][0],e[r][1]))return!0;return!1}function g(t,n,e,r,o){const[i,s]=t,[c,f]=n,[u,a]=e,[l,m]=r,x=l-u,y=i-u,g=c-i,h=m-a,C=s-a,p=f-s,d=h*g-x*p;if(0===d)return!1;const P=(x*C-h*y)/d,I=(g*C-p*y)/d;return P>=0&&P<=1&&I>=0&&I<=1&&(o&&(o[0]=i+P*(c-i),o[1]=s+P*(f-s)),!0)}t.extentIntersectsExtent=r,t.extentIntersectsMultipoint=o,t.extentIntersectsPoint=e,t.extentIntersectsPolygon=l,t.extentIntersectsPolyline=m,t.getFeatureExtentIntersector=function(t){switch(t){case"esriGeometryEnvelope":case"extent":return r;case"esriGeometryMultipoint":case"multipoint":return o;case"esriGeometryPoint":case"point":return e;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return l;case"esriGeometryPolyline":case"polyline":return m}},t.isSelfIntersecting=function(t){for(let n=0;n<t.length;n++){const e=t[n];for(let r=0;r<e.length-1;r++){const o=e[r],i=e[r+1];for(let e=n+1;e<t.length;e++)for(let n=0;n<t[e].length-1;n++){const r=t[e][n],s=t[e][n+1];if(g(o,i,r,s,x)&&!(x[0]===o[0]&&x[1]===o[1]||x[0]===r[0]&&x[1]===r[1]||x[0]===i[0]&&x[1]===i[1]||x[0]===s[0]&&x[1]===s[1]))return!0}}const r=e.length;if(!(r<=4))for(let t=0;t<r-3;t++){let n=r-1;0===t&&(n=r-2);const o=e[t],i=e[t+1];for(let r=t+2;r<n;r++){const t=e[r],n=e[r+1];if(g(o,i,t,n,x)&&!(x[0]===o[0]&&x[1]===o[1]||x[0]===t[0]&&x[1]===t[1]||x[0]===i[0]&&x[1]===i[1]||x[0]===n[0]&&x[1]===n[1]))return!0}}}return!1},t.segmentIntersects=g,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});