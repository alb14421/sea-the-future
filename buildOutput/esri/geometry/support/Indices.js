// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../core/typedArrayUtil"],function(r,n){"use strict";function e(r,e){if(Array.isArray(r)){if(r.length<n.nativeArrayMaxSize)return r}else if(r.length<n.nativeArrayMaxSize)return Array.from(r);let t=!0,a=!0;return r.some((r,n)=>(t=t&&0===r,a=a&&r===n,!t&&!a)),t?u(r.length):a?y(r.length):n.isTypedArray(r)&&r.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT?r:function(r,e){for(const t of r){if(t>=65536)return n.isTypedArray(r)?r:new Uint32Array(r);t>=256&&(e=!1)}return e?new Uint8Array(r):new Uint16Array(r)}(r,!e)}let t=A(131072);const a=[0],i=(()=>{const r=new Uint16Array(65536);for(let n=0;n<r.length;++n)r[n]=n;return r})();function y(r){return 1===r?a:r<n.nativeArrayMaxSize?Array.from(new Uint16Array(i.buffer,0,r)):r<i.length?new Uint16Array(i.buffer,0,r):(r>t.length&&(t=A(Math.max(2*t.length,r))),new Uint32Array(t.buffer,0,r))}function A(r){const n=new Uint32Array(r);for(let r=0;r<n.length;r++)n[r]=r;return n}let f=new Uint8Array(65536);function u(r){if(1===r)return a;if(r<n.nativeArrayMaxSize)return new Array(r).fill(0);if(r>f.length){const n=Math.max(2*f.length,r);f=new Uint8Array(n)}return new Uint8Array(f.buffer,0,r)}r.compactIndices=e,r.compactMeshIndices=function(r){return e(r,!0)},r.getContinuousIndexArray=y,r.getZeroIndexArray=u,r.newIndexArray=function(r){return r<=n.nativeArrayMaxSize?new Array(r):r<=65536?new Uint16Array(r):new Uint32Array(r)},r.newIntArray=function(r){return r<=n.nativeArrayMaxSize?new Array(r):new Uint32Array(r)},r.pruneIndexArrays=function(){t=A(131072),f=new Uint8Array(65536)},Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});