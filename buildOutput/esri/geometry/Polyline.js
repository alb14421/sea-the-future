// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../chunks/tslib.es6","../core/lang","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","./Extent","./Geometry","./Point","./SpatialReference","./support/extentUtils","./support/zmUtils"],function(t,e,r,s,a,i,n,o,h,p,l,c,u,f){"use strict";var d;return t.default=d=class extends p{constructor(t){super(function(t){if(!t)return;let{paths:e,hasM:r,hasZ:s,spatialReference:a}=t;var i;switch(e??=[],i=e,"number"==typeof i[0]?.[0]&&(e=[e]),e[0]?.[0]?.length){case 4:s??=!0,r??=!0;break;case 3:s??=!0!==r,r??=!s;break;default:s??=!1,r??=!1}return a??=c.WGS84,{...t,hasM:r,hasZ:s,paths:e,spatialReference:a}}(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=r.clone(t)}get extent(){const t=u.getPolylineExtent(this),{spatialReference:e}=this;return t?new h({...t,spatialReference:e}):null}writePaths(t,e){e.paths=r.clone(this.paths)}addPath(t){if(!t)return;const e=this.paths,r=e.length;if(function(t){return!Array.isArray(t[0])}(t)){const s=[];for(let e=0,r=t.length;e<r;e++)s[e]=t[e].toArray();e[r]=s}else e[r]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new d;return t.spatialReference=this.spatialReference,t.paths=r.clone(this.paths),t.curvePaths=r.clone(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const r=this.paths[t][e],s=this.hasZ,a=this.hasM;return s&&!a?new l(r[0],r[1],r[2],void 0,this.spatialReference):a&&!s?new l(r[0],r[1],void 0,r[2],this.spatialReference):s&&a?new l(r[0],r[1],r[2],r[3],this.spatialReference):new l(r[0],r[1],this.spatialReference)}insertPoint(t,e,r){return this._validateInputs(t,e,!0)?(f.updateSupportFromPoint(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[t].splice(e,0,r),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],r=this.spatialReference,s=e.map(t=>new l(t,r));return this.notifyChange("paths"),s}removePoint(t,e){if(!this._validateInputs(t,e))return null;const r=new l(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(t,e,r){return this._validateInputs(t,e)?(f.updateSupportFromPoint(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[t][e]=r,this.notifyChange("paths"),this):this}_validateInputs(t,e,r=!1){if(null==t||t<0||t>=this.paths.length)return!1;if(null!=e){const s=this.paths[t];if(r&&(e<0||e>s.length))return!1;if(!r&&(e<0||e>=s.length))return!1}return!0}toJSON(t){return this.write({},t)}},e.__decorate([s.property({readOnly:!0})],t.default.prototype,"cache",null),e.__decorate([s.property({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],t.default.prototype,"curvePaths",void 0),e.__decorate([o.writer("curvePaths")],t.default.prototype,"writeCurvePaths",null),e.__decorate([s.property({readOnly:!0})],t.default.prototype,"extent",null),e.__decorate([s.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],t.default.prototype,"paths",void 0),e.__decorate([o.writer("paths")],t.default.prototype,"writePaths",null),t.default=d=e.__decorate([n.subclass("esri.geometry.Polyline")],t.default),t.default.prototype.toJSON.isDefaultToJSON=!0,t.default});