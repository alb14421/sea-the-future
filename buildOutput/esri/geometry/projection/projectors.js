// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../core/mathUtils","../../core/unitUtils","../ellipsoidUtils","../support/Ellipsoid","../support/geodesicConstants","../support/spatialReferenceUtils"],function(e,n,l,t,a,r,u){"use strict";const c={2:{5:f,7:null,9:null,10:f,1:w,6:null,8:null,0:null,3:E,11:P,2:f,4:q},5:{5:f,7:null,9:null,10:f,1:w,6:null,8:null,0:null,3:E,11:P,2:f,4:q},7:{5:null,7:f,9:null,10:f,1:null,6:T,8:null,0:null,3:null,11:null,2:null,4:null},9:{5:null,7:null,9:f,10:f,1:null,6:null,8:F,0:null,3:null,11:null,2:null,4:null},3:{5:p,7:null,9:null,10:p,1:h,6:null,8:null,0:null,3:f,11:S,2:p,4:M},4:{5:k,7:null,9:null,10:k,1:U,6:null,8:null,0:null,3:G,11:function(e,n,l,t){k(e,n,l,t),P(l,t,l,t)},2:k,4:f},1:{5:b,7:null,9:null,10:b,1:f,6:null,8:null,0:null,3:W,11:function(e,n,l,t){b(e,n,l,t),P(l,t,l,t)},2:b,4:j},6:{5:null,7:m,9:null,10:m,1:null,6:f,8:null,0:null,3:null,11:null,2:null,4:null},8:{5:null,7:null,9:I,10:I,1:null,6:null,8:f,0:null,3:null,11:null,2:null,4:null},0:{5:null,7:null,9:null,10:null,1:null,6:null,8:null,0:f,3:null,11:null,2:null,4:null},10:{5:f,7:f,9:f,10:f,1:w,6:T,8:F,0:null,3:E,11:P,2:f,4:q},11:{5:C,7:null,9:null,10:C,1:function(e,n,l,t){C(e,n,l,t),w(l,t,l,t)},6:null,8:null,0:null,3:function(e,n,l,t){C(e,n,l,t),E(l,t,l,t)},11:f,2:C,4:function(e,n,l,t){C(e,n,l,t),q(l,t,l,t)}}};function s(e,n){return o(e,n)?.projector}function o(e,n){if(null==e||null==n)return null;if(y.source.spatialReference===e&&y.dest.spatialReference===n)return y;const l=i(e,y.source),t=i(n,y.dest);return 0===l&&0===t?u.equals(e,n)?y.projector=f:y.projector=null:y.projector=c[l][t],y}function i(e,n){return e?n.spatialReference===e?n.spatialReferenceId:(n.spatialReference=e,"metersPerUnit"in n&&(n.metersPerUnit=l.getMetersPerUnitForSR(e,1)),t.isSphericalECEF(e)?n.spatialReferenceId=1:u.isWGS84(e)?n.spatialReferenceId=2:u.isWebMercator(e)?n.spatialReferenceId=3:u.isPlateCarree(e)?n.spatialReferenceId=11:e.wkt===t.WGS84ECEFSpatialReferenceLike.wkt?n.spatialReferenceId=4:4490===e.wkid?n.spatialReferenceId=5:e.wkt===t.SphericalPCPFMarsLike.wkt?n.spatialReferenceId=6:e.wkt===t.SphericalPCPFMoonLike.wkt?n.spatialReferenceId=8:u.isMars(e)?n.spatialReferenceId=7:u.isMoon(e)?n.spatialReferenceId=9:n.spatialReferenceId=0):0}function f(e,n,l,t){e!==l&&(l[t++]=e[n++],l[t++]=e[n++],l[t]=e[n])}function p(e,n,l,t){l[t]=x*(e[n]/A),l[t+1]=x*(v-2*Math.atan(Math.exp(-e[n+1]/A))),l[t+2]=e[n+2]}function h(e,n,l,t){const a=e[n]/A,r=v-2*Math.atan(Math.exp(-e[n+1]/A)),u=A+e[n+2],c=Math.cos(r)*u;l[t]=Math.cos(a)*c,l[t+1]=Math.sin(a)*c,l[t+2]=Math.sin(r)*u}function M(e,n,l,t){p(e,n,l,t),q(l,t,l,t)}function d(e,l,t,a,r){const u=.4999999*Math.PI,c=n.clamp(L*e[l+1],-u,u),s=Math.sin(c);t[a++]=L*e[l]*r.radius,t[a++]=r.halfSemiMajorAxis*Math.log((1+s)/(1-s)),t[a]=e[l+2]}function E(e,n,l,t){d(e,n,l,t,a.earth)}function P(e,n,l,t){l[t]=e[n]*N,l[t+1]=e[n+1]*N,l[t+2]=e[n+2]}function C(e,n,l,t){l[t]=e[n]*O,l[t+1]=e[n+1]*O,l[t+2]=e[n+2]}function S(e,n,l,t){p(e,n,l,t),P(l,t,l,t)}function R(e,n,l,t,a){const r=a+e[n+2],u=L*e[n+1],c=L*e[n],s=Math.cos(u)*r;l[t]=Math.cos(c)*s,l[t+1]=Math.sin(c)*s,l[t+2]=Math.sin(u)*r}function F(e,n,l,t){R(e,n,l,t,a.moon.radius)}function T(e,n,l,t){R(e,n,l,t,a.mars.radius)}function w(e,n,l,t){R(e,n,l,t,a.earth.radius)}function g(e,l,t,a,r){const u=e[l],c=e[l+1],s=e[l+2],o=Math.sqrt(u*u+c*c+s*s),i=n.asinClamped(s/(0===o?1:o)),f=Math.atan2(c,u);t[a++]=x*f,t[a++]=x*i,t[a]=o-r}function I(e,n,l,t){g(e,n,l,t,a.moon.radius)}function m(e,n,l,t){g(e,n,l,t,a.mars.radius)}function b(e,n,l,t){g(e,n,l,t,a.earth.radius)}function W(e,n,l,t){b(e,n,l,t),E(l,t,l,t)}function j(e,n,l,t){b(e,n,l,t),q(l,t,l,t)}function q(e,n,l,t){!function(e,n,l,t,a){const r=L*e[n],u=L*e[n+1],c=e[n+2],s=Math.sin(u),o=Math.cos(u),i=a.radius/Math.sqrt(1-a.eccentricitySquared*s*s);l[t++]=(i+c)*o*Math.cos(r),l[t++]=(i+c)*o*Math.sin(r),l[t++]=(i*(1-a.eccentricitySquared)+c)*s}(e,n,l,t,a.earth)}function k(e,n,l,t){const u=r.earthEllipsoidConstants,c=e[n],s=e[n+1],o=e[n+2];let i,f,p,h,M,d,E,P,C,S,R,F,T,w,g,I,m,b,W,j,q;i=Math.abs(o),f=c*c+s*s,p=Math.sqrt(f),h=f+o*o,M=Math.sqrt(h),j=Math.atan2(s,c),d=o*o/h,E=f/h,w=u.a2/M,g=u.a3-u.a4/M,E>.3?(P=i/M*(1+E*(u.a1+w+d*g)/M),W=Math.asin(P),S=P*P,C=Math.sqrt(1-S)):(C=p/M*(1-d*(u.a5-w-E*g)/M),W=Math.acos(C),S=1-C*C,P=Math.sqrt(S)),R=1-a.earth.eccentricitySquared*S,F=a.earth.radius/Math.sqrt(R),T=u.a6*F,w=p-F*C,g=i-T*P,m=C*w+P*g,I=C*g-P*w,b=I/(T/R+m),W+=b,q=m+I*b/2,o<0&&(W=-W),l[t++]=x*j,l[t++]=x*W,l[t]=q}function U(e,n,l,t){k(e,n,l,t),w(l,t,l,t)}function G(e,n,l,t){k(e,n,l,t),E(l,t,l,t)}const y={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:f},L=n.deg2rad(1),x=n.rad2deg(1),v=.5*Math.PI,A=a.earth.radius,N=A*Math.PI/180,O=180/(A*Math.PI);e.copy3=f,e.getProjector=s,e.getProjectorClassification=o,e.getProjectorName=function(e,n){switch(s(e,n)){case f:return"copy3";case w:return"wgs84ToSphericalECEF";case E:return"wgs84ToWebMercator";case P:return"wgs84ToPlateCarree";case q:return"wgs84ToWGS84ECEF";case p:return"webMercatorToWGS84";case h:return"webMercatorToSphericalECEF";case M:return"webMercatorToWGS84ECEF";case S:return"webMercatorToPlateCarree";case k:return"wgs84ECEFToWGS84";case U:return"wgs84ECEFToSphericalECEF";case G:return"wgs84ECEFToWebMercator";case b:return"sphericalECEFToWGS84";case W:return"sphericalECEFToWebMercator";case m:return"sphericalMarsPCPFToMars2000";case I:return"sphericalMoonPCPFToMoon2000";case j:return"sphericalECEFToWGS84ECEF";case T:return"mars2000ToSphericalPCPF";case F:return"moon2000ToSphericalPCPF";default:return null}},e.invPlateCarreeScale=O,e.lonLatToWebMercatorComparable=d,e.projectionTable=c,e.sphericalPCPFtoLonLatElevation=g,e.wgs84ToWebMercator=E,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});