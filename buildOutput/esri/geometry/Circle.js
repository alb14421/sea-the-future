// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../chunks/tslib.es6","../core/unitUtils","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/subclass","./ellipsoidUtils","./Point","./Polygon","./SpatialReference","./support/geodesicUtils","./support/webMercatorUtils","./support/WKIDUnitConversion"],function(e,r,t,s,i,o,c,a,n,p,d,l,h,u){"use strict";var g;let f=g=class extends p{constructor(e){super(e),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}initialize(){const e=this.center,t=this.numberOfPoints;if(this.hasZ=e?.hasZ??!1,0!==this.rings.length||!e)return;const s=r.convertUnit(this.radius,this.radiusUnit,"meters"),i=e.spatialReference;let o,c="geographic";if(i.isWebMercator?c="webMercator":(null!=(i.wkid&&u[i.wkid])||(i.wkt2||i.wkt)&&r.isProjectedWKT(i.wkt2||i.wkt))&&(c="projected"),this.geodesic){let r;switch(c){case"webMercator":r=h.webMercatorToGeographic(e);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":r=e}o=this._createGeodesicCircle(r,s,t),"webMercator"===c&&(o=h.geographicToWebMercator(o))}else{let i;"webMercator"===c||"projected"===c?i=s/r.getMetersPerUnit(e.spatialReference):"geographic"===c&&(i=r.lengthToDegrees(s,"meters",a.getReferenceEllipsoid(e.spatialReference).radius)),o=this._createPlanarCircle(e,i,t)}this.spatialReference=o.spatialReference,this.addRing(o.rings[0])}clone(){const{center:e,numberOfPoints:r,radius:t,radiusUnit:s,geodesic:i}=this;return new g({center:e?.clone(),numberOfPoints:r,radius:t,radiusUnit:s,geodesic:i})}_createGeodesicCircle(e,r,t){const s=[],i=[e.x,e.y];for(let o=0;o<360;o+=360/t){const t=this.hasZ?[0,0,e.z??0]:[0,0];l.directGeodeticSolver(t,i,o,r,d.WGS84),s.push(t)}return s.push(s[0]),new p({rings:[s]})}_createPlanarCircle(e,r,t){const s=[],i=2*Math.PI/t;for(let o=0;o<t;++o){const t=i*o,c=[e.x+Math.cos(-t)*r,e.y+Math.sin(-t)*r];this.hasZ&&c.push(e.z??0),s.push(c)}return s.push(s[0]),new p({spatialReference:e.spatialReference,rings:[s]})}};return e.__decorate([t.property({type:n})],f.prototype,"center",void 0),e.__decorate([t.property()],f.prototype,"geodesic",void 0),e.__decorate([t.property()],f.prototype,"numberOfPoints",void 0),e.__decorate([t.property()],f.prototype,"radius",void 0),e.__decorate([t.property()],f.prototype,"radiusUnit",void 0),f=g=e.__decorate([c.subclass("esri.geometry.Circle")],f),f});