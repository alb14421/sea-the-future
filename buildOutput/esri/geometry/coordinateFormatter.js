// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../core/Error","../chunks/pe","./Point","./SpatialReference","../intl/number"],function(n,e,t,o,r,i){"use strict";function a(){return t.isLoaded()}function s(n,e){const i=u(e),a=n.replaceAll(/[\u00B0\u00BA]/g,"^").replaceAll("′","'").replaceAll("″",'"'),s=[];return t.PeNotationDms.dmsToGeog(i,1,[a],s)?new o(s[0][0],s[0][1],e||r.WGS84):null}function u(n){if(n??=r.WGS84,n.wkid){const o=t.PeFactory.geogcs(n.wkid);if(!o)throw new e("coordinate-formatter:invalid-spatial-reference","wkid is not valid");return o}const o=n.wkt2??n.wkt;if(o){const n=t.PeFactory.fromString(t.PeDefs.PE_TYPE_GEOGCS,o);if(!n)throw new e("coordinate-formatter:invalid-spatial-reference","wkt is not valid");return n}throw new e("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing")}function l(n){switch(n){case"automatic":return t.PeNotationMgrs.PE_MGRS_STYLE_AUTO;case"new-180-in-zone-01":return t.PeNotationMgrs.PE_MGRS_STYLE_NEW|t.PeNotationMgrs.PE_MGRS_180_ZONE_1_PLUS;case"new-180-in-zone-60":return t.PeNotationMgrs.PE_MGRS_STYLE_NEW;case"old-180-in-zone-01":return t.PeNotationMgrs.PE_MGRS_STYLE_OLD|t.PeNotationMgrs.PE_MGRS_180_ZONE_1_PLUS;case"old-180-in-zone-60":return t.PeNotationMgrs.PE_MGRS_STYLE_OLD;default:return-1}}function c(n){switch(n){case"latitude-band-indicators":return t.PeNotationUtm.PE_UTM_OPTS_NONE;case"north-south-indicators":return t.PeNotationUtm.PE_UTM_OPTS_NS;default:return-1}}n.fromLatitude=function(n){return n&&a()?i.parseNumber(n)??s(`${n} | 0° 0' 0" E`)?.latitude??s(`${n} | 0 E`)?.latitude??null:null},n.fromLatitudeLongitude=s,n.fromLongitude=function(n){return n&&a()?i.parseNumber(n)??s(`0° 0' 0" N | ${n}`)?.longitude??s(`0 N | ${n}`)?.longitude??null:null},n.fromMgrs=function(n,e,i){const a=[],s=l(i);if(-1===s)return console.warn(`invalid conversionMode: ${i}`),null;const c=u(e);return t.PeNotationMgrs.mgrsToGeogExtended(c,1,[n],s,a)?new o(a[0][0],a[0][1],e||r.WGS84):null},n.fromUsng=function(n,e){const i=[];!e&&/\(.+27/.test(n)&&(e=r.GCS_NAD_1927);const a=u(e);return t.PeNotationUsng.usngToGeog(a,1,[n],i)?new o(i[0][0],i[0][1],e||r.WGS84):null},n.fromUtm=function(n,e,i){const a=[],s=c(i);if(-1===s)return console.warn(`invalid conversionMode: ${i}`),null;const l=u(e);return t.PeNotationUtm.utmToGeog(l,1,[n],s,a)?new o(a[0][0],a[0][1],e||r.WGS84):null},n.isLoaded=a,n.isSupported=function(){return t.isSupported()},n.load=function(){return t.load()},n.toLatitudeLongitude=function(n,e,o=0){const r=[[n.x,n.y]],i=[],a=u(n.spatialReference);let s=0;switch(e){case"dd":s=t.PeNotationDms.geogToDd(a,1,r,o,i);break;case"ddm":s=t.PeNotationDms.geogToDdm(a,1,r,o,i);break;case"dms":s=t.PeNotationDms.geogToDms(a,1,r,o,i);break;default:return console.warn(`invalid format: ${e}`),null}return s?i[0]:null},n.toMgrs=function(n,e,o=0,r=!1){const i=[[n.x,n.y]],a=[],s=u(n.spatialReference);let c=l(e);return-1===c?(console.warn(`invalid conversionMode: ${e}`),null):(r&&(c|=t.PeNotationMgrs.PE_MGRS_ADD_SPACES),t.PeNotationMgrs.geogToMgrsExtended(s,1,i,o,!1,c,a)?a[0]:null)},n.toUsng=function(n,e=0,o=!1){const r=[[n.x,n.y]],i=[],a=u(n.spatialReference);return t.PeNotationUsng.geogToUsng(a,1,r,e,!1,o,i)?i[0]:null},n.toUtm=function(n,e,o=!1){const r=[[n.x,n.y]],i=[],a=u(n.spatialReference);let s=c(e);return-1===s?(console.warn(`invalid conversionMode: ${e}`),null):(o&&(s|=t.PeNotationUtm.PE_UTM_OPTS_ADD_SPACES),t.PeNotationUtm.geogToUtm(a,1,r,s,i)?i[0]:null)},Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});