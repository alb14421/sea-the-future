// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../../chunks/tslib.es6","../../core/JSONSupport","../../core/lang","../../core/object","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","../../portal/timeUnitKebabDictionary","../../chunks/TimeExtent","../../chunks/TimeInterval"],function(e,t,r,o,n,p,s,i,l,u,a,c){"use strict";var m;let d=m=class extends t.JSONSupport{constructor(e){super(e),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(e){return e?a.TimeExtent.fromArray(e):void 0}writeCurrentTimeExtent(e,t,r){e&&o.setDeepValue(r,e.toArray(),t)}readFullTimeExtent(e,t){const r=t.properties;if(!r)return;const o=null!=r.endTime?new Date(r.endTime):null,n=null!=r.startTime?new Date(r.startTime):null;return new a.TimeExtent({start:n,end:o})}writeFullTimeExtent(e,t){if(!e)return;const r=t.properties=t.properties||{},o=e.end,n=e.start;o&&(r.endTime=null!=o?o.getTime():null),n&&(r.startTime=null!=n?n.getTime():null)}readStopInterval(e,t,r){return e?c.TimeInterval.fromJSON({value:e.interval,unit:e.units},r):null}writeStopInterval(e,t,r,n){if(!e)return;const p=e.toJSON(n);o.setDeepValue("properties.timeStopInterval",{interval:p.value,units:p.unit},t)}readStops(e){return e?.length?e.map(e=>new Date(e)):null}writeStops(e,t,r){e?.length&&o.setDeepValue(r,e.map(e=>e.getTime()),t)}clone(){return new m(r.clone({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};return e.__decorate([n.property({type:a.TimeExtent,json:{type:[[p.Integer,p.Null]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],d.prototype,"currentTimeExtent",void 0),e.__decorate([s.reader("currentTimeExtent")],d.prototype,"readCurrentTimeExtent",null),e.__decorate([l.writer("currentTimeExtent")],d.prototype,"writeCurrentTimeExtent",null),e.__decorate([n.property({type:a.TimeExtent,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],d.prototype,"fullTimeExtent",void 0),e.__decorate([s.reader("fullTimeExtent")],d.prototype,"readFullTimeExtent",null),e.__decorate([l.writer("fullTimeExtent")],d.prototype,"writeFullTimeExtent",null),e.__decorate([n.property({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],d.prototype,"loop",void 0),e.__decorate([n.property({type:p.Integer,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){const e=!!this.stopInterval,t=!!this.stops?.length,r=!(e||t);return{enabled:r,isRequired:r}}}}})],d.prototype,"numStops",void 0),e.__decorate([n.property({type:[1,2],nonNullable:!0,json:{type:p.Integer,read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],d.prototype,"numThumbs",void 0),e.__decorate([n.property({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],d.prototype,"stopDelay",void 0),e.__decorate([n.property({type:c.TimeInterval,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:u.timeUnitKebabDictionary.jsonValues.filter(e=>"esriTimeUnitsUnknown"!==e)}},overridePolicy(){const e=null!=this.numStops,t=!!this.stops?.length;return{enabled:!t,isRequired:!(e||t)}}}}})],d.prototype,"stopInterval",void 0),e.__decorate([s.reader("stopInterval")],d.prototype,"readStopInterval",null),e.__decorate([l.writer("stopInterval")],d.prototype,"writeStopInterval",null),e.__decorate([n.property({type:[Date],json:{type:[p.Integer],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:null==this.numStops&&!this.stopInterval}}}}})],d.prototype,"stops",void 0),e.__decorate([s.reader("stops")],d.prototype,"readStops",null),e.__decorate([l.writer("stops")],d.prototype,"writeStops",null),d=m=e.__decorate([i.subclass("esri.webdoc.widgets.TimeSlider")],d),d});