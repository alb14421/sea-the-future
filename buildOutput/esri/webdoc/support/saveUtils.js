// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../core/Error","../../layers/support/layerUtils"],function(e,r,t){"use strict";const o=new Set(["layer:unsupported","property:unsupported","symbol:unsupported","symbol-layer:unsupported","url:unsupported"]);e.beforeSave=async function(e){const r=[];for(const t of e.allLayers)if("beforeSave"in t&&"function"==typeof t.beforeSave){const e=t.beforeSave();e&&r.push(e)}await Promise.allSettled(r)},e.evaluateWriteErrors=function(e,t,s){let n=(e.messages??[]).filter(({type:e})=>"error"===e).map(({name:e,message:t,details:o})=>new r(e,t,o));if(e.blockedRelativeUrls&&(n=n.concat(e.blockedRelativeUrls.map(e=>new r("url:unsupported",`Relative url '${e}' is not supported`)))),s){const{ignoreUnsupported:e,supplementalUnsupportedErrors:r=[],requiredPropertyChecksDisabled:t}=s;e&&(n=n.filter(({name:e})=>!(o.has(e)||r.includes(e)))),t&&(n=n.filter(e=>"web-document-write:property-required"!==e.name))}if(n.length>0)throw new r(t.errorName,"Failed to save due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:n})},e.hasCharts=function(e){return t.getLayersWithChartSupport(e).some(e=>!!e.charts?.length)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});