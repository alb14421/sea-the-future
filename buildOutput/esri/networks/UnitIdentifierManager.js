// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["require","../chunks/tslib.es6","../core/JSONSupport","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/subclass","../layers/mixins/EditBusLayer","./UtilityNetwork","../versionManagement/support/versionManagementUtils"],function(e,t,r,s,i,n,o,d,a,l,u){"use strict";const c=e=>Object.freeze(Object.defineProperty({__proto__:null,default:e},Symbol.toStringTag,{value:"Module"}));let p=class extends r.JSONSupport{constructor(e){super(e),this.utilityNetwork=null}get networkServiceUrl(){return this.utilityNetwork?.networkServiceUrl??null}get featureServiceUrl(){return this.utilityNetwork?.featureServiceUrl??null}get gdbVersion(){return this.utilityNetwork?.gdbVersion??null}get historicMoment(){return this.utilityNetwork?.historicMoment??null}async insertGap(t,r,s){const[{insertGap:i},{default:n}]=await Promise.all([new Promise((t,r)=>e(["../rest/networks/unitIdentifiers/insertGap"],t,r)),new Promise((t,r)=>e(["../rest/networks/unitIdentifiers/support/InsertGapParameters"],e=>t(c(e)),r))]),o=new n({object:t,firstUnit:r,numUnits:s});u.isVersionInEditSession(this.featureServiceUrl,this.gdbVersion||null)?(o.sessionId=u.currentSessionId,await u.isSafeToEditVersion(this.featureServiceUrl,this.gdbVersion,!0)):o.sessionId=null,o.gdbVersion=this.gdbVersion;const d=a.emitApplyEditsEvent(this.featureServiceUrl,null,this.gdbVersion,!1),l=await i(this.networkServiceUrl,o);d.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:l.exceededTransferLimit,historicMoment:l.moment,editedFeatures:l.serviceEdits||void 0})}async reset(t){const[{reset:r},{default:s}]=await Promise.all([new Promise((t,r)=>e(["../rest/networks/unitIdentifiers/reset"],t,r)),new Promise((t,r)=>e(["../rest/networks/unitIdentifiers/support/ResetParameters"],e=>t(c(e)),r))]),i=new s({objects:t});u.isVersionInEditSession(this.featureServiceUrl,this.gdbVersion||null)?(i.sessionId=u.currentSessionId,await u.isSafeToEditVersion(this.featureServiceUrl,this.gdbVersion,!0)):i.sessionId=null,i.gdbVersion=this.gdbVersion;const n=a.emitApplyEditsEvent(this.featureServiceUrl,null,this.gdbVersion,!1),o=await r(this.networkServiceUrl,i);n.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:o.exceededTransferLimit,historicMoment:o.moment,editedFeatures:o.serviceEdits||void 0})}async resize(t,r){const[{resize:s},{default:i}]=await Promise.all([new Promise((t,r)=>e(["../rest/networks/unitIdentifiers/resize"],t,r)),new Promise((t,r)=>e(["../rest/networks/unitIdentifiers/support/ResizeParameters"],e=>t(c(e)),r))]),n=new i({object:t,numUnits:r});u.isVersionInEditSession(this.featureServiceUrl,this.gdbVersion||null)?(n.sessionId=u.currentSessionId,await u.isSafeToEditVersion(this.featureServiceUrl,this.gdbVersion,!0)):n.sessionId=null,n.gdbVersion=this.gdbVersion;const o=a.emitApplyEditsEvent(this.featureServiceUrl,null,this.gdbVersion,!1),d=await s(this.networkServiceUrl,n);o.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:d.exceededTransferLimit,historicMoment:d.moment,editedFeatures:d.serviceEdits||void 0})}async query(t){const[{queryUnitIdentifiers:r},{default:s}]=await Promise.all([new Promise((t,r)=>e(["../rest/networks/unitIdentifiers/queryUnitIdentifiers"],t,r)),new Promise((t,r)=>e(["../rest/networks/unitIdentifiers/support/QueryUnitIdentifiersParameters"],e=>t(c(e)),r))]),i=new s({objects:t});return u.isVersionInEditSession(this.featureServiceUrl,this.gdbVersion||null)?i.sessionId=u.currentSessionId:i.sessionId=null,i.gdbVersion=this.gdbVersion,i.moment=this.historicMoment,await r(this.networkServiceUrl,i)}};return t.__decorate([s.property({type:l,constructOnly:!0})],p.prototype,"utilityNetwork",void 0),t.__decorate([s.property()],p.prototype,"networkServiceUrl",null),t.__decorate([s.property()],p.prototype,"featureServiceUrl",null),t.__decorate([s.property()],p.prototype,"gdbVersion",null),t.__decorate([s.property()],p.prototype,"historicMoment",null),p=t.__decorate([d.subclass("esri.networks.UnitIdentifierManager")],p),p});