// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../core/handleUtils","../core/has"],function(e,n,a){"use strict";let t,o;const l=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale,r=globalThis.document?.documentElement;function c(){const e=r?.getAttribute("lang"),n=globalThis.navigator?.language;return l??e??n??"en"}function i(){return void 0===o&&(o=c()),o}const g=/^(?<language>[a-z]{2,3})(?:-(?<extlang>[a-z]{3}))?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function s(e=i()){return g.exec(e)?.groups}const u=[],f=new Map,h=[];function d(){const e=t??c();o!==e&&([...h].forEach(n=>n(e)),o=e,[...u].forEach(n=>n(e)))}globalThis.addEventListener?.("languagechange",d),r&&new MutationObserver(()=>{d()}).observe(r,{attributeFilter:["lang"]}),e.assertNoLocaleChangeListeners=function(){const e=Array.from(f.values())[0];f.clear();const n=u.length;if(0!==n)throw new Error(`Unexpected ${n} locale change listeners still active.${e?` For example:\n${e}`:" Set enableListenerTracing in esri/intl/locale.ts to include a stack trace."}`)},e.beforeLocaleChange=function(e){return h.push(e),n.makeHandle(()=>h.splice(h.indexOf(e),1))},e.getDefaultLocale=c,e.getLocale=i,e.getLocaleLanguage=function(e=i()){return s(e)?.language},e.getLocaleParts=s,e.normalizeLocale=function(e=i()){const n=s(e);return n?.language&&n?.extlang?e.replace(`${n.language}-`,""):e},e.onLocaleChange=function(e){return u.push(e),n.makeHandle(()=>{u.splice(u.indexOf(e),1)})},e.prefersRTL=function(e=i()){const n=s(e)?.language;return"he"===n||"ar"===n},e.setLocale=function(e){t=e||void 0,d()},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});