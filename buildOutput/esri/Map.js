// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["./chunks/tslib.es6","./Basemap","./Ground","./core/CollectionFlattener","./core/Evented","./core/maybe","./core/accessorSupport/decorators/property","./core/accessorSupport/decorators/cast","./core/has","./core/RandomLCG","./core/accessorSupport/decorators/subclass","./effects/FocusAreas","./layers/support/editableLayers","./support/basemapEnsureType","./support/collectionUtils","./support/groundUtils","./support/LayersMixin","./support/TablesMixin"],function(e,s,r,t,a,o,l,i,p,n,d,c,y,u,b,h,_,m){"use strict";let g=class extends(m.TablesMixin(_.LayersMixin(a.EventedAccessor))){constructor(e){super(e),this.allLayers=new t({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:e=>"layers"in e?e.layers:null}),this.focusAreas=new c,this.allTables=b.createFlattenedTablesCollection(this),this.basemap=null,this.editableLayers=new t({getCollections:()=>[this.allLayers],itemFilterFunction:y.isEditableLayer}),this.ground=new r,this._basemapCache=u.createCache()}destroy(){u.destroyCache(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=o.destroyMaybe(this.basemap),o.destroyMaybe(this.ground),this._set("ground",null)}castBasemap(e){return u.basemapEnsureType(e,this._basemapCache)}castGround(e){return h.ensureType(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(s=>s.id===e)}findTableById(e){return this.allTables.find(s=>s.id===e)}};return e.__decorate([l.property({readOnly:!0,dependsOn:[]})],g.prototype,"allLayers",void 0),e.__decorate([l.property({type:c,nonNullable:!0,json:{write:{overridePolicy:e=>({enabled:e.areas.length>0,ignoreOrigin:!0})}}})],g.prototype,"focusAreas",void 0),e.__decorate([l.property({readOnly:!0})],g.prototype,"allTables",void 0),e.__decorate([l.property({type:s,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],g.prototype,"basemap",void 0),e.__decorate([i.cast("basemap")],g.prototype,"castBasemap",null),e.__decorate([l.property({readOnly:!0})],g.prototype,"editableLayers",void 0),e.__decorate([l.property({type:r,nonNullable:!0})],g.prototype,"ground",void 0),e.__decorate([i.cast("ground")],g.prototype,"castGround",null),e.__decorate([l.property()],g.prototype,"undoRedo",void 0),g=e.__decorate([d.subclass("esri.Map")],g),g});