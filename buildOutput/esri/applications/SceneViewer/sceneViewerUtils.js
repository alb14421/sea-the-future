// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["require","exports","../../core/Collection","../../core/Error","../../core/Logger","../../layers/support/arcgisLayerUrl","../../layers/support/schemaValidatorLoader","../../support/webSceneUtils","../../symbols/support/svgUtils","../../views/ViewingMode","../../views/3d/state/controllers/ZoomControllerGlobal","../../views/3d/state/controllers/ZoomControllerLocal","../../views/3d/terrain/TilingScheme","../../views/support/spatialReferenceSupport","../../webscene/support/schemaValidatorLoader"],function(e,r,o,t,n,i,a,u,s,c,l,p,f,d,g){"use strict";r.canSaveAs=function(e){return!e.canNotSaveAs()},r.closeCatalogLayer=function(e){e.openedLayers.pop()},r.createTilingScheme=function(e){return new f.TilingScheme(e)},r.editorHasPendingEdits=function(e){return e.hasPendingEdits},r.editorNavigateBack=function(e){return e.back()},r.fetchPopupFeaturesFromGraphics=function(e,r){return e&&"fetchPopupFeaturesFromGraphics"in e&&"function"==typeof e.fetchPopupFeaturesFromGraphics?e.fetchPopupFeaturesFromGraphics(r):Promise.reject(new t("layerview:fetchPopupFeaturesFromGraphics","The input layerview does not support fetchPopupFeaturesFromGraphics"))},r.getCompatibleTileInfoForVTL=function(e,r){return e.getCompatibleForVTL(r)},r.getSourceLayerFromBuildingComponentSublayerGraphic=function(e){if(!e?.sourceLayer)return null;if("building-component"===e.sourceLayer.type)return e.sourceLayer;throw new t("getSourceLayerFromBuildingComponentSublayerGraphic","The input graphic source layer is not of type BuildingComponentSublayer")},r.initializeSchemaValidators=function(){a.registerLoader(()=>new Promise((r,o)=>e(["../../layers/support/schemaValidator"],r,o))),g.registerLoader(()=>new Promise((r,o)=>e(["../../webscene/support/schemaValidator"],r,o)))},r.isHostedAgolServiceUrl=function(e){return i.isHostedAgolService(e)},r.isSchemaValidationError=function(e){return e&&e.name===u.schemaValidationErrorName},r.isSpatialReferenceSupported=function(e,r){return d.isSpatialReferenceSupported(e,c.viewingModeFromString(r))},r.isSupportedTileInfo=function(e){return null==f.TilingScheme.checkUnsupported(e)},r.renderSVG=function(e,r,o,t){return s.renderSVG(e,r,o,t)},r.saveStateWarning=function(e,r){return n.getLogger("sceneViewer.appState.saveState").warn(e,r)},r.setDefaultsFromMapSettings=function(e,{defaultSpatialReference:r,isSpatialReferenceSupported:t,priorityLayers:n,required:i}){const a={...e.defaultsFromMapSettings};r&&(a.defaultSpatialReference=r),t&&(a.getSpatialReferenceSupport=(r,o)=>t(r,o)?e.getSpatialReferenceSupport(r,o):null),n&&(a.priorityCollection={layers:new o(n)}),i&&(a.required=i),e.defaultsFromMapSettings=a},r.setSourceLayerOfBuildingComponentSublayerGraphic=function(e,r){if(e){if("building-component"!==r?.type)throw new t("setSourceLayerOfBuildingComponentSublayerGraphic","The input source layer is not of type BuildingComponentSublayer");e.sourceLayer=r}},r.zoomDragBeginPoint=function(e){const r=e.state.cameraController;return r instanceof l.ZoomControllerGlobal||r instanceof p.ZoomControllerLocal?r.dragBeginPoint:null},Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});