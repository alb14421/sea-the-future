// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../Basemap","../core/Collection","../core/Logger","../core/maybe","../core/accessorSupport/ensureType","./apiKeyUtils","./basemapDefinitions","./basemapUtils"],function(e,s,n,r,t,i,a,o,c){"use strict";const l=()=>r.getLogger("esri.support.basemapUtils");function f(e,n){let r;if("string"==typeof e){const t=e in o.esriBasemapDefinitions,i=!t&&e.includes("/");if(!t&&!i){if(a.hasBasemapStylesApiKey())l().warn(`Unable to find basemap definition for: ${e}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const s=Object.entries(o.esriBasemapDefinitions).filter(([e,s])=>s.classic||s.is3d).map(([e])=>`"${e}"`).sort().join(", ");l().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${s}`)}return null}n&&(r=n[e]),r||(r=t?s.fromId(e):new s({style:{id:e}}),n&&(n[e]=r))}else r=i.ensureType(s,e);return r?.destroyed&&(l().warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function p(e,s){const r=new n;return e.forEach(e=>{const n=s.find(s=>"scene"!==s.type&&c.layerDefinitionEquals(c.layerToDefinition(e),c.layerToDefinition(s)))||e;r.includes(n)?r.push(e):r.push(n)}),r}e.basemapEnsureType=f,e.clonePreservingTiledLayers=function(e,s=null){const n=f(e);if(!n)return null;const r=n.clone();return s&&(r.baseLayers=p(r.baseLayers,s.baseLayers),r.referenceLayers=p(r.referenceLayers,s.referenceLayers)),r},e.createCache=function(){return{}},e.destroyCache=function(e){for(const s in e){const n=e[s];t.destroyMaybe(n),delete e[s]}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});