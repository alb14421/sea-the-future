// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../../../chunks/tslib.es6","../../../core/Accessor","../../../core/asyncUtils","../../../core/Collection","../../../core/promiseUtils","../../../core/reactiveUtils","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","./imageNavigationUtils"],function(e,r,t,o,s,c,i,n,a,d,p,l){"use strict";let u=class extends r{constructor(e){super(e),this._compileTask=null,this.currentNode=null,this.nodes=new o}initialize(){this.addHandles(c.watch(()=>({nodes:this.nodes,currenNode:this.currentNode,length:this.nodes.length,currentHeading:this.currentNode?.currentHeading,currentPitch:this.currentNode?.currentPitch}),()=>{this._compileTask?.abort(),this._compileTask=t.createTask(async e=>{s.throwIfAborted(e),this.compile()})},c.syncAndInitial))}get state(){const e=this._compileTask;return e?e.finished?e.error?"error":"compiled":"compiling":"ready"}compile(){const{currentNode:e,nodes:r}=this;e&&r.length&&(e.reset(),l.updateDirectionalNodesGeneric(e,r))}};return e.__decorate([i.property()],u.prototype,"_compileTask",void 0),e.__decorate([i.property()],u.prototype,"currentNode",void 0),e.__decorate([i.property()],u.prototype,"nodes",void 0),e.__decorate([i.property()],u.prototype,"state",null),u=e.__decorate([p.subclass("esri.widgets.OrientedImageryViewer.components.NavigationUIPanoramicViewModel")],u),u});