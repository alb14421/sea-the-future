// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["require","../../../chunks/tslib.es6","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","../../../intl/substitute","../../Widget","../css","../imageMeasurementUtils","../../../chunks/componentsUtils","../../support/jsxFactory","../../support/decorators/messageBundle"],function(e,t,c,o,n,a,s,r,l,i,d,u,m,g){"use strict";let p=class extends l{constructor(e){super(e),this.messages=null,this.messagesCommon=null,this.accuracy=null,this._selectedSystem="XY",this._handleSystemSelection=e=>{this._selectedSystem=e.target.value}}loadDependencies(){return u.loadCalciteComponents({action:()=>new Promise((t,c)=>e(["../../../chunks/index12"],t,c)),block:()=>new Promise((t,c)=>e(["../../../chunks/index13"],t,c)),panel:()=>new Promise((t,c)=>e(["../../../chunks/index51"],t,c)).then(e=>e.index),select:()=>new Promise((t,c)=>e(["../../../chunks/index9"],t,c)),option:()=>new Promise((t,c)=>e(["../../../chunks/index8"],t,c)),table:()=>new Promise((t,c)=>e(["../../../chunks/index39"],t,c)),"table-row":()=>new Promise((t,c)=>e(["../../../chunks/index42"],t,c)),"table-header":()=>new Promise((t,c)=>e(["../../../chunks/index41"],t,c)),"table-cell":()=>new Promise((t,c)=>e(["../../../chunks/index40"],t,c))})}get _renderLocationBlock(){const{groundCoordinates:e,_selectedSystem:t}=this;return e&&"XY"===t?m.tsx("calcite-block",{heading:this.getLocation(),headingLevel:6}):null}get _renderLocationTable(){const{groundCoordinates:e,messages:t,_selectedSystem:c,accuracy:o}=this,n={groundX:e.x.toFixed(3),accuracyX:null!=o?.x?o.x.toFixed(3):"",groundY:e.y.toFixed(3),accuracyY:null!=o?.y?o.y.toFixed(3):"",groundZ:e.z?e.z.toFixed(3):"",accuracyZ:null!=o?.z?o.z.toFixed(3):""};return e&&"Basemap"===c?m.tsx("calcite-table",{bordered:!0,caption:t.measurementTable,class:i.css.measurementsTable,scale:"s"},m.tsx("calcite-table-row",{slot:"table-header"},m.tsx("calcite-table-header",{alignment:"center",heading:t.type}),m.tsx("calcite-table-header",{alignment:"center",heading:t.value}),m.tsx("calcite-table-header",{alignment:"center",heading:t.accuracy})),m.tsx("calcite-table-row",null,m.tsx("calcite-table-cell",{alignment:"center"},t.x),m.tsx("calcite-table-cell",{alignment:"center"},n.groundX),m.tsx("calcite-table-cell",{alignment:"center"},n.accuracyX)),m.tsx("calcite-table-row",null,m.tsx("calcite-table-cell",{alignment:"center"},t.y),m.tsx("calcite-table-cell",{alignment:"center"},n.groundY),m.tsx("calcite-table-cell",{alignment:"center"},n.accuracyY)),m.tsx("calcite-table-row",null,m.tsx("calcite-table-cell",{alignment:"center"},t.z),m.tsx("calcite-table-cell",{alignment:"center"},n.groundZ),m.tsx("calcite-table-cell",{alignment:"center"},n.accuracyZ))):null}get _renderSystemSelect(){const{messages:e,messagesCommon:t}=this;return m.tsx("div",{class:i.css.measurementsBar},m.tsx("calcite-select",{bind:this,label:e.selectUnitSystem,scale:"m",width:"full",onCalciteSelectChange:this._handleSystemSelection},m.tsx("calcite-option",{value:"XY"},e.xy),m.tsx("calcite-option",{value:"Basemap"},e.basemap)),m.tsx("calcite-action",{icon:"copy-to-clipboard",onclick:()=>this.copyLocation(),scale:"s",slot:"control",text:"Copy",title:t.copy}))}copyLocation(){const{groundCoordinates:e}=this;if(!e)return;const t=this.getLocation();t&&d.copyToClipboard(t)}getLocation(){const{_selectedSystem:e,groundCoordinates:t,accuracy:c}=this;return"Basemap"===e?this.getBasemapLocation(t,c):this.getXYLocation(t)}getXYLocation(e){if(null==e?.longitude||null==e?.latitude)return"";const t={groundX:e.longitude.toFixed(3),groundY:e.latitude.toFixed(3)};return r.substitute("{groundX}° , {groundY}°",t)}getBasemapLocation(e,t){if(null==e?.x||null==e?.y)return"";const c={groundX:e.x.toFixed(3),accuracyX:t?.x?t.x.toFixed(3):0,groundY:e.y.toFixed(3),accuracyY:t?.y?t.y.toFixed(3):0,groundZ:e.z?e.z.toFixed(3):0,accuracyZ:t?.z?t.z.toFixed(3):0};return r.substitute("{groundX} ± {accuracyX},  {groundY} ± {accuracyY}, {groundZ} ± {accuracyZ}",c)}render(){return m.tsx("calcite-panel",{class:i.css.measurementResults,key:"ground-location-container"},this._renderSystemSelect,this._renderLocationBlock,this._renderLocationTable)}};return t.__decorate([c.property()],p.prototype,"messages",void 0),t.__decorate([c.property(),g.messageBundle("esri/t9n/common")],p.prototype,"messagesCommon",void 0),t.__decorate([c.property()],p.prototype,"groundCoordinates",void 0),t.__decorate([c.property()],p.prototype,"accuracy",void 0),t.__decorate([c.property()],p.prototype,"_selectedSystem",void 0),t.__decorate([c.property()],p.prototype,"_renderLocationBlock",null),t.__decorate([c.property()],p.prototype,"_renderLocationTable",null),t.__decorate([c.property()],p.prototype,"_renderSystemSelect",null),p=t.__decorate([s.subclass("esri.widgets.OrientedImageryViewer.components.ImageLocationWidget")],p),p});