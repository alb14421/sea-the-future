// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../../../chunks/tslib.es6","../../../core/asyncUtils","../../../core/promiseUtils","../../../core/reactiveUtils","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","./imageNavigationUtils","./NavigationUIPanoramicViewModel"],function(e,r,t,i,s,o,a,c,h,n,d){"use strict";let l=class extends d{constructor(e){super(e),this.cameraHeadingThreshold=0,this.cameraPitchThreshold=0,this.preserveAngle="none"}initialize(){this.addHandles(i.watch(()=>({nodes:this.nodes,currenNode:this.currentNode,length:this.nodes.length,currentHeading:this.currentNode?.currentHeading,currentPitch:this.currentNode?.currentPitch,preserveAngle:this.preserveAngle,cameraHeadingThreshold:this.cameraHeadingThreshold,cameraPitchThreshold:this.cameraPitchThreshold}),()=>{this._compileTask?.abort(),this._compileTask=r.createTask(async e=>{t.throwIfAborted(e),this.compile()})},i.syncAndInitial))}compile(){const{currentNode:e,nodes:r}=this;if(e)if(r.length)switch(this.preserveAngle){case"heading":return n.updateDirectionalNodesWithSameView(e,r,this.cameraHeadingThreshold,null);case"pitch":return n.updateDirectionalNodesWithSameView(e,r,null,this.cameraPitchThreshold);case"both":return n.updateDirectionalNodesWithSameView(e,r,this.cameraHeadingThreshold,this.cameraPitchThreshold);default:return n.updateDirectionalNodesGeneric(e,r)}else e.reset()}};return e.__decorate([s.property()],l.prototype,"cameraHeadingThreshold",void 0),e.__decorate([s.property()],l.prototype,"cameraPitchThreshold",void 0),e.__decorate([s.property()],l.prototype,"preserveAngle",void 0),l=e.__decorate([h.subclass("esri.widgets.OrientedImageryViewer.components.NavigationUIViewModel")],l),l});