// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["require","exports","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../Widget","../../chunks/componentsUtils","./timeWidgetUtils","./widgetUtils","./decorators/messageBundle","./jsxFactory"],function(e,t,o,s,i,n,r,c,d,p,l,a,u,m){"use strict";const _="esri-timezone-picker",h={base:_,trigger:`${_}__trigger`,itemTitle:`${_}__item-title`,itemDescription:`${_}__item_description`};function g(e,t){return e.find(e=>y(e)===t)}function y(e){return e?`${e.utcOffset}-${e.long}`:void 0}t.TimezonePicker=class extends d{constructor(e,t){super(e,t),this.disabled=!1,this.value=null,this.onChange=null,this.open=!1,this.onOpen=null,this.onClose=null,this._selectedId=null,this._onOpen=()=>{this.open=!0,this.onOpen?.()},this._onClose=()=>{this.open=!1,this.onClose?.()},this._killEvent=e=>(e.stopPropagation(),!0),this._onChange=e=>{const t=e.target.selectedItems?.[0].getAttribute("data-id"),o=g(this._gmtOffsets,t)?.utcOffset;null!=o&&(this._selectedId=t,this.onChange?.(o))}}loadDependencies(){return p.loadCalciteComponents({button:()=>new Promise((t,o)=>e(["../../chunks/index2"],t,o)),dropdown:()=>new Promise((t,o)=>e(["../../chunks/index24"],t,o)),"dropdown-group":()=>new Promise((t,o)=>e(["../../chunks/index25"],t,o)),"dropdown-item":()=>new Promise((t,o)=>e(["../../chunks/index26"],t,o))})}render(){const e=this._messages;if(!e)return m.tsx("div",{class:h.base,key:"empty"});const t=this._selectedItem,o=y(t);return m.tsx("div",{class:h.base,key:"container",onpointerdown:this._killEvent},m.tsx("calcite-dropdown",{disabled:this.disabled,open:this.open,overlayPositioning:"fixed",placement:"bottom-end",scale:"s",onCalciteDropdownClose:this._onClose,onCalciteDropdownOpen:this._onOpen,onCalciteDropdownSelect:this._onChange},m.tsx("calcite-button",{appearance:"transparent",class:h.trigger,"data-testid":"timezone-picker-button",disabled:this.disabled,key:"trigger",kind:"neutral",scale:"s",slot:"trigger",title:e.chooseTimezone},t?.short??""),m.tsx("calcite-dropdown-group",{selectionMode:"single"},this._gmtOffsets.map(e=>{const t=y(e);return m.tsx("calcite-dropdown-item",{"data-id":t,"data-testid":t,key:t,selected:o===t},m.tsx("div",{class:h.itemTitle,key:"title"},e.shortWithUTC),m.tsx("div",{class:h.itemDescription,key:"description"},e.long))}))))}get _gmtOffsets(){const e=this._messages;return e?l.getTimezoneInfos(e):[]}get _selectedItem(){const e=this._gmtOffsets,t=this.value,o=g(e,this._selectedId);return o?.utcOffset===t?o:function(e,t){return e.find(e=>e.utcOffset===t)}(e,t)}},o.__decorate([s.property()],t.TimezonePicker.prototype,"disabled",void 0),o.__decorate([s.property()],t.TimezonePicker.prototype,"value",void 0),o.__decorate([s.property()],t.TimezonePicker.prototype,"onChange",void 0),o.__decorate([s.property()],t.TimezonePicker.prototype,"open",void 0),o.__decorate([s.property()],t.TimezonePicker.prototype,"onOpen",void 0),o.__decorate([s.property()],t.TimezonePicker.prototype,"onClose",void 0),o.__decorate([s.property(),u.messageBundle("esri/widgets/support/t9n/timezone")],t.TimezonePicker.prototype,"_messages",void 0),o.__decorate([s.property()],t.TimezonePicker.prototype,"_gmtOffsets",null),o.__decorate([s.property()],t.TimezonePicker.prototype,"_selectedItem",null),o.__decorate([s.property()],t.TimezonePicker.prototype,"_selectedId",void 0),t.TimezonePicker=o.__decorate([c.subclass("esri.widgets.support.TimezonePicker")],t.TimezonePicker),t.css=h,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});