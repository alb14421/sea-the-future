// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["require","exports","../../Graphic","../../core/screenUtils","../../editing/templateUtils","../../support/guards","../../symbols/support/symbolUtils"],function(e,t,i,r,a,n,o){"use strict";const l=e=>Object.freeze(Object.defineProperty({__proto__:null,default:e},Symbol.toStringTag,{value:"Module"}));async function s(t){if(!("geometryType"in t))return null;const{geometryType:i}=t,r="point"===i||"multipoint"===i?await new Promise((t,i)=>e(["../../symbols/SimpleMarkerSymbol"],e=>t(l(e)),i)):"polyline"===i?await new Promise((t,i)=>e(["../../symbols/SimpleLineSymbol"],e=>t(l(e)),i)):"polygon"===i||"mesh"===i||"multipatch"===i?await new Promise((t,i)=>e(["../../symbols/SimpleFillSymbol"],e=>t(l(e)),i)):null;return r?new r.default:null}t.fetchThumbnail=async function(e,t,l){if(!n.isGraphic(e)&&a.isSharedTemplateMetadata(e)&&e.thumbnail){const i=`data:image/png;base64,${e.thumbnail.imageData}`,r=document.createElement("div");return r.classList.add("esri-thumbnail-preview"),"geometryType"in t&&t.geometryType&&r.classList.add(`esri-thumbnail-preview--${t.geometryType}`),r.style.backgroundImage=`url(${i})`,r}const m=await async function(e,t){if(!n.isGraphic(t)&&a.isSharedTemplateMetadata(t))return s(e);if("renderer"in e&&e.renderer){const{renderer:r}=e,a=n.isGraphic(t)?t:new i({attributes:t.prototype.attributes});if("getSymbolAsync"in r){const e=await r.getSymbolAsync(a);if(e)return e}}return s(e)}(t,e);if(null==m)return null;const p={maxSize:r.px2pt(l?.maxSize??32),ariaLabel:l?.ariaLabel};if((n.isGraphic(e)||a.isStandardFeatureTemplate(e))&&"renderer"in t&&"dictionary"===t.renderer?.type&&(p.fieldMap=t.renderer.fieldMap??void 0,p.feature=n.isGraphic(e)?e:{attributes:e.prototype.attributes??{}}),n.isGraphic(e)&&e.geometry&&!1!==l?.useGeometry&&!e.geometry.type.includes("point")){p.geometry=e.geometry,p.useMarkerSymbolSize=!1;const t=r.px2pt(l?.maxSize??22);p.size={width:t,height:t}}return await o.renderPreviewHTML(m,p)},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});