// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../chunks/tslib.es6","../../../core/arrayUtils","../../../core/Collection","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/accessorSupport/decorators/subclass","../../LayerList/ListItem","../../LayerList/support/layerListUtils","./snappingLayerListUtils"],function(e,t,r,i,n,a,s,p,o,l,c){"use strict";var d;e.SnappingListItem=d=class extends o{constructor(e){super(e),this.children=new i,this.parent=null}get enabled(){const{children:e}=this;if(0===e.length)return null!=this.featureSource&&this.featureSource.enabled?"enabled":"disabled";let t=!1,r=!1;for(const i of e){if("indeterminate"===i.enabled)return i.enabled;if("enabled"===i.enabled?t=!0:"disabled"===i.enabled&&(r=!0),r&&t)return"indeterminate"}return r?"disabled":"enabled"}get childLayerIds(){return this.children.toArray().flatMap(e=>[e.layer?.id,...e.childLayerIds])}get featureSource(){const{layer:e,getFeatureSnappingSources:t}=this;return t().find(t=>t.layer===e)}_initializeChildLayers(e){if(!e)return;const t=e.filter(c.isValidSnappingLayer);super._initializeChildLayers(t)}_createChildItems(e){return e.map(e=>l.canDisplayLayer(e)?new d({layer:e,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).filter(r.isSome).reverse()}},t.__decorate([n.property()],e.SnappingListItem.prototype,"enabled",null),t.__decorate([n.property()],e.SnappingListItem.prototype,"children",void 0),t.__decorate([n.property()],e.SnappingListItem.prototype,"childLayerIds",null),t.__decorate([n.property()],e.SnappingListItem.prototype,"featureSource",null),t.__decorate([n.property({constructOnly:!0})],e.SnappingListItem.prototype,"getFeatureSnappingSources",void 0),t.__decorate([n.property()],e.SnappingListItem.prototype,"parent",void 0),e.SnappingListItem=d=t.__decorate([p.subclass("esri.widgets.support.SnappingControls.SnappingListItem")],e.SnappingListItem),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});