// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["require","exports","../../chunks/tslib.es6","../../Color","../../core/reactiveUtils","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../Widget","../../chunks/componentsUtils","./widgetUtils","./decorators/messageBundle","./jsxFactory"],function(e,o,t,r,s,n,a,i,c,l,p,d,u,_,h){"use strict";const v="esri-color-picker",k={base:v,backgroundPattern:`${v}__bg-pattern`,toggleButton:`${v}__toggle-button`,popover:`${v}__popover`};o.ColorPicker=class extends p{constructor(e,o){super(e,o),this.value=new r,this.alphaEnabled=!0,this._containerElement=null,this._button=null,this._open=!1,this._onColorInput=e=>{const o=e.currentTarget.value,t="string"==typeof o?new r(o):new r;this.value=t,this.onChange?.(t)}}initialize(){this.addHandles(s.watch(()=>({container:this._containerElement,value:this.value}),({container:e,value:o})=>{e?.style.setProperty("--esri-color-picker-value",o.toCss(!0))},s.syncAndInitial))}loadDependencies(){return d.loadCalciteComponents({button:()=>new Promise((o,t)=>e(["../../chunks/index2"],o,t)),"color-picker":()=>new Promise((o,t)=>e(["../../chunks/index67"],o,t)),popover:()=>new Promise((o,t)=>e(["../../chunks/index57"],o,t)).then(e=>e.index)})}render(){const e=this._messages,o=this._open?e.close:e.open;return h.tsx("div",{afterCreate:e=>this._containerElement=e,class:this.classes(k.base,this.class)},h.tsx("div",{class:k.backgroundPattern,key:"background-pattern"}),h.tsx("calcite-button",{afterCreate:e=>this._button=e,appearance:"transparent",class:k.toggleButton,key:"popover-trigger",kind:"neutral",label:o,scale:"s",tabIndex:0,title:o}),h.tsx("calcite-popover",{autoClose:!0,class:k.popover,key:"popover",label:e.label,overlayPositioning:"fixed",referenceElement:this._button,onCalcitePopoverClose:()=>this._open=!1,onCalcitePopoverOpen:()=>this._open=!0},h.tsx("calcite-color-picker",{alphaChannel:this.alphaEnabled,channelsDisabled:!0,key:"color-picker",savedDisabled:!0,value:this.value.toCss(!0),onCalciteColorPickerInput:this._onColorInput})))}},t.__decorate([n.property()],o.ColorPicker.prototype,"class",void 0),t.__decorate([n.property()],o.ColorPicker.prototype,"value",void 0),t.__decorate([n.property()],o.ColorPicker.prototype,"alphaEnabled",void 0),t.__decorate([n.property()],o.ColorPicker.prototype,"onChange",void 0),t.__decorate([n.property()],o.ColorPicker.prototype,"_containerElement",void 0),t.__decorate([n.property()],o.ColorPicker.prototype,"_button",void 0),t.__decorate([n.property()],o.ColorPicker.prototype,"_open",void 0),t.__decorate([n.property(),_.messageBundle("esri/widgets/support/t9n/ColorPicker")],o.ColorPicker.prototype,"_messages",void 0),o.ColorPicker=t.__decorate([l.subclass("esri.widgets.support.ColorPicker")],o.ColorPicker),Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});