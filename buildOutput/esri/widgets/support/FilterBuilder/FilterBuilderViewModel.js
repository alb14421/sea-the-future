// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../chunks/tslib.es6","../../../core/Accessor","../../../core/arrayUtils","../../../core/Collection","../../../core/reactiveUtils","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/accessorSupport/decorators/subclass","../FilterCondition","../FilterCondition/conditionUtils"],function(e,t,o,r,i,s,a,d,l,n,c,p){"use strict";return e.default=class extends o{constructor(e){super(e),this.conditionOperator="AND",this.conditionWidgets=new i,this.layer=null,this.operators=p.defaultOperatorNamesByFieldType}initialize(){this.addHandles([s.watch(()=>this.layer,async e=>{e&&!e.loaded&&await e.load()},s.initial)])}get count(){return this.conditionWidgets.length}get state(){const{layer:e}=this;return e?e.loaded?"ready":"loading":"disabled"}get whereClause(){const{conditionOperator:e,whereClauses:t}=this;let o="";return t.forEach((t,r)=>{o+=r>0?` ${e} (${t})`:`(${t})`}),o}get whereClauses(){return this.conditionWidgets.toArray().map(e=>e.whereClause).filter(r.isSome)}addCondition(e,t){const{layer:o,operators:r}=this;o&&this.conditionWidgets.add(new c({...e,layer:o,operators:r}),t)}duplicateCondition(e){const t=this.conditionWidgets.at(e);if(!t)return;const{fieldName:o,operator:r,value:i}=t;this.addCondition({fieldName:o,operator:r,value:i})}reset(){this.conditionWidgets.removeAll()}removeCondition(e){null==e?this.conditionWidgets.pop():this.conditionWidgets.splice(e,1)}},t.__decorate([a.property()],e.default.prototype,"conditionOperator",void 0),t.__decorate([a.property()],e.default.prototype,"conditionWidgets",void 0),t.__decorate([a.property()],e.default.prototype,"count",null),t.__decorate([a.property()],e.default.prototype,"layer",void 0),t.__decorate([a.property()],e.default.prototype,"operators",void 0),t.__decorate([a.property()],e.default.prototype,"state",null),t.__decorate([a.property()],e.default.prototype,"whereClause",null),t.__decorate([a.property()],e.default.prototype,"whereClauses",null),e.default=t.__decorate([n.subclass("esri.widgets.support.FilterBuilder.FilterBuilderViewModel")],e.default),e.default});