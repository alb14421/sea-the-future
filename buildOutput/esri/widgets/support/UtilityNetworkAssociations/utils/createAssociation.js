// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../core/uuid","../../../../layers/support/layerUtils","../../../../rest/networks/support/Association","../../../../rest/networks/support/NetworkElement"],function(e,t,r,o,a){"use strict";function i(e,t){const o=r.isSubtypeSublayer(e.sourceLayer)?e.sourceLayer.parent:e.sourceLayer;if(o&&"globalIdField"in o&&"layerId"in o&&o.globalIdField){const r=t.getSourceIdByLayerId(o.layerId),i="junction"===t.getSourceTypeById(r)?t.getTerminalConfiguration(e):void 0,n=i?.terminals.at(0)?.id,s=o.fieldsIndex.get("assetGroup").name,l=o.fieldsIndex.get("assetType").name,u=e.attributes[s],d=e.attributes[l],c=e.attributes[o.globalIdField];if(c&&null!=r)return new a({globalId:c,networkSourceId:r,assetGroupCode:u,assetTypeCode:d,terminalId:n})}}e.createAssociation=function(e){return new o({fromNetworkElement:i(e.fromFeature,e.utilityNetwork),toNetworkElement:i(e.toFeature,e.utilityNetwork),associationType:e.associationType,globalId:t.generateBracedUUID()})},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});