// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../../../chunks/tslib.es6","../../../core/arrayUtils","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/accessorSupport/decorators/subclass","../symbolPreviewUtils","./ItemBase"],function(e,t,r,i,o,l,a,p){"use strict";let s=class extends p{constructor(e){super(e),this._thumbnail=null,this.graphic=null,this.layer=null,this.layerItem=null,this.thumbnailSize=24}get _filterTerms(){return[this.title,this.layerItem.title,this.layerItem.groupLayerItem?.title].filter(t.isSome)}get key(){return`${this.layer.id}:${this.objectId??this.graphic.uid}`}get objectId(){return this.graphic.getObjectId()}get title(){const{objectId:e}=this;if(null!=e)return this.layerItem.featureTitleMap.get(e)||`${e}`}get thumbnail(){return this._thumbnail??void 0}get thumbnailKey(){return`${this.key}-${this.graphic.uid}`}get visible(){const{_filterTerms:e,viewModel:{activeLayerItem:t,filterText:r}}=this;if(t&&t.layer!==this.layer)return!1;if(null==r||""===r||!e.length)return!0;const i=new RegExp(r,"iu");return e.some(e=>i.test(e))}async fetchThumbnail(e){return this._thumbnail=await a.fetchThumbnail(this.graphic,this.layer,{maxSize:this.thumbnailSize,ariaLabel:e?.ariaLabel})}};return e.__decorate([r.property()],s.prototype,"_filterTerms",null),e.__decorate([r.property()],s.prototype,"_thumbnail",void 0),e.__decorate([r.property()],s.prototype,"graphic",void 0),e.__decorate([r.property()],s.prototype,"key",null),e.__decorate([r.property()],s.prototype,"layer",void 0),e.__decorate([r.property()],s.prototype,"layerItem",void 0),e.__decorate([r.property()],s.prototype,"objectId",null),e.__decorate([r.property()],s.prototype,"title",null),e.__decorate([r.property()],s.prototype,"thumbnail",null),e.__decorate([r.property()],s.prototype,"thumbnailKey",null),e.__decorate([r.property()],s.prototype,"thumbnailSize",void 0),e.__decorate([r.property()],s.prototype,"visible",null),s=e.__decorate([l.subclass("esri.widgets.support.SelectionList.FeatureItem")],s),s});