// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../../chunks/tslib.es6","../../../../core/accessorSupport/decorators/property","../../../../core/has","../../../../core/Logger","../../../../core/RandomLCG","../../../../core/accessorSupport/decorators/subclass","../../../Widget","./responsiveToolbarUtils","./ToolbarGroupBase","../../../../chunks/componentsUtils","../../../support/widgetUtils","../../../support/decorators/messageBundle","../../../support/jsxFactory"],function(e,t,o,n,s,r,i,l,a,c,p,u,d,h,g){"use strict";return t.default=class extends(p.ToolbarGroupBase(a)){constructor(e){super(e),this.allowCollapse=!0,this.messagesCommon=null}loadDependencies(){return u.loadCalciteComponents({action:()=>new Promise((t,o)=>e(["../../../../chunks/index12"],t,o)),"action-group":()=>new Promise((t,o)=>e(["../../../../chunks/index18"],t,o)).then(e=>e.index),"action-menu":()=>new Promise((t,o)=>e(["../../../../chunks/index19"],t,o)).then(e=>e.index)})}static{this.vnodeSelector="calcite-action-group"}get minimumLength(){const{actionChildren:e,scale:t}=this;return e.length?this.allowCollapse?c.WellKnownSizes.groupSeparator+c.WellKnownSizes.action[t]*Math.min(e.length,2):c.WellKnownSizes.groupSeparator+c.WellKnownSizes.action[t]*e.length:0}get lengthOptions(){const{actionChildren:e,scale:t,minimumLength:o,allowCollapse:n,priority:s}=this,r=[o];if(e.length<=2||!n||s<1)return r;for(let n=1;n<e.length-1;n++)r.push(o+c.WellKnownSizes.action[t]*n);return r}render(){if(!this.actionChildren.length)return g.tsx(g.tsxFragment,null,void 0);const{budgetedLength:e,actionChildren:t,activeChildElement:o,layout:n,slot:s,scale:r}=this,i=Math.floor(e/c.WellKnownSizes.action[r]),l=[],a=[];if(i>=t.length)l.push(...t);else{const e=o??l.at(0);if(l.push(...t.slice(0,i-1)),a.push(...t.slice(i-1)),e&&a.includes(e)){const[t]=a.splice(a.indexOf(e),1),o=l.pop();l.push(t),o&&a.unshift(o)}}return g.tsx("calcite-action-group",{key:"overflow-button-group",layout:n,onclick:e=>this._handleClick(e.target),slot:s},l.map(e=>this._renderManagedAction(e)),a.length>0?g.tsx("calcite-action-menu",{key:"split-button-dropdown",label:this.messagesCommon.more,overlayPositioning:"fixed"},g.tsx("calcite-action",{icon:c.Icons.overflow,key:"split-button-dropdown-trigger",scale:r,slot:"trigger",text:this.messagesCommon.more}),a.map(e=>this._renderManagedAction(e))):void 0)}_renderManagedAction(e){return g.tsx("calcite-action",{...e?.properties,"data-action-key":e?.properties?.key,text:e?.properties?.text??""})}},o.__decorate([n.property()],t.default.prototype,"allowCollapse",void 0),o.__decorate([n.property()],t.default.prototype,"minimumLength",null),o.__decorate([n.property(),h.messageBundle("esri/t9n/common")],t.default.prototype,"messagesCommon",void 0),o.__decorate([n.property()],t.default.prototype,"lengthOptions",null),t.default=o.__decorate([l.subclass("esri.widgets.Sketch.support.ResponsiveToolbar.OverflowGroup")],t.default),t.default});