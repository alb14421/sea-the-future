// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../chunks/tslib.es6","../../../Graphic","../../../core/Accessor","../../../core/reactiveUtils","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","../support/featureUtils"],function(t,e,r,o,a,s,i,c,n,d,l){"use strict";return t.default=class extends o{constructor(t){super(t),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.addHandles(a.watch(()=>this.creator,t=>{this._destroyContent(),this._createContent(t)},a.initial))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:t,graphic:e,destroyer:r}=this;t&&e&&(l.graphicCallback({type:"content",value:r,event:{graphic:e}}),this._set("created",null))}async _createContent(t){const e=this.graphic;if(!e||!t)return;const r=l.graphicCallback({type:"content",value:t,event:{graphic:e}});this._loadingPromise=r,this.notifyChange("state");const o=await r;r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",o))}},e.__decorate([s.property({readOnly:!0})],t.default.prototype,"created",void 0),e.__decorate([s.property()],t.default.prototype,"creator",void 0),e.__decorate([s.property()],t.default.prototype,"destroyer",void 0),e.__decorate([s.property({type:r})],t.default.prototype,"graphic",void 0),e.__decorate([s.property({readOnly:!0})],t.default.prototype,"state",null),t.default=e.__decorate([d.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],t.default),t.default});