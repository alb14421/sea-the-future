// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["require","exports","../../chunks/tslib.es6","../../core/reactiveUtils","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../Widget","./FeatureContent","./FeatureFields","./FeatureMedia","./FeatureExpression/FeatureExpressionViewModel","../../chunks/componentsUtils","../support/widgetUtils","../support/jsxFactory"],function(e,t,n,s,i,o,r,d,l,a,c,u,p,g,h,w,_){"use strict";const x="esri-feature",v={base:`${x}-expression`,loadingSpinnerContainer:`${x}__loading-container`};return t.default=class extends a{constructor(e,t){super(e,t),this._contentWidget=null,this.viewModel=new g}initialize(){this.addHandles(s.watch(()=>this.viewModel?.contentElementViewModel,()=>this._setupExpressionWidget(),s.initial))}loadDependencies(){return h.loadCalciteComponents({loader:()=>new Promise((t,n)=>e(["../../chunks/index32"],t,n))})}destroy(){this._destroyContentWidget()}render(){const{state:e}=this.viewModel;return _.tsx("div",{class:v.base},"loading"===e?this._renderLoading():"disabled"===e?null:this._contentWidget?.render())}_renderLoading(){return _.tsx("div",{class:v.loadingSpinnerContainer,key:"loading-container"},_.tsx("calcite-loader",{inline:!0,label:""}))}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,n=t?.type;this._destroyContentWidget();const s=e?"fields"===n?new u({viewModel:e}):"media"===n?new p({viewModel:e}):"text"===n?new c({viewModel:e}):null:null;this._contentWidget=s,this.scheduleRender()}},n.__decorate([i.property({type:g})],t.default.prototype,"viewModel",void 0),t.default=n.__decorate([l.subclass("esri.widgets.Feature.FeatureExpression")],t.default),t.default});