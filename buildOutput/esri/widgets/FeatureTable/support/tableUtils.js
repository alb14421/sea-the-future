// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../layers/support/layerUtils","./columnUtils","../../../chunks/componentsUtils"],function(e,n,i,t,r){"use strict";const a=()=>r.loadCalciteComponents({action:()=>new Promise((n,i)=>e(["../../../chunks/index12"],n,i)),button:()=>new Promise((n,i)=>e(["../../../chunks/index2"],n,i)),dropdown:()=>new Promise((n,i)=>e(["../../../chunks/index24"],n,i)),"dropdown-item":()=>new Promise((n,i)=>e(["../../../chunks/index26"],n,i)),"dropdown-group":()=>new Promise((n,i)=>e(["../../../chunks/index25"],n,i)),icon:()=>new Promise((n,i)=>e(["../../../chunks/index7"],n,i))}),o=()=>Promise.all([r.loadCalciteComponents({input:()=>new Promise((n,i)=>e(["../../../chunks/index4"],n,i)),option:()=>new Promise((n,i)=>e(["../../../chunks/index8"],n,i)),select:()=>new Promise((n,i)=>e(["../../../chunks/index9"],n,i)),"input-date-picker":()=>new Promise((n,i)=>e(["../../../chunks/index27"],n,i)),"input-time-picker":()=>new Promise((n,i)=>e(["../../../chunks/index29"],n,i))}),a()]);function l(e){return null!=e&&"object"==typeof e&&"createQuery"in e&&"getField"in e&&"queryFeatureCount"in e&&"queryFeatures"in e&&"queryObjectIds"in e&&"capabilities"in e&&"fields"in e&&"fieldsIndex"in e&&"id"in e&&"load"in e&&"objectIdField"in e&&"type"in e&&"when"in e}function s(e){return l(e)&&"queryAttachments"in e}function u(e){return l(e)&&"relationships"in e&&"queryRelatedFeatures"in e&&"queryRelatedFeaturesCount"in e}function d(e,n,{relatedTableId:t}){const r="scene"===e.type&&e.associatedLayer?e.associatedLayer.url:e.url,a=n=>!(!u(n)||n===e)&&("sublayer"===n.type&&n.layer?.url===e.url?n.id===t:r===n.url&&n.layerId===t);if("sublayer"===e.type&&"layer"in e&&i.isMapImageLayer(e.layer)){const n=n=>u(n)&&n!==e&&n.id===t,i=e.layer,r=i.allSublayers?.find(n)||i.subtables?.find(n);if(u(r))return r}let o=null;for(const e of n)if(i.isMapImageLayer(e)){const n=e.allSublayers?.find(a)||e.subtables?.find(a);if(n){o=n;break}}else if(a(e)){o=e;break}if(u(o))return o}n.findField=function(e,n){return null==n?null:e?.fields?.find(e=>n.toLowerCase()===e.name?.toLowerCase())},n.findRelatedLayer=function(e,n,i){if(n?.map)return d(e,[...n.map.allLayers,...n.map.allTables],i)},n.findRelatedLayerInSources=d,n.findRelationship=function(e,n){return e.relationships?.find(({id:e})=>e===n)},n.getRelationshipIdsToShow=function(e,n){return(e.relationships??[]).filter(e=>!(e.id===n&&"one-to-one"===e.cardinality)).map(({id:e})=>({relationshipId:e}))},n.getTableHighlightKey=function(e,n){return`${e.id}-${n}`},n.hasColumnForField=function e(n,i){return i?.some(i=>!(!t.isGroupColumn(i)||!e(n,i.columns))||i.fieldName===n)??!1},n.hasTemplateForField=function e(n,i){return i.some(i=>!("group"!==i.type||!e(n,i.columnTemplates))||i.fieldName===n)},n.isEmptyStringOrWhitespace=function(e){return null==e||0===e.trim().length},n.isIFeatureTableSupportedLayer=l,n.isIFeatureTableSupportedLayerWithAttachments=s,n.isIFeatureTableSupportedLayerWithAttachmentsEditing=function(e){return s(e)&&"addAttachment"in e&&"deleteAttachments"in e&&"updateAttachment"in e},n.isIFeatureTableSupportedLayerWithEditing=function(e){return l(e)&&"editingEnabled"in e&&"applyEdits"in e},n.isIFeatureTableSupportedLayerWithRelationships=u,n.isPageIndexValid=function(e,n){return null!=e&&Number.isInteger(e)&&e>-1&&e<n},n.loadColumnComponents=a,n.loadEditorColumnComponents=o,n.loadFieldColumnComponents=()=>Promise.all([r.loadCalciteComponents({"action-bar":()=>new Promise((n,i)=>e(["../../../chunks/index46"],n,i))}),o()]),n.uniqueColumnNames={action:"EsriFeatureTableActionColumn",attachments:"EsriFeatureTableAttachmentsColumn",relationship:"EsriFeatureTableRelationshipColumn"},Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});