// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../chunks/tslib.es6","../../../core/has","../../../core/maybe","../../../core/reactiveUtils","../../../core/timeUtils","../../../core/uuid","../../../core/accessorSupport/decorators/property","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","../../../intl/number","../../Slider","../../Widget","../css","./DiscreteConfigurator","../../support/ColorPicker","../../../chunks/componentsUtils","../../support/timeWidgetUtils","../../support/widgetUtils","../../support/decorators/messageBundle","../../support/jsxFactory"],function(e,t,o,r,i,s,l,a,c,n,d,h,u,p,b,g,C,m,_,v,x,f,k){"use strict";t.ThresholdConfigurator=class extends b{constructor(e){super(e),this.colorPickerVisible=!0,this.contextVisible=!0,this.contextToggleVisible=!0,this.contextTimeIntervalVisible=!0,this.contextColorPickerVisible=!0,this._valueSliderId=`value-slider-${a.generateUUID()}`,this._colorPickerId=`color-picker-${a.generateUUID()}`,this._discreteSwitchId=`discrete-switch-${a.generateUUID()}`,this._valueSlider=new p({visibleElements:{labels:!1,rangeLabels:!1},steps:l.convertTime(30,"minutes","milliseconds"),labelFormatFunction:(e,t)=>{const o=l.convertTime(e,"milliseconds","hours");return"tick"===t?u.formatNumber(o,{maximumFractionDigits:0}):""}}),this._onColorChange=e=>{this.options.color=e},this._onDiscreteEnabledChange=()=>{this.options.contextEnabled=this._discreteBlockSwitch.checked}}initialize(){const e=({value:e})=>{this.options.value=e};this.addHandles([s.watch(()=>{const{value:e,minValue:t,maxValue:o}=this.options;return{value:e,minValue:t,maxValue:o}},({value:e,minValue:t,maxValue:o})=>{const r=this._valueSlider;r.min=t,r.max=o,r.values=[e];const i=o-t,s=Math.floor(l.convertTime(i,"milliseconds","hours"));r.tickConfigs=[{mode:"count",values:2*s+1,labelsVisible:!1,tickCreatedFunction:(e,t)=>v.onSecondaryTickCreated({tickElement:t})},{mode:"count",values:s+1,labelsVisible:!0,tickCreatedFunction:(e,t,o)=>v.onPrimaryTickCreated({tickElement:t,labelElement:o})}]},s.syncAndInitial),this._valueSlider.on("thumb-change",e),this._valueSlider.on("thumb-drag",e)])}loadDependencies(){return _.loadCalciteComponents({label:()=>new Promise((t,o)=>e(["../../../chunks/index5"],t,o)),switch:()=>new Promise((t,o)=>e(["../../../chunks/index33"],t,o))})}destroy(){this._valueSlider=i.destroyMaybe(this._valueSlider)}render(){const e=this._messages.threshold,{color:t}=this.options;return k.tsx("div",{class:g.thresholdConfiguratorCss.base},k.tsx("calcite-label",{class:g.thresholdConfiguratorCss.valueLabel,for:this._valueSliderId,key:this._valueSliderId,scale:"s"},e.valueLabel,this._valueSlider.render()),this.colorPickerVisible?k.tsx("calcite-label",{for:this._colorPickerId,key:this._colorPickerId,layout:"inline",scale:"s"},k.tsx(m.ColorPicker,{id:this._colorPickerId,value:t,onChange:this._onColorChange}),e.colorLabel):null,this.contextVisible?this._renderDiscrete():null)}get testData(){}_renderDiscrete(){const{_messages:{threshold:e},options:{contextEnabled:t},contextToggleVisible:o,contextColorPickerVisible:r,contextTimeIntervalVisible:i}=this,s=r||i;return o||t&&s?k.tsx("div",{class:g.thresholdConfiguratorCss.discreteBlock},k.tsx("calcite-label",{classes:{[g.thresholdConfiguratorCss.discreteLabel]:!0,[g.thresholdConfiguratorCss.discreteLabelOpen]:t,[g.thresholdConfiguratorCss.discreteLabelEmpty]:!s},for:this._discreteSwitchId,layout:o?"inline-space-between":"default",scale:"s"},k.tsx("span",{class:g.thresholdConfiguratorCss.discreteLabelText},e.discreteLabel),o?k.tsx("calcite-switch",{afterCreate:e=>this._discreteBlockSwitch=e,bind:this,checked:t,id:this._discreteSwitchId,scale:"s",onCalciteSwitchChange:this._onDiscreteEnabledChange}):null),t?this._renderDiscreteConfigurator():null):null}_renderDiscreteConfigurator(){const{threshold:e}=this._messages,{contextColorPickerVisible:t,contextTimeIntervalVisible:o,options:{contextOptions:r}}=this;return k.tsx(C.DiscreteConfigurator,{colorPickerLabel:e.discreteColorLabel,colorPickerVisible:t,options:r,timeIntervalVisible:o})}},o.__decorate([c.property()],t.ThresholdConfigurator.prototype,"options",void 0),o.__decorate([c.property()],t.ThresholdConfigurator.prototype,"colorPickerVisible",void 0),o.__decorate([c.property()],t.ThresholdConfigurator.prototype,"contextVisible",void 0),o.__decorate([c.property()],t.ThresholdConfigurator.prototype,"contextToggleVisible",void 0),o.__decorate([c.property()],t.ThresholdConfigurator.prototype,"contextTimeIntervalVisible",void 0),o.__decorate([c.property()],t.ThresholdConfigurator.prototype,"contextColorPickerVisible",void 0),o.__decorate([c.property()],t.ThresholdConfigurator.prototype,"testData",null),o.__decorate([c.property()],t.ThresholdConfigurator.prototype,"_valueSlider",void 0),o.__decorate([c.property(),f.messageBundle("esri/widgets/ShadowCast/t9n/ShadowCast")],t.ThresholdConfigurator.prototype,"_messages",void 0),t.ThresholdConfigurator=o.__decorate([h.subclass("esri.widgets.ShadowCast.components.ThresholdConfigurator")],t.ThresholdConfigurator),Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});