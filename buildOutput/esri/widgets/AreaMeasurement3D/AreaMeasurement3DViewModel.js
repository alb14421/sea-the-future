// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../../chunks/tslib.es6","../../analysis/AreaMeasurementAnalysis","../../core/deprecate","../../core/Logger","../../core/reactiveUtils","../../core/unitUtils","../../core/accessorSupport/decorators/property","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../properties/defaultUnit","../support/AnalysisViewModel"],function(e,t,s,r,i,n,a,o,l,u,p,d){"use strict";let c=class extends d.AnalysisViewModel{constructor(e){super(e),this.analysis=null,this._userUnitOptions=null,this._userUnit=null,this.supportedViewType="3d",this.unsupportedErrorMessage="AreaMeasurement3DViewModel is only supported in 3D views.",e?.isDefaultViewModel||s.deprecateUnnecessaryViewModel(r.getLogger(this),"Area Measurement 3D","arcgis-area-measurement-3d",{version:"4.33"})}initialize(){this.addHandles(i.watch(()=>({analysis:this.analysis,unit:this.unit}),({analysis:e,unit:t})=>{null!=e&&(e.unit=t)},i.syncAndInitial))}get state(){return this.disabled||!this.ready?"disabled":null==this.tool?"ready":this.tool.state}get measurement(){if(null==this.tool||this.disabled||this.tool.destroyed)return null;const{analysisView:e}=this;if(null==e)return null;const{viewData:t,areaLabel:s,perimeterLengthLabel:r}=e,i=t.validMeasurement,n="euclidean"===t.mode,a=0===t.intersectingSegments.size,o=a?i?"available":"unavailable":"invalid";return{mode:n?"euclidean":"geodesic",area:{text:a&&i?s:null,state:o},perimeterLength:{text:a&&i?r:null,state:o}}}get unitOptions(){const e=this._userUnitOptions?.filter(e=>n.measurementAreaUnits.includes(e));return e&&e.length>0?e:n.measurementAreaUnits.slice()}set unitOptions(e){this._userUnitOptions=e}get unit(){const e=this._userUnit,t=this.unitOptions;if(e&&t.includes(e))return e;const s=this.defaultUnit;return s&&t.includes(s)?s:t[0]}set unit(e){this._userUnit=e}constructAnalysis(){return new t}};return e.__decorate([a.property({type:t})],c.prototype,"analysis",void 0),e.__decorate([a.property({readOnly:!0})],c.prototype,"state",null),e.__decorate([a.property({readOnly:!0})],c.prototype,"measurement",null),e.__decorate([a.property()],c.prototype,"unitOptions",null),e.__decorate([a.property()],c.prototype,"_userUnitOptions",void 0),e.__decorate([a.property()],c.prototype,"unit",null),e.__decorate([a.property()],c.prototype,"_userUnit",void 0),e.__decorate([a.property(p.defaultUnitPropertyMetadata)],c.prototype,"defaultUnit",void 0),c=e.__decorate([u.subclass("esri.widgets.AreaMeasurement3D.AreaMeasurement3DViewModel")],c),c});