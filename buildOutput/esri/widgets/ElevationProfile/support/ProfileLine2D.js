// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../chunks/tslib.es6","../../../Graphic","../../../core/Accessor","../../../core/colorUtils","../../../core/reactiveUtils","../../../core/throttle","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","../../../layers/GraphicsLayer","../../../symbols/CIMSymbol","./constants","./visualizationUtils"],function(e,t,r,i,o,a,s,l,c,n,h,d,p,y,f,u){"use strict";e.ProfileLine2D=class extends i{constructor(e){super(e),this._chartData=null,this._graphic=new r,this._layer=new p({listMode:"hide",internal:!0,title:"Profile line"}),this._update=e=>{const{chartData:t}=e;if(null==t)return this.remove();if(!t.refined)return;const r=t.lines.find(e=>e.viewVisualizationEnabled);if(!r)return;this._graphic.geometry=u.createLineGeometry(r,e.spatialReference),this._graphic.symbol=new y({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[5,10],lineDashEnding:"HalfPattern",controlPointEnding:"HalfPattern"}],capStyle:"Butt",width:1.5,color:r.color.toArray()},{type:"CIMSolidStroke",capStyle:"Butt",width:2,color:o.getContrast(r.color).toArray()}]}}});const i=this.view?.map?.layers;i&&!i.includes(this._layer)&&i.add(this._layer)}}initialize(){this._layer.add(this._graphic);const e=f.getConfig().profileLinesUpdateThrottleMillis;let t=this._update;if(e>0){const r=s.throttle(this._update,e);this.addHandles(r),t=r}this.addHandles(a.watch(()=>({spatialReference:this.view.spatialReference,chartData:this._chartData}),t,a.syncAndInitial))}destroy(){this.remove()}remove(){this.view?.map?.remove(this._layer)}update(e){this._chartData=e}},t.__decorate([l.property()],e.ProfileLine2D.prototype,"view",void 0),t.__decorate([l.property()],e.ProfileLine2D.prototype,"_chartData",void 0),e.ProfileLine2D=t.__decorate([d.subclass("esri.widgets.ElevationProfile.support.ProfileLine2D")],e.ProfileLine2D),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});