// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../../chunks/tslib.es6","../../Color","../../core/Evented","../../core/handleUtils","../../core/memoize","../../core/reactiveUtils","../../core/uuid","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../geometry/Point","./support/constants","./support/profileUtils","./support/unitUtils"],function(e,t,r,o,i,s,l,n,p,a,c,u,d,h,y,_){"use strict";let v=class extends r.EventedAccessor{constructor(e){super(e),this.type=null,this.id=l.generateUUID(),this.title=null,this.color=new t("#000000"),this.visible=!0,this._getSamplesMemoized=i.memoize((e,t)=>_.convertSamples(e,t)),this._getStatisticsMemoized=i.memoize((e,t)=>_.convertStatistics(e,t)),this.viewVisualizationEnabled=!0,this.result=null,this.effectiveUnits=null,this.numSamplesForPreview=30,this.numSamplesPerChunk=200,this.chartFillEnabled=!0,this.chartStrokeWidth=1.5,this.chartStrokeOffsetY=0,this._viewModel=null}get progress(){return null!=this.result&&this.visible?this.result.progress:0}get samples(){return this._getSamplesMemoized(this.result,this.effectiveUnits)}get statistics(){return this._getStatisticsMemoized(this.result,this.effectiveUnits)}get hoveredPoint(){const e=this._viewModel?.hoveredChartPosition;return null!=e?this._getPoint(e):null}get available(){return!0}get hasZ(){const e=this.result;return null!=e&&e.hasZ}get minDemResolution(){return h.getConfig().defaultDemResolution}queryElevation(){throw new Error("not implemented")}attach(e){return this._viewModel=e,o.handlesGroup([s.watch(()=>e.effectiveUnits,e=>{this.effectiveUnits=e},s.syncAndInitial),s.watch(()=>[e.input],()=>this._onChange(),s.sync)])}toggleVisibility(e){this.visible=void 0===e?!this.visible:e}_onChange(){this.emit("change")}_getPoint(e){const{samples:t,result:r}=this;if(null==t||null==r)return null;const o=t.length;if(0===o)return null;const i=e*t[o-1].distance,s=y.binaryFindClosest(t,i,e=>e.distance);if(null==s)return null;const{x:l,y:n,z:p}=s;return null==p?null:new d({x:l,y:n,z:p,spatialReference:r.spatialReference})}};return e.__decorate([n.property({nonNullable:!0})],v.prototype,"id",void 0),e.__decorate([n.property()],v.prototype,"title",void 0),e.__decorate([n.property({type:t,nonNullable:!0})],v.prototype,"color",void 0),e.__decorate([n.property({nonNullable:!0})],v.prototype,"visible",void 0),e.__decorate([n.property({readOnly:!0})],v.prototype,"progress",null),e.__decorate([n.property({readOnly:!0})],v.prototype,"samples",null),e.__decorate([n.property({readOnly:!0})],v.prototype,"statistics",null),e.__decorate([n.property()],v.prototype,"hoveredPoint",null),e.__decorate([n.property()],v.prototype,"viewVisualizationEnabled",void 0),e.__decorate([n.property()],v.prototype,"available",null),e.__decorate([n.property()],v.prototype,"result",void 0),e.__decorate([n.property()],v.prototype,"effectiveUnits",void 0),e.__decorate([n.property()],v.prototype,"numSamplesForPreview",void 0),e.__decorate([n.property()],v.prototype,"numSamplesPerChunk",void 0),e.__decorate([n.property()],v.prototype,"chartFillEnabled",void 0),e.__decorate([n.property()],v.prototype,"chartStrokeWidth",void 0),e.__decorate([n.property()],v.prototype,"chartStrokeOffsetY",void 0),e.__decorate([n.property({readOnly:!0})],v.prototype,"hasZ",null),e.__decorate([n.property({readOnly:!0})],v.prototype,"minDemResolution",null),e.__decorate([n.property()],v.prototype,"_viewModel",void 0),v=e.__decorate([u.subclass("esri.widgets.ElevationProfile.ElevationProfileLine")],v),v});