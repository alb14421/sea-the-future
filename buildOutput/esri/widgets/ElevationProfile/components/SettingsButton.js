// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../chunks/tslib.es6","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","../../Widget","../css","../../../chunks/componentsUtils","../../support/UnitSelect","../../support/widgetUtils","../../support/jsxFactory"],function(e,t,n,o,r,s,i,a,c,l,p,u,g,h){"use strict";t.SettingsButton=class extends c{constructor(){super(...arguments),this.messages=null,this._popoverIsOpen=!1,this._referenceElement=null,this._onUniformChartScalingChange=e=>{this.onUniformChartScalingChange(e.currentTarget.checked)}}loadDependencies(){return p.loadCalciteComponents({action:()=>new Promise((t,n)=>e(["../../../chunks/index12"],t,n)),checkbox:()=>new Promise((t,n)=>e(["../../../chunks/index44"],t,n)),label:()=>new Promise((t,n)=>e(["../../../chunks/index5"],t,n)),popover:()=>new Promise((t,n)=>e(["../../../chunks/index57"],t,n)).then(e=>e.index)})}render(){const{id:e,messages:t,visibleElements:n}=this,{unitSelector:o,uniformChartScalingToggle:r}=n;if(!t||!o&&!r)return h.tsx("div",{key:`${e}-empty`});const s=this._popoverIsOpen?t.hideSettings:t.showSettings;return h.tsx("div",{class:l.settingsCss.base,key:this},h.tsx("calcite-action",{afterCreate:e=>{this._referenceElement=e},appearance:"transparent","data-testid":"settings-button",icon:"gear",scale:"s",text:s,title:s}),this._referenceElement?h.tsx("calcite-popover",{autoClose:!0,label:s,placement:"bottom-end",referenceElement:this._referenceElement,onCalcitePopoverClose:()=>{this._popoverIsOpen=!1},onCalcitePopoverOpen:()=>{this._popoverIsOpen=!0}},this._renderPopoverContent()):null)}_renderPopoverContent(){const{unitSelector:e,uniformChartScalingToggle:t}=this.visibleElements;return h.tsx("div",{class:l.settingsCss.popoverContent},e?this._renderUnitSelector():null,t?this._renderUniformChartScalingToggle():null)}_renderUnitSelector(){const{messages:e}=this;return h.tsx(u.UnitSelect,{key:"unit-selector-label",options:this.unitOptions,selectLabel:e?.unitSelectLabel??"",value:this.unit,onChange:this.onUnitChange})}_renderUniformChartScalingToggle(){const{messages:e}=this,t=this.uniformChartScaling,n=e?.[t?"uniformChartScalingDisable":"uniformChartScalingEnable"]??"";return h.tsx("calcite-label",{class:l.settingsCss.uniformChartScalingLabel,key:"uniform-chart-scaling-label",layout:"inline"},h.tsx("calcite-checkbox",{checked:t,class:l.settingsCss.uniformChartScalingCheckbox,title:n,onCalciteCheckboxChange:this._onUniformChartScalingChange}),e?.uniformChartScalingLabel)}},n.__decorate([o.property()],t.SettingsButton.prototype,"messages",void 0),n.__decorate([o.property()],t.SettingsButton.prototype,"onUniformChartScalingChange",void 0),n.__decorate([o.property()],t.SettingsButton.prototype,"onUnitChange",void 0),n.__decorate([o.property()],t.SettingsButton.prototype,"uniformChartScaling",void 0),n.__decorate([o.property()],t.SettingsButton.prototype,"unit",void 0),n.__decorate([o.property()],t.SettingsButton.prototype,"unitOptions",void 0),n.__decorate([o.property()],t.SettingsButton.prototype,"visibleElements",void 0),n.__decorate([o.property()],t.SettingsButton.prototype,"_popoverIsOpen",void 0),n.__decorate([o.property()],t.SettingsButton.prototype,"_referenceElement",void 0),t.SettingsButton=n.__decorate([a.subclass("esri.widgets.ElevationProfile.components.SettingsButton")],t.SettingsButton),Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});