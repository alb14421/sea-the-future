// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../../chunks/tslib.es6","../../core/Accessor","../../core/Collection","../../core/Logger","../../core/ReactiveMap","../../core/accessorSupport/decorators/property","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../editing/templateUtils","./Edits"],function(e,t,r,o,i,s,n,a,p,l,d){"use strict";let u=class extends t{constructor(e){super(e),this.creationInfo=null,this.editorItem=null,this.fullTemplate=null,this.parent=null,this.temporaryHighlightFeature=null,this.sketchOptions=null,this.snappingManager=null,this.templateExecutorInfo=null,this.viewModel=null,this.upload=null,this._pendingEdits=new i}get isSharedTemplateWorkflow(){return!!this.fullTemplate&&l.isSharedTemplateOrMetadata(this.fullTemplate)}get pendingFeatures(){return new r([...this._pendingEdits.keys()])}set selectedPendingFeature(e){this._set("selectedPendingFeature",e),this.temporaryHighlightFeature=null}set timeZone(e){this._set("timeZone",e),this._pendingEdits.forEach(t=>{t.timeZone=e})}isSubmittable(e){const t=this._pendingEdits.get(e);return!!t?.submittable||!!t?.isAssociation}isDisplayable(e){return!this._pendingEdits.get(e)?.isAssociation}addPendingFeature(e,t=e,r={isAssociation:!1}){this.temporaryHighlightFeature=null;const{_pendingEdits:i}=this;if(i.has(e))return i.get(e);e.sourceLayer||o.getLogger("esri.widgets.Editor.CreateFeaturesWorkflowData").warn("source-layer-not-set","A feature added to `pendingFeatures` did not have `sourceLayer` set. This may cause problems throughout `CreateFeaturesWorkflow`.");const s=new d({feature:e,isAssociation:r.isAssociation});return s.trackChanges(t),i.set(e,s),s}getEditsForPendingFeature(e){return this._pendingEdits.get(e)}removePendingFeature(e){this.temporaryHighlightFeature=null;const{_pendingEdits:t}=this,r=t.get(e);r&&(r.destroy(),t.delete(e)),this.selectedPendingFeature===e&&(this.selectedPendingFeature=null)}getFeatureTitle(e){return this._pendingEdits.get(e)?.displayTitle}};return e.__decorate([s.property()],u.prototype,"creationInfo",void 0),e.__decorate([s.property()],u.prototype,"editorItem",void 0),e.__decorate([s.property()],u.prototype,"fullTemplate",void 0),e.__decorate([s.property()],u.prototype,"isSharedTemplateWorkflow",null),e.__decorate([s.property()],u.prototype,"parent",void 0),e.__decorate([s.property()],u.prototype,"pendingFeatures",null),e.__decorate([s.property()],u.prototype,"selectedPendingFeature",null),e.__decorate([s.property()],u.prototype,"temporaryHighlightFeature",void 0),e.__decorate([s.property({constructOnly:!0})],u.prototype,"sketchOptions",void 0),e.__decorate([s.property()],u.prototype,"snappingManager",void 0),e.__decorate([s.property()],u.prototype,"templateExecutorInfo",void 0),e.__decorate([s.property()],u.prototype,"viewModel",void 0),e.__decorate([s.property()],u.prototype,"upload",void 0),e.__decorate([s.property()],u.prototype,"timeZone",null),u=e.__decorate([p.subclass("esri.widgets.Editor.CreateFeaturesWorkflowData")],u),u});