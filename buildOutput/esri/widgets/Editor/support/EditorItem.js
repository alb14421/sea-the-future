// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../../../chunks/tslib.es6","../../../core/Accessor","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","../../../layers/support/layerUtils","../../../support/elevationInfoUtils","./EditorEditingCapabilities","../../FeatureForm/featureFormUtils"],function(e,t,r,o,a,s,l,i,p,d,n){"use strict";let c=class extends t{constructor(e){super(e),this.disabled=!1,this.layer=null,this.layerInfo=null,this.layerView=null}get _suspended(){return!!this.layerView?.suspended}get capabilities(){return new d({layer:this.layer,layerInfo:this.layerInfo,layerView:this.layerView})}get editable(){const{create:e,relationship:t,update:r,delete:{enabled:o}}=this.capabilities,a=e.attachments.enabled||r.attachments.enabled;return!this.disabled&&(e.enabled||r.enabled||a||o||t.enabled)}get formTemplate(){return this.capabilities.formTemplate}get hasInvalidFormTemplate(){return n.formTemplateHasInvalidFields(this.layer,this.formTemplate)}get isTable(){return i.isTable(this.layer)}get supportsCreateFeaturesWorkflow(){if(this.disabled)return!1;if("3d"===this.layerView?.view?.type&&p.hasEffectiveFeatureExpressionInfo(this.layer.elevationInfo))return!1;const{enabled:e,geometry:t}=this.capabilities.create;return this.isTable?e:e&&t}get supportsUpdateWorkflow(){const{capabilities:e}=this;return!this.disabled&&(e.update.enabled||e.update.attachments.enabled||e.delete.enabled)}get visible(){const{layer:e}=this,t=e.parent;return!this._suspended&&e.visible&&(!t||!("visible"in t)||t.visible)}};return e.__decorate([r.property()],c.prototype,"_suspended",null),e.__decorate([r.property()],c.prototype,"capabilities",null),e.__decorate([r.property()],c.prototype,"disabled",void 0),e.__decorate([r.property()],c.prototype,"editable",null),e.__decorate([r.property()],c.prototype,"formTemplate",null),e.__decorate([r.property()],c.prototype,"hasInvalidFormTemplate",null),e.__decorate([r.property()],c.prototype,"isTable",null),e.__decorate([r.property()],c.prototype,"layer",void 0),e.__decorate([r.property()],c.prototype,"layerInfo",void 0),e.__decorate([r.property()],c.prototype,"layerView",void 0),e.__decorate([r.property()],c.prototype,"supportsCreateFeaturesWorkflow",null),e.__decorate([r.property()],c.prototype,"supportsUpdateWorkflow",null),e.__decorate([r.property()],c.prototype,"visible",null),c=e.__decorate([l.subclass("esri.widgets.Editor.support.EditorItem")],c),c});