// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../renderers/support/ClassBreakInfo","./SmartMappingSliderBase","./ClassedColorSlider/ClassedColorSliderViewModel","../support/globalCss","../support/widgetUtils","../support/decorators/messageBundle","../support/jsxFactory"],function(e,r,s,t,o,l,a,i,n,d,c,p,m){"use strict";var u;const b="esri-classed-color-slider",g={base:b,rampElement:`${b}__ramp`,sliderContainer:`${b}__slider-container`,histogramContainer:`${b}__histogram-container`,track:`${b}--interactive-track`};let h=u=class extends i{constructor(e,r){super(e,r),this.messages=null,this.viewModel=new n,this._bgFillId=`${this.id}-bg-fill`,this._rampFillId=`${this.id}-linear-gradient`}get breaks(){return this.viewModel.breaks}set breaks(e){this.viewModel.breaks=e}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}static fromRendererResult(e,r){const{renderer:{classBreakInfos:s}}=e,t=s.map(e=>{const r=e.symbol.color;return{min:e.minValue,max:e.maxValue,color:r}});return new u({breaks:t,histogramConfig:{bins:r?r.bins:[]}})}updateClassBreakInfos(e){const r=this.breaks;if(r.length===e.length)return e.map((e,s)=>{const t=e.symbol;return t.color=r[s].color,new a({minValue:r[s].min,maxValue:r[s].max,symbol:t})});console.error(`Number of input breakInfos must match number of slider breaks: ${r.length}`)}updateFromRendererResult(e,r){const{renderer:{classBreakInfos:s}}=e,t=s.map(e=>{const r=e.symbol.color;return{min:e.minValue,max:e.maxValue,color:r}});this.set({breaks:t}),r?.bins&&(this.histogramConfig.bins=r.bins)}render(){const{state:e,label:r,visibleElements:s}=this,t="disabled"===e,o=this.classes(g.base,d.globalCss.widget,d.globalCss.panel,{[d.globalCss.disabled]:t,[g.track]:!!s.interactiveTrack});return m.tsx("div",{"aria-label":r,class:o},t?null:this.renderContent(this._renderRamp(),g.sliderContainer,g.histogramContainer))}_renderRamp(){const{_bgFillId:e,_rampFillId:r,viewModel:s}=this,t=s.getStopInfo();return m.tsx("div",{class:g.rampElement},m.tsx("svg",{xmlns:"http://www.w3.org/2000/svg"},m.tsx("defs",null,this.renderRampFillDefinition(r,t),this.renderBackgroundFillDefinition(e)),m.tsx("rect",{fill:`url(#${e})`,height:"100%",width:"100%",x:"0",y:"0"}),m.tsx("rect",{fill:`url(#${r})`,height:"100%",width:"100%",x:"0",y:"0"})))}};return e.__decorate([r.property()],h.prototype,"breaks",null),e.__decorate([r.property()],h.prototype,"label",null),e.__decorate([r.property(),p.messageBundle("esri/widgets/smartMapping/ClassedColorSlider/t9n/ClassedColorSlider")],h.prototype,"messages",void 0),e.__decorate([r.property({type:n})],h.prototype,"viewModel",void 0),h=u=e.__decorate([l.subclass("esri.widgets.smartMapping.ClassedColorSlider")],h),h});