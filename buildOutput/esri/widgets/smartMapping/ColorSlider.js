// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../renderers/support/authoringInfoUtils","./SmartMappingSliderBase","./ColorSlider/ColorSliderViewModel","../support/globalCss","../support/widgetUtils","../support/decorators/messageBundle","../support/jsxFactory"],function(e,r,t,s,i,a,o,l,n,d,p,c,h){"use strict";var m;const g="esri-color-slider",u={base:g,rampElement:`${g}__ramp`,sliderContainer:`${g}__slider-container`,histogramContainer:`${g}__histogram-container`,primaryHandle:`${g}--primary-handle`,track:`${g}--interactive-track`};let b=m=class extends l{constructor(e,r){super(e,r),this.messages=null,this.viewModel=new n,this._bgFillId=`${this.id}-bg-fill`,this._rampFillId=`${this.id}-linear-gradient`}get handlesSyncedToPrimary(){return this.viewModel.handlesSyncedToPrimary}set handlesSyncedToPrimary(e){this.viewModel.handlesSyncedToPrimary=e}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get primaryHandleEnabled(){return this.viewModel.primaryHandleEnabled}set primaryHandleEnabled(e){this.viewModel.primaryHandleEnabled=e}get stops(){return this.viewModel.stops}set stops(e){this.viewModel.stops=e}static fromRendererResult(e,r){const{visualVariable:{stops:t},statistics:s}=e,{avg:i,stddev:a}=s,l=e.renderer.authoringInfo?.visualVariables.find(e=>"color"===e.type),[n,d]=o.authoringInfoVariableSliderMinMax(l);return new m({max:d,min:n,stops:t,histogramConfig:{average:i??void 0,standardDeviation:a??void 0,bins:r?r.bins:[]},primaryHandleEnabled:"high-to-low"!==l?.theme})}updateFromRendererResult(e,r){const{visualVariable:{stops:t},statistics:s}=e,{avg:i,stddev:a}=s,l=e.renderer.authoringInfo?.visualVariables.find(e=>"color"===e.type),[n,d]=o.authoringInfoVariableSliderMinMax(l);this.set({max:d,min:n,stops:t,histogramConfig:{average:i,standardDeviation:a,bins:r?r.bins:[]},primaryHandleEnabled:"high-to-low"!==l?.theme})}render(){const{label:e,primaryHandleEnabled:r,state:t,visibleElements:s}=this,i="disabled"===t,a=this.classes(u.base,d.globalCss.widget,d.globalCss.panel,{[d.globalCss.disabled]:i,[u.primaryHandle]:r,[u.track]:!!s.interactiveTrack});return h.tsx("div",{"aria-label":e,class:a},i?null:this.renderContent(this._renderRamp(),u.sliderContainer,u.histogramContainer))}_renderRamp(){const{_bgFillId:e,_rampFillId:r,viewModel:t,zoomOptions:s}=this,i=t.getStopInfo();return h.tsx("div",{class:u.rampElement},h.tsx("svg",{xmlns:"http://www.w3.org/2000/svg"},h.tsx("defs",null,this.renderRampFillDefinition(r,i),this.renderBackgroundFillDefinition(e)),h.tsx("rect",{fill:`url(#${e})`,height:"100%",width:"100%",x:"0",y:"0"}),h.tsx("rect",{fill:`url(#${r})`,height:"100%",width:"100%",x:"0",y:"0"})),s?this.renderZoomCaps():null)}};return e.__decorate([r.property()],b.prototype,"handlesSyncedToPrimary",null),e.__decorate([r.property()],b.prototype,"label",null),e.__decorate([r.property(),c.messageBundle("esri/widgets/smartMapping/ColorSlider/t9n/ColorSlider")],b.prototype,"messages",void 0),e.__decorate([r.property()],b.prototype,"primaryHandleEnabled",null),e.__decorate([r.property()],b.prototype,"stops",null),e.__decorate([r.property({type:n})],b.prototype,"viewModel",void 0),b=m=e.__decorate([a.subclass("esri.widgets.smartMapping.ColorSlider")],b),b});