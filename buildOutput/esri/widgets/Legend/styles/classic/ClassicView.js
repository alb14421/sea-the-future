// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../chunks/tslib.es6","../../../../core/accessorSupport/decorators/property","../../../../core/has","../../../../core/Logger","../../../../core/RandomLCG","../../../../core/accessorSupport/decorators/subclass","../../../Widget","./css","./LegendElement","../../../support/globalCss","../../../support/Heading","../../../support/widgetUtils","../../../support/decorators/messageBundle","../../../support/jsxFactory"],function(e,s,t,r,o,a,n,l,i,c,d,p,g,u,y){"use strict";const h=`${i.legend}__`;return e.default=class extends l{constructor(e,s){super(e,s),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const e=this.activeLayerInfos,s=e?.toArray().map(e=>this._renderLegendForLayer(e)).filter(Boolean);return s?.length?y.tsx("section",null,s):y.tsx("div",{class:i.css.message,key:"no-legend"},this.messages.noLegend)}_renderLegendForLayer(e,s){if(!e.ready)return null;const t=`${e.layer.uid}-version-${e.version}`,r=`${h}${s?`${s}-`:""}${t}`,o=e.title?p.Heading({level:this.headingLevel,class:this.classes(d.globalCss.heading,i.css.label)},e.title):null;if(e.children.length){const s=e.children.toArray().map(e=>this._renderLegendForLayer(e,t));return y.tsx("section",{class:this.classes(i.css.service,i.css.groupLayer),key:r},o,s)}return this._renderLegendElementsForLayer(e,o,r)}_renderLegendElementsForLayer(e,s,t){const r=e.legendElements?.filter(Boolean);if(!r?.length)return null;const o=r.map(s=>y.tsx(c,{effectList:e.effectList,isChild:!1,key:`${t}-${s.type}`,layer:e.layer,legendElement:s,messages:this.messages})),a={[i.css.groupLayerChild]:!!e.parent};return y.tsx("section",{class:this.classes(i.css.service,a),key:t},s,y.tsx("div",{class:i.css.layer},o))}},s.__decorate([t.property()],e.default.prototype,"activeLayerInfos",void 0),s.__decorate([t.property()],e.default.prototype,"headingLevel",void 0),s.__decorate([t.property(),u.messageBundle("esri/widgets/Legend/t9n/Legend")],e.default.prototype,"messages",void 0),s.__decorate([t.property({readOnly:!0})],e.default.prototype,"type",void 0),e.default=s.__decorate([n.subclass("esri.widgets.Legend.styles.classic.ClassicView")],e.default),e.default});