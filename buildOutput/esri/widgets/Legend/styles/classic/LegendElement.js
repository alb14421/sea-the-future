// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../chunks/tslib.es6","../../../../core/accessorSupport/decorators/property","../../../../core/has","../../../../core/Logger","../../../../core/RandomLCG","../../../../core/accessorSupport/decorators/subclass","../../../Widget","./ColorRamp","./css","./SizeRamp","./UnivariateAboveAndBelowRamp","./UnivariateColorSizeRamp","../support/relationshipUtils","../support/utils","../../support/styleUtils","../../../support/widgetUtils","../../../support/jsxFactory"],function(e,s,t,r,i,a,l,n,o,c,d,p,h,y,m,g,u,f){"use strict";var v;return e.default=v=class extends n{constructor(e,s){super(e,s),this.effectList=null,this.isChild=!1,this.legendElement=null}render(){const e=this._renderLegendElement(),s=m.getLegendElementTitle(this.legendElement,this.messages),t=this.isChild?c.css.layerChildTable:c.css.layerTable,r=s?f.tsx("div",{class:c.css.layerCaption},s):null,i={[c.css.layerTableSizeRamp]:"size-ramp"===this.legendElement.type||!this.isChild};return f.tsx("section",{class:this.classes(t,i),key:`${this.key}-table`},r,e)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return f.tsx(d,{key:this.key,legendElement:this.legendElement,messages:this.messages});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return f.tsx(o,{key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return y.renderRelationshipRamp(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":return f.tsx("div",{afterCreate:g.attachToNode,bind:this.legendElement.preview,key:`${this.key}-preview`});case"univariate-above-and-below-ramp":return f.tsx(p,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return f.tsx(h,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(e){const s=e.infos.map(s=>this._renderElementInfo(s,e.legendType)).filter(Boolean);return s.length?f.tsx("div",{class:c.css.layerBody},s):null}_renderElementInfo(e,s){const{layer:t}=this,r="label"in e?e.label:null,i=`${this.key}-${r}`;if("type"in e&&e.type)return f.tsx(v,{effectList:this.effectList,isChild:!0,key:i,layer:t,legendElement:e,messages:this.messages});if(!("preview"in e&&e.preview||"src"in e&&e.src))return null;const a=g.isImageryStretchedLegend(t,s),l={[c.css.imageryLayerInfoStretched]:a},n={[c.css.imageryLayerInfoStretched]:a};return f.tsx("div",{class:c.css.layerRow,key:`${i}-row`},f.tsx("div",{class:this.classes(c.css.symbolContainer,n)},this._renderPreview(e,a)),f.tsx("div",{class:this.classes(c.css.layerInfo,l)},g.getTitle(this.messages,r,!1)||""))}_renderPreview(e,s){const{layer:t}=this;return"preview"in e&&e.preview?f.tsx("div",{afterCreate:g.attachToNode,bind:e.preview,class:c.css.symbol}):"src"in e&&e.src?this._renderImage(e,t,s):null}_renderImage(e,s,t){const{label:r,src:i,opacity:a}=e,l={[c.css.imageryLayerStretchedImage]:t,[c.css.symbol]:!t},n={opacity:`${a??s.opacity}`},o=g.getTitle(this.messages,r,!1);return f.tsx("img",{alt:o,"aria-label":o,border:0,class:this.classes(l),height:e.height,src:i,styles:n,width:e.width})}},s.__decorate([t.property()],e.default.prototype,"effectList",void 0),s.__decorate([t.property()],e.default.prototype,"isChild",void 0),s.__decorate([t.property()],e.default.prototype,"layer",void 0),s.__decorate([t.property()],e.default.prototype,"legendElement",void 0),s.__decorate([t.property()],e.default.prototype,"messages",void 0),e.default=v=s.__decorate([l.subclass("esri.widgets.Legend.styles.classic.LegendElement")],e.default),e.default});