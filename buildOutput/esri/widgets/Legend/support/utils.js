// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../core/timeUtils","../../../layers/support/fieldUtils","../../../renderers/support/numberUtils","../../../smartMapping/support/utils","../../../symbols/SimpleLineSymbol"],function(e,t,A,n,i,a,l){"use strict";async function r(t){if(!("visualVariables"in t)||!t.visualVariables)return null;const A=t.visualVariables.find(e=>"color"===e.type);if(!A)return null;let n=null,i=null;if(A.stops){if(1===A.stops.length)return A.stops[0].color;n=A.stops[0].value,i=A.stops[A.stops.length-1].value}const a=null!=n&&null!=i?n+(i-n)/2:0,{getColor:l}=await new Promise((t,A)=>e(["../../../renderers/visualVariables/support/visualVariableUtils"],t,A));return l(A,a)??null}t.createStopLabel=function(e,t,A,n){let l="";return 0===t?l="< ":t===A&&(l="> "),l+(n?a.formatAnyDate(e,n):i.format(e))},t.getAuthoringInfoVisualVariableByTheme=function(e,t){if("authoringInfo"in e)return e.authoringInfo?.visualVariables?.find(({theme:e})=>e===t)},t.getDateFormatOptions=function(e,t,i){const l=function(e,t){if(!t.field)return null;if("featureReduction"in e)switch(e.featureReduction?.type){case"cluster":case"binning":{const A=e.featureReduction.fields.find(({name:e})=>e.toLowerCase()===t.field.toLowerCase());return A&&"getField"in e?e.getField(A.onStatisticField):null}}return"getField"in e?e.getField?.(t.field):null}(e,t);if(!l||!a.isAnyDateField(l)&&!n.isTimeOnlyField(l))return null;let r=function(e,t){const A="popupTemplate"in e?e.popupTemplate?.fieldInfos:null;if(A?.length&&t)return A.find(e=>e.fieldName?.toLowerCase()===t.toLowerCase())?.format?.dateFormat}(e,l.name);if(!r&&"date"===l.type){let e=0,n=0;t.stops?(e=t.stops?.at(0)?.value??e,n=t.stops?.at(-1)?.value??n):"minDataValue"in t&&"maxDataValue"in t&&(e=t.minDataValue??e,n=t.maxDataValue??n),r=n-e>2*A.millisecondsPerTimeUnit.days?"short-date":"short-date-short-time"}return{fieldType:l.type,format:r,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in e?e.preferredTimeZone:null,viewTimeZone:i,datesInUnknownTimezone:"datesInUnknownTimezone"in e&&e.datesInUnknownTimezone}}},t.getMedianColor=r,t.getSymbolForFlowRenderer=async function(e,t){const A=e.trailCap,n=e.trailWidth||1,i=t||await r(e)||e.color;return new l({cap:A,color:i,width:n})},t.rgbImgSource=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="],t.specialCharsGreaterThan=">",t.specialCharsLessThan="<",Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});