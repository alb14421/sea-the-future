// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["require","../chunks/tslib.es6","../intl","../core/a11yUtils","../core/asyncUtils","../core/Collection","../core/deprecate","../core/Logger","../core/promiseUtils","../core/reactiveUtils","../core/accessorSupport/decorators/property","../core/has","../core/RandomLCG","../core/accessorSupport/decorators/subclass","../layers/orientedImagery/transformations/utils","./Expand","./PanoramicViewer","./Widget","./OrientedImageryViewer/arcUtils","./OrientedImageryViewer/constants","./OrientedImageryViewer/css","./OrientedImageryViewer/galleryUtils","./OrientedImageryViewer/OrientedImageryViewerViewModel","./OrientedImageryViewer/OrientedImageryViewerVisibleElements","./OrientedImageryViewer/components/Alert","./OrientedImageryViewer/components/ImageLocationWidget","./OrientedImageryViewer/components/ImageViewer","./OrientedImageryViewer/components/NavigationAction","./OrientedImageryViewer/components/NavigationActions","./OrientedImageryViewer/components/VideoEnhancementTools","./OrientedImageryViewer/navigation/errors","../chunks/componentsUtils","./support/globalCss","./support/widgetUtils","./support/decorators/messageBundle","./support/decorators/vmEvent","./support/jsxFactory","../intl/substitute"],function(e,t,i,a,s,o,r,n,l,d,c,g,h,m,u,p,v,y,_,w,T,M,b,C,A,x,I,L,k,V,f,S,O,E,F,P,H,D){"use strict";const G=e=>Object.freeze(Object.defineProperty({__proto__:null,default:e},Symbol.toStringTag,{value:"Module"})),B="overlayed";let N=class extends y{constructor(e,t){super(e,t),this.dataCaptureEnabled=!1,this.galleryOpened=!1,this.imageEnhancementToolActive=!1,this.videoEnhancementToolActive=!1,this.imageOverlaysOpened=!1,this.navigationToolActive=!1,this.viewModel=new b,this.messagesCommon=null,this.messagesSketch=null,this.pixelMeasurementUnit="meters",this.pixelAreaMeasurementUnit="square-meters",this.showCameraLocations=!1,this.showMapFeatures=!1,this.visibleElements=new C,this._imageOverlaysLoaderTask=null,this._imageMeasurementToolsLoaderTask=null,this._navigationSettingsLoaderTask=null,this._clearMeasurements=()=>{this.viewModel.measureType=null,this.viewModel.clearPreviousMeasurements()},this._clearImageLocation=()=>{this.imageLocationToolActive=!1},this._navigationToolExpanded=!1,this._navigationTool=null,this._galleryController=new AbortController,this._galleryObserver=new IntersectionObserver(this._lazyLoadImage.bind(this)),this._overlayedLayers=new o,this._previousAction=null,this._handleDataCaptureLayerChange=async e=>{if(this.dataCaptureLayer&&await this.stopDataCapture(!0),this.dataCaptureLayer=this.dataCaptureLayer===e?null:e,this.dataCaptureLayer)return this.startDataCapture(this.dataCaptureLayer)},this._handleNavigationSettingsInputChange=(e,t)=>{this.set(`${e}Threshold`,t)},this._handleNavigationSettingsToggle=e=>{this.viewModel.preserveAngle=e},this._handleOverlayLayerDeselect=e=>{const t=e.layer;t===this.dataCaptureLayer&&(this.stopDataCapture(),this.dataCaptureLayer=null),this.removeOverlayedGraphicsOnImage(`${t.id}`)},this._handleOverlayLayerSelect=e=>{const t=e.layer;this.viewModel.overlayMapFeatures(t,this.showMapFeatures),this.addHandles(d.watch(()=>t.visible,()=>{this.viewModel.toggleOverlayMapFeatures(t.id,t.visible,this.showMapFeatures)}),`${B}-${t.id}`)},this._highlight=e=>{const t=e.target?.dataset.objectid;t&&this.viewModel.highlight(t)},this._onAction=e=>{const{target:t}=e,{dataset:{action:i}}=t,{_previousAction:a}=this,s=a?.dataset.action,o=s?.includes("draw")??!1,r="select-feature"===s,n=s!==i;switch(i){case"draw-point":case"draw-polygon":case"draw-polyline":{a&&u.or(r,o&&n)&&(a.active=!1),t.active=!t.active;const e=i.replace("draw-","");this.viewModel.digitizeCreate(e),this._previousAction=t.active?t:null;break}case"save":this.viewModel.saveDrawing();break;case"select-feature":o&&(this._previousAction.active=!1),t.active=!t.active,this.viewModel.toggleSelection(t.active),this._previousAction=t.active?t:null;break;case"delete-feature":this.viewModel.digitizeDelete()}},this._onImageOverlayClosed=()=>{this.imageOverlaysOpened=!1},this._onShowCameraLocationsChanged=e=>{this.showCameraLocations=e},this._onShowMapFeaturesChanged=e=>{this.showMapFeatures=e},this._removeHighlight=()=>this.viewModel.removeHighlight(),this._restoreOverlays=async()=>Promise.all(this._overlayedLayers.map(e=>this.viewModel.overlayMapFeatures(e,this.showMapFeatures))),this._scaleNavigationTool=()=>{this._navigationToolExpanded=!this._navigationToolExpanded},this._sketchLoaderTask=null,this._settingsToggle=null,this._toggleImageNavigation=async e=>{const t=this.navigationMode;this._closeAllImageTools(),this.navigationMode=t!==e?e:null;const{activeViewer:i}=this.viewModel;if(!i)return;const{mode:a,preserveAngle:s}=this.viewModel;if("default"===a)if("directional"===this.navigationMode){const e=await this._loadNavigationSettings(),t="heading"===s||"both"===s,i="pitch"===s||"both"===s,{messages:a,messagesCommon:o}=this,r=new e({cameraHeadingThreshold:this.cameraHeadingThreshold,cameraPitchThreshold:this.cameraPitchThreshold,uiStrings:{configureNavigation:a.configureNavigation,preserveHeading:a.preserveHeading,preserveHeadingDescription:a.preserveHeadingDescription,preservePitch:a.preservePitch,preservePitchDescription:a.preservePitchDescription,settings:o.settings,thresholdLabel:a.thresholdLabel},onInputChange:this._handleNavigationSettingsInputChange,onToggle:this._handleNavigationSettingsToggle,preserveHeading:t,preservePitch:i});this._settingsToggle=new p({content:r,expandIcon:"configure"}),this.viewModel.activeViewer?.ui.add(this._settingsToggle,{position:"top-left"})}else this._settingsToggle&&(this._settingsToggle.expanded=!1,this.viewModel.activeViewer?.ui.remove(this._settingsToggle))},this._toggleImageAttributes=()=>{this.viewModel.toggleImageAttributes()},this.navigate=async e=>{let t=null;try{const{currentNode:i}=this.viewModel;if(!i)throw new f.NoImageLoadedError;t=await this.viewModel.navigate(i,e)}catch(e){l.isAbortError(e)||n.getLogger(this).error("Error occurred while navigating",e)}return t},this._loadImageFromGallery=this._loadImageFromGallery.bind(this),this._registerGalleryItem=this._registerGalleryItem.bind(this),this._unregisterGalleryItem=this._unregisterGalleryItem.bind(this),this.loadImageFromSource=this.loadImageFromSource.bind(this),this.updateSuitabilities=this.updateSuitabilities.bind(this),this._handleVideoBrightnessChange=this._handleVideoBrightnessChange.bind(this),this._handleVideoContrastChange=this._handleVideoContrastChange.bind(this),this._handleBrightnessChange=this._handleBrightnessChange.bind(this),this._handleContrastChange=this._handleContrastChange.bind(this),this._handleSharpnessChange=this._handleSharpnessChange.bind(this),this._resetVideoTools=this._resetVideoTools.bind(this),this._toggleVideoEnhancementToolState=this._toggleVideoEnhancementToolState.bind(this)}initialize(){this.addHandles([d.watch(()=>[this.viewModel?.bestFeatureAngle,this._navigationTool],([e,t])=>{t&&this._updateNavigationTool(t)},d.initial),d.watch(()=>this.currentCoverageVisible,e=>this._onCurrentCoverageVisibilityChange(e)),d.watch(()=>this.isAdditionalCoverageVisible,e=>this._onAdditionalCoverageVisibilityChange(e)),d.watch(()=>this.isAdditionalPointSourcesVisible,e=>this._onAdditionalCameraLocationsVisibility(e)),d.watch(()=>({features:this.currentBestFeature,showCameraLocations:this.showCameraLocations,state:this.viewModel.state}),({showCameraLocations:e,state:t})=>{"image-loaded"===t&&this.viewModel.overlayCameraLocations(e)},d.syncAndInitial),d.watch(()=>({feature:this.currentBestFeature,showMapFeatures:this.showMapFeatures,state:this.viewModel.state}),async(e,t)=>{if(e.showMapFeatures!==t?.showMapFeatures&&this.viewModel.toggleAllOverlayMapFeatures(e.showMapFeatures),null!=e.feature&&e.feature!==t?.feature){if(this.viewModel.removeAllOverlayMapFeatures(),await d.whenOnce(()=>"image-loaded"===this.viewModel.state),this.dataCaptureLayer&&this.stopDataCapture(),await this._restoreOverlays(),!this.dataCaptureLayer)return;await this.startDataCapture(this.dataCaptureLayer),this._previousAction?.active&&(this._previousAction.active=!1,this._previousAction=null)}},d.initial)])}loadDependencies(){return Promise.all([S.loadCalciteComponents({"action-bar":()=>new Promise((t,i)=>e(["../chunks/index46"],t,i)),"action-group":()=>new Promise((t,i)=>e(["../chunks/index18"],t,i)).then(e=>e.index),action:()=>new Promise((t,i)=>e(["../chunks/index12"],t,i)),panel:()=>new Promise((t,i)=>e(["../chunks/index51"],t,i)).then(e=>e.index),shell:()=>new Promise((t,i)=>e(["../chunks/index64"],t,i)),dialog:()=>new Promise((t,i)=>e(["../chunks/index3"],t,i)),dropdown:()=>new Promise((t,i)=>e(["../chunks/index24"],t,i)),"dropdown-group":()=>new Promise((t,i)=>e(["../chunks/index25"],t,i)),"dropdown-item":()=>new Promise((t,i)=>e(["../chunks/index26"],t,i)),slider:()=>new Promise((t,i)=>e(["../chunks/index47"],t,i))}),A.loadAlertComponents()])}destroy(){this._galleryController.abort(),this._galleryObserver.disconnect(),this.currentBestFeature=null}get accuracyParametersMissing(){return this.viewModel.accuracyParametersMissing}get activeLayer(){return r.deprecatedProperty(n.getLogger(this),"activeLayer",{replacement:"layer"}),this.layer}set activeLayer(e){r.deprecatedProperty(n.getLogger(this),"activeLayer",{replacement:"layer"}),this.layer=e}get activeVideoIcon(){const{videoElement:e,videoViewModel:t}=this.viewModel;return e?.loaded&&t?t.videoPaused?"play":"pause":"play"}get activeAudioIcon(){const{videoElement:e,videoViewModel:t}=this.viewModel;return e?.loaded&&t?.videoMuted?"sound-off":"sound"}get cameraHeadingThreshold(){return this.viewModel.cameraHeadingThreshold}set cameraHeadingThreshold(e){this.viewModel.cameraHeadingThreshold=e}get cameraPitchThreshold(){return this.viewModel.cameraPitchThreshold}set cameraPitchThreshold(e){this.viewModel.cameraPitchThreshold=e}get canNavigateSequentially(){const{layer:e}=this;if(!e)return!1;const{fields:t,sequenceOrderField:i}=e;return t.some(({name:e})=>e.toLowerCase()===`${i??"sequenceorder"}`.toLowerCase())}get currentBestFeature(){return this.viewModel.currentBestFeature}set currentBestFeature(e){this.viewModel.currentBestFeature=e}get currentCoverageVisible(){return this.viewModel.currentCoverageVisible}set currentCoverageVisible(e){this.viewModel.currentCoverageVisible=e}get dataCaptureLayer(){return this.viewModel.dataCaptureLayer}set dataCaptureLayer(e){this.viewModel.dataCaptureLayer=e}get disabled(){return this.viewModel.disabled}set disabled(e){this.viewModel.disabled=e}get displayMessage(){return this.viewModel.displayMessage}get features(){return this.viewModel.features}get imagePointsInView(){return this.viewModel.imagePointsInView}get icon(){return"oriented-imagery-widget"}set icon(e){this._overrideIfSome("icon",e)}get imageGalleryEnabled(){return this.viewModel.imageGalleryEnabled}get imageLocationToolActive(){return this.viewModel.imageLocationToolState}set imageLocationToolActive(e){this.viewModel.imageLocationToolState=e}get invalidCameraHeading(){return this.viewModel.invalidCameraHeading}get isAdditionalCoverageVisible(){return this.viewModel.isAdditionalCoverageVisible}set isAdditionalCoverageVisible(e){this.viewModel.isAdditionalCoverageVisible=e}get isAdditionalPointSourcesVisible(){return this.viewModel.isAdditionalPointSourcesVisible}set isAdditionalPointSourcesVisible(e){this.viewModel.isAdditionalPointSourcesVisible=e}get mapImageConversionToolState(){return this.viewModel.mapImageConversionToolState}set mapImageConversionToolState(e){this.viewModel.mapImageConversionToolState=e}get measureType(){return this.viewModel.measureType}set measureType(e){this.viewModel.measureType=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get navigationMode(){return this.viewModel.navigationMode}set navigationMode(e){this.viewModel.navigationMode=e}get popupEnabled(){const{popupEnabled:e,state:t}=this.viewModel;return("image-loaded"===t||this.videoLoaded)&&e}get referencePoint(){return this.viewModel.referencePoint??null}get sketchViewModel(){return this.viewModel.sketch}get triangularMeasurementActive(){return this.viewModel.triangularMeasurementActive}set triangularMeasurementActive(e){this.viewModel.triangularMeasurementActive=e}get videoLoaded(){const{mode:e,videoElement:t}=this.viewModel;return("video"===e&&!0===t?.loaded)??!1}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set determineWorkflowForFeature(e){this.viewModel.determineWorkflowForFeature=e}get determineWorkflowForFeature(){return this.viewModel.determineWorkflowForFeature}set updateFootprint(e){this.viewModel.updateFootprint=e}get updateFootprint(){return this.viewModel.updateFootprint}_renderActionBar(){return H.tsx("calcite-action-bar",{expandDisabled:!0,layout:"horizontal",slot:"action-bar"},H.tsx("calcite-action-group",null,this._currentFootprintToggle(),this._additionalFootprintToggle(),this._additionalPointSourcesToggle()),H.tsx("calcite-action-group",null,this._directionToolToggle(),this._mapImageConversionToggle(),this._navigationToolToggle(),this._imageEnhancementsToggle(),this._videoEnhancementsToggle()),H.tsx("calcite-action-group",null,this._measurementToolsToggle(),this._imageGalleryToggle(),this._imageOverlaysToggle(),this._openPopupAction()))}get _activeMeasurementIcon(){const{measureType:e,imageLocationToolActive:t}=this;if(t)return"pin-tear";switch(e){case"area":return"measure-area";case"height":return"measure-building-height-top-base";default:return"measure-line"}}get _activeMeasurementHeading(){const{measureType:e,messages:t,triangularMeasurementActive:i}=this,{groundArea:a,heightAboveGround:s,groundDistance:o,triangulatedAreaHeading:r,triangulatedDistanceHeading:n}=t;if(i)return"area"===e?r:n;switch(e){case"area":return a;case"height":return s;default:return o}}_additionalFootprintToggle(){const{isAdditionalCoverageVisible:e,invalidCameraHeading:t,visibleElements:{additionalFootprintToggle:i}}=this;return i?H.tsx("calcite-action",{active:e,bind:this,class:T.css.addCoverage,disabled:t,icon:"trapezoid-area",onclick:this._toggleAdditionalCoverage,text:this.messages.additionalFootprints,title:this.messages.additionalFootprints}):null}_additionalPointSourcesToggle(){const{isAdditionalPointSourcesVisible:e,invalidCameraHeading:t,visibleElements:{additionalCameraLocationsToggle:i}}=this;return i?H.tsx("calcite-action",{active:e,bind:this,class:T.css.addExpPoints,disabled:t,icon:"circle-area",onclick:this._toggleAdditionalCameraLocations,text:this.messages.additionalCameraLocations,title:this.messages.additionalCameraLocations}):null}get _measurementToggle(){const{viewModel:{state:e,measureType:t,currentBestFeatureMeasurementImage:i},triangularMeasurementActive:a,id:s}=this;if("image-loaded"!==e||!t||a&&!i)return;this._imageMeasurementToolsLoaderTask||this._loadImageMeasurementResources();const o=this._imageMeasurementToolsLoaderTask?.value;return o?H.tsx("calcite-dialog",{bind:this,dragEnabled:!0,escapeDisabled:!0,heading:this._activeMeasurementHeading,id:`${s}-${t}-measurement`,open:!0,placement:"bottom-start",resizable:!0,scale:"s",slot:"dialogs",width:"s",onCalciteDialogBeforeClose:this._clearMeasurements},H.tsx(o,{measurementType:t,measurementUnitMessages:this.measurementUnitMessages,messages:this.messages,oiViewModel:this.viewModel})):null}get _renderRoot(){const{viewModel:{state:e},triangularMeasurementActive:t}=this;return H.tsx("calcite-panel",{bind:this,class:t?T.css.viewerContainerMeasurement:T.css.viewerContainer,heading:this.visibleElements.title?this.messages.title:void 0,loading:e.includes("loading")&&!t},this.visibleElements.menu?this._renderActionBar():null,H.tsx("calcite-shell",null,H.tsx("calcite-panel",null,this._imageViewer,this._panoramicViewer,this._videoViewer,this._messageBox,this.invalidCameraHeading?null:[this._imageGalleryPanel,this._renderNavigation,this._imageOverlaysPanel()],this._imageEnhancementTools,this._videoEnhancementTools,this._renderSketch()),this._imageViewerTriangular,this._measurementToggle,this._locationToggle,this.invalidCameraHeading?this._renderWarning(this.messages.invalidCameraHeadingWarningTitle,this.messages.invalidCameraHeadingWarningDescription):null))}_currentFootprintToggle(){const{currentCoverageVisible:e,invalidCameraHeading:t}=this,{currentFootprintToggle:i}=this.visibleElements;return i?H.tsx("calcite-action",{active:e,bind:this,class:T.css.currentCoverage,disabled:t,icon:"trapezoid-area",onclick:this._toggleCurrentCoverage,text:this.messages.currentFootprint,title:this.messages.currentFootprint}):null}get _imageEnhancementTools(){const{imageEnhancementToolActive:e,viewModel:{brightness:t,contrast:i,sharpness:a,state:s}}=this;return e&&"image-loaded"===s?H.tsx("calcite-panel",{bind:this,class:T.css.imageEnhancementWrapper,closable:!0,closed:!e,heading:this.messages.imageEnhancement,key:this.messages.imageEnhancement,onCalcitePanelClose:this._toggleImageEnhancementToolState},H.tsx("div",{class:T.css.imageEnhancementTools},V.renderEnhancementSlider({title:this.messages.brightness,value:t,max:10,min:-10,ticks:5,handleChange:this._handleBrightnessChange}),V.renderEnhancementSlider({title:this.messages.contrast,value:i,max:10,min:-10,ticks:5,handleChange:this._handleContrastChange}),V.renderEnhancementSlider({title:this.messages.sharpness,value:a,max:1,min:0,ticks:.5,step:.1,handleChange:this._handleSharpnessChange})),H.tsx("calcite-action",{bind:this,icon:"reset",onclick:this._resetImageTools,slot:"header-actions-end",text:this.messagesCommon.reset,title:this.messagesCommon.reset})):null}get _videoEnhancementTools(){const{videoEnhancementToolActive:e,viewModel:{videoViewModel:t,mode:i},messages:{videoEnhancement:a,brightness:s,contrast:o},messagesCommon:{reset:r}}=this;return e&&"video"===i&&t?H.tsx(V.VideoEnhancementTools,{brightness:t.videoBrightness,constrast:t.videoContrast,handleBrightnessChange:this._handleVideoBrightnessChange,handleContrastChange:this._handleVideoContrastChange,resetTools:this._resetVideoTools,uiStrings:{videoEnhancement:a,brightness:s,contrast:o,reset:r},videoEnhancementToolActive:!0,onClose:this._toggleVideoEnhancementToolState}):null}_imageEnhancementsToggle(){const{state:e,mode:t}=this.viewModel,{imageEnhancement:i}=this.visibleElements;return i&&"video"!==t?H.tsx("calcite-action",{active:this.imageEnhancementToolActive,bind:this,disabled:"default"!==t||"image-loaded"!==e,icon:"sliders-horizontal",onclick:this._toggleImageEnhancementToolState,text:this.messages.imageEnhancement,title:this.messages.imageEnhancement}):null}_videoEnhancementsToggle(){const{mode:e}=this.viewModel,{videoEnhancement:t}=this.messages;return"video"===e?H.tsx("calcite-action",{active:this.imageEnhancementToolActive,bind:this,disabled:"video"!==e,icon:"sliders-horizontal",onclick:this._toggleVideoEnhancementToolState,text:t,title:t}):null}get _imageGalleryPanel(){const{container:e,galleryOpened:t,imageGalleryEnabled:i}=this;return i&&t&&e?this._imageGalleryContext:null}get _imageGalleryContext(){const{galleryOpened:e,invalidCameraHeading:t}=this;return H.tsx("calcite-panel",{bind:this,class:T.css.carousel,closable:!0,closed:!e,disabled:t,heading:this.messages.imageGallery,key:this.messages.imageGallery,onCalcitePanelClose:this._toggleImageGallery},H.tsx("div",{class:T.css.carouselContainer},this._renderThumbnails))}_imageGalleryToggle(){const{imageGalleryEnabled:e,invalidCameraHeading:t,visibleElements:{imageGallery:i}}=this;return i?H.tsx("calcite-action",{active:this.galleryOpened,bind:this,disabled:!e||t,icon:"images",onclick:this._toggleImageGallery,text:this.messages.imageGallery,title:this.messages.imageGallery}):null}get _imageOverlaysComponent(){const{_imageOverlayMessages:t,_imageOverlaysLoaderTask:i,_overlayedLayers:a,dataCaptureEnabled:o,dataCaptureLayer:r,imageOverlaysOpened:n,showCameraLocations:l,showMapFeatures:d,view:c,layer:g}=this;if(!g)return null;const h=g.imageGeometryField?.length?g.imageGeometryField:w.defaultImageGeometryField,m=g.imageReferenceField?.length?g.imageReferenceField:w.defaultOIObjectIDField;i||(this._imageOverlaysLoaderTask=s.createTask(async()=>(await new Promise((t,i)=>e(["./OrientedImageryViewer/components/ImageOverlays"],e=>t(G(e)),i))).default));const u=this._imageOverlaysLoaderTask?.value;return u?H.tsx(u,{closed:!n,dataCaptureEnabled:o,dataCaptureLayer:r,imageGeometryField:h,imageReferenceField:m,messages:t,overlayedLayers:a,showCameraLocations:l,showMapFeatures:d,view:c,onDataCaptureLayerChanged:this._handleDataCaptureLayerChange,onImageOverlaysClosed:this._onImageOverlayClosed,onLayerDeselected:this._handleOverlayLayerDeselect,onLayerSelected:this._handleOverlayLayerSelect,onShowCameraLocationsChanged:this._onShowCameraLocationsChanged,onShowMapFeaturesChanged:this._onShowMapFeaturesChanged}):null}get _imageOverlayMessages(){return{...this.messages,...this.messagesSketch}}get _imageSketchToolsMessages(){return{...this.messagesSketch,...this.messagesCommon}}_imageOverlaysPanel(){const{imageOverlaysOpened:e,viewModel:{state:t}}=this,i=this.classes({[T.css.imageOverlaysContainer]:!0,[O.globalCss.hidden]:!e||"image-loaded"!==t});return H.tsx("div",{class:i,key:this.messages.imageOverlays},this._imageOverlaysComponent)}_imageOverlaysToggle(){const{viewModel:{state:e},imageOverlaysOpened:t,invalidCameraHeading:i,visibleElements:{imageOverlays:a}}=this;return a?H.tsx("calcite-action",{active:t,bind:this,disabled:"image-loaded"!==e||i,icon:"layers",onclick:this._toggleImageOverlays,text:this.messages.imageOverlays,title:this.messages.imageOverlays}):null}get _imageViewer(){const{displayMessage:e,loadImageViewer:t,mode:i,clickAction:a,state:s}=this.viewModel,o=null!=e||"default"!==i||s.includes("loading"),{messages:{end:r,next:n,previous:l,start:d}}=this;return H.tsx(I,{afterCreate:t,clickAction:a,navigationEnabled:!o&&null!==this.navigationMode,navigationViewModel:this.viewModel,uiStrings:{end:r,next:n,previous:l,start:d},visible:!o})}get _imageViewerTriangular(){const{messages:e,triangularMeasurementActive:t}=this,{displayMessage:i,storeImageMeasurementViewer:a,mode:s,state:o,clickAction:r}=this.viewModel,n=null!=i||"default"!==s,l=this.classes({[T.css.viewer]:!n,[T.css.viewerHidden]:n});return t?H.tsx("calcite-panel",{class:T.css.viewerContainerMeasurement,heading:e.measurementViewerHeading,loading:o.includes("loading")},H.tsx("calcite-panel",{bind:this,class:l},H.tsx(I,{afterCreate:a,clickAction:r,uiStrings:e}))):null}get _videoViewer(){const{mode:e,loadVideoViewer:t,videoViewModel:i}=this.viewModel,{control:a,reset:s}=this.messagesCommon,{mute:o,unmute:r}=this.messages,n="video"!==e,l=this.classes({[T.css.viewer]:!n,[T.css.viewerHidden]:n});return H.tsx("calcite-panel",{bind:this,class:l},H.tsx("calcite-panel",{afterCreate:t,class:this.classes(O.globalCss.widget,"esri-image-viewer")}),H.tsx("calcite-slider",{bind:this,labelHandles:!0,labelTicks:!0,max:i?.videoDuration,minLabel:"0",value:i?.currentTime??0,onCalciteSliderChange:this._handleVideoSeek}),H.tsx("calcite-action-bar",{expandDisabled:!0,layout:"horizontal"},H.tsx("calcite-action-group",null,H.tsx("calcite-action",{bind:this,icon:this.activeVideoIcon,onclick:()=>i?.playVideoHandler(),text:"Play",title:i?.videoPaused?a.play:a.pause})),H.tsx("calcite-action-group",null,H.tsx("calcite-action",{bind:this,icon:"refresh",onclick:()=>i?.rewindVideoHandler(),text:"Rewind",title:s})),H.tsx("calcite-action-group",null,H.tsx("calcite-action",{bind:this,icon:this.activeAudioIcon,onclick:()=>i?.toggleAudio(),text:"Audio",title:i?.videoMuted?o:r}))))}get _locationToggle(){const{viewModel:{state:e,groundCoordinates:t,groundCoordinatesAccuracy:i,triangulatedPoint:a},imageLocationToolActive:s,triangularMeasurementActive:o,messages:{groundLocation:r,triangulatedLocationHeading:n}}=this;if("image-loaded"!==e||!t||!s)return;let l=t;if(o){if(!a)return;l=a}return H.tsx("calcite-dialog",{bind:this,dragEnabled:!0,escapeDisabled:!0,heading:o?n:r,id:r,open:!0,placement:"bottom-start",resizable:!0,scale:"s",slot:"dialogs",width:"s",onCalciteDialogBeforeClose:this._clearImageLocation},H.tsx(x,{accuracy:i,groundCoordinates:l,messages:this.messages}))}_mapImageConversionToggle(){const{mapImageConversionToolState:e,viewModel:{state:t},invalidCameraHeading:i,visibleElements:{mapImageConversionTool:a}}=this;return a?H.tsx("calcite-action",{active:e,bind:this,disabled:"image-loaded"!==t||i,icon:"image-pin",onclick:this._toggleMapImageConversionToolState,text:this.messages.mapImageConversionTool,title:this.messages.mapImageConversionTool}):null}_measurementToolsToggle(){const{_activeMeasurementIcon:e,measureType:t,viewModel:i,accuracyParametersMissing:a,messages:s,triangularMeasurementActive:o,visibleElements:{measurementTools:r}}=this,{state:n,mode:l}=i,{measurementTools:d,groundDistance:c,groundArea:g,heightAboveGround:h,groundLocation:m,triangulatedDistanceHeading:u,triangulatedAreaHeading:p,triangulatedLocationHeading:v}=s;return r?H.tsx("calcite-dropdown",{disabled:a,key:"measurement-tools",maxItems:5,title:d,width:"m"},H.tsx("calcite-action",{bind:this,disabled:"image-loaded"!==n||a,icon:e,slot:"trigger",text:d}),H.tsx("calcite-dropdown-group",null,H.tsx("calcite-dropdown-item",{bind:this,disabled:"image-loaded"!==n,iconStart:"measure-line",key:"distance-measurement",onclick:e=>this._toggleMeasurementSketch(e,"distance"),selected:"distance"===t&&!o},c),H.tsx("calcite-dropdown-item",{bind:this,disabled:"image-loaded"!==n,iconStart:"measure-area",key:"area-measurement",onclick:e=>this._toggleMeasurementSketch(e,"area"),selected:"area"===t&&!o},g),H.tsx("calcite-dropdown-item",{bind:this,disabled:"image-loaded"!==n,iconStart:"measure-building-height-top-base",key:"height-dropdown",onclick:e=>this._toggleMeasurementSketch(e,"height"),selected:"height"===t},h),H.tsx("calcite-dropdown-item",{bind:this,disabled:"image-loaded"!==n,iconStart:"pin-tear",key:"surface-location",onclick:this._toggleLocationTool,selected:!!this.imageLocationToolActive&&!o},m),"default"===l&&H.tsx(H.tsxFragment,null,H.tsx("calcite-dropdown-item",{bind:this,disabled:"image-loaded"!==n,iconStart:"dual-image-distance",key:"triangular-measurement-distance",selected:!!o&&"distance"===this.measureType,onCalciteDropdownItemSelect:this._toggleTriangularDistanceMeasurements},u),H.tsx("calcite-dropdown-item",{bind:this,disabled:"image-loaded"!==n,iconStart:"dual-image-area",key:"triangular-measurement-area",selected:!!o&&"area"===this.measureType,onCalciteDropdownItemSelect:this._toggleTriangularAreaMeasurements},p),H.tsx("calcite-dropdown-item",{bind:this,disabled:"image-loaded"!==n,iconStart:"dual-image-location",key:"triangular-location",selected:!!o&&this.imageLocationToolActive,onCalciteDropdownItemSelect:this._toggleTriangularLocation},v)))):null}get _messageBox(){const{messages:e,viewModel:{displayMessage:t,mode:i}}=this;if(!t||"video"===i)return null;const{data:a,key:s,map:o}=t,r=`${o?D.substitute(e[s],o):e[s]}`;return H.tsx("span",{class:T.css.messageBox},a?`${r} ${a}`:r)}async _loadNavigationSettings(){return this._navigationSettingsLoaderTask||(this._navigationSettingsLoaderTask=s.createTask(async()=>(await new Promise((t,i)=>e(["./OrientedImageryViewer/components/NavigationSettings"],e=>t(G(e)),i))).default)),await this._navigationSettingsLoaderTask.promise}_navigationToolToggle(){const{state:e}=this.viewModel,{visibleElements:{navigationTool:t},videoLoaded:i}=this;return t?H.tsx("calcite-action",{active:this.navigationToolActive,bind:this,disabled:"image-loaded"!==e&&!i||this.invalidCameraHeading,icon:"explore",onclick:this._toggleNavigationTool,text:this.messages.navigationTool,title:this.messages.navigationTool}):null}_directionToolToggle(){const{state:e}=this.viewModel,{visibleElements:{directionalNavigation:t,sequentialNavigation:i}}=this,a=new k.NavigationActionsCollection;return t&&a.push(new L({active:"directional"===this.navigationMode,disabled:"image-loaded"!==e||this.invalidCameraHeading,icon:"i2DExplore",onclick:()=>{this._toggleImageNavigation("directional")},text:this.messages.directionalNavigation,title:this.messages.directionalNavigationDescription})),i&&a.push(new L({active:"sequential"===this.navigationMode,disabled:"image-loaded"!==e||this.invalidCameraHeading||!this.canNavigateSequentially,icon:"reorder-stack",onclick:()=>{this._toggleImageNavigation("sequential")},text:this.messages.sequentialNavigation,title:this.messages.sequentialNavigationDescription})),t||i?H.tsx(k.NavigationActions,{actions:a,activeAction:a.items.find(e=>e.active),icon:"absolute-direction",label:this.messages.imageNavigation,scale:"m",title:this.messages.imageNavigation}):null}_openPopupAction(){const{showPopupsAction:e}=this.visibleElements;return e?H.tsx("calcite-action",{bind:this,disabled:!this.popupEnabled,icon:"popup",onclick:this._toggleImageAttributes,text:this.messages.showPopups,title:this.messages.showPopups}):null}get _panoramicViewer(){const{displayMessage:e,loadPanoramicViewer:t,mode:i,clickAction:a,state:s}=this.viewModel,{messages:{end:o,next:r,previous:n,start:l}}=this,d=null!=e||"panoramic"!==i||s.includes("loading");return H.tsx(v,{afterCreate:t,clickAction:a,navigationEnabled:!d&&null!==this.navigationMode,navigationViewModel:this.viewModel,uiStrings:{end:o,next:r,previous:n,start:l},visible:!d})}_activateTriangulatedImageLocationTool(){this.navigationToolActive=!0,this.imageLocationToolActive=!0}_activateTriangulatedImageLocationWorkflow(e,t){this._closeAllImageTools(),this.imageLocationToolActive=!0,this.triangularMeasurementActive=!e,this.navigationToolActive=!!t||!t}_closeImageToolsAndToggleNavigation(e,t){this._closeAllImageTools(),this.triangularMeasurementActive=!e,this.navigationToolActive=!t}_resetMeasureTypeAndActivateImageLocationTool(){this.measureType=null,this.imageLocationToolActive=!0}_closeAllImageTools(){this.imageEnhancementToolActive=!1,this.navigationToolActive=!1,this.imageOverlaysOpened=!1,this.galleryOpened=!1,this.measureType=null,this.imageLocationToolActive=!1,this.navigationMode=null,this.triangularMeasurementActive=!1,this._settingsToggle&&(this._settingsToggle.expanded=!1,this.viewModel.activeViewer?.ui.remove(this._settingsToggle))}_handleBrightnessChange(e){this.viewModel.brightness=e.currentTarget.value??0}_handleVideoBrightnessChange(e){this.viewModel.videoViewModel?.handleVideoBrightnessChange(e.target.value)}_handleContrastChange(e){this.viewModel.contrast=e.currentTarget.value??0}_handleVideoContrastChange(e){this.viewModel.videoViewModel?.handleVideoContrastChange(e.target.value)}_handleVideoSeek(e){const t=this.viewModel?.videoElement?.content;t&&(t.currentTime=e.target.value,t.play())}_handleSharpnessChange(e){this.viewModel.sharpness=e.currentTarget.value??0}_lazyLoadImage(e,t){e.forEach(async e=>{if(e.isIntersecting){const i=e.target,a=i.getAttribute("data-src"),s=i.getAttribute("data-rotation"),o=i.getAttribute("data-objectid"),r=s?parseFloat(s)%360:0,{layer:d,_galleryController:{signal:c}}=this;if(!a||!o)return;let g;try{g=M.isFeatureAttachment(a)?await M.loadImageForAttachment(d,o,{signal:c}):await M.getThumbnailPixelBlock(a,{signal:c})}catch(e){l.isAbortError(e)||n.getLogger("esri.widgets.OrientedImageryViewer").error("#lazyLoadImage()",e)}finally{t.unobserve(i)}if(!g)return;M.renderImageWithRotation(g,i,r)}})}_loadImageFromGallery(e){const{target:t}=e;if(!t)return;const i=t.getAttribute("data-objectid");i&&this.viewModel.currentBestFeature?.attributes.objectId!==Number(i)&&this.viewModel.selectBestFeature(i)}_loadImageMeasurementResources(){this._imageMeasurementToolsLoaderTask=s.createTask(async()=>{const{default:t}=await new Promise((t,i)=>e(["./OrientedImageryViewer/components/ImageMeasurementWidget"],e=>t(G(e)),i));return t})}_loadSketchResources(){this._sketchLoaderTask=s.createTask(async()=>(await new Promise((t,i)=>e(["./OrientedImageryViewer/components/SketchTools"],e=>t(G(e)),i))).default)}_onAdditionalCoverageVisibilityChange(e){this.viewModel.setAdditionalCoverageVisibility(e)}_onAdditionalCameraLocationsVisibility(e){this.viewModel.setAdditionalCameraLocationsVisibility(e)}_onCurrentCoverageVisibilityChange(e){this.viewModel.setCurrentCoverageVisibility(e)}_registerGalleryItem(e){this._galleryObserver.observe(e)}_renderWarning(e,t){const{viewModel:{state:i}}=this;return"image-loaded"===i?H.tsx(A.Alert,{icon:"exclamation-mark-triangle-f",kind:"warning",message:t,open:!0,title:e,tooltip:t}):null}get _renderNavigation(){const{viewModel:{sectorData:e,navigatorCurrentBestFeature:t,currentBestFeature:i,state:s}}=this;if(!this.container||!i)return null;let o,r,n,l,d;if(t){const{x:e,y:i,direction:a}=t,[s,c,g,h]=w.segmentArcs[a];o=`M ${e} ${i} L ${s} ${c} A ${w.sectorsRadii[2]} ${w.sectorsRadii[2]} 0 0 1 ${g} ${h} Z`,r=e,l=i,n=w.segmentArcs[a][4],d=w.segmentArcs[a][5]}const c=e=>{const t=e.target.dataset?.sector;t&&this.viewModel.handleSectorClick(+t)},g=e=>{const t=e.target.dataset;if(!t)return;const{featureIndexInSector:i,sector:a}=t;i&&a&&this.viewModel.handleFeatureClick({sector:a,featureIndexInSector:+i})},h=e=>{e.removeEventListener("click",g)},m=i.attributes.objectId,u=e?.map(e=>e?.items).filter(Boolean).flatMap(e=>e?.map(({x:e,y:t,objectID:i,featureIndexInSector:a,sector:s})=>H.tsx("circle",{afterRemoved:h,class:this.classes(T.css.feature,{selected:m===i}),cx:e,cy:t,"data-feature-index-in-sector":a,"data-sector":s,key:`${T.css.feature}-${i}`,onclick:g,r:w.featureCircleRadius}))),p=e=>{e.removeEventListener("click",c)},v=this.classes({[T.css.navigationWrapper]:!0,[T.css.navigationZoomed]:this._navigationToolExpanded});return this.navigationToolActive&&("image-loaded"===s||this.videoLoaded)?H.tsx("div",{bind:this,class:v,key:this.messages.navigationTool},H.tsx("svg",{afterCreate:e=>this._storeNavigationToolReference(e),class:a.prefersReducedMotion()?T.navigation:T.css.rotateWithAnimation,focusable:"false",height:w.navigationToolDimensionLength,role:"img",width:w.navigationToolDimensionLength,xmlns:"http://www.w3.org/2000/svg"},H.tsx("defs",null,H.tsx("linearGradient",{gradientUnits:"userSpaceOnUse",id:`${this.id}-coverage-fill`,x1:r,x2:n,y1:l,y2:d},H.tsx("stop",{class:T.css.navigationPathOffset0,offset:0}),H.tsx("stop",{class:T.css.navigationPathOffset1,offset:1}))),H.tsx("g",null,H.tsx("circle",{class:this.classes(T.css.sector,T.css.outerSector),cx:w.sectorsRadii[3],cy:w.sectorsRadii[3],onclick:this._scaleNavigationTool,r:w.sectorsRadii[3]}),H.tsx("circle",{class:T.css.sector,cx:w.sectorsRadii[3],cy:w.sectorsRadii[3],r:w.sectorsRadii[2]}),H.tsx("circle",{class:T.css.sector,cx:w.sectorsRadii[3],cy:w.sectorsRadii[3],r:w.sectorsRadii[1]}),H.tsx("circle",{class:T.css.sector,cx:w.sectorsRadii[3],cy:w.sectorsRadii[3],r:w.sectorsRadii[0]}),H.tsx("path",{class:T.css.pointer,d:"M 56.5 6.06217782649107 L 60 0 L 63.5 6.06217782649107 Z",key:`${T.css.pointer}-west`}),H.tsx("path",{class:this.classes(T.css.pointer,T.css.north),d:"M 113.93782217350893 56.5 L 120 60 L 113.93782217350893 63.5 Z",key:`${T.css.pointer}-north`}),H.tsx("path",{class:T.css.pointer,d:"M 56.5 113.93782217350893 L 60 120 L 63.5 113.93782217350893 Z",key:`${T.css.pointer}-east`}),H.tsx("path",{class:T.css.pointer,d:"M 6.06217782649107 56.5 L 0 60 L 6.06217782649107 63.5 Z",key:`${T.css.pointer}-south`}),H.tsx("path",{class:this.classes(T.css.sector,T.css.sectorSeparator),d:"M 23.937554159486076 23.937554159486076 L 96.06244584051393 96.06244584051393 M 23.937554159486076 96.06244584051393 L 96.06244584051393 23.937554159486076",key:T.css.sectorSeparator}),_.getAllArcPath([w.sectorsRadii[2],w.sectorsRadii[1],w.sectorsRadii[0]],w.sectorsRadii[3],w.sectorsRadii[3]).map((t,i)=>H.tsx("path",{afterRemoved:p,class:this.classes(T.css.sector,e?.[i]?.length?T.css.sectorEnabled:T.css.sectorDisabled),d:t,"data-sector":`${i}`,key:`${T.css.sector}-${i}`,onclick:c})),H.tsx("path",{class:this.classes(T.css.sector,T.css.sectorCross),d:"M 56.4 56.4 L 63.53 63.53 M 63.53 56.4 L 56.4 63.53",key:T.css.sectorCross}),u,i.attributes.cameraPitch>=5&&o?H.tsx("path",{class:T.css.selectedFeaturePath,d:o,fill:`url(#${this.id}-coverage-fill)`,key:T.css.selectedFeaturePath}):null))):null}_renderSketch(){const{dataCaptureLayer:e,imageOverlaysOpened:t}=this;if(!e||t)return null;if(this._sketchLoaderTask||this._loadSketchResources(),!this._sketchLoaderTask?.value)return null;const{geometryType:i}=e,a="point"===i?"pin":"polyline"===i?"line":"polygon",s=this._sketchLoaderTask.value;return H.tsx("div",{class:T.css.sketchTools},H.tsx(s,{icon:a,messages:this._imageSketchToolsMessages,type:i,onAction:this._onAction}))}get _renderThumbnails(){const{currentBestFeature:e,thumbnails:t}=this.viewModel;return e?H.tsx("div",{class:T.css.carouselContent},t?.items.map(({url:t,objectId:i,rotation:a},s)=>H.tsx("div",{class:`${T.css.carouselItemWrapper}${e.attributes.objectId===i?"--selected":""}`,key:`${T.css.carouselItemWrapper}-${s}`},H.tsx("canvas",{afterCreate:this._registerGalleryItem,afterRemoved:this._unregisterGalleryItem,alt:`thumbnail-${i}`,class:T.css.carouselItem,"data-objectid":`${i}`,"data-rotation":`${a}`,"data-src":t,onclick:this._loadImageFromGallery,onmouseenter:this._highlight,onmouseleave:this._removeHighlight})))):null}_resetImageTools(){this.viewModel.sharpness=this.viewModel.brightness=this.viewModel.contrast=0}_resetVideoTools(){this.viewModel.videoViewModel?.resetVideoEnhancementTools()}_storeNavigationToolReference(e){this._navigationTool=e}_toggleAdditionalCameraLocations(){this.isAdditionalPointSourcesVisible=!this.isAdditionalPointSourcesVisible}_toggleAdditionalCoverage(){this.isAdditionalCoverageVisible=!this.isAdditionalCoverageVisible}_toggleCurrentCoverage(){this.currentCoverageVisible=!this.currentCoverageVisible}_toggleImageEnhancementToolState(e){e.stopPropagation();const t=this.imageEnhancementToolActive;this._closeAllImageTools(),this.imageEnhancementToolActive=!t}_toggleVideoEnhancementToolState(e){e.stopPropagation(),this.videoEnhancementToolActive=!this.videoEnhancementToolActive}_toggleImageOverlays(e){e.stopPropagation();const t=this.imageOverlaysOpened;this._closeAllImageTools(),this.imageOverlaysOpened=!t}_toggleImageGallery(e){e.stopPropagation();const t=this.galleryOpened;this._closeAllImageTools(),this.galleryOpened=!!this.imageGalleryEnabled&&!t}_toggleLocationTool(e){const t=this.imageLocationToolActive,i=this.triangularMeasurementActive&&t;this._closeAllImageTools(),this.imageLocationToolActive=i||!t,e.stopPropagation()}_toggleMeasurementSketch(e,t){e.stopPropagation();const i=this.measureType,a=this.triangularMeasurementActive;this._closeAllImageTools(),this.measureType=i!==t||a?t:null,this.measureType===t&&(this.viewModel.displayNewMeasurementButton=!0)}_toggleNavigationTool(){const e=this.navigationToolActive;this._closeAllImageTools(),this.navigationToolActive=!e}_toggleMapImageConversionToolState(){this.mapImageConversionToolState=!this.mapImageConversionToolState}_toggleTriangularAreaMeasurements(){this._toggleTriangularMeasurements("area")}_toggleTriangularDistanceMeasurements(){this._toggleTriangularMeasurements("distance")}_toggleTriangularLocation(){const e=this.triangularMeasurementActive,t=this.navigationToolActive;e?null===this.measureType?this.imageLocationToolActive?this._closeImageToolsAndToggleNavigation(e,t):this._activateTriangulatedImageLocationTool():this._resetMeasureTypeAndActivateImageLocationTool():this._activateTriangulatedImageLocationWorkflow(e,t)}_toggleTriangularMeasurements(e){const t=this.triangularMeasurementActive,i=this.viewModel.measureType,a=this.navigationToolActive;t?e===i?(this._closeAllImageTools(),this.triangularMeasurementActive=!t,this.navigationToolActive=!a):(this.imageLocationToolActive=!1,this.measureType=e):(this._closeAllImageTools(),this.measureType=e,this.triangularMeasurementActive=!t,this.navigationToolActive=!!a||!a)}_unregisterGalleryItem(e){this._galleryObserver.unobserve(e)}_updateNavigationTool(e){const{previousFeatureAngle:t,bestFeatureAngle:i}=this.viewModel,a=(i-t+540)%360-180;e.style.setProperty(T.navigationToolRotationFrom,`${t}deg`),e.style.setProperty(T.navigationToolRotationTo,`${t+a}deg`)}async loadBestImage(e){return this.viewModel.loadBestImage(e)}loadImageFromSource(e,t){return this.viewModel.loadImageFromSource(e,t)}async overlayMapFeatures(e,t){return this.removeHandles(`${B}-${e.id}`),this.addHandles(d.watch(()=>e.visible,()=>{this.viewModel.toggleOverlayMapFeatures(e.id,e.visible,this.showMapFeatures)}),`${B}-${e.id}`),this._overlayedLayers.add(e),this.viewModel.overlayMapFeatures(e,t&&this.showMapFeatures)}async plotMapPoint(e){return this.viewModel.plotMapPoint(e)}plotReferencePointOnGround(e){this.viewModel.plotReferencePointOnGround(e)}plotReferencePointOnImage(e){this.viewModel.plotReferencePointOnImage(e)}removeOverlayedGraphicsOnImage(e){this.removeHandles(`${B}-${e}`),this._overlayedLayers.remove(this._overlayedLayers.find(t=>t.id===e)),this.viewModel.removeOverlayedGraphicsOnImage(e)}resetImage(){this.viewModel.resetImage()}render(){return H.tsx("div",{class:this.classes(O.globalCss.widget,T.root)},this._renderRoot)}async showImageByObjectId(e,t){return this.viewModel.showImageByObjectId(e,t)}async startDataCapture(e){return this.viewModel.startDataCapture(e)}async stopDataCapture(e){return this.viewModel.stopDataCapture(e)}updateSuitabilities(e){this.viewModel.updateSuitabilities(e)}};return t.__decorate([c.property({readOnly:!0})],N.prototype,"accuracyParametersMissing",null),t.__decorate([c.property()],N.prototype,"activeLayer",null),t.__decorate([c.property()],N.prototype,"activeVideoIcon",null),t.__decorate([c.property()],N.prototype,"activeAudioIcon",null),t.__decorate([c.property()],N.prototype,"cameraHeadingThreshold",null),t.__decorate([c.property()],N.prototype,"cameraPitchThreshold",null),t.__decorate([c.property()],N.prototype,"canNavigateSequentially",null),t.__decorate([c.property()],N.prototype,"currentBestFeature",null),t.__decorate([c.property()],N.prototype,"currentCoverageVisible",null),t.__decorate([c.property()],N.prototype,"dataCaptureEnabled",void 0),t.__decorate([c.property()],N.prototype,"dataCaptureLayer",null),t.__decorate([c.property()],N.prototype,"disabled",null),t.__decorate([c.property()],N.prototype,"features",null),t.__decorate([c.property()],N.prototype,"imagePointsInView",null),t.__decorate([c.property()],N.prototype,"galleryOpened",void 0),t.__decorate([c.property()],N.prototype,"icon",null),t.__decorate([c.property()],N.prototype,"imageEnhancementToolActive",void 0),t.__decorate([c.property()],N.prototype,"videoEnhancementToolActive",void 0),t.__decorate([c.property({readOnly:!0})],N.prototype,"imageGalleryEnabled",null),t.__decorate([c.property()],N.prototype,"imageLocationToolActive",null),t.__decorate([c.property()],N.prototype,"imageOverlaysOpened",void 0),t.__decorate([c.property({readOnly:!0})],N.prototype,"invalidCameraHeading",null),t.__decorate([c.property()],N.prototype,"isAdditionalCoverageVisible",null),t.__decorate([c.property()],N.prototype,"isAdditionalPointSourcesVisible",null),t.__decorate([c.property()],N.prototype,"mapImageConversionToolState",null),t.__decorate([c.property()],N.prototype,"measureType",null),t.__decorate([c.property()],N.prototype,"layer",null),t.__decorate([c.property()],N.prototype,"navigationToolActive",void 0),t.__decorate([c.property()],N.prototype,"navigationMode",null),t.__decorate([P.vmEvent(w.getDelegatedEvents()),c.property({type:b})],N.prototype,"viewModel",void 0),t.__decorate([c.property(),F.messageBundle("esri/widgets/OrientedImageryViewer/t9n/OrientedImageryViewer")],N.prototype,"messages",void 0),t.__decorate([c.property(),F.messageBundle("esri/core/t9n/Units")],N.prototype,"measurementUnitMessages",void 0),t.__decorate([c.property(),F.messageBundle("esri/t9n/common")],N.prototype,"messagesCommon",void 0),t.__decorate([c.property(),F.messageBundle("esri/widgets/Sketch/t9n/Sketch")],N.prototype,"messagesSketch",void 0),t.__decorate([c.property()],N.prototype,"pixelMeasurementUnit",void 0),t.__decorate([c.property()],N.prototype,"pixelAreaMeasurementUnit",void 0),t.__decorate([c.property({readOnly:!0})],N.prototype,"popupEnabled",null),t.__decorate([c.property()],N.prototype,"referencePoint",null),t.__decorate([c.property()],N.prototype,"showCameraLocations",void 0),t.__decorate([c.property()],N.prototype,"showMapFeatures",void 0),t.__decorate([P.vmEvent(["create","delete","redo","undo","update"]),c.property({readOnly:!0})],N.prototype,"sketchViewModel",null),t.__decorate([c.property()],N.prototype,"triangularMeasurementActive",null),t.__decorate([c.property()],N.prototype,"videoLoaded",null),t.__decorate([c.property()],N.prototype,"view",null),t.__decorate([c.property({type:C,nonNullable:!0})],N.prototype,"visibleElements",void 0),t.__decorate([c.property()],N.prototype,"determineWorkflowForFeature",null),t.__decorate([c.property()],N.prototype,"updateFootprint",null),t.__decorate([c.property()],N.prototype,"_activeMeasurementIcon",null),t.__decorate([c.property()],N.prototype,"_activeMeasurementHeading",null),t.__decorate([c.property()],N.prototype,"_imageOverlaysLoaderTask",void 0),t.__decorate([c.property()],N.prototype,"_imageMeasurementToolsLoaderTask",void 0),t.__decorate([c.property()],N.prototype,"_navigationSettingsLoaderTask",void 0),t.__decorate([c.property()],N.prototype,"_measurementToggle",null),t.__decorate([c.property()],N.prototype,"_renderRoot",null),t.__decorate([c.property()],N.prototype,"_imageEnhancementTools",null),t.__decorate([c.property()],N.prototype,"_videoEnhancementTools",null),t.__decorate([c.property()],N.prototype,"_imageGalleryPanel",null),t.__decorate([c.property()],N.prototype,"_imageGalleryContext",null),t.__decorate([c.property()],N.prototype,"_imageOverlaysComponent",null),t.__decorate([c.property()],N.prototype,"_imageOverlayMessages",null),t.__decorate([c.property()],N.prototype,"_imageSketchToolsMessages",null),t.__decorate([c.property()],N.prototype,"_imageViewer",null),t.__decorate([c.property()],N.prototype,"_imageViewerTriangular",null),t.__decorate([c.property()],N.prototype,"_videoViewer",null),t.__decorate([c.property()],N.prototype,"_locationToggle",null),t.__decorate([c.property()],N.prototype,"_messageBox",null),t.__decorate([c.property()],N.prototype,"_navigationToolExpanded",void 0),t.__decorate([c.property()],N.prototype,"_navigationTool",void 0),t.__decorate([c.property()],N.prototype,"_panoramicViewer",null),t.__decorate([c.property()],N.prototype,"_renderNavigation",null),t.__decorate([c.property()],N.prototype,"_renderThumbnails",null),t.__decorate([c.property()],N.prototype,"_sketchLoaderTask",void 0),N=t.__decorate([m.subclass("esri.widgets.OrientedImageryViewer")],N),N});