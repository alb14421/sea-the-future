// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["require","../chunks/tslib.es6","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/cast","../core/has","../core/RandomLCG","../core/accessorSupport/decorators/subclass","./Widget","./BuildingExplorer/BuildingExplorerViewModel","./BuildingExplorer/css","./BuildingExplorer/BuildingDisciplinesTree/BuildingDisciplinesTree","./BuildingExplorer/BuildingLevelPicker/BuildingLevelPicker","./BuildingExplorer/BuildingPhasePicker/BuildingPhasePicker","../chunks/componentsUtils","./support/globalCss","./support/Heading","./support/widgetUtils","./support/decorators/messageBundle","./support/jsxFactory"],function(e,s,i,t,l,r,o,n,a,d,c,p,u,g,h,v,y,_,m){"use strict";const b={levels:!0,phases:!0,disciplines:!0};let w=class extends n{constructor(e,s){super(e,s),this._defaultViewModel=new a,this.viewModel=this._defaultViewModel,this.visibleElements={...b},this.headingLevel=3,this.messages=null,this.messagesCommon=null,this.toggleSiblingsVisibility=!1}loadDependencies(){return g.loadCalciteComponents({loader:()=>new Promise((s,i)=>e(["../chunks/index32"],s,i))})}destroy(){this.viewModel!==this._defaultViewModel&&this._defaultViewModel.destroy()}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get layers(){return this.viewModel.layers}set layers(e){this.viewModel.layers=e}_castVisibleElements(e){return{...b,...e}}get icon(){return"organization"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}render(){const e=this.viewModel,s="disabled"===e.state||!e.isSupported;return m.tsx("div",{"aria-label":this.messages.widgetLabel,class:y.classes(h.globalCss.widget,d.css.base,h.globalCss.panel,{[h.globalCss.widgetDisabled]:s}),key:this},this._renderContent())}_renderContent(){const e=this.viewModel,s=this.messages;if(!e.isSupported)return m.tsx("p",{class:d.css.panelError},s.unsupported);if(!e.layers.length)return m.tsx("p",{class:d.css.panelError},s.noData);switch(e.state){case"loading":return this._renderLoadingIndicator();case"ready":return m.tsx("div",{class:d.css.content,key:"content"},this._renderLevelPickerSection(),this._renderPhasePickerSection(),this._renderDisciplinesSection());case"failed":return m.tsx("p",{class:d.css.panelError},s.failed);default:return null}}_renderLoadingIndicator(){const e=this.messagesCommon.loading;return m.tsx("div",{"aria-label":e,class:d.css.loadingContainer,key:"loading-container",role:"presentation",title:e},m.tsx("calcite-loader",{label:e,type:"indeterminate"}))}_renderLevelPickerSection(){const e=this.viewModel.level,s="ready"===e.state,i=e.allowedValues.length>1;if(!this.visibleElements.levels||!s||!i)return null;const t=this.messages?.level;return m.tsx("div",{class:y.classes(d.css.section,d.css.levels),key:"levels"},m.tsx(v.Heading,{level:this.headingLevel},t?.title),m.tsx(p,{messages:t,vm:e}))}_renderPhasePickerSection(){const e=this.viewModel.phase,s="ready"===e.state,i=e.allowedValues.length>1;if(!this.visibleElements.phases||!s||!i)return null;const t=this.messages.phase;return m.tsx("div",{class:y.classes(d.css.section,d.css.phases),key:"phases"},m.tsx(v.Heading,{level:this.headingLevel},t.title),m.tsx(u,{messages:t,vm:e}))}_renderDisciplinesSection(){const e=this.viewModel.disciplines,s="ready"===e.state,i=e.root.hasChildren;if(!this.visibleElements.disciplines||!s||!i)return null;const t=this.messages?.disciplines;return m.tsx("div",{class:y.classes(d.css.section,d.css.disciplines),key:"disciplines"},m.tsx(v.Heading,{level:this.headingLevel},t.title),m.tsx(c,{messages:t,toggleSiblingsVisibility:this.toggleSiblingsVisibility,vm:e}))}};return s.__decorate([i.property({type:a})],w.prototype,"viewModel",void 0),s.__decorate([i.property()],w.prototype,"view",null),s.__decorate([i.property()],w.prototype,"layers",null),s.__decorate([i.property()],w.prototype,"visibleElements",void 0),s.__decorate([t.cast("visibleElements")],w.prototype,"_castVisibleElements",null),s.__decorate([i.property()],w.prototype,"headingLevel",void 0),s.__decorate([i.property()],w.prototype,"icon",null),s.__decorate([i.property()],w.prototype,"label",null),s.__decorate([i.property(),_.messageBundle("esri/widgets/BuildingExplorer/t9n/BuildingExplorer")],w.prototype,"messages",void 0),s.__decorate([i.property(),_.messageBundle("esri/t9n/common")],w.prototype,"messagesCommon",void 0),s.__decorate([i.property({nonNullable:!0})],w.prototype,"toggleSiblingsVisibility",void 0),s.__decorate([i.property()],w.prototype,"uiStrings",void 0),w=s.__decorate([o.subclass("esri.widgets.BuildingExplorer")],w),w});