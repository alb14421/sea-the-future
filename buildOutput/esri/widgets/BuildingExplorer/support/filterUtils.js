// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/uuid","../../../layers/support/BuildingFilterBlock","../../../layers/support/BuildingFilterModeSolid","../../../layers/support/BuildingFilterModeXRay"],function(t,e,n,i,r){"use strict";const l="__BUILDING_EXPLORER_FILTER__";function o(t){const e="string"==typeof t?t:t.id;return!!e&&e.includes(l)}function u(t){return t.filter(t=>!!t).map(t=>`(${t})`).join(" AND ")}t.generateFilterId=function(){return`${e.generateUUID()}${l}`},t.getFilterBlockSolid=function(t){const e=u(t);return e?new n({filterExpression:e,filterMode:new i}):null},t.getFilterBlockXRay=function(t){const e=u(t);return e?new n({filterExpression:e,filterMode:new r}):null},t.getValueFromFilters=function(t,e){for(const n of t.items)for(const t of n.filters.items){if(!o(t))continue;const n=e(t);if(null!=n)return n}return null},t.isBuildingExplorerFilter=o,t.setFilterOnLayers=function(t,e){t.forEach(t=>{const n=t.filters.filter(t=>!o(t));null!=e&&n.push(e),function(t,e){const n=e.length;if(null==t||t.length!==n)return!1;for(let i=0;i<n;++i){const n=e.at(i).toJSON(),r=t.at(i).toJSON();if(n.id="",r.id="",JSON.stringify(n)!==JSON.stringify(r))return!1}return!0}(t.filters,n)||(t.filters=n);const i=t.filters.find(t=>o(t));t.activeFilterId=null!=i?i.id:null})},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});