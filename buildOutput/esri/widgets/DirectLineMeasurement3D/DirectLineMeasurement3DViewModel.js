// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../../chunks/tslib.es6","../../analysis/DirectLineMeasurementAnalysis","../../core/deprecate","../../core/Logger","../../core/reactiveUtils","../../core/unitUtils","../../core/accessorSupport/decorators/property","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../properties/defaultUnit","../support/AnalysisViewModel"],function(e,t,s,i,r,n,a,o,l,u,c,p){"use strict";let d=class extends p.AnalysisViewModel{constructor(e){super(e),this.analysis=null,this._userUnitOptions=null,this._userUnit=null,this.supportedViewType="3d",this.unsupportedErrorMessage="DirectLineMeasurement3DViewModel is only supported in 3D views.",e?.isDefaultViewModel||s.deprecateUnnecessaryViewModel(i.getLogger(this),"Direct Line Measurement 3D","arcgis-direct-line-measurement-3d",{version:"4.33"})}initialize(){this.addHandles(r.watch(()=>({analysis:this.analysis,unit:this.unit}),({analysis:e,unit:t})=>{null!=e&&(e.unit=t)},r.syncAndInitial))}get state(){return this.disabled||!this.ready?"disabled":null==this.tool?"ready":this.tool.state}get measurement(){const{tool:e}=this;if(null==e)return null;const t=e=>({text:e,state:"available"}),{analysisViewData:s}=e,i=null!=s.result;return{mode:s.result?.mode??"euclidean",directDistance:i&&"euclidean"===s.actualVisualizedMeasurement?t(s.directLabelText):{text:null,state:"unavailable"},horizontalDistance:i?t(s.horizontalLabelText):{text:null,state:"unavailable"},verticalDistance:i?t(s.verticalLabelText):{text:null,state:"unavailable"}}}get unitOptions(){const e=this._userUnitOptions?.filter(e=>n.measurementLengthUnits.includes(e));return e&&e.length>0?e:n.measurementLengthUnits.slice()}set unitOptions(e){this._userUnitOptions=e}get unit(){const e=this._userUnit,t=this.unitOptions;if(e&&t.includes(e))return e;const s=this.defaultUnit;return s&&t.includes(s)?s:t[0]}set unit(e){this._userUnit=e}constructAnalysis(){return new t}};return e.__decorate([a.property({type:t})],d.prototype,"analysis",void 0),e.__decorate([a.property({readOnly:!0})],d.prototype,"state",null),e.__decorate([a.property({readOnly:!0})],d.prototype,"measurement",null),e.__decorate([a.property()],d.prototype,"unitOptions",null),e.__decorate([a.property()],d.prototype,"_userUnitOptions",void 0),e.__decorate([a.property()],d.prototype,"unit",null),e.__decorate([a.property()],d.prototype,"_userUnit",void 0),e.__decorate([a.property(c.defaultUnitPropertyMetadata)],d.prototype,"defaultUnit",void 0),d=e.__decorate([u.subclass("esri.widgets.DirectLineMeasurement3D.DirectLineMeasurement3DViewModel")],d),d});