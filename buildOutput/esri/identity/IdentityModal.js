// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["require","../chunks/tslib.es6","../intl","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/subclass","../widgets/Widget","../chunks/componentsUtils","../widgets/support/widgetUtils","../widgets/support/decorators/messageBundle","../widgets/support/jsxFactory","../support/modeUtils","../intl/substitute"],function(e,t,s,o,n,i,r,a,l,c,d,p,u,h,m){"use strict";const _="esri-identity-modal",g={base:_,info:`${_}__info`,notice:`${_}__notice`};let y=class extends l{constructor(e,t){super(e,t),this.container=document.createElement("div"),this.error=null,this.oAuthPrompt=!1,this.open=!1,this.signingIn=!1,this.server=null,this.resource=null,this._usernameInputNode=null,this._passwordInputNode=null,document.body.appendChild(this.container)}loadDependencies(){return c.loadCalciteComponents({button:()=>new Promise((t,s)=>e(["../chunks/index2"],t,s)),dialog:()=>new Promise((t,s)=>e(["../chunks/index3"],t,s)),input:()=>new Promise((t,s)=>e(["../chunks/index4"],t,s)),label:()=>new Promise((t,s)=>e(["../chunks/index5"],t,s)),notice:()=>new Promise((t,s)=>e(["../chunks/index6"],t,s))})}get title(){return this.commonMessages?.auth.signIn}render(){const{open:e,title:t,messages:s,signingIn:o,oAuthPrompt:n,server:i,resource:r,error:a}=this,{info:l,oAuthInfo:c,lblItem:d,invalidUser:p,noAuthService:_,lblUser:y,lblPwd:b,lblCancel:v,lblSigning:I,lblOk:x}=s;return u.tsx("div",{class:this.classes(g.base,h.getCalciteModeClass())},u.tsx("form",{bind:this,onsubmit:this._submit},u.tsx("calcite-dialog",{bind:this,heading:t,modal:!0,open:e,outsideCloseDisabled:!0,scale:"s",widthScale:"s",onCalciteDialogClose:this._cancel,onCalciteDialogOpen:this._focusUsernameInput},u.tsx("div",{class:g.info},m.substitute(n?c:l,{server:i&&/\.arcgis\.com/i.test(i)?"ArcGIS Online":i,resource:`(${r||d})`})),a?u.tsx("calcite-notice",{class:g.notice,icon:"exclamation-mark-triangle",kind:"danger",open:!0},u.tsx("div",{slot:"message"},a.details?.httpStatus?p:_)):null,n?null:[u.tsx("calcite-label",null,y,u.tsx("calcite-input",{afterCreate:e=>this._usernameInputNode=e,autocomplete:"off",bind:this,name:"username",required:!0,spellcheck:!1,type:"text",value:""})),u.tsx("calcite-label",null,b,u.tsx("calcite-input",{afterCreate:e=>this._passwordInputNode=e,bind:this,name:"password",required:!0,type:"password",value:""}))],u.tsx("calcite-button",{appearance:"outline",bind:this,onclick:this._cancel,slot:"footer-end",type:"button"},v),u.tsx("calcite-button",{loading:!!o,slot:"footer-end",type:"submit"},o?I:x))))}_focusUsernameInput(){return d.setFocus(()=>this._usernameInputNode)}_cancel(){this._set("signingIn",!1),this.open=!1,this._usernameInputNode&&(this._usernameInputNode.value=""),this._passwordInputNode&&(this._passwordInputNode.value=""),this.emit("cancel")}_submit(e){e.preventDefault(),this._set("signingIn",!0);const t=this.oAuthPrompt?{}:{username:this._usernameInputNode?.value,password:this._passwordInputNode?.value};this.emit("submit",t)}};return t.__decorate([o.property({readOnly:!0})],y.prototype,"container",void 0),t.__decorate([o.property(),p.messageBundle("esri/t9n/common")],y.prototype,"commonMessages",void 0),t.__decorate([o.property()],y.prototype,"error",void 0),t.__decorate([o.property(),p.messageBundle("esri/identity/t9n/identity")],y.prototype,"messages",void 0),t.__decorate([o.property()],y.prototype,"oAuthPrompt",void 0),t.__decorate([o.property()],y.prototype,"open",void 0),t.__decorate([o.property()],y.prototype,"signingIn",void 0),t.__decorate([o.property()],y.prototype,"server",void 0),t.__decorate([o.property({readOnly:!0})],y.prototype,"title",null),t.__decorate([o.property()],y.prototype,"resource",void 0),y=t.__decorate([a.subclass("esri.identity.IdentityModal")],y),y});