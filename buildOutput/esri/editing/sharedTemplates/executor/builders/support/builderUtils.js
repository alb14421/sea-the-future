// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../core/Error","../../../../../core/unitUtils","../../../../templateUtils","../../support/createFeatureServiceEdit","../../support/createPresetServiceEdit","../../../../../geometry/Polygon","../../../../../geometry/support/jsonUtils"],function(e,t,r,n,o,a,s,i){"use strict";function l(e,t,r,n,o){const a=[];for(const s of e){const e=[s[0],s[1]];t&&(e[2]=n),r&&(e[t?3:2]=o),a.push(e)}return a}e.correctZandMFollowingBuffer=function(e,t){if(!e||!i.isPolygon(e))return null;if(!t.hasZ&&!t.hasM)return e;let r=null,n=null;const o=t.hasZ&&t.hasM?3:2;switch(t.type){case"point":r=t.hasZ?t.z:null,n=t.hasM?t.m:null;break;case"polygon":case"polyline":{const e="polygon"===t.type?t.rings:t.paths;for(const a of e)for(const e of a)t.hasZ&&(null===r||e[2]>r)&&(r=e[2]),t.hasM&&(null===n||e[o]>n)&&(n=e[o])}break;case"multipoint":for(const e of t.points)t.hasZ&&(null===r||e[2]>r)&&(r=e[2]),t.hasM&&(null===n||e[o]>n)&&(n=e[o]);break;default:return e}const a=function(e,t,r,n,o){const a=[];for(const s of e)a.push(l(s,t,r,n,o));return a}(e.rings,t.hasZ,t.hasM,r,n);return new s({rings:a,spatialReference:e.spatialReference,hasZ:t.hasZ,hasM:t.hasM})},e.getHeightUnitCorrectionFactor=function(e){let t=1;return(e.spatialReference.vcsWkid||e.spatialReference.latestVcsWkid)&&(t=r.getMetersPerVerticalUnitForSR(e.spatialReference)/r.getMetersPerUnitForSR(e.spatialReference)),t},e.makeFeatureFromGroupPart=function({edits:e,mode:r,relationships:s,shape:l,templatePart:u},c=""){if(null===u)return;const{template:f}=u;if(!n.isLoadedSharedTemplate(f))throw new t("shared-template:template-not-loaded","A template part's template must be loaded before use");if(n.isSharedPresetTemplate(f)){if(!i.isPoint(l))throw new t("shared-template:invalid-geometry","Preset templates must have a point geometry");a.createPresetServiceEdit({geometry:l,template:f,edits:e,relationships:s,rotation:0,mode:r,tag:c})}else n.isSharedFeatureTemplate(f)&&o.createFeatureServiceEdit({geometry:l,template:f,edits:e,relationships:s,tag:c})},e.readByNumber=function(e){let t=!1;return void 0!==e.byNumber&&(t=!0===e.byNumber),t},e.readCount=function(e){let t=0;return void 0!==e.count&&(t=e.count),t},e.readDistance=function(e,t){let r=0;return t?void 0!==e.proportional&&(r=e.proportional):void 0!==e.distanceValue&&(r=e.distanceValue),t&&(r/=100),r},e.readIsProportional=function(e){return!0===e.isProportional},e.readIsUnique=function(e){return!1!==e.createUnique},e.readOffsetDistance=function(e){let t=0;return void 0!==e.offsetDistance&&(t=e.offsetDistance),void 0!==e.side&&1===e.side&&(t*=-1),t},e.readVertexBeforeOffset=function(e){return!0===e.vertexBeforeOffset},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});