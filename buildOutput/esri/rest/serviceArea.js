// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../request","../core/accessorSupport/get","../geometry/support/normalizeUtils","./networkService","./utils","./route/utils","./support/FeatureSet","./support/ServiceAreaSolveResult"],function(e,r,t,o,i,s,a,n,l){"use strict";function c(e){return e instanceof n}e.solve=async function(e,n,u){const p=[],f=[],y={},m={},S=s.parseUrl(e),{path:g}=S;c(n.facilities)&&i.collectGeometries(n.facilities.features,f,"facilities.features",y),c(n.pointBarriers)&&i.collectGeometries(n.pointBarriers.features,f,"pointBarriers.features",y),c(n.polylineBarriers)&&i.collectGeometries(n.polylineBarriers.features,f,"polylineBarriers.features",y),c(n.polygonBarriers)&&i.collectGeometries(n.polygonBarriers.features,f,"polygonBarriers.features",y);const v=await o.normalizeCentralMeridian(f);for(const e in y){const r=y[e];p.push(e),m[e]=v.slice(r[0],r[1])}if(i.isInputGeometryZAware(m,p)){let e=null;try{e=await i.fetchServiceDescription(g,n.apiKey,u)}catch{}e&&!e.hasZ&&i.dropZValuesOffInputGeometry(m,p)}for(const e in m)m[e].forEach((r,o)=>{t.get(n,e)[o].geometry=r});const B={...u,query:{...S.query,...a.serviceAreaParametersToQueryParameters(n),f:"json"}},{data:d}=await r(`${g}/solveServiceArea`,B);return l.fromJSON(d)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});