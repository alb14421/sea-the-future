// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../request","../core/accessorSupport/ensureType","../geometry/SpatialReference","../portal/Portal","./utils","./support/FetchPlaceParameters","./support/PlacesQueryParameters","./support/PlacesQueryResult","../views/support/projectionUtils"],function(e,t,r,s,a,n,i,o,u,c){"use strict";async function l(e,r,s,a){r={...r,categoryIds:s.categoryIds?.join(),icon:s.icon,offset:s.offset,pageSize:s.pageSize,searchText:s.searchText,token:s.apiKey};const i=n.asValidOptions(r,a),{data:o}=await t(e,i),c=new u({results:o.results}),{pagination:l,links:p}=o;if(l?.nextUrl||p?.next){c.nextQueryParams=s.clone();const e=n.parseUrl(l?.nextUrl||p?.next).query;c.nextQueryParams.offset=Number(e.offset)}if(l?.previousUrl||p?.previous){c.previousQueryParams=s.clone();const e=n.parseUrl(l?.previousUrl||p?.previous).query;c.previousQueryParams.offset=Number(e.offset)}return c}e.fetchPlace=async function(e,s){const a={icon:(e=r.ensureClass(i,e)).icon,requestedFields:e.requestedFields?.join(),token:e.apiKey},o=n.asValidOptions(a,s),{data:u}=await t(`${e.url}/places/${e.placeId}`,o);return u},e.queryPlacesNearPoint=async function(e,t){const n={radius:(e=r.ensureClass(o,e)).radius};let i=e.point;return i&&!i.spatialReference.isWGS84&&(i=await c.projectWithEngineOrService(i,s.WGS84,a.getDefault(),t?.signal)),i&&(n.x=i.x,n.y=i.y),l(`${e.url}/places/near-point`,n,e,t)},e.queryPlacesWithinExtent=async function(e,t){const n={};let i=(e=r.ensureClass(o,e)).extent;return i&&!i.spatialReference.isWGS84&&(i=await c.projectWithEngineOrService(i,s.WGS84,a.getDefault(),t?.signal)),i&&(n.xmin=i.xmin,n.ymin=i.ymin,n.xmax=i.xmax,n.ymax=i.ymax),l(`${e.url}/places/within-extent`,n,e,t)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});