// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/Logger","../../../geometry/SpatialReference","../Entity","../GraphObject","../GraphQueryResultHeader","../ObjectValue","../Path","../Relationship","./wasmToGeometryFactories"],function(e,t,n,r,o,a,s,u,i,c){"use strict";const l=()=>t.getLogger("esri.rest.knowledgeGraph.WasmToQueryResponseObjConstructors"),d={decodedWasmObjToQueryResponseObj:(e,t,n)=>{if(null==e)return null;if("object"!=typeof e)return e;if("getDate"in e)return e;if("geometry_type"in e)switch(e.geometry_type.value){case null:return null;case 1:return c.wasmToPointGeometry(e,n);case 2:return c.wasmToMultipointGeometry(e,n);case 3:return c.wasmToPolylineGeometry(e,n);case 4:return c.wasmToPolygonGeometry(e,n);case 5:case 7:return l().warnOnce("Envelope and Multipatch are not supported on knowledge entities, but one of those geometry types was detected. Result interpreted as null"),null;default:return l().warnOnce("Unknown or blank geometry type returned - Result interpreted as null"),null}else{if(!("object_value_type"in e))return l().warnOnce("A decoded value came back of a type that is not supported. Result interpreted as null"),null;switch(e.object_value_type.value){case 0:return g(e,t,n);case 1:return _(e,t,n);case 2:return w(e,t,n);case 3:return f(e,t,n);case 4:return p(e,t,n);default:return l().warnOnce("Unknown graph object type detected!  Result interpreted as null"),null}}}};function p(e,t,n){const r=[],o=e.count();for(let a=0;a<o;a++){const o=e.get_value_at(a);r.push(y(o,t,n))}return r}function y(e,t,n){return d.decodedWasmObjToQueryResponseObj(e,t,n)}function _(e,t,n){const o=e.type_name,a=m(e,t,n),s=e.get_id();return new r(Object.assign({typeName:o,id:s},a))}function m(e,t,n){const r={},o=e.key_count();for(let a=0;a<o;a++)r[e.get_key_at(a)]=y(e.get_value_at(a),t,n);return{properties:r}}function g(e,t,n){return new s(m(e,t,n))}function f(e,t,n){const r=e.entity_count(),o=e.relationship_count(),a=[];for(let s=0;s<r;s++)a.push(_(e.get_entity_at(s),t,n)),s<o&&a.push(w(e.get_relationship_at(s),t,n));return new u({path:a})}function w(e,t,n){const r=e.type_name,o=m(e,t,n);return new i(Object.assign({typeName:r,id:e.get_id(),originId:e.get_origin_entity_id(),destinationId:e.get_destination_entity_id()},o))}e.decodeWasmObjectTest=d,e.decodedWasmObjToQueryResponseObj=y,e.wasmArrayToArray=p,e.wasmToEntity=_,e.wasmToGraphObject=function(e,t,n){return new o(m(e,t,n))},e.wasmToGraphQueryResponseHeader=function(e){const t=[];for(let n=0;n<e.get_header_keys().size();n++)t.push(e.get_header_keys().get(n));const r=new n(e.get_out_sr());return new a({headerKeys:t,outSpatialReference:r,exceededTransferLimit:e.exceeded_transfer_limit()})},e.wasmToObjectValue=g,e.wasmToPath=f,e.wasmToRelationship=w,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});