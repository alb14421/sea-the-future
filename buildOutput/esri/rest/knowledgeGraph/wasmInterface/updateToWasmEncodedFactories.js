// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/Error","../../../geometry/Geometry","./queryToWasmEncodedFactories","./WasmDataModelWrapperInterfaces"],function(e,t,n,i,r){"use strict";function a(e,t){const n=new t.GraphProperty;return n.deleteLater(),n.name=e.name,n.alias=e.alias??"",n.field_type={value:r.EsriFieldTypes[e.fieldType]},n.geometry_type={value:e.geometryType?r.EsriGeometryTypes[e.geometryType]:r.EsriGeometryTypes.esriGeometryNull},n.has_m=e.hasM??!1,n.has_z=e.hasZ??!1,n.nullable=e.nullable??!1,n.editable=e.editable,n.required=e.required,n.default_visibility=e.defaultVisibility,n.system_maintained=e.systemMaintained??!1,n.role={value:r.EsriGraphPropertyRole[e.role]},n.default_value=l(e.defaultValue,t),n}function o(e,t,n){n.name=e.name,n.alias=e.alias??"",n.role={value:r.NamedObjectTypes[e.role]},n.strict=e.strict;for(const i of e.properties){const e=a(i,t);n.add_property(e)}return n}function s(e,t){return e.hasOwnProperty("alias")&&(t.alias=e.alias),t}function l(e,t){return null==e?null:"object"!=typeof e||e instanceof Date?e:e instanceof n?i.geometryToWasm(e,t):null}e.entityTypeToWasm=function(e,t){const n=new t.EntityType;return n.deleteLater(),o(e,t,n)},e.fieldIndexToWasm=function(e,t){const n=new t.FieldIndex;n.deleteLater(),n.name=e.name,n.unique=e.unique,n.ascending=e.ascending,n.description=e.description??"";for(const t of e.fieldNames)n.add_field(t);return n},e.graphPropertyToWasm=a,e.inputQuantizationParametersToWasmFormat=function(e){return{xy_resolution:e.xyResolution,x_false_origin:e.xFalseOrigin,y_false_origin:e.yFalseOrigin,z_resolution:e.zResolution,z_false_origin:e.zFalseOrigin,m_resolution:e.mResolution,m_false_origin:e.mFalseOrigin}},e.namedObjectToWasm=function(e,n){if(!e.typeName)throw new t("knowledge-graph:no-type-name","You must indicate the entity/relationship named object type to apply edits");if(!("originId"in e)){const t=new n.EntityValue;t.deleteLater(),t.type_name=e.typeName;for(const[i,r]of Object.entries(e.properties))t.set_key_value(i,l(r,n));return e.id&&t.set_id(e.id),t}if("originId"in e&&"destinationId"in e){const t=new n.RelationshipValue;t.deleteLater(),t.type_name=e.typeName;for(const[i,r]of Object.entries(e.properties))t.set_key_value(i,l(r,n));return e.id&&t.set_id(e.id),e.originId&&e.destinationId&&t.set_related_entity_ids(e.originId,e.destinationId),t}throw new t("knowledge-graph:applyEdits-encoding-failure","Could not determine the type of a named graph object passed to the encoder")},e.relationshipTypeToWasm=function(e,t){const n=new t.RelationshipType;n.deleteLater();for(const i of e.endPoints){const e=new t.EndPoint;e.deleteLater(),e.origin_entity_type=i.originEntityType,e.dest_entity_type=i.destinationEntityType,n.add_end_point(e)}return o(e,t,n)},e.updateEntityTypeToWasm=function(e,t){const n=new t.EntityType;return n.deleteLater(),s(e,n)},e.updateGraphPropertyToWasm=function(e,t){const n=new t.GraphProperty;return n.deleteLater(),e.hasOwnProperty("alias")&&(n.alias=e.alias),e.hasOwnProperty("editable")&&(n.editable=e.editable),e.hasOwnProperty("required")&&(n.required=e.required),e.hasOwnProperty("defaultVisibility")&&(n.default_visibility=e.defaultVisibility),e.hasOwnProperty("defaultValue")&&(n.default_value=l(e.defaultValue,t)),n},e.updateRelationshipTypeToWasm=function(e,t){const n=new t.RelationshipType;return n.deleteLater(),s(e,n)},e.updateSearchPropertiesToWasm=function(e,t){const n=new t.SearchIndexProperties;n.deleteLater();for(const t of e.propertyNames)n.add_search_property_name(t);return n},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});