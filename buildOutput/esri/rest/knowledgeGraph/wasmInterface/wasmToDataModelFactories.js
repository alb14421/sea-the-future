// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/Logger","../../../core/object","../../../geometry/SpatialReference","../DataModel","../EntityType","../FieldIndex","../GraphObjectType","../GraphProperty","../RelationshipType","../SearchIndex","../SourceTypeValueBehavior","./WasmDataModelWrapperInterfaces"],function(e,t,i,n,r,a,s,o,p,l,d,u,y){"use strict";let f=!1;function c(e){return e.deleteLater(),new a(_(e))}function g(e){return e.deleteLater(),new s({name:e.name,unique:e.unique,ascending:e.ascending,description:e.description,fieldNames:b(e.fields)})}function _(e){return{name:e.name,alias:e.alias,role:i.getKey(y.NamedObjectTypes,e.role.value),strict:e.strict,properties:w(e.properties),fieldIndexes:I(e.field_indexes)}}function m(e){return e.deleteLater(),new p({alias:e.alias,name:e.name,fieldType:i.getKey(y.EsriFieldTypes,e.field_type.value)??void 0,geometryType:i.getKey(y.EsriGeometryTypes,e.geometry_type.value)??null,hasM:e.has_m,hasZ:e.has_z,nullable:e.nullable,editable:e.editable,required:e.required,defaultVisibility:e.default_visibility,systemMaintained:e.system_maintained,role:i.getKey(y.EsriGraphPropertyRole,e.role.value),defaultValue:e.default_value})}function h(e){e.deleteLater();const t=_(e),i=[];for(let t=0;t<e.end_points.size();t++){const n=e.end_points.get(t);i.push({originEntityType:n.origin_entity_type,destinationEntityType:n.dest_entity_type})}return e.end_points.delete(),new l(Object.assign({endPoints:i},t))}function T(e){return new u({behavior:e.behavior,value:e.value})}function v(e){const t=[];for(let i=0;i<e.size();i++)t.push(c(e.get(i)));return e.delete(),t}function b(e){const t=[];for(let i=0;i<e.size();i++)t.push(e.get(i));return e.delete(),t}function w(e){const t=[];for(let i=0;i<e.size();i++){const n=m(e.get(i));"esriFieldTypeBigInteger"===n.fieldType&&(f=!0),t.push(n)}return e.delete(),t}function I(e){const t=[];for(let i=0;i<e.size();i++)t.push(g(e.get(i)));return e.delete(),t}function z(e){const t=[];for(let i=0;i<e.size();i++)t.push(h(e.get(i)));return e.delete(),t}function E(e){const t=[];for(let i=0;i<e.size();i++){const n=e.get(i);n.deleteLater(),t.push(T(n))}return e.delete(),t}function M(e){const t=[];for(let n=0;n<e.size();n++){const r=new d,a=e.get(n);r.name=a.name,r.supportedCategory=i.getKey(y.EsriNamedTypeCategory,a.supported_category.value);const s=a.analyzers.size();for(let e=0;e<s;e++)r.analyzers.push({name:a.analyzers.get(e).name});a.analyzers.delete();for(let e=0;e<a.search_properties.keys().size();e++){const t=a.search_properties.keys().get(e),i=a.search_properties.get(t),n=[];for(let e=0;e<i.property_names.size();e++)n.push(i.property_names.get(e));r.searchProperties.set(t,{propertyNames:n})}t.push(r)}return e.delete(),t}e.wasmToDataModel=function(e){e.deleteLater(),f=!1;const a=new r({timestamp:e.timestamp,spatialReference:new n(e.spatial_reference),strict:e.strict,objectIdField:e.objectid_property,globalIdField:e.globalid_property,arcgisManaged:e.arcgis_managed,identifierInfo:{identifierMappingInfo:{identifierInfoType:i.getKey(y.EsriIdentifierInfoType,e.identifier_info?.identifier_mapping_info?.identifier_info_type?.value),databaseNativeIdentifier:e.identifier_info?.identifier_mapping_info?.database_native_identifier,uniformPropertyIdentifier:{identifierPropertyName:e.identifier_info?.identifier_mapping_info?.uniform_property_identifier?.identifier_property_name}},identifierGenerationInfo:{uuidMethodHint:i.getKey(y.EsriUuidMethodHintTypes,e.identifier_info?.identifier_generation_info?.uuid_method_hint?.value)}},searchIndexes:M(e.search_indexes),entityTypes:v(e.entity_types),relationshipTypes:z(e.relationship_types),metaEntityTypes:v(e.meta_entity_types),provenanceSourceTypeValues:E(e.provenance_source_type_values.value_behavior_array)});return f&&t.getLogger("esri.rest.knowledgeGraph.knowledgeGraphService").warnOnce("A big integer field was detected in the retrieved data model.  The `big-integer` field type is not fully supported in web clients.  Please see https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-support-Field.html#type"),a},e.wasmToEntityType=c,e.wasmToFieldIndex=g,e.wasmToGraphObjectType=function(e){return e.deleteLater(),new o(_(e))},e.wasmToGraphProperty=m,e.wasmToRelationshipType=h,e.wasmToSourceTypeValueBehavior=T,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});