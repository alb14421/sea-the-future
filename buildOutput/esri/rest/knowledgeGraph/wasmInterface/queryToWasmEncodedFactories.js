// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/Error","../../../geometry/Geometry","../../../geometry/Multipoint","../../../geometry/Point","../../../geometry/Polygon","../../../geometry/Polyline","./WasmQueryWrapperInterfaces"],function(e,t,n,o,r,a,i,s){"use strict";function l(e,t){const n=new t.ObjectValue;n.deleteLater();for(const[o,r]of Object.entries(e))n.set_key_value(o,y(r,t));return n}function u(e,n){if(e instanceof o)return function(e,t){const n=new t.GeometryValue;n.deleteLater(),n.geometry_type=n.geometry_type=t.esriGeometryType.esriGeometryMultipoint,n.has_z=e.hasZ,n.has_m=e.hasM;const o=[],r=[];r[0]=e.points.length;let a=0;return e.points.forEach(e=>{e.forEach(e=>{o[a]=e,a++})}),n.coords=new Float64Array(o),n.lengths=new Uint32Array(r),n}(e,n);if(e instanceof r)return function(e,t){const n=new t.GeometryValue;n.deleteLater(),n.geometry_type=t.esriGeometryType.esriGeometryPoint,n.has_z=e.hasZ,n.has_m=e.hasM;const o=[],r=[];r[0]=1,o[0]=e.x,o[1]=e.y;let a=2;return e.hasZ&&(o[a]=e.z,a++),e.hasM&&(o[a]=e.m,a++),n.coords=new Float64Array(o),n.lengths=new Uint32Array(r),n}(e,n);if(e instanceof i||e instanceof a)return function(e,t){const n=new t.GeometryValue;n.deleteLater(),n.has_z=e.hasZ,n.has_m=e.hasM;const o=[],r=[];let s=[];e instanceof i?(n.geometry_type=t.esriGeometryType.esriGeometryPolyline,s=e.paths):e instanceof a&&(n.geometry_type=t.esriGeometryType.esriGeometryPolygon,s=e.rings);let l=0,u=0;return s.forEach(e=>{let t=0;e.forEach(e=>{t++,e.forEach(e=>{o[u]=e,u++})}),r[l]=t,l++}),n.coords=new Float64Array(o),n.lengths=new Uint32Array(r),n}(e,n);throw new t("knowledge-graph:unsupported-geometry","Only Point, Multipoint, Polyline, and Polygon geometry are supported by ArcGIS Knowledge",{geometry:e})}function y(e,t){if(null==e)return"";if("object"!=typeof e)return e;if(e instanceof Date)return e;if(e instanceof n)return u(e,t);if(Array.isArray(e)){const n=new t.ArrayValue;return n.deleteLater(),e.forEach(e=>{n.add_value(y(e,t))}),n}return l(e,t)}e.bindParamArrayToWasm=function(e,t){const n=new t.ArrayValue;return n.deleteLater(),e.forEach(e=>{n.add_value(y(e,t))}),n},e.bindParamObjectToWasm=l,e.geometryToWasm=u,e.setInputQuantizationParametersOnEncoder=function(e,t){t.input_quantization_parameters={xy_resolution:e.xyResolution,x_false_origin:e.xFalseOrigin,y_false_origin:e.yFalseOrigin,z_resolution:e.zResolution,z_false_origin:e.zFalseOrigin,m_resolution:e.mResolution,m_false_origin:e.mFalseOrigin}},e.setOutputQuantizationParametersOnEncoder=function(e,n,o){if(!e.extent)throw new t("knowledge-graph:illegal-output-quantization","The Output quantization provided to the encoder had an illegal value as part of its extent",e.extent);if(!e.quantizeMode)throw new t("knowledge-graph:illegal-output-quantization","The Output quantization contained an illegal mode setting",e.quantizeMode);if(!e.tolerance)throw new t("knowledge-graph:illegal-output-quantization","The Output quantization contained an illegal tolerance setting",e.quantizeMode);n.output_quantization_parameters={extent:{xmax:e.extent.xmax,ymax:e.extent.ymax,xmin:e.extent.xmin,ymin:e.extent.ymin},quantize_mode:o.esriQuantizeMode[e.quantizeMode],tolerance:e.tolerance}},e.setProvenanceBehaviorOnEncoder=function(e,t){t.provenance_behavior={value:s.WasmProvenanceBehaviorValues[e]}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});