// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../request","../../core/Error","../../core/urlUtils","../../editing/sharedTemplates/SharedTemplateMetadata"],function(e,r,t,a,s){"use strict";function l(e){return Array.isArray(e)?e.join(","):""}function n(e){return null==e||!e.length}e.querySharedTemplates=async function({featureService:e,query:u,requestOptions:o={}}){if(n(u.layers)&&n(u.templateIds)&&(u.layers=e.layerInfos.map(e=>e.id),!u.layers.length))throw new t("query-shared-templates:invalid-parameters","Must supply a value for either the 'layers' or the 'templateIds' parameters");const i=a.join(e.url,"sharedTemplates","query"),p={f:"json",...o.query,...u};p.layers&&(p.layers=l(p.layers)),p.templateIds&&(p.templateIds=l(p.templateIds)),p.tags&&(p.tags=l(p.tags));const y={...o,responseType:"json",query:p};return(await r(i,y)).data.templates.map(r=>{const t=s.fromJSON(r);return t.featureService=e,t})},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});