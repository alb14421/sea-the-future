// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../geometry/support/spatialReferenceUtils","../../layers/support/layerUtils"],function(e,i,s){"use strict";e.findToFindRESTParameters=function(e){const{contains:t,dynamicLayers:n,geometryPrecision:r,layerDefinitions:o,layerIds:l,maxAllowableOffset:a,outSR:c,returnGeometry:f,searchFields:d,searchText:y}=e.toJSON(),u={contains:t,returnGeometry:f,geometryPrecision:r,maxAllowableOffset:a,searchText:y};if(l&&(u.layers=l.join(",")),d&&(u.searchFields=d.join(",")),c&&(u.sr=i.srToRESTValue(c)),o){const e=[];for(let i=0;i<o.length;i++){const s=o[i];e[s.id]=s.definitionExpression}u.layerDefs=s.serializeLayerDefinitions(e)}if(n?.length){const e=[];for(let i=0;i<n.length;i++){const s=n[i],t=s.id;if(!s.subLayerIds&&l?.includes(t)){const i={id:t};i.source=s.source;let n=null;if(o?.length){const e=o.find(e=>e.id===t);n=e?.definitionExpression}n&&(i.definitionExpression=n),e.push(i)}}let i=JSON.stringify(e);"[]"===i&&(i="[{}]"),u.dynamicLayers=i}return u},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});