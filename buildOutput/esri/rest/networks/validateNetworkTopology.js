// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../request","../../core/Error","../utils","./support/ValidateNetworkTopologyResult"],function(e,t,i,a,s){"use strict";function o(e){return e.serviceEdits&&(e.serviceEdits=e.serviceEdits.map(e=>(e.editedFeatures.spatialReference&&(e.editedFeatures.spatialReference={wkid:e.editedFeatures.spatialReference.wkid,wkt:e.editedFeatures.spatialReference.wkt,wkt2:e.editedFeatures.spatialReference.wkt2,latestWkid:e.editedFeatures.spatialReference.latestWkid,latestVcsWkid:e.editedFeatures.spatialReference.latestVcsWkid,vcsWkid:e.editedFeatures.spatialReference.vcsWkid}),{layerId:e.id,editedFeatures:e.editedFeatures}))),e}e.handleValidateNetworkTopologyResult=o,e.submitValidateNetworkTopologyJob=async function(e,s,o){if(!s.gdbVersion)throw new i("submit-validate-network-topology-job:missing-gdb-version","version is missing");const r=a.parseUrl(e),d=s.toJSON();s.validationSet&&(d.validationSet=JSON.stringify(s.validationSet));const n=a.asValidOptions(r.query,{query:a.encode({...d,returnEdits:!0,async:!0,f:"json"}),...o,method:"post"}),l=`${r.path}/validateNetworkTopology`,{data:u}=await t(l,n);return u?u.statusUrl:null},e.validateNetworkTopology=async function(e,i,r){const d=a.parseUrl(e),n=i.toJSON();i.validationSet&&(n.validationSet=JSON.stringify(i.validationSet));const l={...n,returnEdits:!0,f:"json"},u=a.encode({...d.query,...l}),c=a.asValidOptions(u,{...r,method:"post"}),p=`${d.path}/validateNetworkTopology`,{data:f}=await t(p,c);return s.fromJSON(o(f))},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});