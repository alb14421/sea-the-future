// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../request","../utils","./support/TraceResult"],function(t,e,s,r){"use strict";t.submitTraceJob=async function(t,r,n){const o=s.parseUrl(t),a=r.toJSON();a.traceLocations=JSON.stringify(r.traceLocations),r.resultTypes&&(a.resultTypes=JSON.stringify(r.resultTypes));const c=s.asValidOptions(o.query,{query:s.encode({...a,async:!0,f:"json"}),...n}),i=`${o.path}/trace`,{data:u}=await e(i,c);return u.statusUrl},t.trace=async function(t,n,o){const a=s.parseUrl(t),c=n.toJSON();c.traceLocations=JSON.stringify(n.traceLocations),n.resultTypes&&(c.resultTypes=JSON.stringify(n.resultTypes)),n.moment||"SDE.DEFAULT"!==n.gdbVersion?.toUpperCase()&&n.gdbVersion||(c.moment=Date.now());const i=s.asValidOptions(a.query,{query:s.encode({...c,f:"json"}),...o}),u=`${a.path}/trace`;return e(u,i).then(t=>function(t){const{data:e}=t;return r.fromJSON(e.traceResults)}(t))},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});