// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../../chunks/tslib.es6","../../core/arrayUtils","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../geometry/Extent","../../geometry/Polyline","../../geometry/SpatialReference","./DirectionsFeature","./FeatureSet"],function(e,t,r,o,s,a,n,p,l,u,c,i){"use strict";let y=class extends i{constructor(e){super(e),this.extent=null,this.features=[],this.geometryType="polyline",this.routeId=null,this.routeName=null,this.totalDriveTime=null,this.totalLength=null,this.totalTime=null}readFeatures(e,t){if(!e)return[];const r=t.summary.envelope.spatialReference??t.spatialReference,o=r&&u.fromJSON(r);return e.map(e=>{const t=c.fromJSON(e);if(null!=t.geometry&&(t.geometry.spatialReference=o),null!=t.events)for(const e of t.events)null!=e.geometry&&(e.geometry.spatialReference=o);return t})}get mergedGeometry(){return this.features?function(e,t){if(0===e.length)return new l({spatialReference:t});const r=[];for(const t of e)for(const e of t.paths)r.push(...e);const o=[];r.forEach((e,t)=>{0!==t&&e[0]===r[t-1][0]&&e[1]===r[t-1][1]||o.push(e)});const{hasM:s,hasZ:a}=e[0];return new l({hasM:s,hasZ:a,paths:[o],spatialReference:t})}(this.features.map(({geometry:e})=>e),this.extent.spatialReference):null}get strings(){return this.features.flatMap(({strings:e})=>e).filter(t.isSome)}};return e.__decorate([r.property({type:p,json:{read:{source:"summary.envelope"}}})],y.prototype,"extent",void 0),e.__decorate([r.property({nonNullable:!0})],y.prototype,"features",void 0),e.__decorate([a.reader("features")],y.prototype,"readFeatures",null),e.__decorate([r.property()],y.prototype,"geometryType",void 0),e.__decorate([r.property({readOnly:!0})],y.prototype,"mergedGeometry",null),e.__decorate([r.property()],y.prototype,"routeId",void 0),e.__decorate([r.property()],y.prototype,"routeName",void 0),e.__decorate([r.property({value:null,readOnly:!0})],y.prototype,"strings",null),e.__decorate([r.property({json:{read:{source:"summary.totalDriveTime"}}})],y.prototype,"totalDriveTime",void 0),e.__decorate([r.property({json:{read:{source:"summary.totalLength"}}})],y.prototype,"totalLength",void 0),e.__decorate([r.property({json:{read:{source:"summary.totalTime"}}})],y.prototype,"totalTime",void 0),y=e.__decorate([n.subclass("esri.rest.support.DirectionsFeatureSet")],y),y});