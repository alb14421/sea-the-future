// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(function(){"use strict";return class{applyColorSubstitution(t,a){if(!a)return t;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:e,height:n}=t,r=this._rasterizationCanvas,i=r.getContext("2d",{willReadFrequently:!0});t!==r&&(r.width=e,r.height=n,i.drawImage(t,0,0,e,n));const o=i.getImageData(0,0,e,n).data;if(a)for(const t of a)if(t&&t.oldColor&&4===t.oldColor.length&&t.newColor&&4===t.newColor.length){const[a,e,n,r]=t.oldColor,[i,s,l,h]=t.newColor;if(a===i&&e===s&&n===l&&r===h)continue;for(let t=0;t<o.length;t+=4)a===o[t]&&e===o[t+1]&&n===o[t+2]&&r===o[t+3]&&(o[t]=i,o[t+1]=s,o[t+2]=l,o[t+3]=h)}const s=new ImageData(o,e,n);return i.putImageData(s,0,0),r}tintImageData(t,a){if(!a||a.length<4)return t;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:e,height:n}=t,r=this._rasterizationCanvas,i=r.getContext("2d",{willReadFrequently:!0});t!==r&&(r.width=e,r.height=n,i.drawImage(t,0,0,e,n));const o=i.getImageData(0,0,e,n),s=new Uint8Array(o.data),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255];for(let t=0;t<s.length;t+=4)s[t]*=l[0],s[t+1]*=l[1],s[t+2]*=l[2],s[t+3]*=l[3];const h=new ImageData(new Uint8ClampedArray(s.buffer),e,n);return i.putImageData(h,0,0),r}}});