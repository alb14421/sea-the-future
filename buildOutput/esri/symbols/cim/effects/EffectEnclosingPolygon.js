// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../geometry/GeometryCursor","../../../geometry/SpatialReference","../../../geometry/support/boundsUtils","../CIMEffects"],function(e,t,r,n,o){"use strict";class s{static{this.instance=null}static local(){return null===s.instance&&(s.instance=new s),s.instance}execute(e,t){return new u(e,t)}}class u{constructor(e,t){this._inputGeometries=e,this._medhod=t.method}next(){let e=this._inputGeometries.next();const t=this._medhod;for(;null!=e;){if(e.totalSize>0)switch(t){case"RectangularBox":return i(e);case"ConvexHull":return this._constructConvexHull(e);default:return l(e)}e=this._inputGeometries.next()}return null}_constructConvexHull(e){switch(e.geometryType){case"esriGeometryPolyline":case"esriGeometryPolygon":{const n=o.lazyConvexHullOperator.module,s={...e.asJSON(),spatialReference:{wkid:r.WebMercator.wkid}},u=n.execute(s);return u?t.GeometryCursor.fromJSONCIM(u):null}case"esriGeometryEnvelope":return e;default:return null}}}function i(e){const r=n.getCursorBoundsXY(e),o={xmin:r[0],ymin:r[1],xmax:r[2],ymax:r[3]};return t.GeometryCursor.fromJSONCIM(o)}function l(e){switch(e.geometryType){case"esriGeometryPolyline":{const r=[];for(;e.nextPath();)c(e,r);return t.GeometryCursor.fromJSONCIM({rings:r})}case"esriGeometryPolygon":case"esriGeometryEnvelope":return e;default:return null}}function c(e,t){if(e.seekPathStart(),!e.nextPoint())return;const r=e.x,n=e.y,o=[[r,n]];for(t.push(o);e.nextPoint();)o.push([e.x,e.y]);o.push([r,n])}e.EffectEnclosingPolygon=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});