// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../geometry/GeometryCursor","../../../geometry/support/PolylineBuilder","../CIMCursor"],function(e,t,r,n){"use strict";class s{static{this.instance=null}static local(){return null===s.instance&&(s.instance=new s),s.instance}execute(e,t,r){return new o(e,t,r)}}class o extends n.PathEffectCursor{constructor(e,t,r){super(e,!1,!0),this._suppress=void 0!==t.suppress&&t.suppress,this._invert=void 0!==t.invert&&t.invert}processPath(e){if(e.totalSize<=0)return null;if(!this._suppress){const r=t.GeometryCursor.createEmptyOptimizedCIM("esriGeometryPolygon",!1,!1,e.yFactor);for(e.seekPathEnd();e.nextPoint();)r.pushXY(e.x,e.y);return r}const n=[],s=new Array(e.pathSize);let o=0;for(e.seekPathStart();e.nextPoint();)s[o++]=e.getControlPoint(),n.push([e.x,e.y]);let i=!0,l=!0,u=!1,h=!this._invert;o=0;const c=new r;let p=n[0];for(;o<n.length;){const e=n[o+1],t=s[o],r=s[o+1];o++,l&&(h=t||r?this._invert:!this._invert,l=!1),h?(c.addSegment(p,e,i),i=!1):u=!0,p=e,r&&(h?(h=!1,i=!0):h=!0)}const a=c.getGeometry();if(0===a.length)return null;if(!u&&n[0][0]===n[n.length-1][0]&&n[0][1]===n[n.length-1][1]){const e=a[a.length-1];return e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]||e.push([e[0][0],e[0][1]]),t.GeometryCursor.fromJSONCIM({paths:a})}const g=a[a.length-1];return c.getPointCount()>1&&"esriGeometryPolygon"===e.geometryType&&g[0][0]===g[g.length-1][0]&&g[0][1]===g[g.length-1][1]&&a.length>1&&(a[a.length-1].push(...a[0]),a.splice(0,1)),t.GeometryCursor.fromJSONCIM({paths:a})}}e.EffectSuppress=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});