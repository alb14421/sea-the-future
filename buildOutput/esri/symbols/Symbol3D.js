// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../chunks/tslib.es6","../core/Collection","../core/collectionUtils","../core/Logger","../core/urlUtils","../core/Warning","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/cast","../core/has","../core/RandomLCG","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","../portal/Portal","../chunks/persistableUrlUtils","./ExtrudeSymbol3DLayer","./FillSymbol3DLayer","./IconSymbol3DLayer","./LineSymbol3DLayer","./ObjectSymbol3DLayer","./PathSymbol3DLayer","./Symbol","./Symbol3DLayer","./TextSymbol3DLayer","./WaterSymbol3DLayer","./support/StyleOrigin","./support/Thumbnail"],function(e,t,r,o,s,l,a,y,n,i,p,c,m,d,u,b,g,S,_,h,f,L,O,U,w,D,N,x){"use strict";const v={icon:_,object:f,line:h,path:L,fill:S,extrude:g,text:w,water:D},j=r.ofType({base:U,key:"type",typeMap:v,errorContext:"symbol-layer"});return e.default=class extends O{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,o=t?.type,s=o||r;this._set("symbolLayers",new s)}get color(){return null}set color(e){this.constructed&&s.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){o.referenceSetter(e,this._get("symbolLayers"))}readStyleOrigin(e,t,r){if(e.styleUrl&&e.name){const t=b.fromJSON(e.styleUrl,r);return new N({styleUrl:t,name:e.name})}if(e.styleName&&e.name)return new N({portal:r?.portal||u.getDefault(),styleName:e.styleName,name:e.name});r?.messages&&r.messages.push(new a("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,t,r,o){if(e.styleUrl&&e.name){let r=b.toJSON(e.styleUrl,o);l.isAbsolute(r)&&(r=l.normalize(r)),t.styleOrigin={styleUrl:r,name:e.name}}else e.styleName&&e.name&&(e.portal&&o?.portal&&!l.hasSamePortal(e.portal.restUrl,o.portal.restUrl)?o?.messages&&o.messages.push(new a("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof U||e&&v[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}},t.__decorate([y.property({json:{read:!1,write:!1}})],e.default.prototype,"color",null),t.__decorate([y.property({type:j,nonNullable:!0,json:{write:!0}}),n.cast(o.castForReferenceSetter)],e.default.prototype,"symbolLayers",null),t.__decorate([y.property({type:N})],e.default.prototype,"styleOrigin",void 0),t.__decorate([c.reader("styleOrigin")],e.default.prototype,"readStyleOrigin",null),t.__decorate([d.writer("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],e.default.prototype,"writeStyleOrigin",null),t.__decorate([y.property({type:x.Thumbnail,json:{read:!1}})],e.default.prototype,"thumbnail",void 0),t.__decorate([y.property({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],e.default.prototype,"type",void 0),e.default=t.__decorate([m.subclass("esri.symbols.Symbol3D")],e.default),e.default});