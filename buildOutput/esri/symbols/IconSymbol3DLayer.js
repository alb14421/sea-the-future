// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../chunks/tslib.es6","../core/lang","../core/Logger","../core/urlUtils","../core/accessorSupport/decorators/property","../core/has","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","./Symbol3DLayer","./support/colors","./support/IconSymbol3DLayerResource","./support/materialUtils","./support/Symbol3DAnchorPosition2D","./support/Symbol3DIconOutline","./support/Symbol3DMaterial"],function(e,t,o,r,i,n,l,a,s,c,u,p,h,d,y,m){"use strict";var f;function b(e){const t="width"in e?e.width:e.size,o="height"in e?e.height:e.size,r=g(e.xoffset),i=g(e.yoffset);return(r||i)&&t&&o?{x:-r/t,y:i/o}:null}function g(e){return isFinite(e)?e:0}e.default=class extends c{static{f=this}constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new f({anchor:this.anchor,anchorPosition:o.clone(this.anchorPosition),enabled:this.enabled,material:o.clone(this.material),outline:o.clone(this.outline),resource:o.clone(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||u.white,o=b(e),i=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||u.white).clone()}:null;return new f({size:e.size,angle:e.angle,resource:{primitive:(n=()=>r.getLogger(this.prototype),l=e.style,w[l]||(n().warn(`${l} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle"))},material:{color:t},outline:i,anchor:o?"relative":void 0,anchorPosition:o});var n,l}static fromPictureMarkerSymbol(e){const t=!e.color||u.isBlack(e.color)?u.white:e.color,o=b(e);return new f({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:t.clone()},anchor:o?"relative":void 0,anchorPosition:o})}static fromCIMSymbol(e){return new f({resource:{href:i.makeData({mediaType:"application/json",data:JSON.stringify(e.data)})}})}},t.__decorate([n.property({type:m.Symbol3DMaterial,json:{write:!0}})],e.default.prototype,"material",void 0),t.__decorate([n.property({type:p.IconSymbol3DLayerResource,json:{write:!0}})],e.default.prototype,"resource",void 0),t.__decorate([a.enumeration({Icon:"icon"},{readOnly:!0})],e.default.prototype,"type",void 0),t.__decorate([n.property({...h.screenSizeProperty,json:{write:{isRequired:!0}}})],e.default.prototype,"size",void 0),t.__decorate([a.enumeration({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],e.default.prototype,"anchor",void 0),t.__decorate([n.property({type:d.Symbol3DAnchorPosition2D,json:{type:[Number],read:{reader:e=>new d.Symbol3DAnchorPosition2D({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],e.default.prototype,"anchorPosition",void 0),t.__decorate([n.property({type:y.Symbol3DIconOutline,json:{write:!0}})],e.default.prototype,"outline",void 0),t.__decorate([n.property({type:Number,json:{write:!0,default:0}})],e.default.prototype,"angle",void 0),e.default=f=t.__decorate([s.subclass("esri.symbols.IconSymbol3DLayer")],e.default);const w={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};return e.default});