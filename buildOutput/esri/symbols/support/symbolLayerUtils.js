// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["require","exports","../../request","../../core/Error","../../core/LRUCache","../../core/libs/gl-matrix-2/factories/vec3f64","../../geometry/support/aaBoundingBox","./symbolLayerUtils3D"],function(e,r,o,i,t,n,s,c){"use strict";let a=u();function u(){return new t.LRUCache(50)}r.clearBoundingBoxCache=function(){a=u()},r.computeIconLayerResourceSize=async function(e,r){if(e.resource?.href)return(t=e.resource.href,o(t,{responseType:"image"}).then(e=>e.data)).then(e=>[e.width,e.height]);var t;if(e.resource?.primitive)return null!=r?[r,r]:[256,256];throw new i("symbol3d:invalid-symbol-layer","symbol layers of type Icon must have either an href or a primitive resource")},r.computeObjectLayerResourceSize=async function(r,o=null){if(!r.isPrimitive){const o=r.resource?.href;if(!o)throw new i("symbol:invalid-resource","The symbol does not have a valid resource");const t=a.get(o);if(null!=t)return t;const{fetch:c}=await new Promise((r,o)=>e(["../../views/3d/layers/graphics/objectResourceUtils"],r,o)),u=await c(o,{disableTextures:!0,spherical:!0}),l=s.size(u.referenceBoundingBox,n.create());return a.put(o,l),l}if(!r.resource?.primitive)throw new i("symbol:invalid-resource","The symbol does not have a valid resource");const t=s.create(c.objectSymbolLayerPrimitiveBoundingBox(r.resource.primitive));if(null!=o)for(let e=0;e<t.length;e++)t[e]*=o;return s.size(t,n.create())},Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});