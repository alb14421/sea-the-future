// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../core/Error","../../core/object","../../layers/support/layerUtils","../WebStyleSymbol","./symbolConversion","./typeUtils"],function(e,o,n,t,l,r,s){"use strict";function i(e){return s.isSymbol3D(e)||e instanceof l}function y(e,n,l){if(null==e)return null;const{context:s,isLabelSymbol:y}=l,a=s?.origin,u=s?.messages;if("web-scene"===a&&!i(e)){const t=r.to3D(e,{retainCIM:!0,hasLabelingContext:y});return null!=t.symbol?t.symbol.write(n,s):(u?.push(new o("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:s,error:t.error})),null)}return t.isSceneServiceLayer(s?.layer)&&function(e){return"polygon-3d"===e?.type||"line-3d"===e?.type}(e)?(u?.push(new o("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported on layers of type '${s?.layer?.declaredClass}'.`,{symbol:e,context:s})),null):("web-map"===a||"portal-item"===a&&!t.isSceneServiceLayer(s?.layer))&&i(e)?(u?.push(new o("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:s})),null):e.write(n,s)}e.fromJSON=function(e,o){return s.readSymbol(e,null,o)},e.write=function(e,o,t,l){const r=y(e,{},{context:l,isLabelSymbol:!1});null!=r&&n.setDeepValue(t,r,o)},e.writeLabelSymbol=function(e,o,n,t){const l=y(e,{},{context:t,isLabelSymbol:!0});null!=l&&(o[n]=l)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});