// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../chunks/tslib.es6","./Error","./maybe","./Promise","./promiseUtils","./Warning","./accessorSupport/decorators/property","./accessorSupport/decorators/subclass"],function(o,t,r,e,s,l,a,n,d){"use strict";const i="loaded",c=o=>{const s=o;let c=class extends s{constructor(...o){super(...o),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(o=>{const t=this.load.bind(this);this.load=e=>{const s=new Promise((o,t)=>{const s=l.onAbortOrThrow(e,t);this.destroyed&&t(new r("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(o,t).finally(()=>{s&&s.remove()})});if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const o=this._loadController=new AbortController;t({signal:o.signal})}return o(),s}})),this.when(()=>{this._set("loadStatus",i),this._loadController=null},o=>{this.destroyed||(this._set("loadStatus","failed"),this._set("loadError",o),this._loadController=null)})}destroy(){this._loadController&&(this._loadController=e.abortMaybe(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===i}get loadWarnings(){return this._get("loadWarnings")}load(o){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new r("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return t.__decorate([n.property({readOnly:!0})],c.prototype,"loaded",null),t.__decorate([n.property({readOnly:!0})],c.prototype,"loadError",void 0),t.__decorate([n.property({clonable:!1})],c.prototype,"loadStatus",void 0),t.__decorate([n.property({type:[a],readOnly:!0})],c.prototype,"loadWarnings",null),c=t.__decorate([d.subclass("esri.core.Loadable")],c),c},h=c(s.EsriPromise);o.Loadable=h,o.LoadableMixin=c,o.isLoadable=function(o){return!(!o||!o.load)},Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});