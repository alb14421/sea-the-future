// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./string","../intl/locale"],function(e,t,n){"use strict";const r={ar:[".",","],bg:[","," "],bs:[",","."],ca:[",","."],cs:[","," "],da:[",","."],de:[",","."],"de-ch":[".","’"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[","," "],fi:[","," "],fr:[","," "],"fr-ch":[","," "],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[","," "],id:[",","."],it:[",","."],"it-ch":[".","’"],ja:[".",","],ko:[".",","],lt:[","," "],lv:[","," "],mk:[",","."],nb:[","," "],nl:[",","."],no:[","," "],pl:[","," "],pt:[",","."],"pt-pt":[","," "],ro:[",","."],ru:[","," "],sk:[","," "],sl:[",","."],sr:[",","."],sv:[","," "],th:[".",","],tr:[",","."],uk:[","," "],vi:[",","."],zh:[".",","]};function l(e=n.getLocale()){let t=(e=e.toLowerCase())in r;if(!t){const n=e.split("-");n.length>1&&n[0]in r&&(e=n[0],t=!0),t||(e="en")}const[l,s,o="#,##0.###"]=r[e];return{decimal:l,group:s,pattern:o}}const s=/[#0,]*[#0](?:\.0*#*)?/;function o(e){const n=l((e=e||{}).locale),r=e.pattern||n.pattern,o=n.group,c=n.decimal;let p=1;if(r.includes("%"))p/=100;else if(r.includes("‰"))p/=1e3;else if(r.includes("¤"))throw new Error("currency notation not supported");const u=r.split(";");1===u.length&&u.push("-"+u[0]);const d=i(u,n=>(n="(?:"+t.escapeRegExpString(n,".")+")").replace(s,t=>{const n={signed:!1,separator:e.strict?o:[o,""],fractional:e.fractional,decimal:c,exponent:!1},r=t.split(".");let l=e.places;1===r.length&&1!==p&&(r[1]="###"),1===r.length||0===l?n.fractional=!1:(void 0===l&&(l=e.pattern?r[1].lastIndexOf("0")+1:1/0),l&&null==e.fractional&&(n.fractional=!0),!e.places&&+l<r[1].length&&(l+=","+r[1].length),n.places=l);const s=r[0].split(",");return s.length>1&&(n.groupSize=s.pop().length,s.length>1&&(n.groupSize2=s.pop().length)),"("+function(e){"places"in(e=e||{})||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!String(e.places).startsWith("0")||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=a(e),n=i(e.fractional,t=>{let n="";return t&&0!==e.places&&(n="\\"+e.decimal,e.places===1/0?n="(?:"+n+"\\d+)?":n+="\\d{"+e.places+"}"),n},!0);let r=t+n;return n&&(r="(?:(?:"+r+")|(?:"+n+"))"),r+i(e.exponent,t=>t?"([eE]"+a({signed:e.eSigned})+")":"")}(n)+")"}),!0);return{regexp:d.replaceAll(/[\xa0 ]/g,"[\\s\\xa0]"),group:o,decimal:c,factor:p}}function a(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",i(e.signed,e=>e?"[-+]":"",!0)+i(e.separator,n=>{if(!n)return"(?:\\d+)";" "===(n=t.escapeRegExpString(n))?n="\\s":" "===n&&(n="\\s\\xa0");const r=e.groupSize,l=e.groupSize2;if(l){const e="(?:0|[1-9]\\d{0,"+(l-1)+"}(?:["+n+"]\\d{"+l+"})*["+n+"]\\d{"+r+"})";return r-l>0?"(?:"+e+"|(?:0|[1-9]\\d{0,"+(r-1)+"}))":e}return"(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+n+"]\\d{"+r+"})*)"},!0)}const i=(e,t,n)=>{if(!Array.isArray(e))return t(e);const r=[];for(let n=0;n<e.length;n++)r.push(t(e[n]));return c(r.join("|"),Boolean(n))},c=(e,t)=>"("+(t?"?:":"")+e+")";e._parseInfo=o,e.format=function(e,t){const n=l((t={...t}).locale);t.customs=n;const r=t.pattern||n.pattern;return isNaN(e)||Math.abs(e)===1/0?null:function(e,t,n){const r=(n=n||{}).customs.group,l=n.customs.decimal,o=t.split(";"),a=o[0];if((t=o[e<0?1:0]||"-"+a).includes("%"))e*=100;else if(t.includes("‰"))e*=1e3;else{if(t.includes("¤"))throw new Error("currency notation not supported");if(t.includes("E"))throw new Error("exponential notation not supported")}const i=s,c=a.match(i);if(!c)throw new Error("unable to find a number expression in pattern: "+t);return!1===n.fractional&&(n.places=0),t.replace(i,function(e,t,n){!0===(n=n||{}).places&&(n.places=0),n.places===1/0&&(n.places=6);const r=t.split("."),l="string"==typeof n.places&&n.places.indexOf(",");let s=n.places;l?s=n.places.slice(l+1):+s>=0||(s=(r[1]||[]).length),n.round<0||(e=Number(e.toFixed(Number(s))));const o=String(Math.abs(e)).split("."),a=o[1]||"";if(r[1]||n.places){l&&(n.places=n.places.slice(0,Math.max(0,l)));const e=void 0!==n.places?n.places:r[1]&&r[1].lastIndexOf("0")+1;+e>a.length&&(o[1]=a.padEnd(Number(e),"0")),+s<a.length&&(o[1]=a.slice(0,Math.max(0,Number(s))))}else o[1]&&o.pop();const i=r[0].replace(",","");let c=i.indexOf("0");-1!==c&&(c=i.length-c,c>o[0].length&&(o[0]=o[0].padStart(c,"0")),i.includes("#")||(o[0]=o[0].slice(-c)));let p,u,d=r[0].lastIndexOf(",");if(-1!==d){p=r[0].length-d-1;const e=r[0].slice(0,d);d=e.lastIndexOf(","),-1!==d&&(u=e.length-d-1)}const g=[];for(let e=o[0];e;){const t=e.length-p;g.push(t>0?e.slice(Math.max(0,t)):e),e=t>0?e.slice(0,t):"",u&&(p=u,u=void 0)}return o[0]=g.reverse().join(n.group||","),o.join(n.decimal||".")}(e,c[0],{decimal:l,group:r,places:n.places,round:n.round}))}(e,r,t)},e.getCustoms=l,e.parse=function(e,t){const n=o(t),r=new RegExp("^"+n.regexp+"$").exec(e);if(!r)return NaN;let l=r[1];if(!r[1]){if(!r[2])return NaN;l=r[2],n.factor*=-1}return l=l.replaceAll(new RegExp("["+n.group+"\\s\\xa0]","g"),"").replace(n.decimal,"."),Number(l)*n.factor},e.regexp=function(e){return o(e).regexp},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});