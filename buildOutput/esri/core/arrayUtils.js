// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./compilerUtils","./RandomLCG"],function(n,t,e){"use strict";function r(n){return n}function o(n,t=r){if(!n||0===n.length)return;let e=n[0],o=t(e);for(let r=1;r<n.length;++r){const l=n[r],u=Number(t(l));u>o&&(o=u,e=l)}return e}function l(n,t,e,r,o,l,u){if(null==n&&null==r)return!0;t=Math.max(0,t),o=Math.max(0,o),e=Math.max(0,e<0?(n?.length??0)+e:e),l=Math.max(0,l<0?(r?.length??0)+l:l);const i=e-t;if(null==n||null==r||i!==l-o)return!1;if(u){for(let e=0;e<i;e++)if(!u(n[t+e],r[o+e]))return!1}else for(let e=0;e<i;e++)if(n[t+e]!==r[o+e])return!1;return!0}class u{constructor(){this.last=0}}const i=new u;function f(n,t,e,r){r=r||i;const o=Math.max(0,r.last-10);for(let l=o;l<e;++l)if(n[l]===t)return r.last=l,l;const l=Math.min(o,e);for(let e=0;e<l;++e)if(n[e]===t)return r.last=e,e;return-1}const c=new Set;function s(n){return n?(a.seed=n,()=>a.getFloat()):Math.random}const a=new e;n.PositionHint=u,n.addMany=function(n,t){if(!t)return n;for(const e of t)n.push(e);return n},n.binaryIndexOf=function(n,t,e){const r=n.length;let o=0,l=r-1;for(;o<l;){const e=o+Math.floor((l-o)/2);t>n[e]?o=e+1:l=e}const u=n[o];return e?t>=n[r-1]?-1:u===t?o:o-1:u===t?o:-1},n.countIf=function(n,t){return n.reduce((n,e)=>t(e)?n+1:n,0)},n.difference=function(n,t,e){let r,o;return e?(r=t.filter(t=>!n.some(n=>e(n,t))),o=n.filter(n=>!t.some(t=>e(t,n)))):(r=t.filter(t=>!n.includes(t)),o=n.filter(n=>!t.includes(n))),{added:r,removed:o}},n.emptyArray=[],n.equals=function(n,t,e){return l(n,0,n?.length??0,t,0,t?.length??0,e)},n.filterInPlace=function(n,t){let e=0;for(let r=0;r<n.length;++r){const o=n[r];t(o,r)&&(n[e]=o,e++)}n.length=e},n.getRandomNumberGenerator=s,n.indexOf=f,n.intersect=function(n,t,e){return n&&t?e?n.filter(n=>t.findIndex(t=>e(n,t))>-1):n.filter(n=>t.includes(n)):[]},n.isArrayLike=function(n){return n&&"number"==typeof n.length},n.isSome=function(n,t){return null!=n},n.max=o,n.min=function(n,t=r){return o(n,n=>-t(n))},n.pickRandom=function(n,t,e){const r=n.length;if(t>=r)return n.slice();const o=s(e),l=new Set,u=[];for(;u.length<t;){const t=Math.floor(o()*r);l.has(t)||(l.add(t),u.push(n[t]))}return u},n.pushIfSome=function(n,...t){for(const e of t)null!=e&&n.push(e);return n.length},n.range=function(n,t){void 0===t&&(t=n,n=0);const e=new Array(t-n);for(let r=n;r<t;r++)e[r-n]=r;return e},n.reallocGrowthFactor=1.5,n.reallocShrinkFactor=1/1.5,n.reallocShrinkThreshold=.5,n.remove=function(n,t){const e=n.indexOf(t);return-1!==e?(n.splice(e,1),t):null},n.removeUnordered=function(n,e,r,o){const l=r??n.length,u=f(n,t.toConst(e),l,o);if(-1!==u)return n[u]=n[l-1],null==r&&n.pop(),e},n.removeUnorderedMany=function(n,t,e=n.length,r=t.length,o,l){if(0===r||0===e)return e;c.clear();for(let n=0;n<r;++n)c.add(t[n]);o=o||i;const u=Math.max(0,o.last-10);for(let t=u;t<e;++t)if(c.has(n[t])&&(l?.push(n[t]),c.delete(n[t]),n[t]=n[e-1],--e,--t,0===c.size||0===e))return c.clear(),e;for(let t=0;t<u;++t)if(c.has(n[t])&&(l?.push(n[t]),c.delete(n[t]),n[t]=n[e-1],--e,--t,0===c.size||0===e))return c.clear(),e;return c.clear(),e},n.shuffle=function(n,t){if(!n)return n;const e=s(t);for(let t=n.length-1;t>0;t--){const r=Math.floor(e()*(t+1)),o=n[t];n[t]=n[r],n[r]=o}return n},n.sliceEquals=l,n.splitIntoChunks=function(n,t){const e=n.length;if(0===e)return[];const r=[];for(let o=0;o<e;o+=t)r.push(n.slice(o,o+t));return r},n.unique=function(n,t){return t?n.filter((n,e,r)=>r.findIndex(t.bind(null,n))===e):Array.from(new Set(n))},n.update=function(n,t){let e=n.length!==t.length;e&&(n.length=t.length);for(let r=0;r<t.length;++r)n[r]!==t[r]&&(n[r]=t[r],e=!0);return e},Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});