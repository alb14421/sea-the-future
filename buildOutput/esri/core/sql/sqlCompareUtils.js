// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./errorSupport","./sqlDateParsingUtils","./SqlTimestampOffset","./UnknownTimeZone","../../support/guards","../../chunks/datetime"],function(e,r,t,i,n,s,o){"use strict";function a(e){return!!t.isDateTime(e)||!!t.isTimestampOffset(e)}function u(e){return!!(t.isDateTime(e)||t.isDateOnly(e)||t.isTimestampOffset(e)||t.isTimeOnly(e))}function l(e){if(t.isDateTime(e))return e.toMillis();if(t.isDateOnly(e))return e.toNumber();if(t.isTimestampOffset(e))return e.toMilliseconds();throw new r.SqlError("InvalidDataType")}function f(e,r,t){switch(t){case"<>":return e!==r;case"=":return e===r;case">":return e>r;case"<":return e<r;case">=":return e>=r;case"<=":return e<=r}}function m(e,r,t){i.SqlTimeStampOffset.isTimestampOffset(e)&&(e=e.toDateTime()),i.SqlTimeStampOffset.isTimestampOffset(r)&&(r=r.toDateTime());const n=c(e),s=c(r);switch(t){case"<>":return n!==s;case"=":return n===s;case">":return n>s;case"<":return n<s;case">=":return n>=s;case"<=":return n<=s}}function c(e){return 321408e5*e.year+26784e5*e.month+864e5*e.day+36e5*e.hour+6e4*e.minute+1e3*e.second+e.millisecond}e.dateValueInMilliseconds=l,e.isDateOrTimeValue=u,e.isDateTimeComparableValue=a,e.sqlCompare=function(e,c,O){if(null==e||null==c)return null;if(s.isNumber(e)){if(s.isNumber(c))return f(e,c,O);if(s.isString(c))return function(e,r,t){const i=parseFloat(r);if(!isNaN(i))return f(e,i,t);const n=e.toString();switch(t){case"<>":return n!==r;case"=":return n===r;case">":return n>r;case"<":return n<r;case">=":return n>=r;case"<=":return n<=r}}(e,c,O);if(u(c))throw new r.SqlError("InvalidOperator");if(t.isDateOnly(c))throw new r.SqlError("InvalidOperator")}else if(s.isString(e)){if(s.isNumber(c))return function(e,r,t){const i=parseFloat(e);if(!isNaN(i))return f(i,r,t);const n=r.toString();switch(t){case"<>":return e!==n;case"=":return e===n;case">":return e>n;case"<":return e<n;case">=":return e>=n;case"<=":return e<=n}}(e,c,O);if(s.isString(c))return function(e,r,t){switch(t){case"<>":return e!==r;case"=":return e===r;case">":return e>r;case"<":return e<r;case">=":return e>=r;case"<=":return e<=r}}(e,c,O);if(t.isDateTime(c))throw new r.SqlError("InvalidOperator");if(t.isDateOnly(c))throw new r.SqlError("InvalidOperator");if(t.isTimeOnly(c))throw new r.SqlError("InvalidOperator");if(t.isTimestampOffset(c))throw new r.SqlError("InvalidOperator")}else if(t.isDateTime(e)){if(a(c)){if(n.isUnknownTimeZone(e.zone)){if(o.DateTime.isDateTime(c)&&!n.isUnknownTimeZone(c.zone))return m(e,c,O);if(i.SqlTimeStampOffset.isTimestampOffset(c))return m(e,c,O)}else if(o.DateTime.isDateTime(c)&&n.isUnknownTimeZone(c.zone)){if(!n.isUnknownTimeZone(e.zone))return m(e,c,O);if(i.SqlTimeStampOffset.isTimestampOffset(e))return m(e,c,O)}return f(l(e),l(c),O)}if(s.isString(c))throw new r.SqlError("InvalidOperator");if(t.isDateOnly(c))return function(e,r,t){const i=r.toDateTimeLuxon(e.zone);return f((e=e.startOf("day")).toMillis(),i.toMillis(),t)}(e,c,O);if(t.isTimeOnly(c))throw new r.SqlError("InvalidOperator");if(s.isNumber(c))throw new r.SqlError("InvalidOperator")}else if(t.isDateOnly(e)){if(t.isTimestampOffset(c))return function(e,r,t){const i=e.toDateTimeLuxon(r.toDateTime().zone);return r=r.startOfDay(),f(i.toMillis(),r.toMilliseconds(),t)}(e,c,O);if(t.isDateTime(c))return function(e,r,t){const i=e.toDateTimeLuxon(r.zone);return r=r.startOf("day"),f(i.toMillis(),r.toMillis(),t)}(e,c,O);if(s.isString(c))throw new r.SqlError("InvalidOperator");if(t.isDateOnly(c))return f(e.toNumber(),c.toNumber(),O);if(t.isTimeOnly(c))throw new r.SqlError("InvalidOperator");if(s.isNumber(c))throw new r.SqlError("InvalidOperator")}else if(t.isTimeOnly(e)){if(t.isTimeOnly(c))return f(e.toNumber(),c.toNumber(),O);if(s.isString(c))throw new r.SqlError("InvalidOperator");if(s.isNumber(c))throw new r.SqlError("InvalidOperator");if(t.isDateOnly(c))throw new r.SqlError("InvalidOperator");if(a(c))throw new r.SqlError("InvalidOperator")}else if(t.isTimestampOffset(e)){if(a(c))return o.DateTime.isDateTime(c)&&n.isUnknownTimeZone(c.zone)?m(e,c,O):f(l(e),l(c),O);if(s.isString(c))throw new r.SqlError("InvalidOperator");if(t.isDateOnly(c))return function(e,r,t){const i=r.toDateTimeLuxon(e.toDateTime().zone);return f((e=e.startOfDay()).toMilliseconds(),i.toMillis(),t)}(e,c,O);if(t.isTimeOnly(c))throw new r.SqlError("InvalidOperator");if(s.isNumber(c))throw new r.SqlError("InvalidOperator")}switch(O){case"<>":return e!==c;case"=":return e===c;case">":return e>c;case"<":return e<c;case">=":return e>=c;case"<=":return e<=c}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});