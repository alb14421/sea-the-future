// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../lang","./PropertyOrigin"],function(t,i){"use strict";class s{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(i.originIdNum),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const r=new s,n=this._originStores[0];n&&n.forEach((i,s)=>{r.set(s,t.clone(i),0)});for(let s=2;s<i.originIdNum;s++){const i=this._originStores[s];i&&i.forEach((i,n)=>{e&&e.has(n)||r.set(n,t.clone(i),s)})}return r}get(t,i){const s=void 0===i?this._values:this._originStores[i];return s?s.get(t):void 0}keys(t){const i=null==t?this._values:this._originStores[t];return i?[...i.keys()]:[]}set(t,i,s=7){let e=this._originStores[s];if(e||(e=new Map,this._originStores[s]=e),e.set(t,i),!this._values.has(t)||this._propertyOriginMap.get(t)<=s){const e=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,s),e!==i}return!1}delete(t,i=7){const s=this._originStores[i];if(!s)return;const e=s.get(t);if(s.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===i){this._values.delete(t);for(let s=i-1;s>=0;s--){const i=this._originStores[s];if(i&&i.has(t)){this._values.set(t,i.get(t)),this._propertyOriginMap.set(t,s);break}}}return e}has(t,i){const s=void 0===i?this._values:this._originStores[i];return!!s&&s.has(t)}revert(t,i){for(;i>0&&!this.has(t,i);)--i;const s=this._originStores[i],e=s?.get(t),r=this._values.get(t);return this._values.set(t,e),this._propertyOriginMap.set(t,i),r!==e}originOf(t){return this._propertyOriginMap.get(t)||0}isAtOrigin(t,i){return this.has(t,i)&&this.originOf(t)===i}isBelowOrigin(t,i){return!this.has(t)||this.originOf(t)<i}forEach(t){this._values.forEach(t)}}return s});