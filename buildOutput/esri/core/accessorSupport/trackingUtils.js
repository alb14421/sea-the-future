// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../handleUtils","./tracking","./tracking/SimpleTrackingTarget"],function(n,e,t,r){"use strict";let u=!1;const i=[];function c(n){i.includes(n)||i.unshift(n)}function l(){for(;i.length;)i.pop()()}n.autorun=function(n,i){let a=!1,o=!1;const f=!!i?.sync;let d=new r.SimpleTrackingTarget(()=>{a||o||(o=!0,f?k():queueMicrotask(k))});function k(){o=!1,d&&!a&&(u?c(k):(d.clear(),u=!0,a=!0,t.runTracked(d,n),a=!1,u=!1,l()))}return a=!0,t.runTracked(d,n),a=!1,e.makeHandle(function(){d&&(d.destroy(),d=null)})},n.drainNotificationQueue=l,n.reaction=function(n,i){let a=new r.SimpleTrackingTarget(function e(){if(!a||f)return;if(u)return void c(e);const r=o;a.clear(),u=!0,f=!0,o=t.runTracked(a,n),f=!1,u=!1,i(o,r),l()}),o=null,f=!1;return f=!0,o=t.runTracked(a,n),f=!1,e.makeHandle(function(){a&&(a.destroy(),a=null,o=null)})},n.reactionDeferred=function(n,u){let i=new r.SimpleTrackingTarget(function(){u(c,l)}),c=null;function l(){return i?(i.clear(),c=t.runTracked(i,n),c):null}return l(),e.makeHandle(function(){i&&(i.destroy(),i=null),c=null})},Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});