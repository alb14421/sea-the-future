// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../has","../../Logger","../beforeDestroy","../Lifecycle","../metadata","../tracking","../extensions/serializableProperty"],function(e,t,r,o,s,i,c,n){"use strict";const a=new Set,l=new Set;function p(e,t){return null==t.get?function(){const t=this.__accessor__,r=t.propertiesByName.get(e);if(void 0===r)return;t.mutable&&c.trackAccess(r);const o=t.store;return o.has(e)?o.get(e):r.metadata.value}:function(){const t=this.__accessor__,r=t.propertiesByName.get(e);if(void 0!==r)return r.getComputed(t)}}function u(e){const t=e.prototype,r=i.getPropertiesMetadata(t),o={};for(const e of Object.getOwnPropertyNames(r)){const t=r[e];n.processPrototypePropertyMetadata(t),o[e]={enumerable:!0,configurable:!0,get:p(e,t),set(r){const o=this.__accessor__;if(void 0!==o){if(o.mutable)return o.initialized&&t.readOnly?f("read-only",e):o.lifecycle===s.Lifecycle.CONSTRUCTED&&t.constructOnly?f("construct-only",e):void o.set(e,r)}else Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:r})}}}Object.defineProperties(e.prototype,o)}const f=(e,t)=>{r.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};e.finalizeClass=u,e.subclass=function(e){return t=>{e??="esri.core.Accessor",t.prototype.declaredClass=e,u(t);const r=[],c=[];let n=t.prototype;for(;n;)n.hasOwnProperty("initialize")&&!a.has(n.initialize)&&(a.add(n.initialize),r.push(n.initialize)),n.hasOwnProperty("destroy")&&!l.has(n.destroy)&&(l.add(n.destroy),c.push(n.destroy)),n=Object.getPrototypeOf(n);a.clear(),l.clear();const p=class extends t{constructor(...e){if(super(...e),this.constructor===p&&"function"==typeof this.postscript){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let e=r.length-1;e>=0;e--)r[e].call(this)}}),c.length){let e=!1;const t=this[o.beforeDestroySymbol];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!e){this.__accessor__.lifecycle=s.Lifecycle.DESTROYING,e=!0,t.call(this);for(let e=0;e<c.length;e++)c[e].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};p.__accessorMetadata__=i.getPropertiesMetadata(t.prototype),p.prototype.declaredClass=e;const f=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(p,"name",{value:f,configurable:!0}),p}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});