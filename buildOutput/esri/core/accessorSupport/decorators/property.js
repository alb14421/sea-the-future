// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../Logger","../ensureType","../get","../metadata","../set"],function(e,r,t,n,o,s){"use strict";function i(e,r){if(e||r)return e?r?(t,n)=>r(e(t,n),n):e:r}e.composeCasters=i,e.property=function(e={}){return(a,u)=>{if(a===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${a.name}.${u}. Accessor does not support static properties.`);const p=Object.getOwnPropertyDescriptor(a,u),c=o.getPropertyMetadata(a,u);p&&(p.get||p.set?(c.get=p.get||c.get,c.set=p.set||c.set):"value"in p&&("value"in e&&r.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${u}" on "${a.constructor.name}" already defined in the metadata`,e),c.value=e.value=p.value)),null!=e.readOnly&&(c.readOnly=e.readOnly);const y=e.aliasOf;if(y){const e="string"==typeof y?y:y.source,r="string"==typeof y?null:!0===y.overridable;let t;c.dependsOn=[e],c.get=function(){let r=n.get(this,e);if("function"==typeof r){t||(t=e.split(".").slice(0,-1).join("."));const o=n.get(this,t);o&&(r=r.bind(o))}return r},c.readOnly||(c.set=r?function(e){this._override(u,e)}:function(r){s.set(this,e,r)})}const f=e.type,g=e.types;if(!c.cast){let r;f?r=function(e){let r=0,n=e;if(t.isLongFormType(e))return t.ensureLongFormType(e);for(;Array.isArray(n)&&1===n.length&&"string"!=typeof n[0]&&"number"!=typeof n[0];)n=n[0],r++;const o=n;if(t.isOneOf(o))return 0===r?t.ensureOneOf(o):t.ensureNArrayTyped(t.ensureOneOf(o),r);if(1===r)return t.ensureArray(o);if(r>1)return t.ensureNArray(o,r);const s=e;return s.from?s.from:t.ensureType(s)}(f):g&&(r=Array.isArray(g)?t.ensureArrayTyped(t.ensureOneOfType(g[0])):t.ensureOneOfType(g)),e.cast=i(e.cast,r)}o.mergeProperty(c,e),e.range&&(c.cast=t.ensureRange(c.cast,e.range))}},e.propertyJSONMeta=function(e,r,t){const n=o.getPropertyMetadata(e,t);n.json||(n.json={});let s=n.json;return void 0!==r&&(s.origins||(s.origins={}),s.origins[r]||(s.origins[r]={}),s=s.origins[r]),s},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});