// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["./iteratorUtils"],function(t){"use strict";class e{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(e=>{t+=e.length}),t}add(e,r){if(t.isIterable(e)){const t=this._getOrCreateGroup(r);for(const r of e)o(r)&&t.push(r)}else o(e)&&this._getOrCreateGroup(r).push(e);return this}forEach(t,e){if("function"==typeof t)this._groups.forEach(e=>e.forEach(t));else{const r=this._getGroup(t);r&&e&&r.forEach(e)}}has(t){return this._groups.has(r(t))}remove(e){if("string"!=typeof e&&t.isIterable(e)){for(const t of e)this.remove(t);return this}return this.has(e)?(s(this._getGroup(e)),this._groups.delete(r(e)),this):this}removeAll(){return this._groups.forEach(s),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const e=[];return this._groups.set(r(t),e),e}_getGroup(t){return this._groups.get(r(t))}}function r(t){return t||"_default_"}function s(t){for(const r of t)r instanceof e?r.removeAll():r.remove()}function o(t){return null!=t&&(!!t.remove||t instanceof e)}return e});