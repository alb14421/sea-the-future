// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./componentsUtils","./ref","./keyed","./component","./interactive","./floating-ui","./useT9n"],function(e,t,o,s,i,n,a,r){"use strict";const l=["top","up","down","bottom"],d=t.i`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}.dropdown{block-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`;class c extends t.LitElement{constructor(){super(...arguments),this.disabled=!1,this.messages=r.useT9n({blocking:!0}),this.moveToItems=[],this.open=!1,this.overlayPositioning="absolute",this.placement=a.defaultMenuPlacement,this.scale="m",this.calciteSortHandleBeforeClose=t.createEvent({cancelable:!1}),this.calciteSortHandleBeforeOpen=t.createEvent({cancelable:!1}),this.calciteSortHandleClose=t.createEvent({cancelable:!1}),this.calciteSortHandleMove=t.createEvent({cancelable:!0}),this.calciteSortHandleOpen=t.createEvent({cancelable:!1}),this.calciteSortHandleReorder=t.createEvent({cancelable:!0})}static{this.properties={hasSetInfo:[16,{},{state:!0}],isSetDisabled:[16,{},{state:!0}],disabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],label:1,messageOverrides:[0,{},{attribute:!1}],messages:[0,{},{attribute:!1}],moveToItems:[0,{},{attribute:!1}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],setPosition:[9,{},{type:Number}],setSize:[9,{},{type:Number}],widthScale:[3,{},{reflect:!0}]}}static{this.styles=d}get hasSetInfo(){return"number"==typeof this.setPosition&&"number"==typeof this.setSize}get isSetDisabled(){const{setPosition:e,setSize:t,moveToItems:o}=this;return!!this.hasSetInfo&&(e<1||t<1||t<2&&o.length<1)}async setFocus(){await i.componentFocusable(this),this.dropdownEl?.setFocus()}willUpdate(e){e.has("open")&&(this.hasUpdated||!1!==this.open)&&this.openHandler()}updated(){n.updateHostInteraction(this)}openHandler(){this.disabled?this.open=!1:this.dropdownEl&&(this.dropdownEl.open=this.open)}setDropdownEl(e){e&&(this.dropdownEl=e,this.openHandler())}getLabel(){const{label:e,messages:t,setPosition:o,setSize:s}=this;if(!this.hasSetInfo)return e??"";let i=e?t.repositionLabel.replace("{label}",e):t.reposition;return i=i.replace("{position}",o?o.toString():""),i.replace("{total}",s?s.toString():"")}handleBeforeOpen(e){e.stopPropagation(),this.calciteSortHandleBeforeOpen.emit()}handleOpen(e){e.stopPropagation(),this.calciteSortHandleOpen.emit(),this.open=!0}handleBeforeClose(e){e.stopPropagation(),this.calciteSortHandleBeforeClose.emit()}handleClose(e){e.stopPropagation(),this.calciteSortHandleClose.emit(),this.open=!1}handleReorder(e){this.calciteSortHandleReorder.emit({reorder:e.target.dataset.value})}handleMoveTo(e){const t=e.target.dataset.id,o=this.moveToItems.find(e=>e.id===t);this.calciteSortHandleMove.emit({moveTo:o})}render(){const{disabled:e,flipPlacements:s,open:i,overlayPositioning:a,placement:r,scale:l,widthScale:d}=this,c=this.getLabel(),p=e||this.isSetDisabled;return n.InteractiveContainer({disabled:e,children:t.x`<calcite-dropdown class=${t.safeClassMap("dropdown")} .disabled=${p} .flipPlacements=${s} @calciteDropdownBeforeClose=${this.handleBeforeClose} @calciteDropdownBeforeOpen=${this.handleBeforeOpen} @calciteDropdownClose=${this.handleClose} @calciteDropdownOpen=${this.handleOpen} .overlayPositioning=${a} .placement=${r} .scale=${l} .widthScale=${d} ${o.n(this.setDropdownEl)}><calcite-action .active=${i} appearance=transparent class=${t.safeClassMap("handle")} .dragHandle=${!0} .icon=${e?"blank":"drag"} .label=${c} .scale=${l} slot=trigger .text=${c} title=${c??t.E}></calcite-action>${this.renderGroup()}${this.renderMoveToGroup()}</calcite-dropdown>`})}renderMoveToItem(e){return s.i(e.id,t.x`<calcite-dropdown-item data-id=${e.id??t.E} .label=${e.label} @calciteDropdownItemSelect=${this.handleMoveTo}>${e.label}</calcite-dropdown-item>`)}renderGroup(){return this.hasSetInfo?s.i("reorder",t.x`<calcite-dropdown-group .groupTitle=${this.messages.reorder} .scale=${this.scale} selection-mode=none>${this.renderTop()}${this.renderUp()}${this.renderDown()}${this.renderBottom()}</calcite-dropdown-group>`):null}renderMoveToGroup(){const{messages:e,moveToItems:o,scale:i}=this;return o.length?s.i("move-to-items",t.x`<calcite-dropdown-group .groupTitle=${e.moveTo} .scale=${i} selection-mode=none>${o.map(e=>this.renderMoveToItem(e))}</calcite-dropdown-group>`):null}renderDropdownItem(e,o){return s.i(l[e],t.x`<calcite-dropdown-item data-value=${l[e]??t.E} .label=${o} @calciteDropdownItemSelect=${this.handleReorder}>${o}</calcite-dropdown-item>`)}renderTop(){const{setPosition:e}=this;return 1!==e&&2!==e?this.renderDropdownItem(0,this.messages.moveToTop):null}renderUp(){return 1!==this.setPosition?this.renderDropdownItem(1,this.messages.moveUp):null}renderDown(){return this.setPosition!==this.setSize?this.renderDropdownItem(2,this.messages.moveDown):null}renderBottom(){const{setPosition:e,setSize:t}=this;return e!==t&&e!==t-1?this.renderDropdownItem(3,this.messages.moveToBottom):null}}t.customElement("calcite-sort-handle",c);const p=t.i`:host(.calcite-sortable--ghost){position:relative;overflow:hidden}:host(.calcite-sortable--ghost):before{content:"";position:absolute;inset-block:0px;inset-inline-start:0px;inset-inline-end:0px;z-index:var(--calcite-z-index);box-sizing:border-box;border-width:1px;border-style:dashed;border-color:var(--calcite-color-brand);background-color:var(--calcite-color-foreground-2)}:host(.calcite-sortable--drag){--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}`;e.styles=p});