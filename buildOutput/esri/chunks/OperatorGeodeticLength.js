// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./tslib.es6","./Geometry","./OperatorShapePreservingLength","./MultiPathImpl","./Point2D","./ProjectionTransformation","./OperatorDensify"],function(e,t,r,n,o,a,s,i){"use strict";e.OperatorGeodeticLength=class{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(e,t,r){return!1}canAccelerateGeometry(e){return!1}execute(e,t,c,l){if(4===c)return(new n.OperatorShapePreservingLength).execute(e,t,l);if(0===t.getCoordinateSystemType()&&r.throwInvalidArgumentException(""),r.throwIfMesh(e),e.isEmpty()||e.getDimension()<1)return 0;const u=t.getGCS(),g=s.makeSpheroidData();u.querySpheroidData(g);const p=g.majorSemiAxis,y=g.e2,m=u.getUnit().getUnitToBaseFactor();let h;const d=e.getGeometryType();if(d===r.GeometryType.enumPolygon?h=e.getBoundary():d===r.GeometryType.enumEnvelope?h=o.calculate(e):r.isSegment(d)?(h=new o.Polyline({vd:e.getDescription()}),h.addSegment(e,!0)):h=e,h.hasNonLinearSegments()&&(h=(new i.OperatorDensify).execute(h,0,t.getTolerance(0),0,l)),u!==t){const n=t.getSRToGCSTransform();if(t.isPannable()){h=s.clipGeometryFromTopAndBottom(h,t),d===r.GeometryType.enumPolyline&&h===e&&(h=e.clone());const n=new a.Envelope1D;t.getPannableExtent().queryIntervalX(n);for(let e=0,t=h.getPointCount();e<t;e++){const t=h.getXY(e);t.x=s.normalizeX(t.x,n),h.setXY(e,t)}}const o=h.createInstance();h=s.projectMultiPathVerticesPCSToGCS(n,h,o,l)?o:(new s.OperatorProject).execute(h,n,l)}return this._ExecuteMultiPathGeodeticLength(h,c,p,y,m)}_ExecuteMultiPathGeodeticLength(e,r,n,o,a){const i={stack:[],error:void 0,hasError:!1};try{const c=t.__addDisposableResource(i,new s.PeDoubleClass,!1);let l=0;const u=e.querySegmentIterator();for(;u.nextPath();)for(;u.hasNextSegment();){const e=u.nextSegment(),t=e.getStartXY(),i=e.getEndXY();t.scale(a),i.scale(a),s.peLineType.geodeticDistance(n,o,t.x,t.y,i.x,i.y,c,null,null,r),l+=c.val}return l}catch(e){i.error=e,i.hasError=!0}finally{t.__disposeResources(i)}}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});