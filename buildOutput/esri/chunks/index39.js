// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./index7","./index11","./index32","./index2","./index60","./componentsUtils","./ref","./locale","./useT9n","./component"],function(e,t,i,a,s,l,o,n,c,r,d){"use strict";const h="bordered",p="striped",b="table-container",u="table--fixed",g=o.i`@charset "UTF-8";:host([scale=s]){--calcite-internal-table-cell-padding: .25rem;--calcite-internal-table-cell-font-size: var(--calcite-font-size--2);--calcite-internal-table-cell-font-size-secondary: var(--calcite-font-size--3)}:host([scale=m]){--calcite-internal-table-cell-padding: .5rem;--calcite-internal-table-cell-font-size: var(--calcite-font-size--1);--calcite-internal-table-cell-font-size-secondary: var(--calcite-font-size--2)}:host([scale=l]){--calcite-internal-table-cell-padding: 1rem;--calcite-internal-table-cell-font-size: var(--calcite-font-size-0);--calcite-internal-table-cell-font-size-secondary: var(--calcite-font-size--1)}:host{display:flex}.container{display:flex;block-size:100%;inline-size:100%;flex-direction:column}.table-container{overflow:auto;white-space:nowrap;border:1px solid var(--calcite-color-border-3)}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}table{inline-size:100%;border-collapse:collapse;overflow-x:scroll}@-moz-document url-prefix(){table{border-collapse:separate;border-spacing:0}}.table--fixed{table-layout:fixed}.bordered ::slotted(calcite-table-row){--calcite-table-row-border-color: var(--calcite-color-border-3)}.striped ::slotted(calcite-table-row:nth-child(2n+1)){--calcite-table-row-background: var(--calcite-color-foreground-2)}.selection-actions{display:flex;flex-direction:row;margin-inline-start:auto}.selection-area{display:flex;flex-direction:row;align-items:center;padding-block:var(--calcite-internal-table-cell-padding)}.selection-area calcite-chip:last-of-type{margin-inline-end:.5rem}.selection-area calcite-chip:last-of-type:not(:first-of-type){margin-inline-start:.5rem}.selection-area calcite-button{margin-inline-end:1rem}.pagination-area{display:flex;inline-size:100%;flex-direction:row;justify-content:center;padding-block:var(--calcite-internal-table-cell-padding)}calcite-pagination{flex:1;justify-content:center}:host([hidden]){display:none}[hidden]{display:none}`;class m extends o.LitElement{constructor(){super(),this.paginationEl=n.e(),this.tableBodySlotEl=n.e(),this.tableFootSlotEl=n.e(),this.tableHeadSlotEl=n.e(),this.messages=r.useT9n({blocking:!0}),this.colCount=0,this.pageStartRow=1,this.selectedCount=0,this._selectedItems=[],this.bordered=!1,this.groupSeparator=!1,this.interactionMode="interactive",this.layout="auto",this.numbered=!1,this.pageSize=0,this.scale="m",this.selectionDisplay="top",this.selectionMode="none",this.striped=!1,this.calciteInternalTableRowFocusChange=o.createEvent({cancelable:!1}),this.calciteTablePageChange=o.createEvent({cancelable:!1}),this.calciteTableSelect=o.createEvent({cancelable:!1}),this.listen("calciteTableRowSelect",this.calciteTableRowSelectListener),this.listen("calciteInternalTableRowSelect",this.calciteInternalTableRowSelectListener),this.listen("calciteInternalTableRowFocusRequest",this.calciteInternalTableRowFocusEvent)}static{this.properties={colCount:[16,{},{state:!0}],pageStartRow:[16,{},{state:!0}],readCellContentsToAT:[16,{},{state:!0}],selectedCount:[16,{},{state:!0}],_selectedItems:[16,{},{state:!0}],bordered:[7,{},{reflect:!0,type:Boolean}],caption:1,groupSeparator:[7,{},{reflect:!0,type:Boolean}],interactionMode:[3,{},{reflect:!0}],layout:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],numbered:[7,{},{reflect:!0,type:Boolean}],numberingSystem:[3,{},{reflect:!0}],pageSize:[11,{},{reflect:!0,type:Number}],scale:[3,{},{reflect:!0}],selectedItems:[32,{},{attribute:!1,readOnly:!0}],selectionDisplay:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}],striped:[7,{},{reflect:!0,type:Boolean}]}}static{this.styles=g}get selectedItems(){return this._selectedItems}async load(){this.readCellContentsToAT=/safari/i.test(function(){const e=navigator.userAgentData;return e?.brands?e.brands.map(({brand:e,version:t})=>`${e}/${t}`).join(" "):navigator.userAgent}()),this.listenOn(this.el.shadowRoot,"slotchange",this.handleSlotChange)}willUpdate(e){(e.has("groupSeparator")&&(this.hasUpdated||!1!==this.groupSeparator)||e.has("interactionMode")&&(this.hasUpdated||"interactive"!==this.interactionMode)||e.has("numbered")&&(this.hasUpdated||!1!==this.numbered)||e.has("numberingSystem")||e.has("pageSize")&&(this.hasUpdated||0!==this.pageSize)||e.has("scale")&&(this.hasUpdated||"m"!==this.scale)||e.has("selectionMode")&&(this.hasUpdated||"none"!==this.selectionMode))&&this.updateRows()}handleSlotChange(){this.updateRows()}calciteTableRowSelectListener(e){e.composedPath().includes(this.el)&&this.setSelectedItems(e.target)}calciteInternalTableRowSelectListener(e){e.composedPath().includes(this.el)&&(this.updateSelectedItems(!1),e.stopPropagation())}calciteInternalTableRowFocusEvent(e){const t=e.detail.cellPosition,i=e.detail.rowPosition,a=e.detail.destination,s=e.detail.lastCell,l=this.bodyRows?.filter(e=>!d.isHidden(e)),o=this.allRows?.filter(e=>!d.isHidden(e)),n=this.headRows[this.headRows.length-1]?.positionAll,c=l[0]?.positionAll,r=l[l.length-1]?.positionAll,h=this.footRows[0]?.positionAll,p=o[o.length-1]?.positionAll,b="next"===a&&i===n,u="previous"===a&&i===h,g="previous"===a&&i===c,m="next"===a&&i===r;let f;switch(a){case"first":f=0;break;case"last":f=p;break;case"next":f=b?c:m?h:i+1;break;case"previous":f=u?r:g?n:i-1}const w=this.allRows?.find(e=>e.positionAll===f)?.cellCount,S=t>w?w:t;void 0!==f&&this.calciteInternalTableRowFocusChange.emit({cellPosition:S,rowPosition:f,destination:a,lastCell:s})}getSlottedRows(e){return e?.assignedElements({flatten:!0})?.filter(e=>e?.matches("calcite-table-row"))}updateRows(){const e=this.getSlottedRows(this.tableHeadSlotEl.value)||[],t=this.getSlottedRows(this.tableBodySlotEl.value)||[],i=this.getSlottedRows(this.tableFootSlotEl.value)||[],a=[...e,...t,...i];e?.forEach(t=>{const i=e?.indexOf(t);t.rowType="head",t.positionSection=i,t.positionSectionLocalized=this.localizeNumber((i+1).toString())}),t?.forEach(e=>{const i=t?.indexOf(e);e.rowType="body",e.positionSection=i,e.positionSectionLocalized=this.localizeNumber((i+1).toString())}),i?.forEach(e=>{const t=i?.indexOf(e);e.rowType="foot",e.positionSection=t,e.positionSectionLocalized=this.localizeNumber((t+1).toString())}),a?.forEach(e=>{e.interactionMode=this.interactionMode,e.selectionMode=this.selectionMode,e.bodyRowCount=t?.length,e.positionAll=a?.indexOf(e),e.numbered=this.numbered,e.scale=this.scale,e.readCellContentsToAT=this.readCellContentsToAT,e.lastVisibleRow=a?.indexOf(e)===a.length-1});const s=e[0]?.cellCount||e[0]?.querySelectorAll("calcite-table-header")?.length;this.colCount=s,this.headRows=e,this.bodyRows=t,this.footRows=i,this.allRows=a,this.updateSelectedItems(),this.paginateRows()}handlePaginationChange(){const e=this.paginationEl.value?.startItem;this.pageStartRow=e||1,this.calciteTablePageChange.emit(),this.updateRows()}paginateRows(){this.bodyRows?.forEach(e=>{const t=e.positionSection+1,i=t>=this.pageStartRow&&t<this.pageStartRow+this.pageSize;e.itemHidden=this.pageSize>0&&!i&&!this.footRows.includes(e),e.lastVisibleRow=t===this.pageStartRow+this.pageSize-1||t===this.bodyRows.length})}async updateSelectedItems(e){const t=this.bodyRows?.filter(e=>e.selected);this._selectedItems=t,this.selectedCount=t?.length,this.allRows?.forEach(e=>{e.selectedRowCount=this.selectedCount,e.selectedRowCountLocalized=this.localizeNumber(this.selectedCount)}),e&&this.calciteTableSelect.emit()}handleDeselectAllRows(){this.bodyRows?.forEach(e=>{e.selected=!1}),this.updateSelectedItems(!0)}setSelectedItems(e){this.bodyRows?.forEach(t=>{t.selected="head"===e?.rowType?this.selectedCount!==this.bodyRows?.length:("multiple"===this.selectionMode||e===t)&&t.selected}),this.updateSelectedItems(!0)}localizeNumber(e){return c.numberStringFormatter.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},c.numberStringFormatter.localize(e.toString())}renderSelectionArea(){const e=this._selectedItems?.filter(e=>d.isHidden(e))?.length,t=this.localizeNumber(e?.toString()),i=`${this.localizeNumber(this.selectedCount?.toString())} ${this.messages.selected}`,a=`${t} ${this.messages.hiddenSelected}`;return o.x`<div class=${o.safeClassMap("selection-area")}><calcite-chip .kind=${this.selectedCount>0?"brand":"neutral"} .label=${i} .scale=${this.scale} .value=${i}>${i}</calcite-chip>${e>0&&o.x`<calcite-chip icon=hide-empty .label=${a} .scale=${this.scale} title=${a??o.E} .value=${a}>${t}</calcite-chip>`||""}${this.selectedCount>0&&o.x`<calcite-button icon-start=x kind=neutral @click=${this.handleDeselectAllRows} round .scale=${this.scale} .title=${`${this.messages.clear} ${i} ${this.messages.row}`}>${this.messages.clear}</calcite-button>`||""}<div class=${o.safeClassMap("selection-actions")}><slot name=${"selection-actions"}></slot></div></div>`}renderPaginationArea(){return o.x`<div class=${o.safeClassMap("pagination-area")}><calcite-pagination .groupSeparator=${this.groupSeparator} .numberingSystem=${this.numberingSystem} @calcitePaginationChange=${this.handlePaginationChange} .pageSize=${this.pageSize} .scale=${this.scale} start-item=1 .totalItems=${this.bodyRows?.length} ${n.n(this.paginationEl)}></calcite-pagination></div>`}renderTHead(){return o.x`<thead><slot name=${"table-header"} ${n.n(this.tableHeadSlotEl)}></slot></thead>`}renderTBody(){return o.x`<tbody><slot ${n.n(this.tableBodySlotEl)}></slot></tbody>`}renderTFoot(){return o.x`<tfoot><slot name=${"table-footer"} ${n.n(this.tableFootSlotEl)}></slot></tfoot>`}render(){return o.x`<div class=${o.safeClassMap("container")}>${"none"!==this.selectionMode&&"none"!==this.selectionDisplay&&this.renderSelectionArea()||""}<div class=${o.safeClassMap({[h]:this.bordered,[p]:this.striped,[b]:!0})}><table .ariaColCount=${this.colCount} .ariaMultiSelectable=${"multiple"===this.selectionMode?"true":null} .ariaRowCount=${this.allRows?.length} class=${o.safeClassMap({[u]:"fixed"===this.layout})} .role=${"interactive"===this.interactionMode?"grid":"table"} ${n.n(e=>{e&&o.B(o.x`<caption class=${o.safeClassMap("assistive-text")}>${this.caption}</caption>${this.renderTHead()}${this.renderTBody()}${this.renderTFoot()}`,e)})}></table></div>${this.pageSize>0&&this.renderPaginationArea()||""}</div>`}}o.customElement("calcite-table",m),e.Table=m,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});