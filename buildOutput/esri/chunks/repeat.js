// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./componentsUtils","./directive-helpers"],function(e,s,t){"use strict";const n=(e,s,t)=>{const n=new Map;for(let l=s;l<=t;l++)n.set(e[l],l);return n},l=s.e(class extends s.i$1{constructor(e){if(super(e),e.type!==s.t.CHILD)throw Error("repeat() can only be used in text expressions")}dt(e,s,t){let n;void 0===t?t=s:void 0!==s&&(n=s);const l=[],r=[];let i=0;for(const s of e)l[i]=n?n(s,i):i,r[i]=t(s,i),i++;return{values:r,keys:l}}render(e,s,t){return this.dt(e,s,t).values}update(e,[l,r,i]){const o=t.p(e),{values:u,keys:c}=this.dt(l,r,i);if(!Array.isArray(o))return this.ut=c,u;const f=this.ut??=[],v=[];let d,a,h=0,p=o.length-1,y=0,x=u.length-1;for(;h<=p&&y<=x;)if(null===o[h])h++;else if(null===o[p])p--;else if(f[h]===c[y])v[y]=t.v(o[h],u[y]),h++,y++;else if(f[p]===c[x])v[x]=t.v(o[p],u[x]),p--,x--;else if(f[h]===c[x])v[x]=t.v(o[h],u[x]),t.s(e,v[x+1],o[h]),h++,x--;else if(f[p]===c[y])v[y]=t.v(o[p],u[y]),t.s(e,o[h],o[p]),p--,y++;else if(void 0===d&&(d=n(c,y,x),a=n(f,h,p)),d.has(f[h]))if(d.has(f[p])){const s=a.get(c[y]),n=void 0!==s?o[s]:null;if(null===n){const s=t.s(e,o[h]);t.v(s,u[y]),v[y]=s}else v[y]=t.v(n,u[y]),t.s(e,o[h],n),o[s]=null;y++}else t.M(o[p]),p--;else t.M(o[h]),h++;for(;y<=x;){const s=t.s(e,v[x+1]);t.v(s,u[y]),v[y++]=s}for(;h<=p;){const e=o[h++];null!==e&&t.M(e)}return this.ut=c,t.m(e,v),s.T}});e.c=l});