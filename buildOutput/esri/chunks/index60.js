// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./index7","./componentsUtils","./keyed","./component","./locale","./observers","./responsive","./useT9n"],function(e,t,s,a,i,r,l,o,n){"use strict";const c="list-item",h="hidden-item",d="page",m="selected",p="chevron",g="disabled",u=s.i`:host{display:flex;writing-mode:horizontal-tb}.list{margin:0;display:flex;list-style-type:none;padding:0;column-gap:var(--calcite-spacing-base)}.list-item{margin:0;display:flex;padding:0}.hidden-item{display:none}:host([scale=s]) .chevron,:host([scale=s]) .page,:host([scale=s]) .ellipsis{block-size:1.5rem;padding-inline:.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;min-inline-size:1.5rem}:host([scale=m]) .chevron,:host([scale=m]) .page,:host([scale=m]) .ellipsis{block-size:2rem;padding-inline:.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;min-inline-size:2rem}:host([scale=l]) .chevron,:host([scale=l]) .page,:host([scale=l]) .ellipsis{block-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-inline-size:2.75rem}:host([scale=l]) .chevron{padding-inline:.625rem}:host([scale=l]) .page,:host([scale=l]) .ellipsis{padding-inline:.75rem}:host button{outline-color:transparent}:host button:focus{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.chevron,.page,.ellipsis{margin:0;box-sizing:border-box;display:flex;align-items:center;justify-content:center;border-style:none;--tw-border-opacity: 0;background-color:transparent;padding:0;vertical-align:baseline;font-family:inherit;font-size:var(--calcite-font-size-0);line-height:1.25rem;color:var(--calcite-pagination-color, var(--calcite-color-text-3))}.chevron,.page{cursor:pointer;border-block:2px solid transparent}.chevron:hover,.page:hover{transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-pagination-color-hover, var(--calcite-color-text-1))}.chevron:active,.page:active{color:var(--calcite-pagination-color-hover, var(--calcite-color-text-1))}.page:hover{border-block-end-color:var(--calcite-pagination-color-border-hover, var(--calcite-color-border-2))}.page:active{background-color:var(--calcite-pagination-background-color, var(--calcite-color-foreground-3))}.page.selected{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-pagination-color-hover, var(--calcite-color-text-1));border-block-end-color:var(--calcite-pagination-color-border-active, var(--calcite-color-brand))}.page.selected:focus{border-block-end-width:var(--calcite-spacing-xxs);padding-block-start:var(--calcite-spacing-base)}.chevron:hover{background-color:var(--calcite-pagination-icon-color-background-hover, var(--calcite-color-foreground-2))}.chevron:active{background-color:var(--calcite-pagination-background-color, var(--calcite-color-foreground-3))}.chevron.disabled{pointer-events:none;background-color:transparent}.chevron.disabled>calcite-icon{opacity:var(--calcite-opacity-disabled)}:host([hidden]){display:none}[hidden]{display:none}`;class b extends s.LitElement{constructor(){super(...arguments),this.resizeHandler=({contentRect:{width:e}})=>this.setMaxItemsToBreakpoint(e),this.resizeObserver=l.createObserver("resize",e=>e.forEach(this.resizeHandler)),this.messages=n.useT9n(),this.maxItems=1,this.groupSeparator=!1,this.pageSize=20,this.scale="m",this.startItem=1,this.totalItems=0,this.calcitePaginationChange=s.createEvent({cancelable:!1})}static{this.properties={isXXSmall:[16,{},{state:!0}],lastStartItem:[16,{},{state:!0}],maxItems:[16,{},{state:!0}],totalPages:[16,{},{state:!0}],groupSeparator:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],numberingSystem:1,pageSize:[11,{},{reflect:!0,type:Number}],scale:[3,{},{reflect:!0}],startItem:[11,{},{reflect:!0,type:Number}],totalItems:[11,{},{reflect:!0,type:Number}]}}static{this.shadowRootOptions={mode:"open",delegatesFocus:!0}}static{this.styles=u}async goTo(e){switch(e){case"start":this.startItem=1;break;case"end":this.startItem=this.lastStartItem;break;default:e>=Math.ceil(this.totalPages)?this.startItem=this.lastStartItem:this.startItem=e<=0?1:(e-1)*this.pageSize+1}}async nextPage(){this.startItem=Math.min(this.lastStartItem,this.startItem+this.pageSize)}async previousPage(){this.startItem=Math.max(1,this.startItem-this.pageSize)}async setFocus(){await i.componentFocusable(this),this.el.focus()}connectedCallback(){super.connectedCallback(),this.resizeObserver?.observe(this.el)}async load(){this.handleTotalPages(),this.handleLastStartItemChange(),this.handleIsXXSmall()}willUpdate(e){(e.has("totalItems")&&(this.hasUpdated||0!==this.totalItems)||e.has("pageSize")&&(this.hasUpdated||20!==this.pageSize))&&this.handleTotalPages(),(e.has("totalItems")&&(this.hasUpdated||0!==this.totalItems)||e.has("pageSize")&&(this.hasUpdated||20!==this.pageSize)||e.has("totalPages"))&&this.handleLastStartItemChange(),e.has("maxItems")&&(this.hasUpdated||1!==this.maxItems)&&this.handleIsXXSmall(),e.has("messages")&&this.effectiveLocaleChange()}loaded(){this.setMaxItemsToBreakpoint(this.el.clientWidth)}disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver?.disconnect()}handleTotalPages(){this.pageSize<1&&(this.pageSize=1),this.totalPages=this.totalItems/this.pageSize}effectiveLocaleChange(){r.numberStringFormatter.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator}}handleLastStartItemChange(){const{totalItems:e,pageSize:t,totalPages:s}=this;this.lastStartItem=1+(e%t===0?e-t:Math.floor(s)*t)}handleIsXXSmall(){this.isXXSmall=1===this.maxItems}setMaxItemsToBreakpoint(e){o.breakpoints&&e&&(e>=o.breakpoints.width.medium?this.maxItems=11:e>=o.breakpoints.width.small?this.maxItems=9:e>=o.breakpoints.width.xsmall?this.maxItems=7:e>=o.breakpoints.width.xxsmall?this.maxItems=5:this.maxItems=1)}firstClicked(){this.startItem=1,this.emitUpdate()}lastClicked(){this.startItem=this.lastStartItem,this.emitUpdate()}async previousClicked(){await this.previousPage(),this.emitUpdate()}async nextClicked(){await this.nextPage(),this.emitUpdate()}showStartEllipsis(){return this.totalPages>this.maxItems&&Math.floor(this.startItem/this.pageSize)>this.maxItems-2-2}showEndEllipsis(){return this.totalPages>this.maxItems&&(this.totalItems-this.startItem)/this.pageSize>this.maxItems-2-1}emitUpdate(){this.calcitePaginationChange.emit()}handlePageClick(e){const t=e.target;this.startItem=parseInt(t.value),this.emitUpdate()}renderEllipsis(e){return a.i(e,s.x`<span class=${s.safeClassMap("ellipsis")} data-test-ellipsis=${e??s.E}>&hellip;</span>`)}renderItems(){const{totalItems:e,pageSize:t,startItem:s,maxItems:a,totalPages:i,lastStartItem:r,isXXSmall:l}=this,o=[];if(l)return o.push(this.renderPage(s)),o;const n=e>t,c=this.showStartEllipsis(),h=this.showEndEllipsis();n&&o.push(this.renderPage(1)),c&&o.push(this.renderEllipsis("start"));const d=a-2-(h?1:0)-(c?1:0);let m,p;i-1<=d?(p=1+t,m=r-t):s/t<d?(p=1+t,m=1+d*t):s+d*t>=e?(p=r-d*t,m=r-t):(p=s-t*((d-1)/2),m=s+t*((d-1)/2));for(let e=0;e<d&&p<=m;e++)o.push(this.renderPage(p)),p+=t;return h&&o.push(this.renderEllipsis("end")),o.push(this.renderPage(r)),o}renderPage(e){const{pageSize:t}=this,a=Math.floor(e/t)+(1===t?0:1);r.numberStringFormatter.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator};const i=r.numberStringFormatter.localize(a.toString()),l=e===this.startItem;return s.x`<li class=${s.safeClassMap(c)}><button .ariaCurrent=${l?"page":"false"} class=${s.safeClassMap({[d]:!0,[m]:l})} @click=${this.handlePageClick} value=${e??s.E}>${i}</button></li>`}renderPreviousChevron(){const{pageSize:e,startItem:t,messages:r}=this,l=1===e?t<=e:t<e;return a.i("previous",s.x`<button .ariaLabel=${r.previous} class=${s.safeClassMap({[p]:!0,[g]:l})} data-test-chevron=previous .disabled=${l} @click=${this.previousClicked}><calcite-icon flip-rtl .icon=${"chevron-left"} .scale=${i.getIconScale(this.scale)}></calcite-icon></button>`)}renderNextChevron(){const{totalItems:e,pageSize:t,startItem:r,messages:l}=this,o=r+t>e;return a.i("next-button",s.x`<button .ariaLabel=${l.next} class=${s.safeClassMap({[p]:!0,[g]:o})} data-test-chevron=next .disabled=${o} @click=${this.nextClicked}><calcite-icon flip-rtl .icon=${"chevron-right"} .scale=${i.getIconScale(this.scale)}></calcite-icon></button>`)}renderFirstChevron(){const{messages:e,startItem:t,isXXSmall:r}=this,l=1===t;return r?a.i("first-button",s.x`<button .ariaLabel=${e.first} class=${s.safeClassMap({[p]:!0,[g]:l})} .disabled=${l} @click=${this.firstClicked}><calcite-icon flip-rtl .icon=${"chevron-start"} .scale=${i.getIconScale(this.scale)}></calcite-icon></button>`):null}renderLastChevron(){const{messages:e,startItem:t,isXXSmall:r,lastStartItem:l}=this,o=t===l;return r?a.i("last-button",s.x`<button .ariaLabel=${e.last} class=${s.safeClassMap({[p]:!0,[g]:o})} .disabled=${o} @click=${this.lastClicked}><calcite-icon flip-rtl .icon=${"chevron-end"} .scale=${i.getIconScale(this.scale)}></calcite-icon></button>`):null}render(){const e=this.renderFirstChevron(),t=this.renderLastChevron();return s.x`<ul class=${s.safeClassMap("list")}><li class=${s.safeClassMap({[c]:!0,[h]:!e})}>${e}</li><li class=${s.safeClassMap(c)}>${this.renderPreviousChevron()}</li>${this.renderItems()}<li class=${s.safeClassMap(c)}>${this.renderNextChevron()}</li><li class=${s.safeClassMap({[c]:!0,[h]:!t})}>${t}</li></ul>`}}s.customElement("calcite-pagination",b),e.Pagination=b,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});