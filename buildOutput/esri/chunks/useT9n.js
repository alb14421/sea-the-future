// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./componentsUtils"],function(t,e){"use strict";class o extends e.Controller{constructor(t,o){super(t);const s=this.exports;try{e.setAmbientComponent(this.component);const t=o(this.component,this),r=this.exports!==s;if(e.isPromise(t)){r||this.setProvisionalExports(t);const e=t.then(t=>{this.exports=t,super.catchUpLifecycle()}).catch(t=>{this.P.reject(t),console.error(t)});this.onLoad(async()=>await e)}else r&&void 0===t||(this.exports=t),queueMicrotask(()=>super.catchUpLifecycle())}catch(t){this.P.reject(t),console.error(t)}}catchUpLifecycle(){}}const s=(r=o,(...t)=>{const o=e.retrieveParentControllers(),s=new r(...t),n=s.exports;e.setParentController(o.at(-1));const c=s.component.manager;c.W(s,n),s.watchExports(c.W.bind(c,s)),e.setAmbientChildController(s);const i=[s.component,...o].reverse();return e.trackKey(i,t=>void 0===t?void 0:((t,{host:o,key:s,isReactive:r},n)=>{const c=o,i=c[s]!==t.exports,a=c[s]!==n,l=n!==t.exports;if(i&&!a&&l&&(c[s]=t.exports),o===t.component){if(r){const e=t.component.manager;a&&e.W(t,c[s]),t.onUpdate(o=>{if(o.has(s)){const o=c[s];o!==t.exports&&e.W(t,o)}})}t.O=r?void 0:s}const p=t.component.constructor.elementProperties.get(s)?.readOnly;t.watchExports(()=>{c[s]!==t.exports&&(p?e.bypassReadOnly(()=>{c[s]=t.exports}):c[s]=t.exports)})})(s,t,n),n)});var r;class n extends e.Controller{#t;#e;#o;constructor(t,e){super(),this.#e=t,this.#o=e,this.#t=new MutationObserver(o=>{o.forEach(o=>{t.includes(o.attributeName)&&e.call(this.component,this.component.el.getAttribute(o.attributeName),o.oldValue,o.attributeName)})})}hostConnected(){this.#e.forEach(t=>{this.component.el.hasAttribute(t)&&this.#o.call(this.component,null,this.component.el.getAttribute(t),t)}),this.#t.observe(this.component.el,{attributes:!0,attributeOldValue:!0,attributeFilter:this.#e})}hostDisconnected(){this.#t.disconnect()}}const c=(t,e)=>{if(!e)return t;const o={...t};return Object.entries(e).forEach(([e,s])=>{o[e]="object"==typeof s?c(t[e],s):s??t[e]}),o},i=(a=e.getAssetPath,(t={})=>s(void 0,(o,s)=>{const r=e.getElementLocales(o.el),n={_lang:r.lang,_t9nLocale:r.t9nLocale,_loading:!0},i=o;s.onLifecycle(()=>e.startLocaleObserver(o.el,()=>a("./assets"),({t9nLocale:t,t9nStrings:e,lang:r})=>{const n={...e,_lang:r,_t9nLocale:t,_loading:!1};s.exports=n;const c=e.componentLabel;"string"==typeof c&&"label"in o&&null==o.label&&(o.label??=c),l(i.messageOverrides)},t.name));const l=t=>{const e=s.exports,o=e._original??e,r=c(o,t);t&&(r._original=o),s.exports=r};return"messageOverrides"in i&&s.onUpdate(t=>{t.has("messageOverrides")&&l(i.messageOverrides)}),t.blocking?(s.setProvisionalExports(n,!1),s.ready):n}));var a;t.makeGenericController=t=>e=>s(e,t),t.toFunction=t=>(...o)=>{const s=e.retrieveParentControllers(),r=new t(...o);return e.setParentController(s.at(-1)),r},t.useT9n=i,t.useWatchAttributes=(t,e)=>new n(t,e)});