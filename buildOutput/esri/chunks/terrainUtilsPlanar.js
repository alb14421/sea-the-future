// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../core/Error","../geometry/support/aaBoundingRect","../views/3d/support/supportedSpatialReference","../views/3d/terrain/TerrainConst","../views/3d/terrain/TilingScheme"],function(e,t,o,i,n,l){"use strict";function r(e,r,s,c){if(null==e)return l.getMissingTileInfoError();const a=e.spatialReference;if(a.isGeographic&&!i.isSupportedEarthGCS(a))return new t("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const u=l.TilingScheme.checkUnsupported(e);if(null!=u)return u;if(null==s)return new t("tilingscheme:extent-not-exist","The layer does not provide a layer extent.");const h=function(e,i){const r=e.lods,s=r[0].resolution*2**r[0].level,c=[s*e.size[0],s*e.size[1]],a=[e.origin.x,e.origin.y],u=o.fromExtent(i),h=o.create();l.TilingScheme.computeRowColExtent(u,c,a,h);const p=(h[2]-h[0])*(h[3]-h[1]);if(p>n.maxRootTiles){const o=r[0].scale*2**r[0].level;let i=Math.max((u[3]-u[1])/e.size[1],(u[2]-u[0])/e.size[0])*o/s;const l=Math.floor(Math.log(i)/Math.log(10));return i=Math.ceil(i/10**l)*10**l,new t("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(o).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+i.toLocaleString()+".",{level0Scale:o,suggestedLevel0Scale:i,requiredNumRootTiles:p,allowedNumRootTiles:n.maxRootTiles})}return null}(e,s);return h||(null==r||a.equals(r)||r.isWGS84&&a.isWebMercator?null:new t("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"))}const s=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:r},Symbol.toStringTag,{value:"Module"}));e.checkIfTileInfoSupportedForViewSR=r,e.terrainUtilsPlanar=s});