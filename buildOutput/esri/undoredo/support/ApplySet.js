// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./ApplySetItem"],function(e,t){"use strict";e.ApplySet=class{constructor(){this.applyItems=new Map,this.featureState=null}get items(){return[...this.applyItems.values()]}get deleteItems(){return this.items.filter(t.isDeleteItem)}_add(e){this.applyItems.set(e.featureChangeId,e)}revert(){this.featureState?.clearAll(),this.applyItems.clear()}push(e){if(t.isAddAttachmentItem(e)||t.isDeleteAttachmentItem(e))return void this._add(e);const a=this.applyItems.get(e.featureChangeId);a?(t.isAddItem(a)&&t.isDeleteItem(e)&&(this.applyItems.delete(a.featureChangeId),this.featureState?.removeLocalState(a)),t.isAddItem(a)&&t.isModifyItem(e)&&(a.graphic=e.graphic,this.featureState?.updateLocalState(a)),t.isModifyItem(a)&&t.isDeleteItem(e)&&(this.applyItems.delete(a.featureChangeId),e.graphic=a.revertGraphic,this._add(e),this.featureState?.removeLocalState(a),this.featureState?.applyLocalState(e)),t.isModifyItem(a)&&t.isModifyItem(e)&&(a.graphic=e.graphic,this.featureState?.updateLocalState(a))):(this._add(e),this.featureState?.applyLocalState(e))}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});