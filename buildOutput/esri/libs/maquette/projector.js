// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./dom"],function(e,r){"use strict";let t;t=Array.prototype.find?(e,r)=>e.find(r):(e,r)=>e.filter(r)[0];let o=(e,r,o)=>{let n=function(n){o("domEvent",n);let d=r(),i=((e,r)=>{let t=[];for(;e&&e!==r;)t.push(e),e=e.parentNode;return t})(n.currentTarget,d.domNode);i.reverse();let l,p=((e,r)=>{let o=e;return r.forEach(e=>{o=o&&o.children?t(o.children,r=>r.domNode===e):void 0}),o})(d.getLastRender(),i);return e.scheduleRender(),p&&(l=p.properties[`on${n.type}`].apply(p.properties.bind||this,arguments)),o("domEventProcessed",n),l};return(e,r,t,o)=>n};e.createProjector=e=>{let t,n,d=r.applyDefaultProjectionOptions(e),i=d.performanceLogger,l=!0,p=!1,a=[],c=[],s=(e,r,n)=>{let l;d.eventHandlerInterceptor=o(t,()=>l,i),l=e(r,n(),d),a.push(l),c.push(n)},u=()=>{if(n=void 0,l){l=!1,i("renderStart",void 0);for(let e=0;e<a.length;e++){let r=c[e]();i("rendered",void 0),a[e].update(r),i("patched",void 0)}i("renderDone",void 0),l=!0}};return t={renderNow:u,scheduleRender:()=>{n||p||(n=requestAnimationFrame(u))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),p=!0},resume:()=>{p=!1,l=!0,t.scheduleRender()},append:(e,t)=>{s(r.dom.append,e,t)},insertBefore:(e,t)=>{s(r.dom.insertBefore,e,t)},merge:(e,t)=>{s(r.dom.merge,e,t)},replace:(e,t)=>{s(r.dom.replace,e,t)},detach:e=>{for(let r=0;r<c.length;r++)if(c[r]===e)return c.splice(r,1),a.splice(r,1)[0];throw new Error("renderFunction was not found")}},t},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});