// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../Color","../../core/arrayUtils","../../core/colorUtils","./size","./support/colors","./support/symbologyUtils","./support/utils"],function(e,o,n,a,r,t,i,c){"use strict";const m={light:{color:[153,153,153,.25],width:"1px"},dark:{color:[153,153,153,.25],width:"1px"},darker:{color:[26,26,26,.25],width:"1px"}},s="#aaaaaa",l=["tropical-bliss","desert-blooms","under-the-sea","vibrant-rainbow","ocean-bay","prairie-summer","pastel-chalk"],p=["cat-symbols-strong","cat-symbols-autumnal","cat-symbols-bright","cat-symbols-midrange","cat-symbols-subdued","cat-symbols-pastel","cat-symbols-red","cat-symbols-blue","cat-symbols-green","cat-symbols-gray"],d={default:{name:"default",label:"Default",description:"Default theme for visualizing features by their predominant category.",schemes:{point:{light:{common:{noDataColor:s,outline:m.light,size:"8px"},primary:"predominant-v1",secondary:["predominant-v2","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"].concat(p).concat(l)},dark:{common:{noDataColor:s,outline:m.darker,size:"8px"},primary:"predominant-v2",secondary:["predominant-v1","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"].concat(p).concat(l)}},polyline:{light:{common:{noDataColor:s,width:"2px"},primary:"predominant-v1",secondary:["predominant-v2","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"].concat(p).concat(l)},dark:{common:{noDataColor:s,width:"2px"},primary:"predominant-v2",secondary:["predominant-v1","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"].concat(p).concat(l)}},polygon:{light:{common:{noDataColor:s,outline:m.light,fillOpacity:.8,markerSize:"8px"},primary:"predominant-v1",secondary:["predominant-v2","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"].concat(p).concat(l)},dark:{common:{noDataColor:s,outline:m.dark,fillOpacity:.8,markerSize:"8px"},primary:"predominant-v2",secondary:["predominant-v1","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"].concat(p).concat(l)}}}}},u=i.createThemes({themeDictionary:d});function y(e){const o=i.getRawSchemes({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme,theme:u.get("default")});if(!o)return;const{schemesInfo:a,basemapId:t,basemapTheme:c}=o,m=a.common,s=r.getSchemes({basemap:e.basemap,geometryType:e.geometryType,worldScale:e.worldScale,view:e.view}),l=s?.primaryScheme;return{primaryScheme:h(e,a.primary,m,l),secondarySchemes:a.secondary.map(o=>h(e,o,m,l)).filter(n.isSome),basemapId:t,basemapTheme:c}}function h(e,n,r,i){const m=t[n];if(!m)return;const{numColors:s}=e,l=s?m[s]??a.createUniqueColors(m.stops,s):m.stops,p="mesh"!==e.geometryType&&e.worldScale?e.view:null;switch(e.geometryType){case"point":case"multipoint":{const e=r;return function(e,n){return{name:e.name,tags:[...e.tags],colors:e.colors.map(e=>new o(e)),noDataColor:new o(e.noDataColor),outline:{color:new o(e.outline.color),width:e.outline.width},size:n?c.toWorldScale(e.size,n):e.size,sizeScheme:e.sizeScheme,opacity:e.opacity}}({name:m.name,tags:m.tags,colors:l,noDataColor:e.noDataColor,opacity:1,sizeScheme:i,outline:e.outline,size:e.size},p)}case"polyline":{const e=r;return function(e,n){return{name:e.name,tags:[...e.tags],colors:e.colors.map(e=>new o(e)),noDataColor:new o(e.noDataColor),width:n?c.toWorldScale(e.width,n):e.width,sizeScheme:e.sizeScheme,opacity:e.opacity}}({name:m.name,tags:m.tags,colors:l,noDataColor:e.noDataColor,opacity:1,sizeScheme:i,width:e.width},p)}case"polygon":{const e=r,n=i;return n&&n.marker&&null!=e.markerSize&&(n.marker.size=e.markerSize),function(e,n){const{sizeScheme:a}=e;return a.marker.size=n?c.toWorldScale(a.marker.size,n):a.marker.size,{name:e.name,tags:[...e.tags],colors:e.colors.map(e=>new o(e)),noDataColor:new o(e.noDataColor),outline:{color:new o(e.outline.color),width:e.outline.width},sizeScheme:a,opacity:e.opacity}}({name:m.name,tags:m.tags,colors:l,noDataColor:e.noDataColor,opacity:e.fillOpacity,outline:e.outline,sizeScheme:n},p)}case"mesh":{const e=r;return{name:(d={name:m.name,tags:m.tags,colors:l,noDataColor:e.noDataColor,opacity:e.fillOpacity}).name,tags:[...d.tags],colors:d.colors.map(e=>new o(e)),noDataColor:new o(d.noDataColor),opacity:d.opacity}}default:return}var d}e.cloneScheme=function(e){if(!e)return;const n={...e};return n.colors=n.colors.map(e=>new o(e)),n.tags=[...n.tags],n.noDataColor&&(n.noDataColor=new o(n.noDataColor)),"outline"in n&&n.outline&&(n.outline={color:n.outline.color&&new o(n.outline.color),width:n.outline.width}),"sizeScheme"in n&&n.sizeScheme&&(n.sizeScheme=r.cloneScheme(n.sizeScheme)),n},e.getSchemeByName=function(e){return i.filterSchemesByName(e.name,y(e))},e.getSchemes=y,e.getSchemesByTag=function(e){return i.filterSchemesByTag(e.includedTags,e.excludedTags,y(e))},e.getThemes=function(e){return i.getThemesforBasemap(u,e)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});