// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../layers/support/LabelClass","../../../layers/support/LabelExpressionInfo","../../../renderers/support/UniqueValueInfo","../../support/clusterUtils","../../../symbols/TextSymbol"],function(e,n,t,o,l,a){"use strict";function r(e){return`\n  $feature["${e}"];\n  var value = $feature["${e}"];\n  var num = Count(Text(Round(value)));\n  var label = When(\n    num < 4, Text(value, "#.#"),\n    num == 4, Text(value / Pow(10, 3), "#.0k"),\n    num <= 6, Text(value / Pow(10, 3), "#k"),\n    num == 7, Text(value / Pow(10, 6), "#.0m"),\n    num > 7, Text(value / Pow(10, 6), "#m"),\n    Text(value, "#,###")\n  );\n  return label;\n  `}e.createLabelClass=function(e,o=!1){const l=new a({haloColor:"#373837",haloSize:"1px",color:"#f0f0f0",font:{family:"Noto Sans",size:"12px",weight:"bold"}});return new n({symbol:l,deconflictionStrategy:"none",labelPlacement:o?"always-horizontal":"center-center",labelExpressionInfo:new t({expression:e})})},e.createLabelExpressionForAggregateField=function(e,n,t,a){const u=t.name;if("mode"===t.statisticType){const r="getFieldDomain"in e?e.getFieldDomain(t.onStatisticField):null;let s=null;return"coded-value"===r?.type?s=r.codedValues.map(e=>new o({value:e.code,label:e.name})):"unique-value"===n?.type&&null!=n.field&&n.field.toLowerCase()===u.toLowerCase()&&(s=(n.uniqueValueInfos??[]).map(e=>e.clone())),s?l.getPredominantTypeExpression(s,u,a):`Text($feature["${u}"])`}return r(u)},e.createNumericLabelExpression=r,e.getAggregateFieldInfo=function(e,n){const t=n.featureReduction;if("fields"in t)for(const n of t.fields)if(n.name.toLowerCase()===e.toLowerCase())return n;return null},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});