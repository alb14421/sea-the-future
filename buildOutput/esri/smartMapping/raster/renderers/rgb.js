// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/Error","../../../renderers/support/rasterRendererHelper","../support/utils"],function(e,t,r,n){"use strict";e.createRenderer=async function(e){const a=(e=await async function(e){e=await n.processRasterRendererParameters(e);const{serviceRasterInfo:a}=e.layer;if(1===a.bandCount)throw new t("raster-rgb-renderer:not-supported","Only multiband image is supported");const{rgbBandIds:s}=e;if(s&&3!==s.length)throw new t("raster-rgb-renderer:invalid-parameters","rgb band ids must have exactly three 0-based band indices");if(!s){const t=r.getDefaultBandCombination(a);t&&t.length<3&&2===a.bandCount?e.rgbBandIds=[0,1,1]:e.rgbBandIds=t}return e}(e)).layer,{rasterInfo:s}=a,{rgbBandIds:i}=e,d={bandIds:i,stretchType:e.stretchType,includeStatisticsInStretch:e.includeStatisticsInStretch};let c=r.createStretchRenderer(s,d);if(e.estimateStatistics){e.includeStatisticsInStretch=!0;const t=s.clone();await a.updateRasterInfoWithEstimatedStats(t,{rasterFunction:e.rasterFunction,signal:e.signal}),c=r.createStretchRenderer(t,d)}return function(e,t){const{gamma:r,useGamma:n,dynamicRangeAdjustment:a}=t;3===r?.length&&(e.gamma=r),null!=n&&(e.useGamma=n),null!=a&&(e.dynamicRangeAdjustment=a)}(c,e),{renderer:c,rgbBandIds:i}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});