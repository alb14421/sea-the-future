// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../../core/Error","../../layers/support/fieldUtils","../../renderers/support/heatmapUtils","./support/utils","../support/utils","../support/adapters/support/layerUtils"],function(e,t,a,s,i,r){"use strict";const l=t.numericTypes;return async function(t){const{layerAdapter:n,...u}=await async function(t){if(!t?.layer||!t.view)throw new e("heatmap-statistics:missing-parameters","'layer' and 'view' parameters are required");const n=[2,3,4,6,7,8,9,12,15],{layer:u,...p}=t,d=r.createLayerAdapter(u,n);if(!d)throw new e("heatmap-statistics:invalid-parameters","'layer' must be one of these types: "+r.getLayerTypeLabels(n).join(", "));const o={layerAdapter:d,...p};o.radius=null==o.radius?null==o.blurRadius?18:a.gaussianBlurRadiusPxToKernelDensityRadiusPt(o.blurRadius):o.radius;const c=null!=o.signal?{signal:o.signal}:null;await d.load(c);const y=o.field,f=y?d.getField(y):null,m=await i.getFieldsList({field:y}),h=s.verifyBasicFieldValidity(d,m,"heatmap-statistics:invalid-parameters");if(h)throw h;if(f){const e=s.verifyFieldType(d,f,"heatmap-statistics:invalid-parameters",l);if(e)throw e}return o}(t);return n.heatmapStatistics(u)}});