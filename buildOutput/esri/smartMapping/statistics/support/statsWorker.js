// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
require({cache:{"esri/smartMapping/statistics/support/utils":function(){define(["exports","../../../core/Error","../../../core/screenUtils","../../../core/timeUtils","../../../geometry/Point","../../../geometry/SpatialReference","../../../geometry/support/quantizationUtils","../../../geometry/support/spatialReferenceUtils","../../../layers/support/fieldUtils","../../../renderers/support/heatmapUtils","../../support/utils","../../../statistics/utils","../../../support/loadArcade"],function(e,t,r,n,s,i,a,o,l,c,u,d,f){"use strict";let h=null;const p=/^(?<hh>([01][0-9])|(2[0-3])):(?<mm>[0-5][0-9])(:(?<ss>[0-5][0-9]))?(\.(?<ms>\d+))?$/;function m(e){const t=p.exec(e);if(!t)return null;const{hh:r,mm:s,ss:i,ms:a}=t.groups;return Number(r)*n.millisecondsPerTimeUnit.hours+Number(s)*n.millisecondsPerTimeUnit.minutes+Number(i)*n.millisecondsPerTimeUnit.seconds+Number(a||0)}function y(e,t){let r=null!=e?e:"";return null!=t&&t&&(r=r?"("+r+") AND ("+t+")":t),r}e.calculateHeatmapStats=function(e,t=18,n,s,i){const a=new Float64Array(s*i);t=Math.round(r.pt2px(t));let o=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY;const u=c.createValueFunction(n);for(const{geometry:r,attributes:n}of e){const{x:e,y:d}=r,f=Math.max(0,e-t),h=Math.max(0,d-t),p=Math.min(i,d+t),m=Math.min(s,e+t),y=+u(n);for(let r=h;r<p;r++)for(let n=f;n<m;n++){const i=r*s+n,u=c.evaluateDensityKernel(n-e,r-d,t)*y,f=a[i]+=u;o=Math.min(o,f),l=Math.max(l,f)}}return{min:o,max:l}},e.getDataValues=async function(e,t,r=!0){if(!t)return[];const{field:n,field2:s,field3:a,fieldDelimiter:o,fieldInfos:c,timeZone:p}=e,y=n&&c?.find(e=>e.name.toLowerCase()===n.toLowerCase()),g=!!y&&l.isTimeOnlyField(y),b=!!y&&u.isAnyDateField(y),v=e.valueExpression,M=e.normalizationType,S=e.normalizationField,_=e.normalizationTotal,T=[],x=e.viewInfoParams;let I=null,w=null;if(v){if(!h){const{arcadeUtils:e}=await f.loadArcade();h=e}h.hasGeometryOperations(v)&&await h.enableGeometryOperations(),I=h.createFunction(v),w=x?h.getViewInfo({viewingMode:x.viewingMode,scale:x.scale,spatialReference:new i(x.spatialReference)}):null}const A=e.fieldInfos,L=t[0]&&"declaredClass"in t[0]&&"esri.Graphic"===t[0].declaredClass||!A?null:{fields:A};return t.forEach(e=>{const t=e.attributes;let i;if(v){const t=L?Object.assign({},e,{layer:L}):e,r=h.createExecContext(t,w,p);i=h.executeFunction(I,r)}else t&&(i=t[n],s?(i=`${d.processNullValue(i)}${o}${d.processNullValue(t[s])}`,a&&(i=`${i}${o}${d.processNullValue(t[a])}`)):"string"==typeof i&&r&&(b?i=i?new Date(i).getTime():null:g&&(i=i?m(i):null)));if(M&&"number"==typeof i&&isFinite(i)){const e=t&&parseFloat(t[S]);i=d.getNormalizedValue(i,M,e,_)}T.push(i)}),T},e.getRangeExpr=function(e,t,r){const n=null!=t?e+" >= "+t:"",s=null!=r?e+" <= "+r:"";let i="";return i=n&&s?y(n,s):n||s,i?"("+i+")":""},e.getSQLFilterForNormalization=function(e){const t=e.field,r=e.normalizationType,n=e.normalizationField;let s;return"field"===r?s="(NOT "+n+" = 0)":"log"!==r&&"natural-log"!==r&&"square-root"!==r||(s=`(${t} > 0)`),s},e.getSumOfAttributesExpr=function(e,t,r){const n=[],s=[],i=[],a=[],o=[];e.forEach((e,t)=>{const l=e.field?"field":"expression",c=e.field||e.valueExpression;e.field?(o.push(c),s.push(`var ${l}${t} = Number($feature["${c}"]);`)):(n.push(`function getValueForExpr${t}() {\n  ${c} \n}`),s.push(`var ${l}${t} = Number(getValueForExpr${t}());`)),r||i.push(`${l}${t} = IIf(${l}${t} < 0, 0, ${l}${t});`),a.push(`${l}${t}`)});const l=n.length?null:o.reduce((e,t)=>`${e} + ${t}`);let c=null;return t||r?t?r||l&&(c=`(( ${l} ) >= 0)`):l&&(c=`(( ${l} ) <> 0)`):l&&(c=`(( ${l} ) > 0)`),{valueExpression:[n.length?n.join("\n"):"",s.join("\n"),i.join("\n"),`var total = ${a.join(" + ")};`,"return total;"].filter(Boolean).join("\n\n"),sqlExpression:l,sqlWhere:c}},e.mergeWhereClauses=y,e.quantizeFeatures=function(e,t,r,n){const i=o.isWrappable(r)?o.getInfo(r):null,l=i?Math.round((i.valid[1]-i.valid[0])/t.scale[0]):null;return e.map(e=>{const r=new s(e.geometry);return a.quantizePoint(t,r,r),e.geometry=i?function(e,t,r){return e.x<0?e.x+=t:e.x>r&&(e.x-=t),e}(r,l??0,n[0]):r,e})},e.timeOnlyToMilliseconds=m,e.verifyBasicFieldValidity=function(e,r,n){const s=function(e){const t=e.layer;return e.fields.filter(e=>!t.getField(e))}({layer:e,fields:r});if(s.length)return new t(n,"Unknown fields: "+s.join(", ")+". You can only use fields defined in the layer schema");const i=function(e){const t=e.layer;return e.fields.filter(e=>{const r=t.getFieldUsageInfo(e);return!r||!r.supportsStatistics})}({layer:e,fields:r});return i.length?new t(n,"Unsupported fields: "+i.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true"):void 0},e.verifyFieldType=function(e,r,n,s){let i;return r?r.name!==e.objectIdField&&s.includes(r.type)||(i=new t(n,"'field' should be one of these types: "+s.join(","))):i=new t(n,"'field' is not defined in the layer schema"),i},e.verifyFilterValidity=function(e,r){if(e&&"intersects"!==e.spatialRelationship)return new t(r,"Only 'intersects' spatialRelationship is supported for featureFilter")},e.verifyNumericField=function(e,r,n){let s;return r?r.name!==e.objectIdField&&l.isNumericField(r)||(s=new t(n,"'field' should be one of these numeric types: "+l.numericTypes.join(","))):s=new t(n,"'field' is not defined in the layer schema"),s},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/screenUtils":function(){define(["exports"],function(e){"use strict";const t=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;function r(e){return e?72*e/96:0}function n(e=0,t=0){return{x:e,y:t}}e.castRenderScreenPointArray=function(e){return e},e.castRenderScreenPointArray3=function(e){return e},e.castScreenPointArray=function(e){return e},e.cloneScreenPoint=function(e){return e?n(e.x,e.y):null},e.createRenderScreenPoint=function(e=0,t=0){return{x:e,y:t}},e.createRenderScreenPointArray=function(e=0,t=0){return[e,t]},e.createRenderScreenPointArray3=function(e=0,t=0,r=0){return[e,t,r]},e.createScreenPoint=n,e.createScreenPointArray=function(e=0,t=0){return[e,t]},e.pt2px=function(e){return e?e/72*96:0},e.px2pt=r,e.screenPointArrayToObject=function(e,t){return t?(t.x=e[0],t.y=e[1],t):{x:e[0],y:e[1]}},e.screenPointObjectToArray=function(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]},e.toPt=function(e){if("string"==typeof e){const n=e.match(t);if(n){const t=Number(n[1]),s=n[3]&&n[3].toLowerCase(),i=e.startsWith("-"),a="px"===s?r(t):t;return i?-a:a}return console.warn("screenUtils.toPt: input not recognized!"),null}return e},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(e,t){"use strict";function r(e){if(function(e){return"lowerLeft"===e.originPosition&&4===e.scale.length&&4===e.translate.length}(e))return e;const{originPosition:t,scale:r,translate:n}=e,s=r[0]??1,i=r[1]??1;return{originPosition:"lowerLeft",scale:[s,"lowerLeft"===t?i:-i,r[2]??1,r[3]??1],translate:[n[0]??0,n[1]??0,n[2]??0,n[3]??0]}}function n({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function s({scale:e,translate:t},r){return Math.round((r-t[1])/e[1])}function i({scale:e,translate:t},r){return Math.round(((r??0)-t[2])/e[2])}function a({scale:e,translate:t},r){return r?Math.round((r-t[3])/e[3]):0}function o(e,t){return e&&t?d:e&&!t?c:!e&&t?u:l}const l=(e,t)=>{const r=[];if(!t.length)return null;const i=t[0];let a=n(e,i[0]),o=s(e,i[1]);r.push([a,o]);for(let i=1;i<t.length;i++){const[l,c]=t[i],u=n(e,l),d=s(e,c);u===a&&d===o||r.push([u-a,d-o]),a=u,o=d}return r},c=(e,t)=>{const r=[];if(!t.length)return null;const a=t[0];let o=n(e,a[0]),l=s(e,a[1]),c=i(e,a[2]);r.push([o,l,c]);for(let a=1;a<t.length;a++){const[u,d,f]=t[a],h=n(e,u),p=s(e,d),m=i(e,f);h===o&&p===l&&m===c||r.push([h-o,p-l,m]),o=h,l=p,c=m}return r},u=(e,t)=>{const r=[];if(!t.length)return null;const i=t[0];let o=n(e,i[0]),l=s(e,i[1]),c=a(e,i[2]);r.push([o,l,c]);for(let i=1;i<t.length;i++){const[u,d,f]=t[i],h=n(e,u),p=s(e,d),m=a(e,f);h===o&&p===l&&m===c||r.push([h-o,p-l,m]),o=h,l=p,c=m}return r},d=(e,t)=>{const r=[];if(!t.length)return null;const o=t[0];let l=n(e,o[0]),c=s(e,o[1]),u=i(e,o[2]),d=a(e,o[3]);r.push([l,c,u,d]);for(let o=1;o<t.length;o++){const[f,h,p,m]=t[o],y=n(e,f),g=s(e,h),b=i(e,p),v=a(e,m);y===l&&g===c&&b===u&&v===d||r.push([y-l,g-c,b,v]),l=y,c=g,u=b,d=v}return r};function f({scale:e,translate:t},r){return r*e[0]+t[0]}function h({scale:e,translate:t},r){return r*e[1]+t[1]}function p({scale:e,translate:t},r){return(r??0)*e[2]+t[2]}function m({scale:e,translate:t},r){return r?r*e[3]+t[3]:0}function y(e,t){return e&&t?M:e&&!t?b:!e&&t?v:g}const g=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const n=t[0];let s=f(e,n[0]),i=h(e,n[1]);r[0]=[s,i];const{scale:a,originPosition:o}=e,l=a[0],c="lowerLeft"===o?a[1]:-a[1];for(let e=1;e<t.length;e++){const[n,a]=t[e];s+=l*n,i+=c*a,r[e]=[s,i]}return r},b=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const n=t[0];let s=f(e,n[0]),i=h(e,n[1]);r[0]=[s,i,p(e,n[2])];const{scale:a,originPosition:o}=e,l=a[0],c="lowerLeft"===o?a[1]:-a[1];for(let n=1;n<t.length;n++){const[a,o,u]=t[n];s+=l*a,i+=c*o,r[n]=[s,i,p(e,u)]}return r},v=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const n=t[0];let s=f(e,n[0]),i=h(e,n[1]);r[0]=[s,i,m(e,n[2])];const{scale:a,originPosition:o}=e,l=a[0],c="lowerLeft"===o?a[1]:-a[1];for(let n=1;n<t.length;n++){const[a,o,u]=t[n];s+=l*a,i+=c*o,r[n]=[s,i,m(e,u)]}return r},M=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const n=t[0];let s=f(e,n[0]),i=h(e,n[1]);r[0]=[s,i,p(e,n[2]),m(e,n[3])];const{scale:a,originPosition:o}=e,l=a[0],c="lowerLeft"===o?a[1]:-a[1];for(let n=1;n<t.length;n++){const[a,o,u,d]=t[n];s+=l*a,i+=c*o,r[n]=[s,i,p(e,u),m(e,d)]}return r};function S(e,t,r){const n=new Array(r.length);for(let s=0;s<r.length;s++)n[s]=t(e,r[s]);return n}function _(e,t,r){let[n,s]=r[0],i=Math.min(n,t[0]),a=Math.min(s,t[1]),o=Math.max(n,t[2]),l=Math.max(s,t[3]);for(let e=1;e<r.length;e++){const[t,c]=r[e];n+=t,s+=c,t<0&&(i=Math.min(i,n)),t>0&&(o=Math.max(o,n)),c<0?a=Math.min(a,s):c>0&&(l=Math.max(l,s))}return e[0]=i,e[1]=a,e[2]=o,e[3]=l,e}function T(e,t){if(!t.length)return null;e[0]=e[1]=Number.POSITIVE_INFINITY,e[2]=e[3]=Number.NEGATIVE_INFINITY;for(let r=0;r<t.length;r++)_(e,e,t[r]);return e}function x(e,t,o){const l=r(e);return t.xmin=n(l,o.xmin),t.ymin=s(l,o.ymin),t.xmax=n(l,o.xmax),t.ymax=s(l,o.ymax),o.hasZ&&(t.zmin=i(l,o.zmin),t.zmax=i(l,o.zmax)),o.hasM&&(t.mmin=a(l,o.mmin),t.mmax=a(l,o.mmax)),t.hasZ=o.hasZ??!1,t.hasM=o.hasM??!1,t}function I(e,t,n){const s=r(e);return t.points=o(n.hasZ,n.hasM)(s,n.points)??[],t.hasZ=n.hasZ??!1,t.hasM=n.hasM??!1,t}function w(e,t,o){const l=r(e);return t.x=n(l,o.x),t.y=s(l,o.y),null!=o.z&&(t.z=i(l,o.z)),null!=o.m&&(t.m=a(l,o.m)),t}function A(e,t,n){const s=function(e,t,r,n){const s=[],i=o(r,n);for(let r=0;r<t.length;r++){const n=i(e,t[r]);n&&n.length>=3&&s.push(n)}return s.length?s:null}(r(e),n.rings,n.hasZ,n.hasM);return s?(t.rings=s,t.hasZ=n.hasZ??!1,t.hasM=n.hasM??!1,t):null}function L(e,t,n){const s=function(e,t,r,n){const s=[],i=o(r,n);for(let r=0;r<t.length;r++){const n=i(e,t[r]);n&&n.length>=2&&s.push(n)}return s.length?s:null}(r(e),n.paths,n.hasZ,n.hasM);return s?(t.paths=s,t.hasZ=n.hasZ??!1,t.hasM=n.hasM??!1,t):null}e.getQuantizedBoundsCoordsArray=_,e.getQuantizedBoundsCoordsArrayArray=T,e.getQuantizedBoundsPaths=function(e){return T([0,0,0,0],e)},e.getQuantizedBoundsPoints=function(e){const t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return _(t,t,e)},e.getQuantizedBoundsRings=function(e){return T([0,0,0,0],e)},e.normalizeTransform=r,e.quantizeBounds=function(e,t,i){const a=r(e);return t[0]=n(a,i[0]),t[3]=s(a,i[1]),t[2]=n(a,i[2]),t[1]=s(a,i[3]),t},e.quantizeCoordsArrayXY=l,e.quantizeCoordsArrayXYM=u,e.quantizeCoordsArrayXYZ=c,e.quantizeCoordsArrayXYZM=d,e.quantizeExtent=x,e.quantizeGeometry=function(e,r){return e&&r?t.isPoint(r)?w(e,{},r):t.isPolyline(r)?L(e,{},r):t.isPolygon(r)?A(e,{},r):t.isMultipoint(r)?I(e,{},r):t.isExtent(r)?x(e,{},r):null:null},e.quantizeM=a,e.quantizeMultipoint=I,e.quantizePoint=w,e.quantizePolygon=A,e.quantizePolyline=L,e.quantizeX=n,e.quantizeY=s,e.quantizeZ=i,e.toQuantizationTransform=function(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:null!=e.extent?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null},e.unquantizeBounds=function(e,t,n){const s=r(e);return n?(t[0]=f(s,n[0]),t[1]=h(s,n[3]),t[2]=f(s,n[2]),t[3]=h(s,n[1]),t):[f(s,t[0]),h(s,t[3]),f(s,t[2]),h(s,t[1])]},e.unquantizeCoordsArrayArray=S,e.unquantizeCoordsArrayXY=g,e.unquantizeCoordsArrayXYM=v,e.unquantizeCoordsArrayXYZ=b,e.unquantizeCoordsArrayXYZM=M,e.unquantizeExtent=function(e,t,n,s=n.hasZ??!1,i=n.hasM??!1){const a=r(e);return t.xmin=f(a,n.xmin),t.xmax=f(a,n.xmax),t.ymin=h(a,n.ymin),t.ymax=h(a,n.ymax),s&&(t.zmin=p(a,n.zmin),t.zmax=p(a,n.zmax)),i&&(t.mmin=m(a,n.mmin),t.mmax=m(a,n.mmax)),t.hasZ=s,t.hasM=i,t},e.unquantizeM=m,e.unquantizeMultipoint=function(e,t,n,s=n?.hasZ??!1,i=n?.hasM??!1){if(null!=n){const a=r(e);t.points=y(s,i)(a,n.points),t.hasZ=s,t.hasM=i}return t},e.unquantizePoint=function(e,t,n,s=null!=n?.z,i=null!=n?.m){if(null==n)return t;const a=r(e);return t.x=f(a,n.x),t.y=h(a,n.y),s&&(t.z=p(a,n.z)),i&&(t.m=m(a,n.m)),t},e.unquantizePolygon=function(e,t,n,s=n?.hasZ??!1,i=n?.hasM??!1){if(null!=n){const a=r(e);t.rings=S(a,y(s,i),n.rings),t.hasZ=s,t.hasM=i}return t},e.unquantizePolyline=function(e,t,n,s=n?.hasZ??!1,i=n?.hasM??!1){if(null!=n){const a=r(e);t.paths=S(a,y(s,i),n.paths),t.hasZ=s,t.hasM=i}return t},e.unquantizeX=f,e.unquantizeY=h,e.unquantizeZ=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/heatmapUtils":function(){define(["exports","../../core/mathUtils","../../core/screenUtils","../../chunks/vec42","../../core/libs/gl-matrix-2/factories/vec4f64"],function(e,t,r,n,s){"use strict";function i(e,r,s,i){let{color:a,ratio:o}=r,{color:l,ratio:c}=s;if(c===o){const e=1e-6;1===c?o-=e:c+=e}const u=t.clamp((i-o)/(c-o),0,1);n.lerp(e,a.toArray(),l.toArray(),u)}e.createValueFunction=function(e){return"function"==typeof e?e:e?t=>+t[e]:()=>1},e.evaluateDensityKernel=function(e,t,r){const n=Math.sqrt(e**2+t**2)/r;return n>1?0:3/(Math.PI*r**2)*(1-n**2)**2},e.gaussianBlurRadiusPxToKernelDensityRadiusPt=function(e){return r.px2pt(2.4*e)},e.generateGradient=function(e){const t=new Uint8ClampedArray(2048);if((e=e.filter(({ratio:e})=>e>=0&&e<=1).sort((e,t)=>e.ratio-t.ratio).map(({color:e,ratio:t})=>({color:e,ratio:Math.max(t,.001)}))).length<1)return t;let r=e[0],n=e[0],a=1;const o=s.create();for(let s=0;s<512;s++){const l=(s+.5)/512;for(;l>n.ratio&&a<e.length;)r=n,n=e[a++];i(o,r,n,l),t.set(o,4*s)}return t},e.kernelDensityRadiusPtToGaussianBlurRadiusPx=function(e){return r.pt2px(e)/2.4},e.magicKernelDensityRadiusInflationFactor=2.4,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/smartMapping/support/utils":function(){define(["exports","../../intl/date","../../layers/support/fieldUtils","../../support/basemapUtils","../../support/loadArcade","../../time/constants","../../time/timeZoneUtils"],function(e,t,r,n,s,i,a){"use strict";const o={light:["streets","gray","topo","terrain","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector","topo-3d","navigation-3d","streets-3d","osm-3d","gray-3d"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector","navigation-dark-3d","streets-dark-3d","dark-gray-3d"]},l={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},c=new Set(["integer","small-integer"]);let u=null;function d(e){return String(e).padStart(2,"0")}function f(e,t,r){let n;return"date"===t||"number"===t?("number"===t&&(e=new Date(e)),n=`TIMESTAMP'${r?e.getFullYear():e.getUTCFullYear()}-${d((r?e.getMonth():e.getUTCMonth())+1)}-${d(r?e.getDate():e.getUTCDate())} ${d(r?e.getHours():e.getUTCHours())}:${d(r?e.getMinutes():e.getUTCMinutes())}:${d(r?e.getSeconds():e.getUTCSeconds())}'`):n=e,n}function h(e,t){if(t instanceof Date)return"date";if("number"==typeof t)return"number";if("string"==typeof t){const n=e.getField(t);if("<now>"===t.toLowerCase())return;if(r.isDateField(n))return"field"}}e.castIntegerFieldToFloat=function(e){return`cast(${e} as float)`},e.dateTypes=["date","date-only","timestamp-offset"],e.defaultBasemapGroups=o,e.defaultStatisticTypes={exclude:["median"]},e.fieldDelimiter=",",e.formatAnyDate=function(e,r){const{format:n,timeZoneOptions:s,fieldType:o}=r??{};let l,c;if(s&&({timeZone:l,timeZoneName:c}=a.getTimeZoneFormattingOptions(s.layerTimeZone,s.datesInUnknownTimezone,s.viewTimeZone,t.convertDateFormatToIntlOptions(n||"short-date-short-time"),o)),"string"==typeof e&&isNaN(Date.parse("time-only"===o?`1970-01-01T${e}Z`:e)))return e;switch(o){case"date-only":{const r=t.convertDateFormatToIntlOptions(n||"short-date");return"string"==typeof e?t.formatDateOnly(e,{...r}):t.formatDate(e,{...r,timeZone:i.utc})}case"time-only":{const r=t.convertDateFormatToIntlOptions(n||"short-time");return"string"==typeof e?t.formatTimeOnly(e,r):t.formatDate(e,{...r,timeZone:i.utc})}case"timestamp-offset":{if(!l&&"string"==typeof e&&new Date(e).toISOString()!==e)return e;const r=n||s?t.convertDateFormatToIntlOptions(n||"short-date-short-time"):void 0,i=r?{...r,timeZone:l,timeZoneName:c}:void 0;return"string"==typeof e?t.formatTimestamp(e,i):t.formatDate(e,i)}default:{const r=n||s?t.convertDateFormatToIntlOptions(n||"short-date-short-time"):void 0;return t.formatDate("string"==typeof e?new Date(e):e,r?{...r,timeZone:l,timeZoneName:c}:void 0)}}},e.getBasemapGroup=function(e,t=o){for(const r in t)if(t[r].includes(e))return r},e.getBasemapId=function(e,t,r=!0){let s=null;return e&&("string"==typeof e?t.includes(e)&&(s=e):s=n.getWellKnownBasemapId(e)),r?s||"gray":s},e.getDateDiffSQL=function(e,t,r,n){const{hasQueryEngine:s}=e,i=`(${f(r,h(e,r),s)} - ${f(t,h(e,t),s)})`;let a=l[n],o="/";return a<1&&(a=1/a,o="*"),{sqlExpression:1===a?i:`(${i} ${o} ${a})`,sqlWhere:null}},e.getDateType=h,e.getFieldsList=async function(e){const{field:t,field2:r,field3:n,normalizationField:i,valueExpression:a}=e;let o=[];if(a){if(!u){const{arcadeUtils:e}=await s.loadArcade();u=e}o=u.extractFieldNames(a)}return t&&o.push(t),r&&o.push(r),n&&o.push(n),i&&o.push(i),o},e.getNormalizationType=function(e){let t=e.normalizationType;return t||(e.normalizationField?t="field":null!=e.normalizationTotal&&(t="percent-of-total")),t??void 0},e.isAnyDateField=function(e){return r.isDateField(e)||r.isDateOnlyField(e)||r.isTimestampOffsetField(e)},e.isIntegerField=function(e,t){const r=t&&e.getField(t);return!!r&&c.has(r.type)},e.unitValueInDays=l,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/basemapUtils":function(){define(["exports","../core/Collection","../core/maybe","../core/urlUtils","../layers/effects/utils","./basemapDefinitions"],function(e,t,r,n,s,i){"use strict";let a;function o(e){if(a)return a(e);let t=null;const r=d(e),n=!r?.baseLayers.length;for(const e in i.esriBasemapDefinitions){const s=g(r,m(i.esriBasemapDefinitions[e]),{mustMatchReferences:n});if("equal"===s){t=e;break}"base-layers-equal"===s&&(t=e)}return t}function l(e){if(u(e.url))return!0;if("vector-tile"===e.type)for(const t in e.sourceNameToSource){const r=e.sourceNameToSource[t];if(u(r?.sourceUrl))return!0}return!1}const c=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function u(e){if(!e)return!1;const t=new n.Url(n.makeAbsolute(e));return!!t.authority&&c.test(t.authority)}function d(e){return e?!e.loaded&&e.resourceInfo?m(e.resourceInfo.data):{baseLayers:f(e.baseLayers),referenceLayers:f(e.referenceLayers)}:null}function f(e){return(t.isCollection(e)?e.toArray():e).map(h)}function h(e){return{type:e.type,effect:"effect"in e?e.effect:void 0,url:M("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl||""),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible,sublayers:"map-image"!==e.type&&"wms"!==e.type||null==e.sublayers?void 0:e.sublayers?.map(e=>({id:e.id,visible:e.visible})),activeLayerId:"wmts"===e.type?e.activeLayer?.id:void 0}}function p(e){return e.isReference||"ArcGISSceneServiceLayer"===e.layerType}function m(e){return e?{baseLayers:y((e.baseMapLayers??[]).filter(e=>!p(e))),referenceLayers:y((e.baseMapLayers??[]).filter(e=>p(e)))}:null}function y(e){return e.map(e=>function(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;case"ArcGISSceneServiceLayer":t="scene";break;default:t="unknown"}return{type:t,effect:e.effect,url:M(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:e.minScale??0,maxScale:e.maxScale??0,opacity:e.opacity??1,visible:null==e.visibility||!!e.visibility,sublayers:void 0,activeLayerId:void 0}}(e))}function g(e,t,r){return null!=e!=(null!=t)?"not-equal":e&&t?b(e.baseLayers,t.baseLayers)?b(e.referenceLayers,t.referenceLayers)?"equal":r.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function b(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!v(e[r],t[r]))return!1;return!0}function v(e,t){if(e.type!==t.type||e.url!==t.url||e.minScale!==t.minScale||e.maxScale!==t.maxScale||e.visible!==t.visible||e.opacity!==t.opacity)return!1;if(!s.effectEquals(e.effect,t.effect))return!1;if(null!=e.activeLayerId||null!=t.activeLayerId)return e.activeLayerId===t.activeLayerId;if(null!=e.sublayers||null!=t.sublayers){if(null==e.sublayers||null==t.sublayers||e.sublayers.length!==t.sublayers.length)return!1;for(let r=0;r<e.sublayers.length;r++){const n=e.sublayers.at(r),s=t.sublayers.at(r);if(n?.id!==s?.id||n?.visible!==s?.visible)return!1}}return!0}function M(e){return e?n.normalize(e).replace(/^\s*https?:/i,"").toLowerCase():""}function S(e){return"portalItem"in e?e.portalItem?.thumbnailUrl:void 0}e.contentEquals=function(e,t){return e===t||null!=e?.portalItem?.id&&e.portalItem.id===t?.portalItem?.id||"equal"===g(d(e),d(t),{mustMatchReferences:!0})},e.findSpatialReference=function(e,t){if(null==t||null==e)return{spatialReference:null,updating:!1};if("not-loaded"===t.loadStatus)return t.load(),{spatialReference:null,updating:!0};if(t.spatialReference)return{spatialReference:t.spatialReference,updating:!1};if(0===t.baseLayers.length)return{spatialReference:null,updating:!1};const r=t.baseLayers.at(0);switch(r.loadStatus){case"not-loaded":r.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const n=(("supportedSpatialReferences"in r?r.supportedSpatialReferences:null)||["tileInfo"in r?r.tileInfo?.spatialReference:r.spatialReference]).filter(Boolean),s=e.spatialReference;return s?{spatialReference:n.find(e=>s.equals(e))??n[0]??null,updating:!1}:{spatialReference:n[0],updating:!1}},e.getBasemapThumbnailUrl=function(e){if(!e)return null;const{thumbnailUrl:t}=e;if(t)return t;const n=o(e);return n?i.esriBasemapDefinitions[n].thumbnailUrl:r.mappedFind(e.baseLayers,S)},e.getWellKnownBasemapId=o,e.hasDeveloperBasemapLayer=function(e){return!!e?.baseLayers.concat(e.referenceLayers).some(l)},e.isBasemap3D=function(e){return"Web Scene"===e.portalItem?.type||e.referenceLayers.some(e=>"scene"===e.type)},e.isBasemapInBeta=function(e){return!!e?.portalItem?.tags?.some(e=>"beta"===e.toLowerCase())},e.isBasemapLayerView=function(e,t){const r=e.allLayerViews.find(e=>e.uid===t);return r?.layer.parent===e.map?.basemap},e.isDeveloperBasemapLayer=l,e.layerDefinitionEquals=v,e.layerToDefinition=h,e.overrideGetWellKnownBasemapId=function(e){a=e},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/Collection":function(){define(["../chunks/tslib.es6","./ArrayPool","./Evented","./handleUtils","./lang","./ObjectPool","./scheduling","./accessorSupport/ensureType","./accessorSupport/tracking","./accessorSupport/decorators/property","./accessorSupport/decorators/shared","./accessorSupport/decorators/subclass","./accessorSupport/tracking/SimpleObservable","./support/jsonUtils"],function(e,t,r,n,s,i,a,o,l,c,u,d,f,h){"use strict";var p;class m{constructor(e,t,r,n,s){this.target=e,this.added=t,this.removed=r,this.start=n,this.deleteCount=s}}const y=new i(class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function g(e){e&&"object"==typeof e&&"destroy"in e&&"function"==typeof e.destroy&&e.destroy()}function b(e){return e?e instanceof A?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function v(e){if(e?.length)return e[0]}function M(e,t,r,n){const s=Math.min(e.length-r,t.length-n);let i=0;for(;i<s&&e[r+i]===t[n+i];)i++;return i}function S(e,t,r,n){t&&t.forEach((t,s,i)=>{e.push(t),S(e,r.call(n,t,s,i),r,n)})}const _=new Set,T=new Set,x=new Set,I=new Map;let w=0,A=class extends r.EventedAccessor{static{p=this}static{this.ofType=t=>{if(!t)return p;if(I.has(t))return I.get(t);let r=null;if("function"==typeof t)r=t.prototype.declaredClass;else if(t.base)r=t.base.prototype.declaredClass;else for(const e in t.typeMap){const n=t.typeMap[e].prototype.declaredClass;r?r+=` | ${n}`:r=n}let n=class extends p{};return e.__decorate([u.shared({Type:t,ensureType:"function"==typeof t?o.ensureType(t):o.ensureOneOfType(t)})],n.prototype,"itemType",void 0),n=e.__decorate([d.subclass(`esri.core.Collection<${r}>`)],n),I.set(t,n),n}}static isCollection(e){return null!=e&&e instanceof p}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new f.SimpleObservable,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:w++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof p?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),super.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return l.trackAccess(this._observable),this._items}set items(e){this._emitBeforeChanges(1)||(this._splice(0,this.length,b(e)),this._emitAfterChanges(1))}hasEventListener(e){return!this.destroyed&&("change"===e?this._chgListeners.length>0:super.hasEventListener(e))}on(e,t){if(this.destroyed)return n.makeHandle();if("change"===e){const e=this._chgListeners,r={removed:!1,callback:t};return e.push(r),this._notifications&&this._notifications.push({listeners:e.slice(),items:this._items.slice(),changes:[]}),n.makeHandle(()=>{r.removed=!0,e.splice(e.indexOf(r),1)})}return super.on(e,t)}once(e,t){const r="deref"in t?()=>t.deref():()=>t,n=this.on(e,e=>{r()?.call(null,e),n.remove()});return n}add(e,t){if(l.trackAccess(this._observable),this._emitBeforeChanges(1))return this;const r=this.getNextIndex(t??null);return this._splice(r,0,[e]),this._emitAfterChanges(1),this}addMany(e,t=this._items.length){if(l.trackAccess(this._observable),!e?.length)return this;if(this._emitBeforeChanges(1))return this;const r=this.getNextIndex(t);return this._splice(r,0,b(e)),this._emitAfterChanges(1),this}at(e){if(l.trackAccess(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(l.trackAccess(this._observable),!this.length||this._emitBeforeChanges(2))return[];const e=this._removeAllRaw();return this._emitAfterChanges(2),e}_removeAllRaw(){return 0===this.length?[]:this._splice(0,this.length)||[]}clone(){return l.trackAccess(this._observable),this._createNewInstance({items:this._items.map(s.clone)})}concat(...e){l.trackAccess(this._observable);const t=e.map(b);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(l.trackAccess(this._observable),!this.length||this._emitBeforeChanges(2))return;const r=this._splice(0,this.length),n=r.length;for(let s=0;s<n;s++)e.call(t,r[s],s,r);this._emitAfterChanges(2)}destroyAll(){this.drain(g)}destroyMany(e){const t=this.removeMany(e);return t.forEach(g),t}every(e,t){return l.trackAccess(this._observable),this._items.every(e,t)}filter(e,t){l.trackAccess(this._observable);const r=2===arguments.length?this._items.filter(e,t):this._items.filter(e);return this._createNewInstance({items:r})}find(e,t){return l.trackAccess(this._observable),this._items.find(e,t)}findIndex(e,t){return l.trackAccess(this._observable),this._items.findIndex(e,t)}flatten(e,t){l.trackAccess(this._observable);const r=[];return S(r,this,e,t),new p(r)}forEach(e,t){return l.trackAccess(this._observable),this._items.forEach(e,t)}getItemAt(e){return l.trackAccess(this._observable),this._items[e]}getNextIndex(e){l.trackAccess(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return l.trackAccess(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return l.trackAccess(this._observable),this._items.indexOf(e,t)}join(e=","){return l.trackAccess(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return l.trackAccess(this._observable),this._items.lastIndexOf(e,t)}map(e,t){l.trackAccess(this._observable);const r=this._items.map(e,t);return new p({items:r})}reorder(e,t=this.length-1){l.trackAccess(this._observable);const r=this.indexOf(e);if(-1!==r){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(4))return e;this._splice(r,1),this._splice(t,0,[e]),this._emitAfterChanges(4)}return e}}pop(){if(l.trackAccess(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=v(this._splice(this.length-1,1));return this._emitAfterChanges(2),e}push(...e){return l.trackAccess(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,e),this._emitAfterChanges(1)),this.length}reduce(e,t){l.trackAccess(this._observable);const r=this._items;return 2===arguments.length?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){l.trackAccess(this._observable);const r=this._items;return 2===arguments.length?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return l.trackAccess(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(l.trackAccess(this._observable),e<0||e>=this.length||this._emitBeforeChanges(2))return;const t=v(this._splice(e,1));return this._emitAfterChanges(2),t}removeMany(e){if(l.trackAccess(this._observable),!e?.length||this._emitBeforeChanges(2))return[];const t=e instanceof p?e.toArray():e,r=this._items,n=[],s=t.length;for(let e=0;e<s;e++){const s=t[e],i=r.indexOf(s);if(i>-1){const s=1+M(t,r,e+1,i+1),a=this._splice(i,s);a&&a.length>0&&n.push.apply(n,a),e+=s-1}}return this._emitAfterChanges(2),n}reverse(){if(l.trackAccess(this._observable),this._emitBeforeChanges(4))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(4),this}shift(){if(l.trackAccess(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=v(this._splice(0,1));return this._emitAfterChanges(2),e}slice(e=0,t=this.length){return l.trackAccess(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return l.trackAccess(this._observable),this._items.some(e,t)}sort(e){if(l.trackAccess(this._observable),!this.length||this._emitBeforeChanges(4)||!this._requiresSort(e))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(4),this}_requiresSort(e=(e,t)=>e===t?0:e<t?-1:1){const t=this.length-1;for(let r=0;r<t;r++)if(e(this.items[r],this.items[r+1])>0)return!0;return!1}splice(e,t,...r){l.trackAccess(this._observable),1===arguments.length&&(t=this.length),t??=0;const n=(t?2:0)|(r.length?1:0);if(this._emitBeforeChanges(n))return[];const s=this._splice(e,t,r)||[];return this._emitAfterChanges(n),s}toArray(){return l.trackAccess(this._observable),this._items.slice()}toJSON(e){return l.trackAccess(this._observable),this.toArray().map(t=>h.isSerializable(t)?t.toJSON(e):t)}toLocaleString(){return l.trackAccess(this._observable),this._items.toLocaleString()}toString(){return l.trackAccess(this._observable),this._items.toString()}unshift(...e){return l.trackAccess(this._observable),!e.length||this._emitBeforeChanges(1)||(this._splice(0,0,e),this._emitAfterChanges(1)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,r){const n=this._items,s=this.itemType;let i,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=a.schedule(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(o=n.splice(e,t),this.hasEventListener("before-remove")){const t=y.acquire();t.target=this,t.cancellable=!0;for(let r=0,s=o.length;r<s;r++)i=o[r],t.reset(i),this.emit("before-remove",t),t.defaultPrevented&&(o.splice(r,1),n.splice(e,0,i),e+=1,r-=1,s-=1);y.release(t)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const e=y.acquire();e.target=this,e.cancellable=!1;const t=o.length;for(let r=0;r<t;r++)e.reset(o[r]),this.emit("after-remove",e);y.release(e)}}if(r?.length){if(s){const e=[];for(const t of r){const r=s.ensureType(t);null==r&&null!=t||e.push(r)}r=e}const t=this.hasEventListener("before-add"),i=this.hasEventListener("after-add"),a=e===this.length;if(t||i){const s=y.acquire();s.target=this,s.cancellable=!0;const o=y.acquire();o.target=this,o.cancellable=!1;for(const l of r)t?(s.reset(l),this.emit("before-add",s),s.defaultPrevented||(a?n.push(l):n.splice(e++,0,l),this._set("length",n.length),i&&(o.reset(l),this.emit("after-add",o)))):(a?n.push(l):n.splice(e++,0,l),this._set("length",n.length),o.reset(l),this.emit("after-add",o));y.release(o),y.release(s)}else{if(a)for(const e of r)n.push(e);else n.splice(e,0,...r);this._set("length",n.length)}}if((r?.length||o?.length)&&this._notifyChangeEvent(r,o),this.hasEventListener("after-splice")){const n=new m(this,r,o,e,t);this.emit("after-splice",n)}return o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=y.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,y.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=y.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),y.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const r of e){const e=r.changes;_.clear(),T.clear(),x.clear();for(const{added:t,removed:r}of e){if(t)if(0===x.size&&0===T.size)for(const e of t)_.add(e);else for(const e of t)T.has(e)?(x.add(e),T.delete(e)):x.has(e)||_.add(e);if(r)if(0===x.size&&0===_.size)for(const e of r)T.add(e);else for(const e of r)_.has(e)?_.delete(e):(x.delete(e),T.add(e))}const n=t.acquire();_.forEach(e=>{n.push(e)});const s=t.acquire();T.forEach(e=>{s.push(e)});const i=this._items,a=r.items,o=t.acquire();if(x.forEach(e=>{a.indexOf(e)!==i.indexOf(e)&&o.push(e)}),r.listeners&&(n.length||s.length||o.length)){const e={target:this,added:n,removed:s,moved:o},t=r.listeners.length;for(let n=0;n<t;n++){const t=r.listeners[n];t.removed||t.callback.call(this,e)}}t.release(n),t.release(s),t.release(o)}_.clear(),T.clear(),x.clear()}};return e.__decorate([c.property()],A.prototype,"_updating",void 0),e.__decorate([c.property()],A.prototype,"length",void 0),e.__decorate([c.property()],A.prototype,"items",null),e.__decorate([c.property({readOnly:!0})],A.prototype,"updating",null),A=p=e.__decorate([d.subclass("esri.core.Collection")],A),A})},"esri/core/Evented":function(){define(["exports","./Accessor","./handleUtils"],function(e,t,r){"use strict";const n=e=>{const t=e;return class extends t{constructor(){super(...arguments),this._listenersMap=null}clearEvents(){this._listenersMap?.clear(),this._listenersMap=null}destroy(){this.clearEvents()}emit(e,t){let r=this._listenersMap?.get(e);if(!r)return!1;let n=!1;for(const e of r.slice()){const r="deref"in e?e.deref():e;r?r?.call(this,t):n=!0}return n&&(r=r.filter(e=>!("deref"in e)||null!=e.deref()),this._listenersMap.set(e,r)),r.length>0}on(e,t){if(Array.isArray(e)){const n=e.map(e=>this.on(e,t));return r.handlesGroup(n)}if(e.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??=new Map;const n=this._listenersMap.get(e)||[];return n.push(t),this._listenersMap.set(e,n),r.makeHandle(()=>{const r=this._listenersMap?.get(e),n=r?.indexOf(t)??-1;n>=0&&r.splice(n,1)})}once(e,t){const r=this.on(e,e=>{r.remove();const n="deref"in t?t.deref():t;n?.call(null,e)});return r}hasEventListener(e){const t=this._listenersMap?.get(e);return null!=t&&t.length>0}}},s=n(class{}),i=s,a=n(t);e.EventEmitter=i,e.Evented=s,e.EventedAccessor=a,e.EventedMixin=n,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/decorators/shared":function(){define(["exports"],function(e){"use strict";e.shared=function(e){return(t,r)=>{t[r]=e}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/utils":function(){define(["exports","./effects"],function(e,t){"use strict";e.canInterpolateEffects=function(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every((e,t)=>e.type===r[t].type)},e.effectEquals=function(e,t){return JSON.stringify(e??null)===JSON.stringify(t??null)},e.isEffectFunctions=function(e){const t=e[0];return!!t&&"type"in t},e.normalizeEffects=function(e,r){const n=e.length>r.length?e:r,s=e.length>r.length?r:e;for(let e=s.length;e<n.length;e++)s.push(t.createEffectWithInitialValues(n[e]))},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/effects":function(){define(["exports","../../colorUtils","../../core/screenUtils","../../core/libs/gl-matrix-2/factories/mat4f32","./colorMatrixFunctions"],function(e,t,r,n,s){"use strict";class i{constructor(e,t,r){this.strength=e,this.radius=t,this.threshold=r,this.type="bloom"}interpolate(e,t,r){this.strength=d(e.strength,t.strength,r),this.radius=d(e.radius,t.radius,r),this.threshold=d(e.threshold,t.threshold,r)}clone(){return new i(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:f(this.radius),strength:this.strength,threshold:this.threshold}}}class a{constructor(e){this.radius=e,this.type="blur"}interpolate(e,t,r){this.radius=Math.round(d(e.radius,t.radius,r))}clone(){return new a(this.radius)}toJSON(){return{type:"blur",radius:f(this.radius)}}}class o{constructor(e,t){this.type=e,this.amount=t,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,t,r){this.amount=d(e.amount,t.amount,r),this._updateMatrix()}clone(){return new o(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||n.create();switch(this.type){case"brightness":this._colorMatrix=s.brightness(e,this.amount);break;case"contrast":this._colorMatrix=s.contrast(e,this.amount);break;case"grayscale":this._colorMatrix=s.grayscale(e,this.amount);break;case"invert":this._colorMatrix=s.invert(e,this.amount);break;case"saturate":this._colorMatrix=s.saturate(e,this.amount);break;case"sepia":this._colorMatrix=s.sepia(e,this.amount)}}}class l{constructor(e,t,r,n){this.offsetX=e,this.offsetY=t,this.blurRadius=r,this.color=n,this.type="drop-shadow"}interpolate(e,t,r){this.offsetX=d(e.offsetX,t.offsetX,r),this.offsetY=d(e.offsetY,t.offsetY,r),this.blurRadius=d(e.blurRadius,t.blurRadius,r),this.color[0]=Math.round(d(e.color[0],t.color[0],r)),this.color[1]=Math.round(d(e.color[1],t.color[1],r)),this.color[2]=Math.round(d(e.color[2],t.color[2],r)),this.color[3]=d(e.color[3],t.color[3],r)}clone(){return new l(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:f(this.offsetX),yoffset:f(this.offsetY),blurRadius:f(this.blurRadius),color:e}}}class c{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,t,r){this.angle=d(e.angle,t.angle,r),this._updateMatrix()}clone(){return new c(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||n.create();this._colorMatrix=s.rotateHue(e,this.angle)}}class u{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,t,r){this.amount=d(e.amount,t.amount,r)}clone(){return new u(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function d(e,t,r){return e+(t-e)*r}function f(e){return Math.round(1e3*r.px2pt(e))/1e3}e.BloomEffect=i,e.BlurEffect=a,e.ColorMatrixEffect=o,e.DropShadowEffect=l,e.HueRotateEffect=c,e.OpacityEffect=u,e.createEffectWithInitialValues=function(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new o(e.type,0);case"saturate":case"brightness":case"contrast":return new o(e.type,1);case"opacity":return new u(1);case"hue-rotate":return new c(0);case"blur":return new a(0);case"drop-shadow":return new l(0,0,0,[...t.getNamedColor("transparent")]);case"bloom":return new i(0,0,1)}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["exports"],function(e){"use strict";function t(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function r(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function n(e,t,r,n,s,i,a,o,l,c,u,d,f,h,p,m){const y=new Float32Array(16);return y[0]=e,y[1]=t,y[2]=r,y[3]=n,y[4]=s,y[5]=i,y[6]=a,y[7]=o,y[8]=l,y[9]=c,y[10]=u,y[11]=d,y[12]=f,y[13]=h,y[14]=p,y[15]=m,y}const s=t(),i=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:r,create:t,fromValues:n},Symbol.toStringTag,{value:"Module"}));e.IDENTITY=s,e.clone=r,e.create=t,e.fromValues=n,e.mat4f32=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/colorMatrixFunctions":function(){define(["exports","../../core/libs/gl-matrix-2/math/mat4"],function(e,t){"use strict";e.brightness=(e,r)=>{const n=t.set(e,r,0,0,0,0,r,0,0,0,0,r,0,0,0,0,1);return t.transpose(n,n)},e.contrast=(e,r)=>{const n=t.set(e,r,0,0,.5-.5*r,0,r,0,.5-.5*r,0,0,r,.5-.5*r,0,0,0,1);return t.transpose(n,n)},e.grayscale=(e,r)=>{const n=1-r,s=t.set(e,.2126+.7874*n,.7152-.7152*n,.0722-.0722*n,0,.2126-.2126*n,.7152+.2848*n,.0722-.0722*n,0,.2126-.2126*n,.7152-.7152*n,.0722+.9278*n,0,0,0,0,1);return t.transpose(s,s)},e.invert=(e,r)=>{const n=1-2*r,s=r,i=t.set(e,n,0,0,s,0,n,0,s,0,0,n,s,0,0,0,1);return t.transpose(i,i)},e.rotateHue=(e,r)=>{const n=Math.sin(r*Math.PI/180),s=Math.cos(r*Math.PI/180),i=t.set(e,.213+.787*s-.213*n,.715-.715*s-.715*n,.072-.072*s+.928*n,0,.213-.213*s+.143*n,.715+.285*s+.14*n,.072-.072*s-.283*n,0,.213-.213*s-.787*n,.715-.715*s+.715*n,.072+.928*s+.072*n,0,0,0,0,1);return t.transpose(i,i)},e.saturate=(e,r)=>{const n=r,s=t.set(e,.213+.787*n,.715-.715*n,.072-.072*n,0,.213-.213*n,.715+.285*n,.072-.072*n,0,.213-.213*n,.715-.715*n,.072+.928*n,0,0,0,0,1);return t.transpose(s,s)},e.sepia=(e,r)=>{const n=1-r,s=t.set(e,.393+.607*n,.769-.769*n,.189-.189*n,0,.349-.349*n,.686+.314*n,.168-.168*n,0,.272-.272*n,.534-.534*n,.131+.869*n,0,0,0,0,1);return t.transpose(s,s)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["exports","../factories/vec3f64","./common"],function(e,t,r){"use strict";function n(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function s(e,t,r,n,s,i,a,o,l,c,u,d,f,h,p,m,y){return e[0]=t,e[1]=r,e[2]=n,e[3]=s,e[4]=i,e[5]=a,e[6]=o,e[7]=l,e[8]=c,e[9]=u,e[10]=d,e[11]=f,e[12]=h,e[13]=p,e[14]=m,e[15]=y,e}function i(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function a(e,t){if(e===t){const r=t[1],n=t[2],s=t[3],i=t[6],a=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=i,e[11]=t[14],e[12]=s,e[13]=a,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function o(e,t){return l(e,t)||i(e),e}function l(e,t){const r=t[0],n=t[1],s=t[2],i=t[3],a=t[4],o=t[5],l=t[6],c=t[7],u=t[8],d=t[9],f=t[10],h=t[11],p=t[12],m=t[13],y=t[14],g=t[15],b=r*o-n*a,v=r*l-s*a,M=r*c-i*a,S=n*l-s*o,_=n*c-i*o,T=s*c-i*l,x=u*m-d*p,I=u*y-f*p,w=u*g-h*p,A=d*y-f*m,L=d*g-h*m,z=f*g-h*y;let V=b*z-v*L+M*A+S*w-_*I+T*x;return V?(V=1/V,e[0]=(o*z-l*L+c*A)*V,e[1]=(s*L-n*z-i*A)*V,e[2]=(m*T-y*_+g*S)*V,e[3]=(f*_-d*T-h*S)*V,e[4]=(l*w-a*z-c*I)*V,e[5]=(r*z-s*w+i*I)*V,e[6]=(y*M-p*T-g*v)*V,e[7]=(u*T-f*M+h*v)*V,e[8]=(a*L-o*w+c*x)*V,e[9]=(n*w-r*L-i*x)*V,e[10]=(p*_-m*M+g*b)*V,e[11]=(d*M-u*_-h*b)*V,e[12]=(o*I-a*A-l*x)*V,e[13]=(r*A-n*I+s*x)*V,e[14]=(m*v-p*S-y*b)*V,e[15]=(u*S-d*v+f*b)*V,e):null}function c(e,t){const r=t[0],n=t[1],s=t[2],i=t[3],a=t[4],o=t[5],l=t[6],c=t[7],u=t[8],d=t[9],f=t[10],h=t[11],p=t[12],m=t[13],y=t[14],g=t[15];return e[0]=o*(f*g-h*y)-d*(l*g-c*y)+m*(l*h-c*f),e[1]=-(n*(f*g-h*y)-d*(s*g-i*y)+m*(s*h-i*f)),e[2]=n*(l*g-c*y)-o*(s*g-i*y)+m*(s*c-i*l),e[3]=-(n*(l*h-c*f)-o*(s*h-i*f)+d*(s*c-i*l)),e[4]=-(a*(f*g-h*y)-u*(l*g-c*y)+p*(l*h-c*f)),e[5]=r*(f*g-h*y)-u*(s*g-i*y)+p*(s*h-i*f),e[6]=-(r*(l*g-c*y)-a*(s*g-i*y)+p*(s*c-i*l)),e[7]=r*(l*h-c*f)-a*(s*h-i*f)+u*(s*c-i*l),e[8]=a*(d*g-h*m)-u*(o*g-c*m)+p*(o*h-c*d),e[9]=-(r*(d*g-h*m)-u*(n*g-i*m)+p*(n*h-i*d)),e[10]=r*(o*g-c*m)-a*(n*g-i*m)+p*(n*c-i*o),e[11]=-(r*(o*h-c*d)-a*(n*h-i*d)+u*(n*c-i*o)),e[12]=-(a*(d*y-f*m)-u*(o*y-l*m)+p*(o*f-l*d)),e[13]=r*(d*y-f*m)-u*(n*y-s*m)+p*(n*f-s*d),e[14]=-(r*(o*y-l*m)-a*(n*y-s*m)+p*(n*l-s*o)),e[15]=r*(o*f-l*d)-a*(n*f-s*d)+u*(n*l-s*o),e}function u(e){const t=e[0],r=e[1],n=e[2],s=e[3],i=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=e[9],d=e[10],f=e[11],h=e[12],p=e[13],m=e[14],y=e[15];return(t*a-r*i)*(d*y-f*m)-(t*o-n*i)*(u*y-f*p)+(t*l-s*i)*(u*m-d*p)+(r*o-n*a)*(c*y-f*h)-(r*l-s*a)*(c*m-d*h)+(n*l-s*o)*(c*p-u*h)}function d(e,t,r){const n=t[0],s=t[1],i=t[2],a=t[3],o=t[4],l=t[5],c=t[6],u=t[7],d=t[8],f=t[9],h=t[10],p=t[11],m=t[12],y=t[13],g=t[14],b=t[15];let v=r[0],M=r[1],S=r[2],_=r[3];return e[0]=v*n+M*o+S*d+_*m,e[1]=v*s+M*l+S*f+_*y,e[2]=v*i+M*c+S*h+_*g,e[3]=v*a+M*u+S*p+_*b,v=r[4],M=r[5],S=r[6],_=r[7],e[4]=v*n+M*o+S*d+_*m,e[5]=v*s+M*l+S*f+_*y,e[6]=v*i+M*c+S*h+_*g,e[7]=v*a+M*u+S*p+_*b,v=r[8],M=r[9],S=r[10],_=r[11],e[8]=v*n+M*o+S*d+_*m,e[9]=v*s+M*l+S*f+_*y,e[10]=v*i+M*c+S*h+_*g,e[11]=v*a+M*u+S*p+_*b,v=r[12],M=r[13],S=r[14],_=r[15],e[12]=v*n+M*o+S*d+_*m,e[13]=v*s+M*l+S*f+_*y,e[14]=v*i+M*c+S*h+_*g,e[15]=v*a+M*u+S*p+_*b,e}function f(e,t,r){const n=r[0],s=r[1],i=r[2];if(t===e)e[12]=t[0]*n+t[4]*s+t[8]*i+t[12],e[13]=t[1]*n+t[5]*s+t[9]*i+t[13],e[14]=t[2]*n+t[6]*s+t[10]*i+t[14],e[15]=t[3]*n+t[7]*s+t[11]*i+t[15];else{const r=t[0],a=t[1],o=t[2],l=t[3],c=t[4],u=t[5],d=t[6],f=t[7],h=t[8],p=t[9],m=t[10],y=t[11];e[0]=r,e[1]=a,e[2]=o,e[3]=l,e[4]=c,e[5]=u,e[6]=d,e[7]=f,e[8]=h,e[9]=p,e[10]=m,e[11]=y,e[12]=r*n+c*s+h*i+t[12],e[13]=a*n+u*s+p*i+t[13],e[14]=o*n+d*s+m*i+t[14],e[15]=l*n+f*s+y*i+t[15]}return e}function h(e,t,r){const n=r[0],s=r[1],i=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function p(e,t,s,i){let a=i[0],o=i[1],l=i[2],c=Math.sqrt(a*a+o*o+l*l);if(c<=r.getEpsilon())return void n(e,t);c=1/c,a*=c,o*=c,l*=c;const u=Math.sin(s),d=Math.cos(s),f=1-d,h=t[0],p=t[1],m=t[2],y=t[3],g=t[4],b=t[5],v=t[6],M=t[7],S=t[8],_=t[9],T=t[10],x=t[11],I=a*a*f+d,w=o*a*f+l*u,A=l*a*f-o*u,L=a*o*f-l*u,z=o*o*f+d,V=l*o*f+a*u,k=a*l*f+o*u,D=o*l*f-a*u,O=l*l*f+d;e[0]=h*I+g*w+S*A,e[1]=p*I+b*w+_*A,e[2]=m*I+v*w+T*A,e[3]=y*I+M*w+x*A,e[4]=h*L+g*z+S*V,e[5]=p*L+b*z+_*V,e[6]=m*L+v*z+T*V,e[7]=y*L+M*z+x*V,e[8]=h*k+g*D+S*O,e[9]=p*k+b*D+_*O,e[10]=m*k+v*D+T*O,e[11]=y*k+M*D+x*O,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function m(e,t,r){const n=Math.sin(r),s=Math.cos(r),i=t[4],a=t[5],o=t[6],l=t[7],c=t[8],u=t[9],d=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*s+c*n,e[5]=a*s+u*n,e[6]=o*s+d*n,e[7]=l*s+f*n,e[8]=c*s-i*n,e[9]=u*s-a*n,e[10]=d*s-o*n,e[11]=f*s-l*n,e}function y(e,t,r){const n=Math.sin(r),s=Math.cos(r),i=t[0],a=t[1],o=t[2],l=t[3],c=t[8],u=t[9],d=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*s-c*n,e[1]=a*s-u*n,e[2]=o*s-d*n,e[3]=l*s-f*n,e[8]=i*n+c*s,e[9]=a*n+u*s,e[10]=o*n+d*s,e[11]=l*n+f*s,e}function g(e,t,r){const n=Math.sin(r),s=Math.cos(r),i=t[0],a=t[1],o=t[2],l=t[3],c=t[4],u=t[5],d=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*s+c*n,e[1]=a*s+u*n,e[2]=o*s+d*n,e[3]=l*s+f*n,e[4]=c*s-i*n,e[5]=u*s-a*n,e[6]=d*s-o*n,e[7]=f*s-l*n,e}function b(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function v(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function M(e,t,n){if(0===t)return i(e);let s=n[0],a=n[1],o=n[2],l=Math.sqrt(s*s+a*a+o*o);if(l<=r.getEpsilon())return null;l=1/l,s*=l,a*=l,o*=l;const c=Math.sin(t),u=Math.cos(t),d=1-u;return e[0]=s*s*d+u,e[1]=a*s*d+o*c,e[2]=o*s*d-a*c,e[3]=0,e[4]=s*a*d-o*c,e[5]=a*a*d+u,e[6]=o*a*d+s*c,e[7]=0,e[8]=s*o*d+a*c,e[9]=a*o*d-s*c,e[10]=o*o*d+u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function S(e,t){const r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _(e,t){const r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function T(e,t){const r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function x(e,t,r){const n=t[0],s=t[1],i=t[2],a=t[3],o=n+n,l=s+s,c=i+i,u=n*o,d=n*l,f=n*c,h=s*l,p=s*c,m=i*c,y=a*o,g=a*l,b=a*c;return e[0]=1-(h+m),e[1]=d+b,e[2]=f-g,e[3]=0,e[4]=d-b,e[5]=1-(u+m),e[6]=p+y,e[7]=0,e[8]=f+g,e[9]=p-y,e[10]=1-(u+h),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function I(e,t){const r=w,n=-t[0],s=-t[1],i=-t[2],a=t[3],o=t[4],l=t[5],c=t[6],u=t[7],d=n*n+s*s+i*i+a*a;return d>0?(r[0]=2*(o*a+u*n+l*i-c*s)/d,r[1]=2*(l*a+u*s+c*n-o*i)/d,r[2]=2*(c*a+u*i+o*s-l*n)/d):(r[0]=2*(o*a+u*n+l*i-c*s),r[1]=2*(l*a+u*s+c*n-o*i),r[2]=2*(c*a+u*i+o*s-l*n)),x(e,t,r),e}const w=t.create();function A(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function L(e,t){const r=t[0],n=t[1],s=t[2],i=t[4],a=t[5],o=t[6],l=t[8],c=t[9],u=t[10];return e[0]=Math.sqrt(r*r+n*n+s*s),e[1]=Math.sqrt(i*i+a*a+o*o),e[2]=Math.sqrt(l*l+c*c+u*u),e}function z(e,t){const r=t[0]+t[5]+t[10];let n=0;return r>0?(n=2*Math.sqrt(r+1),e[3]=.25*n,e[0]=(t[6]-t[9])/n,e[1]=(t[8]-t[2])/n,e[2]=(t[1]-t[4])/n):t[0]>t[5]&&t[0]>t[10]?(n=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/n,e[0]=.25*n,e[1]=(t[1]+t[4])/n,e[2]=(t[8]+t[2])/n):t[5]>t[10]?(n=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/n,e[0]=(t[1]+t[4])/n,e[1]=.25*n,e[2]=(t[6]+t[9])/n):(n=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/n,e[0]=(t[8]+t[2])/n,e[1]=(t[6]+t[9])/n,e[2]=.25*n),e}function V(e,t,r,n){const s=t[0],i=t[1],a=t[2],o=t[3],l=s+s,c=i+i,u=a+a,d=s*l,f=s*c,h=s*u,p=i*c,m=i*u,y=a*u,g=o*l,b=o*c,v=o*u,M=n[0],S=n[1],_=n[2];return e[0]=(1-(p+y))*M,e[1]=(f+v)*M,e[2]=(h-b)*M,e[3]=0,e[4]=(f-v)*S,e[5]=(1-(d+y))*S,e[6]=(m+g)*S,e[7]=0,e[8]=(h+b)*_,e[9]=(m-g)*_,e[10]=(1-(d+p))*_,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function k(e,t,r,n,s){const i=t[0],a=t[1],o=t[2],l=t[3],c=i+i,u=a+a,d=o+o,f=i*c,h=i*u,p=i*d,m=a*u,y=a*d,g=o*d,b=l*c,v=l*u,M=l*d,S=n[0],_=n[1],T=n[2],x=s[0],I=s[1],w=s[2],A=(1-(m+g))*S,L=(h+M)*S,z=(p-v)*S,V=(h-M)*_,k=(1-(f+g))*_,D=(y+b)*_,O=(p+v)*T,F=(y-b)*T,C=(1-(f+m))*T;return e[0]=A,e[1]=L,e[2]=z,e[3]=0,e[4]=V,e[5]=k,e[6]=D,e[7]=0,e[8]=O,e[9]=F,e[10]=C,e[11]=0,e[12]=r[0]+x-(A*x+V*I+O*w),e[13]=r[1]+I-(L*x+k*I+F*w),e[14]=r[2]+w-(z*x+D*I+C*w),e[15]=1,e}function D(e,t){const r=t[0],n=t[1],s=t[2],i=t[3],a=r+r,o=n+n,l=s+s,c=r*a,u=n*a,d=n*o,f=s*a,h=s*o,p=s*l,m=i*a,y=i*o,g=i*l;return e[0]=1-d-p,e[1]=u+g,e[2]=f-y,e[3]=0,e[4]=u-g,e[5]=1-c-p,e[6]=h+m,e[7]=0,e[8]=f+y,e[9]=h-m,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function O(e,t,r,n,s,i,a){const o=1/(r-t),l=1/(s-n),c=1/(i-a);return e[0]=2*i*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*l,e[6]=0,e[7]=0,e[8]=(r+t)*o,e[9]=(s+n)*l,e[10]=(a+i)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*i*2*c,e[15]=0,e}function F(e,t,r,n,s){const i=1/Math.tan(t/2);let a;return e[0]=i/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=s&&s!==1/0?(a=1/(n-s),e[10]=(s+n)*a,e[14]=2*s*n*a):(e[10]=-1,e[14]=-2*n),e}function C(e,t,r,n){const s=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),l=2/(a+o),c=2/(s+i);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(a-o)*l*.5,e[9]=(s-i)*c*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}function N(e,t,r,n,s,i,a){const o=1/(t-r),l=1/(n-s),c=1/(i-a);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*o,e[13]=(s+n)*l,e[14]=(a+i)*c,e[15]=1,e}function U(e,t,n,s){const a=t[0],o=t[1],l=t[2];let c=a-n[0],u=o-n[1],d=l-n[2];const f=r.getEpsilon();if(Math.abs(c)<f&&Math.abs(u)<f&&Math.abs(d)<f)return void i(e);let h=1/Math.sqrt(c*c+u*u+d*d);c*=h,u*=h,d*=h;const p=s[0],m=s[1],y=s[2];let g=m*d-y*u,b=y*c-p*d,v=p*u-m*c;h=Math.sqrt(g*g+b*b+v*v),h?(h=1/h,g*=h,b*=h,v*=h):(g=0,b=0,v=0);let M=u*v-d*b,S=d*g-c*v,_=c*b-u*g;h=Math.sqrt(M*M+S*S+_*_),h?(h=1/h,M*=h,S*=h,_*=h):(M=0,S=0,_=0),e[0]=g,e[1]=M,e[2]=c,e[3]=0,e[4]=b,e[5]=S,e[6]=u,e[7]=0,e[8]=v,e[9]=_,e[10]=d,e[11]=0,e[12]=-(g*a+b*o+v*l),e[13]=-(M*a+S*o+_*l),e[14]=-(c*a+u*o+d*l),e[15]=1}function P(e,t,r,n){const s=t[0],i=t[1],a=t[2],o=n[0],l=n[1],c=n[2];let u=s-r[0],d=i-r[1],f=a-r[2],h=u*u+d*d+f*f;h>0&&(h=1/Math.sqrt(h),u*=h,d*=h,f*=h);let p=l*f-c*d,m=c*u-o*f,y=o*d-l*u;return h=p*p+m*m+y*y,h>0&&(h=1/Math.sqrt(h),p*=h,m*=h,y*=h),e[0]=p,e[1]=m,e[2]=y,e[3]=0,e[4]=d*y-f*m,e[5]=f*p-u*y,e[6]=u*m-d*p,e[7]=0,e[8]=u,e[9]=d,e[10]=f,e[11]=0,e[12]=s,e[13]=i,e[14]=a,e[15]=1,e}function q(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function E(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function B(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function R(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function j(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function G(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e}function $(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Z(e,t){if(e===t)return!0;const n=e[0],s=e[1],i=e[2],a=e[3],o=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=e[9],h=e[10],p=e[11],m=e[12],y=e[13],g=e[14],b=e[15],v=t[0],M=t[1],S=t[2],_=t[3],T=t[4],x=t[5],I=t[6],w=t[7],A=t[8],L=t[9],z=t[10],V=t[11],k=t[12],D=t[13],O=t[14],F=t[15],C=r.getEpsilon();return Math.abs(n-v)<=C*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(s-M)<=C*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(i-S)<=C*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(a-_)<=C*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(o-T)<=C*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(l-x)<=C*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(c-I)<=C*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(u-w)<=C*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(d-A)<=C*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(f-L)<=C*Math.max(1,Math.abs(f),Math.abs(L))&&Math.abs(h-z)<=C*Math.max(1,Math.abs(h),Math.abs(z))&&Math.abs(p-V)<=C*Math.max(1,Math.abs(p),Math.abs(V))&&Math.abs(m-k)<=C*Math.max(1,Math.abs(m),Math.abs(k))&&Math.abs(y-D)<=C*Math.max(1,Math.abs(y),Math.abs(D))&&Math.abs(g-O)<=C*Math.max(1,Math.abs(g),Math.abs(O))&&Math.abs(b-F)<=C*Math.max(1,Math.abs(b),Math.abs(F))}function Y(e){const t=r.getEpsilon(),n=e[0],s=e[1],i=e[2],a=e[4],o=e[5],l=e[6],c=e[8],u=e[9],d=e[10];return Math.abs(1-(n*n+a*a+c*c))<=t&&Math.abs(1-(s*s+o*o+u*u))<=t&&Math.abs(1-(i*i+l*l+d*d))<=t}function W(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[8]&&0===e[9]&&1===e[10]}const X=d,H=R,Q=Object.freeze(Object.defineProperty({__proto__:null,add:B,adjoint:c,copy:n,determinant:u,equals:Z,exactEquals:$,frob:E,fromQuat:D,fromQuat2:I,fromRotation:M,fromRotationTranslation:x,fromRotationTranslationScale:V,fromRotationTranslationScaleOrigin:k,fromScaling:v,fromTranslation:b,fromXRotation:S,fromYRotation:_,fromZRotation:T,frustum:O,getRotation:z,getScale:L,getTranslation:A,hasIdentityRotation:W,identity:i,invert:l,invertOrIdentity:o,isOrthoNormal:Y,lookAt:U,mul:X,multiply:d,multiplyScalar:j,multiplyScalarAndAdd:G,ortho:N,perspective:F,perspectiveFromFieldOfView:C,rotate:p,rotateX:m,rotateY:y,rotateZ:g,scale:h,set:s,str:q,sub:H,subtract:R,targetTo:P,translate:f,transpose:a},Symbol.toStringTag,{value:"Module"}));e.add=B,e.adjoint=c,e.copy=n,e.determinant=u,e.equals=Z,e.exactEquals=$,e.frob=E,e.fromQuat=D,e.fromQuat2=I,e.fromRotation=M,e.fromRotationTranslation=x,e.fromRotationTranslationScale=V,e.fromRotationTranslationScaleOrigin=k,e.fromScaling=v,e.fromTranslation=b,e.fromXRotation=S,e.fromYRotation=_,e.fromZRotation=T,e.frustum=O,e.getRotation=z,e.getScale=L,e.getTranslation=A,e.hasIdentityRotation=W,e.identity=i,e.invert=l,e.invertOrIdentity=o,e.isOrthoNormal=Y,e.lookAt=U,e.mat4=Q,e.mul=X,e.multiply=d,e.multiplyScalar=j,e.multiplyScalarAndAdd=G,e.ortho=N,e.perspective=F,e.perspectiveFromFieldOfView=C,e.rotate=p,e.rotateX=m,e.rotateY=y,e.rotateZ=g,e.scale=h,e.set=s,e.str=q,e.sub=H,e.subtract=R,e.targetTo=P,e.translate=f,e.transpose=a,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/basemapDefinitions":function(){define(["exports","../assets","../intl/messages"],function(e,t,r){"use strict";const n={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]}};e.esriBasemapDefinitions=n,e.getBasemapTitle=async function(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,n=await r.fetchMessageBundle("esri/t9n/basemaps");return n[e]||n[t]},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/intl/messages":function(){define(["exports","../core/Error","../core/handleUtils","../core/promiseUtils","./locale"],function(e,t,r,n,s){"use strict";const i={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function a(e){if(function(e){return e in i}(e)){const t=i[e];return!0===t?e:t}return null}const o=[],l=new Map;function c(e){for(const t of l.keys())u(e.pattern,t)&&l.delete(t)}function u(e,t){return"string"==typeof e?t.startsWith(e):e.test(t)}s.beforeLocaleChange(()=>{l.clear()});const d=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=n.createResolver())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}},f={cache:l,loaders:o};e.fetchMessageBundle=async function(e){const r=s.getLocale();l.has(e)||l.set(e,async function(e,r){const n=[];for(const t of o)if(u(t.pattern,e))try{return await t.fetchMessageBundle(e,r)}catch(e){n.push(e)}if(n.length)throw new t("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:n});throw new t("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}(e,r));const n=l.get(e);return n&&await d.add(n),n},e.messageBundlesLocaleMap=i,e.normalizeMessageBundleLocale=function(e){const t=s.getLocaleLanguage(e);return t?a(e)??a(t):null},e.registerMessageBundleLoader=function(e){return o.includes(e)||(c(e),o.unshift(e)),r.makeHandle(()=>{const t=o.indexOf(e);t>-1&&(o.splice(t,1),c(e))})},e.test=f,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(e,t,r){"use strict";const n=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,s=new Set(["esriFieldTypeDate","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeOID","esriFieldTypeBigInteger"]),i=new Set(["esriFieldTypeTimeOnly","esriFieldTypeDateOnly"]),a=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function o(e){return null==e||"string"==typeof e&&!e?"<Null>":e}function l(e){const t=null!=e.normalizationField||null!=e.normalizationType,r=null!=e.minValue||null!=e.maxValue,n=!!e.sqlExpression&&e.supportsSQLExpression;return!t&&!r&&!n}function c(e){const{values:t,useSampleStdDev:r,supportsNullCount:n,outStatisticTypes:s}=e;let i=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=null,l=null,c=null,d=null,f=0;const h=null==e.minValue?-1/0:e.minValue,p=null==e.maxValue?1/0:e.maxValue;for(const e of t)Number.isFinite(e)?e>=h&&e<=p&&(o=null===o?e:o+e,i=Math.min(i,e),a=Math.max(a,e),f++):"string"==typeof e&&f++;if(f&&null!=o){l=o/f;let e=0;for(const r of t)Number.isFinite(r)&&r>=h&&r<=p&&(e+=(r-l)**2);d=r?f>1?e/(f-1):0:f>0?e/f:0,c=Math.sqrt(d)}else i=null,a=null;const m={avg:l,count:f,max:a,min:i,stddev:c,sum:o,variance:d};return n&&(m.nullcount=t.length-f),!e.percentileParams||s?.include?.length&&!s.include.includes("median")||s?.exclude?.length&&s.exclude.includes("median")||(m.median=u(t,e.percentileParams)),m}function u(e,t){const{fieldType:r,value:n,orderBy:s,isDiscrete:i}=t,a=d(r,"desc"===s);if(0===(e=[...e].filter(e=>null!=e).sort((e,t)=>a(e,t))).length)return null;if(n<=0)return e[0];if(n>=1)return e[e.length-1];const o=(e.length-1)*n,l=Math.floor(o),c=l+1,u=o%1,f=e[l],h=e[c];return c>=e.length||i||"string"==typeof f||"string"==typeof h?f:f*(1-u)+h*u}function d(e,t){if(e){if(s.has(e))return _(t);if(i.has(e))return v(t,!1);if("esriFieldTypeTimestampOffset"===e)return function(e){return e?y:m}(t);const r=v(t,!0);if("esriFieldTypeString"===e)return r;if("esriFieldTypeGUID"===e||"esriFieldTypeGlobalID"===e)return(e,t)=>r(T(e),T(t))}const r=t?1:-1,n=_(t),a=v(t,!0),o=p(t);return(e,t)=>"number"==typeof e&&"number"==typeof t?n(e,t):"string"==typeof e&&"string"==typeof t?a(e,t):o(e,t)??r}const f=(e,t)=>null==e?null==t?0:1:null==t?-1:null,h=(e,t)=>null==e?null==t?0:-1:null==t?1:null;function p(e){return e?f:h}const m=(e,t)=>h(e,t)??(e===t?0:new Date(e).getTime()-new Date(t).getTime()),y=(e,t)=>f(e,t)??(e===t?0:new Date(t).getTime()-new Date(e).getTime()),g=(e,t)=>h(e,t)??(e===t?0:e<t?-1:1),b=(e,t)=>f(e,t)??(e===t?0:e<t?1:-1);function v(e,t){if(!t)return e?b:g;const r=p(e);return e?(e,t)=>{const n=r(e,t);return null!=n?n:(e=e.toUpperCase())>(t=t.toUpperCase())?-1:e<t?1:0}:(e,t)=>{const n=r(e,t);return null!=n?n:(e=e.toUpperCase())<(t=t.toUpperCase())?-1:e>t?1:0}}const M=(e,t)=>f(e,t)??t-e,S=(e,t)=>h(e,t)??e-t;function _(e){return e?M:S}function T(e){return e.slice(24,36)+e.slice(19,23)+e.slice(16,18)+e.slice(14,16)+e.slice(11,13)+e.slice(9,11)+e.slice(6,8)+e.slice(4,6)+e.slice(2,4)+e.slice(0,2)}function x(e){return"coded-value"!==e?.type?[]:e.codedValues.map(e=>e.code)}function I(e,t,n){const s=w({field:t.field,normalizationType:t.normalizationType,normalizationField:t.normalizationField,classificationMethod:t.classificationMethod,standardDeviationInterval:t.standardDeviationInterval,definedInterval:t.definedInterval,breakCount:t.numClasses||5});return e=function(e,t,r){const n=t??-1/0,s=r??1/0;return e.filter(e=>Number.isFinite(e)&&e>=n&&e<=s)}(e,t.minValue,t.maxValue),r.createGenerateRendererClassBreaks({definition:s,values:e,normalizationTotal:t.normalizationTotal},n)}function w(e){const{breakCount:r,field:n,normalizationField:s,normalizationType:i}=e,a=e.classificationMethod||"equal-interval",o="standard-deviation"===a?e.standardDeviationInterval||1:void 0,l="defined-interval"===a?e.definedInterval:void 0;return new t({breakCount:r,classificationField:n,classificationMethod:a,normalizationField:"field"===i?s:void 0,normalizationType:i,standardDeviationInterval:o,definedInterval:l})}function A(e,t,r=!1){const{field:n,classificationMethod:s,standardDeviationInterval:i,definedInterval:a,normalizationType:o,normalizationField:u,normalizationTotal:d,minValue:f,maxValue:h}=t,p=t.numBins||10;let m=null,y=null,g=null;if(s&&"equal-interval"!==s||o){const{classBreaks:t}=I(e,{field:n,normalizationType:o,normalizationField:u,normalizationTotal:d,classificationMethod:s,standardDeviationInterval:i,definedInterval:a,minValue:f,maxValue:h,numClasses:p},null!=f&&null!=h?[f,h]:void 0);m=t[0]?.minValue,y=t[t.length-1]?.maxValue,g=t.map(e=>[e.minValue,e.maxValue])}else{if(null!=f&&null!=h)m=f,y=h;else{const t=c({values:e,minValue:f,maxValue:h,useSampleStdDev:!o,supportsNullCount:l({normalizationType:o,normalizationField:u,minValue:f,maxValue:h})});m=t.min??null,y=t.max??null}g=z(m??0,y??0,p)}if(r&&g.length){const e=g.at(-1)[1];g.push([e,e])}return{min:m,max:y,intervals:g}}function L(e,t){let r=-1;for(let n=e.length-1;n>=0;n--)if(t>=e[n][0]){r=n;break}return r}function z(e,t,r){const n=(t-e)/r,s=[];let i,a=e;for(let e=1;e<=r;e++)i=a+n,i=Number(i.toFixed(16)),s.push([a,e===r?t:i]),a=i;return s}e.binIndex=L,e.calculateClassBreaks=I,e.calculateHistogram=function(e,t){const r=A(e,t);if(null==r.min&&null==r.max)return{bins:[],minValue:r.min,maxValue:r.max,normalizationTotal:t.normalizationTotal};const n=r.intervals,s=r.min??0,i=r.max??0,a=n.map((e,t)=>({minValue:n[t][0],maxValue:n[t][1],count:0}));for(const t of e)if(null!=t&&t>=s&&t<=i){const e=L(n,t);e>-1&&a[e].count++}return{bins:a,minValue:s,maxValue:i,normalizationTotal:t.normalizationTotal}},e.calculatePercentile=u,e.calculateStatistics=c,e.calculateStringStatistics=function(e){const{outStatisticTypes:t}=e,r=e.returnDistinct?[...new Set(e.values)]:e.values,n=r.filter(e=>null!=e).sort(),s=n.length,i={count:s,min:n[0],max:n[s-1]};return e.supportsNullCount&&(i.nullcount=r.length-s),!e.percentileParams||t?.include?.length&&!t.include.includes("median")||t?.exclude?.length&&t.exclude.includes("median")||(i.median=u(r,e.percentileParams)),i},e.calculateUniqueValuesCount=function(e){const t={};for(let r of e)(null==r||"string"==typeof r&&""===r.trim())&&(r=null),null==t[r]?t[r]={count:1,data:r}:t[r].count++;return{count:t}},e.createClassBreaksDefinition=w,e.createUVResult=function(e,t,r,n){const s=e.count,i=[];if(r&&t){const e=[],r=x(t[0]);for(const s of r)if(t[1]){const r=x(t[1]);for(const i of r)if(t[2]){const r=x(t[2]);for(const t of r)e.push(`${o(s)}${n}${o(i)}${n}${o(t)}`)}else e.push(`${o(s)}${n}${o(i)}`)}else e.push(s);for(const t of e)s.hasOwnProperty(t)||(s[t]={data:t,count:0})}for(const e in s){const t=s[e];i.push({value:t.data,count:t.count,label:t.label})}return{uniqueValueInfos:i}},e.getAttributeComparator=d,e.getBinParams=A,e.getEqualIntervalBins=z,e.getNormalizedValue=function(e,t,r,n){let s=null;switch(t){case"log":0!==e&&(s=Math.log(e)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(n)&&0!==n&&(s=e/n*100);break;case"field":Number.isFinite(r)&&0!==r&&(s=e/r);break;case"natural-log":e>0&&(s=Math.log(e));break;case"square-root":e>0&&(s=e**.5)}return s},e.isNullCountSupported=l,e.processNullValue=o,e.processSummaryStatisticsResult=function(e,t,r){let n;for(n in e)t?.include?.length&&!t.include.includes(n)||t?.exclude?.length&&t.exclude.includes(n)?delete e[n]:a.includes(n)&&(Number.isFinite(e[n])||(e[n]=null));return r?(["avg","stddev","variance"].forEach(t=>{null!=e[t]&&(e[t]=Math.ceil(e[t]??0))}),e):e},e.resolveCBResult=function(e,t){let r=e.classBreaks;const s=r.length,i=r[0]?.minValue,a=r[s-1]?.maxValue,o="standard-deviation"===t,l=n;return r=r.map(e=>{const t=e.label,r={minValue:e.minValue,maxValue:e.maxValue,label:t};if(o&&t){const e=t.match(l),n=e?.map(e=>+e.trim())??[];2===n.length?(r.minStdDev=n[0],r.maxStdDev=n[1],n[0]<0&&n[1]>0&&(r.hasAvg=!0)):1===n.length&&(t.includes("<")?(r.minStdDev=null,r.maxStdDev=n[0]):t.includes(">")&&(r.minStdDev=n[0],r.maxStdDev=null))}return r}),{minValue:i,maxValue:a,classBreakInfos:r,normalizationTotal:e.normalizationTotal}},e.statisticTypes=a,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define(["exports","../../chunks/tslib.es6","../../core/jsonMap","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/subclass"],function(e,t,r,n,s,i,a,o,l,c){"use strict";const u=new r.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),d=new r.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});return e.default=class extends n.JSONSupport{constructor(e){super(e),this.type="class-breaks-definition",this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null}set standardDeviationInterval(e){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",e)}set definedInterval(e){"defined-interval"===this.classificationMethod&&this._set("definedInterval",e)}},t.__decorate([l.enumeration({classBreaksDef:"class-breaks-definition"})],e.default.prototype,"type",void 0),t.__decorate([s.property({json:{write:!0}})],e.default.prototype,"breakCount",void 0),t.__decorate([s.property({json:{write:!0}})],e.default.prototype,"classificationField",void 0),t.__decorate([s.property({type:String,json:{read:u.read,write:u.write}})],e.default.prototype,"classificationMethod",void 0),t.__decorate([s.property({json:{write:!0}})],e.default.prototype,"normalizationField",void 0),t.__decorate([s.property({json:{read:d.read,write:d.write}})],e.default.prototype,"normalizationType",void 0),t.__decorate([s.property({value:null,json:{write:!0}})],e.default.prototype,"standardDeviationInterval",null),t.__decorate([s.property({value:null,json:{write:!0}})],e.default.prototype,"definedInterval",null),e.default=t.__decorate([c.subclass("esri.rest.support.ClassBreaksDefinition")],e.default),e.default})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(e,t){"use strict";function r(e,t){return Number(e.toFixed(t))}function n(e,t,r){let n=null;return n=e===t?r&&"percent-of-total"===r?e+"%":e.toString():r&&"percent-of-total"===r?e+"% - "+t+"%":e+" - "+t,n}function s(e){const t=[],r=[];let n=Number.MIN_VALUE,s=1,i=-1;for(let a=0;a<e.length;a++){const o=e[a];o===n?(s++,r[i]=s):null!==o&&(t.push(o),n=o,s=1,r.push(s),i++)}return{uniqueValues:t,valueFrequency:r}}function i(e,t,r,n){let s=[],i=[],o=[],l=0;const c=[],u=[];for(let s=0;s<n;s++){const n=a(s,e,t,r);c.push(n.sbMean),u.push(n.sbSdcm),l+=u[s]}let d,f=l,h=!0;for(;h||l<f;){h=!1,s=[];for(let t=0;t<n;t++)s.push(e[t]);for(let r=0;r<n;r++)for(let s=e[r]+1;s<=e[r+1];s++)if(d=t[s],r>0&&s!==e[r+1]&&Math.abs(d-c[r])>Math.abs(d-c[r-1]))e[r]=s;else if(r<n-1&&e[r]!==s-1&&Math.abs(d-c[r])>Math.abs(d-c[r+1])){e[r+1]=s-1;break}f=l,l=0,i=[],o=[];for(let s=0;s<n;s++){i.push(c[s]),o.push(u[s]);const n=a(s,e,t,r);c[s]=n.sbMean,u[s]=n.sbSdcm,l+=u[s]}}if(l>f){for(let t=0;t<n;t++)e[t]=s[t],c[t]=i[t],u[t]=o[t];l=f}return{mean:c,sdcm:u}}function a(e,r,n,s){let i=0,a=0;for(let t=r[e]+1;t<=r[e+1];t++){const e=s[t];i+=n[t]*e,a+=e}a<=0&&t.getLogger("esri.rest.support.generateRendererUtils").warn("Exception in Natural Breaks calculation");const o=i/a;let l=0;for(let t=r[e]+1;t<=r[e+1];t++)l+=s[t]*(n[t]-o)**2;return{sbMean:o,sbSdcm:l}}e.createGenerateRendererClassBreaks=function(e,t){const{normalizationTotal:o}=e;return{classBreaks:function(e,t){const o=e.definition,{classificationMethod:l,normalizationType:c,definedInterval:u}=o,d=o.breakCount??1,f=[];let h=e.values;if(0===h.length)return[];h=h.sort((e,t)=>e-t);const[p,m]=t??[h.at(0),h.at(-1)];if("equal-interval"===l)if(h.length>=d){const e=(m-p)/d;let t=p;for(let s=1;s<d;s++){const i=r(p+s*e,6);f.push({minValue:t,maxValue:i,label:n(t,i,c)}),t=i}f.push({minValue:t,maxValue:m,label:n(t,m,c)})}else h.forEach(e=>{f.push({minValue:e,maxValue:e,label:n(e,e,c)})});else if("natural-breaks"===l){const t=s(h),o=e.valueFrequency||t.valueFrequency,l=function(e,t,r){const n=e.length,s=[];r>n&&(r=n);for(let e=0;e<r;e++)s.push(Math.round(e*n/r-1));s.push(n-1);let o=i(s,e,t,r);return function(e,t,r,n,s,i){let o=0,l=0,c=0,u=0,d=!0;for(let f=0;f<2&&d;f++){0===f&&(d=!1);for(let f=0;f<i-1;f++)for(;r[f+1]+1!==r[f+2];){r[f+1]=r[f+1]+1;const i=a(f,r,n,s);c=i.sbMean,o=i.sbSdcm;const h=a(f+1,r,n,s);if(u=h.sbMean,l=h.sbSdcm,!(o+l<t[f]+t[f+1])){r[f+1]=r[f+1]-1;break}t[f]=o,t[f+1]=l,e[f]=c,e[f+1]=u,d=!0}for(let f=i-1;f>0;f--)for(;r[f]!==r[f-1]+1;){r[f]=r[f]-1;const i=a(f-1,r,n,s);c=i.sbMean,o=i.sbSdcm;const h=a(f,r,n,s);if(u=h.sbMean,l=h.sbSdcm,!(o+l<t[f-1]+t[f])){r[f]=r[f]+1;break}t[f-1]=o,t[f]=l,e[f-1]=c,e[f]=u,d=!0}}return d}(o.mean,o.sdcm,s,e,t,r)&&(o=i(s,e,t,r)),s}(t.uniqueValues,o,d);let u=p;for(let e=1;e<d;e++)if(t.uniqueValues.length>e){const s=r(t.uniqueValues[l[e]],6);f.push({minValue:u,maxValue:s,label:n(u,s,c)}),u=s}f.push({minValue:u,maxValue:m,label:n(u,m,c)})}else if("quantile"===l)if(h.length>=d&&p!==m){let e=p,t=Math.ceil(h.length/d),r=0;for(let s=1;s<d;s++){let i=t+r-1;i>h.length&&(i=h.length-1),i<0&&(i=0),f.push({minValue:e,maxValue:h[i],label:n(e,h[i],c)}),e=h[i],r+=t,t=Math.ceil((h.length-r)/(d-s))}f.push({minValue:e,maxValue:m,label:n(e,m,c)})}else{let e=-1;for(let t=0;t<h.length;t++){const r=h[t];r!==e&&(e=r,f.push({minValue:e,maxValue:r,label:n(e,r,c)}),e=r)}}else if("standard-deviation"===l){const e=function(e){let t=0;for(let r=0;r<e.length;r++)t+=e[r];return t/=e.length,t}(h),t=function(e,t){let r=0;for(let n=0;n<e.length;n++){const s=e[n];r+=(s-t)*(s-t)}return r/=e.length,Math.sqrt(r)}(h,e);if(0===t)f.push({minValue:h[0],maxValue:h[0],label:n(h[0],h[0],c)});else{const s=function(e,t,r,n,s){let i=Math.max(n-e,t-n)/s/r;return i=i>=1?1:i>=.5?.5:.25,i}(p,m,d,e,t),i=s*t;let a=0,o=p;for(let t=d;t>=1;t--){const s=r(e-(t-.5)*i,6);f.push({minValue:o,maxValue:s,label:n(o,s,c)}),o=s,a++}let l=r(e+.5*i,6);f.push({minValue:o,maxValue:l,label:n(o,l,c)}),o=l,a++;for(let t=1;t<=d;t++)l=a===2*d?m:r(e+(t+.5)*i,6),f.push({minValue:o,maxValue:l,label:n(o,l,c)}),o=l,a++}}else if("defined-interval"===l){if(!u)return f;const[e,s]=t??[h.at(0),h.at(-1)],i=Math.ceil((s-e)/u);let a=e;for(let t=1;t<i;t++){const s=r(e+t*u,6);f.push({minValue:a,maxValue:s,label:n(a,s,c)}),a=s}f.push({minValue:a,maxValue:s,label:n(a,s,c)})}return f}(e,t),normalizationTotal:o}},e.createGenerateRendererUniqueValues=function(e){const t=s(e),r=[],n=t.uniqueValues.length;for(let e=0;e<n;e++){const n=t.uniqueValues[e],s=t.valueFrequency[e],i=n.toString();r.push({value:n,count:s,label:i})}return{uniqueValues:r}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"*noref":1}}),define(["exports","./utils","../../../statistics/utils"],function(e,t,r){"use strict";e.classBreaks=async function(e){const{attribute:n,features:s}=e,{field:i,normalizationType:a,normalizationField:o,normalizationTotal:l,classificationMethod:c}=n,u=await t.getDataValues({field:i,valueExpression:n.valueExpression,normalizationType:a,normalizationField:o,normalizationTotal:l,viewInfoParams:n.viewInfoParams,timeZone:n.timeZone,fieldInfos:n.fieldInfos},s),d=r.calculateClassBreaks(u,{field:i,normalizationType:a,normalizationField:o,normalizationTotal:l,classificationMethod:c,standardDeviationInterval:n.standardDeviationInterval,numClasses:n.numClasses,minValue:n.minValue,maxValue:n.maxValue});return r.resolveCBResult(d,c)},e.heatmapStatistics=async function(e){const{attribute:r,features:n}=e,{field:s,radius:i,transform:a,spatialReference:o}=r,l=r.size??[0,0],c=t.quantizeFeatures(n??[],a,o,l);return t.calculateHeatmapStats(c,i??void 0,s,l[0],l[1])},e.histogram=async function(e){const{attribute:n,features:s}=e,{field:i,normalizationType:a,normalizationField:o,normalizationTotal:l,classificationMethod:c}=n,u=await t.getDataValues({field:i,valueExpression:n.valueExpression,normalizationType:a,normalizationField:o,normalizationTotal:l,viewInfoParams:n.viewInfoParams,timeZone:n.timeZone,fieldInfos:n.fieldInfos},s);return r.calculateHistogram(u,{field:i,normalizationType:a,normalizationField:o,normalizationTotal:l,classificationMethod:c,standardDeviationInterval:n.standardDeviationInterval,numBins:n.numBins,minValue:n.minValue,maxValue:n.maxValue})},e.summaryStatistics=async function(e){const{attribute:n,features:s}=e,{normalizationType:i,normalizationField:a,minValue:o,maxValue:l,fieldType:c,outStatisticTypes:u}=n,d=await t.getDataValues({field:n.field,valueExpression:n.valueExpression,normalizationType:i,normalizationField:a,normalizationTotal:n.normalizationTotal,viewInfoParams:n.viewInfoParams,timeZone:n.timeZone,fieldInfos:n.fieldInfos},s),f=r.isNullCountSupported({normalizationType:i,normalizationField:a,minValue:o,maxValue:l}),h={value:.5,fieldType:c},p="esriFieldTypeString"===c?r.calculateStringStatistics({values:d,supportsNullCount:f,percentileParams:h,outStatisticTypes:u}):r.calculateStatistics({values:d,minValue:o,maxValue:l,useSampleStdDev:!i,supportsNullCount:f,percentileParams:h,outStatisticTypes:u});return r.processSummaryStatisticsResult(p,u,"esriFieldTypeDate"===c)},e.uniqueValues=async function(e){const{attribute:n,features:s}=e,i=await t.getDataValues({field:n.field,field2:n.field2,field3:n.field3,fieldDelimiter:n.fieldDelimiter,valueExpression:n.valueExpression,viewInfoParams:n.viewInfoParams,timeZone:n.timeZone,fieldInfos:n.fieldInfos},s,!1),a=r.calculateUniqueValuesCount(i);return r.createUVResult(a,n.domains,n.returnAllCodedValues,n.fieldDelimiter)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});