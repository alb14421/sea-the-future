// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../../geometry/support/coordsUtils","../../geometry/support/extentUtils"],function(t,n){"use strict";function e(n,e=!1){let o=[];if(e){for(const t of n)if(t.geometry){const n=t.geometry;o.push.apply(o,n.points)}}else o=n.map(t=>t.geometry);const s=[],i=[];let l=1/0,r=-1/0,c=0,a=0,u=0,f=0;for(const n of o){if(!n)continue;e?(s[0]=n[0],s[1]=n[1]):(s[0]=n.x,s[1]=n.y);let g=1/0,m=-1/0;for(const c of o){if(c===n)continue;if(!c)continue;e?(i[0]=c[0],i[1]=c[1]):(i[0]=c.x,i[1]=c.y);const o=t.getLength(s,i);o>0&&(o<g&&(g=o),o<l&&(l=o),o>m&&(m=o),o>r&&(r=o))}g!==1/0&&(++u,c+=g),m!==-1/0&&(++f,a+=m)}return{minDistance:l!==1/0?l:null,maxDistance:r!==-1/0?r:null,avgMinDistance:u?c/u:null,avgMaxDistance:f?a/f:null}}return function(o){const{features:s}=o;let i=null;switch(o.geometryType){case"point":i=e(s);break;case"multipoint":i=e(s,!0);break;case"polyline":i=function(n){let e=0,o=0,s=1/0,i=-1/0;for(const l of n){const n=l.geometry;if(n){let l=0;for(const e of n.paths){const n=t.getPathLength(e);n>0&&(l+=n)}l>0&&(++e,o+=l,l<s&&(s=l),l>i&&(i=l))}}return{minLength:s!==1/0?s:null,maxLength:i!==-1/0?i:null,avgLength:e?o/e:null}}(s);break;case"polygon":i=function(t){let e=0,o=0,s=1/0,i=-1/0;for(const l of t){const t=l.geometry;if(t){const l=n.getPolygonExtent(t);if(l){const t=Math.abs(l.xmax-l.xmin),n=Math.abs(l.ymax-l.ymin),r=Math.sqrt(t*n);r>0&&(++e,o+=r,r<s&&(s=r),r>i&&(i=r))}}}return{minSize:s!==1/0?s:null,maxSize:i!==-1/0?i:null,avgSize:e?o/e:null}}(s)}return Promise.resolve(i)}});