// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../core/quantityUtils","../../core/unitUtils","../../chunks/vec32","../../core/libs/gl-matrix-2/factories/vec3f64","../../geometry/projection/projectVectorToVector","../../geometry/support/spatialReferenceUtils","./measurementUtils"],function(e,t,n,r,c,i,l,a){"use strict";function u(e,r){const{hasZ:c,spatialReference:i}=e,l=a.computeEuclideanMeasurementSR(i);let u=0;const o=n.lengthUnitFromSpatialReference(l);if(null==o)return null;const s=0===r?f:h;for(const t of e.paths){if(t.length<2)continue;const e=t.length-1;for(let n=0;n<e;++n){const e=t[n];p[0]=e[0],p[1]=e[1],p[2]=c?e[2]:0;const r=t[n+1];z[0]=r[0],z[1]=r[1],z[2]=c?r[2]:0;const l=s(p,z,i);if(null==l)return null;u+=l.value}}return t.createLength(u,o)}function o(e,r){const c=n.verticalLengthUnitFromSpatialReference(r);return null!=c?t.createLength(e??0,c):null}function s(e,n,r){const c=g(e,n,r);return null!=c?{direct:t.createLength(c.direct,c.unit),horizontal:t.createLength(c.horizontal,c.unit),vertical:t.createLength(c.vertical,c.unit)}:null}function f(e,n,r){const c=g(e,n,r,0);return null!=c?t.createLength(c.direct,c.unit):null}function h(e,n,r){const c=g(e,n,r,1);return null!=c?t.createLength(c.horizontal,c.unit):null}function d(e,n,r){const c=g(e,n,r,2);return null!=c?t.createLength(c.verticalSigned,c.unit):null}function g(e,t,c,l){const u=a.computeEuclideanMeasurementSR(c),o=n.lengthUnitFromSpatialReference(u);if(null==o)return null;const s=t[2]-e[2];if(2===l)return{verticalSigned:s,unit:o};if(!i.projectVectorToVector(e,c,v,u)||!i.projectVectorToVector(t,c,R,u))return null;if(0===l)return{direct:r.distance(R,v),unit:o};if(r.set(m,e[0],e[1],t[2]),!i.projectVectorToVector(m,c,m,u))return null;const f=r.distance(m,R);return 1===l?{horizontal:f,unit:o}:{direct:r.distance(R,v),horizontal:f,vertical:Math.abs(s),unit:o}}const p=c.create(),z=c.create(),v=c.create(),R=c.create(),m=c.create();e.elevationFromPoint=function(e){return null!=e?o(e.hasZ?e.z:0,e.spatialReference):null},e.elevationFromZ=o,e.euclideanDirectDistance=f,e.euclideanDirectDistanceBetweenPoints=function(e,t){const{spatialReference:n}=e;return l.equals(n,t.spatialReference)?(p[0]=e.x,p[1]=e.y,p[2]=e.hasZ?e.z:0,z[0]=t.x,z[1]=t.y,z[2]=t.hasZ?t.z:0,f(p,z,n)):null},e.euclideanDistance=s,e.euclideanDistanceBetweenPoints=function(e,t){const{spatialReference:n}=e;return l.equals(n,t.spatialReference)?(p[0]=e.x,p[1]=e.y,p[2]=e.hasZ?e.z:0,z[0]=t.x,z[1]=t.y,z[2]=t.hasZ?t.z:0,s(p,z,n)):null},e.euclideanHorizontalDistance=h,e.euclideanHorizontalDistanceBetweenPoints=function(e,t){const{spatialReference:n}=e;return l.equals(n,t.spatialReference)?(p[0]=e.x,p[1]=e.y,p[2]=e.hasZ?e.z:0,z[0]=t.x,z[1]=t.y,z[2]=t.hasZ?t.z:0,h(p,z,n)):null},e.euclideanHorizontalLength=function(e){return u(e,1)},e.euclideanLength=function(e){return u(e,0)},e.verticalDistance=function(e,n,r){const c=g(e,n,r,2);return null!=c?t.createLength(Math.abs(c.verticalSigned),c.unit):null},e.verticalSignedDistance=d,e.verticalSignedDistanceBetweenPoints=function(e,t){const{spatialReference:n}=e;return l.equals(n,t.spatialReference)?(p[0]=e.x,p[1]=e.y,p[2]=e.hasZ?e.z:0,z[0]=t.x,z[1]=t.y,z[2]=t.hasZ?t.z:0,d(p,z,n)):null},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});