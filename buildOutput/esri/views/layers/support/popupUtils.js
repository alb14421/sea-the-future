// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../layers/support/fieldUtils"],function(e,l){"use strict";function p(e,l){return e&&"object"==typeof e?l?.checkPopupEnabled&&"popupEnabled"in e&&!e.popupEnabled?null:"popupTemplate"in e&&e.popupTemplate?e.popupTemplate:null!=l&&l.defaultPopupTemplateEnabled&&"defaultPopupTemplate"in e&&e.defaultPopupTemplate?e.defaultPopupTemplate:null:null}e.getFetchPopupTemplate=p,e.getRequiredFields=async function(e,p=e.popupTemplate){if(null==p)return[];const t=await p.getRequiredFields(e.fieldsIndex),{lastEditInfoEnabled:u}=p,{objectIdField:n,typeIdField:d,globalIdField:i,relationships:a}=e;if(t.includes("*"))return["*"];const o=u?l.getFeatureEditFields(e):[],s=l.fixFields(e.fieldsIndex,[...t,...o]);return d&&s.push(d),s&&n&&e.fieldsIndex?.has(n)&&!s.includes(n)&&s.push(n),s&&i&&e.fieldsIndex?.has(i)&&!s.includes(i)&&s.push(i),a&&a.forEach(l=>{const{keyField:p}=l;s&&p&&e.fieldsIndex?.has(p)&&!s.includes(p)&&s.push(p)}),s},e.hasPopupTemplate=function(e,l){return null!=p(e,{defaultPopupTemplateEnabled:l})},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});