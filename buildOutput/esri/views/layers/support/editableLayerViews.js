// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/Logger","../../../geometry/support/spatialReferenceUtils","../../../layers/support/infoFor3D"],function(e,t,i,r){"use strict";const s="esri.views.layers.support.editableLayerViews";e.isGeometryEditableSceneLayer=function(e,o){const{associatedLayer:a}=e,n=a?.infoFor3D;if(!n)return!1;const d=r.getGlbFormatId(n);if(null==d||!n.queryFormats.includes(d))return t.getLogger(s).warnOnce(`SceneLayer (${e.title??"Untitled layer"}, ${e.id}) does not support geometry edits because it does not support GLB queries.`),!1;const c=e.spatialReference,l=a.spatialReference;if(!i.equals(c,l))return t.getLogger(s).warnOnce(`SceneLayer (${e.title??"Untitled layer"}, ${e.id}) does not support geometry edits because its spatial reference (wkid:${c.wkid}) is different from its associated FeatureLayer's spatial reference (wkid:${l.wkid}).`),!1;const g=a.sourceJSON?.sourceSpatialReference;if(null!=g&&!i.equals(g,l))return t.getLogger(s).warnOnce(`SceneLayer (${e.title??"Untitled layer"}, ${e.id}) does not support geometry edits because the spatial reference of its associated FeatureLayer's service (wkid:${l.wkid}) is different from its source spatial reference (wkid:${g.wkid}).`),!1;const{view:u}=o;if(o.destroyed||null==u)return!1;const p=u.spatialReference,{viewingMode:f}=u.state,w=i.isGeographic(c),y=1===f;return w&&!y?(t.getLogger(s).warnOnce(`SceneLayer (${e.title??"Untitled layer"}, ${e.id}) does not support geometry edits in local viewing mode because its spatial reference (wkid:${c.wkid}) is geographic. Please consider changing the viewing mode to global.`),!1):!w&&y?(t.getLogger(s).warnOnce(`SceneLayer (${e.title??"Untitled layer"}, ${e.id}) does not support geometry edits in global viewing mode because its spatial reference (wkid:${c.wkid}) is projected. Please consider changing the viewing mode to local.`),!1):!!(i.equals(c,p)||y&&i.isWebMercator(p)&&i.isWGS84(c))||(t.getLogger(s).warnOnce(`SceneLayer (${e.title??"Untitled layer"}, ${e.id}) does not support geometry edits because its spatial reference (wkid:${c.wkid}) does not match the view spatial reference (wkid:${p.wkid}).`),!1)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});