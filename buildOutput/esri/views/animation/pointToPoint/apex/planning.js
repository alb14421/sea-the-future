// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./functions"],function(o,n){"use strict";o.optimalDistance=function(o,e){let s=function(o,n){const e=Math.max(o.compared.sourceZoom,o.compared.targetZoom),s=o.source.zoomAtPixelsPerPan(o.desiredPixelFlow/o.compared.pan)/2;return s<e?null!=n.maximumDistance?e+(n.maximumDistance-e)/2:1.5*e:n.maximumDistance?Math.min(n.maximumDistance,s):s}(o,e);const t={ascensionFactor:null!=e.ascensionFactor?e.ascensionFactor:.5,descensionFactor:null!=e.descensionFactor?e.descensionFactor:.5},a=0===t.ascensionFactor,i=0===t.descensionFactor,c=a?n.tAscensionZoomOnly:n.tAscensionZoomPan,m=a?n.dtAscensionZoomOnly:n.dtAscensionZoomPan,r=a?n.ddtAscensionZoomOnly:n.ddtAscensionZoomPan,d=i?n.tDescensionZoomOnly:n.tDescensionZoomPan,l=i?n.dtDescensionZoomOnly:n.dtDescensionZoomPan,u=i?n.ddtDescensionZoomOnly:n.ddtDescensionZoomPan,Z=e=>c(o,e,t)+n.tPanion(o,e,t)+d(o,e,t),P=e=>m(o,e,t)+n.dtPanion(o,e,t)+l(o,e,t),D=e=>r(o,e,t)+n.ddtPanion(o,e,t)+u(o,e,t);let p=Z(s);const f=n.tBaseLine(o);let x;const F=e.maximumIterations||20,y=null!=e.maximumDistance?e.maximumDistance:1/0;for(x=0;x<F;x++){const n=e.desiredSlope??1e-6;let t=P(s);Math.abs(t)>n&&(t+=n);const a=t/D(s);if(isNaN(a)||s>=y&&a<0){if(!isFinite(y))return null;s=y,p=Z(s);break}if(s-=a,s<=o.compared.sourceZoom||s<=o.compared.targetZoom)return null;const i=Z(s);if(Math.abs(i-p)/p<=.005)break;p=i}return isNaN(p)||p>.7*f||s<=o.compared.sourceZoom||s<=o.compared.targetZoom?null:s},Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});