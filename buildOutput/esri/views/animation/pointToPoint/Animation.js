// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/time","../easing","./Definition","./InterpolateComponents","./Settings","./apex/Path"],function(t,i,e,n,s,a,o){"use strict";const h=new s.InterpolateComponents;t.Animation=class{get time(){return this._time}get isLinear(){return 1===this.path.segments.length}constructor(t){this._time=i.Milliseconds(0),this._easing=e.inOutCoastQuad,this.definition=new n.Definition(t),this.path=new o.Path}update(t,n,s){this.definition.update(t,n,s),this.path.update(this.definition,s),this._time=this._applyTimeSettings(i.millisecondsFromSeconds(isFinite(this.path.time)?this.path.time:i.Seconds(0)),s),this._easing=s.easing??(this._time>=1e3?e.inOutCoastQuad:e.outExpo)}cameraAt(t,i){t=Math.min(Math.max(0,t),1),t=this._normalizedEasing(t);const e=this.path.interpolateComponentsAt(t,h);i.interpolate(this.definition.source,this.definition.target,e)}_normalizedEasing(t){const i=this._easing(0,this._time),e=this._easing(1,this._time);return(this._easing(t,this._time)-i)/(e-i)}_applyTimeSettings(t,e){const n=null!=e.speedFactor?e.speedFactor:1,s=e.minDuration??a.defaultSettings.minDuration/n,o=e.maxDuration??a.defaultSettings.maxDuration/n;return null!=e.duration?i.Milliseconds(e.duration):i.Milliseconds(Math.min(Math.max(t/n,s),o))}},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});