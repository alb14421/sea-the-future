// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/mathUtils","../../../geometry/support/aaBoundingRect","../../../geometry/support/boundsUtils","../../../geometry/support/coordsUtils"],function(t,n,e,o,r){"use strict";function s(t,n,e,o){if(null==o||t.hasZ||(o=void 0),"point"===t.type)return t.x+=n,t.y+=e,t.hasZ&&null!=o&&(t.z+=o),t;if("multipoint"===t.type){const r=t.points;for(let t=0;t<r.length;t++)r[t]=i(r[t],n,e,o);return t}if("extent"===t.type)return t.xmin+=n,t.xmax+=n,t.ymin+=e,t.ymax+=e,null!=o&&(t.zmin??=0,t.zmin+=o,t.zmax??=0,t.zmax+=o),t;const s=r.geometryToCoordinates(t),a="polyline"===t.type?t.paths:t.rings;for(let t=0;t<s.length;t++){const r=s[t];for(let t=0;t<r.length;t++)r[t]=i(r[t],n,e,o)}return"paths"in t?t.paths=a:t.rings=a,t}function i(t,n,e,o){return a(t,t[0]+n,t[1]+e,null!=t[2]&&null!=o?t[2]+o:void 0)}function a(t,n,e,o){const r=[n,e];return t.length>2&&r.push(null!=o?o:t[2]),t.length>3&&r.push(t[3]),r}t.cloneMove=function(t,n,e,o,i){const l=t.clone(),m=o.resolution;if("point"===l.type){if(i)s(l,n*m,-e*m);else{const t=o.state.transform,r=o.state.inverseTransform,s=t[0]*l.x+t[2]*l.y+t[4],i=t[1]*l.x+t[3]*l.y+t[5];l.x=r[0]*(s+n)+r[2]*(i+e)+r[4],l.y=r[1]*(s+n)+r[3]*(i+e)+r[5]}return l}if("multipoint"===l.type){if(i)s(l,n*m,-e*m);else{const t=l.points,r=o.state.transform,s=o.state.inverseTransform;for(let o=0;o<t.length;o++){const i=t[o],l=r[0]*i[0]+r[2]*i[1]+r[4],m=r[1]*i[0]+r[3]*i[1]+r[5],x=s[0]*(l+n)+s[2]*(m+e)+s[4],y=s[1]*(l+n)+s[3]*(m+e)+s[5];t[o]=a(i,x,y,void 0)}}return l}if("extent"===l.type){if(i)s(l,n*m,-e*m);else{const t=o.state.transform,r=o.state.inverseTransform,s=t[0]*l.xmin+t[2]*l.ymin+t[4],i=t[1]*l.xmin+t[3]*l.ymin+t[5],a=t[0]*l.xmax+t[2]*l.ymax+t[4],m=t[1]*l.xmax+t[3]*l.ymax+t[5];l.xmin=r[0]*(s+n)+r[2]*(i+e)+r[4],l.ymin=r[1]*(s+n)+r[3]*(i+e)+r[5],l.xmax=r[0]*(a+n)+r[2]*(m+e)+r[4],l.ymax=r[1]*(a+n)+r[3]*(m+e)+r[5]}return l}if(i)s(l,n*m,-e*m);else{const t=r.geometryToCoordinates(l),s="polyline"===l.type?l.paths:l.rings,i=o.state.transform,m=o.state.inverseTransform;for(let o=0;o<t.length;o++){const r=t[o];for(let t=0;t<r.length;t++){const o=r[t],s=i[0]*o[0]+i[2]*o[1]+i[4],l=i[1]*o[0]+i[3]*o[1]+i[5],x=m[0]*(s+n)+m[2]*(l+e)+m[4],y=m[1]*(s+n)+m[3]*(l+e)+m[5];r[t]=a(o,x,y,void 0)}}"paths"in l?l.paths=s:l.rings=s}return l},t.getRotationAngle=function(t,e,o,r=!1){const s=Math.atan2(e.y-o.y,e.x-o.x)-Math.atan2(t.y-o.y,t.x-o.x),i=Math.atan2(Math.sin(s),Math.cos(s));return r?i:n.rad2deg(i)},t.getScaleRatio=function(t,n,e,o,r,s){const i=Math.sqrt((e-t)*(e-t)+(o-n)*(o-n));return Math.sqrt((r-t)*(r-t)+(s-n)*(s-n))/i},t.move=s,t.scale=function(t,n,s,i){if("point"===t.type){const{x:e,y:o}=t,r=i?i[0]:e,a=i?i[1]:o,l=t.clone(),m=(e-r)*n+r,x=(o-a)*s+a;return l.x=m,l.y=x,l}if("multipoint"===t.type){const l=r.geometryToCoordinates(t),m=e.create(),[x,y,c,u]=o.getRingsOrPathsBounds(m,[l]),p=i?i[0]:(x+c)/2,f=i?i[1]:(u+y)/2,g=t.clone(),h=g.points;for(let t=0;t<h.length;t++){const e=h[t],[o,r]=e,i=(o-p)*n+p,l=(r-f)*s+f;h[t]=a(e,i,l,void 0)}return g}if("extent"===t.type){const{xmin:e,xmax:o,ymin:r,ymax:a}=t,l=i?i[0]:(e+o)/2,m=i?i[1]:(a+r)/2,x=t.clone();if(x.xmin=(e-l)*n+l,x.ymax=(a-m)*s+m,x.xmax=(o-l)*n+l,x.ymin=(r-m)*s+m,x.xmin>x.xmax){const t=x.xmin,n=x.xmax;x.xmin=n,x.xmax=t}if(x.ymin>x.ymax){const t=x.ymin,n=x.ymax;x.ymin=n,x.ymax=t}return x}const l=r.geometryToCoordinates(t),m=e.create(),[x,y,c,u]=o.getRingsOrPathsBounds(m,l),p=i?i[0]:(x+c)/2,f=i?i[1]:(u+y)/2,g=t.clone(),h="polyline"===g.type?g.paths:g.rings;for(let t=0;t<l.length;t++){const e=l[t];for(let o=0;o<e.length;o++){const r=e[o],[i,l]=r,m=(i-p)*n+p,x=(l-f)*s+f;h[t][o]=a(r,m,x,void 0)}}return"paths"in g?g.paths=h:g.rings=h,g},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});