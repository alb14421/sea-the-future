// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../chunks/tslib.es6","../../../core/Accessor","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","./layerUtils","../../support/HighlightDefaults","../../support/layerViewUtils"],function(e,t,r,i,s,o,h,a,l,c,d){"use strict";return e.default=class extends r{constructor(e){super(e),this._layerViewCache=new Map,this.highlightName=c.defaultHighlightName,this.view=null}add(e,t){const r=!e||Array.isArray(e)?e:[e];if(!r?.length)return;const i=t??this.highlightName;r.forEach(e=>this._highlight(e,i))}getKeyForFeature(e){const t=e.getObjectId();return null!=t?`oid:${t}`:`uid:${e.uid}`}remove(e){const t=!e||Array.isArray(e)?e:[e];t?.length&&t.forEach(e=>e&&this._removeHighlight(this.getKeyForFeature(e)))}removeByKey(e){e?.forEach(e=>e&&this._removeHighlight(e))}removeAll(){this.removeAllHandles()}update(e,t){this.remove(e),this.add(e,t)}_highlight(e,t){const r=e.layer??e.sourceLayer;if(!r)return;const i=this._layerViewCache.get(r);if(i)return void this.addHandles(i.highlight(e,{name:t}),this.getKeyForFeature(e));const s=l.findLayerView(this.view,r);d.highlightsSupported(s)&&(this._layerViewCache.set(r,s),this.addHandles(s.highlight(e,{name:t}),this.getKeyForFeature(e)))}_removeHighlight(e){this.removeHandles(e)}},t.__decorate([i.property()],e.default.prototype,"_layerViewCache",void 0),t.__decorate([i.property()],e.default.prototype,"highlightName",void 0),t.__decorate([i.property()],e.default.prototype,"view",void 0),e.default=t.__decorate([a.subclass("esri.views.draw.support.HighlightHelper")],e.default),e.default});