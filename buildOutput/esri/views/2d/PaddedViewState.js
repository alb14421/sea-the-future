// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../../chunks/tslib.es6","../../core/Accessor","../../core/reactiveUtils","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../core/libs/gl-matrix-2/math/vec2","../../core/libs/gl-matrix-2/factories/vec2f64","./viewpointUtils","./ViewState"],function(t,e,i,o,s,r,d,p,a,c,n,h){"use strict";var l,_;let g=l=class extends e{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new l({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};t.__decorate([o.property()],g.prototype,"left",void 0),t.__decorate([o.property()],g.prototype,"top",void 0),t.__decorate([o.property()],g.prototype,"right",void 0),t.__decorate([o.property()],g.prototype,"bottom",void 0),g=l=t.__decorate([p.subclass("esri.views.2d.PaddedViewState.Padding")],g);let w=_=class extends h{constructor(...t){super(...t),this.paddedViewState=new h,this._updateContent=(()=>{const t=c.create();return()=>{const e=this._get("size"),i=this._get("padding");if(!e||!i)return;const o=this.paddedViewState;a.set(t,i.left+i.right,i.top+i.bottom),a.subtract(t,e,t),a.copy(o.size,t);const s=o.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(i.watch(()=>[this.size,this.padding],()=>this._updateContent(),i.sync)),this.padding=new g,this.size=[0,0]}set padding(t){this._set("padding",t||new g)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const i=this._get("padding");i&&(e=n.addPadding(t.clone(),t,this._get("size"),i));const{targetGeometry:o,rotation:s,scale:r}=e,{x:d,y:p,spatialReference:a}=o,c=this._viewpoint2D;c.center[0]=d,c.center[1]=p,c.rotation=s,c.scale=r,c.spatialReference=a,this._update()}}clone(){return new _({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};return t.__decorate([o.property()],w.prototype,"paddedViewState",void 0),t.__decorate([o.property({type:g})],w.prototype,"padding",null),t.__decorate([o.property()],w.prototype,"viewpoint",null),w=_=t.__decorate([p.subclass("esri.views.2d.PaddedViewState")],w),w});