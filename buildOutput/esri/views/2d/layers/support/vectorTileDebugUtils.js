// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./DebugOverlay"],function(e,t){"use strict";const a=(e,a,n)=>{let r=0;const o=[],s=[];for(const i of e.children)if(i.symbols)for(const u of i.symbols.values())for(const i of u)for(const u of i.colliders(e)){const e=(u.xScreen+u.dxScreen)*a,l=(u.yScreen+u.dyScreen)*a,c=u.width*a,x=u.height*a,d=i.uniqueSymbol?.parts[u.partIndex].targetOpacity>.5;if(!d&&"all"!==n)continue;const f=3,p=1,v=3,h=0,y=d?2:0,D=d?3:0,g=t.makeFlags(y,D);o.push(e,l,g,e+c,l,g,e,l+x,g,e+c,l+x,g),s.push(r,r+1,r+2,r+1,r+3,r+2),r+=4;const C=d?f:p,b=d?v:h,m=t.makeFlags(C,b);o.push(e,l,m,e+c,l,m,e,l+1,m,e+c,l+1,m),s.push(r,r+1,r+2,r+1,r+3,r+2),r+=4,o.push(e,l+x-1,m,e+c,l+x-1,m,e,l+x,m,e+c,l+x,m),s.push(r,r+1,r+2,r+1,r+3,r+2),r+=4,o.push(e,l,m,e+1,l,m,e,l+x,m,e+1,l+x,m),s.push(r,r+1,r+2,r+1,r+3,r+2),r+=4,o.push(e+c-1,l,m,e+c,l,m,e+c-1,l+x,m,e+c,l+x,m),s.push(r,r+1,r+2,r+1,r+3,r+2),r+=4}return{vertexData:o,indexData:s,vertexCount:r}},n=(e,a)=>{let{vertexData:n,indexData:r,vertexCount:o}=a;const[s,i]=e.decluttererOffset,u=t.makeFlags(2,3),l=256+s,c=256+i;for(const e of[-3,3])for(const t of[-3,3])n.push(256,256,u,256+e,256+t,u,l,c,u,l+e,c+t,u),r.push(o,o+1,o+2,o+1,o+3,o+2),o+=4},r=()=>[1,.5,0,1,1,0,0,1,0,1,.5,1,0,.5,0,1],o=()=>[.05,.01,.15,.2];e.showCollisionBoxes=function(e,s){e.container.addChild(new t({getMesh:t=>"vector-tile"===e.layer.type?((e,t,r)=>{const{pixelRatio:o}=t.state,s=e._vectorTileContainer,{vertexData:i,indexData:u,vertexCount:l}=a(s,o,r),{symbolFader:c}=s;return c&&n(c,{vertexData:i,indexData:u,vertexCount:l}),{vertexData:new Int16Array(i),indexData:new Uint32Array(u)}})(e,t,s):((e,t,r)=>{const{pixelRatio:o}=t.state,{vertexData:s,indexData:i,vertexCount:u}=a(e.featureContainer,o,r),l=e.view.labelManager.symbolFader;return l&&n(l,{vertexData:s,indexData:i,vertexCount:u}),{vertexData:new Int16Array(s),indexData:new Uint32Array(i)}})(e,t,s),getColors:r,getOpacities:o}))},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});