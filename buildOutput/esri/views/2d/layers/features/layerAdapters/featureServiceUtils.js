// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../core/has"],function(e,t){"use strict";function n(e,n){return!(!e&&!t("featurelayer-snapshot-non-hosted-exceedslimit-enabled"))&&n?.operations.supportsExceedsLimitStatistics}e.createFeatureIdInfo=function(e){const{objectIdField:t,uniqueIdFields:n}=e;return n?.length?n.length>=2?{type:"unique-id-composite",fieldNames:n}:{type:"unique-id-simple",fieldName:n[0]}:{type:"object-id",fieldName:t}},e.createSnapshotInfo=function(e,r,o,i,s,a){const l=function(e){switch(e){case"esriGeometryMultipoint":return{min:t("featurelayer-snapshot-multipoint-min-threshold"),max:t("featurelayer-snapshot-multipoint-max-threshold")};case"esriGeometryPoint":return{min:t("featurelayer-snapshot-point-min-threshold"),max:t("featurelayer-snapshot-point-max-threshold")};case"esriGeometryMultiPatch":case"esriGeometryPolygon":return{min:t("featurelayer-snapshot-polygon-min-threshold"),max:t("featurelayer-snapshot-polygon-max-threshold")};case"esriGeometryPolyline":return{min:t("featurelayer-snapshot-polyline-min-threshold"),max:t("featurelayer-snapshot-polyline-max-threshold")}}}(i);if(!t("featurelayer-snapshot-enabled")||!o?.query.supportsPagination||o?.operations.supportsEditing||r)return null;const u=function(e,n){const r=n?.clone().intersection(e),o=null!=r?r.width*r.height:0,i=n?n.width*n.height:0,s=0===i?0:o/i,a=t("featurelayer-snapshot-coverage");return!isNaN(s)&&s>=a}(s,a),{min:h,max:m}=l,c=u?m:h,p=function(e){switch(e){case"esriGeometryPoint":return null;case"esriGeometryPolyline":case"esriGeometryPolygon":case"esriGeometryMultiPatch":case"esriGeometryMultipoint":return t("featurelayer-snapshot-max-vertex-count")}}(i);let y=t("featurelayer-snapshot-initial-tolerance");return"esriGeometryPoint"!==i&&"esriGeometryMultipoint"!==i||(y=null),{supportsExceedsLimit:n(e,o),initialTolerance:y,maxFeatureCount:c,maxVertexCount:p}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});