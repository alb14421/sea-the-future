// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../core/Evented","../../../../../geometry/support/aaBoundingBox","../../../../../layers/graphics/featureConversionUtils","../../../../../layers/graphics/data/optimizedFeatureQueryEngineAdapter","../../../../../layers/graphics/data/QueryEngine","../../../../../support/ArcadeExpression","./AProcessorStrategy"],function(e,t,r,a,n,s,i,o){"use strict";class g extends o.AProcessorStrategy{constructor(e,r,a,s,o){super(e,r,o),this.spatialReference=a,this.aggregateFields=s,this._arcadeDependencies=new Set,this.events=new t.EventEmitter,this.featureAdapter=n.optimizedFeatureQueryEngineAdapter;for(const e of s)i.collectExpressionDependencies(this._arcadeDependencies,e.computed)}get aggregateQueryEngine(){return this._aggregateQueryEngine||(this._aggregateQueryEngine=new s.QueryEngine({featureStore:this,fieldsIndex:this._metadata.fieldsIndex,geometryType:this._metadata.geometryType,featureIdInfo:this._metadata.featureIdInfo,spatialReference:this.spatialReference})),this._aggregateQueryEngine}get isAggregate(){return!0}removeChunks(e){}hasArcadeDependency(e){return this._arcadeDependencies.has(e)}forEach(e){return this.forEachAggregateWorldSpace(e)}forEachInBounds(e,t){}forEachBounds(e,t){const n=r.create();for(const r of e){const e=a.getBoundsOptimizedGeometry(n,r.geometry,!1,!1);e&&t(e)}}}e.AAggregateStrategy=g,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});