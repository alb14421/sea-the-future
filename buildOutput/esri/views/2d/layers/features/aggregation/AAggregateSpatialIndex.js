// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../engine/webgl/definitions","../support/arcadeUtils"],function(e,t,r){"use strict";e.AAggregateSpatialIndex=class{constructor(e){this._options=e}insert(e,t){const o=e.getCursor(),{arcadeContextInfo:i,scale:n}=this._options,s=r.createArcadeEvaluationOptions(n,i);for(;o.next();)this._insertFeature(o,s,this._options.sqlOptions,t)}_insertFeature(e,r,o,i){const{featureFilter:n}=this._options;if(null!==n&&!n.check(e,o))return;let s=0,a=0;if("esriGeometryPoint"===e.geometryType)s=e.readXWorldSpace(),a=e.readYWorldSpace();else{if(i){const r=e.readCentroidForDisplay();if(null==r)return;const[o,i]=r.coords;if(o<0||o>t.tileSize||i<0||i>t.tileSize)return}const r=e.readCentroidWorldSpace();if(null==r)return;s=r.coords[0],a=r.coords[1]}this._insert(e,s,a,r)}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});