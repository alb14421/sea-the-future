// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../core/has","../../../input/InputHandler"],function(e,t,a){"use strict";class s extends a.InputHandler{constructor(e,t,a){super(!0),this.view=e,this.pointerType=t,this.registerIncoming("double-tap-drag",a,e=>this._handleDoubleTapDrag(e))}_handleDoubleTapDrag(e){const{data:t}=e,{pointerType:a}=t;if(a!==this.pointerType)return;e.stopPropagation();const{action:s,delta:i}=t,{view:n}=this,{mapViewNavigation:r}=n;switch(s){case"begin":{const{scale:e}=n;this._startScale=e,this._currentScale=e,this._previousDelta=i,r.begin();break}case"update":{if(this._previousDelta.y===i.y)return;this._previousDelta=i;const e=1.015**i.y,t=this._startScale*e,a=t/this._currentScale;r.setViewpointImmediate(a),this._currentScale=t;break}case"end":{const{constraints:e}=n,{effectiveLODs:t,snapToZoom:a}=e;if(!a||!t)return void r.end();const s=e.snapScale(this._currentScale),o=(i.y>0?Math.max(s,e.snapToPreviousScale(this._startScale)):Math.min(s,e.snapToNextScale(this._startScale)))/this._currentScale;r.zoom(o).then(()=>{r.end()});break}}}}e.DoubleTapDragZoom=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});