// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../Color","./ManagedCanvas","./Stage","./webgl/VideoScreenRenderer"],function(e,r,t,s,n){"use strict";class d extends s.Stage{constructor(e,r,s){super(null,r={...r,renderFrame:e=>{}},new t.ManagedCanvas(null,{canvas:e})),this._requestRender=s,this.viewIsReady=!1,this.videoScreenRenderer=new n(this,r),this.videoScreenRenderer.visible=!0}requestRender(){this._requestRender()}processRender(e){this.videoScreenRenderer.bind(e),e.backgroundColor=r.fromArray([0,0,0,0]),super.processRender(e),this.videoScreenRenderer.unbind(e)}}class i extends s.Stage{constructor(e,r,t){super(e,r={...r,renderFrame:e=>{this.render(e)}},t),this._childStage=new d(t.canvas,r,()=>this.requestRender())}get childStage(){return this._childStage}render(e){this._childStage.viewIsReady?(this._childStage.context.enforceState(),this._childStage.renderFrame(e)):this.requestRender(),this.context.enforceState(),super.renderFrame(e)}processRender(e){super.processRender(e),this._childStage.viewIsReady&&this._childStage.visible&&this._childStage.videoScreenRenderer.processRender(e)}}e.ChildStage=d,e.ParentStage=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});