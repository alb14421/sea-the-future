// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["./utils","./styles/Imagery","./styles/Particles","./styles/Stack","./styles/Streamlines"],function(e,t,o,a,n){"use strict";return function(l,i){const{flowSpeed:r,trailLength:s}=l,c=e.getFlowSimulationSettings(l);let g=null;const u={opacity:e.getOpacity(l),size:e.getSize(l)};let y=e.getColor(l);if("none"===l.background)u.color=y;else{"constant"===y.kind&&(y={kind:"ramp",stops:[0,1],values:[0,0,0,1,y.value[0],y.value[1],y.value[2],y.value[3]],count:2});const o={loadImagery:i.loadImagery,timeExtent:i.timeExtent,color:y,opacity:{kind:"constant",value:[1]}};g=new t.Imagery(o),u.color=e.getForegroundColor()}const d={loadImagery:i.loadImagery,createFlowMesh:i.createFlowMesh,simulationSettings:c,timeExtent:i.timeExtent,trailLength:s,flowSpeed:r,featheringSize:1,featheringOffset:.5,introFade:!0,fadeToZero:!0,decayRate:2.3,color:u.color,opacity:u.opacity,size:u.size},m="butt"===l.trailCap||e.getMax(e.getSize(l))<=4?new n(d):new o.Particles(d);return null!=g?new a.Stack([g,m]):m}});