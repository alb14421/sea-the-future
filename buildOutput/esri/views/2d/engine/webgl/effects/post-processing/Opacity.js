// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../../core/maybe","../../../../../webgl/Texture","../../../../../webgl/TextureDescriptor"],function(e,t,r,s){"use strict";e.Opacity=class{constructor(){this._size=[0,0],this._layerFBOTexture=null}dispose(){this._layerFBOTexture=t.disposeMaybe(this._layerFBOTexture)}draw(e,t,r){const{width:s,height:i}=t;this._createOrResizeResources(e,s,i);const{context:a,painter:l}=e,{amount:o}=r,n=a.gl,u=this._layerFBOTexture;a.bindFramebuffer(t),t.copyToTexture(0,0,s,i,0,0,u),a.setBlendingEnabled(!0),a.setStencilTestEnabled(!1),a.setDepthTestEnabled(!1),a.setClearColor(0,0,0,0),a.clear(n.COLOR_BUFFER_BIT),l.blitTexture(a,u,9728,o)}_createOrResizeResources(e,t,i){const{context:a}=e;if(!this._layerFBOTexture||this._size[0]!==t||this._size[1]!==i)if(this._size[0]=t,this._size[1]=i,this._layerFBOTexture)this._layerFBOTexture.resize(t,i);else{const e=new s.TextureDescriptor(t,i);e.internalFormat=6408,e.wrapMode=33071,e.samplingMode=9728,this._layerFBOTexture=new r.Texture(a,e)}}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});