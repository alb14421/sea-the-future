// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./MeshFactory","../../util/createMatcher"],function(e,t,s){"use strict";class o extends t.AMeshFactory{static async create(e,t){const r=await s.createMatcher(e,t.symbology),c=t.labels?await s.createMatcher(e,t.labels):null;return new o(r,c)}constructor(e,t){super(),this._symbology=e,this._labels=t}destroy(){}async enqueueMatcherRequests(e,t){await Promise.all([this._symbology.fetchResources(e,t),this._labels?.fetchResources(e,t)])}enqueueWriterRequests(e,t,s,o){const r=this._symbology.match(t,s,o);if(r){for(const o of r)o.enqueueRequest(e,t,s);if(this._labels){const r=this._labels.match(t,s,o);if(!r)return;for(const o of r)o.enqueueRequest(e,t,s)}}}write(e,t,s,o,r,c){const a=this._symbology.match(s,o,r);if(a){for(const r of a)r.write(e,t,s,o,c);if(e.entityRecordCount()>=1&&this._labels){const n=this._labels.match(s,o,r);if(!n)return;for(const r of n)r.setReferences(a),r.write(e,t,s,o,c)}}}getSortKey(e,t){return this._symbology.getSortKey(e,t)}hasArcadeDependency(e){return!(!this._symbology.hasArcadeDependency(e)&&!this._labels?.hasArcadeDependency(e))}}e.FeatureMeshFactory=o,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});