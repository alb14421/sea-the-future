// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../util/Writer"],function(t,e){"use strict";t.VertexDataWriter=class{constructor(t,i,r=0){const s=6*r*Uint32Array.BYTES_PER_ELEMENT,n=4*r*i.stride,c=i.stride/4,h=i.attributes.find(t=>"pos"===t.name||"position"===t.name);if(!h)throw new Error("InternalError: Unable to find position attribute");this.layout={...i,position:h},this._indices=new e(Uint32Array,s),this._vertices=new e(Uint32Array,n),this._metrics=new e(Uint32Array,0),this._metricCountOffset=this._metrics.push(0),this._strideInt=c,this._instanceId=t}serialize(t){const e=this._indices.buffer(),i=this._vertices.buffer(),r=this._metrics.length?this._metrics.buffer():null;return t.push(e,i),{instanceId:this._instanceId,layout:this.layout,indices:e,vertices:i,metrics:r}}get strideInt(){return this._strideInt}get vertexCount(){return this._vertices.length/this._strideInt}get indexCount(){return this._indices.length}get indexWriter(){return this._indices}get vertexWriter(){return this._vertices}get metricWriter(){return this._metrics}vertexEnsureSize(t){this._vertices.ensureSize(t)}indexEnsureSize(t){this._indices.ensureSize(t)}writeIndex(t){this._indices.push(t)}writeVertex(t){this._vertices.push(t)}writeVertexRegion(t){this._vertices.writeRegion(t)}writeVertexF32(t){this._vertices.writeF32(t)}writeMetric(t){this._metrics.incr(this._metricCountOffset),t.serialize(this._metrics)}},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});