// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../core/Error","../../../../core/Logger","../../../webgl/enums","../../../webgl/getDataTypeBytes","../../../webgl/VertexElementDescriptor"],function(e,t,r,n,a,i){"use strict";const s=()=>r.getLogger("esri.views.2d.engine.webgl.Utils");function o(e){let t=0;const r=e.map(e=>{const r=new i.VertexElementDescriptor(e.name,e.count,e.type,t,0,e.normalized||!1);return t+=e.count*a.getDataTypeBytes(e.type),r});return r.forEach(e=>e.stride=t),r}const c=new Map;e.charCodes=function(e){const t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return t},e.createAttributeLayout=o,e.createProgramDescriptor=(e,t)=>{if(!c.has(e)){const r={bufferLayout:o(t),attributes:(e=>{const t=new Map;for(const r of e)t.set(r.name,r.location);return t})(t)};c.set(e,r)}return c.get(e)},e.getCIMMarkerPlacementHash=function(e){if(null==e)return"";const{type:t}=e;switch(t){case"CIMMarkerPlacementAlongLineRandomSize":return`${t}-${e.seed}-${e.randomization}`;case"CIMMarkerPlacementAlongLineVariableSize":return`${t}-${e.maxRandomOffset}-${e.numberOfSizes}-${e.seed}-${e.variationMethod}`;case"CIMMarkerPlacementAtExtremities":return`${t}-${e.extremityPlacement}-${e.offsetAlongLine}`;case"CIMMarkerPlacementAtRatioPositions":return`${t}-${e.beginPosition}-${e.endPosition}-${e.flipFirst}-${JSON.stringify(e.positionArray)}`;case"CIMMarkerPlacementAtMeasuredUnits":return`${t}-${e.interval}-${e.skipMarkerRate}-${e.placeAtExtremities}`;case"CIMMarkerPlacementInsidePolygon":return`${t}-${e.stepX}-${e.stepY}-${e.randomness}-${e.gridType}-${e.seed}-${e.shiftOddRows}`;case"CIMMarkerPlacementOnLine":return`${t}-${e.relativeTo}-${e.startPointOffset}`;case"CIMMarkerPlacementOnVertices":return`${t}-${e.placeOnControlPoints}-${e.placeOnEndPoints}-${e.placeOnRegularVertices}`;case"CIMMarkerPlacementPolygonCenter":return`${t}-${e.method}`;default:return`${t}`}},e.getPixelArrayCtor=function(e){switch(e){case n.PixelType.UNSIGNED_BYTE:return Uint8Array;case n.PixelType.UNSIGNED_SHORT_4_4_4_4:return Uint16Array;case n.PixelType.FLOAT:return Float32Array;default:return void s().error(new t("webgl-utils",`Unable to handle type ${e}`))}},e.getPixelBytes=function(e){switch(e){case n.PixelType.UNSIGNED_BYTE:return 1;case n.PixelType.UNSIGNED_SHORT_4_4_4_4:return 2;case n.PixelType.FLOAT:return 4;default:return void s().error(new t("webgl-utils",`Unable to handle type ${e}`))}},e.getStrideFromLayout=function(e){return e[0]?.stride??0},e.isSVGImage=e=>e.includes("data:image/svg+xml"),e.isValidSVG=e=>!!e&&(e=e.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(e)&&/[\dz]$/i.test(e)&&e.length>4)),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});