// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./instructions"],function(t,n){"use strict";function i(t){return t instanceof o?t:"object"==typeof t&&"type"in t?a[t.type].hydrate(t):new s(t)}class o{constructor(t){this.inputs=t}encode(){const t=[];for(const n of this.inputs)t.push(...n.encode());return t.push(...this.instructions),t}}class s extends o{constructor(t){super([]),this.value=t}simplify(){return this}get instructions(){if(Array.isArray(this.value)){const[t,i,o,s]=this.value;return null!=s?n.instructions.vector4.encode([t,i||0,o||0,s]):n.instructions.vector3.encode([t,i||0,o||0])}return n.instructions.scalar.encode(this.value)}}class r extends o{constructor(t,n){super([n]),this._config=t,this._parent=n}static hydrate(t){return new r(t,i(t.parent))}simplify(){if(this._config.relativeTranslation||this._config.absoluteScale)return this;const t=this._parent.simplify();if(!(t instanceof s))return this;const[n,i,o,e]=t.value,c=this._config.translation.from[0],a=this._config.translation.from[1],f=this._config.rotation.from,h=this._config.scale.from;if(c===this._config.translation.to[0]&&a===this._config.translation.to[1]&&f===this._config.rotation.to&&h===this._config.scale.to){const t=o+f,r=e*h,u=Math.sin(o),l=Math.cos(o);return new s([l*e*c-u*e*a+n,u*e*c+l*e*a+i,t,r])}return new r(this._config,t)}get instructions(){return n.instructions.animatedTransform.encode(this._config)}}class e extends o{constructor(t,n){super([n]),this._config=t,this._parent=n}static hydrate(t){return new e(t,i(t.parent))}simplify(){const t=this._parent.simplify();if(!(t instanceof s))return this;const[n,i,o,r]=t.value,c=this._config.color.from[0],a=this._config.color.from[1],f=this._config.color.from[2];let h=this._config.color.from[3];const u=this._config.opacity.from;return c===this._config.color.to[0]&&a===this._config.color.to[1]&&f===this._config.color.to[2]&&h===this._config.color.to[3]&&u===this._config.opacity.to?(h*=u,new s([n*c,i*a,o*f,r*h])):new e(this._config,t)}get instructions(){return n.instructions.animatedColor.encode(this._config)}}class c extends o{constructor(t,n){super([n]),this._config=t,this._parent=n}static hydrate(t){return new c(t,i(t.parent))}simplify(){const t=this._parent.simplify();return t instanceof s?new c(this._config,t):this}get instructions(){return n.instructions.animatedShift.encode(this._config)}}const a={AnimatedTransform:r,AnimatedColor:e,AnimatedShift:c};t.AAnimationInfo=o,t.AnimatedColor=e,t.AnimatedShift=c,t.AnimatedTransform=r,t.Constant=s,t.hydrate=i,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});