// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports"],function(t){"use strict";class e{constructor(){this.uid=e.NodeCount++,this._debugName=null,this._isMutable=!1,this.isImplicit=!1}static{this.NodeCount=0}get isMutable(){return this._isMutable}setMutable(){return this._isMutable=!0,this}setDebugName(t){return t=t.split(" ").map((t,e)=>e>0?t.charAt(0).toUpperCase()+t.slice(1):t).join(""),this._debugName=t,this.isImplicit&&this.children[0]instanceof e&&this.children[0].setDebugName(t),this}get debugInfo(){return{name:this._debugName??""}}cloneInto(t){t._debugName=this._debugName,t._isMutable=this._isMutable,t.isImplicit=this.isImplicit,t.uid=this.uid}}function s(t){return"object"==typeof t?t.clone():t}class i extends e{constructor(t){super(),this.child=t,this.shaderType="scope-node"}get children(){return[this.child]}clone(){const t=new i(s(this.child));return this.cloneInto(t),t}}class r extends e{constructor(t){super(),this.text=t,this.shaderType="text-node"}get children(){return[]}clone(){const t=new r(this.text);return this.cloneInto(t),t}}class n extends e{constructor(t,e,s){super(),this.property=t,this.target=e,this.returnType=s,this.shaderType="property-access-node"}get children(){const t=[this.target];return"string"!=typeof this.property&&t.push(this.property),t}clone(){const t=new n(this.property,s(this.target),this.returnType);return this.cloneInto(t),t}}class h extends e{constructor(t,e,s,i){super(),this.x=t,this.y=e,this.target=s,this.returnType=i,this.shaderType="property-access-2d-node"}get children(){return[this.target,this.x,this.y]}clone(){const t=new h(this.x,this.y,s(this.target),this.returnType);return this.cloneInto(t),t}}class o extends e{constructor(t,e,s){super(),this.condition=t,this.ifTrue=e,this.ifFalse=s,this.shaderType="condition-node"}get children(){return[this.condition,this.ifTrue,this.ifFalse]}clone(){const t=s(this.ifTrue),e=this.ifFalse?s(this.ifFalse):null,i=new o(this.condition,t,e);return this.cloneInto(i),i}}class c extends e{constructor(t,e,s,r){super(),this.captureList=t,this.returnType=e,this.generator=r,this.shaderType="block-node",s&&(this.subgraph=new i(s))}get children(){return Object.keys(this.captureList).map(t=>this.captureList[t]).concat(this.subgraph??[])}clone(){const t={};for(const e in this.captureList)t[e]=s(this.captureList[e]);const e=new c(t,this.returnType,this.subgraph?s(this.subgraph.child):this.subgraph,this.generator);return this.cloneInto(e),e}}class u extends e{constructor(t,e,s,i,r,n=!1){super(),this.token=t,this._children=e,this.isInfix=s,this.isPropertyAccess=i,this.returnType=r,this.isTernary=n,this.shaderType="function-node"}get children(){return this._children}clone(){const t=new u(this.token,this._children.map(s),this.isInfix,this.isPropertyAccess,this.returnType,this.isTernary);return this.cloneInto(t),t}}t.ShaderBlockNode=c,t.ShaderConditionNode=o,t.ShaderFunctionNode=u,t.ShaderNode=e,t.ShaderPrimitiveNode=class extends e{constructor(){super(...arguments),this.shaderType="primitive-node"}},t.ShaderPropertyAccess2DNode=h,t.ShaderPropertyAccessNode=n,t.ShaderScopeNode=i,t.ShaderTextNode=r,t.cloneShaderNode=s,t.setReachableUids=function(t,e){const s=[];for(s.push(e);s.length;){const e=s.pop();if("object"==typeof e&&!t.has(e.uid)){t.add(e.uid);for(const t of e.children)s.push(t)}}},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});