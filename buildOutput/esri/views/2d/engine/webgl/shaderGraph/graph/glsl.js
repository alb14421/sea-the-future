// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../../chunks/tslib.es6","./ShaderGraphNode"],function(e,t,n){"use strict";var r,c,i,o,s,u,h,a,d,l,f,p,y,m;function w(t){switch(t.type){case"uint":return P;case"uvec2":return e.Vec2;case"uvec3":return e.Vec3;case"uvec4":return e.Vec4;default:throw new Error("Found unexpected type")}}function v(t){switch(t.type){case"float":return e.UInt;case"vec2":return e.UVec2;case"vec3":return e.UVec3;case"vec4":return e.UVec4;default:throw new Error("Found unexpected type")}}function S(t){switch(t.type){case"int":return P;case"ivec2":return e.Vec2;case"ivec3":return e.Vec3;case"ivec4":return e.Vec4;default:throw new Error("Found unexpected type")}}function b(t){switch(t.type){case"float":return E;case"vec2":return e.IVec2;case"vec3":return e.IVec3;case"vec4":return e.IVec4;default:throw new Error("Found unexpected type")}}function N(t){switch(t.type){case"bool":case"float":case"int":case"uint":return T;case"bvec2":case"vec2":case"ivec2":case"uvec2":return e.BVec2;case"bvec3":case"vec3":case"ivec3":case"uvec3":return e.BVec3;case"bvec4":case"vec4":case"ivec4":case"uvec4":return e.BVec4;default:throw new Error("Unable to handle type")}}function I(e){return new Proxy(e,{get(t,n){if("constructor"===n)return new Proxy(t.constructor,{construct:(e,t,n)=>I(new e(...t))});if(n in t)return t[n];if("string"==typeof n){const t=function(e){const t=[["float","vec2","vec3","vec4"],["int","ivec2","ivec3","ivec4"],["uint","uvec2","uvec3","uvec4"],["bool","bvec2","bvec3","bvec4"]];for(const n of t)if(n.includes(e))return n.map(e=>z[e]);throw new Error("Unable to find type family")}(e.type);return D(e,n,t[n.length-1])}}})}function x(e){return new Proxy(e,{construct:(e,t,n)=>I(new e(...t))})}class g extends Error{}e.FixedArray=class extends n.ShaderPrimitiveNode{static{r=this}static{this.type="array"}constructor(e,t){super(),this.elementType=e,this.size=t,this.children=[],this.type="array"}clone(){const e=new r(this.elementType,this.size);return super.cloneInto(e),e}get(t,n){const r=new E(t),c=null!=n?new E(n):null;return null!=c?M(this,r,c,function(t){switch(t.type){case"bool":case"bvec2":case"bvec3":case"bvec4":return T;case"float":case"vec2":case"vec3":case"vec4":return P;case"int":case"ivec2":case"ivec3":case"ivec4":return E;case"uint":case"uvec2":case"uvec3":case"uvec4":return e.UInt;default:throw new Error("Unable to handle type")}}(this.elementType.constructor)):D(this,r,this.elementType.constructor)}last(){return this.get(this.size-1)}first(){return this.get(0)}findIndex(e,t,n){return G(this,e,t,n)}glslFindIndex(e,t,n){return L(this,e,t,n)}static ofType(e,t){const n={construct:(n,c)=>new r(new e,t)};return new Proxy(r,n)}},e.FixedArray=r=t.__decorate([function(e){return new Proxy(e,{construct:(e,t,n)=>{return r=new e(...t),new Proxy(r,{get(e,t){if(t in e)return e[t];if("string"==typeof t){const e=parseInt(t,10);if(!isNaN(e))return D(r,`[${e}]`,r.elementType.constructor)}}});var r}})}],e.FixedArray);class V extends n.ShaderPrimitiveNode{static{this.type="array-2d"}constructor(e,t,n,r=!1){super(),this.elementType=e,this.xSize=t,this.ySize=n,this.isRowMajor=r,this.children=[],this.type="array-2d"}clone(){const e=new V(this.elementType,this.xSize,this.ySize,this.isRowMajor);return super.cloneInto(e),e}get size(){return this.xSize*this.ySize}get(e,t){return this.isRowMajor?this._getRowMajor(e,t):this._getColumnMajor(e,t)}_getColumnMajor(e,t){const n=new E(e);return D(this,new E(t).add(n.multiply(this.xSize)),this.elementType.constructor)}_getRowMajor(e,t){const n=new E(e),r=new E(t);return D(this,n.add(r.multiply(this.ySize)),this.elementType.constructor)}static ofType(t,n,r,c=!1){const i={construct:(e,i)=>new V(new t,n,r,c)};return new Proxy(e.FixedArray,i)}}class U extends n.ShaderPrimitiveNode{constructor(){super(...arguments),this.type="sampler2D",this.children=[]}static{this.type="sampler2D"}clone(){const e=new U;return e.children=this.children.map(n.cloneShaderNode),super.cloneInto(e),e}}class P extends n.ShaderPrimitiveNode{static{this.type="float"}constructor(e){super(),this.type="float",this.children=[e]}clone(){const e=new P(n.cloneShaderNode(this.children[0]));return super.cloneInto(e),e}multiply(e){return H(this,"number"==typeof e?F(e,P):e)}divide(e){return Y(this,"number"==typeof e?F(e,P):e)}add(e){return J(this,"number"==typeof e?F(e,P):e)}subtract(e){return K(this,"number"==typeof e?F(e,P):e)}}e.Vec2=class extends n.ShaderPrimitiveNode{static{c=this}static{this.type="vec2"}constructor(e,t){super(),this.type="vec2",this.children=[e,t].filter(e=>null!=e)}clone(){const e=new c(n.cloneShaderNode(this.children[0]),n.cloneShaderNode(this.children[1]));return super.cloneInto(e),e}get 0(){return D(this,"[0]",P)}get 1(){return D(this,"[1]",P)}get 2(){throw new g}get 3(){throw new g}multiply(e){return H(this,"number"==typeof e?F(e,P):e)}divide(e){return Y(this,"number"==typeof e?F(e,P):e)}add(e){return J(this,"number"==typeof e?F(e,P):e)}subtract(e){return K(this,"number"==typeof e?F(e,P):e)}},e.Vec2=c=t.__decorate([x],e.Vec2),e.Vec3=class extends n.ShaderPrimitiveNode{static{i=this}static{this.type="vec3"}constructor(e,t,n){super(),this.type="vec3",this.children=[e,t,n].filter(e=>null!=e)}get 0(){return D(this,"[0]",P)}get 1(){return D(this,"[1]",P)}get 2(){return D(this,"[2]",P)}get 3(){throw new g}clone(){const e=new i(n.cloneShaderNode(this.children[0]),n.cloneShaderNode(this.children[1]),n.cloneShaderNode(this.children[2]));return super.cloneInto(e),e}multiply(e){return H(this,"number"==typeof e?F(e,P):e)}divide(e){return Y(this,"number"==typeof e?F(e,P):e)}add(e){return J(this,"number"==typeof e?F(e,P):e)}subtract(e){return K(this,"number"==typeof e?F(e,P):e)}},e.Vec3=i=t.__decorate([x],e.Vec3),e.Vec4=class extends n.ShaderPrimitiveNode{static{o=this}static{this.type="vec4"}constructor(e,t,n,r){super(),this.type="vec4",this.children=[e,t,n,r].filter(e=>null!=e)}clone(){const e=new o(n.cloneShaderNode(this.children[0]),n.cloneShaderNode(this.children[1]),n.cloneShaderNode(this.children[2]),n.cloneShaderNode(this.children[3]));return super.cloneInto(e),e}get 0(){return D(this,"[0]",P)}get 1(){return D(this,"[1]",P)}get 2(){return D(this,"[2]",P)}get 3(){return D(this,"[3]",P)}multiply(e){return H(this,"number"==typeof e?F(e,P):e)}divide(e){return Y(this,"number"==typeof e?F(e,P):e)}add(e){return J(this,"number"==typeof e?F(e,P):e)}subtract(e){return K(this,"number"==typeof e?F(e,P):e)}},e.Vec4=o=t.__decorate([x],e.Vec4),e.UInt=class extends n.ShaderPrimitiveNode{static{s=this}static{this.type="uint"}constructor(e){super(),this.type="uint",this.children=[e]}clone(){const e=new s(n.cloneShaderNode(this.children[0]));return super.cloneInto(e),e}multiply(e){return H(this,F(e,s))}add(e){return J(this,F(e,s))}subtract(e){return K(this,F(e,s))}divide(e){return Y(this,F(e,s))}},e.UInt=s=t.__decorate([x],e.UInt),e.UVec2=class extends n.ShaderPrimitiveNode{static{u=this}static{this.type="uvec2"}constructor(e,t){super(),this.type="uvec2",this.children=[e,t].filter(e=>null!=e)}clone(){const e=new u(n.cloneShaderNode(this.children[0]),n.cloneShaderNode(this.children[1]));return super.cloneInto(e),e}get 0(){return D(this,"[0]",E)}get 1(){return D(this,"[1]",E)}get 2(){throw new g}get 3(){throw new g}multiply(t){return H(this,"number"==typeof t?F(t,e.UInt):t)}divide(t){return Y(this,"number"==typeof t?F(t,e.UInt):t)}add(t){return J(this,"number"==typeof t?F(t,e.UInt):t)}subtract(t){return K(this,"number"==typeof t?F(t,e.UInt):t)}},e.UVec2=u=t.__decorate([x],e.UVec2),e.UVec3=class extends n.ShaderPrimitiveNode{static{h=this}static{this.type="uvec3"}constructor(e,t,n){super(),this.type="uvec3",this.children=[e,t,n].filter(e=>null!=e)}clone(){const e=new h(n.cloneShaderNode(this.children[0]),n.cloneShaderNode(this.children[1]),n.cloneShaderNode(this.children[2]));return super.cloneInto(e),e}get 0(){return D(this,"[0]",e.UInt)}get 1(){return D(this,"[1]",e.UInt)}get 2(){return D(this,"[2]",e.UInt)}get 3(){throw new g}multiply(t){return H(this,"number"==typeof t?F(t,e.UInt):t)}divide(t){return Y(this,"number"==typeof t?F(t,e.UInt):t)}add(t){return J(this,"number"==typeof t?F(t,e.UInt):t)}subtract(t){return K(this,"number"==typeof t?F(t,e.UInt):t)}},e.UVec3=h=t.__decorate([x],e.UVec3),e.UVec4=class extends n.ShaderPrimitiveNode{static{a=this}static{this.type="uvec4"}constructor(e,t,n,r){super(),this.type="uvec4",this.children=[e,t,n,r].filter(e=>null!=e)}clone(){const e=new a(n.cloneShaderNode(this.children[0]),n.cloneShaderNode(this.children[1]),n.cloneShaderNode(this.children[2]),n.cloneShaderNode(this.children[3]));return super.cloneInto(e),e}get 0(){return D(this,"[0]",e.UInt)}get 1(){return D(this,"[1]",e.UInt)}get 2(){return D(this,"[2]",e.UInt)}get 3(){return D(this,"[3]",e.UInt)}multiply(t){return H(this,"number"==typeof t?F(t,e.UInt):t)}divide(t){return Y(this,"number"==typeof t?F(t,e.UInt):t)}add(t){return J(this,"number"==typeof t?F(t,e.UInt):t)}subtract(t){return K(this,"number"==typeof t?F(t,e.UInt):t)}},e.UVec4=a=t.__decorate([x],e.UVec4);class T extends n.ShaderPrimitiveNode{static{this.type="bool"}constructor(e){super(),this.type="bool",this.children=[e]}and(e){return te(this,e)}or(e){return Q(this,e)}xor(e){return Z(this,e)}clone(){const e=new T(n.cloneShaderNode(this.children[0]));return super.cloneInto(e),e}}function F(e,t){return"number"==typeof e?new t(e):e}e.BVec2=class extends n.ShaderPrimitiveNode{static{d=this}static{this.type="bvec2"}constructor(e,t){super(),this.type="bvec2",this.children=[e,t].filter(e=>null!=e)}all(){return ne(this)}any(){return re(this)}clone(){const e=new d(n.cloneShaderNode(this.children[0]),n.cloneShaderNode(this.children[1]));return super.cloneInto(e),e}},e.BVec2=d=t.__decorate([x],e.BVec2),e.BVec3=class extends n.ShaderPrimitiveNode{static{l=this}static{this.type="bvec3"}constructor(e,t,n){super(),this.type="bvec3",this.children=[e,t,n].filter(e=>null!=e)}all(){return ne(this)}any(){return re(this)}clone(){const e=new l(n.cloneShaderNode(this.children[0]),n.cloneShaderNode(this.children[1]),n.cloneShaderNode(this.children[2]));return super.cloneInto(e),e}},e.BVec3=l=t.__decorate([x],e.BVec3),e.BVec4=class extends n.ShaderPrimitiveNode{static{f=this}static{this.type="bvec4"}constructor(e,t,n,r){super(),this.type="bvec4",this.children=[e,t,n,r].filter(e=>null!=e)}all(){return ne(this)}any(){return re(this)}clone(){const e=new f(n.cloneShaderNode(this.children[0]),n.cloneShaderNode(this.children[1]),n.cloneShaderNode(this.children[2]),n.cloneShaderNode(this.children[3]));return super.cloneInto(e),e}},e.BVec4=f=t.__decorate([x],e.BVec4);class E extends n.ShaderPrimitiveNode{static{this.type="int"}constructor(e){super(),this.type="int",this.children=[e]}multiply(e){return H(this,F(e,E))}add(e){return J(this,F(e,E))}subtract(e){return K(this,F(e,E))}divide(e){return Y(this,F(e,E))}clone(){const e=new E(n.cloneShaderNode(this.children[0]));return super.cloneInto(e),e}}e.IVec2=class extends n.ShaderPrimitiveNode{static{p=this}static{this.type="ivec2"}constructor(e,t){super(),this.type="ivec2",this.children=[e,t].filter(e=>null!=e)}clone(){const e=new p(n.cloneShaderNode(this.children[0]),n.cloneShaderNode(this.children[1]));return super.cloneInto(e),e}get 0(){return D(this,"[0]",E)}get 1(){return D(this,"[1]",E)}get 2(){throw new g}get 3(){throw new g}multiply(e){return H(this,"number"==typeof e?F(e,E):e)}divide(e){return Y(this,"number"==typeof e?F(e,E):e)}add(e){return J(this,"number"==typeof e?F(e,E):e)}subtract(e){return K(this,"number"==typeof e?F(e,E):e)}},e.IVec2=p=t.__decorate([x],e.IVec2),e.IVec3=class extends n.ShaderPrimitiveNode{static{y=this}static{this.type="ivec3"}constructor(e,t,n){super(),this.type="ivec3",this.children=[e,t,n].filter(e=>null!=e)}clone(){const e=new y(n.cloneShaderNode(this.children[0]),n.cloneShaderNode(this.children[1]),n.cloneShaderNode(this.children[2]));return super.cloneInto(e),e}get 0(){return D(this,"[0]",E)}get 1(){return D(this,"[1]",E)}get 2(){return D(this,"[2]",E)}get 3(){throw new g}multiply(e){return H(this,"number"==typeof e?F(e,E):e)}divide(e){return Y(this,"number"==typeof e?F(e,E):e)}add(e){return J(this,"number"==typeof e?F(e,E):e)}subtract(e){return K(this,"number"==typeof e?F(e,E):e)}},e.IVec3=y=t.__decorate([x],e.IVec3),e.IVec4=class extends n.ShaderPrimitiveNode{static{m=this}static{this.type="ivec4"}constructor(e,t,n,r){super(),this.type="ivec4",this.children=[e,t,n,r].filter(e=>null!=e)}clone(){const e=new m(n.cloneShaderNode(this.children[0]),n.cloneShaderNode(this.children[1]),n.cloneShaderNode(this.children[2]),n.cloneShaderNode(this.children[3]));return super.cloneInto(e),e}get 0(){return D(this,"[0]",E)}get 1(){return D(this,"[1]",E)}get 2(){return D(this,"[2]",E)}get 3(){return D(this,"[3]",E)}multiply(e){return H(this,"number"==typeof e?F(e,E):e)}divide(e){return Y(this,"number"==typeof e?F(e,E):e)}add(e){return J(this,"number"==typeof e?F(e,E):e)}subtract(e){return K(this,"number"==typeof e?F(e,E):e)}},e.IVec4=m=t.__decorate([x],e.IVec4);class _ extends n.ShaderPrimitiveNode{static{this.type="mat2"}constructor(e,t,n,r){super(),this.type="mat2",this.children=[e,t,n,r]}clone(){const e=new _(n.cloneShaderNode(this.children[0]),n.cloneShaderNode(this.children[1]),n.cloneShaderNode(this.children[2]),n.cloneShaderNode(this.children[3]));return super.cloneInto(e),e}get(e,t){return M(this,new E(e),new E(t),P)}multiply(e){return H(this,e)}}class B extends n.ShaderPrimitiveNode{static{this.type="mat3"}static identity(){return new B(1,0,0,0,1,0,0,0,1)}static fromRotation(e){const t=ie(e),n=ce(e);return new B(n,t,0,R(t),n,0,0,0,1)}constructor(e,t,n,r,c,i,o,s,u){super(),this.type="mat3",this.children=[e,t,n,r,c,i,o,s,u]}add(e){return J(this,e)}multiply(e){return H(this,e)}get(e,t){return M(this,new E(e),new E(t),P)}clone(){const e=new B(n.cloneShaderNode(this.children[0]),n.cloneShaderNode(this.children[1]),n.cloneShaderNode(this.children[2]),n.cloneShaderNode(this.children[3]),n.cloneShaderNode(this.children[4]),n.cloneShaderNode(this.children[5]),n.cloneShaderNode(this.children[6]),n.cloneShaderNode(this.children[7]),n.cloneShaderNode(this.children[8]));return super.cloneInto(e),e}}class $ extends n.ShaderPrimitiveNode{static{this.type="mat4"}static identity(){return new $(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}constructor(e,t,n,r,c,i,o,s,u,h,a,d,l,f,p,y){super(),this.type="mat4",this.children=[e,t,n,r,c,i,o,s,u,h,a,d,l,f,p,y]}static fromColumns(e,t,n,r){return new $(e.x,e.y,e.z,e.w,t.x,t.y,t.z,t.w,n.x,n.y,n.z,n.w,r.x,r.y,r.z,r.w)}multiply(e){return H(this,e)}get(e,t){return M(this,new E(e),new E(t),P)}clone(){const e=new $(n.cloneShaderNode(this.children[0]),n.cloneShaderNode(this.children[1]),n.cloneShaderNode(this.children[2]),n.cloneShaderNode(this.children[3]),n.cloneShaderNode(this.children[4]),n.cloneShaderNode(this.children[5]),n.cloneShaderNode(this.children[6]),n.cloneShaderNode(this.children[7]),n.cloneShaderNode(this.children[8]),n.cloneShaderNode(this.children[9]),n.cloneShaderNode(this.children[10]),n.cloneShaderNode(this.children[11]),n.cloneShaderNode(this.children[12]),n.cloneShaderNode(this.children[13]),n.cloneShaderNode(this.children[14]),n.cloneShaderNode(this.children[15]));return super.cloneInto(e),e}}const z={float:P,vec2:e.Vec2,vec3:e.Vec3,vec4:e.Vec4,int:E,ivec2:e.IVec2,ivec3:e.IVec3,ivec4:e.IVec4,uint:e.UInt,uvec2:e.UVec2,uvec3:e.UVec3,uvec4:e.UVec4,bool:T,bvec2:e.BVec2,bvec3:e.BVec3,bvec4:e.BVec4},k=(...e)=>new P(...e);function D(e,t,r){const c=new r(new n.ShaderPropertyAccessNode(t,e,r));return c.isImplicit=!0,c}function M(e,t,r,c){const i=new c(new n.ShaderPropertyAccess2DNode(t,r,e,c));return i.isImplicit=!0,i}function q(e,t,r,c=null){if(c){const i=new c,o=new c(new n.ShaderFunctionNode(e,[t,r],!0,!1,i));return o.isImplicit=!0,o}if("float"===t.type||"int"===t.type){const c=new r.constructor(new n.ShaderFunctionNode(e,[t,r],!0,!1,r.constructor));return c.isImplicit=!0,c}if(("mat2"===t.type||"mat3"===t.type||"mat4"===t.type)&&"float"!==r.type){const c=new r.constructor(new n.ShaderFunctionNode(e,[t,r],!0,!1,r.constructor));return c.isImplicit=!0,c}const i=new t.constructor(new n.ShaderFunctionNode(e,[t,r],!0,!1,t.constructor));return i.isImplicit=!0,i}function j(e,t,r=t.constructor){const c=new r(new n.ShaderFunctionNode(e,[t],!1,!1,r));return c.isImplicit=!0,c}function C(e,t,r,c=t.constructor){const i=new c(new n.ShaderFunctionNode(e,[t,r],!1,!1,c));return i.isImplicit=!0,i}function A(e,t,r,c,i=t.constructor){const o=new i(new n.ShaderFunctionNode(e,[t,r,c],!1,!1,i));return o.isImplicit=!0,o}function R(e){return H(e,k(-1))}function O(e,t,r,c){return new t(new n.ShaderBlockNode(e,t,r,c))}function G(e,t,n=0,r=e.size){const c=new E(n).setMutable().setDebugName("FindIndexIterator"),i=t(e.get(c)).setDebugName("FindIndexPredicate"),o=O({iter:c},E,i,({out:e,iter:t,subgraph:n})=>`\n${e} = -1;\n\nfor (; ${t} < ${r}; ${t}++) {\n\n${n.body}\n\n  if (${n.varName}) {\n    ${e} = ${t};\n    break;\n  }\n\n}\n`).setDebugName("FindIndexBlock");return o}function L(e,t,n=0,r=e.size){const c=O({array:e},E,null,({out:e,array:c})=>`\n${e} = -1;\nfor (int i = ${n}; i < ${r}; i++) {\n  bool condition;\n  ${t({array:c,i:"i",out:"condition"})}\n  if (condition) {\n    ${e} = i;\n    break;\n  }\n}\n`).setDebugName("GlslFindIndexBlock");return c}function X(e,t,r){const c="function"==typeof t?t():t,i="function"==typeof r?r():r,o=new c.constructor(new n.ShaderConditionNode(e,c,i));return o.isImplicit=!0,o}function H(e,t){return q("*",e,t)}function Y(e,t){return q("/",e,t)}function J(e,t){return q("+",e,t)}function K(e,t){return q("-",e,t)}function Q(...e){return e.length<=1?e[0]:e.slice(1).reduce((e,t)=>W(e,t),e[0])}function W(e,t){return q("||",e,t,T)}function Z(...e){return e.length<=1?e[0]:e.slice(1).reduce((e,t)=>ee(e,t),e[0])}function ee(e,t){return q("^^",e,t,T)}function te(...e){return e.length<=1?e[0]:e.slice(1).reduce((e,t)=>q("&&",e,t,T),e[0])}function ne(e){return j("all",e,T)}function re(e){return j("any",e,T)}function ce(e){return j("cos",e)}function ie(e){return j("sin",e)}e.Bool=T,e.FixedArray2D=V,e.Float=P,e.Int=E,e.Mat2=_,e.Mat3=B,e.Mat4=$,e.Sampler2D=U,e._or=W,e._xor=ee,e.abs=function(e){return j("abs",e)},e.acos=function(e){return j("acos",e)},e.acosh=function(e){return j("acosh",e)},e.add=J,e.all=ne,e.and=te,e.any=re,e.asin=function(e){return j("asin",e)},e.asinh=function(e){return j("asinh",e)},e.atan=function(e,t){return null==t?j("atan",e):C("atan",e,t,e.constructor)},e.atanh=function(e){return j("atanh",e)},e.bitAnd=function(e,t){return q("&",e,t)},e.bitNot=function(e){return j("~",e)},e.bitOr=function(e,t){return q("|",e,t)},e.bitRShift=function(e,t){return q(">>",e,t)},e.bitShift=function(e,t){return q("<<",e,t)},e.bitXor=function(e,t){return q("^",e,t)},e.block=O,e.ceil=function(e){return j("ceil",e)},e.clamp=function(e,t,n){return A("clamp",e,t,n,e.constructor)},e.cond=function(...e){const t=e.map(([e,t])=>"function"==typeof t?[e,t()]:[e,t]),n=t[0][1].constructor,r=t.findIndex(e=>!0===e[0]);if(-1===r)throw new Error("A cond must have a fallthrough case with `true`/; ");const c=t.slice(0,r),i=t[r][1],o=new n(c.reduceRight((e,t)=>X(t[0],t[1],e),i));return o.isImplicit=!0,o},e.cos=ce,e.cosh=function(e){return j("cosh",e)},e.cross=function(e,t){return C("cross",e,t,e.constructor)},e.dFdx=function(e){return j("dFdX",e)},e.dFdy=function(e){return j("dFdY",e)},e.definePropertyAccess=D,e.definePropertyAccess2D=M,e.degrees=function(e){return j("degrees",e)},e.determinant=function(e){return j("determinant",e,P)},e.distance=function(e,t){return C("distance",e,t,P)},e.divide=Y,e.dot=function(e,t){return C("dot",e,t,P)},e.equal=function(e,t){return q("==",e,t,T)},e.equalComponent=function(e,t){return C("equal",e,t,N(e))},e.exp=function(e){return j("exp",e)},e.exp2=function(e){return j("exp2",e)},e.faceforward=function(e,t,n){return A("faceforward",e,t,n)},e.findIndex=G,e.float=k,e.floatBitsToInt=function(e){return j("floatBitsToInt",e,b(e))},e.floatBitsToUint=function(e){return j("floatBitsToUint",e,v(e))},e.floor=function(e){return j("floor",e)},e.fract=function(e){return j("fract",e)},e.fwidth=function(e){return j("fwidth",e)},e.getTypeElementLengthForType=function e(t){switch(t.type){case"float":case"int":case"uint":case"bool":case"sampler2D":return 1;case"vec2":case"ivec2":case"uvec2":case"bvec2":return 2;case"vec3":case"ivec3":case"uvec3":case"bvec3":return 3;case"vec4":case"ivec4":case"uvec4":case"bvec4":case"mat2":return 4;case"mat3":return 9;case"mat4":return 16;case"array":case"array-2d":return t.size*e(t.elementType)}},e.glslFindIndex=L,e.greaterThan=function(e,t){return q(">",e,t,T)},e.greaterThanComponent=function(e,t){return C("greaterThan",e,t,N(e))},e.greaterThanEqual=function(e,t){return q(">=",e,t,T)},e.greaterThanEqualComponent=function(e,t){return C("greaterThanEqual",e,t,N(e))},e.ifElse=X,e.int=(...e)=>new E(...e),e.intBitsToFloat=function(e){return j("intBitsToFloat",e,S(e))},e.intMod=function(e,t){return q("%",e,t)},e.inverse=function(e){return j("inverse",e,P)},e.inversesqrt=function(e){return j("inversesqrt",e)},e.isinf=function(e){return j("isinf",e,N(e))},e.isnan=function(e){return j("isnan",e,N(e))},e.length=function(e){return j("length",e,P)},e.lessThan=function(e,t){return q("<",e,t,T)},e.lessThanComponent=function(e,t){return C("lessThan",e,t,N(e))},e.lessThanEqual=function(e,t){return q("<=",e,t,T)},e.lessThanEqualComponent=function(e,t){return C("lessThanEqual",e,t,N(e))},e.log=function(e){return j("log",e)},e.log2=function(e){return j("log2",e)},e.mat2=(...e)=>new _(...e),e.mat3=(...e)=>new B(...e),e.mat4=(...e)=>new $(...e),e.matrixCompMult=function(e,t){return C("matrixCompMult",e,t)},e.max=function(e,t){return C("max",e,t)},e.min=function(e,t){return C("min",e,t)},e.mix=function(e,t,n){return A("mix",e,t,n)},e.mod=function(e,t){return C("mod",e,t)},e.modf=function(e,t){throw new Error("modf not implemented")},e.multiply=H,e.namedScope=function(e,t){const r="function"==typeof e?e():e,c=new r.constructor(new n.ShaderScopeNode(r).setDebugName(t));return c.isImplicit=!0,c},e.negate=R,e.normalize=function(e){return j("normalize",e)},e.not=function(e){return"bool"===e.type?j("!",e):j("not",e)},e.notEqual=function(e,t){return q("!=",e,t,T)},e.notEqualComponent=function(e,t){return C("notEqual",e,t,N(e))},e.or=Q,e.outerProduct=function(e,t){throw new Error("Impl type?")},e.packHalf2x16=function(t){return j("packHalf2x16",t,e.UInt)},e.packSnorm2x16=function(t){return j("packSnorm2x16",t,e.UInt)},e.packUnorm2x16=function(t){return j("packUnorm2x16",t,e.UInt)},e.pow=function(e,t){return C("pow",e,t)},e.radians=function(e){return j("radians",e)},e.reduce2D=function(e,t){const{initialValue:n,xRange:r,yRange:c,callback:i}=t,[o,s]=r,[u,h]=c,a=new E(0).setMutable().setDebugName("iterX"),d=new E(0).setMutable().setDebugName("iterY"),l=n.setMutable().setDebugName("accumulator"),f=i(l,e.get(a,d),a,d).setDebugName("callback");return O({iterX:a,iterY:d,accumulator:l},n.constructor,f,({out:e,iterX:t,iterY:n,accumulator:r,subgraph:c})=>`\nfor (${n} = ${u}; ${n} < ${h}; ${n}++) {\n  for (${t} = ${o}; ${t} < ${s}; ${t}++) {\n\n  ${c.body}\n\n  ${r} = ${c.varName};\n  }\n}\n${e} = ${r};\n`).setDebugName("reduce2DBody")},e.reflect=function(e,t){return C("reflect",e,t)},e.refract=function(e,t,n){return A("refract",e,t,n)},e.round=function(e){return j("round",e)},e.roundEven=function(e){return j("roundEven",e)},e.sign=function(e){return j("sign",e)},e.sin=ie,e.sinh=function(e){return j("sinh",e)},e.smoothstep=function(e,t,n){return A("smoothstep",e,t,n)},e.sqrt=function(e){return j("sqrt",e)},e.step=function(e,t){return C("step",e,t,t.constructor)},e.subtract=K,e.tan=function(e){return j("tan",e)},e.tanh=function(e){return j("tanh",e)},e.texelFetch=function(t,n,r){return A("texelFetch",t,n,r,e.Vec4)},e.texelFetchOffset=function(e,t,n,r){throw new Error("Impl type")},e.texture=function(e,t,n){throw new Error("Impl type")},e.texture2D=function(t,n){return C("texture",t,n,e.Vec4)},e.textureGrad=function(e,t,n,r){throw new Error("Impl type")},e.textureGradOffset=function(e,t,n,r,c){throw new Error("Impl type")},e.textureLod=function(e,t,n){throw new Error("Impl type")},e.textureLodOffset=function(e,t,n,r){throw new Error("Impl type")},e.textureOffset=function(e,t,n,r){throw new Error("Impl type")},e.textureProj=function(e,t,n){throw new Error("Impl type")},e.textureProjGrad=function(e,t,n,r){throw new Error("Impl type")},e.textureProjGradOffset=function(e,t,n,r,c){throw new Error("Impl type")},e.textureProjLod=function(e,t,n){throw new Error("Impl type")},e.textureProjLodOffset=function(e,t,n,r){throw new Error("Impl type")},e.textureProjOffset=function(e,t,n,r){throw new Error("Impl type")},e.textureSize=function(e,t){throw new Error("Impl type")},e.transformFloatToInt=b,e.transformFloatToUInt=v,e.transformIntToFloat=S,e.transformTypeToBooleanType=N,e.transformUIntToFloat=w,e.transpose=function(e){return j("transpose",e)},e.trunc=function(e){return j("trunc",e)},e.uintBitsToFloat=function(e){return j("uintBitsToFloat",e,w(e))},e.unpackHalf2x16=function(t){return j("unpackHalf2x16",t,e.Vec2)},e.unpackSnorm2x16=function(t){return j("unpackSnorm2x16",t,e.Vec2)},e.unpackUnorm2x16=function(t){return j("unpackUnorm2x16",t,e.Vec2)},e.vec2=(...t)=>new e.Vec2(...t),e.vec3=(...t)=>new e.Vec3(...t),e.vec4=(...t)=>new e.Vec4(...t),e.when=function(e,t){const r=new t.constructor(new n.ShaderConditionNode(e,t,null));return r.isImplicit=!0,r},e.xor=Z,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});