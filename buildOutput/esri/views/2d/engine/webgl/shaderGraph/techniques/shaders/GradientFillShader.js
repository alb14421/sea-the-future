// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../../../chunks/tslib.es6","../../GraphShaderModule","../../graph/glsl","../fill/gradientFillConstants","./AFeatureShader","./FillShader","./MosaicInfo","./utils"],function(e,t,i,r,o,a,n,l,s){"use strict";class d extends n.FillVertexInput{}t.__decorate([i.location(5,r.Vec4)],d.prototype,"tlbr",void 0),t.__decorate([i.location(6,r.Vec2)],d.prototype,"relativePosition",void 0),t.__decorate([i.location(7,r.Float)],d.prototype,"gradientMethod",void 0),t.__decorate([i.location(8,r.Vec2)],d.prototype,"relativeGradientSize",void 0);class c extends a.FeatureFragmentInput{}class u extends n.FillShader{constructor(){super(...arguments),this.type="GradientFillShader"}vertex(e,t){const{tlbr:i,relativePosition:a,gradientMethod:n,relativeGradientSize:l}=e,d=r.ifElse(s.getBitBool(e.bitset,o.bitset.isAbsolute),this.view.displayZoomFactor,new r.Float(1));return{...super.vertex(e,t),tlbr:i,relativePosition:a,gradientMethod:n,gradientSize:l.multiply(d),isDiscrete:s.getBit(e.bitset,o.bitset.isDiscrete)}}fragment(e){const{tlbr:t,relativePosition:i,gradientMethod:a,gradientSize:n,isDiscrete:l}=e,d=r.ifElse(r.greaterThan(l,new r.Float(.5)),n.subtract(1),new r.Vec2(0)),c=r.cond([r.equal(a,new r.Float(o.gradientFillMethods.rectangular)),()=>{const e=r.abs(i).add(d).divide(n);return s.oneMinus(r.max(e.x,e.y))}],[r.equal(a,new r.Float(o.gradientFillMethods.circular)),s.oneMinus(r.sqrt(r.dot(i,i)).add(d.x).divide(n.x))],[!0,s.oneMinus(i.x.add(d.x).divide(n.x))]),u=new r.Vec2(r.clamp(c,new r.Float(0),new r.Float(1)),.5),p=r.mix(t.xy,t.zw,u).divide(this.mosaicInfo.size),F=r.texture2D(this.mosaicInfo.texture,p),g=e.color.a;return this.getFragmentOutput(F.multiply(g),e,new r.Float(0))}}t.__decorate([i.uniform(l.MosaicInfo)],u.prototype,"mosaicInfo",void 0),t.__decorate([t.__param(0,i.input(d)),t.__param(1,i.input(a.BaseHittestVertexInput))],u.prototype,"vertex",null),t.__decorate([t.__param(0,i.input(c))],u.prototype,"fragment",null),e.GradientFillFragmentInput=c,e.GradientFillShader=u,e.GradientFillVertexInput=d,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});