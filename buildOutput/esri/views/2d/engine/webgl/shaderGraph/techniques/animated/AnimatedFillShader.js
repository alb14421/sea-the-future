// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../../../chunks/tslib.es6","../../GraphShaderModule","../../graph/glsl","./AAnimatedPolyShader","../shaders/ComplexFillShader","../shaders/hittestUtils"],function(t,e,i,s,o,l,n){"use strict";class r extends o.AAnimatedPolyShader{constructor(){super(...arguments),this.type="AnimatedFillShader",this.computeAttributes={pos:["nextPos1","nextPos2"]}}vertex(t,e){const{distanceToPx:i,ndc:o,z:n,color:r,isOutline:a,strokeWidth:u,isSDF:p,baseSize:d,scale:c,scaleSymbolsProportionally:m}=this._vertexPoly(t),h=this.view.requiredZoomFactor,y=t.sizing.xy,x=y.multiply(h),P=new s.Float(0),g=s.sin(P),F=s.cos(P),S=l.getPatternMatrix(t.id,x,g,F,t.bitset),b=this.localTileOffset.getPatternOffsetAtTileOrigin(y,g,F),f=h.multiply(t.offset.subtract(b)).divide(x),_=new s.Vec3(t.pos,1),w=S.multiply(_).xy.subtract(f),v=t.tlbr.divide(this.mosaicInfo.size.xyxy);return{glPosition:new s.Vec4(o,n,1),tlbr:v,uv:w,color:r.multiply(new s.Float(1).subtract(a)),outlineColor:r.multiply(a),distanceToPx:i,strokeWidth:u.multiply(s.mix(new s.Float(1),c,m)),isOutline:a,isSDF:p,...this.maybeRunHittest(t,e,{pos:t.pos,size:d,sizeCorrection:new s.Float(1),isMapAligned:new s.Float(1),vvRotationMat3:new s.Mat3(1,0,0,0,1,0,0,0,1),placementMat3:new s.Mat3(1,0,0,0,1,0,0,0,1),outlineSize:new s.Float(1),distanceToPx:i,isSDF:p})}}fragment(t){const e=this._fragmentPoly(t);return this.getFragmentOutput(e,t)}hittest(t,e,i){return n.hittestFill(this,t,e)}}e.__decorate([e.__param(0,i.input(o.PolyVertexInput)),e.__param(1,i.input(o.PolyHittestVertexInput))],r.prototype,"vertex",null),e.__decorate([e.__param(0,i.input(o.PolyFragmentInput))],r.prototype,"fragment",null),t.AnimatedFillShader=r,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});