// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../../../../chunks/tslib.es6","../../../GraphShaderModule","../../../graph/glsl","./BaseRasterColorizerShader","./colorConversion","./lut","./surface"],function(e,o,i,t,r,a,l,s){"use strict";class n extends r.BaseRasterColorizerShader{constructor(){super(...arguments),this.type="RasterColorizerShadedReliefShader",this.applyColormap=!1,this.isMultidirectional=!1}_colorize(e){const{texture:o}=this.config,i=s.getSurfaceValues(o,e,this.config.srcImageSize),r=s.hillshade(i,this.hillshadeConfig,this.isMultidirectional);if(!this.applyColormap)return new t.Vec4(r.x,r.x,r.x,r.a);const{minValue:n,maxValue:d}=this.hillshadeConfig,c=this._getPixel(e),h=d.subtract(n),p=c.r.subtract(n),u=t.clamp(p.divide(h),new t.Float(0),new t.Float(1)),f=l.lookupColor(new t.Vec4(u,u,u,1),new t.Float(255),this.colormapConfig),g=a.rgb2hsv(f.xyz),C=a.hsv2rgb(new t.Vec3(g.xy,r.x));return new t.Vec4(C,f.a.multiply(r.a))}}o.__decorate([i.define],n.prototype,"applyColormap",void 0),o.__decorate([i.define],n.prototype,"isMultidirectional",void 0),o.__decorate([i.uniform(s.HillshadeConfig)],n.prototype,"hillshadeConfig",void 0),o.__decorate([i.option(l.ColormapConfig)],n.prototype,"colormapConfig",void 0),e.RasterColorizerShadedReliefShader=n,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});