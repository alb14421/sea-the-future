// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../../../core/screenUtils","./ComplexFillMeshWriter","./meshWriterUtils","./OutlineFillMeshWriter","../shaders/constants","../../../../../../webgl/enums"],function(e,t,i,s,a,r,n){"use strict";const p=i.complexFillVertexSpec,u=a.outlineFillVertexSpec_Outline,c={createComputedParams:e=>e,optionalAttributes:p.optionalAttributes,attributes:{...p.attributes,bitset:{type:n.DataType.UNSIGNED_BYTE,count:1,pack:e=>i.packComplexFillBitset(e)},aux1:{count:1,type:n.DataType.HALF_FLOAT,pack:e=>i.getPatternSize(e).width},aux2:{count:1,type:n.DataType.HALF_FLOAT,pack:e=>i.getPatternSize(e).height},aux3:{count:2,type:n.DataType.HALF_FLOAT,pack:({offsetX:e,offsetY:i})=>[t.pt2px(e),t.pt2px(i)]},aux4:{count:2,type:n.DataType.UNSIGNED_BYTE,pack:({scaleX:e,scaleY:t})=>[e*r.packPrecision,t*r.packPrecision]}}},o={createComputedParams:e=>e,optionalAttributes:p.optionalAttributes,attributes:{...p.attributes,color:u.attributes.color,bitset:{type:n.DataType.UNSIGNED_BYTE,count:1,pack:e=>s.packBitset([[r.bitsetTypeFillOutline,!0]])},aux1:{count:1,type:n.DataType.HALF_FLOAT,pack:e=>t.pt2px(.5*e.width)},aux2:{count:1,type:n.DataType.HALF_FLOAT,pack:e=>t.pt2px(.5*e.referenceWidth)},aux3:{count:2,type:n.DataType.HALF_FLOAT,packTessellation:({extrusionOffsetX:e,extrusionOffsetY:t})=>[e,t]},aux4:{count:2,type:n.DataType.UNSIGNED_BYTE,packTessellation:({normalX:e,normalY:t})=>[e*r.packPrecision+r.signedToUnsignedByte,t*r.packPrecision+r.signedToUnsignedByte]}}};class l extends a.OutlineFillOutlineMeshWriter{constructor(){super(...arguments),this.vertexSpec=o}}class d extends a.OutlineFillMeshWriter{constructor(){super(...arguments),this.vertexSpec=c}_createOutlineWriter(e,t,i,s){return new l(e,t,i,s)}write(e,t,i,s,a){this.ensurePacked(t,i,s);const r=this.evaluatedMeshParams.sprite?.textureBinding;e.recordStart(this.instanceId,this.attributeLayout,r),this._write(e,i),e.recordEnd()}ensurePacked(e,t,i){super.ensurePacked(e,t,i),this._lineMeshWriter.ensurePacked(e,t,i)}enqueueRequest(e,t,i){super.enqueueRequest(e,t,i),this._lineMeshWriter.enqueueRequest(e,t,i)}async loadDependencies(){await Promise.all([super.loadDependencies(),this._lineMeshWriter.loadDependencies()])}}e.ComplexOutlineFillMeshWriter=d,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});