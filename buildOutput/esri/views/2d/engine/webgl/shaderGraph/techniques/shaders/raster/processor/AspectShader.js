// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../../../../../chunks/tslib.es6","../../../../GraphShaderModule","../../../../graph/glsl","../surface","./BaseRasterProcessorShader"],function(e,t,s,a,i,l){"use strict";class o extends s.UniformGroup{}t.__decorate([s.uniform(a.Vec2)],o.prototype,"cellSize",void 0);class r extends l.BaseRasterProcessorShader{constructor(){super(...arguments),this.type="AspectShader"}_process(e){const{texture:t}=this.config,s=i.getSurfaceValues(t,e,this.config.srcImageSize),l=new a.Vec2(1).divide(this.aspectConfig.cellSize.multiply(8)),{x:o,y:r}=i.computeDeltaZ(s,l),c=a.negate(r),n=s[9].multiply(a.sign(a.abs(o).add(a.abs(c)))),p=a.abs(a.sign(o)),d=new a.Float(3.14159265359),u=new a.Float(0),m=a.step(u,c).multiply(.5).multiply(d).add(a.step(c,u).multiply(1.5).multiply(d)),y=a.mod(new a.Float(2.5).multiply(d).add(a.atan(c,a.negate(o))),new a.Float(2).multiply(d)),g=a.mix(m,y,p).multiply(180).divide(d);return new a.Vec4(g,g,g,n)}}t.__decorate([s.uniform(o)],r.prototype,"aspectConfig",void 0),e.AspectShader=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});