// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../../../core/screenUtils","../../../../../../../geometry/GeometryCursor","../../../definitions","../fill/meshWriterUtils","./gradientStrokeConstants","./LineMeshWriter","../../../../../../webgl/enums"],function(e,t,i,r,n,a,s,o){"use strict";const c={createComputedParams:e=>e,optionalAttributes:s.LineVertexSpec.optionalAttributes,attributes:{...s.LineVertexSpec.attributes,bitset:{type:o.DataType.UNSIGNED_BYTE,count:1,pack:({gradientMethod:e,gradientSizeUnits:t,gradientType:i})=>n.packBitset([[a.bitset.isAlongLine,"alongline"===e.toLowerCase()],[a.bitset.isAbsoluteSize,1===t],[a.bitset.isDiscrete,"discrete"===i.toLowerCase()]])},tlbr:{type:o.DataType.UNSIGNED_SHORT,count:4,pack:({sprite:e})=>{const{rect:t,width:i,height:n}=e,a=t.x+r.spritePadding+r.gradientTextureExternalPadding,s=t.y+r.spritePadding;return[a,s,a+i-2*r.gradientTextureExternalPadding,s+n]}},accumulatedDistance:{type:o.DataType.HALF_FLOAT,count:1,packTessellation:({distance:e,pathLength:t,distanceOffset:i})=>(i+e)/t},gradientSize:{type:o.DataType.HALF_FLOAT,count:1,pack:({gradientSize:e,gradientSizeUnits:i})=>0===i?e/100:t.pt2px(e)},totalLength:{type:o.DataType.HALF_FLOAT,count:1,packTessellation:({pathLength:e})=>e},segmentDirection:{type:o.DataType.BYTE,count:2,packPrecisionFactor:16,packTessellation:({directionX:e,directionY:t})=>[e,t]}}};class p extends s.LineMeshWriter{get _preventEffectClipping(){return!0}constructor(e,t,i,r){super(e,t,i,r),this.vertexSpec=c,this._tessellationOptions.textured=!0}_write(e,t,r){const n=r??i.GeometryCursor.fromFeatureSetReaderCIM(t);if(!n)return;const{sprite:a}=this.evaluatedMeshParams;this._writeGeometry(e,t,n,a?.textureBinding)}}e.GradientStrokeMeshWriter=p,e.GradientStrokeVertexSpec=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});