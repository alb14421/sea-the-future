// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../../../core/Logger","../../../../../../../core/maybe","../../../../../../webgl/enums","../../../../../../webgl/FramebufferObject","../../../../../../webgl/heatmapTextureUtils","../../../../../../webgl/RenderbufferDescriptor","../../../../../../webgl/Texture","../../../../../../webgl/TextureDescriptor"],function(e,t,r,a,i,u,s,l,n){"use strict";e.HeatmapResources=class{destroy(){this._accumulateFramebuffer=r.disposeMaybe(this._accumulateFramebuffer),this._resolveGradientTexture=r.disposeMaybe(this._resolveGradientTexture),this._prevGradientHash=null,this._qualityProfile=null}get initialized(){return null!=this._accumulateFramebuffer&&null!=this._resolveGradientTexture}get accumulateFramebuffer(){return this._accumulateFramebuffer}get resolveGradientTexture(){return this._resolveGradientTexture}loadQualityProfile(e){if(null==this._qualityProfile){const r=u.loadHeatmapTextureConfiguration(e,t.getLogger("esri.views.2d.engine.webgl.shaderGraph.techniques.heatmap.HeatmapResources"));this._qualityProfile={...r,defines:{usesHalfFloatPrecision:r.dataType!==a.PixelType.FLOAT}}}return this._qualityProfile}ensureAccumulateFBO(e,t,r){if(null==this._accumulateFramebuffer){const{dataType:u,samplingMode:l,pixelFormat:o,internalFormat:c}=this.loadQualityProfile(e),f=new n.TextureDescriptor(t,r);f.pixelFormat=o,f.internalFormat=c,f.dataType=u,f.samplingMode=l,f.wrapMode=33071;const h=new s.RenderbufferDescriptor(a.SizedDepthStencilFormat.DEPTH24_STENCIL8,t,r);this._accumulateFramebuffer=new i.FramebufferObject(e,f,h)}else{const{width:e,height:a}=this._accumulateFramebuffer;e===t&&a===r||this._accumulateFramebuffer.resize(t,r)}return this._accumulateFramebuffer}ensureResolveGradientTexture(e,t,r){if(null==this._resolveGradientTexture){const t=new n.TextureDescriptor;t.wrapMode=33071,this._resolveGradientTexture=new l.Texture(e,t),this._prevGradientHash=null}return this._prevGradientHash!==t&&(this._resolveGradientTexture.resize(r.length/4,1),this._resolveGradientTexture.setData(r),this._prevGradientHash=t),this._resolveGradientTexture}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});