// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../../../chunks/tslib.es6","../../GraphShaderModule","../../graph/glsl"],function(t,o,e,r){"use strict";class n extends e.VertexInput{}o.__decorate([e.location(0,r.Vec2)],n.prototype,"position",void 0);class i extends e.FragmentInput{}class a extends e.UniformGroup{}o.__decorate([e.uniform(r.Mat3)],a.prototype,"dvs",void 0);class s extends e.UniformGroup{}o.__decorate([e.uniform(r.Float)],s.prototype,"halfWidth",void 0),o.__decorate([e.uniform(r.Float)],s.prototype,"aaWidth",void 0),o.__decorate([e.uniform(r.Float)],s.prototype,"pxPerCell",void 0),o.__decorate([e.uniform(r.Vec4)],s.prototype,"minorLineColor",void 0),o.__decorate([e.uniform(r.Vec4)],s.prototype,"majorLineColor",void 0),o.__decorate([e.uniform(r.Int)],s.prototype,"majorLineInterval",void 0);class l extends e.GraphShaderModule{constructor(){super(...arguments),this.type="GridShader"}vertex(t){const o=t.position.multiply(2).subtract(1);return{gridPos:this.transform.dvs.multiply(new r.Vec3(o,1)).xy,glPosition:new r.Vec4(o,0,1)}}fragment(t){const o=r.abs(t.gridPos),n=r.fract(o),i=r.min(n.x,new r.Float(1).subtract(n.x)),a=r.min(n.y,new r.Float(1).subtract(n.y)),s=new r.Vec2(i,a).multiply(this.config.pxPerCell).subtract(this.config.halfWidth),l=r.min(s.x,s.y),d=new r.Float(1).subtract(r.smoothstep(new r.Float(0),this.config.aaWidth,l)),p=new r.Int(r.round(o.x)),c=new r.Int(r.round(o.y)),u=new r.Float(r.intMod(p,this.config.majorLineInterval)),m=new r.Float(r.intMod(c,this.config.majorLineInterval)),f=r.ifElse(r.lessThan(s.x,s.y),u,m),h=r.greaterThan(r.multiply(r.step(s.x,this.config.aaWidth),r.step(s.y,this.config.aaWidth)),new r.Float(.5)),_=r.min(u,m),y=r.ifElse(h,_,f),g=r.mix(this.config.majorLineColor,this.config.minorLineColor,r.min(y,new r.Float(1))),x=new e.FragmentOutput;return x.fragColor=g.multiply(d),x}}o.__decorate([e.uniform(a)],l.prototype,"transform",void 0),o.__decorate([e.uniform(s)],l.prototype,"config",void 0),o.__decorate([o.__param(0,e.input(n))],l.prototype,"vertex",null),o.__decorate([o.__param(0,e.input(i))],l.prototype,"fragment",null),t.GridShader=l,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});