// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../../../chunks/tslib.es6","../../GraphShaderModule","../../graph/glsl","./AFeatureShader","./constants","./hittestUtils","./LineShader","./utils","./VisualVariableColor","./VisualVariableOpacity","./VisualVariableSizeMinMaxValue","./VisualVariableSizeScaleStops","./VisualVariableSizeStops","./VisualVariableSizeUnitValue","./vvUtils"],function(e,t,i,a,o,l,r,n,s,u,p,c,V,d,_,S){"use strict";class h extends o.FeatureVertexInput{}t.__decorate([i.location(3,a.Vec2)],h.prototype,"offset",void 0),t.__decorate([i.location(4,a.Vec4)],h.prototype,"color",void 0),t.__decorate([i.location(5,a.Vec2)],h.prototype,"normal",void 0),t.__decorate([i.location(6,a.Float)],h.prototype,"halfWidth",void 0),t.__decorate([i.location(7,a.Float)],h.prototype,"referenceHalfWidth",void 0),t.__decorate([i.location(8,a.Vec2)],h.prototype,"zoomRange",void 0);class y extends n.LineFragmentInput{}function b(e,t,i){const{id:o,bitset:r}=t,u=s.getBit(r,l.bitsetTypeFillOutline),p=a.greaterThan(u,new a.Float(.5)),c=n.getLineVertexData(e,t),V=a.ifElse(p,c.halfWidth,new a.Float(0)),d=S.getVisualVariableOpacity(e,o),_=S.getVisualVariableColor(e,o,t.color),h=a.ifElse(p,a.ifElse(s.getBitBool(r,l.bitsetOutlineUsesColorVV),_,t.color),_.multiply(d)),y=e.view.displayViewScreenMat3.multiply(new a.Vec3(t.pos.xy,1)),b=e.clip(t.id),g=new a.Vec4(y.xy,b,1),v=a.ifElse(p,c.glPosition,g),F=i&&e.maybeRunHittest(t,i,p);return{isOutline:u,color:h,opacity:new a.Float(1),halfWidth:V,normal:c.normal,glPosition:v,...F}}class g extends o.AFeatureShader{constructor(){super(...arguments),this.computeAttributes={pos:["nextPos1","nextPos2"]}}}t.__decorate([i.uniform(n.AntialiasingControls)],g.prototype,"antialiasingControls",void 0),t.__decorate([i.option(u.VisualVariableColor)],g.prototype,"visualVariableColor",void 0),t.__decorate([i.option(p.VisualVariableOpacity)],g.prototype,"visualVariableOpacity",void 0),t.__decorate([i.option(c.VisualVariableSizeMinMaxValue)],g.prototype,"visualVariableSizeMinMaxValue",void 0),t.__decorate([i.option(V.VisualVariableSizeScaleStops)],g.prototype,"visualVariableSizeScaleStops",void 0),t.__decorate([i.option(d.VisualVariableSizeStops)],g.prototype,"visualVariableSizeStops",void 0),t.__decorate([i.option(_.VisualVariableSizeUnitValue)],g.prototype,"visualVariableSizeUnitValue",void 0);class v extends g{constructor(){super(...arguments),this.type="OutlineFillShader"}vertex(e,t){return b(this,e,t)}fragment(e){const{color:t,isOutline:i}=e,o=a.greaterThan(i,new a.Float(.5)),l=n.getLineFragmentColor(e,this.antialiasingControls.blur),r=t,s=a.ifElse(o,l,r),u=a.ifElse(o,new a.Float(1/255),new a.Float(0));return this.getFragmentOutput(s,e,u)}hittest(e,t,i){return a.ifElse(i,r.failHittest(this.hittestRequest),r.hittestFill(this,e,t))}}t.__decorate([t.__param(0,i.input(h)),t.__param(1,i.input(o.BaseHittestVertexInput))],v.prototype,"vertex",null),t.__decorate([t.__param(0,i.input(y))],v.prototype,"fragment",null),e.AOutlineFillShader=g,e.OutlineFillFragmentInput=y,e.OutlineFillShader=v,e.OutlineFillVertexInput=h,e.getOutlineFillVertexData=b,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});