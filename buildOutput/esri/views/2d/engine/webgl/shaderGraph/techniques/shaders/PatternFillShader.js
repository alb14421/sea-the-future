// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../../../chunks/tslib.es6","../../GraphShaderModule","../../graph/glsl","./AFeatureShader","./FillShader","./LocalTileOffset","./MosaicInfo"],function(t,e,r,o,i,a,l,n){"use strict";class s extends a.FillVertexInput{}e.__decorate([r.location(5,o.Vec4)],s.prototype,"tlbr",void 0),e.__decorate([r.location(6,o.Float)],s.prototype,"inverseRasterizationScale",void 0);class u extends i.FeatureFragmentInput{}function c(t,e){const r=e.tlbr.xy,i=e.tlbr.zw,a=i.x.subtract(r.x),l=r.y.subtract(i.y),n=new o.Vec2(a,l).multiply(e.inverseRasterizationScale),s=n.multiply(t.view.requiredZoomFactor),u=function(t){const e=new o.Float(1),r=new o.Float(0);return new o.Mat3(e.divide(t.x),r.divide(t.y),0,o.negate(r.divide(t.x)),e.divide(t.y),0,0,0,1)}(s),c=t.localTileOffset.getPatternOffsetAtTileOrigin(n).divide(s),d=new o.Vec3(e.pos,1);return{tileTextureCoord:u.multiply(d).xy.subtract(c),tlbr:e.tlbr.divide(t.mosaicInfo.size.xyxy)}}function d(t,e){const r=o.mod(t.tileTextureCoord,new o.Float(1)),i=o.mix(t.tlbr.xy,t.tlbr.zw,r),a=o.texture2D(e.texture,i);return t.color.multiply(a)}class p extends a.FillShader{constructor(){super(...arguments),this.type="PatternFillShader"}vertex(t,e){return{...super.vertex(t,e),...c(this,t)}}fragment(t){const e=d(t,this.mosaicInfo);return this.getFragmentOutput(e,t,new o.Float(0))}}e.__decorate([r.uniform(n.MosaicInfo)],p.prototype,"mosaicInfo",void 0),e.__decorate([r.uniform(l.LocalTileOffset)],p.prototype,"localTileOffset",void 0),e.__decorate([e.__param(0,r.input(s)),e.__param(1,r.input(i.BaseHittestVertexInput))],p.prototype,"vertex",null),e.__decorate([e.__param(0,r.input(u))],p.prototype,"fragment",null),t.PatternFillFragmentInput=u,t.PatternFillShader=p,t.PatternFillVertexInput=s,t.getPatternFillFragmentColor=d,t.getPatternFillVertexData=c,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});