// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../../../core/screenUtils","../../../../vectorTiles/GeometryUtils","./meshWriterUtils","./PatternFillMeshWriter","../shaders/constants","../../../../../../webgl/enums"],function(t,e,a,i,p,s,r){"use strict";function l(t){const{sprite:a,aspectRatio:i,scaleProportionally:p}=t,s=e.pt2px(t.height),r=s>0?s:a.height;let l=s*i;return l<=0?l=a.width:p&&(l*=a.width/a.height),{width:l,height:r}}function c(t){const{applyRandomOffset:e,sampleAlphaOnly:a}=t;return i.packBitset([[s.bitsetFillRandomPatternOffset,e],[s.bitsetGenericConsiderAlphaOnly,a]])}const n={createComputedParams:t=>t,optionalAttributes:p.patternFillVertexSpec.optionalAttributes,attributes:{...p.patternFillVertexSpec.attributes,bitset:{count:1,type:r.DataType.UNSIGNED_BYTE,pack:c},width:{count:1,type:r.DataType.HALF_FLOAT,pack:t=>l(t).width},height:{count:1,type:r.DataType.HALF_FLOAT,pack:t=>l(t).height},offset:{count:2,type:r.DataType.HALF_FLOAT,pack:({offsetX:t,offsetY:a})=>[e.pt2px(t),-e.pt2px(a)]},scale:{count:2,type:r.DataType.UNSIGNED_BYTE,packPrecisionFactor:16,pack:({scaleX:t,scaleY:e})=>[t,e]},angle:{count:1,type:r.DataType.UNSIGNED_BYTE,pack:({angle:t})=>a.degToByte(t)}}};class o extends p.PatternFillMeshWriter{constructor(){super(...arguments),this.vertexSpec=n}}t.ComplexFillMeshWriter=o,t.complexFillVertexSpec=n,t.getPatternSize=l,t.packComplexFillBitset=c,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});