// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../../../core/Logger","../../../../../../../core/mathUtils","../../../../../../../core/screenUtils"],function(t,i,e,r){"use strict";class a{constructor(t,i){this._size=t,this._sizeUnits=i,this._relativeSize=null}get relativeSize(){return this._relativeSize??=this.calculateRelativeSize(),this._relativeSize}calculateRelativeSize(){if(0===this._sizeUnits){const t=Math.min(this._size/100,1);return[t,t]}return this.calculateRelativeSizeFromAbsolute()}}class n extends a{constructor(t,i,e,r){super(i,e),this.rotationMatrix00=1,this.rotationMatrix01=0,this.rotationMatrix10=0,this.rotationMatrix11=1,this.bounds={xmin:1/0,ymin:1/0,xmax:-1/0,ymax:-1/0},this.rotationMatrix00=Math.cos(r),this.rotationMatrix01=-Math.sin(r),this.rotationMatrix10=-this.rotationMatrix01,this.rotationMatrix11=this.rotationMatrix00;const{bounds:a,rotationMatrix00:n,rotationMatrix01:s,rotationMatrix10:o,rotationMatrix11:x}=this;t.forEachVertex((t,i)=>{const e=t*n+i*s,r=t*o+i*x;a.xmin=Math.min(a.xmin,e),a.ymin=Math.min(a.ymin,r),a.xmax=Math.max(a.xmax,e),a.ymax=Math.max(a.ymax,r)}),this.center=[(a.xmin+a.xmax)/2,(a.ymin+a.ymax)/2]}}class s extends n{constructor(t,i,e,r){super(t,i,e,r),this.method="linear"}getRelativePosition(t,i){const{rotationMatrix00:e,rotationMatrix01:r,bounds:a}=this,{xmin:n,xmax:s}=a;return[(t*e+i*r-n)/(s-n),0]}calculateRelativeSizeFromAbsolute(){const{_size:t,bounds:i}=this,{xmin:e,xmax:a}=i;return[r.pt2px(t)/(a-e),0]}}class o extends n{constructor(t,i,e,r){super(t,i,e,r),this.method="rectangular"}getRelativePosition(t,i){const{bounds:e,center:r,rotationMatrix00:a,rotationMatrix01:n,rotationMatrix10:s,rotationMatrix11:o}=this,x=t*s+i*o,c=t*a+i*n-r[0],l=x-r[1];return[c*(2/(e.xmax-e.xmin)),-l*(2/(e.ymax-e.ymin))]}calculateRelativeSizeFromAbsolute(){const{_size:t,bounds:i}=this,{xmin:e,ymin:a,xmax:n,ymax:s}=i;return[r.pt2px(2*t)/(n-e),r.pt2px(2*t)/(s-a)]}}class x extends n{constructor(t,i,e){super(t,i,e,0),this.method="circular";const{xmin:r,xmax:a,ymin:n,ymax:s}=this.bounds,o=a-r,x=s-n;this.radius=Math.sqrt(o*o+x*x)/2}getRelativePosition(t,i){const{center:e,radius:r}=this;return[(t-e[0])/r,-(i-e[1])/r]}calculateRelativeSizeFromAbsolute(){const{_size:t}=this;return[r.pt2px(t)/this.radius,0]}}t.AGradientSizeHelper=a,t.getGradientSizeHelper=function(t,r){if(null==t)return null;const a=e.deg2rad(r.angle),n=r.gradientSize,c=r.gradientSizeUnits;switch(r.gradientMethod.toLowerCase()){case"linear":return new s(t,n,c,a);case"rectangular":return new o(t,n,c,a);case"circular":return new x(t,n,c);default:return i.getLogger("esri.views.2d.engine.webgl.shaderGraph.techniques.fill.GradientSizeHelper").errorOnce(`Gradient fill method "${r.gradientMethod}" currently unsupported.`),null}},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});