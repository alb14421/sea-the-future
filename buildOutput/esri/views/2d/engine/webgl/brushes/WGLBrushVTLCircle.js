// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./WGLBrush","../../../../webgl/enums"],function(e,t,r){"use strict";e.WGLBrushVTLCircle=class extends t{constructor(){super(...arguments),this._programOptions={id:!1}}dispose(){}drawMany(e,t){const{context:a,displayLevel:i,requiredLevel:n,state:l,painter:s,spriteMosaic:o,styleLayerUID:c,requestRender:u,allowDelayedRender:d}=e;if(!t.some(e=>e.layerData.get(c)?.circleIndexCount??!1))return;const f=e.styleLayer,y=f.circleMaterial,p=s.vectorTilesMaterialManager,m=f.getPaintValue("circle-translate",i),g=f.getPaintValue("circle-translate-anchor",i),M=this._programOptions,v=p.getMaterialProgram(a,y,M);if(d&&null!=u&&!v.compiled)return void u();a.useProgram(v),v.setUniformMatrix3fv("u_displayMat3",1===g?l.displayMat3:l.displayViewMat3),v.setUniform2fv("u_circleTranslation",m),v.setUniform1f("u_depth",f.z),v.setUniform1f("u_antialiasingWidth",1.2);let x=-1;for(const e of t){if(!e.layerData.has(c))continue;e.key.level!==x&&(x=e.key.level,y.setDataUniforms(v,i,f,x,o));const t=e.layerData.get(c);if(!t.circleIndexCount)continue;t.prepareForRendering(a);const l=t.vao;null!=l&&(a.bindVAO(l),v.setUniformMatrix3fv("u_dvsMat3",e.transforms.displayViewScreenMat3),n!==e.key.level?a.setStencilFunction(514,e.stencilRef,255):a.setStencilFunction(516,255,255),a.drawElements(r.PrimitiveType.TRIANGLES,t.circleIndexCount,r.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*t.circleIndexStart),e.triangleCount+=t.circleIndexCount/3)}}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});