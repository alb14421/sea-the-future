// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["./shaders/MaterialPrograms"],function(r){"use strict";return class{constructor(r){this._rctx=r,this._programByKey=new Map}dispose(){this._programByKey.forEach(r=>r.dispose()),this._programByKey.clear()}getProgram(e,t=[]){const a=e.vsPath+"."+e.fsPath+JSON.stringify(t);if(this._programByKey.has(a))return this._programByKey.get(a);const s={...t.map(r=>"string"==typeof r?{name:r,value:!0}:r).reduce((r,e)=>({...r,[e.name]:e.value}),{})},{vsPath:o,fsPath:i,locations:h}=e,n=r.createProgramTemplate(o,i,s),g=this._rctx.programCache.acquire(n.vertexShader,n.fragmentShader,h);if(!g)throw new Error("Unable to get program for key: ${key}");return this._programByKey.set(a,g),g}}});