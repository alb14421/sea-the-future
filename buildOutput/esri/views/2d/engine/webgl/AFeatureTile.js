// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../core/libs/gl-matrix-2/math/mat2d","../../../../core/libs/gl-matrix-2/factories/mat2df32","../../../../core/libs/gl-matrix-2/math/mat3","../../../../core/libs/gl-matrix-2/factories/mat3f32","../../../../chunks/vec32","../../../../core/libs/gl-matrix-2/factories/vec3f32","./definitions","./TiledDisplayObject"],function(t,e,i,s,r,a,o,n,l){"use strict";const c=r.create(),h=o.create();class m extends l.TiledDisplayObject{constructor(t,e,i,s){super(t,e,i,s,n.tileSize,n.tileSize)}destroy(){super.destroy()}setTransform(t){const r=this.resolution/t.resolution,a=this.transforms.tileMat3,[o,n]=t.toScreenNoRotation([0,0],[this.x,this.y]),l=this.width/this.rangeX*r,c=this.height/this.rangeY*r;s.set(a,l,0,0,0,c,0,o,n,1),s.multiply(this.transforms.displayViewScreenMat3,t.displayViewMat3,a);const h=e.set(i.create(),l,0,0,c,o,n);e.multiply(this.transforms.labelMat2d,t.viewMat2d,h);const m=[0,0];t.toScreen(m,[this.x,this.y]);const d=this.transforms.tileUnitsToPixels;s.identity(d),s.translate(d,d,m),s.rotate(d,d,Math.PI*t.rotation/180),s.scale(d,d,[l,c,1])}_createTransforms(){return{labelMat2d:i.create(),tileMat3:r.create(),displayViewScreenMat3:r.create(),tileUnitsToPixels:r.create()}}containsScreenPoint(t,e,i){const r=s.multiply(c,t.viewMat3,this.transforms.tileMat3),o=s.invert(c,r);if(null==o)return!0;a.set(h,...e,1);const n=a.transformMat3(h,h,o),l=i*(this.resolution/t.resolution);return n[0]>=-l&&n[0]<this.width+l&&n[1]>=-l&&n[1]<this.height+l}}t.AFeatureTile=m,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});