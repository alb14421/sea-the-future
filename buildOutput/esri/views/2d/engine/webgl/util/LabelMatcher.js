// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./Matcher"],function(e,a){"use strict";class s extends a.FeatureMatcher{static async fromLabelSchema(e,a){const t=a.classes.map(async a=>{const s=await e.createMeshWriters(a.meshes);return{minScale:a.minScale,maxScale:a.maxScale,meshes:s,expression:null,where:await e.storage.createWhereClause(a.where)}}),r=await Promise.all(t);return new s(r)}constructor(e){super(),this._labels=e}match(e,a,s){if(!this._labels.length)return null;const t=this._getLabels(a.$view.scale),r=[];for(const a of t)a.where&&!a.where(e,s)||r.push(...a.meshes);return r}hasArcadeDependency(e){return this._labels.some(a=>a.meshes.some(a=>a.hasArcadeDependency(e)))}_getLabels(e){return this._labels.filter(a=>this._validForTileScale(a,e))}_validForTileScale(e,a){const s=a-a/4,t=a+a/2;return(!e.minScale||e.minScale>=s)&&(!e.maxScale||e.maxScale<=t)}}e.LabelMatcher=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});