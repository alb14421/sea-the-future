// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../request","../../../core/asyncUtils","../../../core/Error","../../../core/promiseUtils","../../../core/urlUtils"],function(r,e,t,a,o,s){"use strict";const i={2:"image",1:"array-buffer",0:"json",3:void 0};r.DefaultLoadingContext=class{constructor(r){this._streamDataRequester=r}async loadJSON(r,e){return this._load(0,r,e)}async loadBinary(r,e){return s.isDataProtocol(r)?(o.throwIfAborted(e),s.dataToArrayBuffer(r)):this._load(1,r,e)}async loadImage(r,e){return this._load(2,r,e)}async _load(r,s,n){if(null==this._streamDataRequester)return(await e(s,{responseType:i[r]})).data;const u=await t.result(this._streamDataRequester.request(s,r,n));if(!0===u.ok)return u.value;throw o.throwIfAbortError(u.error),new a("glt-loader-request-error",`Request for resource failed: ${u.error}`)}},Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});