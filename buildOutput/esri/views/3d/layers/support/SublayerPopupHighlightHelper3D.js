// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../chunks/tslib.es6","../../../../core/Accessor","../../../../core/handleUtils","../../../../core/reactiveUtils","../../../../core/accessorSupport/decorators/property","../../../../core/has","../../../../core/Logger","../../../../core/RandomLCG","../../../../core/accessorSupport/decorators/subclass","./ImageHighlightHelper3D","../../../layers/support/MapServiceLayerViewHelper","../../../support/drapedUtils"],function(e,i,r,t,p,a,h,l,s,o,g,c,u){"use strict";e.SublayerPopupHighlightHelper3D=class extends r{constructor(e){super(e)}initialize(){this._highlightHelper=new g.ImageHighlightHelper3D({layer:this.layerView.layer,view:this.view,updatingHandles:this.updatingHandles}),this._mapServiceLayerViewHelper=new c.MapServiceLayerViewHelper({createFetchPopupFeaturesQueryGeometry:(e,i)=>u.createQueryGeometry(e,i,this.view),layerView:this.layerView,updatingHandles:this.updatingHandles,highlightGraphics:this._highlightHelper.graphics,highlightGraphicUpdated:e=>this._highlightHelper.graphicsView?.graphicChanged(e)}),this.addHandles([t.destroyHandle(this._mapServiceLayerViewHelper),p.when(()=>this.view?.stationary,()=>this._mapServiceLayerViewHelper.updateHighlightedFeatures(this.view.resolution),p.initial),p.watch(()=>this.layerView.suspended,e=>this._highlightHelper.suspended=e,p.syncAndInitial)])}fetchPopupFeaturesAtLocation(e,i){return this._highlightHelper.preload(),this._mapServiceLayerViewHelper.fetchPopupFeaturesAtLocation(e,i)}highlight(e,i){return this._highlightHelper.highlight(e,i)}},i.__decorate([a.property()],e.SublayerPopupHighlightHelper3D.prototype,"view",void 0),i.__decorate([a.property()],e.SublayerPopupHighlightHelper3D.prototype,"layerView",void 0),i.__decorate([a.property()],e.SublayerPopupHighlightHelper3D.prototype,"updatingHandles",void 0),e.SublayerPopupHighlightHelper3D=i.__decorate([o.subclass("esri.views.3d.layers.support.SublayerPopupHighlightHelper3D")],e.SublayerPopupHighlightHelper3D),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});