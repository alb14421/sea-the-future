// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../geometry/support/aaBoundingBox","../../../../layers/graphics/centroid","../../../../layers/graphics/OptimizedGeometry","./I3SBinaryReader"],function(e,t,r,i,n){"use strict";class o{constructor(e,t,r,i){this.id=e,this.index=t,this.meta=r,this.geometry=i}get usedMemory(){return 32+(this.geometry?.usedMemory??0)}}const u=t.create();e.I3SQueryFeature=o,e.I3SQueryFeatureAdapter=class{constructor(e){this._objectIdField=e.objectIdField,this._getFeatureExtent=e.getFeatureExtent}getObjectId(e){return e.id}getAttributes(e){const{meta:t,index:r}=e,i={};this._objectIdField&&(i[this._objectIdField]=e.id);const o=t.attributeInfo?.attributeData;if(null!=o)for(const e of Object.keys(o))i[e]=n.getCachedAttributeValue(o[e],r);return i}getAttribute(e,t){if(t===this._objectIdField)return e.id;const{meta:r,index:i}=e,o=r.attributeInfo?.attributeData;return null!=o?n.getCachedAttributeValue(o[t],i):null}getGeometry(e){if(e.geometry)return e.geometry;const[t,r,n,o,a,s]=this._getFeatureExtent(e,u);return new i([5,5],[t,r,n,o,r,n,o,a,n,t,a,n,t,r,n,t,r,s,o,r,s,o,a,s,t,a,s,t,r,s])}getCentroid(e,t){if(e.geometry)return r.getCentroidOptimizedGeometry(new i,e.geometry,t.hasZ,t.hasM);const[n,o,a,s,d,c]=this._getFeatureExtent(e,u);return new i([0],[(n+s)/2,(o+d)/2,(a+c)/2])}cloneWithGeometry(e,t){const{id:r,index:i,meta:n}=e;return new o(r,i,n,t)}getMetadata(e){return e}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});