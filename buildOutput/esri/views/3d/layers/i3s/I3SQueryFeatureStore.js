// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../chunks/tslib.es6","../../../../core/Accessor","../../../../core/compilerUtils","../../../../core/Evented","../../../../core/accessorSupport/decorators/property","../../../../core/Logger","../../../../core/RandomLCG","../../../../core/accessorSupport/decorators/subclass","../../../../geometry/projection/projectBoundingSphere","../../../../geometry/support/aaBoundingBox","../../../../geometry/support/aaBoundingRect","../../../../chunks/sphere"],function(e,t,r,o,c,s,a,n,u,p,i,y,S){"use strict";const d=i.create();e.I3SQueryFeatureStore=class extends r{constructor(e){super(e),this.events=new c.EventEmitter}forEach(e){this.forAllFeatures(t=>(e(t),1))}forEachBounds(e,t){for(const r of e)t(this.getFeatureExtent(r,d))}forEachInBounds(e,t){this.forAllFeatures(r=>{const c=this.getFeatureExtent(o.toConst(r),h);return y.intersects(e,i.toRect(c,f))&&t(o.toConst(r)),1},t=>{if(p.projectBoundingSphere(t,this.sourceSpatialReference,l,this.viewSpatialReference),l[0]>=e[0]&&l[2]<=e[2]&&l[1]>=e[1]&&l[3]<=e[3])return 1;const r=Math.max(e[0],Math.min(l[0],e[2])),o=Math.max(e[1],Math.min(l[1],e[3])),c=l[0]-r,s=l[1]-o;return c*c+s*s<=l[3]*l[3]?1:2})}},t.__decorate([s.property({constructOnly:!0})],e.I3SQueryFeatureStore.prototype,"featureAdapter",void 0),t.__decorate([s.property({constructOnly:!0})],e.I3SQueryFeatureStore.prototype,"forAllFeatures",void 0),t.__decorate([s.property({constructOnly:!0})],e.I3SQueryFeatureStore.prototype,"getFeatureExtent",void 0),t.__decorate([s.property({constructOnly:!0})],e.I3SQueryFeatureStore.prototype,"sourceSpatialReference",void 0),t.__decorate([s.property({constructOnly:!0})],e.I3SQueryFeatureStore.prototype,"viewSpatialReference",void 0),e.I3SQueryFeatureStore=t.__decorate([u.subclass("esri.views.3d.layers.i3s.I3SQueryFeatureStore")],e.I3SQueryFeatureStore);const l=S.fromValues(0,0,0,0),h=i.create(),f=y.create();Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});