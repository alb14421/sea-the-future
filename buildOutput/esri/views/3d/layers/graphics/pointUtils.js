// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../core/libs/gl-matrix-2/factories/vec3f64","../../../../geometry/projection/projectPointToVector","../../../../geometry/support/aaBoundingBox","../../../../geometry/support/coordsUtils","../../../../layers/graphics/dehydratedPoint","./elevationAlignmentUtils","./graphicUtils","../../webgl-engine/lib/Object3D"],function(e,t,n,o,r,i,a,c,l){"use strict";function s(e,t){const r=e.clippingExtent;return!!r&&(n.projectPointToVector(t,u,e.elevationProvider.spatialReference),!o.containsPoint(r,u))}function p(e,t){return n.projectPointToVector(t,u,e.renderCoordsHelper.spatialReference),e.localOriginFactory.getOrigin(u)}const u=t.create();e.createStageObject=function(e,t,n,o,r){if(s(e,t))return null;n.localOrigin=p(e,t);const i=new l.Object3D({geometries:[n],castShadow:!1,layerViewUid:e.layerViewUid,graphicUid:r,usesVerticalDistanceToGround:!0});return{object:i,sampledElevation:a.applyElevationAlignmentForHUD(i,t,e.elevationProvider,e.renderCoordsHelper,o)}},e.extendPointGraphicElevationContext=function(e,t,o){const r=e.elevationContext,a=o.spatialReference;n.projectPointToVector(t,u,a),r.centerPointInElevationSR=i.makeDehydratedPoint(u[0],u[1],t.hasZ?u[2]:0,null!=a?a:null)},e.getLocalOriginForPoint=p,e.placePointOnGeometry=function(e){switch(e.type){case"point":return e;case"polygon":case"extent":return c.computeCentroid(e);case"polyline":{const t=e.paths[0];if(!t||0===t.length)return null;const n=r.getPointOnPath(t,r.getPathLength(t)/2);return i.makeDehydratedPoint(n[0],n[1],n[2],e.spatialReference)}case"mesh":return e.extent.center}return null},e.updateStageObjectGeometry=function(e,t,n,o){return s(t,n)?null:a.applyElevationAlignmentForHUD(e,n,t.elevationProvider,t.renderCoordsHelper,o)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});