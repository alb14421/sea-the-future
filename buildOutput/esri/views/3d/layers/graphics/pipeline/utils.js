// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../core/uid","../../../../../geometry/projection/projectors"],function(e,t,n){"use strict";const o=new Float64Array(3);e.applyElevationAlignment=function(e,t,r,c,a){const l=c.spatialReference,s=n.getProjector(t,l);if(null==s)return e;let i=t=>[e[t],e[t+1],e[t+2]];s!==n.copy3&&(i=t=>(s(e,t,o,0),[o[0],o[1],o[2]]));const u=e.length/3,f=r.mode;switch(r.mode){case"on-the-ground":for(let t=0;t<u;++t){const n=3*t,[o,r]=i(n);e[n+2]=c.getElevation(o,r,0,c.spatialReference,"ground")??0}break;case"relative-to-ground":case"relative-to-scene":{const t="relative-to-ground"===f?"ground":"scene";for(let n=0;n<u;++n){const o=3*n,[l,s,u]=i(o),f=r.calculateOffsetRenderUnits(a),g=c.getElevation(l,s,0,c.spatialReference,t)??0;e[o+2]=u+f+g}}break;case"absolute-height":for(let t=0;t<u;++t){const n=3*t,o=e[n+2],c=r.calculateOffsetRenderUnits(a);e[n+2]=o+c}}return e},e.generateId=function(e=""){return`${e}${t.generateUID()}`},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});