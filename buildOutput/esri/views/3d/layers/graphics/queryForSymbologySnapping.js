// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../core/promiseUtils","../../../../support/loadArcade"],function(e,n,t){"use strict";const r={candidates:[],sourceCandidateIndices:[]};e.queryForSymbologySnapping=async function(e,a,o){if(null==e||0===a.candidates.length)return r;const i=e.graphics3DGraphicsByObjectID??e.graphics3DGraphics,c=[],s=[],{renderer:d}=e,l=null!=d&&"arcadeRequired"in d&&d.arcadeRequired?t.loadArcade():null,u=async(n,{graphic:t,graphics3DSymbol:r})=>{const a=await l,i=await e.getRenderingInfoAsync(t,d,a,{signal:o});return null==i?[]:r.queryForSnapping(n,g,i,o)},{candidates:p,spatialReference:g}=a;for(let e=0;e<p.length;++e){const n=p[e],{objectId:t}=n,r="number"==typeof t?i?.get(t):void 0;if(null==r)continue;const{graphics3DSymbol:a}=r;a.symbologySnappingSupported&&(c.push(u(n,r)),s.push(e))}if(0===c.length)return r;const h=await Promise.all(c);n.throwIfAborted(o);const f=[],y=[];for(let e=0;e<h.length;++e){const n=h[e],t=s[e];for(const e of n)f.push(e),y.push(t)}return{candidates:f,sourceCandidateIndices:y}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});