// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../core/maybe","../../../../core/promiseUtils"],function(t,o,r){"use strict";t.Loadable=class{constructor(t){this.schedule=t,this._abortController=null,this._loadStatus=0,this._loadError=null,this._loader=null,this.logger=null}destroy(){this.abortLoad()}get loadStatus(){return this._loadStatus}load(t,o){return 1===this._loadStatus?(t&&t(),this._loader??Promise.resolve()):2===this._loadStatus?(o&&o(this._loadError),this._loader??Promise.resolve()):(null==this._loader&&(this._abortController=new AbortController,this._loader=this.doLoad(this._abortController.signal).then(()=>{this._abortController=null,this._loadStatus=1},t=>{throw this._loadError=t,this._abortController=null,this._loadStatus=2,!r.isAbortError(t)&&this.logger&&t.message&&this.logger.warn(t.message),t})),this._loader.then(t,o).catch(()=>{}),this._loader)}abortLoad(){null!=this._abortController?this._abortController=o.abortMaybe(this._abortController):0===this._loadStatus&&(this._loadStatus=2),this._loader=null}},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});