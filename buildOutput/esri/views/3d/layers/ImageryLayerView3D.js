// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../../../chunks/tslib.es6","../../../core/handleUtils","../../../core/reactiveUtils","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","./DynamicLayerView3D","./ImagerySubView3D","./support/ImageHighlightHelper3D","../support/flow/FlowSubViewExtent3D","../../layers/ImageryLayerView"],function(e,t,i,r,s,a,h,l,n,d,o,p,g){"use strict";let u=class extends(g(n)){constructor(){super(...arguments),this.type="imagery-3d"}get highlightOptions(){return null}get pixelData(){return null}initialize(){const e=()=>this._updatingHandles.addPromise(this.refreshDebounced());this._updatingHandles.add(()=>this.layer?.exportImageServiceParameters?.version,e),this._updatingHandles.add(()=>this.layer?.renderer,e),this._updatingHandles.add(()=>this.timeExtent,e),this._highlightHelper=new o.ImageHighlightHelper3D({view:this.view,layer:this.layer,updatingHandles:this._updatingHandles}),this.addHandles([t.destroyHandle(this._highlightHelper),i.watch(()=>this.suspended,e=>this._highlightHelper.suspended=e,i.syncAndInitial)])}_initSubView(){this.addHandles([i.watch(()=>this.layer.renderer,e=>this._recreateSubView(e),i.initial)])}_recreateSubView(e){const t="flow"===e?.type,i="flow"===this.subView?.type,r=this.subView;r&&t===i||(this.subView=t?new p({layerView:this}):new d({layerView:this}),r?.destroy())}getFetchOptions(){return{timeExtent:this.timeExtent}}highlight(e,t){return this._highlightHelper.highlight(e,t)}isUpdating(){return super.isUpdating()||this._highlightHelper.updating}};return e.__decorate([r.property()],u.prototype,"highlightOptions",null),e.__decorate([r.property()],u.prototype,"pixelData",null),u=e.__decorate([l.subclass("esri.views.3d.layers.ImageryLayerView3D")],u),u});