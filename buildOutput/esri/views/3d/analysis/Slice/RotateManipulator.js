// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../Color","../../../../core/colorUtils","../../../../core/maybe","../../../../core/reactiveUtils","./sliceToolUtils","../../interactive/Manipulator3D","../../interactive/manipulatorUtils","../../interactive/RenderObject","../../webgl-engine/lib/Attribute","../../webgl-engine/lib/Geometry","../../webgl-engine/lib/GeometryUtil","../../webgl-engine/materials/ImageMaterial","../../webgl-engine/materials/RibbonLineMaterial"],function(e,t,i,r,a,l,n,o,c,s,u,d,b,m){"use strict";class p extends n.Manipulator3D{constructor(e,r){const l=i.multiplyOpacity(e.effectiveTheme.accentColor,.5),n=i.getContrast(e.effectiveTheme.accentColor),c=r(l,n),s=new b.ImageMaterial({draped:!1,texture:c.texture,writeDepth:!1,renderOccluded:16,isDecoration:!0}),u=o.rotateManipulatorDefaults.calloutWidth,d=new m.RibbonLineMaterial({width:u,renderOccluded:4,isDecoration:!0});super({view:e,...y({imageMaterial:s,calloutMaterial:d})}),this._material=s,this._textureHandle=c,this._themeHandle=a.watch(()=>e.effectiveTheme.accentColor,e=>{const a=i.multiplyOpacity(e,.5),l=i.getContrast(e),n=this._textureHandle;this._textureHandle=r(a,l),s.setParameters({texture:this._textureHandle.texture}),n?.release(),d.setParameters({color:t.toUnitRGBA(e)})},a.initial)}destroy(){this._textureHandle=r.releaseMaybe(this._textureHandle),this._themeHandle.remove(),this._material.dispose(),super.destroy()}}function y({imageMaterial:e,calloutMaterial:t}){const{focusMultiplier:i,calloutLength:r,discRadius:a}=o.rotateManipulatorDefaults,n=a*i,b=(e,t)=>{const i=[0,1,2,2,3,0];return new u.Geometry(t,[["position",new s.Attribute([r-e,-e,0,r+e,-e,0,r+e,e,0,r-e,e,0],i,3,!0)],["uv0",new s.Attribute([0,0,1,0,1,1,0,1],i,2,!0)]])},m=d.createPolylineGeometry(t,[[0,0,0],[r-a,0,0]]),p=d.createPolylineGeometry(t,[[0,0,0],[r-n,0,0]]),y=l.DidPointerMoveRecentlyFlag;return{autoScaleRenderObjects:!1,collisionPriority:1,collisionType:{type:"disc",direction:[0,0,1],offset:[r,0,0]},focusMultiplier:i,radius:a,renderObjects:[new c.RenderObject(b(a,e),1|y),new c.RenderObject(m,1|y),new c.RenderObject(b(n,e),2|y),new c.RenderObject(p,2|y)],state:y}}e.RotateManipulator=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});