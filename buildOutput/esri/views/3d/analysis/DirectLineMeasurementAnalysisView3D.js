// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["../../../chunks/tslib.es6","../../../core/Accessor","../../../core/has","../../../core/maybe","../../../core/accessorSupport/decorators/property","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","../../../support/getDefaultUnitForView","./AnalysisView3D","./DirectLineMeasurement/DirectLineMeasurementController","./DirectLineMeasurement/DirectLineMeasurementVisualization","../interactive/measurementTools/directLineMeasurement3D/DirectLineMeasurement3DTool","../../analysis/analysisViewUtils","../../support/geodesicLengthMeasurementUtils"],function(e,t,i,a,s,r,o,n,l,u,p,y,d,c,h){"use strict";let _=class extends(u.AnalysisView3D(t)){constructor(e){super(e),this.type="direct-line-measurement-view-3d",this.analysis=null,this.tool=null,this.result=null,this.measurementMode=0,this.elevationAlignedStartPoint=null,this.elevationAlignedEndPoint=null,this.userOperation=null}initialize(){const{analysis:e,view:t}=this;this._analysisVisualization=new y.DirectLineMeasurementVisualization({view:t,analysis:e,analysisView:this}),this.addResolvingPromise(h.loadGeodesicLengthMeasurementUtils().then(i=>{this.destroyed||(this._analysisController=new p.DirectLineMeasurementController({view:t,analysis:e,viewData:this,geodesicLengthMeasurementUtils:i}))})),this.addHandles(c.connectAnalysisViewToTool(this,d))}destroy(){c.removeAnalysisViewTool(this),this.userOperation=a.abortMaybe(this.userOperation),this._analysisController=a.destroyMaybe(this._analysisController),this._analysisVisualization=a.destroyMaybe(this._analysisVisualization)}get updating(){return!!this._analysisVisualization?.loadingMessages}get visible(){return super.visible}set visible(e){super.visible=e}get interactive(){return super.interactive}set interactive(e){super.interactive=e}get viewMode(){return this._analysisVisualization.viewMode}get actualVisualizedMeasurement(){return this._analysisVisualization.actualVisualizedMeasurement}get visualElementOrientation(){return this._analysisVisualization.visualElementOrientation}set visualElementOrientation(e){this._analysisVisualization.visualElementOrientation=e}get allowVisualElementsOrientationChange(){return this._analysisVisualization.allowVisualElementsOrientationChange}set allowVisualElementsOrientationChange(e){this._analysisVisualization.allowVisualElementsOrientationChange=e}get triangleCollapseRatioThreshold(){return this._analysisVisualization.triangleCollapseRatioThreshold}set triangleCollapseRatioThreshold(e){this._analysisVisualization.triangleCollapseRatioThreshold=e}get directLabelText(){return this._analysisVisualization.labels.direct?.text??""}get horizontalLabelText(){return this._analysisVisualization.labels.horizontal?.text??""}get verticalLabelText(){return this._analysisVisualization.labels.vertical?.text??""}get unit(){return this.analysis.unit??l.getDefaultUnitForView(this.view)}get testData(){}place(e){return c.startPlaceOperation(this,{placementOptions:e})}};return e.__decorate([s.property()],_.prototype,"_analysisVisualization",void 0),e.__decorate([s.property()],_.prototype,"_analysisController",void 0),e.__decorate([s.property()],_.prototype,"updating",null),e.__decorate([s.property({readOnly:!0})],_.prototype,"type",void 0),e.__decorate([s.property({constructOnly:!0,nonNullable:!0})],_.prototype,"analysis",void 0),e.__decorate([s.property()],_.prototype,"tool",void 0),e.__decorate([s.property()],_.prototype,"result",void 0),e.__decorate([s.property()],_.prototype,"measurementMode",void 0),e.__decorate([s.property()],_.prototype,"elevationAlignedStartPoint",void 0),e.__decorate([s.property()],_.prototype,"elevationAlignedEndPoint",void 0),e.__decorate([s.property({readOnly:!0})],_.prototype,"viewMode",null),e.__decorate([s.property({readOnly:!0})],_.prototype,"actualVisualizedMeasurement",null),e.__decorate([s.property()],_.prototype,"visualElementOrientation",null),e.__decorate([s.property()],_.prototype,"allowVisualElementsOrientationChange",null),e.__decorate([s.property()],_.prototype,"triangleCollapseRatioThreshold",null),e.__decorate([s.property({readOnly:!0})],_.prototype,"directLabelText",null),e.__decorate([s.property({readOnly:!0})],_.prototype,"horizontalLabelText",null),e.__decorate([s.property({readOnly:!0})],_.prototype,"verticalLabelText",null),e.__decorate([s.property()],_.prototype,"unit",null),e.__decorate([s.property()],_.prototype,"userOperation",void 0),_=e.__decorate([n.subclass("esri.views.3d.analysis.DirectLineMeasurementAnalysisView3D")],_),_});