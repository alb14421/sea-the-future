// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../Camera","../../core/mathUtils","../../core/libs/gl-matrix-2/factories/mat4f64","../../chunks/vec32","../../core/libs/gl-matrix-2/factories/vec3f64","../../geometry/Point","../../geometry/SpatialReference","../../geometry/projection/computeTranslationToOriginAndRotation","../../geometry/projection/projectBuffer","../../geometry/projection/projectPointToVector","../../geometry/projection/projectVectorToVector","./camera/intersectionUtils","./support/viewingModeUtils"],function(e,o,r,t,n,i,a,c,l,s,u,d,p,f){"use strict";const m=i.create(),R={heading:0,tilt:0};e.InternalRenderCategory={SSAO:"ssao",LASERLINES:"laserline-color",ANTIALIASING:"aa-color",HIGHLIGHTS:"highlight-color",MAGNIFIER:"magnifier-color",OCCLUDED:"occluded-color",VIEWSHED:"viewshed-color",OPAQUE_TERRAIN:"opaque-terrain-color",OPAQUE_ENVIRONMENT:"opaque-environment-color",TRANSPARENT_ENVIRONMENT:"transparent-environment-color",FOCUSAREA:"focusarea",FOCUSAREA_COLOR:"focusarea-color"},e.RenderCategory={OPAQUE:"opaque-color",TRANSPARENT:"transparent-color",COMPOSITE:"composite-color",FINAL:"final-color"},e.fromRenderCamera=function(e,t,n){const i=e.renderSpatialReference,l=f.directionToHeadingTilt(e,t.eye,t.viewForward,t.up,R);let s=e.spatialReference;return d.projectVectorToVector(t.eye,i,m,s)||(s=c.WGS84,d.projectVectorToVector(t.eye,i,m,s)),null==n?n=new o(new a(m,s),l.heading,l.tilt,r.rad2deg(t.fov)):(n.position.x=m[0],n.position.y=m[1],n.position.z=m[2],n.position.spatialReference=s,n.heading=l.heading,n.tilt=l.tilt,n.fov=r.rad2deg(t.fov)),n.layout.row=t.row,n.layout.rows=t.rows,n.layout.column=t.column,n.layout.columns=t.columns,n},e.fromRenderCoordinates=function(e,o,r,t,n,i,a){return i=i||e.spatialReference,s.projectBuffer(o,e.renderCoordsHelper.spatialReference,r,t,i,n,a)?t:null},e.renderCoordinateTransformAt=function(e,o,r,n){return n||(n=t.create()),r=r||e.spatialReference,l.computeTranslationToOriginAndRotation(r,o,n,e.renderCoordsHelper.spatialReference)?n:null},e.toRenderCamera=function(e,o){if(!o)return null;const t=e.renderSpatialReference,a=f.viewModeDependentUtil(e).headingTiltToDirectionUp,c=i.create();if(!u.projectPointToVector(o.position,c,t))return null;const l=a(c,o.heading,o.tilt);n.scale(l.direction,l.direction,e.state.camera.distance),n.add(l.direction,l.direction,c);const s=p.cameraOnContentAlongViewDirection(e,c,l.direction,l.up);return s.fov=r.deg2rad(o.fov),s.row=o.layout.row,s.rows=o.layout.rows,s.column=o.layout.column,s.columns=o.layout.columns,s},e.toRenderCoordinates=function(e,o,r,t,n,i,a){return t=t||e.spatialReference,s.projectBuffer(o,t,r,n,e.renderCoordsHelper.spatialReference,i,a)?n:null},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});