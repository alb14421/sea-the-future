// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/mathUtils","../../../chunks/vec32","../../../core/libs/gl-matrix-2/factories/vec3f64"],function(t,n,e,a){"use strict";const r=a.create(),o=a.create(),c=a.create(),s=a.create(),i=a.create();t.angle=function(t,a,r){t=e.normalize(s,t),a=e.normalize(i,a);const o=n.acosClamped(e.dot(t,a));if(r){const n=e.cross(c,t,a);if(e.dot(n,r)<0)return-o}return o},t.bilerp=function(t,n,e,a,r,o){const c=t+(n-t)*r;return c+(e+(a-e)*r-c)*o},t.cosCapped=function(t,n){return t>n?Math.cos(n):Math.cos(t)},t.fovx2fovy=function(t,n,e){return 2*Math.atan(e*Math.tan(.5*t)/n)},t.fovy2fovx=function(t,n,e){return 2*Math.atan(n*Math.tan(.5*t)/e)},t.makeOrthonormal=function(t,n,a){a=a||t;const r=e.dot(t,n);e.set(a,t[0]-r*n[0],t[1]-r*n[1],t[2]-r*n[2]),e.normalize(a,a)},t.makePiecewiseLinearFunction=function(t){const n=t.length;return e=>{if(e<=t[0][0])return t[0][1];if(e>=t[n-1][0])return t[n-1][1];let a=1;for(;e>t[a][0];)a++;const r=t[a-1][0],o=t[a][0],c=(o-e)/(o-r);return c*t[a-1][1]+(1-c)*t[a][1]}},t.maxScale=function(t){const n=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],e=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],a=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(n,e,a))},t.midpoint3d=function(t,n){if(e.set(n,0,0,0),t.length>0){for(let a=0;a<t.length;++a)e.add(n,n,t[a]);e.scale(n,n,1/t.length)}},t.planeFromPoints=function(t,n,a,c){e.subtract(r,n,t),e.subtract(o,a,t),e.cross(c,r,o),e.normalize(c,c),c[3]=-e.dot(t,c)},t.scaleFromMatrix=function(t,n){const a=Math.sqrt(n[0]*n[0]+n[4]*n[4]+n[8]*n[8]),r=Math.sqrt(n[1]*n[1]+n[5]*n[5]+n[9]*n[9]),o=Math.sqrt(n[2]*n[2]+n[6]*n[6]+n[10]*n[10]);return e.set(t,a,r,o),t},t.slerp=function(t,n,r,o=a.create()){const c=e.length(t),l=e.length(n),u=e.dot(t,n)/(c*l);if(u<.9999999999999999){const a=Math.acos(u),h=((1-r)*c+r*l)/Math.sin(a),f=h/c*Math.sin((1-r)*a),M=h/l*Math.sin(r*a);return e.scale(s,t,f),e.scale(i,n,M),e.add(o,s,i)}return e.lerp(o,t,n,r)},t.slerpTangent=function(t,n,r,o=a.create(),c=a.create()){const l=e.length(t),u=e.length(n),h=e.dot(t,n)/(l*u);if(h<.9999999999999999){const a=Math.acos(h),f=Math.sin(a),M=Math.sin(r*a),d=Math.sin((1-r)*a),m=(1-r)*l+r*u;{const a=m/f,r=a/l*d,c=a/u*M;e.scale(s,t,r),e.scale(i,n,c),e.add(o,s,i)}{const o=1/l*(-Math.cos((1-r)*a)*a*m+d*(-l+u));e.scale(s,t,o);const h=1/u*(Math.cos(r*a)*a*m+M*(-l+u));e.scale(i,n,h),e.add(c,s,i),e.scale(c,c,1/f)}return c}return e.lerp(o,t,n,r),e.subtract(c,n,t),e.normalize(c,c),c},t.tangentFrame=function(t,n,a){Math.abs(t[0])>Math.abs(t[1])?e.set(n,0,1,0):e.set(n,1,0,0),e.cross(a,t,n),e.cross(n,a,t),e.normalize(a,a),e.normalize(n,n)},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});