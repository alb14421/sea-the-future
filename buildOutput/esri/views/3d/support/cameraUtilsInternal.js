// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/mathUtils","../../../chunks/vec32","../../../core/libs/gl-matrix-2/factories/vec3f64","../../../geometry/support/lineSegment","../../../geometry/support/plane"],function(e,t,n,o,c,r){"use strict";const a=o.create(),i=o.create(),l=o.create();e.clampLineSegmentToPlane=function(e,t,o,a){n.subtract(l,o,t),r.intersectLineSegment(a,c.wrap(t,l),e)||e===o||n.copy(e,o)},e.createDirectionUp=function(){return{direction:o.create(),up:o.create()}},e.directionToHeadingTilt=function(e,o,c,r,l){let s=n.normalize(a,e),d=n.dot(s,r);const g=d>0;d=Math.abs(d),d>.99&&(d=Math.abs(n.dot(o,r)),d<.99?(n.copy(s,o),g&&n.scale(s,s,-1)):s=null);let u=0;if(s){n.scale(i,r,n.dot(r,s)),n.subtract(s,s,i);const e=n.dot(s,l)/(n.length(s)*n.length(l));n.cross(i,s,l),u=(n.dot(i,r)>0?1:-1)*t.rad2deg(t.acosClamped(e))}const p=t.rad2deg(t.acosClamped(-n.dot(r,e)/n.length(e)));return c?(c.heading=u,c.tilt=p,c):{heading:u,tilt:p}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});