// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/libs/gl-matrix-2/factories/vec2f64","../../../chunks/vec32","../../../core/libs/gl-matrix-2/factories/vec3f64","../../../geometry/support/plane"],function(t,e,r,n,i){"use strict";const c={dir:n.create(),len:0,clip:e.create()};function u(t,e,n,i){const u=c;return t?(n&&i&&(u.len=r.distance(e,n)),r.copy(u.dir,t)):i?(u.len=r.distance(e,n),r.subtract(u.dir,n,e),r.scale(u.dir,u.dir,1/u.len)):(r.subtract(u.dir,n,e),r.normalize(u.dir,u.dir)),u}function o(t,e,n){const c=r.dot(i.getNormal(t),n.dir),u=-i.signedDistance(t,e);if(u<0&&c>=0)return!1;if(c>-1e-6&&c<1e-6)return u>0;if((u<0||c<0)&&!(u<0&&c<0))return!0;const o=u/c;return c>0?o<n.clip[1]&&(n.clip[1]=o):o>n.clip[0]&&(n.clip[0]=o),n.clip[0]<=n.clip[1]}function l(t,e,r,n){n.clip[0]=0,n.clip[1]=r?n.len:Number.MAX_VALUE;for(let r=0;r<t.length;r++)if(!o(t[r],e,n))return!1;return!0}t.closestPointOnRay=function(t,e,n,i){const c=r.dot(n,r.subtract(t,i,e));return r.add(t,e,r.scale(t,n,c))},t.frustumLineSegment=function(t,e,r,n){return l(t,e,r,u(n,e,r,!0))},t.frustumPoint=function(t,e){for(let r=0;r<6;r++)if(i.signedDistance(t[r],e)>0)return!1;return!0},t.frustumRay=function(t,e,r,n){return l(t,e,null,u(n,e,r,!1))},t.frustumSphere=function(t,e,r){const n=e[0],i=e[1],c=e[2];return!(t[0][0]*n+t[0][1]*i+t[0][2]*c+t[0][3]>r||t[1][0]*n+t[1][1]*i+t[1][2]*c+t[1][3]>r||t[2][0]*n+t[2][1]*i+t[2][2]*c+t[2][3]>r||t[3][0]*n+t[3][1]*i+t[3][2]*c+t[3][3]>r||t[4][0]*n+t[4][1]*i+t[4][2]*c+t[4][3]>r||t[5][0]*n+t[5][1]*i+t[5][2]*c+t[5][3]>r)},t.planeSphere=function(t,e,r){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]<r},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});