// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../geometry/projection/projectBuffer","../../../../geometry/support/DoubleArray","../../../../geometry/support/triangulationUtils","../../layers/graphics/elevationAlignmentUtils","../../terrain/OverlayRenderer"],function(e,n,o,t,r,i){"use strict";function l(e,n,t=null){const r=new Array;for(const{index:i,count:l}of e){if(l<=1)continue;const e=3*i,s=3*l;r.push({position:o.doubleSubArray(n,3*i,3*l),mapPositions:null!=t?o.doubleSubArray(t,e,s):void 0})}return r}e.geometryToRenderInfo=function(e,n,i,s){const p="polygon"===e.type?1:0,a="polygon"===e.type?e.rings:e.paths,{position:u,outlines:c}=t.ringsToTriangulationInfo(a,!!e.hasZ,p,e.spatialReference),g=o.newDoubleArray(u.length),y=r.applyPerVertexElevationAlignment(u,e.spatialReference,0,g,0,u,0,u.length/3,n,i,s),f=null!=y;return{lines:f?l(c,u,g):[],projectionSuccess:f,sampledElevation:y}},e.geometryToRenderInfoDraped=function(e,o){const r="polygon"===e.type?1:0,s="polygon"===e.type?e.rings:e.paths,{position:p,outlines:a}=t.ringsToTriangulationInfo(s,!1,r),u=n.projectBuffer(p,e.spatialReference,0,p,o,0);for(let e=2;e<p.length;e+=3)p[e]=i.drapedZ;return{lines:u?l(a,p):[],projectionSuccess:u}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});