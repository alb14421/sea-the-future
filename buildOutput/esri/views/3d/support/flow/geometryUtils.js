// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../Color","../../../../core/libs/gl-matrix-2/factories/vec3f64","../../../../geometry/support/HalfFloatArray","../../../../support/elevationInfoUtils","../engineContent/line","../../terrain/OverlayRenderer"],function(e,t,n,r,o,i,l){"use strict";function a([e,t],n){const{extent:r,size:[o,i]}=n;return[e/o*r.width+r.xmin,(i-t)/i*r.height+r.ymin]}function s(e,t,r,i,l){const{absoluteZ:a}=o.zValueInAbsoluteHeightMode(e,t,0,r,i,l),s=n.fromValues(e,t,a);return i.renderCoordsHelper.toRenderCoords(s,r,s),s}e.createStreamlineGeometry=function(e,t,n,o,c,f,u){const{spatialReference:d}=t.extent,g=[];for(let r=0;r<n.length;r+=3){const i=[n[r],n[r+1]],[c,u]=a(i,t),h=f?[c,u,l.drapedZ]:s(c,u,d,e,o);g.push(h)}const h=Math.floor(n.length/3),m=r.newHalfFloatArray(h);for(let e=0;e<h;e++)m[e]=n[3*e+2];!function(e,t){if(0===e.length||t<0||t>=e.length)return;const n=e[t];for(let t=0;t<e.length;t++)e[t]-=n}(m,Math.floor(u.getIntRange(0,m.length)));const p=i.lineStripsToParameters([g],void 0,[m]);return i.createGeometry(c,p[0])},e.materialParametersFromRenderer=function(e,n,r){if(null==e)return{};const o=t.toUnitRGBA(e.color);return o[3]*=n,{color:o,width:e.trailWidth,cap:2,animationSpeed:e.flowSpeed,trailLength:e.trailLength,animation:3,emissiveStrength:r}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});