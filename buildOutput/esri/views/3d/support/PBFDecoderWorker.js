// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
require({cache:{"esri/rest/query/operations/pbfDehydratedFeatureSet":function(){define(["exports","../../../core/compilerUtils","../../../core/uid","../../../geometry/SpatialReference","../../../geometry/support/zscale","../../../layers/graphics/dehydratedFeatures","../../../layers/graphics/featureConversionUtils","../../../layers/support/Field"],function(e,t,n,r,o,s,i,a){"use strict";function u(e,t){return t}function l(e,t,n,r){switch(n){case 0:return m(e,t+r,0);case 1:return"lowerLeft"===e.originPosition?m(e,t+r,1):function({translate:e,scale:t},n,r){return e[r]-n*t[r]}(e,t+r,1)}}function c(e,t,n,r){return 2===n?m(e,t,2):l(e,t,n,r)}function h(e,t,n,r){return 2===n?m(e,t,3):l(e,t,n,r)}function f(e,t,n,r){return 3===n?m(e,t,3):c(e,t,n,r)}function m({translate:e,scale:t},n,r){return e[r]+n*t[r]}e.DehydratedFeatureSetParserContext=class{constructor(e){this._options=e,this.geometryTypes=["point","multipoint","polyline","polygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=u,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{},this._missingAttributes=[]}get missingAttributes(){return this._missingAttributes}createFeatureResult(){return new s.DehydratedFeatureSetClass}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const t=o.getGeometryZScaler(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(null!=t)for(const n of e.features)t(n.geometry)}createSpatialReference(){return new r}addField(e,t){e.fields.push(a.fromJSON(t));const n=e.fields.map(e=>e.name);this._attributesConstructor=function(){for(const e of n)this[e]=null}}addFeature(e,t){const n=this._options.maxStringAttributeLength,r=this._options.maxStringAttributeFields;s.removeLargeStringAttributes(t.attributes,r,n,n=>{const r=t.attributes[e.objectIdFieldName];null!=r&&this._missingAttributes.push({objectId:r,attribute:n})}),e.features.push(t)}addQueryGeometry(e,t){const{queryGeometry:n,queryGeometryType:r}=t,o=this._transform?i.unquantizeOptimizedGeometry(n.clone(),n,!1,!1,this._transform):n.clone(),s=i.convertToGeometry(o,r,!1,!1);switch(r){case"esriGeometryPoint":s.type="point";break;case"esriGeometryPolygon":s.type="polygon";break;case"esriGeometryPolyline":s.type="polyline";break;case"esriGeometryMultipoint":s.type="multipoint"}e.queryGeometryType=r,e.queryGeometry=s}prepareFeatures(e){switch(this._transform=e.transform??null,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++,e.geometryType){case"point":this.addCoordinate=(e,t,n)=>this.addCoordinatePoint(e,t,n),this.createGeometry=e=>this.createPointGeometry(e);break;case"polygon":this.addCoordinate=(e,t,n)=>this._addCoordinatePolygon(e,t,n),this.createGeometry=e=>this._createPolygonGeometry(e);break;case"polyline":this.addCoordinate=(e,t,n)=>this._addCoordinatePolyline(e,t,n),this.createGeometry=e=>this._createPolylineGeometry(e);break;case"multipoint":this.addCoordinate=(e,t,n)=>this._addCoordinateMultipoint(e,t,n),this.createGeometry=e=>this._createMultipointGeometry(e);break;case"mesh":case"extent":break;default:t.neverReached(e.geometryType)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,new s.DehydratedFeatureClass(n.generateUID(),null,new this._attributesConstructor)}allocateCoordinates(){const e=this._lengths.reduce((e,t)=>e+t,0);this._coordinateBuffer=new Float64Array(e*this._vertexDimension),this._coordinateBufferPtr=0}addLength(e,t){0===this._lengths.length&&(this._toAddInCurrentPath=t),this._lengths.push(t)}createPointGeometry(e){const t={type:"point",x:0,y:0,spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM};return t.hasZ&&(t.z=0),t.hasM&&(t.m=0),t}addCoordinatePoint(e,t,n){const r=this._transform?this._applyTransform(this._transform,t,n,0):t;if(null!=r)switch(n){case 0:e.x=r;break;case 1:e.y=r;break;case 2:e.hasZ?e.z=r:e.m=r;break;case 3:e.m=r}}_transformPathLikeValue(e,t){let n=0;return t<=1&&(n=this._previousCoordinate[t],this._previousCoordinate[t]+=e),this._transform?this._applyTransform(this._transform,e,t,n):e}_addCoordinatePolyline(e,t,n){this._dehydratedAddPointsCoordinate(e.paths,t,n)}_addCoordinatePolygon(e,t,n){this._dehydratedAddPointsCoordinate(e.rings,t,n)}_addCoordinateMultipoint(e,t,n){0===n&&e.points.push([]);const r=this._transformPathLikeValue(t,n);e.points[e.points.length-1].push(r)}_createPolygonGeometry(e){return{type:"polygon",rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{type:"polyline",paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{type:"multipoint",points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,t,n){0===n&&0===this._toAddInCurrentPath--&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const r=this._transformPathLikeValue(t,n),o=e[e.length-1],s=this._coordinateBuffer;if(s){if(0===n){const e=this._coordinateBufferPtr*Float64Array.BYTES_PER_ELEMENT;o.push(new Float64Array(s.buffer,e,this._vertexDimension))}s[this._coordinateBufferPtr++]=r}}_deriveApplyTransform(e){const{hasZ:t,hasM:n}=e;return t&&n?f:t?c:n?h:l}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/dehydratedFeatures":function(){define(["exports","../../core/has","../../core/memoryEstimations","../../core/uid","../../geometry/SpatialReference","../../geometry/support/aaBoundingBox","../../geometry/support/aaBoundingRect","../../geometry/support/quantizationUtils","../../geometry/support/typeUtils","../support/Field","../../views/2d/layers/graphics/densificationConstants","./dehydratedFeatureComparison"],function(e,t,n,r,o,s,i,a,u,l,c,h){"use strict";function f(e,t,n){if(null==e)return null;switch(t){case"point":{const t=e;return{x:t.x,y:t.y,z:t.z,m:t.m,hasZ:null!=t.z,hasM:null!=t.m,type:"point",spatialReference:n}}case"polyline":{const t=e;return{paths:t.paths,hasZ:!!t.hasZ,hasM:!!t.hasM,type:"polyline",spatialReference:n}}case"polygon":{const t=e;return{rings:t.rings,hasZ:!!t.hasZ,hasM:!!t.hasM,type:"polygon",spatialReference:n}}case"multipoint":{const t=e;return{points:t.points,hasZ:!!t.hasZ,hasM:!!t.hasM,type:"multipoint",spatialReference:n}}}}function m(e){if(null==e)return 0;switch(e.type){case"point":return n.baseObjectMemory+10+8+24;case"polyline":case"polygon":{let t=0;const r=2+(e.hasZ?1:0)+(e.hasM?1:0),o="polyline"===e.type?e.paths:e.rings,s="polyline"===e.type?e.curvePaths:e.curveRings;if(s?.length){const e=3*c.getApproximateMaxDensificationSegments()*128;t=8*e*r+128*e+32*(o.length+1)}else t=n.estimateNestedObjectMemory(o);return n.baseObjectMemory+64+t+34}case"multipoint":{const t=n.estimateNestedObjectMemory(e.points);return n.baseObjectMemory+t+64+34+32}case"extent":return n.baseObjectMemory+10+64+34;case"mesh":{const t=e.vertexAttributes;return n.baseObjectMemory+n.estimateNumberArrayMemory(t.position,t.normal,t.uv,t.tangent)}default:return n.baseObjectMemory}}function d(e,t){return null!=e.objectId?e.objectId:e.attributes&&t?e.attributes[t]:null}function y(e,t,n,r){if(t?.size&&null!=n&&e)for(const o in e){if(!t.has(o))continue;const s=e[o];"string"==typeof s&&s.length>n&&(r(o),e[o]="")}}e.equals=h.equals,e.DehydratedFeatureClass=class{constructor(e,t,n){this.uid=e,this.geometry=t,this.attributes=n,this.visible=!0,this.objectId=null,this.centroid=null}},e.DehydratedFeatureSetClass=class{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}},e.computeAABB=function(e,t){switch(s.empty(t),"mesh"===e.type&&(e=e.extent),e.type){case"point":t[0]=t[3]=e.x,t[1]=t[4]=e.y,e.hasZ&&(t[2]=t[5]=e.z);break;case"polyline":for(let n=0;n<e.paths.length;n++)s.expandWithNestedArray(t,e.paths[n],!!e.hasZ);break;case"polygon":for(let n=0;n<e.rings.length;n++)s.expandWithNestedArray(t,e.rings[n],!!e.hasZ);break;case"multipoint":s.expandWithNestedArray(t,e.points,!!e.hasZ);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[3]=e.xmax,t[4]=e.ymax,null!=e.zmin&&(t[2]=e.zmin),null!=e.zmax&&(t[5]=e.zmax)}return t},e.computeAABR=function(e,t){switch(i.empty(t),"mesh"===e.type&&(e=e.extent),e.type){case"point":t[0]=t[2]=e.x,t[1]=t[3]=e.y;break;case"polyline":for(let n=0;n<e.paths.length;n++)i.expandWithNestedArray(t,e.paths[n]);break;case"polygon":for(let n=0;n<e.rings.length;n++)i.expandWithNestedArray(t,e.rings[n]);break;case"multipoint":i.expandWithNestedArray(t,e.points);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax}},e.estimateGeometryMemory=m,e.estimateSize=function(e){let t=32;return t+=n.estimateAttributesMemory(e.attributes),t+=3,t+=8+m(e.geometry),t},e.fromFeatureSetJSON=function(e,t){const n=u.featureGeometryTypeKebabDictionary.fromJSON(e.geometryType),s=o.fromJSON(e.spatialReference),i=e.transform,c=e.objectIdFieldName,h=t?.maxStringAttributeLength,m=t?.maxStringAttributeFields;let p;const g=e.features.map(t=>{const o=function(e,t,n,o){return{uid:r.generateUID(),objectId:o&&e.attributes?e.attributes[o]:null,attributes:e.attributes,geometry:f(e.geometry,t,n),visible:!0}}(t,n,s,e.objectIdFieldName),u=o.geometry;if(y(o.attributes,m,h,e=>{p??=[];const t=d(o,c);null!=t&&p.push({objectId:t,attribute:e})}),null!=u&&i)switch(u.type){case"point":o.geometry=a.unquantizePoint(i,u,u);break;case"multipoint":o.geometry=a.unquantizeMultipoint(i,u,u);break;case"polygon":o.geometry=a.unquantizePolygon(i,u,u);break;case"polyline":o.geometry=a.unquantizePolyline(i,u,u);break;case"extent":case"mesh":o.geometry=u}return o});return{geometryType:n,features:g,spatialReference:s,fields:e.fields?.map(e=>l.fromJSON(e))??[],objectIdFieldName:e.objectIdFieldName,globalIdFieldName:e.globalIdFieldName,geohashFieldName:e.geohashFieldName,geometryProperties:e.geometryProperties,hasZ:e.hasZ,hasM:e.hasM,exceededTransferLimit:e.exceededTransferLimit,transform:null,missingAttributes:p}},e.fromJSONGeometry=f,e.getObjectId=d,e.hasGeometry=function(e){return null!=e.geometry},e.hasVertices=function(e){if(null==e)return!1;switch(e.type){case"extent":case"point":return!0;case"polyline":for(const t of e.paths)if(t.length>0)return!0;return!1;case"polygon":for(const t of e.rings)if(t.length>0)return!0;return!1;case"multipoint":return e.points.length>0;case"mesh":return!e.loaded||e.vertexAttributes.position.length>0}},e.numVertices=function(e){if(null==e)return 0;switch(e.type){case"point":return 1;case"polyline":{let t=0;for(const n of e.paths)t+=n.length;return t}case"polygon":{let t=0;for(const n of e.rings)t+=n.length;return t}case"multipoint":return e.points.length;case"extent":return 2;case"mesh":{const t=e.vertexAttributes&&e.vertexAttributes.position;return t?t.length/3:0}default:return}},e.removeLargeStringAttributes=y,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../Extent","./aaBoundingRect","./DoubleArray"],function(e,t,n,r){"use strict";function o(e=y){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function s(e,t,n,r,s,i,a=o()){return a[0]=e,a[1]=t,a[2]=n,a[3]=r,a[4]=s,a[5]=i,a}function i(e,t,n,r=o()){return f(r,d),a(r,e,t,n),r}function a(e,t,n=0,r=t.length/3){let o=e[0],s=e[1],i=e[2],a=e[3],u=e[4],l=e[5];for(let e=0;e<r;e++)o=Math.min(o,t[n+3*e]),s=Math.min(s,t[n+3*e+1]),i=Math.min(i,t[n+3*e+2]),a=Math.max(a,t[n+3*e]),u=Math.max(u,t[n+3*e+1]),l=Math.max(l,t[n+3*e+2]);e[0]=o,e[1]=s,e[2]=i,e[3]=a,e[4]=u,e[5]=l}function u(e){return e[0]>=e[3]?0:e[3]-e[0]}function l(e){return e[1]>=e[4]?0:e[4]-e[1]}function c(e){return e[2]>=e[5]?0:e[5]-e[2]}function h(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function f(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function m(e){return 6===e.length}const d=[1/0,1/0,1/0,-1/0,-1/0,-1/0],y=[0,0,0,0,0,0],p=o();e.allFinite=function(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0},e.center=function(e,t=[0,0,0]){return t[0]=e[0]+u(e)/2,t[1]=e[1]+l(e)/2,t[2]=e[2]+c(e)/2,t},e.contains=function(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[3]<=e[3]&&t[4]<=e[4]&&t[5]<=e[5]},e.containsPoint=function(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]},e.containsPointWithMargin=function(e,t,n){return t[0]>=e[0]-n&&t[1]>=e[1]-n&&t[2]>=e[2]-n&&t[0]<=e[3]+n&&t[1]<=e[4]+n&&t[2]<=e[5]+n},e.create=o,e.depth=l,e.diameter=function(e){const t=u(e),n=c(e),r=l(e);return Math.sqrt(t*t+n*n+r*r)},e.empty=function(e){return e?f(e,d):o(d)},e.equals=function(e,t,n){if(null==e||null==t)return e===t;if(!m(e)||!m(t))return!1;if(n){for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1}else for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},e.expandWithAABB=function(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])},e.expandWithBuffer=a,e.expandWithNestedArray=function(e,t,n){const r=t.length;let o=e[0],s=e[1],i=e[2],a=e[3],u=e[4],l=e[5];if(n)for(let e=0;e<r;e++){const n=t[e];o=Math.min(o,n[0]),s=Math.min(s,n[1]),i=Math.min(i,n[2]),a=Math.max(a,n[0]),u=Math.max(u,n[1]),l=Math.max(l,n[2])}else for(let e=0;e<r;e++){const n=t[e];o=Math.min(o,n[0]),s=Math.min(s,n[1]),a=Math.max(a,n[0]),u=Math.max(u,n[1])}e[0]=o,e[1]=s,e[2]=i,e[3]=a,e[4]=u,e[5]=l},e.expandWithOffset=function(e,t,n,r){e[0]=Math.min(e[0],e[0]+t),e[3]=Math.max(e[3],e[3]+t),e[1]=Math.min(e[1],e[1]+n),e[4]=Math.max(e[4],e[4]+n),e[2]=Math.min(e[2],e[2]+r),e[5]=Math.max(e[5],e[5]+r)},e.expandWithRect=function(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])},e.expandWithVec3=function(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])},e.fromBuffer=function(e,t=o()){return i(e,0,e.length/3,t)},e.fromExtent=function(e,t=o()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.hasZ?e.zmin:-1/0,t[3]=e.xmax,t[4]=e.ymax,t[5]=e.hasZ?e.zmax:1/0,t},e.fromMinMax=function(e,t,n=o()){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=t[0],n[4]=t[1],n[5]=t[2],n},e.fromRect=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e},e.fromRectValues=function(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=Number.NEGATIVE_INFINITY,e[3]=r,e[4]=o,e[5]=Number.POSITIVE_INFINITY,e},e.fromSubBuffer=i,e.fromValues=s,e.getMax=function(e,t){return t[0]=e[3],t[1]=e[4],t[2]=e[5],t},e.getMin=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.height=c,e.intersects=h,e.intersectsClippingArea=function(e,t){return null==t||h(e,t)},e.intersectsSegment=function(e,t,n){let r=0,o=1;for(let s=0;s<3;++s){const i=e[s],a=e[s+3],u=t[s],l=n[s],c=l<u,h=c?l:u,f=c?u:l,m=Math.max(i,h),d=Math.min(a,f);if(m>d)return!1;if(f===h)break;const y=f-h,p=(m-h)/y,g=(d-h)/y;if(r=Math.max(r,c?1-g:p),o=Math.min(o,c?1-p:g),r>o)return!1}return!0},e.is=m,e.isPoint=function(e){return 0===u(e)&&0===l(e)&&0===c(e)},e.maximumDimension=function(e){return Math.max(u(e),c(e),l(e))},e.negativeInfinity=d,e.offset=function(e,t,n,r,o=e){return o[0]=e[0]+t,o[1]=e[1]+n,o[2]=e[2]+r,o[3]=e[3]+t,o[4]=e[4]+n,o[5]=e[5]+r,o},e.positiveInfinity=[-1/0,-1/0,-1/0,1/0,1/0,1/0],e.scale=function(e,t,n=e){const r=e[0]+u(e)/2,o=e[1]+l(e)/2,s=e[2]+c(e)/2;return n[0]=r+(e[0]-r)*t,n[1]=o+(e[1]-o)*t,n[2]=s+(e[2]-s)*t,n[3]=r+(e[3]-r)*t,n[4]=o+(e[4]-o)*t,n[5]=s+(e[5]-s)*t,n},e.set=f,e.setMax=function(e,t,n=e){return n[3]=t[0],n[4]=t[1],n[5]=t[2],n!==e&&(n[0]=e[0],n[1]=e[1],n[2]=e[2]),e},e.setMin=function(e,t,n=e){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n!==e&&(n[3]=e[3],n[4]=e[4],n[5]=e[5]),n},e.size=function(e,t=[0,0,0]){return t[0]=u(e),t[1]=l(e),t[2]=c(e),t},e.toCorners=function(e,t=r.newDoubleArray(24)){const[n,o,s,i,a,u]=e;return t[0]=n,t[1]=o,t[2]=s,t[3]=n,t[4]=o,t[5]=u,t[6]=n,t[7]=a,t[8]=s,t[9]=n,t[10]=a,t[11]=u,t[12]=i,t[13]=o,t[14]=s,t[15]=i,t[16]=o,t[17]=u,t[18]=i,t[19]=a,t[20]=s,t[21]=i,t[22]=a,t[23]=u,t},e.toExtent=function(e,n){const r=isFinite(e[2])||isFinite(e[5]);return new t(r?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:n}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:n})},e.toRect=function(e,t){return t||(t=n.create()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t},e.width=u,e.wrap=function(e,t,n,r,o,i){return s(e,t,n,r,o,i,p)},e.zero=y,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/DoubleArray":function(){define(["exports","../../core/typedArrayUtil"],function(e,t){"use strict";e.copyInto=function(e,t){for(let n=0;n<t.length;++n)e[n]=t[n];return e},e.doubleArrayFrom=function(e){return(t.isTypedArray(e)?e.byteLength/8:e.length)<=t.nativeArrayMaxSize?Array.from(e):new Float64Array(e)},e.doubleSubArray=function(e,t,n){return Array.isArray(e)?e.slice(t,t+n):e.subarray(t,t+n)},e.ensurePackedArray=function(e){return[...e]},e.newDoubleArray=function(e,n=!1){return e<=t.nativeArrayMaxSize?n?new Array(e).fill(0):new Array(e):new Float64Array(e)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(e,t){"use strict";function n(e){if(function(e){return"lowerLeft"===e.originPosition&&4===e.scale.length&&4===e.translate.length}(e))return e;const{originPosition:t,scale:n,translate:r}=e,o=n[0]??1,s=n[1]??1;return{originPosition:"lowerLeft",scale:[o,"lowerLeft"===t?s:-s,n[2]??1,n[3]??1],translate:[r[0]??0,r[1]??0,r[2]??0,r[3]??0]}}function r({scale:e,translate:t},n){return Math.round((n-t[0])/e[0])}function o({scale:e,translate:t},n){return Math.round((n-t[1])/e[1])}function s({scale:e,translate:t},n){return Math.round(((n??0)-t[2])/e[2])}function i({scale:e,translate:t},n){return n?Math.round((n-t[3])/e[3]):0}function a(e,t){return e&&t?h:e&&!t?l:!e&&t?c:u}const u=(e,t)=>{const n=[];if(!t.length)return null;const s=t[0];let i=r(e,s[0]),a=o(e,s[1]);n.push([i,a]);for(let s=1;s<t.length;s++){const[u,l]=t[s],c=r(e,u),h=o(e,l);c===i&&h===a||n.push([c-i,h-a]),i=c,a=h}return n},l=(e,t)=>{const n=[];if(!t.length)return null;const i=t[0];let a=r(e,i[0]),u=o(e,i[1]),l=s(e,i[2]);n.push([a,u,l]);for(let i=1;i<t.length;i++){const[c,h,f]=t[i],m=r(e,c),d=o(e,h),y=s(e,f);m===a&&d===u&&y===l||n.push([m-a,d-u,y]),a=m,u=d,l=y}return n},c=(e,t)=>{const n=[];if(!t.length)return null;const s=t[0];let a=r(e,s[0]),u=o(e,s[1]),l=i(e,s[2]);n.push([a,u,l]);for(let s=1;s<t.length;s++){const[c,h,f]=t[s],m=r(e,c),d=o(e,h),y=i(e,f);m===a&&d===u&&y===l||n.push([m-a,d-u,y]),a=m,u=d,l=y}return n},h=(e,t)=>{const n=[];if(!t.length)return null;const a=t[0];let u=r(e,a[0]),l=o(e,a[1]),c=s(e,a[2]),h=i(e,a[3]);n.push([u,l,c,h]);for(let a=1;a<t.length;a++){const[f,m,d,y]=t[a],p=r(e,f),g=o(e,m),b=s(e,d),M=i(e,y);p===u&&g===l&&b===c&&M===h||n.push([p-u,g-l,b,M]),u=p,l=g,c=b,h=M}return n};function f({scale:e,translate:t},n){return n*e[0]+t[0]}function m({scale:e,translate:t},n){return n*e[1]+t[1]}function d({scale:e,translate:t},n){return(n??0)*e[2]+t[2]}function y({scale:e,translate:t},n){return n?n*e[3]+t[3]:0}function p(e,t){return e&&t?x:e&&!t?b:!e&&t?M:g}const g=(e,t)=>{const n=new Array(t.length);if(!t.length)return n;const r=t[0];let o=f(e,r[0]),s=m(e,r[1]);n[0]=[o,s];const{scale:i,originPosition:a}=e,u=i[0],l="lowerLeft"===a?i[1]:-i[1];for(let e=1;e<t.length;e++){const[r,i]=t[e];o+=u*r,s+=l*i,n[e]=[o,s]}return n},b=(e,t)=>{const n=new Array(t.length);if(!t.length)return n;const r=t[0];let o=f(e,r[0]),s=m(e,r[1]);n[0]=[o,s,d(e,r[2])];const{scale:i,originPosition:a}=e,u=i[0],l="lowerLeft"===a?i[1]:-i[1];for(let r=1;r<t.length;r++){const[i,a,c]=t[r];o+=u*i,s+=l*a,n[r]=[o,s,d(e,c)]}return n},M=(e,t)=>{const n=new Array(t.length);if(!t.length)return n;const r=t[0];let o=f(e,r[0]),s=m(e,r[1]);n[0]=[o,s,y(e,r[2])];const{scale:i,originPosition:a}=e,u=i[0],l="lowerLeft"===a?i[1]:-i[1];for(let r=1;r<t.length;r++){const[i,a,c]=t[r];o+=u*i,s+=l*a,n[r]=[o,s,y(e,c)]}return n},x=(e,t)=>{const n=new Array(t.length);if(!t.length)return n;const r=t[0];let o=f(e,r[0]),s=m(e,r[1]);n[0]=[o,s,d(e,r[2]),y(e,r[3])];const{scale:i,originPosition:a}=e,u=i[0],l="lowerLeft"===a?i[1]:-i[1];for(let r=1;r<t.length;r++){const[i,a,c,h]=t[r];o+=u*i,s+=l*a,n[r]=[o,s,d(e,c),y(e,h)]}return n};function I(e,t,n){const r=new Array(n.length);for(let o=0;o<n.length;o++)r[o]=t(e,n[o]);return r}function F(e,t,n){let[r,o]=n[0],s=Math.min(r,t[0]),i=Math.min(o,t[1]),a=Math.max(r,t[2]),u=Math.max(o,t[3]);for(let e=1;e<n.length;e++){const[t,l]=n[e];r+=t,o+=l,t<0&&(s=Math.min(s,r)),t>0&&(a=Math.max(a,r)),l<0?i=Math.min(i,o):l>0&&(u=Math.max(u,o))}return e[0]=s,e[1]=i,e[2]=a,e[3]=u,e}function T(e,t){if(!t.length)return null;e[0]=e[1]=Number.POSITIVE_INFINITY,e[2]=e[3]=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++)F(e,e,t[n]);return e}function N(e,t,a){const u=n(e);return t.xmin=r(u,a.xmin),t.ymin=o(u,a.ymin),t.xmax=r(u,a.xmax),t.ymax=o(u,a.ymax),a.hasZ&&(t.zmin=s(u,a.zmin),t.zmax=s(u,a.zmax)),a.hasM&&(t.mmin=i(u,a.mmin),t.mmax=i(u,a.mmax)),t.hasZ=a.hasZ??!1,t.hasM=a.hasM??!1,t}function P(e,t,r){const o=n(e);return t.points=a(r.hasZ,r.hasM)(o,r.points)??[],t.hasZ=r.hasZ??!1,t.hasM=r.hasM??!1,t}function z(e,t,a){const u=n(e);return t.x=r(u,a.x),t.y=o(u,a.y),null!=a.z&&(t.z=s(u,a.z)),null!=a.m&&(t.m=i(u,a.m)),t}function q(e,t,r){const o=function(e,t,n,r){const o=[],s=a(n,r);for(let n=0;n<t.length;n++){const r=s(e,t[n]);r&&r.length>=3&&o.push(r)}return o.length?o:null}(n(e),r.rings,r.hasZ,r.hasM);return o?(t.rings=o,t.hasZ=r.hasZ??!1,t.hasM=r.hasM??!1,t):null}function S(e,t,r){const o=function(e,t,n,r){const o=[],s=a(n,r);for(let n=0;n<t.length;n++){const r=s(e,t[n]);r&&r.length>=2&&o.push(r)}return o.length?o:null}(n(e),r.paths,r.hasZ,r.hasM);return o?(t.paths=o,t.hasZ=r.hasZ??!1,t.hasM=r.hasM??!1,t):null}e.getQuantizedBoundsCoordsArray=F,e.getQuantizedBoundsCoordsArrayArray=T,e.getQuantizedBoundsPaths=function(e){return T([0,0,0,0],e)},e.getQuantizedBoundsPoints=function(e){const t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return F(t,t,e)},e.getQuantizedBoundsRings=function(e){return T([0,0,0,0],e)},e.normalizeTransform=n,e.quantizeBounds=function(e,t,s){const i=n(e);return t[0]=r(i,s[0]),t[3]=o(i,s[1]),t[2]=r(i,s[2]),t[1]=o(i,s[3]),t},e.quantizeCoordsArrayXY=u,e.quantizeCoordsArrayXYM=c,e.quantizeCoordsArrayXYZ=l,e.quantizeCoordsArrayXYZM=h,e.quantizeExtent=N,e.quantizeGeometry=function(e,n){return e&&n?t.isPoint(n)?z(e,{},n):t.isPolyline(n)?S(e,{},n):t.isPolygon(n)?q(e,{},n):t.isMultipoint(n)?P(e,{},n):t.isExtent(n)?N(e,{},n):null:null},e.quantizeM=i,e.quantizeMultipoint=P,e.quantizePoint=z,e.quantizePolygon=q,e.quantizePolyline=S,e.quantizeX=r,e.quantizeY=o,e.quantizeZ=s,e.toQuantizationTransform=function(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:null!=e.extent?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null},e.unquantizeBounds=function(e,t,r){const o=n(e);return r?(t[0]=f(o,r[0]),t[1]=m(o,r[3]),t[2]=f(o,r[2]),t[3]=m(o,r[1]),t):[f(o,t[0]),m(o,t[3]),f(o,t[2]),m(o,t[1])]},e.unquantizeCoordsArrayArray=I,e.unquantizeCoordsArrayXY=g,e.unquantizeCoordsArrayXYM=M,e.unquantizeCoordsArrayXYZ=b,e.unquantizeCoordsArrayXYZM=x,e.unquantizeExtent=function(e,t,r,o=r.hasZ??!1,s=r.hasM??!1){const i=n(e);return t.xmin=f(i,r.xmin),t.xmax=f(i,r.xmax),t.ymin=m(i,r.ymin),t.ymax=m(i,r.ymax),o&&(t.zmin=d(i,r.zmin),t.zmax=d(i,r.zmax)),s&&(t.mmin=y(i,r.mmin),t.mmax=y(i,r.mmax)),t.hasZ=o,t.hasM=s,t},e.unquantizeM=y,e.unquantizeMultipoint=function(e,t,r,o=r?.hasZ??!1,s=r?.hasM??!1){if(null!=r){const i=n(e);t.points=p(o,s)(i,r.points),t.hasZ=o,t.hasM=s}return t},e.unquantizePoint=function(e,t,r,o=null!=r?.z,s=null!=r?.m){if(null==r)return t;const i=n(e);return t.x=f(i,r.x),t.y=m(i,r.y),o&&(t.z=d(i,r.z)),s&&(t.m=y(i,r.m)),t},e.unquantizePolygon=function(e,t,r,o=r?.hasZ??!1,s=r?.hasM??!1){if(null!=r){const i=n(e);t.rings=I(i,p(o,s),r.rings),t.hasZ=o,t.hasM=s}return t},e.unquantizePolyline=function(e,t,r,o=r?.hasZ??!1,s=r?.hasM??!1){if(null!=r){const i=n(e);t.paths=I(i,p(o,s),r.paths),t.hasZ=o,t.hasM=s}return t},e.unquantizeX=f,e.unquantizeY=m,e.unquantizeZ=d,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/graphics/densificationConstants":function(){define(["exports","../../../../core/has"],function(e,t){"use strict";e.getApproximateMaxDensificationSegments=function(){return t("curve-densification-max-segments")},e.getCoarseSegmentsPerCurve=function(){return t("curve-densification-coarse-segments")},e.getMaxDeviationInPixels=function(){return t("curve-densification-pixel-deviation")},e.getMinSegmentsPerCurve=function(){return t("curve-densification-min-segments")},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/dehydratedFeatureComparison":function(){define(["exports","../../core/has","../../core/mathUtils","../../geometry/support/spatialReferenceUtils"],function(e,t,n,r){"use strict";function o(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const r=e[n],o=t[n];if(r.length!==o.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==o[e])return!1}return!0}function s(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!o(e[n],t[n]))return!1;return!0}function i(e,t){return e===t||null!=e&&null!=t&&r.equals(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}e.equals=function(e,t){return e===t||null!=e&&null!=t&&e.objectId===t.objectId&&!!function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.type!==t.type)return!1;switch(e.type){case"point":return i(e,t);case"extent":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!r.equals(e.spatialReference,t.spatialReference)&&e.xmin===t.xmin&&e.ymin===t.ymin&&e.zmin===t.zmin&&e.xmax===t.xmax&&e.ymax===t.ymax&&e.zmax===t.zmax}(e,t);case"polyline":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!r.equals(e.spatialReference,t.spatialReference)&&s(e.paths,t.paths)}(e,t);case"polygon":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!r.equals(e.spatialReference,t.spatialReference)&&s(e.rings,t.rings)}(e,t);case"multipoint":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!r.equals(e.spatialReference,t.spatialReference)&&o(e.points,t.points)}(e,t);case"mesh":return!1;default:return}}(e.geometry,t.geometry)&&!!function(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}(e.attributes,t.attributes)},e.pointEquals=i,e.pointNear=function(e,t,o){return e===t||null!=e&&null!=t&&r.equals(e.spatialReference,t.spatialReference)&&n.floatEqualAbsolute(e.x,t.x,o)&&n.floatEqualAbsolute(e.y,t.y,o)&&n.floatEqualAbsolute(e.z??0,t.z??0,o)&&n.floatEqualAbsolute(e.m??0,t.m??0,o)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/featureConversionUtils":function(){define(["exports","../../core/Error","../../core/Logger","../../core/maybe","../../geometry/support/aaBoundingBox","../../geometry/support/aaBoundingRect","../../geometry/support/jsonUtils","./OptimizedFeature","./OptimizedFeatureSet","./OptimizedGeometry","./data/createFeatureId"],function(e,t,n,r,o,s,i,a,u,l,c){"use strict";function h(e,t){return e?t?4:3:t?3:2}const f=()=>n.getLogger("esri.layers.graphics.featureConversionUtils"),m={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryMultiPatch:3,esriGeometryEnvelope:0},d=(e,t,n,r,o,s)=>{e[n]=o,e[n+1]=s},y=(e,t,n,r,o,s)=>{e[n]=o,e[n+1]=s,e[n+2]=t[r+2]},p=(e,t,n,r,o,s)=>{e[n]=o,e[n+1]=s,e[n+2]=t[r+3]},g=(e,t,n,r,o,s)=>{e[n]=o,e[n+1]=s,e[n+2]=t[r+2],e[n+3]=t[r+3]};function b(e,t,n,r){if(e){if(n)return t&&r?g:y;if(t&&r)return p}else if(t&&r)return y;return d}function M({scale:e,translate:t},n){return Math.round((n-t[0])/e[0])}function x({scale:e,translate:t},n){return Math.round((t[1]-n)/e[1])}function I({scale:e,translate:t},n){return Math.round((n-t[0])/e[0])}function F({scale:e,translate:t},n){return Math.round((n-t[1])/e[1])}function T({scale:e,translate:t},n,r){return n*e[r]+t[r]}function N(e){const t=e.coords;return{x:t[0],y:t[1]}}function P(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function z(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function q(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function S(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function w(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function _(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function G(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function A(e,t){return e&&t?G:e?q:t?w:P}function k(e,t,n,r,o){const s=A(n,r);for(const n of t){const t=null!=n.geometry?s(new l,n.geometry):null;e.push(new a.OptimizedFeature(t,n.attributes,null,c.createFeatureId(n,o)))}return e}function v(e,t,n=A(null!=t.z,null!=t.m)){return n(e,t)}function O(e,t,n,r){for(const{geometry:o,attributes:s}of t)e.push({attributes:s,geometry:null!=o?Z(o,n,r):null});return e}function Z(e,t,n){if(null==e)return null;const r=h(t,n),o=[];for(let t=0;t<e.coords.length;t+=r){const n=[];for(let o=0;o<r;o++)n.push(e.coords[t+o]);o.push(n)}return t?n?{points:o,hasZ:t,hasM:n}:{points:o,hasZ:t}:n?{points:o,hasM:n}:{points:o}}function R(e,t,n,r,o){const s=h(n,r);for(const n of t){const t=null!=n.geometry?C(new l,n.geometry,s):null;e.push(new a.OptimizedFeature(t,n.attributes,null,c.createFeatureId(n,o)))}return e}function C(e,t,n=h(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const r=e.coords;let o=0;for(const e of t.points)for(let t=0;t<n;t++)r[o++]=e[t];return e}function E(e,t,n){if(!e)return null;const r=h(t,n),{coords:o,lengths:s}=e,i=[];let a=0;for(const e of s){const t=[];for(let n=0;n<e;n++){const e=[];for(let t=0;t<r;t++)e.push(o[a++]);t.push(e)}i.push(t)}return t?n?{paths:i,hasZ:t,hasM:n}:{paths:i,hasZ:t}:n?{paths:i,hasM:n}:{paths:i}}function j(e,t,n,r,o){const s=h(n,r);for(const n of t){const t=null!=n.geometry?V(new l,n.geometry,s):null,r=null!=n.centroid?v(new l,n.centroid):null;e.push(new a.OptimizedFeature(t,n.attributes,r,c.createFeatureId(n,o)))}return e}function V(e,t,n=h(t.hasZ,t.hasM)){const{lengths:r,coords:o}=e;let s=0;for(const e of t.paths){for(const t of e)for(let e=0;e<n;e++)o[s++]=t[e];r.push(e.length)}return e}function D(e,t,n){if(!e)return null;const r=h(t,n),{coords:o,lengths:s}=e,i=[];let a=0;for(const e of s){const t=[];for(let n=0;n<e;n++){const e=[];for(let t=0;t<r;t++)e.push(o[a++]);t.push(e)}i.push(t)}return t?n?{rings:i,hasZ:t,hasM:n}:{rings:i,hasZ:t}:n?{rings:i,hasM:n}:{rings:i}}function U(e,t,n=t.hasZ,r=t.hasM){return B(e,t.rings,n,r)}function B(e,t,n,r){const o=h(n,r),{lengths:s,coords:i}=e;let a=0;ne(e);for(const e of t){for(const t of e)for(let e=0;e<o;e++)i[a++]=t[e];s.push(e.length)}return e}const L=[],Y=[];function W(e,n,r,o,s,i){if(re(e),!r){for(const t of n){const n=c.createFeatureId(t,i);e.push(new a.OptimizedFeature(null,t.attributes,null,n))}return e}switch(r){case"esriGeometryPoint":return k(e,n,o,s,i);case"esriGeometryMultipoint":return R(e,n,o,s,i);case"esriGeometryPolyline":return j(e,n,o,s,i);case"esriGeometryPolygon":case"esriGeometryMultiPatch":return function(e,t,n,r,o){for(const s of t){const t=null!=s.geometry?U(new l,s.geometry,n,r):null,i=c.createFeatureId(s,o);null!=s.centroid?e.push(new a.OptimizedFeature(t,s.attributes,P(new l,s.centroid),i)):e.push(new a.OptimizedFeature(t,s.attributes,null,i))}return e}(e,n,o,s,i);default:f().error("convertToFeatureSet:unknown-geometry",new t("internal:geometry",`Unable to parse unknown geometry type '${r}'`)),re(e)}return e}function Q(e,n,r,o){const s=e&&("coords"in e?e:e.geometry);if(null==s)return null;switch(n){case"esriGeometryPoint":{let e=N;return r&&o?e=_:r?e=z:o&&(e=S),e(s)}case"esriGeometryMultipoint":return Z(s,r,o);case"esriGeometryPolyline":return E(s,r,o);case"esriGeometryPolygon":return D(s,r,o);default:return f().error("convertToGeometry:unknown-geometry",new t("internal:geometry",`Unable to parse unknown geometry type '${n}'`)),null}}function J(e,n,r,o,s){if(re(e),null==r)return function(e,t){for(const n of t)e.push({attributes:n.attributes});return e}(e,n);switch(r){case"esriGeometryPoint":return function(e,t,n,r){let o=N;n&&r?o=_:n?o=z:r&&(o=S);for(const n of t){const{geometry:t,attributes:r}=n,s=null!=t?o(t):null;e.push({attributes:r,geometry:s})}return e}(e,n,o,s);case"esriGeometryMultipoint":return O(e,n,o,s);case"esriGeometryPolyline":return function(e,t,n,r){for(const{geometry:o,attributes:s}of t)e.push({attributes:s,geometry:null!=o?E(o,n,r):null});return e}(e,n,o,s);case"esriGeometryPolygon":return function(e,t,n,r){for(const{geometry:o,attributes:s,centroid:i}of t){const t=null!=o?D(o,n,r):null;if(null!=i){const n=N(i);e.push({attributes:s,centroid:n,geometry:t})}else e.push({attributes:s,geometry:t})}return e}(e,n,o,s);default:f().error("convertToFeatureSet:unknown-geometry",new t("internal:geometry",`Unable to parse unknown geometry type '${r}'`))}return e}function X(e,t,n,r,o,s,i=n,a=r){if(ne(e),!t?.coords.length)return null;const u=m[o],{coords:l,lengths:c}=t,f=h(n,r),d=h(n&&i,r&&a),y=b(n,r,i,a);if(!c.length)return y(e.coords,l,0,0,M(s,l[0]),x(s,l[1])),ne(e,f,0),e;let p,g,I,F,T=0,N=0,P=N;for(const t of c){if(t<u)continue;let n=0;N=P,I=p=M(s,l[T]),F=g=x(s,l[T+1]),y(e.coords,l,N,T,I,F),n++,T+=f,N+=d;for(let r=1;r<t;r++,T+=f)I=M(s,l[T]),F=x(s,l[T+1]),I===p&&F===g||(y(e.coords,l,N,T,I-p,F-g),N+=d,n++,p=I,g=F);n>=u&&(e.lengths.push(n),P=N)}return re(e.coords,P),e.coords.length?e:null}function $(e,t,n,r){const o=e[t],s=e[t+1],i=e[n],a=e[n+1],u=e[r],l=e[r+1];let c=i,h=a,f=u-c,m=l-h;if(0!==f||0!==m){const e=((o-c)*f+(s-h)*m)/(f*f+m*m);e>1?(c=u,h=l):e>0&&(c+=f*e,h+=m*e)}return f=o-c,m=s-h,f*f+m*m}function K(e,t,n,r,o,s,i){let a,u=r,l=0;for(let e=s+n;e<i;e+=n)a=$(t,e,s,i),a>u&&(l=e,u=a);u>r&&(l-s>n&&K(e,t,n,r,o,s,l),o(e,t,e.length,l,t[l],t[l+1]),i-l>n&&K(e,t,n,r,o,l,i))}function H(e,t,n,o,s){const{coords:i,lengths:a}=t,u=h(n,o);if(!i.length)return e!==t&&ne(e),e;r.assertIsSome(s);const{originPosition:l,scale:c,translate:f}=s,m=oe;m.originPosition=l;const d=m.scale;d[0]=c[0]??1,d[1]=-(c[1]??1),d[2]=c[2]??1,d[3]=c[3]??1;const y=m.translate;if(y[0]=f[0]??0,y[1]=f[1]??0,y[2]=f[2]??0,y[3]=f[3]??0,!a.length){for(let t=0;t<u;++t)e.coords[t]=T(m,i[t],t);return e!==t&&ne(e,u,0),e}let p=0;for(let t=0;t<a.length;t++){const n=a[t];e.lengths[t]=n;for(let t=0;t<u;++t)e.coords[p+t]=T(m,i[p+t],t);let r=e.coords[p],o=e.coords[p+1];p+=u;for(let t=1;t<n;t++,p+=u){r+=i[p]*d[0],o+=i[p+1]*d[1],e.coords[p]=r,e.coords[p+1]=o;for(let t=2;t<u;++t)e.coords[p+t]=T(m,i[p+t],t)}}return e!==t&&ne(e,i.length,a.length),e}function ee(e,t,n,r){let o=0,s=e[r*t],i=e[r*(t+1)];for(let a=1;a<n;a++){const n=s+e[r*(t+a)],u=i+e[r*(t+a)+1],l=(n-s)*(u+i);s=n,i=u,o+=l}return.5*o}function te(e,t,n,r){return 0===e*r-n*t&&e*n+t*r>0}function ne(e,t=0,n=0){re(e.lengths,n),re(e.coords,t)}function re(e,t=0){e.length!==t&&(e.length=t)}const oe={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};e.convertFromFeature=function(e,t,n,r,o){L[0]=e;const[s]=W(Y,L,t,n,r,o);return re(L),re(Y),s},e.convertFromFeatureSet=function(e,t){const n=new u,{hasM:r,hasZ:o,features:s,spatialReference:i,geometryType:a,exceededTransferLimit:l,transform:c,fields:h}=e;return h&&(n.fields=h),n.geometryType=a??null,n.spatialReference=i??null,s&&W(n.features,s,a,o,r,t),l&&(n.exceededTransferLimit=l),r&&(n.hasM=r),o&&(n.hasZ=o),c&&(n.transform=c),n},e.convertFromFeatures=W,e.convertFromGeometry=function(e,n,r){if(null==e)return null;const o=new l;return"hasZ"in e&&null==n&&(n=e.hasZ),"hasM"in e&&null==r&&(r=e.hasM),i.isPoint(e)?A(null!=n?n:null!=e.z,null!=r?r:null!=e.m)(o,e):i.isPolygon(e)?U(o,e,n,r):i.isPolyline(e)?V(o,e,h(n,r)):i.isMultipoint(e)?C(o,e,h(n,r)):void f().error("convertFromGeometry:unknown-geometry",new t("internal:geometry",`Unable to parse unknown geometry type '${e}'`))},e.convertFromMultipoint=C,e.convertFromMultipointFeatures=R,e.convertFromNestedArray=B,e.convertFromPoint=v,e.convertFromPointFeatures=k,e.convertFromPolygon=U,e.convertFromPolyline=V,e.convertFromPolylineFeatures=j,e.convertToFeature=function(e,t,n,r){Y[0]=e,J(L,Y,t,n,r);const o=L[0];return re(L),re(Y),o},e.convertToFeatureSet=function(e){const{spatialReference:t,transform:n,fields:r,hasM:o,hasZ:s,features:i,geometryType:a,exceededTransferLimit:u,queryGeometry:l,queryGeometryType:c}=e,h={features:J([],i,a,s,o),fields:r,geometryType:a,spatialReference:t,queryGeometry:Q(l,c,!1,!1)};return n&&(h.transform=n),u&&(h.exceededTransferLimit=u),o&&(h.hasM=o),s&&(h.hasZ=s),h},e.convertToFeatures=J,e.convertToGeometry=Q,e.convertToMultipoint=Z,e.convertToMultipointFeatures=O,e.convertToPoint=function(e,t,n){return e?t?n?_(e):z(e):n?S(e):N(e):null},e.convertToPolygon=D,e.convertToPolyline=E,e.generalizeOptimizedGeometry=function(e,t,n,r,o,s,i=n,a=r){if(ne(e),!t?.coords.length)return null;const u=m[o],{coords:l,lengths:c}=t,f=h(n,r),d=h(n&&i,r&&a),y=b(n,r,i,a);if(!c.length)return y(e.coords,l,0,0,l[0],l[1]),ne(e,f,0),e;let p=0;const g=s*s;for(const t of c){if(t<u){p+=t*f;continue}const n=e.coords.length/d,r=p,o=p+(t-1)*f;y(e.coords,l,e.coords.length,r,l[r],l[r+1]),K(e.coords,l,f,g,y,r,o),y(e.coords,l,e.coords.length,o,l[o],l[o+1]);const s=e.coords.length/d-n;s>=u?e.lengths.push(s):re(e.coords,n*d),p+=t*f}return e.coords.length?e:null},e.getBoundsOptimizedGeometry=function(e,t,n,r){if(!t?.coords?.length)return null;const i=h(n,r);let a=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY;if(t&&t.coords){const e=t.coords;for(let t=0;t<e.length;t+=i){const n=e[t],r=e[t+1];a=Math.min(a,n),l=Math.max(l,n),u=Math.min(u,r),c=Math.max(c,r)}}return o.is(e)?o.fromRectValues(e,a,u,l,c):s.fromValues(a,u,l,c,e),e},e.getQuantizedArea=function(e,t){const{coords:n,lengths:r}=e;let o=0,s=0;for(let e=0;e<r.length;e++){const i=r[e];s+=ee(n,o,i,t),o+=i}return Math.abs(s)},e.getQuantizedBoundsOptimizedGeometry=function(e,t,n,r){const o=h(n,r),{lengths:s,coords:i}=t;let a=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,f=0;for(const e of s){let t=i[f],n=i[f+1];a=Math.min(t,a),u=Math.min(n,u),l=Math.max(t,l),c=Math.max(n,c),f+=o;for(let r=1;r<e;r++,f+=o){const e=i[f],r=i[f+1];t+=e,n+=r,e<0&&(a=Math.min(a,t)),e>0&&(l=Math.max(l,t)),r<0?u=Math.min(u,n):r>0&&(c=Math.max(c,n))}}return e[0]=a,e[1]=u,e[2]=l,e[3]=c,e},e.getSignedQuantizedRingArea=ee,e.quantizeForDisplay=function(e,t,n,r,o){const s=h(r,o);if(!e.lengths.length){if(e.coords.length<2)return null;const[n,r]=e.coords,o=I(t,n),s=F(t,r);return new l([],[o,s])}const i=new l([],[0,0]),a=m[n],u="esriGeometryPolygon"===n||"esriGeometryPolyline"===n;let c=0,f=0;for(let n=0;n<e.lengths.length;n++){const r=e.lengths[n],o=f;let l=I(t,e.coords[s*c]),h=F(t,e.coords[s*c+1]);i.coords[f++]=l,i.coords[f++]=h;let m=0,d=0,y=1;for(let n=1;n<r;n++){const r=I(t,e.coords[s*(n+c)]),o=F(t,e.coords[s*(n+c)+1]);if(r!==l||o!==h){const e=r-l,t=o-h;u&&te(m,d,e,t)?(i.coords[f-2]+=e,i.coords[f-1]+=t,l+=e,h+=t):(i.coords[f++]=r,i.coords[f++]=o,l=r,h=o,m=e,d=t,y+=1)}}y<a?f=o:i.lengths.push(y),c+=r}return 0===i.lengths.length?null:i},e.quantizeOptimizedFeatureSet=function(e,t){const{geometryType:n,features:r,hasM:o,hasZ:s}=t;if(!e)return t;for(let t=0;t<r.length;t++){const i=r[t],a=i.weakClone();a.geometry=new l,X(a.geometry,i.geometry,o,s,n,e),i.centroid&&(a.centroid=new l,X(a.centroid,i.centroid,o,s,"esriGeometryPoint",e)),r[t]=a}return t.transform=e,t},e.quantizeOptimizedGeometry=X,e.quantizeX=M,e.quantizeY=x,e.removeCollinearVertices=function(e,t,n,r,o){if(!t?.coords?.length)return null;const s=m[n],{coords:i,lengths:a}=t,u=b(r,o,r,o),l=h(r,o);let c=0,f=0,d=0,y=0;for(const t of a){f=y,u(e.coords,i,f,c,i[c],i[c+1]),c+=l;let n=i[c],r=i[c+1],o=n,a=r,h=r/n;f+=l,u(e.coords,i,f,c,o,a),c+=l;for(let s=2;s<t;s++){n=i[c],r=i[c+1];const t=r/n,s=h===t||!isFinite(h)&&!isFinite(t),m=s&&isFinite(t)?h>=0&&t>=0||h<=0&&t<=0:a>=0&&r>=0||a<=0&&r<=0;s&&m?(o+=n,a+=r):(o=n,a=r,f+=l),u(e.coords,i,f,c,o,a),c+=l,h=t}f+=l;const m=(f-y)/l;m>=s&&(e.lengths[d]=m,y=f,d++)}return e.coords.length>y&&(e.coords.length=y),e.lengths.length>d&&(e.lengths.length=d),e.coords.length&&e.lengths.length?e:null},e.removeZMValues=function(e,t,n,r,o,s){if(ne(e),e.lengths.push(...t.lengths),n===o&&r===s)for(let n=0;n<t.coords.length;n++)e.coords.push(t.coords[n]);else{const i=h(n,r),a=b(n,r,o,s),u=t.coords;for(let t=0;t<u.length;t+=i)a(e.coords,u,e.coords.length,t,u[t],u[t+1])}return e},e.unquantizeOptimizedFeatureSet=function(e){const{transform:t,features:n,hasM:r,hasZ:o}=e;if(!t)return e;for(const e of n)null!=e.geometry&&H(e.geometry,e.geometry,r,o,t),null!=e.centroid&&H(e.centroid,e.centroid,r,o,t);return e.transform=null,e},e.unquantizeOptimizedGeometry=H,e.unquantizeValue=T,e.unquantizeX=function(e,t){return T(e,t,0)},e.unquantizeY=function(e,t){return T(e,-t,1)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../core/memoryEstimations","./centroid","./OptimizedGeometry"],function(e,t,n,r){"use strict";class o{constructor(e=null,t={},n,r,o=0){this.geometry=e,this.attributes=t,this.centroid=n,this.objectId=r,this.displayId=o}static fromJSON(e){const t=e.geometry?r.fromJSON(e.geometry):null,n=e.centroid?r.fromJSON(e.centroid):null,s=e.objectId;return new o(t,e.attributes,n,s)}weakClone(){const e=new o(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e}clone(){const e=this.geometry?.clone(),t=new o(e,{...this.attributes},this.centroid?.clone(),this.objectId);return t.displayId=this.displayId,t}ensureCentroid(e){return this.centroid??=n.getCentroidOptimizedGeometry(new r,this.geometry,e.hasZ,e.hasM),this.centroid}get usedMemory(){return 128+t.estimateAttributesMemory(this.attributes)+(this.geometry?.usedMemory??0)}}e.OptimizedFeature=o,e.OptimizedFeatureWithGeometry=class extends o{},e.hasGeometry=function(e){return!!e.geometry?.coords?.length},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(e){"use strict";function t(e,t){return e?t?4:3:t?3:2}function n(e,n,r,o,s,i){const a=t(s,i);let u=r,l=r+a,c=0,h=0,f=0,m=0,d=0;for(let t=0,r=o-1;t<r;t++,u+=a,l+=a){const t=n[u],r=n[u+1],o=n[u+2],i=n[l],a=n[l+1],y=n[l+2];let p=t*a-i*r;m+=p,c+=(t+i)*p,h+=(r+a)*p,s&&(p=t*y-i*o,f+=(o+y)*p,d+=p),t<e[0]&&(e[0]=t),t>e[1]&&(e[1]=t),r<e[2]&&(e[2]=r),r>e[3]&&(e[3]=r),s&&(o<e[4]&&(e[4]=o),o>e[5]&&(e[5]=o))}if(m>0&&(m*=-1),d>0&&(d*=-1),!m)return null;const y=[c,h,.5*m];return s&&(y[3]=f,y[4]=.5*d),y}function r(e,n,r,u,l){const c=t(u,l);let h=n,f=n+c,m=0,d=0,y=0,p=0;for(let t=0,n=r-1;t<n;t++,h+=c,f+=c){const t=e[h],n=e[h+1],r=e[h+2],l=e[f],c=e[f+1],g=e[f+2],b=u?s(t,n,r,l,c,g):o(t,n,l,c);if(b)if(m+=b,u){const e=a(t,n,r,l,c,g);d+=b*e[0],y+=b*e[1],p+=b*e[2]}else{const e=i(t,n,l,c);d+=b*e[0],y+=b*e[1]}}return m>0?u?[d/m,y/m,p/m]:[d/m,y/m]:r>0?u?[e[n],e[n+1],e[n+2]]:[e[n],e[n+1]]:null}function o(e,t,n,r){const o=n-e,s=r-t;return Math.sqrt(o*o+s*s)}function s(e,t,n,r,o,s){const i=r-e,a=o-t,u=s-n;return Math.sqrt(i*i+a*a+u*u)}function i(e,t,n,r){return[e+.5*(n-e),t+.5*(r-t)]}function a(e,t,n,r,o,s){return[e+.5*(r-e),t+.5*(o-t),n+.5*(s-n)]}e.getCentroidOptimizedGeometry=function(e,o,s,i){if(!o?.lengths.length)return null;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);const a=e.coords,u=[],l=s?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:c,coords:h}=o,f=t(s,i);let m=0;for(const e of c){const t=n(l,h,m,e,s,i);t&&u.push(t),m+=e*f}if(u.sort((e,t)=>{let n=e[2]-t[2];return 0===n&&s&&(n=e[4]-t[4]),n}),u.length){let e=6*u[0][2];a[0]=u[0][0]/e,a[1]=u[0][1]/e,s&&(e=6*u[0][4],a[2]=0!==e?u[0][3]/e:0),(a[0]<l[0]||a[0]>l[1]||a[1]<l[2]||a[1]>l[3]||s&&(a[2]<l[4]||a[2]>l[5]))&&(a.length=0)}if(!a.length){const e=o.lengths[0]?r(h,0,c[0],s,i):null;if(!e)return null;a[0]=e[0],a[1]=e[1],s&&e.length>2&&(a[2]=e[2])}return e},e.lineCentroid=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../core/memoryEstimations"],function(e){"use strict";class t{constructor(e=[],t=[]){this.lengths=e??[],this.coords=t??[]}static fromJSON(e){return new t(e.lengths,e.coords)}static fromRect(e){const[n,r,o,s]=e,i=o-n,a=s-r;return new t([5],[n,r,i,0,0,a,-i,0,0,-a])}get isPoint(){return 0===this.lengths.length&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,t)=>e+t)}get usedMemory(){return 64+e.estimateNumberArrayMemory(this.lengths,this.coords)}area(){let e=0,t=0;if(!this.lengths.length)return 0;for(let n=0;n<this.lengths.length;n++){const r=this.lengths[n];if(r<3)continue;let o=this.coords[2*t],s=this.coords[2*t+1];for(let n=1;n<r;n+=1){const r=this.coords[2*(n+t)],i=this.coords[2*(n+t)+1];e+=-.5*(r-o)*(i+s),o=r,s=i}t+=r}return e}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let n=0;n<this.lengths.length;n++){const r=this.lengths[n];for(let n=0;n<r;n++)e(this.coords[2*(n+t)],this.coords[2*(n+t)+1]);t+=r}}deltaDecode(){const e=this.clone(),{coords:t,lengths:n}=e;let r=0;for(const e of n){for(let n=1;n<e;n++)t[2*(r+n)]+=t[2*(r+n)-2],t[2*(r+n)+1]+=t[2*(r+n)-1];r+=e}return e}clone(e){if(0===this.lengths.length)return new t([],[this.coords[0],this.coords[1]]);const n=2*(0===this.lengths.length?1:this.lengths.reduce((e,t)=>e+t)),r=this.coords.slice(0,n);return e?(e.set(r),new t(this.lengths,e)):new t(Array.from(this.lengths),Array.from(r))}}return t})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){"use strict";class e{constructor(){this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new e;return t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}return e})},"esri/layers/graphics/data/createFeatureId":function(){define(["exports"],function(e){"use strict";e.createFeatureId=function(e,t){switch(t.type){case"object-id":case"unique-id-simple":return e.attributes[t.fieldName];case"unique-id-composite":{const n=[];for(const r of t.fieldNames)n.push(e.attributes[r]??null);return JSON.stringify(n)}}},e.createFeatureIdFromLayer=function(e,t){if("uniqueIdFields"in t&&t.uniqueIdFields?.length){if(1===t.uniqueIdFields.length)return e.attributes?.[t.uniqueIdFields[0]];const n=t.uniqueIdFields.map(t=>e.attributes?.[t]);return JSON.stringify(n)}return"objectIdField"in t&&t.objectIdField?e.attributes?.[t.objectIdField]:null},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/pbfQueryUtils":function(){define(["exports","./pbfFeatureServiceParser"],function(e,t){"use strict";e.parsePBFFeatureQuery=function(e,n){const r=t.parseFeatureQuery(e,n),o=r.queryResult.featureResult,s=r.queryResult.queryGeometry,i=r.queryResult.queryGeometryType;if(o&&o.features&&o.features.length&&o.objectIdFieldName){const e=o.objectIdFieldName;for(const t of o.features)t.attributes&&(t.objectId=t.attributes[e])}return o&&(o.queryGeometry=s,o.queryGeometryType=i),o},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/pbfFeatureServiceParser":function(){define(["exports","../../../core/Error","../../../core/pbf","../../../layers/graphics/OptimizedGeometry","./pbfOptimizedFeatureSet"],function(e,t,n,r,o){"use strict";const s=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],i=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],a=["upperLeft","lowerLeft"];function u(e){return e>=s.length?null:s[e]}function l(e){return e>=i.length?null:i[e]}function c(e){return e>=a.length?null:a[e]}function h(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function f(e,t,n){const r=e.asUnsafe(),o=t.createPointGeometry(n);for(;r.next();)switch(r.tag()){case 3:{const e=r.getUInt32(),n=r.pos()+e;let s=0;for(;r.pos()<n;)t.addCoordinatePoint(o,r.getSInt64(),s++);break}default:r.skip()}return o}function m(e,t,n){const r=e.asUnsafe(),o=t.createGeometry(n),s=2+(n.hasZ?1:0)+(n.hasM?1:0);for(;r.next();)switch(r.tag()){case 2:{const e=r.getUInt32(),n=r.pos()+e;let s=0;for(;r.pos()<n;)t.addLength(o,r.getUInt32(),s++);break}case 3:{const e=r.getUInt32(),n=r.pos()+e;let i=0;for(t.allocateCoordinates(o);r.pos()<n;)t.addCoordinate(o,r.getSInt64(),i),i++,i===s&&(i=0);break}default:r.skip()}return o}function d(e){const t=e.asUnsafe(),n=new r;let s="esriGeometryPoint";for(;t.next();)switch(t.tag()){case 2:{const e=t.getUInt32(),r=t.pos()+e;for(;t.pos()<r;)n.lengths.push(t.getUInt32());break}case 3:{const e=t.getUInt32(),r=t.pos()+e;for(;t.pos()<r;)n.coords.push(t.getSInt64());break}case 1:s=o.optimizedGeometryTypes[t.getEnum()];break;default:t.skip()}return{queryGeometry:n,queryGeometryType:s}}function y(e){const t=e.asUnsafe();for(;t.next();)switch(t.tag()){case 1:return t.getString();case 2:return t.getFloat();case 3:return t.getDouble();case 4:return t.getSInt32();case 5:return t.getUInt32();case 6:return t.getInt64();case 7:return t.getUInt64();case 8:return t.getSInt64();case 9:return t.getBool();default:return t.skip(),null}return null}function p(e){const t=e.asUnsafe(),n={type:u(0)};for(;t.next();)switch(t.tag()){case 1:n.name=t.getString();break;case 2:n.type=u(t.getEnum());break;case 3:n.alias=t.getString();break;case 4:n.sqlType=l(t.getEnum());break;case 5:default:t.skip();break;case 6:n.defaultValue=t.getString()}return n}function g(e){const t={},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:t.name=n.getString();break;case 2:t.isSystemMaintained=n.getBool();break;default:n.skip()}return t}function b(e,t,n,r){const o=t.createFeature(n);let s=0;for(;e.next();)switch(e.tag()){case 1:{const t=r[s++].name;o.attributes[t]=e.processMessage(y);break}case 2:o.geometry=e.processMessageWithArgs(m,t,n);break;case 4:o.centroid=e.processMessageWithArgs(f,t,n);break;default:e.skip()}return o}function M(e){const t=[1,1,1,1],n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:t[0]=n.getDouble();break;case 2:t[1]=n.getDouble();break;case 4:t[2]=n.getDouble();break;case 3:t[3]=n.getDouble();break;default:n.skip()}return t}function x(e){const t=[0,0,0,0],n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:t[0]=n.getDouble();break;case 2:t[1]=n.getDouble();break;case 4:t[2]=n.getDouble();break;case 3:t[3]=n.getDouble();break;default:n.skip()}return t}function I(e){const t={originPosition:c(0)},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:t.originPosition=c(n.getEnum());break;case 2:t.scale=n.processMessage(M);break;case 3:t.translate=n.processMessage(x);break;default:n.skip()}return t}function F(e){const t={},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:t.shapeAreaFieldName=n.getString();break;case 2:t.shapeLengthFieldName=n.getString();break;case 3:t.units=n.getString();break;default:n.skip()}return t}function T(e,t){const n=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:n.wkid=e.getUInt32();break;case 5:n.wkt=e.getString();break;case 2:n.latestWkid=e.getUInt32();break;case 3:n.vcsWkid=e.getUInt32();break;case 4:n.latestVcsWkid=e.getUInt32();break;default:e.skip()}return n}function N(e,t){const n=t.createFeatureResult(),r=e.asUnsafe();n.geometryType=h(t,0);let o=!1;for(;r.next();)switch(r.tag()){case 1:n.objectIdFieldName=r.getString();break;case 3:n.globalIdFieldName=r.getString();break;case 4:n.geohashFieldName=r.getString();break;case 5:n.geometryProperties=r.processMessage(F);break;case 7:n.geometryType=h(t,r.getEnum());break;case 8:n.spatialReference=r.processMessageWithArgs(T,t);break;case 10:n.hasZ=r.getBool();break;case 11:n.hasM=r.getBool();break;case 12:n.transform=r.processMessage(I);break;case 9:n.exceededTransferLimit=r.getBool();break;case 13:t.addField(n,r.processMessage(p));break;case 15:o||(t.prepareFeatures(n),o=!0),t.addFeature(n,r.processMessageWithArgs(b,t,n,n.fields));break;case 2:n.uniqueIdField=r.processMessage(g);break;default:r.skip()}return t.finishFeatureResult(n),n}function P(e,t){const n={};let r=null;for(;e.next();)switch(e.tag()){case 4:r=e.processMessageWithArgs(d);break;case 1:n.featureResult=e.processMessageWithArgs(N,t);break;default:e.skip()}return null!=r&&n.featureResult&&t.addQueryGeometry(n,r),n}e.parseFeatureQuery=function(e,r){try{const t=2,o=new n(new Uint8Array(e),new DataView(e)),s={};for(;o.next();)o.tag()===t?s.queryResult=o.processMessageWithArgs(P,r):o.skip();return s}catch(e){throw new t("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e})}},e.parseField=p,e.parseFieldType=u,e.parseTransform=I,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/pbfOptimizedFeatureSet":function(){define(["exports","../../../core/unitUtils","../../../geometry/support/spatialReferenceUtils","../../../layers/graphics/OptimizedFeature","../../../layers/graphics/OptimizedFeatureSet","../../../layers/graphics/OptimizedGeometry"],function(e,t,n,r,o,s){"use strict";const i=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];e.OptimizedFeatureSetParserContext=class{constructor(e){this._options=e,this.geometryTypes=i,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new o}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e?.features||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||n.equals(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const o=t.getMetersPerVerticalUnitForSR(this._options.sourceSpatialReference)/t.getMetersPerVerticalUnitForSR(e.spatialReference);if(1!==o)for(const t of e.features){if(!r.hasGeometry(t))continue;const e=t.geometry.coords;for(let t=2;t<e.length;t+=3)e[t]*=o}}addFeature(e,t){e.features.push(t)}createFeature(){return new r.OptimizedFeature(null,{},null,0)}createSpatialReference(){return{wkid:0}}createGeometry(){return new s}addField(e,t){e.fields.push(t)}allocateCoordinates(e){e.coords.length=e.lengths.reduce((e,t)=>e+t,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,t){e.coords[this._coordinatePtr++]=t}addCoordinatePoint(e,t){e.coords.push(t)}addLength(e,t){e.lengths.push(t)}addQueryGeometry(e,t){e.queryGeometry=t.queryGeometry,e.queryGeometryType=t.queryGeometryType}createPointGeometry(){return new s}},e.optimizedGeometryTypes=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"*noref":1}}),define(["../../../rest/query/operations/pbfDehydratedFeatureSet","../../../rest/query/operations/pbfQueryUtils"],function(e,t){"use strict";class n{_parseFeatureQuery(n){const r=new e.DehydratedFeatureSetParserContext(n.options),o=t.parsePBFFeatureQuery(n.buffer,r),s={...o,spatialReference:o.spatialReference?.toJSON(),fields:o.fields?o.fields.map(e=>e.toJSON()):void 0,missingAttributes:r.missingAttributes};return Promise.resolve(s)}}return function(){return new n}});