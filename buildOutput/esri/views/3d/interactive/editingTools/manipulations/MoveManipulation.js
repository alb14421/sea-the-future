// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../core/Handles","../../../../../core/handleUtils","../../../../../core/has","../../../../../core/reactiveUtils","./config","./InteractiveManipulation","./MoveXYAxisManipulation","./MoveXYDiscManipulation","./MoveZManipulation"],function(i,a,t,n,e,s,o,l,u,r){"use strict";class p extends o.InteractiveManipulation{constructor(i){super(),this._handles=new a;const{tool:t,view:n,snapToScene:e,radius:s}=i;this._view=n,this.xyManipulation=new u.MoveXYDiscManipulation({tool:t,view:n,snapToScene:e,radius:s}),this.xyAxisManipulation=new l.MoveXYAxisManipulation({tool:t,view:n,radius:s}),this.zManipulation=new r.MoveZManipulation({tool:t,view:n,radius:s}),this.xyManipulation.available=i.xyAvailable,this.xyAxisManipulation.available=i.xyAxisAvailable,this.zManipulation.available=i.zAvailable,this._autoHideXYAxis(),this.forEachManipulator(i=>this._handles.add(i.events.on("grab-changed",()=>this._updateManipulatorInteractivity())))}destroy(){this._handles.destroy(),this.xyManipulation.destroy(),this.xyAxisManipulation.destroy(),this.zManipulation.destroy()}createManipulatedObjectDragPipeline(i,a,n){return t.handlesGroup([this.xyManipulation.createManipulatedObjectDragPipeline((a,t,n,e,s)=>i(0,a,t,n,e,s),a,n),this.xyAxisManipulation.createManipulatedObjectDragPipeline((a,t,n,e,s)=>i(1,a,t,n,e,s),a,n),this.zManipulation.createManipulatedObjectDragPipeline((a,t,n,e,s)=>i(2,a,t,n,e,s),a,n)])}createDragPipeline(i,a,n,e){return t.handlesGroup([this.xyManipulation.createDragPipeline((a,t,n,e,s)=>i(0,a,t,n,e,s),a,n,e),this.xyAxisManipulation.createDragPipeline((a,t,n,e,s)=>i(1,a,t,n,e,s),a,n,e),this.zManipulation.createDragPipeline((a,t,n,e,s)=>i(2,a,t,n,e,s),n)])}set snapToScene(i){this.xyManipulation.snapToScene=i}set angle(i){this.xyAxisManipulation.angle=i}set radius(i){this.xyAxisManipulation.radius=i,this.xyManipulation.radius=i,this.zManipulation.radius=i}set displayScale(i){this.xyManipulation.displayScale=i,this.xyAxisManipulation.displayScale=i}forEachManipulator(i){this.xyManipulation.forEachManipulator(a=>i(a,1)),this.xyAxisManipulation.forEachManipulator(a=>i(a,1)),this.zManipulation.forEachManipulator(a=>i(a,0))}get _xyAxisVisible(){const i=this.xyManipulation.someManipulator(i=>i.focused)||this.xyAxisManipulation.someManipulator(i=>i.focused);return this._view.inputManager&&"touch"===this._view.inputManager.latestPointerType||i}_autoHideXYAxis(){const i=this.xyAxisManipulation,a=this.xyManipulation;if(n("esri-mobile"))return;const t=[];a.forEachManipulator(i=>t.push(i)),i.forEachManipulator(i=>t.push(i));const s=()=>{const a=[];this._xyAxisVisible||i.forEachManipulator(i=>a.push(i.disableDisplay())),this._handles.remove(h),this._handles.add(a,h)};for(const i of t)this._handles.add(i.events.on("focus-changed",s));this._view.inputManager&&this._handles.add(e.when(()=>this._view.inputManager?.latestPointerType,s)),s()}static radiusForSymbol(i){const a=null!=i&&"point-3d"===i.type&&i.symbolLayers;return a&&a.some(i=>"icon"===i.type)?s.discRadiusSmall:s.discRadius}}const h="disable-xy-axis-display";i.MoveManipulation=p,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});