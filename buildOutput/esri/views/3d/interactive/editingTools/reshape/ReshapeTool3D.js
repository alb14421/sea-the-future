// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../chunks/tslib.es6","../../../../../core/Evented","../../../../../core/maybe","../../../../../core/accessorSupport/decorators/property","../../../../../core/has","../../../../../core/Logger","../../../../../core/RandomLCG","../../../../../core/accessorSupport/decorators/subclass","./ReshapeOperation","../../../../interactive/InteractiveToolBase","../../../../interactive/keybindings","../../../../interactive/sketch/SketchOptions"],function(e,t,o,r,p,a,i,n,s,h,l,c,d){"use strict";e.ReshapeTool3D=class extends l.InteractiveToolBase{constructor(e){super(e),this._reshapeOperation=null,this.events=new o.EventEmitter,this.enableZShape=!0,this.enableZVertex=!0,this.enableMoveObject=!0,this.enableDeleteVertices=!0,this.autoHideManipulators=!1,this.enableMidpoints=!0,this.enableEdgeOffset=!1,this.type="reshape-3d",this.sketchOptions=new d,this.snappingManager=null,this.automaticManipulatorSelection=!1}initialize(){const e=this._reshapeOperation=new h.ReshapeOperation({tool:this});this.addHandles([e.events.on("reshape",e=>this.events.emit("reshape",e)),e.events.on("move",e=>this.events.emit("move",e)),e.events.on("vertex-add",e=>this.events.emit("vertex-add",e)),e.events.on("vertex-remove",e=>this.events.emit("vertex-remove",e)),e.events.on("immediate-click",e=>this.events.emit("immediate-click",{...e,object:this.object})),this.view.on("pointer-down",["Shift"],e=>e.stopPropagation())]),this.finishToolCreation()}destroy(){this._reshapeOperation=r.destroyMaybe(this._reshapeOperation)}get updating(){return((this.object.updating??!1)||this._reshapeOperation?.updating||this.snappingManager?.updating)??!1}get activeTooltipInfo(){return this._reshapeOperation?.activeTooltipInfo??null}get tooltip(){return this._reshapeOperation?.tooltip??null}onManipulatorSelectionChanged(){this._reshapeOperation?.onManipulatorSelectionChanged()}get canUndo(){return this._reshapeOperation?.canUndo??!1}undo(){this.snappingManager?.doneSnapping(),this._reshapeOperation?.undo()}get canRedo(){return this._reshapeOperation?.canRedo??!1}redo(){this.snappingManager?.doneSnapping(),this._reshapeOperation?.redo()}onInputEvent(e){const t=this._reshapeOperation;t&&!t.enterInputModeIfAvailable(e)&&this.enableDeleteVertices&&"key-down"===e.type&&c.sketchKeys.delete.includes(e.key)&&t.removeSelectedVertices()>0&&e.stopPropagation()}reset(){}},t.__decorate([p.property()],e.ReshapeTool3D.prototype,"_reshapeOperation",void 0),t.__decorate([p.property({constructOnly:!0})],e.ReshapeTool3D.prototype,"view",void 0),t.__decorate([p.property({constructOnly:!0})],e.ReshapeTool3D.prototype,"automaticAreaMeasurementUtils",void 0),t.__decorate([p.property({constructOnly:!0})],e.ReshapeTool3D.prototype,"automaticLengthMeasurementUtils",void 0),t.__decorate([p.property({constructOnly:!0})],e.ReshapeTool3D.prototype,"object",void 0),t.__decorate([p.property()],e.ReshapeTool3D.prototype,"enableZShape",void 0),t.__decorate([p.property()],e.ReshapeTool3D.prototype,"enableZVertex",void 0),t.__decorate([p.property()],e.ReshapeTool3D.prototype,"enableMoveObject",void 0),t.__decorate([p.property()],e.ReshapeTool3D.prototype,"enableDeleteVertices",void 0),t.__decorate([p.property()],e.ReshapeTool3D.prototype,"autoHideManipulators",void 0),t.__decorate([p.property()],e.ReshapeTool3D.prototype,"enableMidpoints",void 0),t.__decorate([p.property()],e.ReshapeTool3D.prototype,"enableEdgeOffset",void 0),t.__decorate([p.property()],e.ReshapeTool3D.prototype,"type",void 0),t.__decorate([p.property({type:d})],e.ReshapeTool3D.prototype,"sketchOptions",void 0),t.__decorate([p.property()],e.ReshapeTool3D.prototype,"snappingManager",void 0),t.__decorate([p.property()],e.ReshapeTool3D.prototype,"updating",null),t.__decorate([p.property()],e.ReshapeTool3D.prototype,"activeTooltipInfo",null),t.__decorate([p.property()],e.ReshapeTool3D.prototype,"tooltip",null),t.__decorate([p.property()],e.ReshapeTool3D.prototype,"automaticManipulatorSelection",void 0),e.ReshapeTool3D=t.__decorate([s.subclass("esri.views.3d.interactive.editingTools.reshape.ReshapeTool3D")],e.ReshapeTool3D),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});