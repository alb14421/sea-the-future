// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/colorUtils","../../../core/libs/gl-matrix-2/math/mat4","../../../chunks/vec32","../../../geometry/support/vectorStacks","../../../layers/graphics/hydratedFeatures","./editingTools/manipulatedObjectUtils","../layers/graphics/graphicUtils","../webgl-engine/materials/ColorMaterial","../webgl-engine/materials/ShadedColorMaterial"],function(e,t,r,o,a,n,c,l,i,s){"use strict";const u=Object.freeze({calloutLength:40,calloutWidth:1,discRadius:27,focusMultiplier:1.1}),d=Object.freeze({autoScaleRenderObjects:!1,worldSized:!0});function g(e,t,r,n){const c=o.normalize(a.sv3d.get(),e),l=o.normalize(a.sv3d.get(),t),i=o.cross(a.sv3d.get(),c,l);return n[0]=c[0],n[1]=c[1],n[2]=c[2],n[3]=0,n[4]=l[0],n[5]=l[1],n[6]=l[2],n[7]=0,n[8]=i[0],n[9]=i[1],n[10]=i[2],n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n}e.calculateInputRotationTransform=function(e,t,n,c){const l=o.subtract(a.sv3d.get(),e,n),i=g(l,o.cross(a.sv3d.get(),c,l),n,a.sm4d.get());r.invert(i,i);const s=o.transformMat4(a.sv3d.get(),t,i);return Math.atan2(s[1],s[0])},e.calculateTranslateRotateFromBases=g,e.createManipulatorMaterial=function(e,r=4,o=!0){const a=t.colorVectorToColorAndOpacity(e),n=!(e[3]<1);return o?new s.ShadedColorMaterial({color:a,writeDepth:n,cullFace:2,renderOccluded:r,isDecoration:!0}):new i.ColorMaterial({color:a,writeDepth:n,cullFace:2,renderOccluded:r,isDecoration:!0})},e.createManipulatorOutlineMaterial=function(e,r=4){const o=t.colorVectorToColorAndOpacity(e);return new i.ColorMaterial({color:o,writeDepth:!0,cullFace:1,renderOccluded:r,isDecoration:!0})},e.getGraphicAttachmentOrigin=function(e,t){const r=e.getViewForGraphic(t);return null!=r&&"computeAttachmentOrigin"in r?r.computeAttachmentOrigin(t,e.spatialReference):null},e.placeAtObject=function(e,t){const r=t.origin;null==r?function(e,t){if(null==t)return;const r="mesh"===t.type?t.origin:l.computeCentroid(t);null!=r&&(e.location=n.hydrateGeometry(r))}(e,c.manipulatedObjectGeometry(t)):e.elevationAlignedLocation=r},e.rotateManipulatorDefaults=u,e.worldScaledManipulatorSettings=d,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});