// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../core/floatRGBA","./ProceduralTextureRepository","../../../webgl/Texture","../../../webgl/TextureDescriptor"],function(e,t,r,o,n){"use strict";function u(e){return e.pattern.map(t=>Math.round(t*e.pixelRatio))}function i(e){if(null==e)return 1;const t=u(e);return Math.floor(t.reduce((e,t)=>e+t))}function a(e){return u(e).reduce((e,t)=>Math.max(e,t))}e.computeLongestPattern=a,e.computeTextureSize=i,e.createStippleTextureRepository=function(e,c){return new r.ProceduralTextureRepository(r=>{const{encodedData:c,textureSize:l}=function(e){const r=u(e),o=1/e.pixelRatio,n=i(e),c=a(e),l=(Math.floor(.5*(c-1))+.5)*o,p=[];let s=1;for(const e of r){for(let t=0;t<e;t++){const r=s*(Math.min(t,e-1-t)+.5)*o/l*.5+.5;p.push(r)}s=-s}const f=Math.round(r[0]/2),x=[...p.slice(f),...p.slice(0,f)],d=new Uint8Array(4*n);let T=0;for(const e of x)t.packFloatRGBA(e,d,T),T+=4;return{encodedData:d,textureSize:n}}(r),p=new n.TextureDescriptor(l,1);return p.internalFormat=6408,p.wrapMode=10497,new o.Texture(e,p,c)},e=>`${e.pattern.join(",")}-r${e.pixelRatio}`,c)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});