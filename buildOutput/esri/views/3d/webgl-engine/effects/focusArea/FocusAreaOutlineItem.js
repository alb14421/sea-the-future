// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../chunks/tslib.es6","../../../../../Color","../../../../../core/Accessor","../../../../../core/maybe","../../../../../core/reactiveUtils","../../../../../core/accessorSupport/decorators/property","../../../../../core/has","../../../../../core/Logger","../../../../../core/RandomLCG","../../../../../core/accessorSupport/decorators/subclass","../../../interactive/visualElements/OutlineVisualElement"],function(e,t,o,i,r,s,n,l,a,c,u,h){"use strict";e.FocusAreaOutlineItem=class extends i{constructor(e){super(e)}initialize(){this.addHandles([s.watch(()=>this.area.enabled,()=>this._ensureElement(),s.initial),s.watch(()=>this.area.outline?.color,e=>this._updateColor(e),s.initial),s.watch(()=>this.area.geometries,e=>this._updateGeometries(e),s.initial)])}destroy(){this.removeAllHandles(),this._outlineElement=r.destroyMaybe(this._outlineElement)}_ensureElement(){this.area.enabled&&this.area.outline?.color?this._outlineElement??=new h.OutlineVisualElement({view:this.view,geometry:this._mergePolygons(this.area.geometries),isDraped:!0,attached:!0,isDecoration:!1,color:o.toUnitRGBA(this.area.outline?.color),renderOccluded:4,width:3}):this._outlineElement=r.destroyMaybe(this._outlineElement)}_updateGeometries(e){this._ensureElement(),this._outlineElement&&(this._outlineElement.geometry=this._mergePolygons(e))}_updateColor(e){this._ensureElement(),this._outlineElement&&e&&(this._outlineElement.color=o.toUnitRGBA(e))}_mergePolygons(e){if(!e||0===e.length)return null;const t=e.at(0).clone();return e.forEach(e=>{t.rings.push(...e.rings)}),t}},t.__decorate([n.property({constructOnly:!0})],e.FocusAreaOutlineItem.prototype,"view",void 0),t.__decorate([n.property({constructOnly:!0})],e.FocusAreaOutlineItem.prototype,"area",void 0),e.FocusAreaOutlineItem=t.__decorate([u.subclass("esri.views.3d.webgl-engine.effects.focusArea.FocusAreaOutlineItem")],e.FocusAreaOutlineItem),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});