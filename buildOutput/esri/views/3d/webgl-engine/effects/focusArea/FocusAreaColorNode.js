// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../chunks/tslib.es6","../../../../../core/accessorSupport/decorators/property","../../../../../core/has","../../../../../core/Logger","../../../../../core/RandomLCG","../../../../../core/accessorSupport/decorators/subclass","../../../webgl","../../../webgl/RenderNode","./FocusAreaColorTechnique","../../../../../chunks/FocusAreaColor.glsl","../../../../webgl/enums"],function(e,r,o,s,t,a,c,n,i,u,d,l){"use strict";e.FocusAreaColorNode=class extends i{constructor(e){super({...e,view:e.focusAreasView.view}),this.consumes={required:[n.InternalRenderCategory.FOCUSAREA_COLOR,n.InternalRenderCategory.FOCUSAREA]},this.produces=n.InternalRenderCategory.FOCUSAREA_COLOR,this._passParameters=new d.FocusAreaColorPassParameters}precompile(){this.techniques.precompile(u.FocusAreaColorTechnique)}render(e){const r=this.techniques.get(u.FocusAreaColorTechnique),o=e.find(({name:e})=>e===this.produces);if(!r.compiled)return this.requestRender(),o;const s=this.focusAreasView.style,t=this.bindParameters,a=t.camera,c=a.fullViewport[2],i=a.fullViewport[3],d=e.find(({name:e})=>e===n.InternalRenderCategory.FOCUSAREA),h=this.fboCache.acquire(c,i,this.produces),A=this.renderingContext;return A.bindFramebuffer(h.fbo),this._passParameters.color=o.getTexture(),this._passParameters.focusArea=d.getTexture(),this._passParameters.effect=p[s],A.bindTechnique(r,t,this._passParameters),A.screen.draw(),h.attachDepth(o.getAttachment(l.DepthStencilAttachment)),h}},r.__decorate([o.property()],e.FocusAreaColorNode.prototype,"consumes",void 0),r.__decorate([o.property()],e.FocusAreaColorNode.prototype,"produces",void 0),r.__decorate([o.property({constructOnly:!0})],e.FocusAreaColorNode.prototype,"focusAreasView",void 0),e.FocusAreaColorNode=r.__decorate([c.subclass("esri.views.3d.webgl-engine.effects.focusArea.FocusAreaColorNode")],e.FocusAreaColorNode);const p={bright:0,dark:1};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});