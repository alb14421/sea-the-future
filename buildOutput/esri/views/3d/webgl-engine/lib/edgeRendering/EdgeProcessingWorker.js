// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/3d/support/buffer/workerHelper":function(){define(["exports","./InterleavedLayout"],function(e,t){"use strict";e.packInterleavedBuffer=function(e,r){return r.push(e.buffer),{buffer:e.buffer,layout:new t.PackedLayout(e.layout)}},e.unpackInterleavedBuffer=function(e){return new t.InterleavedLayout(e.layout).createView(e.buffer)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/buffer/InterleavedLayout":function(){define(["exports","../../../../geometry/support/float16","../../../../geometry/support/buffer/BufferView","../../../../geometry/support/buffer/types","./glUtil","../../webgl-engine/lib/Util","../../../webgl/VertexAttributeLocations"],function(e,t,r,n,i,s,u){"use strict";class f{constructor(e,t){this.layout=e,this.buffer="number"==typeof t?new ArrayBuffer(t*e.stride):t;for(const t of e.fields.keys()){const r=e.fields.get(t);this[t]=new r.constructor(this.buffer,r.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(e,t){const r=this[e];return r&&r.elementCount===t.ElementCount&&r.elementType===t.ElementType?r:null}slice(e,t){return new f(this.layout,this.buffer.slice(e*this.stride,t*this.stride))}copyFrom(e,t=0,r=0,n=e.count){const i=this.stride;if(i%4==0){const s=new Uint32Array(e.buffer,t*i,n*i/4);new Uint32Array(this.buffer,r*i,n*i/4).set(s)}else{const s=new Uint8Array(e.buffer,t*i,n*i);new Uint8Array(this.buffer,r*i,n*i).set(s)}return this}get cachedMemory(){return this.byteLength}dispose(){}}class o{constructor(e){this._stride=0,this._fields=new Map,e&&(this._stride=e.stride,e.fields.forEach(e=>{return this._fields.set(e[0],{...e[1],constructor:(t=e[1].constructor,l.get(t))});var t}))}freeze(){return this}get locations(){return u.fromLayout(i.glLayout(this))}vec2f16(e,n){return this._appendField(e,t.hasNativeFloat16Array?r.BufferViewVec2f16:r.BufferViewVec2f,n),this}vec2f(e,t){return this._appendField(e,r.BufferViewVec2f,t),this}vec2f64(e,t){return this._appendField(e,r.BufferViewVec2f64,t),this}vec3f16(e,n){return this._appendField(e,t.hasNativeFloat16Array?r.BufferViewVec3f16:r.BufferViewVec3f,n),this}vec3f(e,t){return this._appendField(e,r.BufferViewVec3f,t),this}vec3f64(e,t){return this._appendField(e,r.BufferViewVec3f64,t),this}vec4f16(e,n){return this._appendField(e,t.hasNativeFloat16Array?r.BufferViewVec4f16:r.BufferViewVec4f,n),this}vec4f(e,t){return this._appendField(e,r.BufferViewVec4f,t),this}vec4f64(e,t){return this._appendField(e,r.BufferViewVec4f64,t),this}mat3f(e,t){return this._appendField(e,r.BufferViewMat3f,t),this}mat3f64(e,t){return this._appendField(e,r.BufferViewMat3f64,t),this}mat4f(e,t){return this._appendField(e,r.BufferViewMat4f,t),this}mat4f64(e,t){return this._appendField(e,r.BufferViewMat4f64,t),this}vec4u8(e,t){return this._appendField(e,r.BufferViewVec4u8,t),this}f16(e,n){return this._appendField(e,t.hasNativeFloat16Array?r.BufferViewFloat16:r.BufferViewFloat,n),this}f32(e,t){return this._appendField(e,r.BufferViewFloat,t),this}f64(e,t){return this._appendField(e,r.BufferViewFloat64,t),this}u8(e,t){return this._appendField(e,r.BufferViewUint8,t),this}u16(e,t){return this._appendField(e,r.BufferViewUint16,t),this}i8(e,t){return this._appendField(e,r.BufferViewInt8,t),this}vec2i8(e,t){return this._appendField(e,r.BufferViewVec2i8,t),this}vec2i16(e,t){return this._appendField(e,r.BufferViewVec2i16,t),this}vec2u8(e,t){return this._appendField(e,r.BufferViewVec2u8,t),this}vec2u16(e,t){return this._appendField(e,r.BufferViewVec2u16,t),this}vec4u16(e,t){return this._appendField(e,r.BufferViewVec4u16,t),this}u32(e,t){return this._appendField(e,r.BufferViewUint32,t),this}_appendField(e,t,r){this._fields.has(e)&&s.assert(!1,`${e} already added to vertex buffer layout`);const i=t.ElementCount*n.elementTypeSize(t.ElementType),u=this._stride;this._fields.set(e,{constructor:t,size:i,offset:u,optional:r}),this._alignFields()}_alignFields(){let e=0,t=1;this._fields.forEach(r=>{const i=n.elementTypeSize(r.constructor.ElementType);e=Math.floor((e+i-1)/i)*i,r.offset=e,e+=r.size,t=Math.max(t,i)}),e=Math.floor((e+t-1)/t)*t,this._stride=e}createBuffer(e){return new f(this,e)}createView(e){return new f(this,e)}clone(){const e=new o;return e._stride=this._stride,e._fields=new Map,this._fields.forEach((t,r)=>e._fields.set(r,t)),e.BufferType=this.BufferType,e}get stride(){return this._stride}get fields(){return this._fields}}const c=[r.BufferViewFloat,r.BufferViewVec2f,r.BufferViewVec3f,r.BufferViewVec4f,r.BufferViewMat3f,r.BufferViewMat4f,r.BufferViewFloat64,r.BufferViewVec2f64,r.BufferViewVec3f64,r.BufferViewVec4f64,r.BufferViewMat3f64,r.BufferViewMat4f64,r.BufferViewUint8,r.BufferViewVec2u8,r.BufferViewVec3u8,r.BufferViewVec4u8,r.BufferViewUint16,r.BufferViewVec2u16,r.BufferViewVec3u16,r.BufferViewVec4u16,r.BufferViewUint32,r.BufferViewVec2u32,r.BufferViewVec3u32,r.BufferViewVec4u32,r.BufferViewInt8,r.BufferViewVec2i8,r.BufferViewVec3i8,r.BufferViewVec4i8,r.BufferViewInt16,r.BufferViewVec2i16,r.BufferViewVec3i16,r.BufferViewVec4i16,r.BufferViewInt32,r.BufferViewVec2i32,r.BufferViewVec3i32,r.BufferViewVec4i32];function a(e){return`${e.ElementType}_${e.ElementCount}`}const l=new Map;c.forEach(e=>l.set(a(e),e)),e.InterleavedBuffer=f,e.InterleavedLayout=o,e.PackedLayout=class{constructor(e){this.fields=new Array,e.fields.forEach((e,t)=>{const r={...e,constructor:a(e.constructor)};this.fields.push([t,r])}),this.stride=e.stride}},e.newLayout=function(){return new o},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/float16":function(){define(["exports"],function(e){"use strict";let t=globalThis.Float16Array;e.hasNativeFloat16Array=!!t,e.disableNativeF16Array=function(){t=null,e.hasNativeFloat16Array=!1},e.getFloat16ArrayConstructor=function(){return t},e.makeFloat16Array=function(...e){return new(t??Float32Array)(...e)},e.resetNativeF16Array=function(){t=globalThis.Float16Array,e.hasNativeFloat16Array=!!t},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/BufferView":function(){define(["exports","../float16","./internals/Mat3","./internals/Mat4","./internals/Scalar","./internals/Vec2","./internals/Vec3","./internals/Vec4","../../../views/3d/webgl-engine/lib/Util"],function(e,t,r,n,i,s,u,f,o){"use strict";class c extends i.BufferViewScalarImpl{constructor(e,r=0,n,i){o.assert(t.hasNativeFloat16Array),super(t.getFloat16ArrayConstructor(),e,r,n,i),this.elementType="f16"}static{this.ElementType="f16"}}class a extends i.BufferViewScalarImpl{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}static{this.ElementType="f32"}}class l extends s.BufferViewVec2Impl{constructor(e,r=0,n,i){o.assert(t.hasNativeFloat16Array),super(t.getFloat16ArrayConstructor(),e,r,n,i),this.elementType="f16"}slice(e,t){return this.sliceBuffer(l,e,t)}static{this.ElementType="f16"}}class d extends s.BufferViewVec2Impl{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}slice(e,t){return this.sliceBuffer(d,e,t)}static{this.ElementType="f32"}}class h extends u.BufferViewVec3Impl{constructor(e,r=0,n,i){o.assert(t.hasNativeFloat16Array),super(t.getFloat16ArrayConstructor(),e,r,n,i),this.elementType="f16"}slice(e,t){return this.sliceBuffer(h,e,t)}static{this.ElementType="f16"}}class p extends u.BufferViewVec3Impl{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}slice(e,t){return this.sliceBuffer(p,e,t)}static fromTypedArray(e,t){return new p(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}static{this.ElementType="f32"}}class y extends f.BufferViewVec4Impl{constructor(e,r=0,n,i){o.assert(t.hasNativeFloat16Array),super(t.getFloat16ArrayConstructor(),e,r,n,i),this.elementType="f16"}slice(e,t){return this.sliceBuffer(y,e,t)}static{this.ElementType="f16"}}class m extends f.BufferViewVec4Impl{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}slice(e,t){return this.sliceBuffer(m,e,t)}static{this.ElementType="f32"}}class g extends r.BufferViewMat3Impl{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}slice(e,t){return this.sliceBuffer(g,e,t)}static{this.ElementType="f32"}}class B extends r.BufferViewMat3Impl{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}slice(e,t){return this.sliceBuffer(B,e,t)}static{this.ElementType="f64"}}class w extends n.BufferViewMat4Impl{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}slice(e,t){return this.sliceBuffer(w,e,t)}static{this.ElementType="f32"}}class V extends n.BufferViewMat4Impl{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}slice(e,t){return this.sliceBuffer(V,e,t)}static{this.ElementType="f64"}}class b extends i.BufferViewScalarImpl{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}slice(e,t){return this.sliceBuffer(b,e,t)}static{this.ElementType="f64"}}class E extends s.BufferViewVec2Impl{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}slice(e,t){return this.sliceBuffer(E,e,t)}static{this.ElementType="f64"}}class M extends u.BufferViewVec3Impl{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}slice(e,t){return this.sliceBuffer(M,e,t)}static fromTypedArray(e,t){return new M(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}static{this.ElementType="f64"}}class T extends f.BufferViewVec4Impl{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}slice(e,t){return this.sliceBuffer(T,e,t)}static{this.ElementType="f64"}}class A extends i.BufferViewScalarImpl{constructor(e,t=0,r,n){super(Uint8Array,e,t,r,n),this.elementType="u8"}slice(e,t){return this.sliceBuffer(A,e,t)}static{this.ElementType="u8"}}class S extends s.BufferViewVec2Impl{constructor(e,t=0,r,n){super(Uint8Array,e,t,r,n),this.elementType="u8"}slice(e,t){return this.sliceBuffer(S,e,t)}static{this.ElementType="u8"}}class v extends u.BufferViewVec3Impl{constructor(e,t=0,r,n){super(Uint8Array,e,t,r,n),this.elementType="u8"}slice(e,t){return this.sliceBuffer(v,e,t)}static fromTypedArray(e,t){return new v(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}static{this.ElementType="u8"}}class x extends f.BufferViewVec4Impl{constructor(e,t=0,r,n){super(Uint8Array,e,t,r,n),this.elementType="u8"}slice(e,t){return this.sliceBuffer(x,e,t)}static{this.ElementType="u8"}}class I extends i.BufferViewScalarImpl{constructor(e,t=0,r,n){super(Uint16Array,e,t,r,n),this.elementType="u16"}slice(e,t){return this.sliceBuffer(I,e,t)}static{this.ElementType="u16"}}class _ extends s.BufferViewVec2Impl{constructor(e,t=0,r,n){super(Uint16Array,e,t,r,n),this.elementType="u16"}slice(e,t){return this.sliceBuffer(_,e,t)}static{this.ElementType="u16"}}class L extends u.BufferViewVec3Impl{constructor(e,t=0,r,n){super(Uint16Array,e,t,r,n),this.elementType="u16"}slice(e,t){return this.sliceBuffer(L,e,t)}static{this.ElementType="u16"}}class F extends f.BufferViewVec4Impl{constructor(e,t=0,r,n){super(Uint16Array,e,t,r,n),this.elementType="u16"}slice(e,t){return this.sliceBuffer(F,e,t)}static{this.ElementType="u16"}}class N extends i.BufferViewScalarImpl{constructor(e,t=0,r,n){super(Uint32Array,e,t,r,n),this.elementType="u32"}slice(e,t){return this.sliceBuffer(N,e,t)}static{this.ElementType="u32"}}class U extends s.BufferViewVec2Impl{constructor(e,t=0,r,n){super(Uint32Array,e,t,r,n),this.elementType="u32"}slice(e,t){return this.sliceBuffer(U,e,t)}static{this.ElementType="u32"}}class P extends u.BufferViewVec3Impl{constructor(e,t=0,r,n){super(Uint32Array,e,t,r,n),this.elementType="u32"}slice(e,t){return this.sliceBuffer(P,e,t)}static{this.ElementType="u32"}}class O extends f.BufferViewVec4Impl{constructor(e,t=0,r,n){super(Uint32Array,e,t,r,n),this.elementType="u32"}slice(e,t){return this.sliceBuffer(O,e,t)}static{this.ElementType="u32"}}class C extends i.BufferViewScalarImpl{constructor(e,t=0,r,n){super(Int8Array,e,t,r,n),this.elementType="i8"}slice(e,t){return this.sliceBuffer(C,e,t)}static{this.ElementType="i8"}}class R extends s.BufferViewVec2Impl{constructor(e,t=0,r,n){super(Int8Array,e,t,r,n),this.elementType="i8"}slice(e,t){return this.sliceBuffer(R,e,t)}static{this.ElementType="i8"}}class z extends u.BufferViewVec3Impl{constructor(e,t=0,r,n){super(Int8Array,e,t,r,n),this.elementType="i8"}slice(e,t){return this.sliceBuffer(z,e,t)}static{this.ElementType="i8"}}class q extends f.BufferViewVec4Impl{constructor(e,t=0,r,n){super(Int8Array,e,t,r,n),this.elementType="i8"}slice(e,t){return this.sliceBuffer(q,e,t)}static{this.ElementType="i8"}}class D extends i.BufferViewScalarImpl{constructor(e,t=0,r,n){super(Int16Array,e,t,r,n),this.elementType="i16"}slice(e,t){return this.sliceBuffer(D,e,t)}static{this.ElementType="i16"}}class j extends s.BufferViewVec2Impl{constructor(e,t=0,r,n){super(Int16Array,e,t,r,n),this.elementType="i16"}slice(e,t){return this.sliceBuffer(j,e,t)}static{this.ElementType="i16"}}class Y extends u.BufferViewVec3Impl{constructor(e,t=0,r,n){super(Int16Array,e,t,r,n),this.elementType="i16"}slice(e,t){return this.sliceBuffer(Y,e,t)}static{this.ElementType="i16"}}class k extends f.BufferViewVec4Impl{constructor(e,t=0,r,n){super(Int16Array,e,t,r,n),this.elementType="i16"}slice(e,t){return this.sliceBuffer(k,e,t)}static{this.ElementType="i16"}}class W extends i.BufferViewScalarImpl{constructor(e,t=0,r,n){super(Int32Array,e,t,r,n),this.elementType="i32"}slice(e,t){return this.sliceBuffer(W,e,t)}static{this.ElementType="i32"}}class H extends s.BufferViewVec2Impl{constructor(e,t=0,r,n){super(Int32Array,e,t,r,n),this.elementType="i32"}slice(e,t){return this.sliceBuffer(H,e,t)}static{this.ElementType="i32"}}class G extends u.BufferViewVec3Impl{constructor(e,t=0,r,n){super(Int32Array,e,t,r,n),this.elementType="i32"}slice(e,t){return this.sliceBuffer(G,e,t)}static{this.ElementType="i32"}}class X extends f.BufferViewVec4Impl{constructor(e,t=0,r,n){super(Int32Array,e,t,r,n),this.elementType="i32"}slice(e,t){return this.sliceBuffer(X,e,t)}static{this.ElementType="i32"}}e.BufferViewFloat=a,e.BufferViewFloat16=c,e.BufferViewFloat64=b,e.BufferViewInt16=D,e.BufferViewInt32=W,e.BufferViewInt8=C,e.BufferViewMat3f=g,e.BufferViewMat3f64=B,e.BufferViewMat4f=w,e.BufferViewMat4f64=V,e.BufferViewUint16=I,e.BufferViewUint32=N,e.BufferViewUint8=A,e.BufferViewVec2f=d,e.BufferViewVec2f16=l,e.BufferViewVec2f64=E,e.BufferViewVec2i16=j,e.BufferViewVec2i32=H,e.BufferViewVec2i8=R,e.BufferViewVec2u16=_,e.BufferViewVec2u32=U,e.BufferViewVec2u8=S,e.BufferViewVec3f=p,e.BufferViewVec3f16=h,e.BufferViewVec3f64=M,e.BufferViewVec3i16=Y,e.BufferViewVec3i32=G,e.BufferViewVec3i8=z,e.BufferViewVec3u16=L,e.BufferViewVec3u32=P,e.BufferViewVec3u8=v,e.BufferViewVec4f=m,e.BufferViewVec4f16=y,e.BufferViewVec4f64=T,e.BufferViewVec4i16=k,e.BufferViewVec4i32=X,e.BufferViewVec4i8=q,e.BufferViewVec4u16=F,e.BufferViewVec4u32=O,e.BufferViewVec4u8=x,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Mat3":function(){define(["exports"],function(e){"use strict";class t{static{this.ElementCount=9}constructor(e,t,r=0,n,i){this.TypedArrayConstructor=e,this.elementCount=9;const s=this.TypedArrayConstructor;void 0===n&&(n=9*s.BYTES_PER_ELEMENT);const u=0===t.byteLength?0:r;this.typedBuffer=null==i?new s(t,u):new s(t,u,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(e,t,r=this.count-t){const n=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,n,this.stride,n+r*this.stride)}getMat(e,t){let r=e*this.typedBufferStride;for(let e=0;e<9;e++)t[e]=this.typedBuffer[r++];return t}setMat(e,t){let r=e*this.typedBufferStride;for(let e=0;e<9;e++)this.typedBuffer[r++]=t[e]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}copyFrom(e,t,r){const n=this.typedBuffer,i=t.typedBuffer;let s=e*this.typedBufferStride,u=r*t.typedBufferStride;for(let e=0;e<9;++e)n[s++]=i[u++]}get buffer(){return this.typedBuffer.buffer}}e.BufferViewMat3Impl=t,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Mat4":function(){define(["exports"],function(e){"use strict";class t{static{this.ElementCount=16}constructor(e,t,r=0,n,i){this.TypedArrayConstructor=e,this.elementCount=16;const s=this.TypedArrayConstructor;void 0===n&&(n=16*s.BYTES_PER_ELEMENT);const u=0===t.byteLength?0:r;this.typedBuffer=null==i?new s(t,u):new s(t,u,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(e,t,r=this.count-t){const n=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,n,this.stride,n+r*this.stride)}getMat(e,t){let r=e*this.typedBufferStride;for(let e=0;e<16;e++)t[e]=this.typedBuffer[r++];return t}setMat(e,t){let r=e*this.typedBufferStride;for(let e=0;e<16;e++)this.typedBuffer[r++]=t[e]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}copyFrom(e,t,r){this.copyFromTypedBuffer(e,t.typedBuffer,r*t.typedBufferStride)}copyFromTypedBuffer(e,t,r){const n=this.typedBuffer;let i=e*this.typedBufferStride;for(let e=0;e<16;++e)n[i++]=t[r++]}get buffer(){return this.typedBuffer.buffer}}e.BufferViewMat4Impl=t,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Scalar":function(){define(["exports"],function(e){"use strict";class t{static{this.ElementCount=1}constructor(e,t,r=0,n,i){this.TypedArrayConstructor=e,this.elementCount=1;const s=this.TypedArrayConstructor;void 0===n&&(n=s.BYTES_PER_ELEMENT);const u=0===t.byteLength?0:r;this.typedBuffer=null==i?new s(t,u):new s(t,u,(i-r)/s.BYTES_PER_ELEMENT),this.stride=n,this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride)}sliceBuffer(e,t,r=this.count-t){const n=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,n,this.stride,n+r*this.stride)}get(e){return this.typedBuffer[e*this.typedBufferStride]}set(e,t){this.typedBuffer[e*this.typedBufferStride]=t}get buffer(){return this.typedBuffer.buffer}}e.BufferViewScalarImpl=t,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Vec2":function(){define(["exports","../../../../core/libs/gl-matrix-2/math/vec2"],function(e,t){"use strict";class r{static{this.ElementCount=2}constructor(e,t,r=0,n,i){this.TypedArrayConstructor=e,this.start=r,this.elementCount=2;const s=this.TypedArrayConstructor;void 0===n&&(n=2*s.BYTES_PER_ELEMENT);const u=0===t.byteLength?0:r;this.typedBuffer=null==i?new s(t,u):new s(t,u,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(e,t,r=this.count-t){const n=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,n,this.stride,n+r*this.stride)}getVec(e,r){return e*=this.typedBufferStride,t.set(r,this.typedBuffer[e],this.typedBuffer[e+1])}setVec(e,t){e*=this.typedBufferStride,this.typedBuffer[e++]=t[0],this.typedBuffer[e]=t[1]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}setValues(e,t,r){e*=this.typedBufferStride,this.typedBuffer[e++]=t,this.typedBuffer[e]=r}copyFrom(e,t,r){const n=this.typedBuffer,i=t.typedBuffer;let s=e*this.typedBufferStride,u=r*t.typedBufferStride;n[s++]=i[u++],n[s]=i[u]}get buffer(){return this.typedBuffer.buffer}}e.BufferViewVec2Impl=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["exports","./common"],function(e,t){"use strict";function r(e,t){return e[0]=t[0],e[1]=t[1],e}function n(e,t,r){return e[0]=t,e[1]=r,e}function i(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function s(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function u(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function f(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function o(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function c(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function a(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function l(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function d(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function h(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function p(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e}function y(e,t){const r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function m(e,t){const r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function g(e){const t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function B(e){const t=e[0],r=e[1];return t*t+r*r}function w(e,t){return e[0]=-t[0],e[1]=-t[1],e}function V(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function b(e,t){const r=t[0],n=t[1];let i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e}function E(e,t){return e[0]*t[0]+e[1]*t[1]}function M(e,t,r){const n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e}function T(e,t,r,n){const i=t[0],s=t[1];return e[0]=i+n*(r[0]-i),e[1]=s+n*(r[1]-s),e}function A(e,r=1){const n=2*t.RANDOM()*Math.PI;return e[0]=Math.cos(n)*r,e[1]=Math.sin(n)*r,e}function S(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e}function v(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function x(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function I(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}function _(e,t,r,n){const i=t[0]-r[0],s=t[1]-r[1],u=Math.sin(n),f=Math.cos(n);return e[0]=i*f-s*u+r[0],e[1]=i*u+s*f+r[1],e}function L(e,t){const r=e[0],n=e[1],i=t[0],s=t[1];let u=r*r+n*n;u>0&&(u=1/Math.sqrt(u));let f=i*i+s*s;f>0&&(f=1/Math.sqrt(f));const o=(r*i+n*s)*u*f;return o>1?0:o<-1?Math.PI:Math.acos(o)}function F(e){return"vec2("+e[0]+", "+e[1]+")"}function N(e,t){return e[0]===t[0]&&e[1]===t[1]}function U(e,r){const n=e[0],i=e[1],s=r[0],u=r[1],f=t.getEpsilon();return Math.abs(n-s)<=f*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=f*Math.max(1,Math.abs(i),Math.abs(u))}function P(e,t,r,n,i){let s=t[0]-r[0],u=t[1]-r[1];const f=(n[0]*s+n[1]*u)*(i-1);return s=n[0]*f,u=n[1]*f,e[0]=t[0]+s,e[1]=t[1]+u,e}const O=g,C=s,R=u,z=f,q=y,D=m,j=B,Y=Object.freeze(Object.defineProperty({__proto__:null,add:i,angle:L,ceil:o,copy:r,cross:M,dist:q,distance:y,div:z,divide:f,dot:E,equals:U,exactEquals:N,floor:c,inverse:V,len:O,length:g,lerp:T,max:l,min:a,mul:R,multiply:u,negate:w,normalize:b,projectAndScale:P,random:A,rotate:_,round:d,scale:h,scaleAndAdd:p,set:n,sqrDist:D,sqrLen:j,squaredDistance:m,squaredLength:B,str:F,sub:C,subtract:s,transformMat2:S,transformMat2d:v,transformMat3:x,transformMat4:I},Symbol.toStringTag,{value:"Module"}));e.add=i,e.angle=L,e.ceil=o,e.copy=r,e.cross=M,e.dist=q,e.distance=y,e.div=z,e.divide=f,e.dot=E,e.equals=U,e.exactEquals=N,e.floor=c,e.inverse=V,e.len=O,e.length=g,e.lerp=T,e.max=l,e.min=a,e.mul=R,e.multiply=u,e.negate=w,e.normalize=b,e.projectAndScale=P,e.random=A,e.rotate=_,e.round=d,e.scale=h,e.scaleAndAdd=p,e.set=n,e.sqrDist=D,e.sqrLen=j,e.squaredDistance=m,e.squaredLength=B,e.str=F,e.sub=C,e.subtract=s,e.transformMat2=S,e.transformMat2d=v,e.transformMat3=x,e.transformMat4=I,e.vec2=Y,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Vec3":function(){define(["exports","../../../../chunks/vec32"],function(e,t){"use strict";class r{static{this.ElementCount=3}constructor(e,t,r=0,n,i){this.TypedArrayConstructor=e,this.elementCount=3;const s=this.TypedArrayConstructor;void 0===n&&(n=3*s.BYTES_PER_ELEMENT);const u=0===t.byteLength?0:r;this.typedBuffer=null==i?new s(t,u):new s(t,u,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(e,t,r=this.count-t){const n=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,n,this.stride,n+r*this.stride)}getVec(e,r){return e*=this.typedBufferStride,t.set(r,this.typedBuffer[e],this.typedBuffer[e+1],this.typedBuffer[e+2])}setVec(e,t){e*=this.typedBufferStride,this.typedBuffer[e++]=t[0],this.typedBuffer[e++]=t[1],this.typedBuffer[e]=t[2]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}setValues(e,t,r,n){e*=this.typedBufferStride,this.typedBuffer[e++]=t,this.typedBuffer[e++]=r,this.typedBuffer[e]=n}copyFrom(e,t,r){const n=this.typedBuffer,i=t.typedBuffer;let s=e*this.typedBufferStride,u=r*t.typedBufferStride;n[s++]=i[u++],n[s++]=i[u++],n[s]=i[u]}get buffer(){return this.typedBuffer.buffer}}e.BufferViewVec3Impl=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/vec32":function(){define(["exports","../core/libs/gl-matrix-2/factories/vec3f64","../core/libs/gl-matrix-2/math/common"],function(e,t,r){"use strict";function n(e){const t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}function i(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function s(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e}function u(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function f(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function o(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function c(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function a(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function l(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function d(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function h(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function p(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function y(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function m(e,t=0,r=1){return e[0]=Math.min(Math.max(e[0],t),r),e[1]=Math.min(Math.max(e[1],t),r),e[2]=Math.min(Math.max(e[2],t),r),e}function g(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function B(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function w(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function V(e,t){const r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+n*n+i*i)}function b(e,t){const r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i}function E(e){const t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function M(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function T(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function A(e,t){const r=t[0],n=t[1],i=t[2];let s=r*r+n*n+i*i;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}function S(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function v(e,t,r){const n=t[0],i=t[1],s=t[2],u=r[0],f=r[1],o=r[2];return e[0]=i*o-s*f,e[1]=s*u-n*o,e[2]=n*f-i*u,e}function x(e,t,r){const n=t[0],i=t[1],s=t[2],u=r[0],f=r[1],o=r[2],c=i*o-s*f,a=s*u-n*o,l=n*f-i*u,d=Math.sqrt(c*c+a*a+l*l);return e[0]=c/d,e[1]=a/d,e[2]=l/d,e}function I(e,t,r,n){const i=t[0],s=t[1],u=t[2];return e[0]=i+n*(r[0]-i),e[1]=s+n*(r[1]-s),e[2]=u+n*(r[2]-u),e}function _(e,t,r,n,i,s){const u=s*s,f=u*(2*s-3)+1,o=u*(s-2)+s,c=u*(s-1),a=u*(3-2*s);return e[0]=t[0]*f+r[0]*o+n[0]*c+i[0]*a,e[1]=t[1]*f+r[1]*o+n[1]*c+i[1]*a,e[2]=t[2]*f+r[2]*o+n[2]*c+i[2]*a,e}function L(e,t,r,n,i,s){const u=1-s,f=u*u,o=s*s,c=f*u,a=3*s*f,l=3*o*u,d=o*s;return e[0]=t[0]*c+r[0]*a+n[0]*l+i[0]*d,e[1]=t[1]*c+r[1]*a+n[1]*l+i[1]*d,e[2]=t[2]*c+r[2]*a+n[2]*l+i[2]*d,e}function F(e,t=1){const n=r.RANDOM,i=2*n()*Math.PI,s=2*n()-1,u=Math.sqrt(1-s*s)*t;return e[0]=Math.cos(i)*u,e[1]=Math.sin(i)*u,e[2]=s*t,e}function N(e,t,r){const n=t[0],i=t[1],s=t[2];return e[0]=r[0]*n+r[4]*i+r[8]*s+r[12],e[1]=r[1]*n+r[5]*i+r[9]*s+r[13],e[2]=r[2]*n+r[6]*i+r[10]*s+r[14],e}function U(e,t,r){const n=t[0],i=t[1],s=t[2];return e[0]=n*r[0]+i*r[3]+s*r[6],e[1]=n*r[1]+i*r[4]+s*r[7],e[2]=n*r[2]+i*r[5]+s*r[8],e}function P(e,t,r){const n=r[0],i=r[1],s=r[2],u=r[3],f=t[0],o=t[1],c=t[2],a=i*c-s*o,l=s*f-n*c,d=n*o-i*f,h=i*d-s*l,p=s*a-n*d,y=n*l-i*a,m=2*u;return e[0]=f+a*m+2*h,e[1]=o+l*m+2*p,e[2]=c+d*m+2*y,e}function O(e,t,r,n){const i=[],s=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],s[0]=i[0],s[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),s[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function C(e,t,r,n){const i=[],s=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],s[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),s[1]=i[1],s[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function R(e,t,r,n){const i=[],s=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],s[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),s[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),s[2]=i[2],e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function z(e,t){A(q,e),A(D,t);const r=S(q,D);return r>1?0:r<-1?Math.PI:Math.acos(r)}const q=t.create(),D=t.create();function j(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Y(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function k(e,t){if(e===t)return!0;const n=e[0],i=e[1],s=e[2],u=t[0],f=t[1],o=t[2],c=r.getEpsilon();return Math.abs(n-u)<=c*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-f)<=c*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(s-o)<=c*Math.max(1,Math.abs(s),Math.abs(o))}function W(e,t,r){const n=r[0]-t[0],i=r[1]-t[1],s=r[2]-t[2];let u=n*n+i*i+s*s;return u>0?(u=1/Math.sqrt(u),e[0]=n*u,e[1]=i*u,e[2]=s*u,e):(e[0]=0,e[1]=0,e[2]=0,e)}const H=f,G=o,X=c,$=V,Z=b,Q=n,J=E,K=Object.freeze(Object.defineProperty({__proto__:null,abs:d,add:u,angle:z,bezier:L,ceil:a,clamp:m,copy:i,cross:v,crossAndNormalize:x,direction:W,dist:$,distance:V,div:X,divide:c,dot:S,equals:k,exactEquals:Y,floor:l,hermite:_,inverse:T,len:Q,length:n,lerp:I,max:y,min:p,mul:G,multiply:o,negate:M,normalize:A,random:F,rotateX:O,rotateY:C,rotateZ:R,round:g,scale:B,scaleAndAdd:w,set:s,sign:h,sqrDist:Z,sqrLen:J,squaredDistance:b,squaredLength:E,str:j,sub:H,subtract:f,transformMat3:U,transformMat4:N,transformQuat:P},Symbol.toStringTag,{value:"Module"}));e.abs=d,e.add=u,e.angle=z,e.bezier=L,e.ceil=a,e.clamp=m,e.copy=i,e.cross=v,e.crossAndNormalize=x,e.direction=W,e.dist=$,e.distance=V,e.div=X,e.divide=c,e.dot=S,e.equals=k,e.exactEquals=Y,e.floor=l,e.hermite=_,e.inverse=T,e.len=Q,e.length=n,e.lerp=I,e.max=y,e.min=p,e.mul=G,e.multiply=o,e.negate=M,e.normalize=A,e.random=F,e.rotateX=O,e.rotateY=C,e.rotateZ=R,e.round=g,e.scale=B,e.scaleAndAdd=w,e.set=s,e.sign=h,e.sqrDist=Z,e.sqrLen=J,e.squaredDistance=b,e.squaredLength=E,e.str=j,e.sub=H,e.subtract=f,e.transformMat3=U,e.transformMat4=N,e.transformQuat=P,e.vec3=K})},"esri/geometry/support/buffer/internals/Vec4":function(){define(["exports","../../../../chunks/vec42"],function(e,t){"use strict";class r{static{this.ElementCount=4}constructor(e,t,r=0,n,i){this.TypedArrayConstructor=e,this.start=r,this.elementCount=4;const s=this.TypedArrayConstructor;void 0===n&&(n=4*s.BYTES_PER_ELEMENT);const u=0===t.byteLength?0:r;this.typedBuffer=null==i?new s(t,u):new s(t,u,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(e,t,r=this.count-t){const n=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,n,this.stride,n+r*this.stride)}getVec(e,r){return e*=this.typedBufferStride,t.set(r,this.typedBuffer[e++],this.typedBuffer[e++],this.typedBuffer[e++],this.typedBuffer[e])}setVec(e,t){e*=this.typedBufferStride,this.typedBuffer[e++]=t[0],this.typedBuffer[e++]=t[1],this.typedBuffer[e++]=t[2],this.typedBuffer[e]=t[3]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}setValues(e,t,r,n,i){e*=this.typedBufferStride,this.typedBuffer[e++]=t,this.typedBuffer[e++]=r,this.typedBuffer[e++]=n,this.typedBuffer[e]=i}copyFrom(e,t,r){const n=this.typedBuffer,i=t.typedBuffer;let s=e*this.typedBufferStride,u=r*t.typedBufferStride;n[s++]=i[u++],n[s++]=i[u++],n[s++]=i[u++],n[s]=i[u]}get buffer(){return this.typedBuffer.buffer}}e.BufferViewVec4Impl=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Util":function(){define(["exports","../../../../core/libs/gl-matrix-2/factories/vec2f64","../../../../chunks/vec42","../../../../core/libs/gl-matrix-2/factories/vec4f64"],function(e,t,r,n){"use strict";const i=n.create();class s{constructor(e){this.message=e}toString(){return`AssertException: ${this.message}`}}function u(e,t="Assertion"){if(!e){const e=new Error(t).stack;throw new s(`${t} at ${e}`)}}e.assert=u,e.isTranslationMatrix=function(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&1===e[15]},e.logWithBase=function(e,t){return Math.log(e)/Math.log(t)},e.project=function(e,t,n,s,f){i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=1,r.transformMat4(i,i,t),f.length>2&&(f[2]=-i[2]),r.transformMat4(i,i,n),u(0!==i[3]),f[0]=i[0]/i[3],f[1]=i[1]/i[3],f[2]=i[2]/i[3],f[0]=(.5*f[0]+.5)*s[2]+s[0],f[1]=(.5*f[1]+.5)*s[3]+s[1]},e.rayBoxTest=function(e,t,r,n){let i,s=(r[0]-e[0])/t[0],u=(n[0]-e[0])/t[0];s>u&&(i=s,s=u,u=i);let f=(r[1]-e[1])/t[1],o=(n[1]-e[1])/t[1];if(f>o&&(i=f,f=o,o=i),s>o||f>u)return!1;f>s&&(s=f),o<u&&(u=o);let c=(r[2]-e[2])/t[2],a=(n[2]-e[2])/t[2];return c>a&&(i=c,c=a,a=i),!(s>a||c>u||(a<u&&(u=a),u<0))},e.rayRay2D=function(e,r,n,i,s,u=t.create()){const f=(i[s]-n[s])*(r[0]-e[0])-(i[0]-n[0])*(r[s]-e[s]),o=(i[0]-n[0])*(e[s]-n[s])-(i[s]-n[s])*(e[0]-n[0]);if(0===f)return!1;const c=o/f;return u[0]=e[0]+c*(r[0]-e[0]),u[1]=e[s]+c*(r[s]-e[s]),!0},e.setMatrixTranslation3=function(e,t,r,n){e[12]=t,e[13]=r,e[14]=n},e.verify=function(e,t){e||(t=t||"",console.warn("Verify failed: "+t+"\n"+new Error("verify").stack))},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["exports"],function(e){"use strict";function t(){return[0,0]}function r(e){return[e[0],e[1]]}function n(e,t){return[e,t]}function i(e,t){return[e,t]}function s(e,t=[0,0]){const r=Math.min(2,e.length);for(let n=0;n<r;++n)t[n]=e[n];return t}function u(){return[0,0]}function f(){return n(1,1)}function o(){return n(1,0)}function c(){return n(0,1)}const a=[0,0],l=f(),d=o(),h=c(),p=Object.freeze(Object.defineProperty({__proto__:null,ONES:l,UNIT_X:d,UNIT_Y:h,ZEROS:a,clone:r,create:t,freeze:i,fromArray:s,fromValues:n,ones:f,unitX:o,unitY:c,zeros:u},Symbol.toStringTag,{value:"Module"}));e.ONES=l,e.UNIT_X=d,e.UNIT_Y=h,e.ZEROS=a,e.clone=r,e.create=t,e.freeze=i,e.fromArray=s,e.fromValues=n,e.ones=f,e.unitX=o,e.unitY=c,e.vec2f64=p,e.zeros=u,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/types":function(){define(["exports"],function(e){"use strict";e.elementTypeSize=function(e){switch(e){case"u8":case"i8":return 1;case"u16":case"i16":case"f16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8}},e.isInteger=function(e){switch(e){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f16":case"f32":case"f64":return!1}},e.isSigned=function(e){switch(e){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f16":case"f32":case"f64":return!0}},e.maximumValue=function(e){switch(e){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f16":return 65504;case"f32":return 3402823e32;case"f64":return 179769e303}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/buffer/glUtil":function(){define(["exports","../../../../core/has","../../../webgl/enums","../../../webgl/VertexElementDescriptor"],function(e,t,r,n){"use strict";e.glLayout=function(e,t=0){const i=e.stride;return Array.from(e.fields.keys()).map(s=>{const u=e.fields.get(s),f=u.constructor.ElementCount,o=function(e){switch(e){case"u8":return r.DataType.UNSIGNED_BYTE;case"u16":return r.DataType.UNSIGNED_SHORT;case"u32":return r.DataType.UNSIGNED_INT;case"i8":return r.DataType.BYTE;case"i16":return r.DataType.SHORT;case"i32":return r.DataType.INT;case"f16":return r.DataType.HALF_FLOAT;case"f32":return r.DataType.FLOAT;default:throw new Error("BufferType not supported in WebGL")}}(u.constructor.ElementType),c=u.offset,a=u.optional?.glNormalized??!1;return new n.VertexElementDescriptor(s,f,o,c,i,a,t)})},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/edgeRendering/bufferLayouts":function(){define(["exports","../../../support/buffer/glUtil","../../../support/buffer/InterleavedLayout","../../../../webgl/VertexAttributeLocations"],function(e,t,r,n){"use strict";const i=r.newLayout().vec3f("position").u16("componentIndex").freeze(),s=r.newLayout().vec2u8("sideness").freeze(),u=t.glLayout(s),f=r.newLayout().vec3f("position0").vec3f("position1").vec2i16("normalCompressed").u16("componentIndex").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).freeze(),o=r.newLayout().vec3f("position0").vec3f("position1").vec2i16("normalCompressed").vec2i16("normal2Compressed").u16("componentIndex").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).freeze(),c=t.glLayout(f,1),a=t.glLayout(o,1),l=n.fromLayouts([u,c]),d=n.fromLayouts([u,a]);e.EdgeInputBufferLayout=i,e.RegularEdgeInstancesGLLayout=c,e.RegularEdgeInstancesLayout=f,e.RegularEdgeLocations=l,e.SilhouetteEdgeInstancesGLLayout=a,e.SilhouetteEdgeInstancesLayout=o,e.SilhouetteEdgeLocations=d,e.VertexLayout=s,e.glVertexLayout=u,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/edgeRendering/edgePreprocessing":function(){define(["exports","../../../../../core/mathUtils","../../../../../core/PooledArray","../../../../../chunks/vec32","../../../../../core/libs/gl-matrix-2/factories/vec3f64","./Edge"],function(e,t,r,n,i,s){"use strict";class u{constructor(){this.index=0,this.length=0}}const f=new r({allocator:e=>e||new u,deallocator:null}),o=new r({deallocator:null}),c=new r({deallocator:null}),a=new s.Edge,l=i.create(),d=i.create(),h=i.create(),p=i.create(),y=i.create(),m=t.deg2rad(4),g=Math.cos(m),B=t.deg2rad(35),w=Math.cos(B);e.cleanupEdgeProcessing=function(){f.prune(),o.prune(),c.prune()},e.extractEdges=function(e,r,i){const s=e.vertices.position,u=e.vertices.componentIndex,B=a.position0,V=a.position1,b=a.faceNormal0,E=a.faceNormal1,{edges:M,normals:T}=function(e){const t=e.faces.length/3,r=e.faces,i=e.neighbors,s=e.vertices.position;o.length=c.length=0;for(let e=0;e<t;e++){const t=3*e,u=i[t],f=i[t+1],a=i[t+2],l=r[t],d=r[t+1],m=r[t+2];s.getVec(l,h),s.getVec(d,p),s.getVec(m,y),n.subtract(p,p,h),n.subtract(y,y,h),n.cross(h,p,y),n.normalize(h,h),c.pushArray(h),(-1===u||l<d)&&(o.push(l),o.push(d),o.push(e),o.push(u)),(-1===f||d<m)&&(o.push(d),o.push(m),o.push(e),o.push(f)),(-1===a||m<l)&&(o.push(m),o.push(l),o.push(e),o.push(a))}return{edges:o,normals:c}}(e),A=M.length/4,S=r.allocate(A);let v=0;const x=A,I=i?.allocate(x);let _=0,L=0,F=0;f.length=0;for(let e=0;e<A;++e){const t=4*e;s.getVec(M.data[t],B),s.getVec(M.data[t+1],V);const r=f.pushNew();r.index=4*e,r.length=n.distance(B,V)}f.sort((e,t)=>t.length-e.length);const N=new Array,U=new Array;f.forAll(({length:e,index:f})=>{const o=M.data[f],c=M.data[f+1],h=M.data[f+2],p=M.data[f+3],y=-1===p;if(s.getVec(o,B),s.getVec(c,V),y){const e=3*h;n.set(b,T.data[e],T.data[e+1],T.data[e+2]),n.copy(E,b),a.componentIndex=u.get(o),a.cosAngle=n.dot(b,E)}else{let e=3*h;if(n.set(b,T.data[e],T.data[e+1],T.data[e+2]),e=3*p,n.set(E,T.data[e],T.data[e+1],T.data[e+2]),a.componentIndex=u.get(o),a.cosAngle=n.dot(b,E),A=g,a.cosAngle>A)return;a.cosAngle<-.9999&&n.copy(E,b)}var A,x;L+=e,F++,y||(x=w,a.cosAngle<x)?(r.write(S,v++,a),N.push(e)):function(e,r){const i=t.acosClamped(e.cosAngle);return n.direction(d,e.position1,e.position0),i*(n.dot(n.cross(l,e.faceNormal0,e.faceNormal1),d)>0?-1:1)>r}(a,m)&&(I&&i&&i.write(I,_++,a),U.push(e))});const P=new Float32Array(N.reverse()),O=new Float32Array(U.reverse()),C=I&&i?{instancesData:I.slice(0,_),lodInfo:{lengths:O}}:void 0;return{regular:{instancesData:S.slice(0,v),lodInfo:{lengths:P}},silhouette:C,averageEdgeLength:L/F}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/edgeRendering/Edge":function(){define(["exports","../../../../../core/libs/gl-matrix-2/factories/vec3f64"],function(e,t){"use strict";e.Edge=class{constructor(){this.position0=t.create(),this.position1=t.create(),this.faceNormal0=t.create(),this.faceNormal1=t.create(),this.componentIndex=0,this.cosAngle=0}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/edgeRendering/edgeProcessing":function(){define(["exports","../../../../../geometry/support/meshUtils/deduplicate","../../../support/meshProcessing","../../../support/buffer/InterleavedLayout","./bufferLayouts","./edgeBufferWriters","./edgePreprocessing"],function(e,t,r,n,i,s,u){"use strict";function f(e,n,s,u){if(n){const t=r.computeNeighbors(s,u,e.count);return new o(s,u,t,e)}const f=t.deduplicate(e.buffer,e.stride/4,{originalIndices:s}),c=r.computeNeighbors(f.indices,u,f.uniqueCount);return{faces:f.indices,facesLength:f.indices.length,neighbors:c,vertices:i.EdgeInputBufferLayout.createView(f.buffer)}}class o{constructor(e,t,r,n){this.faces=e,this.facesLength=t,this.neighbors=r,this.vertices=n}}const c=new s.RegularEdgeBufferWriter,a=new s.SilhouetteEdgeBufferWriter,l=n.newLayout().vec3f("position0").vec3f("position1"),d=n.newLayout().vec3f("position0").vec3f("position1").u16("componentIndex");e.extract=function(e){const t=f(e.data,e.skipDeduplicate,e.indices,e.indicesLength);return c.updateSettings(e.writerSettings),a.updateSettings(e.writerSettings),u.extractEdges(t,c,a)},e.extractComponentsEdgeLocationsLayout=d,e.extractEdgeInformation=f,e.extractEdgeLocationsLayout=l,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/meshUtils/deduplicate":function(){define(["exports","../../../core/mathUtils","../Indices"],function(e,t,r){"use strict";function n(e,t,r,n){for(let i=0;i<n;i++)if(e[t+i]!==e[r+i])return!1;return!0}function i(e,t,r,n,i){for(let s=0;s<i;s++)r[n+s]=e[t+s]}function s(e,t,r){let n=0;for(let i=0;i<r;i++)n=e[t+i]+n|0,n=n+(n<<11)+(n>>>2)|0;return n>>>0}let u=null;e.deduplicate=function(e,f,o){const c=Array.isArray(e),a=c?e.length/f:e.byteLength/(4*f),l=c?e:new Uint32Array(e,0,a*f),d=o?.minReduction??0,h=o?.originalIndices||null,p=h?h.length:0,y=o?.componentOffsets||null;let m=0;if(y)for(let e=0;e<y.length-1;e++){const t=y[e+1]-y[e];t>m&&(m=t)}else m=a;const g=Math.floor(1.1*m)+1;(null==u||u.length<2*g)&&(u=new Uint32Array(t.nextHighestPowerOfTwo(2*g)));for(let e=0;e<2*g;e++)u[e]=0;let B=0;const w=!!y&&!!h,V=w?p:a;let b=r.newIndexArray(a);const E=new Uint32Array(p),M=1.96;let T=0!==d?Math.ceil(4*M*M/(d*d)*d*(1-d)):V,A=1,S=y?y[1]:V;for(let e=0;e<V;e++){if(e===T){const t=1-B/e;if(t+M*Math.sqrt(t*(1-t)/e)<d)return null;T*=2}if(e===S){for(let e=0;e<2*g;e++)u[e]=0;if(h)for(let e=y[A-1];e<y[A];e++)E[e]=b[h[e]];S=y[++A]}const t=w?h[e]:e,r=t*f,i=s(l,r,f);let o=i%g,c=B;for(;0!==u[2*o+1];){if(u[2*o]===i){const e=u[2*o+1]-1;if(n(l,r,e*f,f)){c=b[e];break}}o++,o>=g&&(o-=g)}c===B&&(u[2*o]=i,u[2*o+1]=t+1,B++),b[t]=c}if(0!==d&&1-B/a<d)return null;if(w){for(let e=y[A-1];e<E.length;e++)E[e]=b[h[e]];b=r.compactMeshIndices(E)}const v=c?new Array(B):new Uint32Array(B*f);B=0;for(let e=0;e<V;e++)b[e]===B&&(i(l,(w?h[e]:e)*f,v,B*f,f),B++);if(h&&!w){const e=new Uint32Array(p);for(let t=0;t<e.length;t++)e[t]=b[h[t]];b=r.compactMeshIndices(e)}return{buffer:Array.isArray(v)?v:v.buffer,indices:b,uniqueCount:B}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/Indices":function(){define(["exports","../../core/typedArrayUtil"],function(e,t){"use strict";function r(e,r){if(Array.isArray(e)){if(e.length<t.nativeArrayMaxSize)return e}else if(e.length<t.nativeArrayMaxSize)return Array.from(e);let n=!0,i=!0;return e.some((e,t)=>(n=n&&0===e,i=i&&e===t,!n&&!i)),n?c(e.length):i?u(e.length):t.isTypedArray(e)&&e.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT?e:function(e,r){for(const n of e){if(n>=65536)return t.isTypedArray(e)?e:new Uint32Array(e);n>=256&&(r=!1)}return r?new Uint8Array(e):new Uint16Array(e)}(e,!r)}let n=f(131072);const i=[0],s=(()=>{const e=new Uint16Array(65536);for(let t=0;t<e.length;++t)e[t]=t;return e})();function u(e){return 1===e?i:e<t.nativeArrayMaxSize?Array.from(new Uint16Array(s.buffer,0,e)):e<s.length?new Uint16Array(s.buffer,0,e):(e>n.length&&(n=f(Math.max(2*n.length,e))),new Uint32Array(n.buffer,0,e))}function f(e){const t=new Uint32Array(e);for(let e=0;e<t.length;e++)t[e]=e;return t}let o=new Uint8Array(65536);function c(e){if(1===e)return i;if(e<t.nativeArrayMaxSize)return new Array(e).fill(0);if(e>o.length){const t=Math.max(2*o.length,e);o=new Uint8Array(t)}return new Uint8Array(o.buffer,0,e)}e.compactIndices=r,e.compactMeshIndices=function(e){return r(e,!0)},e.getContinuousIndexArray=u,e.getZeroIndexArray=c,e.newIndexArray=function(e){return e<=t.nativeArrayMaxSize?new Array(e):e<=65536?new Uint16Array(e):new Uint32Array(e)},e.newIntArray=function(e){return e<=t.nativeArrayMaxSize?new Array(e):new Uint32Array(e)},e.pruneIndexArrays=function(){n=f(131072),o=new Uint8Array(65536)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/meshProcessing":function(){define(["exports"],function(e){"use strict";e.computeNeighbors=function(e,t,r){const n=t/3,i=new Uint32Array(r+1),s=new Uint32Array(r+1),u=(e,t)=>{e<t?i[e+1]++:s[t+1]++};for(let t=0;t<n;t++){const r=e[3*t],n=e[3*t+1],i=e[3*t+2];u(r,n),u(n,i),u(i,r)}let f=0,o=0;for(let e=0;e<r;e++){const t=i[e+1],r=s[e+1];i[e+1]=f,s[e+1]=o,f+=t,o+=r}const c=new Uint32Array(6*n),a=i[r],l=(e,t,r)=>{if(e<t){const n=i[e+1]++;c[2*n]=t,c[2*n+1]=r}else{const n=s[t+1]++;c[2*a+2*n]=e,c[2*a+2*n+1]=r}};for(let t=0;t<n;t++){const r=e[3*t],n=e[3*t+1],i=e[3*t+2];l(r,n,t),l(n,i,t),l(i,r,t)}const d=(e,t)=>{const r=2*e,n=t-e;for(let e=1;e<n;e++){const t=c[r+2*e],n=c[r+2*e+1];let i=e-1;for(;i>=0&&c[r+2*i]>t;i--)c[r+2*i+2]=c[r+2*i],c[r+2*i+3]=c[r+2*i+1];c[r+2*i+2]=t,c[r+2*i+3]=n}};for(let e=0;e<r;e++)d(i[e],i[e+1]),d(a+s[e],a+s[e+1]);const h=new Int32Array(3*n),p=(t,r)=>t===e[3*r]?0:t===e[3*r+1]?1:t===e[3*r+2]?2:-1,y=(e,t)=>{const r=p(e,t);h[3*t+r]=-1},m=(e,t,r,n)=>{const i=p(e,t);h[3*t+i]=n;const s=p(r,n);h[3*n+s]=t};for(let e=0;e<r;e++){let t=i[e];const r=i[e+1];let n=s[e];const u=s[e+1];for(;t<r&&n<u;){const r=c[2*t],i=c[2*a+2*n];r===i?(m(e,c[2*t+1],i,c[2*a+2*n+1]),t++,n++):r<i?(y(e,c[2*t+1]),t++):(y(i,c[2*a+2*n+1]),n++)}for(;t<r;)y(e,c[2*t+1]),t++;for(;n<u;)y(c[2*a+2*n],c[2*a+2*n+1]),n++}return h},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/edgeRendering/edgeBufferWriters":function(){define(["exports","../../../../../core/RandomLCG","../../../../../chunks/vec32","../../../../../core/libs/gl-matrix-2/factories/vec3f64","../Normals","./bufferLayouts"],function(e,t,r,n,i,s){"use strict";class u{updateSettings(e){this.settings=e,this._edgeHashFunction=e.reducedPrecision?l:a}write(e,t,r){y.seed=this._edgeHashFunction(r);const n=y.getIntRange(0,255),i=y.getIntRange(0,this.settings.variants-1),s=y.getFloat();var u;const f=255*(.5*(u=-(1-Math.min(s/.7,1))+Math.max(0,s-.7)/(1-.7),Math.abs(u)**1.2*Math.sign(u))+.5);e.position0.setVec(t,r.position0),e.position1.setVec(t,r.position1),e.componentIndex.set(t,r.componentIndex),e.variantOffset.set(t,n),e.variantStroke.set(t,i),e.variantExtension.set(t,f)}}const f=new Float32Array(6),o=new Uint32Array(f.buffer),c=new Uint32Array(1);function a(e){return f[0]=e.position0[0],f[1]=e.position0[1],f[2]=e.position0[2],f[3]=e.position1[0],f[4]=e.position1[1],f[5]=e.position1[2],c[0]=31*(31*(31*(31*(31*(166811+o[0])+o[1])+o[2])+o[3])+o[4])+o[5],c[0]}function l(e){const t=f;t[0]=h(e.position0[0]),t[1]=h(e.position0[1]),t[2]=h(e.position0[2]),t[3]=h(e.position1[0]),t[4]=h(e.position1[1]),t[5]=h(e.position1[2]),c[0]=5381;for(let e=0;e<o.length;e++)c[0]=31*c[0]+o[e];return c[0]}const d=1e4;function h(e){return Math.round(e*d)/d}const p=n.create(),y=new t;e.RegularEdgeBufferWriter=class{constructor(){this._commonWriter=new u}updateSettings(e){this._commonWriter.updateSettings(e)}allocate(e){return s.RegularEdgeInstancesLayout.createBuffer(e)}write(e,t,n){this._commonWriter.write(e,t,n),r.add(p,n.faceNormal0,n.faceNormal1),r.normalize(p,p);const{typedBuffer:s,typedBufferStride:u}=e.normalCompressed;i.compressNormal(s,t,p[0],p[1],p[2],u)}},e.SilhouetteEdgeBufferWriter=class{constructor(){this._commonWriter=new u}updateSettings(e){this._commonWriter.updateSettings(e)}allocate(e){return s.SilhouetteEdgeInstancesLayout.createBuffer(e)}write(e,t,r){this._commonWriter.write(e,t,r);{const{typedBuffer:n,typedBufferStride:s}=e.normalCompressed;i.compressNormal(n,t,r.faceNormal0[0],r.faceNormal0[1],r.faceNormal0[2],s)}{const{typedBuffer:n,typedBufferStride:s}=e.normal2Compressed;i.compressNormal(n,t,r.faceNormal1[0],r.faceNormal1[1],r.faceNormal1[2],s)}}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Normals":function(){define(["exports","../../../../core/mathUtils","../../../../chunks/vec32","../../../../core/libs/gl-matrix-2/factories/vec3f64","../../../../geometry/support/FloatArray","../../../../geometry/support/ShortArray"],function(e,t,r,n,i,s){"use strict";function u(e,t,r,n,i,s=2){const u=1/(Math.abs(r)+Math.abs(n)+Math.abs(i)),f=r*u,c=n*u,a=i<=0?(f>=0?1:-1)*(1-Math.abs(c)):f,l=i<=0?(c>=0?1:-1)*(1-Math.abs(f)):c,d=t*s;e[d]=o(a),e[d+1]=o(l)}function f(e,t,n,i=2){const s=n*i,u=c(t[s]),f=c(t[s+1]),o=1-Math.abs(u)-Math.abs(f);return e[2]=o,o<0?(e[0]=(u>=0?1:-1)*(1-Math.abs(f)),e[1]=(f>=0?1:-1)*(1-Math.abs(u))):(e[0]=u,e[1]=f),r.normalize(e,e)}function o(e){return t.clamp(Math.round(32767*e),-32767,32767)}function c(e){return t.clamp(e/32767,-1,1)}e.compressAndTransformNormals=function(e,t){const i=e.length/3,s=new Int16Array(2*i);let f=0;const o=n.create();for(let n=0;n<i;++n)o[0]=e[f++],o[1]=e[f++],o[2]=e[f++],r.transformMat3(o,o,t),u(s,n,o[0],o[1],o[2]);return s},e.compressNormal=u,e.compressNormals=function(e){const t=e.length/3,r=s.newShortArray(2*t);let n=0;for(let i=0;i<t;++i)u(r,i,e[n++],e[n++],e[n++]);return r},e.decodeInt16=c,e.decompressNormal=f,e.decompressNormals=function(e,t=2){const r=e.length/t,s=i.newFloatArray(3*r),u=n.create();let o=0;for(let n=0;n<r;++n)f(u,e,n,t),s[o++]=u[0],s[o++]=u[1],s[o++]=u[2];return s},e.encodeInt16=o,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/FloatArray":function(){define(["exports","../../core/typedArrayUtil"],function(e,t){"use strict";e.compactFloatArray=function(e){return Array.isArray(e)?e.length<t.nativeArrayMaxSize?e:new Float32Array(e):e.length<t.nativeArrayMaxSize?Array.from(e):e},e.floatArrayFrom=function(e){return(Array.isArray(e)?e.length:e.byteLength/8)<=t.nativeArrayMaxSize?Array.from(e):new Float32Array(e)},e.floatSubArray=function(e,t,r){return Array.isArray(e)?e.slice(t,t+r):e.subarray(t,t+r)},e.newFloatArray=function(e,r=!1){return e<=t.nativeArrayMaxSize?r?new Array(e).fill(0):new Array(e):new Float32Array(e)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/ShortArray":function(){define(["exports","../../core/typedArrayUtil"],function(e,t){"use strict";e.compactShortArray=function(e){return Array.isArray(e)?e.length<t.nativeArrayMaxSize?e:new Int16Array(e):e.length<t.nativeArrayMaxSize?Array.from(e):e},e.newShortArray=function(e){return e<=t.nativeArrayMaxSize?new Array(e):new Int16Array(e)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"*noref":1}}),define(["../../../support/buffer/workerHelper","./bufferLayouts","./edgePreprocessing","./edgeProcessing"],function(e,t,r,n){"use strict";function i(e){return{data:t.EdgeInputBufferLayout.createView(e.dataBuffer),indices:"Uint32Array"===e.indicesType?new Uint32Array(e.indices):"Uint16Array"===e.indicesType?new Uint16Array(e.indices):e.indices,indicesLength:e.indicesLength,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}const s=new class{allocate(e){return n.extractEdgeLocationsLayout.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,r){e.position0.setVec(t,r.position0),e.position1.setVec(t,r.position1)}},u=new class{allocate(e){return n.extractComponentsEdgeLocationsLayout.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,r){e.position0.setVec(t,r.position0),e.position1.setVec(t,r.position1),e.componentIndex.set(t,r.componentIndex)}};return class{async extract(t){const r=i(t),s=n.extract(r),u=[r.data.buffer],f=function(t,r){return r.push(t.regular.lodInfo.lengths.buffer),r.push(t.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:e.packInterleavedBuffer(t.regular.instancesData,r),lodInfo:{lengths:t.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:e.packInterleavedBuffer(t.silhouette.instancesData,r),lodInfo:{lengths:t.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:t.averageEdgeLength}}(s,u);return{result:f,transferList:u}}async extractComponentsEdgeLocations(t){const s=i(t),f=n.extractEdgeInformation(s.data,s.skipDeduplicate,s.indices,s.indicesLength),o=r.extractEdges(f,u),c=[];return{result:e.packInterleavedBuffer(o.regular.instancesData,c),transferList:c}}async extractEdgeLocations(t){const u=i(t),f=n.extractEdgeInformation(u.data,u.skipDeduplicate,u.indices,u.indicesLength),o=r.extractEdges(f,s),c=[];return{result:e.packInterleavedBuffer(o.regular.instancesData,c),transferList:c}}}});