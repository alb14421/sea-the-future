// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../chunks/vec32","../../../../core/libs/gl-matrix-2/factories/vec3f64","../../../../geometry/support/plane","../../../../geometry/support/ray","./GeometryUtil"],function(e,t,r,a,o,i){"use strict";const c=r.create();e.computeMinimumRotationTangentFrame=function(e,s){let n=null;const m=e.vertices.length,l=.99619469809,p=r.create(),f=r.create(),u=r.create(),g=r.create(),h=r.create(),v=r.create(),y=a.create();let R=e.vertices[0];t.copy(f,s),t.set(p,0,1,0),i.makeOrthoBasisDirUpFallback(R.vRight,f,p,p,u,f,l),t.copy(R.frame.up,f),t.copy(R.frame.right,u);const d=e.positions;let b=e.offset;n=R;for(let r=1;r<m;++r){R=e.vertices[r],t.add(h,R.vLeft,R.vRight);let s=t.length(h);s>0?(s=1/Math.sqrt(s),h[0]=h[0]*s,h[1]=h[1]*s,h[2]=h[2]*s):(h[0]=R.vRight[0],h[1]=R.vRight[1],h[2]=R.vRight[2]),v[0]=d[b]+n.frame.up[0],v[1]=d[b+1]+n.frame.up[1],v[2]=d[b+2]+n.frame.up[2],b+=3;const m=t.set(c,d[b],d[b+1],d[b+2]);a.fromPositionAndNormal(m,h,y),a.intersectRay(y,o.wrap(v,R.vLeft),g)?(g[0]-=d[b],g[1]-=d[b+1],g[2]-=d[b+2],t.normalize(f,g),t.cross(u,h,f),t.normalize(u,u)):i.makeOrthoBasisDirUpFallback(h,n.frame.up,n.frame.right,p,u,f,l),t.copy(R.frame.up,f),t.copy(R.frame.right,u),n=R}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});