// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../core/Error"],function(t,e){"use strict";const n=16;function r(t,e){return e=Math.floor(e/n)*n,Math.min(Math.round(t/n)*n,e)}function o({width:t,height:e},{maxPreferredTexturePixels:n,maxTextureSize:o}){const a=Math.max(t,e),i=t*e;if(a<=o&&i<=n)return[t,e];const u=Math.min(Math.sqrt(n/i),o/a);return[r(Math.round(t*u),o),r(Math.round(e*u),o)]}function a(t,n,r){if(t instanceof ImageData)return a(function(t){const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const r=n.getContext("2d");if(null==r)throw new e("texture:context-failed","Failed to create 2d context from HTMLCanvasElement");return r.putImageData(t,0,0),n}(t),n,r);const o=document.createElement("canvas");return o.width=n,o.height=r,o.getContext("2d").drawImage(t,0,0,o.width,o.height),o}t.applyTextureResizeModulo=r,t.applyTextureResizeModuloCeil=function(t,e){return e=Math.floor(e/n)*n,Math.min(Math.ceil(t/n)*n,e)},t.ensureImageMaxSize=function(t,e){const[n,r]=o(t,e);return t.width===n&&t.height===r?t:a(t,n,r)},t.ensureTextureSize=o,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});