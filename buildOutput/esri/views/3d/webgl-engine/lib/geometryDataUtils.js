// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../chunks/vec32","../../../../core/libs/gl-matrix-2/factories/vec3f64","../../../../geometry/support/triangle"],function(e,t,n,s){"use strict";const c=n.create(),a=n.create(),i=n.create(),r=n.create();e.computeAttachmentOriginLines=function(e,n,s){if(!e)return!1;t.set(s,0,0,0),t.set(r,0,0,0);let i=0,o=0;const{size:d,data:l,indices:u}=e,f=u.length-1,g=f+(n?2:0);for(let e=0;e<g;e+=2){const n=e<f?e+1:0,g=u[e<f?e:f]*d,m=u[n]*d;c[0]=l[g],c[1]=l[g+1],c[2]=l[g+2],a[0]=l[m],a[1]=l[m+1],a[2]=l[m+2],t.scale(c,t.add(c,c,a),.5);const h=t.dist(c,a);h>0?(t.add(s,s,t.scale(c,c,h)),i+=h):0===i&&(t.add(r,r,c),o++)}return 0!==i?(t.scale(s,s,1/i),!0):0!==o&&(t.scale(s,r,1/o),!0)},e.computeAttachmentOriginPoints=function(e,n){if(!e)return!1;const{size:s,data:c,indices:a}=e;t.set(n,0,0,0);let i=-1,r=0;for(let e=0;e<a.length;e++){const t=a[e]*s;i!==t&&(n[0]+=c[t],n[1]+=c[t+1],n[2]+=c[t+2],r++),i=t}return r>1&&t.scale(n,n,1/r),r>0},e.computeAttachmentOriginTriangles=function(e,n){if(!e)return!1;const{size:o,data:d,indices:l}=e;t.set(n,0,0,0),t.set(r,0,0,0);let u=0,f=0;for(let e=0;e<l.length-2;e+=3){const g=l[e]*o,m=l[e+1]*o,h=l[e+2]*o;t.set(c,d[g],d[g+1],d[g+2]),t.set(a,d[m],d[m+1],d[m+2]),t.set(i,d[h],d[h+1],d[h+2]);const p=s.areaPoints3d(c,a,i);p?(t.add(c,c,a),t.add(c,c,i),t.scale(c,c,1/3*p),t.add(n,n,c),u+=p):(t.add(r,r,c),t.add(r,r,a),t.add(r,r,i),f+=3)}return!(0===f&&0===u||(0!==u?(t.scale(n,n,1/u),0):0===f||(t.scale(n,r,1/f),0)))},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});