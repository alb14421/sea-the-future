// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../core/has","../../../../core/mathUtils","../../../../core/time"],function(i,e,s,t){"use strict";const l=t.Milliseconds(12e4),o=t.Milliseconds(1e4),n=t.Milliseconds(1e3),r=t.Milliseconds(1e3/30);i.AnimationTimeStep=class{constructor(){this._step=n,this._dilation=1,this._firstIdleTime=t.Milliseconds(0)}frame(i,d){if(d?0===this._firstIdleTime&&(this._firstIdleTime=t.Milliseconds(performance.now())):this._firstIdleTime=t.Milliseconds(0),e("disable-feature:high-quality-idle"))this._dilation=1;else{const i=d?performance.now()-this._firstIdleTime:0;if(i>=l+o)return this._step=t.Milliseconds(1/0),void(this._dilation=1);this._dilation=i>=l?10:1}const c=s.clamp(i/.5,n,r);this._step===1/0?this._step=t.Milliseconds(c):this._step=t.Milliseconds(.9*this._step+c*(1-.9))}get value(){return this._step}get timeDilation(){return this._dilation}clear(){this._step=this._firstIdleTime=t.Milliseconds(0)}},Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});