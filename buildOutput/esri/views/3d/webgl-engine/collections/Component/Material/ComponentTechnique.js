// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../../support/buffer/glUtil","../../../../support/buffer/InterleavedLayout","../SourceGeometry","../../../../../../chunks/ComponentShader.glsl","../../../core/shaderLibrary/ShaderOutput","../../../core/shaderTechnique/ReloadableShaderModule","../../../core/shaderTechnique/ShaderTechnique","../../../lib/OrderIndependentTransparency","../../../lib/StencilUtils","../../../../../webgl/renderState","../../../../../webgl/VertexAttributeLocations"],function(e,t,r,l,n,o,a,s,u,i,d,c,p){"use strict";class h extends u.ShaderTechnique{constructor(t,l){super(t,l,new s.ReloadableShaderModule(o.ComponentShader,()=>new Promise((t,r)=>e(["./shader/ComponentShader.glsl"],t,r))),p.fromLayouts([r.glLayout(n.createVertexBufferLayout(l)),f]))}initializePipeline(e){const{integratedMeshMode:t,output:r,blendingEnabled:l,cullFace:n,hasOccludees:o,hasPolygonOffset:s,oitPass:p,renderOccluded:h}=e,f=0!==t,g=0===p,b=2===p;return c.makePipelineState({blending:h?c.premultipliedAlpha:a.isColorOrColorEmission(r)&&l?i.blending(p):null,culling:c.cullingParams(n),depthTest:h?null:{func:i.oitDepthTest(p)},depthWrite:h||!g&&!b?null:c.defaultDepthWrite,drawBuffers:u.depthOnlyOutputBuffersOr(r,i.getDrawBuffers(p,r)),colorWrite:c.defaultColorWrite,stencilWrite:!h&&f||o?d.stencilWriteMaskOn:null,stencilTest:f?d.replaceBitWhenDepthTestPasses(1):o?d.stencilBaseAllZerosParams:null,polygonOffset:g||b?s?{factor:2,units:2}:null:i.OITPolygonOffset})}}const f=r.glLayout(l.newLayout().u16("componentIndex"));t.ComponentTechnique=h,t.indexGlLayout=f,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});