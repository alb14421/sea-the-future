// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["require","exports","../core/shaderLibrary/ShaderOutput","../core/shaderTechnique/ReloadableShaderModule","../core/shaderTechnique/ShaderTechnique","../lib/OrderIndependentTransparency","../lib/StencilUtils","../materials/DefaultLayouts","../../../../chunks/ImageMaterial.glsl","../../../webgl/renderState"],function(e,t,i,l,r,n,a,s,o,u){"use strict";class c extends r.ShaderTechnique{constructor(t,i){super(t,i,new l.ReloadableShaderModule(o.ImageMaterial,()=>new Promise((t,i)=>e(["./ImageMaterial.glsl"],t,i))),d(i).locations)}_getPipelineState(e,t){const{oitPass:l,output:r,hasOccludees:s,cullFace:o}=e,c=0===l;return u.makePipelineState({blending:i.isColorOrColorEmission(r)?c?u.premultipliedAlpha:n.oitBlending(l):null,culling:u.cullingParams(o),depthTest:{func:n.oitDepthTest(l)},depthWrite:n.depthWrite(e),drawBuffers:n.getDrawBuffers(l,r),colorWrite:u.defaultColorWrite,stencilWrite:s?a.stencilWriteMaskOn:null,stencilTest:s?t?a.stencilToolMaskBaseParams:a.stencilBaseAllZerosParams:null,polygonOffset:n.oitPolygonOffset(e)})}initializePipeline(e){return this._occludeePipeline=this._getPipelineState(e,!0),this._getPipelineState(e,!1)}getPipeline(e){return e?this._occludeePipeline:super.getPipeline()}}const p=new Map([["position",0],["uv0",2],["perspectiveDivide",3]]);function d(e){let t=s.PositionUvLayout;return e.perspectiveInterpolation&&(t=t.clone().f32("perspectiveDivide")),t}t.ImageMaterialTechnique=c,t.getLayout=d,t.vertexAttributeLocations=p,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});