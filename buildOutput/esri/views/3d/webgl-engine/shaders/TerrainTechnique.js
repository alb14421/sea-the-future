// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["require","exports","../../terrain/TerrainAttributes","../core/shaderTechnique/ReloadableShaderModule","../core/shaderTechnique/ShaderTechnique","../lib/StencilUtils","../../../../chunks/Terrain.glsl","../../../webgl/renderState"],function(e,i,t,l,r,n,u,a){"use strict";class s extends r.ShaderTechnique{constructor(i,r){super(i,r,new l.ReloadableShaderModule(u.Terrain,()=>new Promise((i,t)=>e(["./Terrain.glsl"],i,t))),t.layout.locations),this.type="TerrainTechnique",this.useStencil=!1}initializePipeline(e){return this._stencilPipelineState=this._createPipeline(e,!0),this._createPipeline(e,!1)}_createPipeline(e,i){const{renderOccluded:t,output:l}=e,u=e.backfaceCullingEnabled&&!t;return a.makePipelineState({blending:t?a.premultipliedAlpha:null,culling:u?a.backFaceCullingParams:null,depthTest:t?null:{func:513},depthWrite:t?null:a.defaultDepthWrite,colorWrite:a.defaultColorWrite,stencilTest:i?n.renderWhenBitIsNotSet(1):null,drawBuffers:r.depthOnlyOutputBuffersOr(l)})}getPipeline(){return this.useStencil?this._stencilPipelineState:super.getPipeline()}}i.TerrainTechnique=s,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});