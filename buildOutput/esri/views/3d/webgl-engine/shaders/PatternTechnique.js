// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["require","exports","../../support/buffer/InterleavedLayout","../core/shaderLibrary/ShaderOutput","../core/shaderTechnique/ReloadableShaderModule","../core/shaderTechnique/ShaderTechnique","../effects/geometry/olidUtils","../lib/OrderIndependentTransparency","../lib/StencilUtils","../../../../chunks/Pattern.glsl","../../../webgl/renderState"],function(e,t,l,r,n,i,o,s,a,u,c){"use strict";class d extends i.ShaderTechnique{constructor(t,l){super(t,l,new n.ReloadableShaderModule(u.Pattern,()=>new Promise((t,l)=>e(["./Pattern.glsl"],t,l))),f(l).locations)}_setPipelineState(e,t){const{oitPass:l,output:n,cullFace:o,draped:u,hasOccludees:d,polygonOffset:f}=e,h=0===l;return c.makePipelineState({blending:r.isColorOrColorEmission(n)?s.blending(l):null,culling:c.cullingParams(o),depthTest:u?null:{func:s.oitDepthTest(l)},depthWrite:s.depthWrite(e),drawBuffers:i.depthOnlyOutputBuffersOr(n,s.getDrawBuffers(l,n)),colorWrite:c.defaultColorWrite,stencilWrite:d?a.stencilWriteMaskOn:null,stencilTest:d?t?a.stencilToolMaskBaseParams:a.stencilBaseAllZerosParams:null,polygonOffset:h?f?p:null:s.oitPolygonOffset(e)})}initializePipeline(e){return this._occludeePipelineState=this._setPipelineState(e,!0),this._setPipelineState(e,!1)}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}const p={factor:1,units:1};function f(e){const t=l.newLayout().vec3f("position").vec4f("uvMapSpace");return e.draped||t.mat3f("boundingRect"),e.hasVVColor?t.f32("colorFeatureAttribute"):t.vec4u8("color"),o.olidEnabled()&&t.vec4u8("olidColor"),t.freeze()}t.PatternTechnique=d,t.getLayout=f,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});