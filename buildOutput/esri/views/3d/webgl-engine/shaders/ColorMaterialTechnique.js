// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../../core/libs/gl-matrix-2/factories/vec4f64","../../support/buffer/InterleavedLayout","../core/shaderLibrary/ShaderOutput","../core/shaderTechnique/ReloadableShaderModule","../core/shaderTechnique/ShaderTechnique","../effects/geometry/olidUtils","../lib/OrderIndependentTransparency","../lib/StencilUtils","../materials/VisualVariablePassParameters","../../../../chunks/ColorMaterial.glsl","../../../webgl/renderState"],function(e,t,r,l,i,a,s,o,n,u,c,d,p){"use strict";class f extends c.VisualVariablePassParameters{constructor(){super(...arguments),this.color=r.ZEROS}}class h extends s.ShaderTechnique{constructor(t,r){super(t,r,new a.ReloadableShaderModule(d.ColorMaterial,()=>new Promise((t,r)=>e(["./ColorMaterial.glsl"],t,r))),g(r).locations)}_createPipeline(e,t){const{oitPass:r,output:l,transparent:a,cullFace:o,draped:c,hasOccludees:d,polygonOffset:f}=e,h=0===r;return p.makePipelineState({blending:i.isColorOrColorEmission(l)&&a?n.blending(r):null,culling:p.cullingParams(o),depthTest:c?null:{func:n.oitDepthTest(r)},depthWrite:n.depthWrite(e),drawBuffers:s.depthOnlyOutputBuffersOr(l,n.getDrawBuffers(r,l)),colorWrite:p.defaultColorWrite,stencilWrite:d?u.stencilWriteMaskOn:null,stencilTest:d?t?u.stencilToolMaskBaseParams:u.stencilBaseAllZerosParams:null,polygonOffset:h?f?P:null:n.oitPolygonOffset(e)})}initializePipeline(e){return this._occludeePipelineState=this._createPipeline(e,!0),this._createPipeline(e,!1)}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}const P={factor:1,units:1};function g(e){const t=l.newLayout().vec3f("position");return o.olidEnabled()&&t.vec4u8("olidColor"),e.hasVVColor?t.f32("colorFeatureAttribute"):t.vec4u8("color"),t.freeze()}t.ColorMaterialPassParameters=f,t.ColorMaterialTechnique=h,t.getLayout=g,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});