// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../core/Cyclical","../../../../core/quantityFormatUtils","../../../../core/quantityUtils","../../../../geometry/coordinateFormatter","../../../../intl/number","../../../support/angularMeasurementUtils"],function(e,t,n,r,a,i,o){"use strict";function u(e){return i.formatNumber(e,{signDisplay:"exceptZero",...y(1)})}function l(e){return n.formatAngle(e,e.rotationType,1)}function c(e){const t=o.getDegreesGeographic(e);return i.formatNumber(t,{style:"unit",unitDisplay:"narrow",unit:"degree",signDisplay:t>0?"never":"exceptZero",...y(1)})}function s(e){return n.formatAngle(e,e.rotationType,1)}function g(e){return m(e,N)}function f(e){return m(e,x)}function m(e,t){return n.formatAngle(r.toUnit(e,"degrees"),"geographic",6,t,!1)}function d(e,t){const n=t.normalize(r.toUnit(e,"degrees").value,void 0,!1);return L(r.createScalar(n),6)}function p(e){return i.formatNumber(e.value,{style:"percent"})}function h(e){return i.formatNumber(e,{style:"percent",maximumFractionDigits:0})}function L(e,t){return i.formatNumber(e.value,y(t))}function y(e){return{minimumFractionDigits:e,maximumFractionDigits:e}}const v=e=>{let t=`[-+]?[0-9${e.thousands}]+`;return""!==e.decimal&&(t+=`${e.decimal}[0-9]+`),new RegExp(`^(${t}\\s*)${e.separator}(\\s*${t})$`,"i")},D=[];for(const e of[",","\\|","\\s+"])for(const t of["\\.",",",""])for(const n of["",",","\\."," ","\\s+"])e!==t&&e!==n&&t!==n&&D.push({separator:e,decimal:t,thousands:n,pattern:v({decimal:t,thousands:n,separator:e})});function b(e,t,n){let r=e.replaceAll(/[\s+]/g,"");return""!==n&&(r=r.replaceAll(n,"")),""!==t&&(r=r.replaceAll(t,".")),r}function A(e){return null!=e?r.createAngle(e,"degrees","geographic"):null}const N=new t.Cyclical(-180,180),x=new t.Cyclical(-90,90);e.cleanNumber=b,e.createGeographicCoordinate=A,e.formatLatitudeDecimalDegreesForInputMode=function(e){return d(e,x)},e.formatLongitudeDecimalDegreesForInputMode=function(e){return d(e,N)},e.getFormatters=function(e,t){return{angleRelative:u,direction:l,directionRelative:c,directionRelativeBilateral:s,latitudeDecimalDegrees:f,longitudeDecimalDegrees:g,area:(r,a)=>n.formatArea(e,r,a??t.area),length:(r,a,i)=>n.formatLength(e,r,a??t.length,i),lengthRelative:(r,a)=>n.formatRelativeLength(e,r,a??t.length),totalLength:(r,a)=>n.formatLength(e,r,a??t.length),verticalLength:(r,a)=>n.formatVerticalLength(e,r,a??t.verticalLength),verticalLengthRelative:(r,a)=>n.formatRelativeVerticalLength(e,r,a??t.verticalLength),percentage:p,scalar:L,scale:h}},e.makeQuantityParser=function({createQuantity:e,sanitize:t}){return(n,r)=>{if(null==n)return null;t&&(n=t(n));const a=i.parseNumber(n);return null==a?null:e(a,r)}},e.parseLatitude=function(e){return A(a.fromLatitude(e))},e.parseLatitudeLongitude=function(e){if(!e||null!=i.parseNumber(e)||!a.isLoaded())return null;const t=a.fromLatitudeLongitude(e),n=A(t?.latitude),r=A(t?.longitude);return null!=r&&null!=n?{latitude:n,longitude:r}:null},e.parseLongitude=function(e){return A(a.fromLongitude(e))},e.parseXY=function(e){for(const{decimal:t,thousands:n,pattern:a}of D){a.lastIndex=0;const o=e.match(a);if(!o)continue;const u=i.parseNumber(b(o[1],t,n)),l=i.parseNumber(b(o[2],t,n));if(null!=u&&null!=l)return{x:r.createScalar(u),y:r.createScalar(l)}}return null},e.sanitizeAngle=function(e){return e.replaceAll(/[*^~°º]/g,"")},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});