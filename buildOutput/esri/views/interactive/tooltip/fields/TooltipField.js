// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../chunks/tslib.es6","../../../../core/Accessor","../../../../core/uuid","../../../../core/accessorSupport/decorators/property","../../../../core/has","../../../../core/Logger","../../../../core/RandomLCG","../../../../core/accessorSupport/decorators/subclass"],function(t,o,e,l,i,r,p,s,a){"use strict";function c(t){return null!=t&&""===t.trim()}t.TooltipField=class extends e{constructor(t){super(t),this.actual=null,this.lockable=!0,this.id=l.generateUUID(),this.inputValue=null,this.readOnly=!1,this.suffix=null,this.visible=!0,this.invalid=!1,this.unlockOnVertexPlacement=!0}get committed(){return this.lockable?this._get("committed"):null}set committed(t){this.lockable&&this._set("committed",t)}get dirty(){return null!=this.inputValue}get locked(){return this.lockable&&null!=this.committed}onInput(t){this.inputValue=t,this.invalid=!1}onCommit(t,o,e){this.lockable?this._onCommitLockable(t,e):this._onCommitNonLockable(e),this.invalid&&"commit-and-exit"===t||e.onCommit(o,t)}_onCommitLockable(t,o){const{inputValue:e,locked:l}=this;l&&c(e)?this.unlock():("commit-and-exit"===t&&!l||null!=e)&&this._parseInputAndLock(o)}_onCommitNonLockable(t){const{inputValue:o}=this;c(o)?this.lockable?this.setActual(null):this.clearInputValue():null!=o&&this._parseInputAndSetActual(t)}applyValue(t){this.lockable?this.lock(t):this.setActual(t)}clearInputValue(){this.inputValue=null,this.invalid=!1}setActual(t){this.actual=t,this.clearInputValue()}lock(t){this.lockable&&(this.committed=t??this.actual,this.clearInputValue())}unlock(){this.lockable&&(this.committed=null,this.clearInputValue())}toggleLock(t){this.lockable&&(this.locked?this.unlock():this._parseInputAndLock(t))}getSuffix(t){const{suffix:o}=this;return"function"==typeof o?o(t):o}getFormattedValue(t){const{actual:o,committed:e,format:l}=this;return null!=e?l(e,t):null!=o?l(o,t):null}getRawDisplayValue(t){const{actual:o,committed:e,inputValue:l}=this;return null!=l?l:this.lockable&&null!=e?this.formatForInputMode(e,t):null!=o?this.formatForInputMode(o,t):null}_parseInputAndSetActual(t){const{inputValue:o}=this;if(null==o||c(o))return this.setActual(null);const e=this.parse(o,t);null!=e?this.setActual(e):this.invalid=!0}_parseInputAndLock(t){const{inputValue:o,actual:e}=this;if(c(o))return this.unlock();if(null==o)return this.lock(e);const l=this.parse(o,t);null!=l?this.lock(l):this.invalid=!0}},o.__decorate([i.property()],t.TooltipField.prototype,"actual",void 0),o.__decorate([i.property()],t.TooltipField.prototype,"committed",null),o.__decorate([i.property()],t.TooltipField.prototype,"dirty",null),o.__decorate([i.property()],t.TooltipField.prototype,"format",void 0),o.__decorate([i.property()],t.TooltipField.prototype,"formatForInputMode",void 0),o.__decorate([i.property()],t.TooltipField.prototype,"lockable",void 0),o.__decorate([i.property()],t.TooltipField.prototype,"locked",null),o.__decorate([i.property()],t.TooltipField.prototype,"id",void 0),o.__decorate([i.property()],t.TooltipField.prototype,"inputValue",void 0),o.__decorate([i.property()],t.TooltipField.prototype,"name",void 0),o.__decorate([i.property()],t.TooltipField.prototype,"parse",void 0),o.__decorate([i.property()],t.TooltipField.prototype,"readOnly",void 0),o.__decorate([i.property()],t.TooltipField.prototype,"suffix",void 0),o.__decorate([i.property()],t.TooltipField.prototype,"title",void 0),o.__decorate([i.property()],t.TooltipField.prototype,"visible",void 0),o.__decorate([i.property()],t.TooltipField.prototype,"invalid",void 0),o.__decorate([i.property()],t.TooltipField.prototype,"unlockOnVertexPlacement",void 0),t.TooltipField=o.__decorate([a.subclass("esri.views.interactive.tooltip.fields.TooltipField")],t.TooltipField),Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});