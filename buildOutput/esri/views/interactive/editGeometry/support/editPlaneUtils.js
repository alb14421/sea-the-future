// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../../core/libs/gl-matrix-2/math/vec2","../../../../chunks/vec32","../../../../core/libs/gl-matrix-2/factories/vec3f64","../../../../chunks/boundedPlane","../../../../geometry/support/vectorStacks","../operations/MoveVertex","../operations/RotateVertex","../operations/ScaleVertex","../operations/UpdateVertices"],function(e,t,n,o,i,r,a,s,c,d){"use strict";function u(e,r,u){if(e instanceof d.UpdateVertices){if(e.operation instanceof a.MoveVertex)return function(e,t,r=!1){const a=r?-1:1,s=o.fromValues(a*e.dx,a*e.dy,a*e.dz);n.add(t.origin,t.origin,s),i.updateUnboundedPlane(t)}(e.operation,r,u),!0;if(e.operation instanceof s.RotateVertex)return function(e,t,r=!1){const a=r?-e.angle:e.angle;n.rotateZ(t.basis1,t.basis1,o.ZEROS,a),n.rotateZ(t.basis2,t.basis2,o.ZEROS,a),i.updateUnboundedPlane(t)}(e.operation,r,u),!0;if(e.operation instanceof c.ScaleVertex)return function(e,o,r=!1){const a=r?1/e.factor1:e.factor1,s=r?1/e.factor2:e.factor2;n.scale(o.basis1,o.basis1,a),n.scale(o.basis2,o.basis2,s),t.projectAndScale(o.origin,o.origin,e.origin,e.axis1,a),t.projectAndScale(o.origin,o.origin,e.origin,e.axis2,s),i.updateUnboundedPlane(o)}(e.operation,r,u),!0}return!1}e.apply=function(e,t){return u(e,t,!1)},e.applyInverse=function(e,t){return u(e,t,!0)},e.calculateOrientedBounds=function(e,o,a,s,c=!1){s||(s=i.create());const d=t.set(r.sv2d.get(),e[1],-e[0]),u=t.set(r.sv2d.get(),Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),l=t.set(r.sv2d.get(),Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),p=r.sv2d.get(),b=o.allVerticesUnordered;b.forEach(({pos:n})=>{t.set(p,t.dot(e,n),t.dot(d,n)),t.min(u,u,p),t.max(l,l,p)});const f=1e-6,g=t.set(r.sv2d.get(),l[0]-u[0]<f?a/2:0,l[1]-u[1]<f?a/2:0);t.subtract(u,u,g),t.add(l,l,g);const I=c?b.reduce((e,t)=>e+(t.pos[2]??0),0)/b.length:0;return t.scale(s.basis1,e,(l[0]-u[0])/2),t.scale(s.basis2,d,(l[1]-u[1])/2),n.set(s.origin,u[0]*e[0]+u[1]*d[0],u[0]*e[1]+u[1]*d[1],I),n.add(s.origin,s.origin,s.basis1),n.add(s.origin,s.origin,s.basis2),i.updateUnboundedPlane(s),s},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});