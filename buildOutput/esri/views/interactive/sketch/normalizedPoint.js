// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/libs/gl-matrix-2/factories/vec3f64","../../../layers/graphics/dehydratedPoint","../../../support/elevationInfoUtils"],function(e,t,n,o){"use strict";function r(e=0,n=0,o=0){return t.fromValues(e,n,o)}function i(e,t,n,i=r()){return i[0]=e.x,i[1]=e.y,i[2]=e.z??0,null==t||("2d"===t.type?i[2]=0:i[2]=o.getConvertedElevation(t,e,n,o.absoluteHeightElevationInfo)??0),i}const l=n.makeDehydratedPoint(0,0,0,null);e.asVec2=function(e){return e},e.clone=function(e){const[t,n,o]=e;return e.length>3?[t,n,o,e[3]]:[t,n,o]},e.create=function(e,t,n){return r(e,t,n)},e.createWritable=r,e.fromAnyMapPoint=function(e,t,{coordinateHelper:n,elevationInfo:o},r){return e?i(n.vectorToDehydratedPoint(e,l),t,o,r):null},e.fromPoint=i,e.fromValues=function(e,n,o){return t.fromValues(e,n,o)},e.fromVec3=function(e){return e},e.isTarget=function(e){return Boolean(1&((e.length>3?e[3]:void 0)??0))},e.markAsTarget=function(e){return e[3]=1|((e.length>3?e[3]:void 0)??0),e},e.toDehydratedPoint=function(e,t,o){return o?(n.setDehydratedPoint(o,e[0],e[1],e[2],t),o):n.makeDehydratedPoint(e[0],e[1],e[2],t)},e.toElevationAlignedDehydratedPoint=function(e,t,{z:r,m:i},l,a){const{spatialReference:u,elevationInfo:c}=l;let f;if(null==r&&null==i)f=void 0;else if(null==t||"2d"===t.type)f=r??void 0;else{const n=o.absoluteHeightElevationInfo;f=o.getConvertedElevationFromVector(t,e,u,n,c)??0}const[d,s]=e;return a?n.setDehydratedPoint(a,d,s,f,u):a=n.makeDehydratedPoint(d,s,f,u),null!=i&&(a.m=i,a.hasM=!0),a},e.withSelfSnappingZ=function(e,t,n,i,l=r()){const[a,u]=e;return l[0]=a,l[1]=u,e.length>3&&(l[3]=e[3]??0),"3d"!==n?.type?(l[2]=t.value,l):(l[2]=o.getConvertedElevationFromXYZ(n,a,u,t.value,i,t.elevationInfo,o.absoluteHeightElevationInfo)??0,l)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});