// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./enums","./FramebufferObject","./renderState","./TextureDescriptor","./VertexArrayObject","./VertexAttributeLayouts","./VertexBuffer","./WebGLDriverTestModule"],function(e,t,r,i,o,n,s,a,l){"use strict";class c extends l.WebGLDriverTestModule{constructor(e){super(),this._rctx=e,e.gl&&e.capabilities.colorBufferFloat?.textureFloat&&e.capabilities.colorBufferFloat?.floatBlend&&(this._program=e.programCache.acquire("\n    precision highp float;\n    attribute vec2 position;\n\n    void main() {\n      gl_Position = vec4(position * 2.0 - 1.0, 0.0, 1.0);\n    }\n    ","\n     precision highp float;\n\n     void main() {\n      gl_FragColor = vec4(0.5, 0.5, 0.5, 0.5);\n     }\n    ",s.Pos2usLocations))}_test(e){const l=this._rctx,c=new o.TextureDescriptor(1);c.wrapMode=33071,c.dataType=t.PixelType.FLOAT,c.internalFormat=t.SizedPixelFormat.RGBA32F,c.samplingMode=9728;const u=new r.FramebufferObject(l,c),p=new a.VertexBuffer(l,s.Pos2us,new Uint16Array([0,0,1,0,0,1,1,1])),f=new n.VertexArrayObject(l,p);l.gl.getError(),l.useProgram(e);const d=l.getBoundFramebufferObject(),{x:b,y:g,width:m,height:T}=l.getViewport();l.bindFramebuffer(u),l.setViewport(0,0,1,1),l.bindVAO(f),l.drawArrays(t.PrimitiveType.TRIANGLE_STRIP,0,4);const x=i.makePipelineState({blending:i.destinationTimesOneMinusSourceAlpha});l.setPipelineState(x),l.drawArrays(t.PrimitiveType.TRIANGLE_STRIP,0,4);const A=l.gl.getError();return l.setViewport(b,g,m,T),l.bindFramebuffer(d),f.dispose(),u.dispose(),A!==l.gl.INVALID_OPERATION||(console.warn("Device claims support for WebGL extension EXT_float_blend but does not support it. Using fall back."),!1)}}e.FloatBufferBlend=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});