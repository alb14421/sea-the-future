// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
//>>built
define(["exports","./enums","./FramebufferObject","./Texture","./TextureDescriptor","./VertexArrayObject","./VertexAttributeLayouts","./VertexBuffer","./WebGLDriverTestModule"],function(e,r,t,i,n,o,s,u,a){"use strict";class c extends a.WebGLDriverTestModule{constructor(e){super(),this._rctx=e,this._program=e.programCache.acquire("\n    precision highp float;\n\n    attribute vec2 position;\n    varying vec2 v_uv;\n\n    void main() {\n      v_uv = position;\n      gl_Position = vec4(position * 2.0 - 1.0, 0.0, 1.0);\n    }\n    ","\n    precision highp float;\n\n    varying vec2 v_uv;\n\n    uniform sampler2D u_texture;\n\n    void main() {\n      gl_FragColor = texture2D(u_texture, v_uv);\n    }\n    ",s.Pos2usLocations)}dispose(){super.dispose()}_test(e){const a=this._rctx;if(!a.gl)return e.dispose(),!0;const c=new n.TextureDescriptor(1);c.wrapMode=33071,c.samplingMode=9728;const p=new t.FramebufferObject(a,c),l=new u.VertexBuffer(a,s.Pos2us,new Uint16Array([0,0,1,0,0,1,1,1])),g=new o.VertexArrayObject(a,l),v=new n.TextureDescriptor;v.samplingMode=9729,v.wrapMode=33071;const x=new i.Texture(a,v,d);a.useProgram(e),a.bindTexture(x,0),e.setUniform1i("u_texture",0);const f=a.getBoundFramebufferObject(),{x:m,y:w,width:h,height:b}=a.getViewport();a.bindFramebuffer(p),a.setViewport(0,0,1,1),a.setClearColor(0,0,0,0),a.setBlendingEnabled(!1),a.clear(16384),a.bindVAO(g),a.drawArrays(r.PrimitiveType.TRIANGLE_STRIP,0,4);const T=new Uint8Array(4);return p.readPixels(0,0,1,1,6408,r.PixelType.UNSIGNED_BYTE,T),g.dispose(),p.dispose(),x.dispose(),a.setViewport(m,w,h,b),a.bindFramebuffer(f),255!==T[0]}}const d=new Image;d.src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A",d.width=5,d.height=5,d.decode(),e.SVGPremultipliedAlpha=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});