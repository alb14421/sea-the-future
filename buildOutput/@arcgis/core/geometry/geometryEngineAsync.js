/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{open as t}from"../core/workers/workers.js";import n from"./Point.js";import{fromJSON as r}from"./support/jsonUtils.js";import"../core/Error.js";import"../core/lang.js";import"../chunks/Logger.js";import"../config.js";import"../chunks/object.js";import"../chunks/string.js";import"../core/promiseUtils.js";import"../chunks/handleUtils.js";import"../chunks/events.js";import"../chunks/maybe.js";import"../core/workers/Connection.js";import"../chunks/Queue.js";import"../chunks/tracking.js";import"../chunks/utils.js";import"../chunks/SimpleObservable.js";import"../chunks/ObservableBase.js";import"../core/workers/RemoteClient.js";import"../kernel.js";import"../core/urlUtils.js";import"../chunks/jsonUtils.js";import"../request.js";import"../chunks/MapUtils.js";import"../chunks/persistableUrlUtils.js";import"../intl.js";import"../chunks/date.js";import"../chunks/jsonMap.js";import"../chunks/locale.js";import"../chunks/constants.js";import"../chunks/datetime.js";import"../chunks/number.js";import"../chunks/substitute.js";import"../chunks/messages.js";import"../chunks/assets.js";import"../chunks/nextTick.js";import"../chunks/tslib.es6.js";import"../core/Accessor.js";import"../core/Handles.js";import"../core/accessorSupport/decorators/subclass.js";import"../chunks/Lifecycle.js";import"../chunks/metadata.js";import"../chunks/ensureType.js";import"../chunks/Warning.js";import"../chunks/get.js";import"../chunks/ObjectPool.js";import"../core/accessorSupport/decorators/property.js";import"../chunks/watch.js";import"../core/scheduling.js";import"../chunks/PooledArray.js";import"../chunks/SetUtils.js";import"../chunks/SimpleTrackingTarget.js";import"../core/accessorSupport/decorators/cast.js";import"../chunks/reader.js";import"../chunks/writer.js";import"./Geometry.js";import"../core/JSONSupport.js";import"./SpatialReference.js";import"../chunks/unitUtils.js";import"../chunks/pe.js";import"./support/webMercatorUtils.js";import"./Extent.js";import"./Multipoint.js";import"../chunks/zmUtils.js";import"./Polygon.js";import"../chunks/coordsUtils.js";import"../chunks/extentUtils.js";import"../chunks/boundsUtils.js";import"../chunks/aaBoundingRect.js";import"../chunks/mathUtils.js";import"./Polyline.js";function e(t){return Array.isArray(t)?t[0]?.spatialReference:t?.spatialReference}function s(t){return t?Array.isArray(t)?t.map(s):t.toJSON?t.toJSON():t:t}function o(t){return Array.isArray(t)?t.map(t=>r(t)):r(t)}let i;async function c(){return i||(i=t("geometryEngineWorker",{strategy:"distributed"})),i}async function a(t,n){return(await c()).invoke("executeGEOperation",{operation:t,parameters:s(n)})}async function u(t,n){const r=await c();return Promise.all(r.broadcast("executeGEOperation",{operation:t,parameters:s(n)}))}function p(t){return a("extendedSpatialReferenceInfo",[t])}async function m(t,n){return o(await a("clip",[e(t),t,n]))}async function l(t,n){return o(await a("cut",[e(t),t,n]))}function f(t,n){return a("contains",[e(t),t,n])}function j(t,n){return a("crosses",[e(t),t,n])}function h(t,n,r){return a("distance",[e(t),t,n,r])}function k(t,n){return a("equals",[e(t),t,n])}function y(t,n){return a("intersects",[e(t),t,n])}function w(t,n){return a("touches",[e(t),t,n])}function d(t,n){return a("within",[e(t),t,n])}function g(t,n){return a("disjoint",[e(t),t,n])}function S(t,n){return a("overlaps",[e(t),t,n])}function b(t,n,r){return a("relate",[e(t),t,n,r])}function U(t){return a("isSimple",[e(t),t])}async function O(t){return o(await a("simplify",[e(t),t]))}async function x(t,n=!1){return o(await a("convexHull",[e(t),t,n]))}async function R(t,n){return o(await a("difference",[e(t),t,n]))}async function A(t,n){return o(await a("symmetricDifference",[e(t),t,n]))}async function J(t,n){return o(await a("intersect",[e(t),t,n]))}async function N(t,n=null){const r=function(t,n){let r;return Array.isArray(t)?r=t:(r=[],r.push(t),null!=n&&r.push(n)),r}(t,n);return o(await a("union",[e(r),r]))}async function E(t,n,r,s,i,c){return o(await a("offset",[e(t),t,n,r,s,i,c]))}async function P(t,n,r,s=!1){const i=[e(t),t,n,r,s];return o(await a("buffer",i))}async function T(t,n,r,s,i,c){const u=[e(t),t,n,r,s,i,c];return o(await a("geodesicBuffer",u))}async function v(t,r,s=!0){const o=await a("nearestCoordinate",[e(t),t,r,s]);return{...o,coordinate:n.fromJSON(o.coordinate)}}async function L(t,r){const s=await a("nearestVertex",[e(t),t,r]);return{...s,coordinate:n.fromJSON(s.coordinate)}}async function D(t,r,s,o){return(await a("nearestVertices",[e(t),t,r,s,o])).map(t=>({...t,coordinate:n.fromJSON(t.coordinate)}))}function M(t){return"xmin"in t?t.center:"x"in t?t:t.extent?.center}async function z(t,n,r){if(null==t)throw new Y;const e=t.spatialReference;if(null==(r=r??M(t)))throw new Y;const s=t.constructor.fromJSON(await a("rotate",[e,t,n,r]));return s.spatialReference=e,s}async function B(t,n){if(null==t)throw new Y;const r=t.spatialReference;if(null==(n=n??M(t)))throw new Y;const e=t.constructor.fromJSON(await a("flipHorizontal",[r,t,n]));return e.spatialReference=r,e}async function C(t,n){if(null==t)throw new Y;const r=t.spatialReference;if(null==(n=n??M(t)))throw new Y;const e=t.constructor.fromJSON(await a("flipVertical",[r,t,n]));return e.spatialReference=r,e}async function G(t,n,r,s){return o(await a("generalize",[e(t),t,n,r,s]))}async function H(t,n,r){return o(await a("densify",[e(t),t,n,r]))}async function V(t,n,r,s=0){return o(await a("geodesicDensify",[e(t),t,n,r,s]))}function q(t,n){return a("planarArea",[e(t),t,n])}function I(t,n){return a("planarLength",[e(t),t,n])}function W(t,n,r){return a("geodesicArea",[e(t),t,n,r])}function Q(t,n,r){return a("geodesicLength",[e(t),t,n,r])}async function F(t,n){return o(await a("intersectLinesToPoints",[e(t),t,n]))}async function K(t,n){await u("changeDefaultSpatialReferenceTolerance",[t,n])}async function X(t){await u("clearDefaultSpatialReferenceTolerance",[t])}class Y extends Error{constructor(){super("Illegal Argument Exception")}}export{P as buffer,K as changeDefaultSpatialReferenceTolerance,X as clearDefaultSpatialReferenceTolerance,m as clip,f as contains,x as convexHull,j as crosses,l as cut,H as densify,R as difference,g as disjoint,h as distance,k as equals,p as extendedSpatialReferenceInfo,B as flipHorizontal,C as flipVertical,G as generalize,W as geodesicArea,T as geodesicBuffer,V as geodesicDensify,Q as geodesicLength,J as intersect,F as intersectLinesToPoints,y as intersects,U as isSimple,v as nearestCoordinate,L as nearestVertex,D as nearestVertices,E as offset,S as overlaps,q as planarArea,I as planarLength,b as relate,z as rotate,O as simplify,A as symmetricDifference,w as touches,N as union,d as within};
