/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{S as e}from"../../chunks/SimpleGeometryCursor.js";import{l as t,p as r,i as n}from"../../chunks/pe.js";import"../../chunks/assets.js";import"../../config.js";import"../../core/lang.js";import"../../chunks/object.js";import"../../request.js";import"../../kernel.js";import"../../core/urlUtils.js";import"../../core/Error.js";import"../../chunks/Logger.js";import"../../chunks/string.js";import"../../chunks/jsonUtils.js";import"../../chunks/MapUtils.js";import"../../core/promiseUtils.js";import"../../chunks/handleUtils.js";import"../../chunks/events.js";import"../../chunks/maybe.js";import"../../chunks/persistableUrlUtils.js";let o,s,i,a,c,m,p,u,l,f,h,j,k,g;function v(){return!!o&&n()}async function E(){if(!v()){const[e,n,i]=await Promise.all([import("../../chunks/OperatorShapePreservingProject.js"),import("../../chunks/Envelope.js").then(e=>e.a7).then(({Envelope:e})=>e),import("../../chunks/ProjectionTransformation.js").then(e=>e.bj).then(({injectPe:e})=>e),t()]);o=new e.OperatorShapePreservingProject,s=n,i(r)}}function S(){return!!a&&v()}async function T(){if(!S()){const[e,t,r,n]=await Promise.all([import("../../chunks/apiConverter.js"),import("../../chunks/ProjectionTransformation.js").then(e=>e.bl).then(({CompositeGeographicTransformationEditor:e})=>e),import("../../chunks/ProjectionTransformation.js").then(e=>e.bm).then(({create:e,createFromWKT:t})=>({create:e,createFromWKT:t})),import("../../chunks/ProjectionTransformation.js").then(e=>e.bn).then(({create:e,createEx:t,createFromAoi:r})=>({create:e,createEx:t,createFromAoi:r})),E()]);i=e.fromExtent,a=e.fromGeometry,c=e.fromSpatialReference,m=e.getSpatialReference,p=e.toGeometry,u=t,l=r.create,f=r.createFromWKT,h=n.createEx,j=n.createFromAoi,k=n.create,g=o.supportsCurves()}}function x(e,t,r={}){const n=w(m(e),t,r),s=r?.maxDeviationInSrTo??0,i=r?.minSegmentLengthInDegrees??0;return p(function(e,t,r,n){return o.execute(e,t,r,n,null)}(a(e),n,i,s),t)}function P(t,r,n={}){const i=t.map(a),c=w(m(t),r,n),u=n?.maxDeviationInSrTo??0;return function(t,r,n,i){let a=null,c=new s;for(const e of t)e.queryEnvelope(c),a?a.merge(c):(a=c,c=new s);const m=o.executeMany(new e(t),a,r,n,i,null);return Array.from(m)}(i,c,n?.minSegmentLengthInDegrees??0,u).map(e=>p(e,r))}function w(e,t,r={}){let n;const o=c(e),s=c(t);if(r?.geographicTransformation){const e=new u;e.setInputSpatialReference(o),e.setOutputSpatialReference(s);for(const t of r.geographicTransformation.steps){let r;r=t.wkid?l(t.wkid,t.isInverse):f(t.wkt,t.isInverse),e.add(r)}n=e.create()}else if(r?.areaOfInterestExtent)return j(o,s,i(r.areaOfInterestExtent).asEnvelope2D());return n?h(o,s,n):k(o,s)}export{x as execute,P as executeMany,S as isLoaded,T as load,g as supportsCurves};
