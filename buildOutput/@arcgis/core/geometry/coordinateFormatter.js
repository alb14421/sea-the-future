/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import r from"../core/Error.js";import{l as n,i as t,e,P as o,a as s,f as i,g as c,h as u,j as a}from"../chunks/pe.js";import l from"./Point.js";import p from"./SpatialReference.js";import{p as m}from"../chunks/number.js";import"../core/lang.js";import"../chunks/Logger.js";import"../config.js";import"../chunks/object.js";import"../chunks/string.js";import"../chunks/assets.js";import"../request.js";import"../kernel.js";import"../core/urlUtils.js";import"../chunks/jsonUtils.js";import"../chunks/MapUtils.js";import"../core/promiseUtils.js";import"../chunks/handleUtils.js";import"../chunks/events.js";import"../chunks/maybe.js";import"../chunks/persistableUrlUtils.js";import"../chunks/tslib.es6.js";import"../core/Accessor.js";import"../core/Handles.js";import"../core/accessorSupport/decorators/subclass.js";import"../chunks/Lifecycle.js";import"../chunks/metadata.js";import"../chunks/utils.js";import"../chunks/tracking.js";import"../chunks/ensureType.js";import"../chunks/Warning.js";import"../chunks/get.js";import"../chunks/ObjectPool.js";import"../chunks/ObservableBase.js";import"../core/accessorSupport/decorators/property.js";import"../chunks/watch.js";import"../core/scheduling.js";import"../chunks/nextTick.js";import"../chunks/PooledArray.js";import"../chunks/SetUtils.js";import"../chunks/SimpleTrackingTarget.js";import"../core/accessorSupport/decorators/cast.js";import"../chunks/reader.js";import"../chunks/writer.js";import"./Geometry.js";import"../core/JSONSupport.js";import"../chunks/unitUtils.js";import"../chunks/jsonMap.js";import"./support/webMercatorUtils.js";import"../chunks/locale.js";function d(){return t()}function j(){return a()}function k(){return n()}function f(r,n){const t=M(n),o=r.replaceAll(/[\u00B0\u00BA]/g,"^").replaceAll("′","'").replaceAll("″",'"'),s=[];return e.dmsToGeog(t,1,[o],s)?new l(s[0][0],s[0][1],n||p.WGS84):null}function h(r){return r&&d()?m(r)??f(`0° 0' 0" N | ${r}`)?.longitude??f(`0 N | ${r}`)?.longitude??null:null}function _(r){return r&&d()?m(r)??f(`${r} | 0° 0' 0" E`)?.latitude??f(`${r} | 0 E`)?.latitude??null:null}function g(r,n,t){const e=[],o=U(t);if(-1===o)return console.warn(`invalid conversionMode: ${t}`),null;const s=M(n);return u.mgrsToGeogExtended(s,1,[r],o,e)?new l(e[0][0],e[0][1],n||p.WGS84):null}function S(r,n){const t=[];!n&&/\(.+27/.test(r)&&(n=p.GCS_NAD_1927);const e=M(n);return i.usngToGeog(e,1,[r],t)?new l(t[0][0],t[0][1],n||p.WGS84):null}function w(r,n,t){const e=[],o=v(t);if(-1===o)return console.warn(`invalid conversionMode: ${t}`),null;const s=M(n);return c.utmToGeog(s,1,[r],o,e)?new l(e[0][0],e[0][1],n||p.WGS84):null}function E(r,n,t=0){const o=[[r.x,r.y]],s=[],i=M(r.spatialReference);let c=0;switch(n){case"dd":c=e.geogToDd(i,1,o,t,s);break;case"ddm":c=e.geogToDdm(i,1,o,t,s);break;case"dms":c=e.geogToDms(i,1,o,t,s);break;default:return console.warn(`invalid format: ${n}`),null}return c?s[0]:null}function T(r,n,t=0,e=!1){const o=[[r.x,r.y]],s=[],i=M(r.spatialReference);let c=U(n);return-1===c?(console.warn(`invalid conversionMode: ${n}`),null):(e&&(c|=u.PE_MGRS_ADD_SPACES),u.geogToMgrsExtended(i,1,o,t,!1,c,s)?s[0]:null)}function P(r,n=0,t=!1){const e=[[r.x,r.y]],o=[],s=M(r.spatialReference);return i.geogToUsng(s,1,e,n,!1,t,o)?o[0]:null}function G(r,n,t=!1){const e=[[r.x,r.y]],o=[],s=M(r.spatialReference);let i=v(n);return-1===i?(console.warn(`invalid conversionMode: ${n}`),null):(t&&(i|=c.PE_UTM_OPTS_ADD_SPACES),c.geogToUtm(s,1,e,i,o)?o[0]:null)}function M(n){if(n??=p.WGS84,n.wkid){const t=o.geogcs(n.wkid);if(!t)throw new r("coordinate-formatter:invalid-spatial-reference","wkid is not valid");return t}const t=n.wkt2??n.wkt;if(t){const n=o.fromString(s.PE_TYPE_GEOGCS,t);if(!n)throw new r("coordinate-formatter:invalid-spatial-reference","wkt is not valid");return n}throw new r("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing")}function U(r){switch(r){case"automatic":return u.PE_MGRS_STYLE_AUTO;case"new-180-in-zone-01":return u.PE_MGRS_STYLE_NEW|u.PE_MGRS_180_ZONE_1_PLUS;case"new-180-in-zone-60":return u.PE_MGRS_STYLE_NEW;case"old-180-in-zone-01":return u.PE_MGRS_STYLE_OLD|u.PE_MGRS_180_ZONE_1_PLUS;case"old-180-in-zone-60":return u.PE_MGRS_STYLE_OLD;default:return-1}}function v(r){switch(r){case"latitude-band-indicators":return c.PE_UTM_OPTS_NONE;case"north-south-indicators":return c.PE_UTM_OPTS_NS;default:return-1}}export{_ as fromLatitude,f as fromLatitudeLongitude,h as fromLongitude,g as fromMgrs,S as fromUsng,w as fromUtm,d as isLoaded,j as isSupported,k as load,E as toLatitudeLongitude,T as toMgrs,P as toUsng,G as toUtm};
