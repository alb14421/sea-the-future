"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[6379],{26809:(t,e,n)=>{n.d(e,{B:()=>P,C:()=>D,E:()=>f,F:()=>d,G:()=>l,H:()=>h,I:()=>A,a:()=>y,c:()=>w,d:()=>S,e:()=>a,g:()=>z,h:()=>u,i:()=>M,j:()=>c,k:()=>s,l:()=>o,m:()=>I,n:()=>b,o:()=>p,p:()=>m,q:()=>E,r:()=>L,s:()=>U,t:()=>j,u:()=>g,v:()=>v,w:()=>_,x:()=>x,y:()=>R,z:()=>Z});var i=n(2589),r=n(18527);function o(t){const e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function s(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function u(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function l(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function h(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function f(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function d(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function p(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function m(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function M(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function y(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t}function x(t,e){const n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(n*n+i*i+r*r)}function g(t,e){const n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return n*n+i*i+r*r}function _(t){const e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i}function v(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function A(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function b(t,e){const n=e[0],i=e[1],r=e[2];let o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function S(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function w(t,e,n){const i=e[0],r=e[1],o=e[2],a=n[0],s=n[1],c=n[2];return t[0]=r*c-o*s,t[1]=o*a-i*c,t[2]=i*s-r*a,t}function I(t,e,n,i){const r=e[0],o=e[1],a=e[2];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=a+i*(n[2]-a),t}function j(t,e,n){const i=e[0],r=e[1],o=e[2];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12],t[1]=n[1]*i+n[5]*r+n[9]*o+n[13],t[2]=n[2]*i+n[6]*r+n[10]*o+n[14],t}function E(t,e,n){const i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t}function L(t,e,n){const i=n[0],r=n[1],o=n[2],a=n[3],s=e[0],c=e[1],u=e[2],l=r*u-o*c,h=o*s-i*u,f=i*c-r*s,d=r*f-o*h,p=o*l-i*f,m=i*h-r*l,M=2*a;return t[0]=s+l*M+2*d,t[1]=c+h*M+2*p,t[2]=u+f*M+2*m,t}const q=(0,i.c)(),T=(0,i.c)();function z(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function R(t,e,n){const i=n[0]-e[0],r=n[1]-e[1],o=n[2]-e[2];let a=i*i+r*r+o*o;return a>0?(a=1/Math.sqrt(a),t[0]=i*a,t[1]=r*a,t[2]=o*a,t):(t[0]=0,t[1]=0,t[2]=0,t)}const U=u,N=l,O=h,Z=x,D=g,K=o,P=_;Object.freeze(Object.defineProperty({__proto__:null,abs:f,add:c,angle:function(t,e){b(q,t),b(T,e);const n=S(q,T);return n>1?0:n<-1?Math.PI:Math.acos(n)},bezier:function(t,e,n,i,r,o){const a=1-o,s=a*a,c=o*o,u=s*a,l=3*o*s,h=3*c*a,f=c*o;return t[0]=e[0]*u+n[0]*l+i[0]*h+r[0]*f,t[1]=e[1]*u+n[1]*l+i[1]*h+r[1]*f,t[2]=e[2]*u+n[2]*l+i[2]*h+r[2]*f,t},ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},clamp:function(t,e=0,n=1){return t[0]=Math.min(Math.max(t[0],e),n),t[1]=Math.min(Math.max(t[1],e),n),t[2]=Math.min(Math.max(t[2],e),n),t},copy:a,cross:w,crossAndNormalize:function(t,e,n){const i=e[0],r=e[1],o=e[2],a=n[0],s=n[1],c=n[2],u=r*c-o*s,l=o*a-i*c,h=i*s-r*a,f=Math.sqrt(u*u+l*l+h*h);return t[0]=u/f,t[1]=l/f,t[2]=h/f,t},direction:R,dist:Z,distance:x,div:O,divide:h,dot:S,equals:function(t,e){if(t===e)return!0;const n=t[0],i=t[1],o=t[2],a=e[0],s=e[1],c=e[2],u=(0,r.g)();return Math.abs(n-a)<=u*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=u*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-c)<=u*Math.max(1,Math.abs(o),Math.abs(c))},exactEquals:z,floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},hermite:function(t,e,n,i,r,o){const a=o*o,s=a*(2*o-3)+1,c=a*(o-2)+o,u=a*(o-1),l=a*(3-2*o);return t[0]=e[0]*s+n[0]*c+i[0]*u+r[0]*l,t[1]=e[1]*s+n[1]*c+i[1]*u+r[1]*l,t[2]=e[2]*s+n[2]*c+i[2]*u+r[2]*l,t},inverse:A,len:K,length:o,lerp:I,max:m,min:p,mul:N,multiply:l,negate:v,normalize:b,random:function(t,e=1){const n=r.R,i=2*n()*Math.PI,o=2*n()-1,a=Math.sqrt(1-o*o)*e;return t[0]=Math.cos(i)*a,t[1]=Math.sin(i)*a,t[2]=o*e,t},rotateX:function(t,e,n,i){const r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},rotateY:function(t,e,n,i){const r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},rotateZ:function(t,e,n,i){const r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},scale:M,scaleAndAdd:y,set:s,sign:d,sqrDist:D,sqrLen:P,squaredDistance:g,squaredLength:_,str:function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},sub:U,subtract:u,transformMat3:E,transformMat4:j,transformQuat:L},Symbol.toStringTag,{value:"Module"}))},29583:(t,e,n)=>{n.r(e),n.d(e,{default:()=>U});var i,r=n(32816),o=n(64604),a=n(6407),s=n(20266),c=n(16699),u=n(2810),l=n(80959),h=n(67321),f=n(29298),d=(n(32773),n(49877)),p=n(69421),m=n(77792),M=n(26809),y=n(2589),x=n(69763),g=n(44600),_=n(7969),v=n(47387),A=n(73597),b=n(67315),S=n(8368),w=n(4335),I=n(88730),j=n(38424),E=n(96807),L=n(65174),q=n(53671),T=n(2026),z=n(1178);n(90740),n(59121),n(29512),n(99063),n(84699),n(41390),n(85176),n(93181),n(13671),n(50704),n(40499),n(36555),n(58498),n(91047),n(35819),n(45371),n(61532),n(36172),n(99924),n(19247),n(36544),n(48064),n(76636),n(93049),n(51601),n(18527),n(93804),n(96221),n(18683),n(2160),n(56273),n(64752),n(48844),n(29208),n(46728),n(81272),n(80473),n(73509),n(28276),n(58194),n(4734),n(50214),n(59192),n(16345),n(54483),n(73067),n(23916),n(17745),n(44945),n(93074),n(82408),n(91658),n(70580),n(75191),n(24319),n(62092),n(43059),n(89935),n(49813),n(82454),n(88321),n(36533),n(84200),n(97827),n(18169),n(20762),n(48402),n(67504),n(21632),n(64102),n(17012),n(52731),n(98203),n(30011),n(54131),n(19869),n(53065),n(20804),n(63834),n(87357),n(19969),n(9207),n(64524),n(2763);let R=class extends((0,S.A)((0,I.q)((0,j.A)((0,E.j)((0,u.M)((0,w.d)((0,b.p)(A.A)))))))){static{i=this}readModifications(t,e,n){this._modificationsSource={url:(0,z.f)(t,n),context:n}}initialize(){this.addHandles((0,h.on)(()=>this.modifications,"after-changes",()=>this.modifications=this.modifications,h.OH))}constructor(t){super(t),this.operationalLayerType="IntegratedMesh3DTilesLayer",this.modifications=null,this._modificationsSource=null,this.spatialReference=new _.A({wkid:4326,vcsWkid:115700}),this.fullExtent=new g.A(-180,-90,180,90,this.spatialReference),this.url=null,this.type="integrated-mesh-3dtiles",this.path=null,this.minScale=0,this.maxScale=0,this.rootTilesetJSON=null}set elevationInfo(t){null!=t&&"absolute-height"!==t.mode||this._set("elevationInfo",t),this._validateElevationInfo(t)}_verifyArray(t,e){if(!Array.isArray(t)||t.length<e)return!1;for(const e of t)if("number"!=typeof e)return!1;return!0}static{this.googleIMFullExtent={xmin:-180,ymin:-90,zmin:-450,xmax:180,ymax:90,zmax:8850}}_initFullExtent(){const t=this.rootTilesetJSON?.root?.boundingVolume;if(!t)return;const{spatialReference:e}=this;if(t.box){const n=t?.box;if(n[3]>N&&n[7]>N&&n[11]>N)return void(this.fullExtent=new g.A({...i.googleIMFullExtent,spatialReference:e}))}const n=this.rootTilesetJSON?.root?.transform,r=(0,y.c)();if(t.region&&this._verifyArray(t.region,6)){const n=t.region,i=(0,c.r)(n[0]),r=(0,c.r)(n[1]),o=n[4],a=(0,c.r)(n[2]),s=(0,c.r)(n[3]),u=n[5];this.fullExtent=new g.A({xmin:i,ymin:r,zmin:o,xmax:a,ymax:s,zmax:u,spatialReference:e})}else if(t.sphere&&this._verifyArray(t.sphere,4)){const i=t.sphere,o=(0,y.f)(i[0],i[1],i[2]),a=i[3]/Math.sqrt(3),s=(0,y.c)();(0,M.h)(s,o,(0,y.f)(a,a,a));const c=(0,y.c)();if((0,M.j)(c,o,(0,y.f)(a,a,a)),n&&this._verifyArray(n,16)){const t=n;(0,M.t)(r,s,t),(0,M.e)(s,r),(0,M.t)(r,c,t),(0,M.e)(c,r)}(0,v.p)(s,x.W,0,s,_.A.WGS84,0),(0,v.p)(c,x.W,0,c,_.A.WGS84,0);const u=(0,y.c)(),l=(0,y.c)();(0,M.o)(u,s,c),(0,M.p)(l,s,c),this.fullExtent=new g.A({xmin:u[0],ymin:u[1],zmin:u[2],xmax:l[0],ymax:l[1],zmax:l[2],spatialReference:e})}else if(t.box&&this._verifyArray(t.box,12)){const i=t.box,r=(0,y.f)(i[0],i[1],i[2]),o=(0,y.f)(i[3],i[4],i[5]),a=(0,y.f)(i[6],i[7],i[8]),s=(0,y.f)(i[9],i[10],i[11]),c=[];for(let t=0;t<8;++t)c.push((0,y.c)());if((0,M.j)(c[0],r,o),(0,M.j)(c[0],c[0],a),(0,M.j)(c[0],c[0],s),(0,M.s)(c[1],r,o),(0,M.j)(c[1],c[1],a),(0,M.j)(c[1],c[1],s),(0,M.j)(c[2],r,o),(0,M.s)(c[2],c[2],a),(0,M.j)(c[2],c[2],s),(0,M.s)(c[3],r,o),(0,M.s)(c[3],c[3],a),(0,M.j)(c[3],c[3],s),(0,M.j)(c[4],r,o),(0,M.j)(c[4],c[4],a),(0,M.s)(c[4],c[4],s),(0,M.s)(c[5],r,o),(0,M.j)(c[5],c[5],a),(0,M.s)(c[5],c[5],s),(0,M.j)(c[6],r,o),(0,M.s)(c[6],c[6],a),(0,M.s)(c[6],c[6],s),(0,M.s)(c[7],r,o),(0,M.s)(c[7],c[7],a),(0,M.s)(c[7],c[7],s),n&&this._verifyArray(n,16)){const t=n;for(let e=0;e<8;++e)(0,M.t)(c[e],c[e],t)}const u=(0,y.f)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),l=(0,y.f)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(let t=0;t<8;++t)(0,v.p)(c[t],x.W,0,c[t],_.A.WGS84,0),(0,M.o)(l,l,c[t]),(0,M.p)(u,u,c[t]);this.fullExtent=new g.A({xmin:l[0],ymin:l[1],zmin:l[2],xmax:u[0],ymax:u[1],zmax:u[2],spatialReference:e})}}async load(t){return this.addResolvingPromise(this._doLoad(t)),this}async _doLoad(t){const e=null!=t?t.signal:null;try{await this.loadFromPortal({supportedTypes:["3DTiles Service"],validateItem:t=>{if(t.typeKeywords?.includes("IntegratedMesh"))return!0;throw new a.A("portal:invalid-layer-item-type","Invalid layer item, expected '${expectedType}' ",{expectedType:"3DTiles Service containing IntegratedMesh"})}},t)}catch(t){(0,l.QP)(t)}if(null!=this._modificationsSource){const e=await q.A.fromUrl(this._modificationsSource.url,this.spatialReference,t);this.setAtOrigin("modifications",e,this._modificationsSource.context.origin),this._modificationsSource=null}if(this.url){const t=(0,o.A)(this.url,{query:{...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{this.rootTilesetJSON=t.data,this._initFullExtent()},t=>{(0,l.QP)(t)});await t}}beforeSave(){if(null!=this._modificationsSource)return this.load().then(()=>{},()=>{})}async fetchAttributionData(){return this.load().then(()=>({}))}_validateElevationInfo(t){const e="Integrated mesh 3d tiles layers";(0,T.l)(s.L.getLogger(this),(0,T.e)(e,"absolute-height",t)),(0,T.l)(s.L.getLogger(this),(0,T.f)(e,t))}};(0,r._)([(0,f.MZ)({type:["IntegratedMesh3DTilesLayer"]})],R.prototype,"operationalLayerType",void 0),(0,r._)([(0,f.MZ)({type:q.A,clonable:t=>t.clone()}),(0,m.p)({origins:["web-scene","portal-item"],type:"resource",prefix:"modifications"})],R.prototype,"modifications",void 0),(0,r._)([(0,d.r)(["web-scene","portal-item"],"modifications")],R.prototype,"readModifications",null),(0,r._)([(0,f.MZ)({type:_.A})],R.prototype,"spatialReference",void 0),(0,r._)([(0,f.MZ)({type:g.A})],R.prototype,"fullExtent",void 0),(0,r._)([(0,f.MZ)(L.e)],R.prototype,"elevationInfo",null),(0,r._)([(0,f.MZ)({type:["show","hide"]})],R.prototype,"listMode",void 0),(0,r._)([(0,f.MZ)(L.u)],R.prototype,"url",void 0),(0,r._)([(0,f.MZ)({readOnly:!0})],R.prototype,"type",void 0),(0,r._)([(0,f.MZ)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],R.prototype,"path",void 0),(0,r._)([(0,f.MZ)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:!1,write:!1}}}})],R.prototype,"minScale",void 0),(0,r._)([(0,f.MZ)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:!1,write:!1}}}})],R.prototype,"maxScale",void 0),R=i=(0,r._)([(0,p.$)("esri.layers.IntegratedMesh3DTilesLayer")],R);const U=R,N=7645211},67315:(t,e,n)=>{n.d(e,{p:()=>a});var i=n(32816),r=n(29298),o=(n(32773),n(20266),n(69421));n(36544),n(85176),n(93181),n(13671),n(40499),n(6407),n(59121),n(90740),n(84699),n(50704),n(91047),n(48064);const a=t=>{const e=t;let n=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?this.portalItem?.apiKey:null}set apiKey(t){null!=t?this._override("apiKey",t):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,i._)([(0,r.MZ)({type:String})],n.prototype,"apiKey",null),n=(0,i._)([(0,o.$)("esri.layers.mixins.APIKeyMixin")],n),n}},73341:(t,e,n)=>{function i(t){return t&&"getAtOrigin"in t&&"originOf"in t}n.d(e,{i:()=>i})},93049:(t,e,n)=>{n.d(e,{a:()=>o,b:()=>a,g:()=>r,n:()=>s});const i="randomUUID"in crypto;function r(){if(i)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=e=>t[e].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function o(){return`{${r().toUpperCase()}}`}function a(){return`{${r()}}`}function s(t){const e=t.toUpperCase();return t.startsWith("{")?e:`{${e}}`}}}]);