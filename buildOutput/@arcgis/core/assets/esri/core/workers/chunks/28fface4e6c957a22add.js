"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[6918],{6918:(e,t,s)=>{s.r(t),s.d(t,{default:()=>E});var i=s(6407),n=s(77037),r=s(69763),o=s(83637),u=s(61155),a=s(9704),l=s(13141),d=s(2824),p=s(2232),c=s(53104),f=s(84698),y=s(79875),m=s(17872),h=s(30011),g=s(16345);s(32773),s(20266),s(90740),s(59121),s(84699),s(44600),s(32816),s(29298),s(36544),s(85176),s(93181),s(13671),s(40499),s(69421),s(50704),s(91047),s(48064),s(2160),s(99924),s(41390),s(36555),s(58498),s(35819),s(45371),s(61532),s(80959),s(19247),s(36172),s(49877),s(7969),s(56273),s(93804),s(96221),s(18683),s(64604),s(29512),s(99063),s(1178),s(64752),s(48844),s(29208),s(36533),s(84200),s(97827),s(18169),s(20762),s(48402),s(16699),s(67504),s(47239),s(22522),s(58003),s(33489),s(96153),s(3952),s(339),s(79281),s(13978),s(47368),s(3687),s(88321),s(44945),s(2589),s(47387),s(46728),s(21632),s(64102),s(59700),s(81272),s(42614),s(11721),s(11618),s(56764),s(34362),s(23787),s(22151),s(38896),s(26589),s(7011),s(133),s(54483),s(59192),s(70648),s(69310),s(31572),s(4734),s(50214),s(9943),s(91276),s(18527),s(62482),s(45476),s(71044),s(17745),s(43534),s(13226),s(47812),s(83463),s(346),s(78016),s(16641),s(88817),s(88663),s(29403),s(40672),s(52731),s(96587),s(79747),s(14509),s(14549),s(26171),s(85842),s(75169),s(67321),s(7078),s(33348),s(25018),s(58126);const b=r.w,I={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:r.w},F={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsQueryAttachmentOrderByFields:!1,supportsQueryBins:!0,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!0,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0,supportsQueryWithCacheHint:!0},queryBinsCapabilities:f.q};function S(e){return(0,n.fT)(e)?null!=e.z:!!e.hasZ}function T(e){return(0,n.fT)(e)?null!=e.m:!!e.hasM}class E{constructor(){this._queryEngine=null,this._nextObjectId=null}destroy(){this._queryEngine?.destroy(),this._queryEngine=this._createDefaultAttributes=null}async load(e){const t=[],{features:s}=e,n=this._inferLayerProperties(s,e.fields),r=e.fields||[],o=null!=e.hasM?e.hasM:!!n.hasM,a=null!=e.hasZ?e.hasZ:!!n.hasZ,f=!e.spatialReference&&!n.spatialReference,S=f?b:e.spatialReference||n.spatialReference,T=f?I:null,E=e.geometryType||n.geometryType,A=!E;let _=e.objectIdField||n.objectIdField,R=e.timeInfo;const w=new y.A(r);if(!A&&(f&&t.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),!E))throw new i.A("feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");if(!_)throw new i.A("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");if(n.objectIdField&&_!==n.objectIdField&&(t.push({name:"feature-layer:duplicated-oid-field",message:`Provided objectIdField "${_}" doesn't match the field name "${n.objectIdField}", found in the provided fields`}),_=n.objectIdField),_&&!n.objectIdField){const e=w.get(_);e?(_=e.name,e.type="esriFieldTypeOID",e.editable=!1,e.nullable=!1):r.unshift({alias:_,name:_,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(const e of r){if(null==e.name&&(e.name=e.alias),null==e.alias&&(e.alias=e.name),!e.name)throw new i.A("feature-layer:invalid-field-name","field name is missing",{field:e});if(e.name===_&&(e.type="esriFieldTypeOID"),!m.k.jsonValues.includes(e.type))throw new i.A("feature-layer:invalid-field-type",`invalid type for field "${e.name}"`,{field:e});null==e.length&&(e.length=(0,h._b)(e))}const q={};for(const e of r)if("esriFieldTypeOID"!==e.type&&"esriFieldTypeGlobalID"!==e.type){const t=(0,h.lD)(e);void 0!==t&&(q[e.name]=t)}if(R){if(R.startTimeField){const e=w.get(R.startTimeField);e?(R.startTimeField=e.name,e.type="esriFieldTypeDate"):R.startTimeField=null}if(R.endTimeField){const e=w.get(R.endTimeField);e?(R.endTimeField=e.name,e.type="esriFieldTypeDate"):R.endTimeField=null}if(R.trackIdField){const e=w.get(R.trackIdField);e?R.trackIdField=e.name:(R.trackIdField=null,t.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:R}}))}R.startTimeField||R.endTimeField||(t.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:R}}),R=null)}const x=w.dateFields.length?{timeZoneIANA:e.dateFieldsTimeZone??g.a}:null;this._createDefaultAttributes=(0,c.b)(q,_);const j={warnings:t,featureErrors:[],layerDefinition:{...F,drawingInfo:(0,c.c)(E),templates:(0,c.a)(q),extent:T,geometryType:E,objectIdField:_,fields:r,hasZ:a,hasM:o,timeInfo:R,dateFieldsTimeReference:x},assignedObjectIds:{}},C={type:"object-id",fieldName:_};if(this._queryEngine=new p.a({fieldsIndex:y.A.fromLayerJSON({fields:r,timeInfo:R,dateFieldsTimeReference:x}),geometryType:E,hasM:o,hasZ:a,featureIdInfo:C,spatialReference:S,featureStore:new l.F({geometryType:E,hasM:o,hasZ:a}),timeInfo:R}),!s?.length)return this._nextObjectId=u.i,j;const D=(0,u.f)(_,s);return this._nextObjectId=D+1,await(0,d.c)(s,S),this._loadInitialFeatures(j,s)}async applyEdits(e){const{spatialReference:t,geometryType:s}=this._queryEngine;return await Promise.all([(0,f.l)(t,s),(0,d.c)(e.adds,t),(0,d.c)(e.updates,t)]),this._applyEdits(e)}queryFeatures(e,t={}){return this._queryEngine.executeQuery(e,t.signal)}queryFeatureCount(e,t={}){return this._queryEngine.executeQueryForCount(e,t.signal)}queryObjectIds(e,t={}){return this._queryEngine.executeQueryForIds(e,t.signal)}queryExtent(e,t={}){return this._queryEngine.executeQueryForExtent(e,t.signal)}querySnapping(e,t={}){return(0,a.e)(this._queryEngine,e,t.signal)}queryAttributeBins(e,t={}){return this._queryEngine.executeAttributeBinsQuery(e,t.signal)}_inferLayerProperties(e,t){let s,i,r=null,o=null,u=null;for(const t of e){const e=t.geometry;if(null!=e&&(r||(r=(0,n.$B)(e)),o||(o=e.spatialReference),null==s&&(s=S(e)),null==i&&(i=T(e)),r&&o&&null!=s&&null!=i))break}if(t&&t.length){let e=null;t.some(t=>{const s="esriFieldTypeOID"===t.type,i=!t.type&&t.name&&"objectid"===t.name.toLowerCase();return e=t,s||i})&&(u=e.name)}return{geometryType:r,spatialReference:o,objectIdField:u,hasM:i,hasZ:s}}async _loadInitialFeatures(e,t){const{geometryType:s,hasM:i,hasZ:r,objectIdField:u,spatialReference:a,featureStore:l,fieldsIndex:p}=this._queryEngine,c=[],y={type:"object-id",fieldName:u};for(const i of t){if(null!=i.uid&&(e.assignedObjectIds[i.uid]=-1),i.geometry&&s!==(0,n.$B)(i.geometry)){e.featureErrors.push((0,f.a)("Incorrect geometry type."));continue}const t=this._createDefaultAttributes(),r=(0,f.m)(p,t,i.attributes,!0);r?e.featureErrors.push(r):(this._assignObjectId(t,i.attributes,!0),i.attributes=t,null!=i.uid&&(e.assignedObjectIds[i.uid]=i.attributes[u]),null!=i.geometry&&(i.geometry=(0,d.p)(i.geometry,i.geometry.spatialReference,a)),c.push(i))}l.addMany((0,o.d)([],c,s,r,i,y));const{fullExtent:m,timeExtent:h}=await this._queryEngine.fetchRecomputedExtents();if(e.layerDefinition.extent=m,h){const{start:t,end:s}=h;e.layerDefinition.timeInfo.timeExtent=[t,s]}return e}async _applyEdits(e){const{adds:t,updates:s,deletes:i}=e,n={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t?.length&&this._applyAddEdits(n,t),s?.length&&this._applyUpdateEdits(n,s),i?.length){for(const e of i)n.deleteResults.push((0,f.c)(e));this._queryEngine.featureStore.removeManyById(i)}const{fullExtent:r,timeExtent:o}=await this._queryEngine.fetchRecomputedExtents();return{extent:r,timeExtent:o,featureEditResults:n}}_applyAddEdits(e,t){const{addResults:s}=e,{geometryType:i,hasM:r,hasZ:u,objectIdField:a,spatialReference:l,featureStore:p,featureIdInfo:c,fieldsIndex:y}=this._queryEngine,m=[];for(const r of t){if(r.geometry&&i!==(0,n.$B)(r.geometry)){s.push((0,f.a)("Incorrect geometry type."));continue}const t=this._createDefaultAttributes(),o=(0,f.m)(y,t,r.attributes);if(o)s.push(o);else{if(this._assignObjectId(t,r.attributes),r.attributes=t,null!=r.uid){const t=r.attributes[a];e.uidToObjectId[r.uid]=t}if(null!=r.geometry){const e=r.geometry.spatialReference??l;r.geometry=(0,d.p)((0,f.s)(r.geometry,e),e,l)}m.push(r),s.push((0,f.c)(r.attributes[a]))}}p.addMany((0,o.d)([],m,i,u,r,c))}_applyUpdateEdits({updateResults:e},t){const{geometryType:s,hasM:i,hasZ:r,objectIdField:u,spatialReference:a,featureStore:l,fieldsIndex:p,featureIdInfo:c}=this._queryEngine;for(const y of t){const{attributes:t,geometry:m}=y,h=t?.[u];if(null==h){e.push((0,f.a)(`Identifier field ${u} missing`));continue}if(!l.has(h)){e.push((0,f.a)(`Feature with object id ${h} missing`));continue}const g=(0,o.e)(l.getFeature(h),s,r,i);if(null!=m){if(s!==(0,n.$B)(m)){e.push((0,f.a)("Incorrect geometry type."));continue}const t=m.spatialReference??a;g.geometry=(0,d.p)((0,f.s)(m,t),t,a)}if(t){const s=(0,f.m)(p,g.attributes,t);if(s){e.push(s);continue}}l.add((0,o.f)(g,s,r,i,c)),e.push((0,f.c)(h))}}_assignObjectId(e,t,s=!1){const i=this._queryEngine.objectIdField;s&&t&&isFinite(t[i])?e[i]=t[i]:e[i]=this._nextObjectId++}}},25018:(e,t,s)=>{s.d(t,{a:()=>o,b:()=>u,c:()=>a,d:()=>r,e:()=>l,f:()=>d,g:()=>p,h:()=>i,i:()=>n});const i=[252,146,31,255],n=[153,153,153,255],r={type:"esriSMS",style:"esriSMSCircle",size:6,color:i,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o={type:"esriSLS",style:"esriSLSSolid",width:.75,color:i},u={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},a={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},l={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},d={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},p={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},53104:(e,t,s)=>{s.d(t,{a:()=>p,b:()=>l,c:()=>o,d:()=>c});var i=s(32773),n=s(70648),r=s(25018);function o(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?r.d:"esriGeometryPolyline"===e?r.a:r.b}}}const u=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let a=1;function l(e,t){if((0,i.h)("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let s=`this${d(t)} = null;`;for(const t in e)s+=`this${d(t)} = ${JSON.stringify(e[t])};`;const i=new Function(`\n      return class AttributesClass$${a++} {\n        constructor() {\n          ${s};\n        }\n      }\n    `)();return()=>new i}catch(s){return()=>({[t]:null,...e})}}function d(e){return u.test(e)?`.${e}`:`["${e}"]`}function p(e={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,i.o8)(e)}}]}function c(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:n.a,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:n.q,editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},58126:(e,t,s)=>{function i(e){return null!=u(e)||null!=o(e)}function n(e){return a.test(e)}function r(e){return u(e)??o(e)}function o(e){const t=new Date(e);return function(e,t){if(Number.isNaN(e.getTime()))return!1;let s=!0;if(d&&/\d+\W*$/.test(t)){const e=t.match(/[a-zA-Z]{2,}/);if(e){let t=!1,i=0;for(;!t&&i<=e.length;)t=!l.test(e[i]),i++;s=!t}}return s}(t,e)?Number.isNaN(t.getTime())?null:t.getTime()-6e4*t.getTimezoneOffset():null}function u(e){const t=a.exec(e);if(!t?.groups)return null;const s=t.groups,i=+s.year,n=+s.month-1,r=+s.day,o=+(s.hours??"0"),u=+(s.minutes??"0"),l=+(s.seconds??"0");if(o>23)return null;if(u>59)return null;if(l>59)return null;const d=s.ms??"0",p=d?+d.padEnd(3,"0").slice(0,3):0;let c;if(s.isUTC||!s.offsetSign)c=Date.UTC(i,n,r,o,u,l,p);else{const e=+s.offsetHours,t=+s.offsetMinutes;c=6e4*("+"===s.offsetSign?-1:1)*(60*e+t)+Date.UTC(i,n,r,o,u,l,p)}return Number.isNaN(c)?null:c}s.d(t,{a:()=>i,i:()=>n,p:()=>r});const a=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,l=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,d=!Number.isNaN(new Date("technology 10").getTime())},61155:(e,t,s)=>{s.d(t,{f:()=>n,i:()=>i});const i=1;function n(e,t){let s=0;for(const i of t){const t=i.attributes?.[e];"number"==typeof t&&isFinite(t)&&(s=Math.max(s,t))}return s}},84698:(e,t,s)=>{s.d(t,{a:()=>a,c:()=>d,l:()=>h,m:()=>c,q:()=>g,s:()=>m});var i=s(58126),n=s(69763),r=s(30011);class o{constructor(e){this.description=e,this.code=null}}class u{constructor(e){this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error=new o(e)}}function a(e){return new u(e)}class l{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function d(e){return new l(e)}const p=new Set;function c(e,t,s,i=!1){p.clear();for(const n in s){const o=e.get(n);if(!o)continue;const u=f(o,s[n]);if(p.add(o.name),o&&(i||o.editable)){const e=(0,r.CJ)(o,u);if(e)return a((0,r.uo)(e,o,u));t[o.name]=u}}for(const t of e.requiredFields??[])if(!p.has(t.name))return a(`missing required field "${t.name}"`);return null}function f(e,t){let s=t;return(0,r.WA)(e)&&"string"==typeof t?s=parseFloat(t):(0,r.yM)(e)&&null!=t&&"string"!=typeof t?s=String(t):(0,r.vE)(e)&&"string"==typeof t&&(s=(0,i.p)(t)),(0,r.WX)(s)}let y;function m(e,t){if(!e||!(0,n.A)(t))return e;if("rings"in e||"paths"in e){if(null==y)throw new TypeError("geometry engine not loaded");return y.simplify(t,e)}return e}async function h(e,t){!(0,n.A)(e)||"esriGeometryPolygon"!==t&&"esriGeometryPolyline"!==t||await async function(){return null==y&&(y=await Promise.all([s.e(9257),s.e(1394)]).then(s.bind(s,61394)).then(e=>e.g)),y}()}const g={supportsAutoIntervalBin:!0,supportsFixedIntervalBin:!0,supportsFixedBoundariesBin:!0,supportsDateBin:!0,supportsStackBy:!0,supportsSplitBy:!0,supportsNormalization:!0,supportedStatisticTypes:["COUNT","SUM","AVG","VAR","STDDEV","MIN","MAX","PERCENTILE_CONT","PERCENTILE_DISC","CentroidAggregate","EnvelopeAggregate","ConvexHullAggregate"],supportedNormalizationTypes:["field","log","naturalLog","percentOfTotal","squareRoot"]}}}]);