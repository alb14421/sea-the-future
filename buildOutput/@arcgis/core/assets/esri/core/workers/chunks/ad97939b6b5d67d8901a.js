"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[7865],{7865:(e,t,n)=>{n.r(t),n.d(t,{OperatorGeodeticArea:()=>C});var i=n(23160),s=n(6550),a=n(82604),_=n(43802),r=n(61846),h=n(32816),o=n(94981),m=n(83557);n(88010),n(13281),n(33534),n(87725);class l{constructor(e,t,n,s,a=100){this.m_startPt=e.clone(),this.m_endPt=t.clone(),this.m_cE2=s,this.m_cE=Math.sqrt(this.m_cE2),this.m_c1By2e=1/(2*this.m_cE),this.m_cRpu=n.getGCS().getUnit().getUnitToBaseFactor(),this.isPcs=2===n.getCoordinateSystemType(),this.PEProjcs=n.getPECoordSys(),this.m_points=(0,i.r)(2*a,Number.NaN)}setSegmentEndPoints(e,t){this.m_startPt.assign(e),this.m_endPt.assign(t)}makeFunctor(){return e=>{const t=[0,0];t[0]=this.m_startPt.x*(1-e)+this.m_endPt.x*e,t[1]=this.m_startPt.y*(1-e)+this.m_endPt.y*e,this.isPcs&&s.J.projToGeogCenter(this.PEProjcs,1,t,0);const n=Math.sin(t[1]*this.m_cRpu);return 0===this.m_cE2?n:-Math.log((1-this.m_cE*n)/(1+this.m_cE*n))*this.m_c1By2e+n/(1-this.m_cE2*n*n)}}}function p(e,t,n,i,_){const r=(new s.f).execute(e,t,0,0,_);let h;h=i?(new s.G).execute(r,i,_):r;const o=1===n.getUnit().getUnitToBaseFactor()?Math.PI/180:1,m=new a.Envelope2D;h.queryEnvelope(m);const l=new a.Envelope2D,p=new a.Envelope2D,c=new a.Envelope2D;l.setCoords({xmin:m.xmin,ymin:75*o,xmax:m.xmax,ymax:90*o}),p.setCoords({xmin:m.xmin,ymin:-60*o,xmax:m.xmax,ymax:75*o}),c.setCoords({xmin:m.xmin,ymin:-90*o,xmax:m.xmax,ymax:-60*o}),l.inflateCoords(.01*l.width(),0),p.inflateCoords(.01*p.width(),0),c.inflateCoords(.01*c.width(),0);let g=0;return g+=u(h,l,n,_),g+=u(h,p,n,_),g+=u(h,c,n,_),g}function u(e,t,n,_){const r=(new s.K).execute(e,t,n,_);if(null!==r&&!r.isEmpty()){const e=new a.Envelope2D;r.queryEnvelope(e);const{first:t,second:h}=function(e,t){const n=function(e,t){const n=e.getUnit().getUnitToBaseFactor(),a=t.getCenter();a.scale(180*n/Math.PI);const _=new i.P;_.x=0,_.y=0;let r=0;if(0===r){a.y>45?(_.y=i.B,r=0):a.y<-45?(_.y=-i.B,r=1):a.x>=45&&a.x<135?(_.x=i.B,r=2):a.x>=135||a.x<-135?(_.x=i.B,r=3):a.x<-45&&a.x>=-135?(_.x=-i.B,r=4):(_.x=0,r=5);const e=n*Math.sqrt((0,i.c)(t.xmin-t.xmax)+(0,i.c)(t.ymin-t.ymax)),s=_.clone(),h=t.getCenter();if(h.scale(n),r<2&&(s.x=h.x),i.P.distance(s,h)+.5*e>i.B)return null}const h=c[r];if(null!==h&&h.getGCS().equalHorizontal(e))return h;const o=e.getText(),m=_.x,l=_.y;let p=0,u=-1;6!==r?u=s.ai.PE_PRJ_LAMBERT_AZIMUTHAL_EQAREA:((0,i.b)(!1),p=0,u=s.ai.PE_PRJ_CYLINDRICAL_EQAREA);const g=(0,s.aE)("EqualAreaPCS");let d;u===s.ai.PE_PRJ_LAMBERT_AZIMUTHAL_EQAREA?d=`PROJCS["${g}",${o},PROJECTION["Lambert_Azimuthal_Equal_Area"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",${m}],PARAMETER["Latitude_of_Origin",${l}],UNIT["Meter",1.0]]`:u===s.ai.PE_PRJ_CYLINDRICAL_EQAREA?d=`PROJCS["${g}",${o},PROJECTION["Cylindrical_Equal_Area"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",${m}],PARAMETER["Standard_Parallel_1",${p}],PARAMETER["Latitude_of_Origin",${l}],UNIT["Meter",1.0]]`:(0,i.p)("getEqualAreaPcsFixed");const E=(0,s.a)(d);return c[r]&&c[r].destroy(),c[r]=E,E}(e,t);if(null!==n)return(0,i.D)(n,!1);const a=e.getText(),_=e.getUnit().getUnitToBaseFactor(),r=(t.xmin+t.width()/2)*_,h=(t.ymin+t.height()/2)*_;let o=0,m=0,l=-1;t.ymin*_>=75*Math.PI/180||t.ymax*_<=-60*Math.PI/180?l=s.ai.PE_PRJ_LAMBERT_AZIMUTHAL_EQAREA:t.ymin>0||t.ymax<0?(o=(t.ymin+1/3*t.height())*_,m=(t.ymin+2/3*t.height())*_,l=s.ai.PE_PRJ_ALBERS):(o=(t.ymin+2/3*t.height())*_,l=s.ai.PE_PRJ_CYLINDRICAL_EQAREA);const p=(0,s.aE)("EqualAreaPCS");let u;return l===s.ai.PE_PRJ_LAMBERT_AZIMUTHAL_EQAREA?u=`PROJCS["${p}",${a},PROJECTION["Lambert_Azimuthal_Equal_Area"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",${r}],PARAMETER["Latitude_of_Origin",${h}],UNIT["Meter",1.0]]`:l===s.ai.PE_PRJ_ALBERS?u=`PROJCS["${p}",${a},PROJECTION["Albers"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",${r}],PARAMETER["Standard_Parallel_1",${o}],PARAMETER["Standard_Parallel_2",${m}],PARAMETER["Latitude_of_Origin",${h}],UNIT["Meter",1.0]]`:l===s.ai.PE_PRJ_CYLINDRICAL_EQAREA?u=`PROJCS["${p}",${a},PROJECTION["Cylindrical_Equal_Area"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",${r}],PARAMETER["Standard_Parallel_1",${o}],PARAMETER["Latitude_of_Origin",${h}],UNIT["Meter",1.0]]`:(0,i.p)("getEqualAreaPCSInstance"),(0,i.D)((0,s.a)(u),!0)}(n,e),o=(0,s.N)(n,t,null),m=(new s.G).execute(r,o,_).calculateArea2D();return h&&t.destroy(),m}return 0}const c=[null,null,null,null,null,null,null];class g{getOperatorType(){return 10314}supportsCurves(){return!0}accelerateGeometry(e,t,n){return!1}canAccelerateGeometry(e){return!1}execute(e,t,n){if(0===t.getCoordinateSystemType()&&(0,i.a)(""),e.isEmpty()||e.getDimension()<2)return 0;if((0,i.v)(e),e.getGeometryType()===i.G.enumEnvelope){const i=new s.P;return i.addEnvelope(e,!1),this.execute(i,t,n)}let h=e;e.getDescription().getAttributeCount()>1&&(h=e.clone(),h.dropAllAttributes());const o=(new s.f).execute(h,0,t.getTolerance(0),0,n);let m=null;const u=t.getGCS();u!==t&&(m=(0,s.N)(t,u));let c=(new s.d).execute(o,t,!1,n);return c.isEmpty()?0:(c===e&&(c=e.clone()),t.isPannable()?function(e,t,n){const r=new a.Envelope2D;e.queryEnvelope(r);const h=(0,_.c)(t,r,!0).total(),o=t.getPannableExtent();o.xmin=r.xmin-10*h,o.xmax=r.xmax+10*h;const m=(new s.K).execute(e,o,t,n).getImpl().querySegmentIterator();m.stripAttributes();const p=(0,s.y)();t.querySpheroidData(p);const u=p.e2,c=0===u?2:1,g=new i.P(0,0),d=new i.P(0,0),E=new i.K(0),P=new l(g,d,t,u,100);for(;m.nextPath();)for(;m.hasNextSegment();){const e=m.nextSegment();g.assign(e.getStartXY()),d.assign(e.getEndXY()),P.setSegmentEndPoints(g,d);const t=(0,s.aD)(6,0,1,1e-12,1e-15,P.makeFunctor());E.pe((d.x-g.x)*t)}const f=p.majorSemiAxis;return c*f*f*(1-u)*Math.PI*E.getResult()/t.getPannableExtent().width()}(c,t,n):function(e,t,n,s,a){const _=function(e,t,n){const s=e.calculateLength2D(),a=(new r.O).execute(e,t,n)/25e3,_=s/e.getSegmentCount()*2;let h=Math.min(_,s/a);return 0===h&&(h=1),(0,i.D)(h,s/h)}(e,t,a);let h=p(e,_.first,n,s,a),o=1,m=0,l=0;do{if(o++,_.first*=.5,_.first<50*t.getTolerance(0))return h;_.second*=2,l=p(e,_.first,n,s,a),m=Math.abs(l-h),h=l}while(Math.abs(h)>1&&m>1e-8*Math.abs(h)&&(_.second<65e3&&o<8||o<4));return l}(c,t,u,m,n))}}function d(){return{m_p_PCS:new i.P,m_factor:Number.NaN,setValues:E,assign:P}}function E(e,t){this.m_factor=e,this.m_p_PCS.assign(t)}function P(e){this.m_factor=e.m_factor,this.m_p_PCS.assign(e.m_p_PCS)}class f{constructor(e,t,n,s){this.m_ptStart=new _.d,this.m_ptEnd=new _.d,this.m_ptStart.assign(t),this.m_ptEnd.assign(n),this.m_deltaX=this.m_ptEnd.x-this.m_ptStart.x,this.m_deltaY=this.m_ptEnd.y-this.m_ptStart.y,this.m_e=Math.sqrt(e),this.m_e2=e,this.m_c1MinusE2=1-e;const a=Math.sin(s);let r;r=0===this.m_e2?2*a:a*((0,i.R)(this.m_e*a)+1/(1-this.m_e2*a*a)),this.m_baseA=r}setSegmentEndPoints(e,t){this.m_ptStart.assign(e),this.m_ptEnd.assign(t),this.m_deltaX=this.m_ptEnd.x-this.m_ptStart.x,this.m_deltaY=this.m_ptEnd.y-this.m_ptStart.y}makeFunctor(){return e=>{const t=1-e,n=t*this.m_ptStart.x+e*this.m_ptEnd.x,s=t*this.m_ptStart.y+e*this.m_ptEnd.y,a=t*this.m_ptStart.z+e*this.m_ptEnd.z,_=n*n+s*s,r=a/Math.sqrt(a*a+this.m_c1MinusE2*this.m_c1MinusE2*_);let h;return h=0===this.m_e2?2*r:r*((0,i.R)(this.m_e*r)+1/(1-this.m_e2*r*r)),(this.m_deltaY*n-this.m_deltaX*s)/_*(h-this.m_baseA)}}}function S(){return{sin_phi:Number.NaN,one_p_sin_phi:Number.NaN,one_m_sin_phi:Number.NaN,one_m_e_2_sin_2_phi:Number.NaN,sin_half_phi_pf:Number.NaN,sin_half_phi_pz:Number.NaN,sin_half_asin_e_sin_phi_pf:Number.NaN,sin_half_asin_e_sin_phi_pz:Number.NaN,atanh_sin_phi:Number.NaN,atanh_esin_phi:Number.NaN,make_negative:!1,initialize:y,changeSign:x,assign:A,clone:R}}function y(e,t,n,i){const s=.5*e;this.sin_phi=Math.sin(e);const a=t*this.sin_phi,_=.5*Math.asin(a);this.one_p_sin_phi=1+this.sin_phi,this.one_m_sin_phi=1-this.sin_phi,this.one_m_e_2_sin_2_phi=(1+a)*(1-a),this.sin_half_phi_pf=Math.sin(s+n),this.sin_half_phi_pz=Math.sin(s+i),this.sin_half_asin_e_sin_phi_pf=Math.sin(_+n),this.sin_half_asin_e_sin_phi_pz=Math.sin(_+i),this.atanh_sin_phi=Math.log(this.sin_half_phi_pf/this.sin_half_phi_pz),this.atanh_esin_phi=Math.log(this.sin_half_asin_e_sin_phi_pf/this.sin_half_asin_e_sin_phi_pz)}function x(){this.sin_phi=-this.sin_phi;let e=this.one_p_sin_phi;this.one_p_sin_phi=this.one_m_sin_phi,this.one_m_sin_phi=e,e=this.sin_half_phi_pf,this.sin_half_phi_pf=this.sin_half_phi_pz,this.sin_half_phi_pz=e,e=this.sin_half_asin_e_sin_phi_pf,this.sin_half_asin_e_sin_phi_pf=this.sin_half_asin_e_sin_phi_pz,this.sin_half_asin_e_sin_phi_pz=e,this.atanh_sin_phi=-this.atanh_sin_phi,this.atanh_esin_phi=-this.atanh_esin_phi}function A(e){this.sin_phi=e.sin_phi,this.one_p_sin_phi=e.one_p_sin_phi,this.one_m_sin_phi=e.one_m_sin_phi,this.one_m_e_2_sin_2_phi=e.one_m_e_2_sin_2_phi,this.sin_half_phi_pf=e.sin_half_phi_pf,this.sin_half_phi_pz=e.sin_half_phi_pz,this.sin_half_asin_e_sin_phi_pf=e.sin_half_asin_e_sin_phi_pf,this.sin_half_asin_e_sin_phi_pz=e.sin_half_asin_e_sin_phi_pz,this.atanh_sin_phi=e.atanh_sin_phi,this.atanh_esin_phi=e.atanh_esin_phi,this.make_negative=e.make_negative}function R(){return{...this}}class T{constructor(e,t,n){this.m_transformPCS2GCS=null,this.m_scaleToRadians=new o.T,this.m_scaleToDegrees=new o.T,this.m_progressTracker=n,(0,i.b)(4!==t),this.m_curveType=t,this.m_inputSR=e,e&&0!==e.getCoordinateSystemType()||(0,i.a)(""),this.m_inputGCS=e.getGCS(),this.m_a=0,this.m_eSquared=0,this.m_b=0,this.m_rpu=0}executePolygonGeodeticArea(e){let t,n=e.clone();if(n.dropAllAttributes(),e.hasNonLinearSegments()&&(n=(new s.f).execute(n,0,this.m_inputSR.getTolerance(0),0,this.m_progressTracker)),this.m_inputSR.isPannable()){const e=new a.Envelope2D;n.queryEnvelope(e);const t=this.m_inputSR.getPannableExtent();if(!t.containsEnvelope(e)){const a=t.getCenterX()-e.getCenterX(),_=new o.T;_.setShiftCoords(a,0),n.applyTransformation(_),e.move(a,0);const r=new i.E;t.queryIntervalX(r);const h=new i.E;e.queryIntervalX(h),n=r.contains(h)?(0,s.A)(n,this.m_inputSR):(new s.G).foldInto360RangeGeodetic(n,this.m_inputSR,this.m_curveType)}}if(this.m_transformPCS2GCS?(n=(new s.d).execute(n,this.m_inputSR,!1,this.m_progressTracker),t=n.createInstance(),(0,s.F)(this.m_transformPCS2GCS,n,t,this.m_progressTracker)||(t=(new s.G).execute(n,this.m_transformPCS2GCS,this.m_progressTracker))):t=(new s.d).execute(n,this.m_inputGCS,!1,this.m_progressTracker),t.isEmpty())return 0;if(1===this.m_curveType){const e=(0,s.y)();return this.m_inputGCS.querySpheroidData(e),this.m_a=e.majorSemiAxis,this.m_eSquared=e.e2,this.loxodromeArea(t)}const _=t.getImpl();this.m_rpu=this.m_inputGCS.getUnit().getUnitToBaseFactor(),this.m_scaleToRadians.setScale(this.m_rpu),_.applyTransformation(this.m_scaleToRadians),this.m_scaleToDegrees=this.m_scaleToRadians,this.m_scaleToDegrees.invertThis();const r=(0,s.y)();if(this.m_inputGCS.querySpheroidData(r),this.m_a=r.majorSemiAxis,this.m_b=r.minorSemiAxis,this.m_eSquared=r.e2,2===this.m_curveType)return this.executeClippedPolygonGreatEllipticArea(t);{const e={stack:[],error:void 0,hasError:!1};try{const n=s.aF.unit(9101),i=this.m_inputGCS.getPECoordSys(),a=(0,h.a)(e,i.cloneAlterUnits(n),!1);let _,r,o=this.executeClippedPolygonGeodeticArea(t,a,0),m=0;do{m++,_=this.executeClippedPolygonGeodeticArea(t,a,m),r=Math.abs(_-o),o=_}while(Math.abs(_)>1&&r>1e-8*Math.abs(_)&&m<7);return _}catch(t){e.error=t,e.hasError=!0}finally{(0,h.b)(e)}}}executeClippedPolygonGeodeticArea(e,t,n){const _={stack:[],error:void 0,hasError:!1};try{const r=new a.Envelope2D;e.queryEnvelope(r);const o=(0,h.a)(_,this.getEqualAreaPCSInstance(t,r),!1),m=e.clone();(0,s.aG)(o,m);const l=50,p=m.getImpl().getAttributeStreamRef(0),u=e.getImpl().getAttributeStreamRef(0),c=(0,h.a)(_,new s.H,!1),g=(0,h.a)(_,new s.H,!1),E=40,P=[0,0],f=(0,i.y)(d,E),S=(0,i.r)(E,-1),y=d(),x=d();let A,R;const T=o;let C=m.calculateArea2D();const M=new i.K(0),w=.5*Math.PI,N=1e-10*Math.abs(C)+1e-6,b=e.getPathCount();let q,v,I,D;const L=new i.P,G=new i.P,z=new i.P,O=new i.P,k=new i.P,F=new i.P;let $,J;for(v=e.getPathStart(0),q=0;q<b;q++,v=I)for(I=e.getPathEnd(q),p.queryPoint2D(I-1<<1,z),u.queryPoint2D(I-1<<1,L),Math.abs(L.y)>w&&(L.y=(0,i.O)(w,L.y)),D=v;D<I;D++,z.assign(O),L.assign(G)){if(p.queryPoint2D(D<<1,O),u.queryPoint2D(D<<1,G),Math.abs(G.y)>w&&(G.y=(0,i.O)(w,G.y)),$=i.P.distance(z,O),$<l||0===L.y&&0===G.y)continue;s.I.geodeticDistance(this.m_a,this.m_eSquared,L.x,L.y,G.x,G.y,c,g,null,this.m_curveType);const e=c.val,t=g.val;for(y.setValues(0,z),x.setValues(1,O),R=n,f[0].assign(x),S[0]=n,A=0;A>=0;){J=.5*(y.m_factor+x.m_factor),s.I.geodeticCoordinate(this.m_a,this.m_eSquared,L.x,L.y,e*J,t,c,g,this.m_curveType),k.x=c.val,k.y=g.val,P[0]=k.x,P[1]=k.y,s.J.geogToProj(T,1,P),F.x=P[0],F.y=P[1];const n=.5*-F.offset(y.m_p_PCS,x.m_p_PCS)*i.P.distance(y.m_p_PCS,x.m_p_PCS);if(M.pe(n),Math.abs(n)>N||Math.abs(n)>0&&R>0)x.setValues(J,F),A++,f[A].assign(x),Math.abs(n)<=N?(R--,S[A-1]=R,S[A]=R):(R=S[A-1],S[A]=R);else{if(A<=0)break;y.assign(x),A--,x.assign(f[A]),R=S[A]}}}return C+=M.getResult(),Math.abs(C)}catch(e){_.error=e,_.hasError=!0}finally{(0,h.b)(_)}}executeClippedPolygonGreatEllipticArea(e){const t=[],n=[],r=new i.P,h=new i.P,o=(0,s.Q)(1,this.m_eSquared,new i.P(0,.5*Math.PI)),m=new i.K(0),l=new i.K(0),p=new i.K(0),u=new _.d,c=new _.d,g=new a.Envelope2D;e.queryLooseEnvelope(g);let d=0;g.containsCoords(g.xmin,0)||(d=Math.abs(g.ymin)<Math.abs(g.ymax)?g.ymin:g.ymax);const E=new f(this.m_eSquared,u,c,d),P=this.m_a*this.m_a,S=e.getImpl().querySegmentIterator();for(S.stripAttributes();S.nextPath();)for(;S.hasNextSegment();){const e=S.nextSegment();r.assign(e.getStartXY()),h.assign(e.getEndXY()),h.x-r.x>Math.PI?r.x+=2*Math.PI:h.x-r.x<-Math.PI&&(h.x+=2*Math.PI),this.splitSegmentCrossingItegralThreshold(e,t,n);for(let e of t)u.assign((0,s.Q)(this.m_a,this.m_eSquared,e.getStartXY())),c.assign((0,s.Q)(this.m_a,this.m_eSquared,e.getEndXY())),E.setSegmentEndPoints(u,c),this.adaptiveIntegrationWithRomberg(E,m);for(let e of n){let t=e.getStartXY(),n=e.getEndXY(),a=d;t.y<0&&(n=(0,i.f)(t,t=n),t.y=-t.y,n.y=-n.y,a=-a);const r=(0,s.Q)(1,this.m_eSquared,t),h=(0,s.Q)(1,this.m_eSquared,n),m=Math.min(t.y,n.y),u=(0,s.aH)(this.m_eSquared,t.x,n.x,a,m);l.pe(u);const c=Math.abs((0,s.aH)(this.m_eSquared,t.x,n.x,m,i.B)),g=new _.d;g.setSub(r,o);const E=new _.d;E.setSub(h,o);const f=new _.d;f.setCrossProductVector(g,E);let S=P*(c-.5*f.length());S=(0,i.O)(S,n.x-t.x),p.pe(S)}t.length=0,n.length=0}return p.getResult()+P*(.5*(1-this.m_eSquared)*m.getResult()+l.getResult())}getEqualAreaPCSInstance(e,t){const n=t.getCenterX();let a,_;const r=t.height();let h,o;(h=t.ymin>45*Math.PI/180||t.ymax<45*-Math.PI/180)?a=(0,i.O)(.5*Math.PI,t.getCenterY()):(a=t.getCenterY(),_=t.ymin+r*(2/3));const m=(0,s.aE)("EqualAreaPCS"),l=e.toString();return o=h?s.aF.fromString(s.ai.PE_TYPE_PROJCS,`PROJCS["${m}", ${l}, PROJECTION["Lambert_Azimuthal_Equal_Area"],PARAMETER["False_Easting",0],PARAMETER["False_Northing", 0],PARAMETER["Central_Meridian", ${n}], PARAMETER["Latitude_of_Origin", ${a}], UNIT["Meter",1.0]]`):s.aF.fromString(s.ai.PE_TYPE_PROJCS,`PROJCS["${m}", ${l}, PROJECTION["Cylindrical_Equal_Area"],PARAMETER["False_Easting", 0],PARAMETER["False_Northing", 0],PARAMETER["Central_Meridian", ${n}],PARAMETER["Standard_Parallel_1", ${_}],PARAMETER["Latitude_of_Origin", ${a}],UNIT["Meter",1.0]]`),o}splitSegmentCrossingItegralThreshold(e,t,n){const a=100,r=400,h=(0,s.Q)(this.m_a,this.m_eSquared,new i.P(0,i.B)),o=(0,s.Q)(this.m_a,this.m_eSquared,new i.P(0,-i.B)),m=this.splitSegmentPassingThroughPole(e);for(let e of m){const m=e.getStartXY(),l=e.getEndXY(),p=(0,s.Q)(this.m_a,this.m_eSquared,m),u=(0,s.Q)(this.m_a,this.m_eSquared,l),c=new i.P,g=new _.d;let d=_.d.sqrDistance(h,p),E=_.d.sqrDistance(p,u);if(d<=a){if(!(E>r)){n.push(new s.L({start:m,end:l}));continue}g.assign(u.sub(p)),g.normalizeThis(),g.assign(p.add(g.mul(20))),c.assign((0,s.ad)(this.m_a,this.m_eSquared,g)),n.push(new s.L({start:m,end:c})),m.assign(c)}if(p.assign((0,s.Q)(this.m_a,this.m_eSquared,m)),d=_.d.sqrDistance(h,u),E=_.d.sqrDistance(p,u),d<=a){if(!(E>r)){n.push(new s.L({start:m,end:l}));continue}g.assign(u.sub(p)),g.normalizeThis(),g.assign(u.sub(g.mul(20))),c.assign((0,s.ad)(this.m_a,this.m_eSquared,g)),n.push(new s.L({start:c,end:l})),l.assign(c)}if(p.assign((0,s.Q)(this.m_a,this.m_eSquared,m)),u.assign((0,s.Q)(this.m_a,this.m_eSquared,l)),d=_.d.sqrDistance(o,p),E=_.d.sqrDistance(p,u),d<=a){if(!(E>r)){n.push(new s.L({start:m,end:l}));continue}g.assign(u.sub(p)),g.normalizeThis(),g.assign(p.add(g.mul(20))),c.assign((0,s.ad)(this.m_a,this.m_eSquared,g)),n.push(new s.L({start:m,end:c})),m.assign(c)}if(p.assign((0,s.Q)(this.m_a,this.m_eSquared,m)),u.assign((0,s.Q)(this.m_a,this.m_eSquared,l)),d=_.d.sqrDistance(o,u),E=_.d.sqrDistance(p,u),d<=a){if(!(E>r)){n.push(new s.L({start:m,end:l}));continue}g.assign(u.sub(p)),g.normalizeThis(),g.assign(u.sub(g.mul(20))),c.assign((0,s.ad)(this.m_a,this.m_eSquared,g)),n.push(new s.L({start:c,end:l})),l.assign(c)}t.push(new s.L({start:m,end:l}))}}splitSegmentPassingThroughPole(e){const t={stack:[],error:void 0,hasError:!1};try{const n=[],a=new _.d,r=new _.d,o=new _.d,l=new i.P,p=20,u=3.124139361,c=10,g=e.getStartXY(),d=e.getEndXY(),E=(0,h.a)(t,new s.H,!1);if(s.I.geodeticDistance(this.m_a,this.m_eSquared,g.x,g.y,d.x,d.y,E,null,null,2),Math.abs(d.x-g.x)>u&&E.val>p){const e=new m.a(new i.P(0,90),g.divide(this.m_rpu),d.divide(this.m_rpu),this.m_inputGCS,2,2);let t=(0,s.al)(e.makeFunctor(),0,1,1e-10);if(t.second<=c&&t.first>0&&t.first<1)return a.assign((0,s.Q)(this.m_a,this.m_eSquared,g)),r.assign((0,s.Q)(this.m_a,this.m_eSquared,d)),(0,i.Q)(a,r,t.first,o),l.assign((0,s.ad)(this.m_a,this.m_eSquared,o)),n.push(new s.L({start:g,end:l})),n.push(new s.L({start:l,end:d})),n;if(e.setPointDistFrom(new i.P(0,-90)),t=(0,s.al)(e.makeFunctor(),0,1,1e-10),t.second<=c&&t.first>0&&t.first<1)return a.assign((0,s.Q)(this.m_a,this.m_eSquared,g)),r.assign((0,s.Q)(this.m_a,this.m_eSquared,d)),(0,i.Q)(a,r,t.first,o),l.assign((0,s.ad)(this.m_a,this.m_eSquared,o)),n.push(new s.L({start:g,end:l})),n.push(new s.L({start:l,end:d})),n}return n.push(new s.L({start:g,end:d})),n}catch(e){t.error=e,t.hasError=!0}finally{(0,h.b)(t)}}adaptiveIntegrationWithRomberg(e,t){const n=e.makeFunctor();let i=0,a=1,_=n(i),r=n(a);const h=1e-17,o=1e-14;let m=(i+a)/2,l=n(m),p=Math.abs(l-_),u=Math.abs(r-l),c=0;for(;c++<32&&(p/u<.1||u/p<.1);)p<u?(t.pe((0,s.aD)(5,i,m,o,h,n)),i=m,_=l):(t.pe((0,s.aD)(5,m,a,o,h,n)),a=m,r=l),m=(i+a)/2,l=Math.abs(n(m)),p=Math.abs(l-_),u=Math.abs(r-l);t.pe((0,s.aD)(5,i,a,o,h,n))}loxodromeAreaHemi(e,t,n,s,a){const _=n.clone(),r=a.clone();let h,o,m,l,p,u,c,g,d,E,P,f,S,y,x,A;return _.make_negative&&_.changeSign(),r.make_negative&&r.changeSign(),P=s-t,1===Math.abs(_.sin_phi)||1===Math.abs(r.sin_phi)?e.half_qp*P:_.sin_phi===r.sin_phi?(E=.5*e.one_m_e_2*_.sin_phi*(1/_.one_m_e_2_sin_2_phi+(0,i.R)(e.e*_.sin_phi))*P,E):(x=Math.log(r.sin_half_phi_pf*_.sin_half_phi_pz/(r.sin_half_phi_pz*_.sin_half_phi_pf)),A=Math.log(r.sin_half_asin_e_sin_phi_pf*_.sin_half_asin_e_sin_phi_pz/(r.sin_half_asin_e_sin_phi_pz*_.sin_half_asin_e_sin_phi_pf)),1===this.m_eSquared?(p=0,h=.5*(x+r.sin_phi/r.one_m_e_2_sin_2_phi-_.sin_phi/_.one_m_e_2_sin_2_phi),o=0):(p=-2*e.atanh_e_over_e*(Math.log(r.one_p_sin_phi/_.one_p_sin_phi)-e.e*A),h=(x-e.e*A)/e.one_m_e_2,o=(Math.log(r.one_m_e_2_sin_2_phi/_.one_m_e_2_sin_2_phi)+p/e.atanh_e_over_e)/e.one_m_e_2),m=-A*(_.atanh_esin_phi+r.atanh_esin_phi),l=1/_.one_m_e_2_sin_2_phi-1/r.one_m_e_2_sin_2_phi,u=(0,i.T)(r.one_m_sin_phi/e.one_p_e,e.e)-(0,i.T)(_.one_m_sin_phi/e.one_p_e,e.e),c=(0,i.T)(r.one_p_sin_phi/e.one_p_e,e.e)-(0,i.T)(_.one_p_sin_phi/e.one_p_e,e.e),g=(0,i.T)(_.one_m_sin_phi/-e.one_m_e,e.e)-(0,i.T)(r.one_m_sin_phi/-e.one_m_e,e.e),d=(0,i.T)(_.one_p_sin_phi/-e.one_m_e,e.e)-(0,i.T)(r.one_p_sin_phi/-e.one_m_e,e.e),E=.25/h*(o+m+l+p+.5*(u+c+g+d)),E+=e.half_qp,f=.5*e.one_m_e_2*_.sin_phi*(1/_.one_m_e_2_sin_2_phi+(0,i.R)(e.e*_.sin_phi)),S=.5*e.one_m_e_2*r.sin_phi*(1/r.one_m_e_2_sin_2_phi+(0,i.R)(e.e*r.sin_phi)),S<f&&(y=f,f=S,S=y),E<f&&(E=f),E>S&&(E=S),E*=P,E)}loxodromeArea(e){const t=Math.PI/180;let n=0;const s={e:Number.NaN,one_p_e:Number.NaN,one_m_e:Number.NaN,one_m_e_2:Number.NaN,atanh_e_over_e:Number.NaN,half_qp:Number.NaN,f:Number.NaN,z:Number.NaN},a=S(),_=S();s.e=Math.sqrt(this.m_eSquared),s.one_p_e=1+s.e,s.one_m_e=1-s.e,s.one_m_e_2=1-this.m_eSquared,s.atanh_e_over_e=(0,i.R)(s.e),this.m_eSquared>=1?s.half_qp=1:s.half_qp=.5*(1+s.atanh_e_over_e*s.one_m_e_2),s.f=.25*Math.PI,s.z=.75*Math.PI,_.initialize(0,s.e,s.f,s.z);const r=e.getPathCount(),h=new i.P,o=new i.P,m=e.getImpl().getAttributeStreamRef(0);for(let i=0;i<r;i++){const r=e.getPathStart(i),l=e.getPathEnd(i);if(!(l-r<=1)){m.queryPoint2D(2*(l-1),h);for(let e=r;e<l;e++){m.queryPoint2D(2*e,o);const i=h.y*t,l=o.y*t;if(e===r?(a.initialize(i,s.e,s.f,s.z),a.make_negative=!1):a.assign(_),_.initialize(l,s.e,s.f,s.z),_.make_negative=!1,h.y*o.y<0){if(h.y>=90&&o.y<=-90||o.y>=90&&h.y<=-90)return Number.NaN;const e=S();e.initialize(0,s.e,s.f,s.z),e.make_negative=!1;const r=a.atanh_sin_phi-s.e*a.atanh_esin_phi,m=_.atanh_sin_phi-s.e*_.atanh_esin_phi,l=(m*h.x-r*o.x)/(m-r);i<0?(a.make_negative=!0,n-=this.loxodromeAreaHemi(s,h.x*t,a,l*t,e),a.make_negative=!1,n+=this.loxodromeAreaHemi(s,l*t,e,o.x*t,_)):(n+=this.loxodromeAreaHemi(s,h.x*t,a,l*t,e),_.make_negative=!0,n-=this.loxodromeAreaHemi(s,l*t,e,o.x*t,_),_.make_negative=!1)}else h.y>=0?n+=this.loxodromeAreaHemi(s,h.x*t,a,o.x*t,_):(a.make_negative=!0,_.make_negative=!0,n-=this.loxodromeAreaHemi(s,h.x*t,a,o.x*t,_),a.make_negative=!1,_.make_negative=!1);h.assign(o)}}}return this.m_a*n*this.m_a}calculate(e){if(e.isEmpty()||e.getDimension()<2)return 0;if(e.getGeometryType()===i.G.enumEnvelope){const t=new s.P;return t.addEnvelope(e,!1),this.calculate(t)}return this.m_inputSR!==this.m_inputGCS&&null===this.m_transformPCS2GCS&&(this.m_transformPCS2GCS=(0,s.N)(this.m_inputSR,this.m_inputGCS,null)),this.executePolygonGeodeticArea(e)}}class C{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(e,t,n){return!1}canAccelerateGeometry(e){return!1}execute(e,t,n,s){return(0,i.v)(e),4===n?(new g).execute(e,t,s):new T(t,n,s).calculate(e)}}},61846:(e,t,n)=>{n.d(t,{O:()=>l});var i=n(23160),s=n(6550),a=n(43802),_=n(82604);function r(){return{m_pGcs:new i.P,m_xyz:new a.d,m_factor:Number.NaN,m_geoLength:Number.NaN,setValues:h,setLength:o,assign:m}}function h(e,t,n,i){this.m_factor=e,this.m_pGcs.assign(t),this.m_xyz.assign(i),this.m_geoLength=n}function o(e){this.m_geoLength=e}function m(e){this.m_pGcs.assign(e.m_pGcs),this.m_xyz.assign(e.m_xyz),this.m_factor=e.m_factor,this.m_geoLength=e.m_geoLength}class l{getOperatorType(){return 10315}supportsCurves(){return!0}accelerateGeometry(e,t,n){return!1}canAccelerateGeometry(e){return!1}_ExecuteShapePreservingLength(e,t,n,i,a){if(e.hasNonLinearSegments()&&(e=(new s.f).execute(e,0,t.getTolerance(0),0,a)),t.isPannable()){let i=90,r=-90;if(1===n.getUnit().getUnitToBaseFactor()&&(i*=Math.PI/180,r*=Math.PI/180),2===t.getCoordinateSystemType()){let e=null;const n=[0,0,0,0];e=t.getPECoordSys(),n[0]=0,n[1]=i,n[2]=0,n[3]=r,s.J.geogToProj(e,2,n),i=n[1],r=n[3]}const h=new _.Envelope2D;e.queryEnvelope(h),h.ymin=r,h.ymax=i,e=(new s.K).execute(e,h,t,a)}else{const n=t.getPCSHorizon();if((e=(new s.u).execute(e,n,t,a))===n){const t=e.clone();e=t}}return e.isEmpty()?0:this._ExecuteIterativeApproach(e,t,n,i,1,a)}_ExecuteIterativeApproach(e,t,n,_,h,o){const m=(0,s.y)();n.querySpheroidData(m);const l=m.majorSemiAxis,c=m.e2,g=n.getUnit().getUnitToBaseFactor(),d=(0,i.y)(r,40),E=(0,i.r)(40,Number.NaN),P=r(),f=r();let S;const y=[0,0,0,0],x=t.getPECoordSys(),A=new i.P,R=new i.P,T=new i.P,C=new i.P,M=new i.P;let w=0;const N=e.querySegmentIterator();for(;N.nextPath();)for(;N.hasNextSegment();){const e=N.nextSegment();A.assign(e.getStartXY()),R.assign(e.getEndXY()),2===t.getCoordinateSystemType()?(y[0]=A.x,y[1]=A.y,y[2]=R.x,y[3]=R.y,s.J.projToGeog(x,2,y),T.x=y[0]*g,T.y=y[1]*g,C.x=y[2]*g,C.y=y[3]*g):(T.setCoordsPoint2D(A),C.setCoordsPoint2D(R),T.scale(g),C.scale(g));const n=new a.d,_=new a.d;p(l,c,T,n),p(l,c,C,_);let r=u(l,n,_);P.setValues(0,T,Number.NaN,n),f.setValues(1,C,r,_),S=h,d[0].assign(f),E[0]=h;let o=0;for(;;){o>128&&(0,i.p)("iterations exceeded");const n=.5*(P.m_factor+f.m_factor),_=e.getCoord2D(n);2===t.getCoordinateSystemType()?(y[0]=_.x,y[1]=_.y,s.J.projToGeog(x,1,y),M.x=y[0]*g,M.y=y[1]*g):(M.setCoordsPoint2D(_),M.scale(g)),T.setCoordsPoint2D(P.m_pGcs),C.setCoordsPoint2D(f.m_pGcs);const m=new a.d;p(l,c,M,m);const A=u(l,P.m_xyz,m),R=u(l,f.m_xyz,m);r=f.m_geoLength,Number.isNaN(r)&&(r=u(l,P.m_xyz,f.m_xyz));const N=A+R,b=S===h&&N>=20&&Math.abs(N-r)>1e-8*(r+N);if(o+2<40&&(b||Math.abs(N-r)>0&&S>0))f.setLength(R),d[o].assign(f),f.setValues(n,M,A,m),d[++o].assign(f),b?(S=h,E[o]=h):(S--,E[o-1]=S,E[o]=S);else{if(w+=N,0===o)break;P.assign(f),f.assign(d[--o]),S=E[o]}}}return w}execute(e,t,n){if(t&&0!==t.getCoordinateSystemType()||(0,i.a)(""),e.isEmpty()||e.getDimension()<1)return 0;let a=null;const _=t.getGCS();_!==t&&(a=(0,s.N)(t,_,null));const r=e.getGeometryType();if(r===i.G.enumEnvelope){const i=new s.P;return i.addEnvelope(e,!1),this._ExecuteShapePreservingLength(i,t,_,a,n)}if((0,i.o)(r)){const i=new s.b;return i.addSegment(e,!0),this._ExecuteShapePreservingLength(i,t,_,a,n)}return this._ExecuteShapePreservingLength(e,t,_,a,n)}}function p(e,t,n,i){i.assign((0,s.Q)(e,t,n))}function u(e,t,n){const i=e,s=new a.d;s.setSub(t,n);const _=s.length();return 2*i*Math.asin(_/(2*i))}}}]);