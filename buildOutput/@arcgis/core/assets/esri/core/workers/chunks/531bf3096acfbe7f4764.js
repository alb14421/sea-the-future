"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[8380],{2895:(t,e,r)=>{r.d(e,{A:()=>c});var s,n=r(32816),o=r(52731),a=r(99924),i=r(29298),u=(r(32773),r(20266),r(88663)),l=r(69421);r(41390),r(85176),r(93181),r(13671),r(50704),r(40499),r(36555),r(58498),r(91047),r(35819),r(45371),r(61532),r(80959),r(6407),r(59121),r(19247),r(36172),r(36544),r(90740),r(84699),r(48064),r(93804);let c=class extends((0,o.O)(a.o)){static{s=this}constructor(t){super(t),this.type="georeferenced",this.origin=null}static{this.absolute=new s}};(0,n._)([(0,u.e)({georeferenced:"georeferenced"},{readOnly:!0})],c.prototype,"type",void 0),(0,n._)([(0,i.MZ)({type:[Number],nonNullable:!1,json:{write:!0}})],c.prototype,"origin",void 0),c=s=(0,n._)([(0,l.$)("esri.geometry.support.MeshGeoreferencedVertexSpace")],c)},11443:(t,e,r)=>{r.d(e,{O:()=>s});class s{constructor(){this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new s;return t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}},26809:(t,e,r)=>{r.d(e,{B:()=>U,C:()=>L,E:()=>h,F:()=>p,G:()=>c,H:()=>d,I:()=>A,a:()=>m,c:()=>O,d:()=>S,e:()=>a,g:()=>E,h:()=>l,i:()=>g,j:()=>u,k:()=>i,l:()=>o,m:()=>v,n:()=>q,o:()=>f,p:()=>y,q:()=>N,r:()=>F,s:()=>P,t:()=>x,u:()=>M,v:()=>I,w:()=>w,x:()=>b,y:()=>_,z:()=>k});var s=r(2589),n=r(18527);function o(t){const e=t[0],r=t[1],s=t[2];return Math.sqrt(e*e+r*r+s*s)}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function i(t,e,r,s){return t[0]=e,t[1]=r,t[2]=s,t}function u(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function l(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function c(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function d(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function h(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function p(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function f(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function y(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function g(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function m(t,e,r,s){return t[0]=e[0]+r[0]*s,t[1]=e[1]+r[1]*s,t[2]=e[2]+r[2]*s,t}function b(t,e){const r=e[0]-t[0],s=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(r*r+s*s+n*n)}function M(t,e){const r=e[0]-t[0],s=e[1]-t[1],n=e[2]-t[2];return r*r+s*s+n*n}function w(t){const e=t[0],r=t[1],s=t[2];return e*e+r*r+s*s}function I(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function A(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function q(t,e){const r=e[0],s=e[1],n=e[2];let o=r*r+s*s+n*n;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function S(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function O(t,e,r){const s=e[0],n=e[1],o=e[2],a=r[0],i=r[1],u=r[2];return t[0]=n*u-o*i,t[1]=o*a-s*u,t[2]=s*i-n*a,t}function v(t,e,r,s){const n=e[0],o=e[1],a=e[2];return t[0]=n+s*(r[0]-n),t[1]=o+s*(r[1]-o),t[2]=a+s*(r[2]-a),t}function x(t,e,r){const s=e[0],n=e[1],o=e[2];return t[0]=r[0]*s+r[4]*n+r[8]*o+r[12],t[1]=r[1]*s+r[5]*n+r[9]*o+r[13],t[2]=r[2]*s+r[6]*n+r[10]*o+r[14],t}function N(t,e,r){const s=e[0],n=e[1],o=e[2];return t[0]=s*r[0]+n*r[3]+o*r[6],t[1]=s*r[1]+n*r[4]+o*r[7],t[2]=s*r[2]+n*r[5]+o*r[8],t}function F(t,e,r){const s=r[0],n=r[1],o=r[2],a=r[3],i=e[0],u=e[1],l=e[2],c=n*l-o*u,d=o*i-s*l,h=s*u-n*i,p=n*h-o*d,f=o*c-s*h,y=s*d-n*c,g=2*a;return t[0]=i+c*g+2*p,t[1]=u+d*g+2*f,t[2]=l+h*g+2*y,t}const T=(0,s.c)(),R=(0,s.c)();function E(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function _(t,e,r){const s=r[0]-e[0],n=r[1]-e[1],o=r[2]-e[2];let a=s*s+n*n+o*o;return a>0?(a=1/Math.sqrt(a),t[0]=s*a,t[1]=n*a,t[2]=o*a,t):(t[0]=0,t[1]=0,t[2]=0,t)}const P=l,G=c,C=d,k=b,L=M,D=o,U=w;Object.freeze(Object.defineProperty({__proto__:null,abs:h,add:u,angle:function(t,e){q(T,t),q(R,e);const r=S(T,R);return r>1?0:r<-1?Math.PI:Math.acos(r)},bezier:function(t,e,r,s,n,o){const a=1-o,i=a*a,u=o*o,l=i*a,c=3*o*i,d=3*u*a,h=u*o;return t[0]=e[0]*l+r[0]*c+s[0]*d+n[0]*h,t[1]=e[1]*l+r[1]*c+s[1]*d+n[1]*h,t[2]=e[2]*l+r[2]*c+s[2]*d+n[2]*h,t},ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},clamp:function(t,e=0,r=1){return t[0]=Math.min(Math.max(t[0],e),r),t[1]=Math.min(Math.max(t[1],e),r),t[2]=Math.min(Math.max(t[2],e),r),t},copy:a,cross:O,crossAndNormalize:function(t,e,r){const s=e[0],n=e[1],o=e[2],a=r[0],i=r[1],u=r[2],l=n*u-o*i,c=o*a-s*u,d=s*i-n*a,h=Math.sqrt(l*l+c*c+d*d);return t[0]=l/h,t[1]=c/h,t[2]=d/h,t},direction:_,dist:k,distance:b,div:C,divide:d,dot:S,equals:function(t,e){if(t===e)return!0;const r=t[0],s=t[1],o=t[2],a=e[0],i=e[1],u=e[2],l=(0,n.g)();return Math.abs(r-a)<=l*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(s-i)<=l*Math.max(1,Math.abs(s),Math.abs(i))&&Math.abs(o-u)<=l*Math.max(1,Math.abs(o),Math.abs(u))},exactEquals:E,floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},hermite:function(t,e,r,s,n,o){const a=o*o,i=a*(2*o-3)+1,u=a*(o-2)+o,l=a*(o-1),c=a*(3-2*o);return t[0]=e[0]*i+r[0]*u+s[0]*l+n[0]*c,t[1]=e[1]*i+r[1]*u+s[1]*l+n[1]*c,t[2]=e[2]*i+r[2]*u+s[2]*l+n[2]*c,t},inverse:A,len:D,length:o,lerp:v,max:y,min:f,mul:G,multiply:c,negate:I,normalize:q,random:function(t,e=1){const r=n.R,s=2*r()*Math.PI,o=2*r()-1,a=Math.sqrt(1-o*o)*e;return t[0]=Math.cos(s)*a,t[1]=Math.sin(s)*a,t[2]=o*e,t},rotateX:function(t,e,r,s){const n=[],o=[];return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],o[0]=n[0],o[1]=n[1]*Math.cos(s)-n[2]*Math.sin(s),o[2]=n[1]*Math.sin(s)+n[2]*Math.cos(s),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},rotateY:function(t,e,r,s){const n=[],o=[];return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],o[0]=n[2]*Math.sin(s)+n[0]*Math.cos(s),o[1]=n[1],o[2]=n[2]*Math.cos(s)-n[0]*Math.sin(s),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},rotateZ:function(t,e,r,s){const n=[],o=[];return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],o[0]=n[0]*Math.cos(s)-n[1]*Math.sin(s),o[1]=n[0]*Math.sin(s)+n[1]*Math.cos(s),o[2]=n[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},scale:g,scaleAndAdd:m,set:i,sign:p,sqrDist:L,sqrLen:U,squaredDistance:M,squaredLength:w,str:function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},sub:P,subtract:l,transformMat3:N,transformMat4:x,transformQuat:F},Symbol.toStringTag,{value:"Module"}))},29312:(t,e,r)=>{r.d(e,{A:()=>c});var s=r(32816),n=r(52731),o=r(99924),a=r(29298),i=(r(32773),r(20266),r(88663)),u=r(69421),l=r(2589);r(41390),r(85176),r(93181),r(13671),r(50704),r(40499),r(36555),r(58498),r(91047),r(35819),r(45371),r(61532),r(80959),r(6407),r(59121),r(19247),r(36172),r(36544),r(90740),r(84699),r(48064),r(93804);let c=class extends((0,n.O)(o.o)){constructor(t){super(t),this.type="local",this.origin=(0,l.c)()}};(0,s._)([(0,i.e)({local:"local"},{readOnly:!0})],c.prototype,"type",void 0),(0,s._)([(0,a.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],c.prototype,"origin",void 0),c=(0,s._)([(0,u.$)("esri.geometry.support.MeshLocalVertexSpace")],c)},33489:(t,e,r)=>{r.d(e,{a:()=>i,c:()=>a,d:()=>d,e:()=>l,f:()=>h,g:()=>n,h:()=>o});var s=r(32773);function n(t){return 32+t.length}const o=16;function a(t){if(!t)return 0;let e=d;for(const r in t)t.hasOwnProperty(r)&&(e+=u(t[r],!1));return e}function i(t){if(!t)return 0;if("number"==typeof t[0])return l(t);if(Array.isArray(t))return function(t){const e=t.length;if(0===e||"number"==typeof t[0])return c(t,8);let r=h;for(let s=0;s<e;s++)r+=u(t[s]);return r}(t);let e=d;for(const r in t)t.hasOwnProperty(r)&&(e+=u(t[r]));return e}function u(t,e=!0){switch(typeof t){case"object":return e?i(t):d;case"string":return n(t);case"number":return 16;case"boolean":return 4;default:return 8}}function l(...t){return t.reduce((t,e)=>t+(e?(0,s.c)(e)?e.byteLength+p:Array.isArray(e)?c(e,16):0:0),0)}function c(t,e){return h+t.length*e}const d=32,h=16,p=145},34801:(t,e,r)=>{r.d(e,{S:()=>u,a:()=>i,b:()=>g,c:()=>y,d:()=>l,e:()=>p,f:()=>f,i:()=>m});var s=r(64604),n=r(32773),o=r(80959),a=r(80488);class i{constructor(t,e,r){this.assetName=t,this.assetMimeType=e,this.parts=r}equals(t){return this===t||this.assetName===t.assetName&&this.assetMimeType===t.assetMimeType&&(0,n.e)(this.parts,t.parts,(t,e)=>t.equals(e))}isOnService(t){return this.parts.every(e=>e.isOnService(t))}makeHash(){let t="";for(const e of this.parts)t+=e.partHash;return t}async toBlob(t){const{parts:e}=this;if(1===e.length)return e[0].toBlob(t);const r=await Promise.all(e.map(e=>e.toBlob(t)));return(0,o.Te)(t),new Blob(r)}}class u{constructor(t,e){this.partUrl=t,this.partHash=e}equals(t){return this===t||this.partUrl===t.partUrl&&this.partHash===t.partHash}isOnService(t){return this.partUrl.startsWith(`${t.path}/assets/`)}async toBlob(t){const{data:e}=await(0,s.A)(this.partUrl,{responseType:"blob"});return(0,o.Te)(t),e}}function l(t){return function(t){switch(t?.type){case"client":return Array.isArray(t.files)?t.files.some(h):h(t.files);case"service":return t.assets.some(h);case"loadable":return!0;default:return!1}}(t?.source)}const c=/^(model\/gltf\+json)|(model\/gltf-binary)$/,d=/\.(gltf|glb)/i;function h(t){if(t instanceof File){const{type:e,name:r}=t;return c.test(e)||d.test(r)}return c.test(t.assetMimeType)||d.test(t.assetName)}function p(t,e){if(!t)return!1;const{source:r}=t;return function(t,e){return"service"===t.type&&t.assets.every(t=>t.isOnService(e))}(r,e)}function f(t,e){if(t===e)return!0;const{source:r}=t,{source:s}=e;if(r===s)return!0;if("service"===r.type&&"service"===s.type){if(r.assets.length!==s.assets.length)return!1;const t=(t,e)=>t.assetName<e.assetName?-1:t.assetName>e.assetName?1:0,e=[...r.assets].sort(t),n=[...s.assets].sort(t);for(let t=0;t<e.length;++t)if(!e[t].equals(n[t]))return!1;return!0}return!1}function y(t,e){return t instanceof File?(0,a.g)(t,e):(0,a.a)(t.assetMimeType,t.assetName,e)}function g(t){switch(t.type){case"client":return Array.isArray(t.files)?t.files:[t.files];case"service":return t.assets;case"loadable":return}}function m(t){return!!t.original}},38380:(t,e,r)=>{r.r(e),r.d(e,{default:()=>G});var s=r(32816),n=r(90740),o=r(64604),a=r(32773),i=r(6407),u=r(93804),l=r(73509),c=r(20266),d=r(59121),h=r(80959),p=r(67321),f=r(99063),y=r(93049),g=r(29298),m=r(69421),b=r(44600),M=r(7969),w=r(2895),I=r(44366),A=r(34801),q=r(50774),S=r(53104),O=r(73609),v=r(58196),x=r(80488),N=r(12109),F=r(90509),T=r(73600),R=r(58194),E=r(99781);r(29512),r(1178),r(28276),r(41390),r(85176),r(93181),r(13671),r(50704),r(40499),r(36555),r(58498),r(91047),r(35819),r(45371),r(61532),r(36172),r(84699),r(36544),r(19247),r(48064),r(2160),r(99924),r(49877),r(69763),r(96221),r(18683),r(56273),r(64752),r(48844),r(29208),r(52731),r(88663),r(26809),r(2589),r(18527),r(29312),r(27281),r(72393),r(17745),r(81272),r(44945),r(30011),r(54483),r(51961),r(62399),r(64995),r(70861),r(33150),r(58173),r(66110),r(67520),r(27532),r(48103),r(50214),r(59192),r(16345),r(65085),r(33611),r(84857),r(60373),r(20568),r(35902),r(13226),r(16699),r(16794),r(52357),r(11090),r(49319),r(93546),r(29570),r(34592),r(79825),r(95101),r(67578),r(17857),r(82537),r(14896),r(95611),r(98089),r(91366),r(80473),r(43435),r(73435),r(77037),r(36533),r(84200),r(97827),r(18169),r(20762),r(48402),r(67504),r(92517),r(91815),r(85232),r(93471),r(7182),r(47788),r(19297),r(82408),r(91658),r(70580),r(75191),r(24319),r(62092),r(53252),r(34039),r(12856),r(3495),r(97906),r(64524),r(65023),r(31424),r(74676),r(32368),r(7391),r(22529),r(70061),r(38094),r(67723),r(47239),r(22522),r(63728),r(4157),r(62401),r(89322),r(20138),r(53370),r(59858),r(46946),r(3816),r(71992),r(80167),r(4478),r(91808),r(7161),r(55586),r(92229),r(18344),r(53610),r(29447),r(78273),r(49475),r(64884),r(23351),r(35121),r(51222),r(42870),r(54512),r(53103),r(19648),r(42948),r(88321),r(47387),r(46728),r(21632),r(64102),r(86601),r(47812),r(92349),r(91276),r(80323),r(1921),r(3952),r(339),r(79281),r(13978),r(47368),r(23916),r(93074),r(70648),r(25018),r(81284),r(44864),r(95637),r(59930),r(45862),r(72762),r(71613),r(17872),r(71492),r(68140),r(48689),r(53564),r(33489),r(96153),r(58003),r(71868),r(38343),r(83637),r(8824),r(73067),r(86941),r(16677),r(60027),r(57111),r(75651),r(88614),r(1030),r(15319),r(60785),r(56487),r(6399),r(9498),r(24079),r(38149),r(19681),r(40328),r(84539),r(65299),r(38641),r(19869),r(98238),r(78328),r(54616),r(17813),r(3112),r(41740),r(46626),r(45560),r(56303),r(85890),r(55884),r(1739),r(79747),r(81618),r(78860),r(26805),r(13983),r(4734);const _=new u.J({originalAndCurrentFeatures:"original-and-current-features",none:"none"}),P=new u.J({Started:"published",Publishing:"publishing",Stopped:"unavailable"});let G=class extends l.x_{constructor(t){super(t),this.type="feature-layer",this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.refresh=(0,h.sg)(async()=>{await this.load();const t=this.sourceJSON.editingInfo?.lastEditDate;if(null==t)return{dataChanged:!0,updates:{}};try{await this._fetchService(null)}catch{return{dataChanged:!0,updates:{}}}const e=t!==this.sourceJSON.editingInfo?.lastEditDate;return{dataChanged:e,updates:e?{editingInfo:this.sourceJSON.editingInfo,extent:this.sourceJSON.extent}:null}}),this._ongoingAssetUploads=new Map}load(t){const e=this.layer.sourceJSON,r=this._fetchService(e,{...t}).then(()=>this.layer.setUserPrivileges(this.sourceJSON.serviceItemId,t)).then(()=>this._ensureLatestMetadata(t));return this.addResolvingPromise(r),Promise.resolve(this)}initialize(){this.addHandles([(0,p.wB)(()=>{const t=this.layer;return t&&"lastEditsEventDate"in t?t.lastEditsEventDate:null},t=>this._handleLastEditsEventChange(t))])}destroy(){this._removeEditInterceptor()}get queryTask(){const{capabilities:t,parsedUrl:e,gdbVersion:r,spatialReference:s,fieldsIndex:n,uniqueIdFields:o}=this.layer,i="infoFor3D"in this.layer?this.layer.infoFor3D:null,u="dynamicDataSource"in this.layer?this.layer.dynamicDataSource:null,l=(0,a.h)("featurelayer-pbf")&&t?.query.supportsFormatPBF&&null==i;return new O.Q({dynamicDataSource:u,fieldsIndex:n,gdbVersion:r,infoFor3D:i,pbfSupported:l,queryAttachmentsSupported:t?.operations?.supportsQueryAttachments??!1,sourceSpatialReference:s,uniqueIdFields:o,url:e.path})}async addAttachment(t,e){await this.load();const{layer:r}=this;await(0,v.a)(r,"editing");const s=t.attributes[r.objectIdField],n=r.parsedUrl.path+"/"+s+"/addAttachment",a=this._getLayerRequestOptions(),i=this._getFormDataForAttachment(e,a.query);try{const t=await(0,o.A)(n,{body:i});return(0,q.d)(t.data.addAttachmentResult)}catch(t){throw this._createAttachmentErrorResult(s,t)}}async updateAttachment(t,e,r){await this.load();const{layer:s}=this;await(0,v.a)(s,"editing");const n=t.attributes[s.objectIdField],a=s.parsedUrl.path+"/"+n+"/updateAttachment",i=this._getLayerRequestOptions({query:{attachmentId:e}}),u=this._getFormDataForAttachment(r,i.query);try{const t=await(0,o.A)(a,{body:u});return(0,q.d)(t.data.updateAttachmentResult)}catch(t){throw this._createAttachmentErrorResult(n,t)}}async applyEdits(t,e){await this.load();const{layer:r}=this;await(0,v.a)(r,"editing");const s="infoFor3D"in r?r.infoFor3D:null,n=null!=s,u=n||(e?.globalIdUsed??!1),l=n?await this._uploadMeshesAndGetAssetMapEditsJSON(t):null,c=t.addFeatures?.map(t=>(0,q.g)(this.layer,t,s))??[],d=(await Promise.all(c)).filter(a.i),h=t.updateFeatures?.map(t=>(0,q.g)(this.layer,t,s))??[],p=(await Promise.all(h)).filter(a.i),f=(0,q.a)(this.layer,t.deleteFeatures,u);(0,F.u)(d,p,r.spatialReference);const y=await(0,q.b)(this.layer,t),g=r.capabilities.editing.supportsAsyncApplyEdits&&n,m=e?.gdbVersion||r.gdbVersion,b={gdbVersion:m,rollbackOnFailure:e?.rollbackOnFailureEnabled,useGlobalIds:u,returnEditMoment:e?.returnEditMoment,usePreviousEditMoment:e?.usePreviousEditMoment,async:g};await(0,E.i)(this.layer.url,m,!0);const M=(0,E.a)(this.layer.url,m||null);if(await(0,E.d)(r.url,m,r.historicMoment))throw new i.A("feature-layer-source:historic-version","Editing a historic version is not allowed");e?.returnServiceEditsOption?(b.edits=JSON.stringify([{id:r.layerId,adds:d.length?d:null,updates:p.length?p:null,deletes:f.length?f:null,attachments:y,assetMaps:l}]),b.returnServiceEditsOption=_.toJSON(e?.returnServiceEditsOption),b.returnServiceEditsInSourceSR=e?.returnServiceEditsInSourceSR):(b.adds=d.length?JSON.stringify(d):null,b.updates=p.length?JSON.stringify(p):null,b.deletes=f.length?u?JSON.stringify(f):f.join(","):null,b.attachments=y&&JSON.stringify(y),b.assetMaps=null!=l?JSON.stringify(l):void 0);const w=this._getLayerRequestOptions({method:"post",query:b});M&&(w.authMode="immediate",w.query.returnEditMoment=!0,w.query.sessionId=E.c);const I=e?.returnServiceEditsOption?r.url:r.parsedUrl.path;let A;try{A=g?await this._asyncApplyEdits(I+"/applyEdits",w):await(0,o.A)(I+"/applyEdits",w)}catch(t){if(!(0,q.i)(t))throw t;w.authMode="immediate",A=g?await this._asyncApplyEdits(I+"/applyEdits",w):await(0,o.A)(I+"/applyEdits",w)}return this._createEditsResult(A)}async deleteAttachments(t,e){await this.load();const{layer:r}=this;await(0,v.a)(r,"editing");const s=t.attributes[r.objectIdField],n=r.parsedUrl.path+"/"+s+"/deleteAttachments";try{return(await(0,o.A)(n,this._getLayerRequestOptions({query:{attachmentIds:e.join(",")},method:"post"}))).data.deleteAttachmentResults.map(q.d)}catch(t){throw this._createAttachmentErrorResult(s,t)}}fetchRecomputedExtents(t={}){const e=t.signal;return this.load({signal:e}).then(async()=>{const e=this._getLayerRequestOptions({...t,query:{returnUpdates:!0}}),{layerId:r,url:s}=this.layer,{data:n}=await(0,o.A)(`${s}/${r}`,e),{id:a,extent:i,fullExtent:u,timeExtent:l}=n,c=i||u;return{id:a,fullExtent:c&&b.A.fromJSON(c),timeExtent:l&&R.A.fromJSON({start:l[0],end:l[1]})}})}async queryAttachments(t,e={}){await this.load();const r=this._getLayerRequestOptions(e);return this.queryTask.executeAttachmentQuery(t,r)}async queryFeatures(t,e){await this.load();const r=await this.queryTask.execute(t,{...e,query:this._createRequestQueryOptions(e)});if(t.outStatistics?.length&&r.features.length){const e=new Map;if(r.features.forEach(r=>{const s=r.attributes;t.outStatistics?.forEach(({outStatisticFieldName:t})=>{if(t){const r=t.toLowerCase();r&&r in s&&t!==r&&(s[t]=s[r],delete s[r],e.set(r,t))}})}),null!=r.fields)for(const t of r.fields){const r=e.get(t.name.toLowerCase());null!=r&&(t.name=r)}}return r}async queryFeaturesJSON(t,e){return await this.load(),this.queryTask.executeJSON(t,{...e,query:this._createRequestQueryOptions(e)})}async queryObjectIds(t,e){return await this.load(),this.queryTask.executeForIds(t,{...e,query:this._createRequestQueryOptions(e)})}async queryFeatureCount(t,e){return await this.load(),this.queryTask.executeForCount(t,{...e,query:this._createRequestQueryOptions(e)})}async queryExtent(t,e){return await this.load(),this.queryTask.executeForExtent(t,{...e,query:this._createRequestQueryOptions(e)})}async queryRelatedFeatures(t,e){return await this.load(),this.queryTask.executeRelationshipQuery(t,{...e,query:this._createRequestQueryOptions(e)})}async queryRelatedFeaturesCount(t,e){return await this.load(),this.queryTask.executeRelationshipQueryForCount(t,{...e,query:this._createRequestQueryOptions(e)})}async queryTopFeatures(t,e){return await this.load(),this.queryTask.executeTopFeaturesQuery(t,{...e,query:this._createRequestQueryOptions(e)})}async queryAttributeBins(t,e){return await this.load(),this.queryTask.executeAttributeBinsQuery(t,{...e,query:this._createRequestQueryOptions(e)})}async queryTopObjectIds(t,e){return await this.load(),this.queryTask.executeForTopIds(t,{...e,query:this._createRequestQueryOptions(e)})}async queryTopExtents(t,e){return await this.load(),this.queryTask.executeForTopExtents(t,{...e,query:this._createRequestQueryOptions(e)})}async queryTopCount(t,e){return await this.load(),this.queryTask.executeForTopCount(t,{...e,query:this._createRequestQueryOptions(e)})}async fetchPublishingStatus(){if(!(0,o.i)(this.layer.url))return"unavailable";const t=(0,f.fj)(this.layer.url,"status"),e=await(0,o.A)(t,{query:{f:"json"}});return P.fromJSON(e.data.status)}async uploadAssets(t,e){const{uploadAssets:s}=await r.e(9673).then(r.bind(r,59673));return s(t,{layer:this.layer,ongoingUploads:this._ongoingAssetUploads},e)}_handleLastEditsEventChange(t){const e=this.layer;if(null==t||!("capabilities"in e)||!("effectiveCapabilities"in e))return;if(e.capabilities?.operations?.supportsEditing||!e.effectiveCapabilities?.operations?.supportsEditing)return;const r=e.url;null!=r&&("layerId"in e&&(0,f.fj)(r,e.layerId.toString()),this._getOrCreateEditInterceptor(r).before=e=>{const r=e.requestOptions.method??"auto";if("auto"===r||"head"===r){const r=e.requestOptions.query??{};r._ts=t.getTime(),e.requestOptions.query=r}})}_getOrCreateEditInterceptor(t){return null==this._editInterceptor&&(this._editInterceptor={urls:t},n.A.request.internalInterceptors.push(this._editInterceptor)),this._editInterceptor}_removeEditInterceptor(){null!=this._editInterceptor&&((0,a.r)(n.A.request.internalInterceptors,this._editInterceptor),this._editInterceptor=null)}async _asyncApplyEdits(t,e){const r=(await(0,o.A)(t,e)).data.statusUrl;for(;;){const t=(await(0,o.A)(r,{query:{f:"json"},responseType:"json"})).data;switch(t.status){case"Completed":return(0,o.A)(t.resultUrl,{query:{f:"json"},responseType:"json"});case"CompletedWithErrors":throw new i.A("async-applyEdits-failed","asynchronous applyEdits call failed.");case"Failed ImportChanges":case"InProgress":case"Pending":case"ExportAttachments":case"ExportChanges":case"ExportingData":case"ExportingSnapshot":case"ImportAttachments":case"ProvisioningReplica":case"UnRegisteringReplica":break;default:throw new i.A("async-applyEdits-failed","asynchronous applyEdits call failed (undefined response status)")}await(0,h.Pl)(C)}}_createRequestQueryOptions(t){const e={...this.layer.customParameters,token:this.layer.apiKey,...t?.query};return this.layer.datesInUnknownTimezone&&(e.timeReferenceUnknownClient=!0),e}async _fetchService(t,e){if(!t){const r={};(0,a.h)("featurelayer-advanced-symbols")&&(r.returnAdvancedSymbols=!0),e?.cacheBust&&(r._ts=Date.now());const{data:s}=await(0,o.A)(this.layer.parsedUrl.path,this._getLayerRequestOptions({query:r,signal:e?.signal}));t=s}this.layer.applyPreferredHost(t),this.sourceJSON=await this._patchServiceJSON(t,e?.signal);const r=t.type;if(!this.supportedSourceTypes.has(r))throw new i.A("feature-layer-source:unsupported-type",`Source type "${r}" is not supported`)}async _patchServiceJSON(t,e){if("Table"!==t.type&&t.geometryType&&!t?.drawingInfo?.renderer&&!t.defaultSymbol){const e=(0,S.c)(t.geometryType).renderer;(0,d.s)("drawingInfo.renderer",e,t)}if("esriGeometryMultiPatch"===t.geometryType&&t.infoFor3D&&(t.geometryType="mesh"),null==t.extent)try{const{data:r}=await(0,o.A)(this.layer.url,this._getLayerRequestOptions({signal:e}));r.spatialReference&&(t.extent={xmin:0,ymin:0,xmax:0,ymax:0,spatialReference:r.spatialReference})}catch(t){(0,h.QP)(t)}return t}async _ensureLatestMetadata(t){if(this.layer.userHasUpdateItemPrivileges&&this.sourceJSON.cacheMaxAge>0)return this._fetchService(null,{...t,cacheBust:!0})}async _uploadMeshesAndGetAssetMapEditsJSON(t){const{addAssetFeatures:e}=t;if(!e?.length)return null;if(await this._areAllAssetsAlreadyMapped(e))return null;const s=t.addFeatures.filter(t=>t.geometry);if(e.length!==s.length+t.updateFeatures.length)throw new i.A("feature-layer-source:unsupported-mesh-edits","Mixing attribute only edits with mesh geometry edits is not currently supported");const n=new Array,o=new Map;for(const t of e){const{geometry:e}=t,{vertexSpace:s}=e;if((0,I.i)(s))n.push(e);else{const s=e.origin,{convertMeshVertexSpace:a}=await Promise.all([r.e(3628),r.e(2238)]).then(r.bind(r,19076)),i=await a(e,new w.A({origin:[s.x,s.y,s.z??0]}));o.set(i,e),t.geometry=i,n.push(i)}}await this.uploadAssets(n);for(const[t,e]of o)e.addExternalSources(t.metadata.externalSources.items);return{adds:this._getAssetMapEditsJSON(e),updates:[],deletes:[]}}_getAssetMapEditsJSON(t){const e=new Array,r=this.layer.globalIdField,s=this.layer.parsedUrl;for(const n of t){const t=n.geometry,{metadata:o}=t,a=o.getExternalSourcesOnService(s),i=n.getAttribute(r);if(0===a.length){c.L.getLogger(this).error(`Skipping feature ${i}. The mesh it is associated with has not been uploaded to the service and cannot be mapped to it.`);continue}const{source:u}=a.find(A.i)??a[0];for(const t of u.assets)1===t.parts.length?e.push({globalId:(0,y.a)(),parentGlobalId:i,assetName:t.assetName,assetHash:t.parts[0].partHash,flags:[]}):c.L.getLogger(this).error(`Skipping asset ${t.assetName}. It does not have exactly one part, so we cannot map it to a feature.`)}return e}_createEditsResult(t){const e=t.data,{layerId:r}=this.layer,s=[];let n=null;if(Array.isArray(e))for(const t of e)s.push({id:t.id,editedFeatures:t.editedFeatures}),t.id===r&&(n={addResults:t.addResults??[],updateResults:t.updateResults??[],deleteResults:t.deleteResults??[],attachments:t.attachments,editMoment:t.editMoment});else n=e;const o=(0,q.u)(n);if(s.length>0){o.editedFeatureResults=[];for(const t of s){const{editedFeatures:e}=t,r=e?.spatialReference?new M.A(e.spatialReference):null;o.editedFeatureResults.push({layerId:t.id,editedFeatures:(0,q.c)(e,r)})}}return o}_createAttachmentErrorResult(t,e){const r=e.details.messages?.[0]||e.message,s=e.details.httpStatus||e.details.messageCode;return{objectId:t,globalId:null,error:new i.A("feature-layer-source:attachment-failure",r,{code:s})}}_getFormDataForAttachment(t,e){const r=t instanceof FormData?t:t&&t.elements?new FormData(t):null;if(r)for(const t in e){const s=e[t];null!=s&&(r.set?r.set(t,s):r.append(t,s))}return r}_getLayerRequestOptions(t={}){const{layer:e,layer:{parsedUrl:r,gdbVersion:s}}=this;return{...t,query:{gdbVersion:s,layer:"dynamicDataSource"in e&&e.dynamicDataSource?JSON.stringify({source:e.dynamicDataSource}):void 0,...r.query,f:"json",...this._createRequestQueryOptions(t)},responseType:"json"}}async _areAllAssetsAlreadyMapped(t){const{layer:e}=this,{globalIdField:r,parsedUrl:s}=e,n="infoFor3D"in e?e.infoFor3D:null;if(null==n||null==r)return!1;const o=(0,x.b)(n);if(null==o)return!1;const i=(0,f.fj)(s.path,`../${o.id}`),u=new Array;for(const e of t){if(!(e.geometry.metadata.getExternalSourcesOnService(s).length>0))return!1;u.push(e)}const l=u.map(t=>t.getAttribute(r)).filter(a.i);if(0===l.length)return!1;const{assetMapFieldRoles:{parentGlobalId:c,assetHash:d}}=n,h=new T.A({where:`${c} IN (${l.map(t=>`'${t}'`)})`,outFields:[d,c],returnGeometry:!1}),p=await(0,N.e)(i,h),{features:y}=p;return 0!==y.length&&!u.some(t=>{const e=t.getAttribute(r);if(!e)return!0;const{metadata:n}=t.geometry,o=y.filter(t=>t.getAttribute(c)===e);if(0===o.length)return!0;const a=o.map(t=>t.getAttribute(d));return n.getExternalSourcesOnService(s).flatMap(({source:t})=>t.assets.flatMap(t=>t.parts.map(t=>t.partHash))).some(t=>a.every(e=>t!==e))})}};(0,s._)([(0,g.MZ)()],G.prototype,"type",void 0),(0,s._)([(0,g.MZ)({constructOnly:!0})],G.prototype,"layer",void 0),(0,s._)([(0,g.MZ)({constructOnly:!0})],G.prototype,"supportedSourceTypes",void 0),(0,s._)([(0,g.MZ)({readOnly:!0})],G.prototype,"queryTask",null),G=(0,s._)([(0,m.$)("esri.layers.graphics.sources.FeatureLayerSource")],G);const C=1e3},44366:(t,e,r)=>{r.d(e,{a:()=>u,b:()=>l,i:()=>i,s:()=>c,v:()=>d});var s=r(26809),n=r(64752),o=r(2895),a=r(29312);function i(t){return null!=t.origin}function u(t){return i(t.vertexSpace)}function l(t,e){if(!i(t))return null;const[r,s,o]=t.origin;return new n.A({x:r,y:s,z:o,spatialReference:e})}function c(t,e){const{x:r,y:s,z:n,spatialReference:i}=t,u=[r,s,n??0],l=e?.vertexSpace??function(t){return t.isGeographic||t.isWebMercator?"local":"georeferenced"}(i);return"local"===l?new a.A({origin:u}):new o.A({origin:u})}function d(t,e){return t.type===e.type&&(t.origin===e.origin||null!=t.origin&&null!=e.origin&&(0,s.g)(t.origin,e.origin))}},50774:(t,e,r)=>{r.d(e,{a:()=>y,b:()=>p,c:()=>M,d:()=>m,g:()=>h,i:()=>w,u:()=>g});var s=r(27281),n=r(6407),o=r(20266),a=r(69763),i=r(99063),u=r(88321),l=r(77037),c=r(86601),d=r(1921);async function h(t,e,r){const{geometry:s}=e,n={...e.attributes};if(null!=r&&"mesh"===s?.type){const{transformFieldRoles:e}=r,{origin:o,spatialReference:i,vertexSpace:l}=s,d=s.transform??new c.A,h="local"===l.type,p=t.spatialReference,f=p.isGeographic,y=(0,a.p)(p,i),g=(0,u.isEqualBaseGCS)(i,p)&&(0,u.canProjectWithoutEngine)(i,p);if(!(h&&f&&g||!h&&!f&&y))return null;const m=(0,u.projectWithoutEngine)(o,i,p);if(null==m)return null;if(n[e.originX]=m.x,n[e.originY]=m.y,n[e.originZ]=m.z??0,null!=d){const{translation:t,scale:r,rotation:s}=d,o=h?1:(0,a.P)(i)/(0,a.P)(p);n[e.translationX]=t[0]*o,n[e.translationY]=t[2]*o,n[e.translationZ]=-t[1]*o,n[e.scaleX]=r[0],n[e.scaleY]=r[2],n[e.scaleZ]=r[1],n[e.rotationX]=s[0],n[e.rotationY]=s[2],n[e.rotationZ]=-s[1],n[e.rotationDeg]=s[3]}return{attributes:n}}return null==s?{attributes:n}:"mesh"===s.type||"extent"===s.type?null:{geometry:s.toJSON(),attributes:n}}async function p(t,e){const r=await Promise.all((e.addAttachments??[]).map(e=>f(t,e))),s=await Promise.all((e.updateAttachments??[]).map(e=>f(t,e))),n=e.deleteAttachments??[];return r.length||s.length||n.length?{adds:r,updates:s,deletes:[...n]}:null}async function f(t,e){const{feature:r,attachment:s}=e,{globalId:n,name:o,contentType:a,data:u,uploadId:l}=s,c={globalId:n};if(r&&("attributes"in r?c.parentGlobalId=r.attributes?.[t.globalIdField]:r.globalId&&(c.parentGlobalId=r.globalId)),l)c.uploadId=l;else if(u){const t=await(0,i._0)(u);t&&(c.contentType=t.mediaType,c.data=t.data),u instanceof File&&(c.name=u.name)}return o&&(c.name=o),a&&(c.contentType=a),c}function y(t,e,r){if(!e||0===e.length)return[];if(r&&(0,d.zp)(e))return e.map(t=>t.globalId);if((0,d.r3)(e))return e.map(t=>t.objectId);const s=r?t.globalIdField:t.objectIdField;return s?e.map(t=>t.getAttribute(s)):[]}function g(t){const e=t?.assetMaps;if(e){for(const t of e.addResults)t.success||o.L.getLogger("esri.layers.graphics.sources.support.sourceUtils").error(`Failed to map asset to feature with globalId ${t.globalId}.`);for(const t of e.updateResults)t.success||o.L.getLogger("esri.layers.graphics.sources.support.sourceUtils").error(`Failed to map asset to feature with globalId ${t.globalId}.`)}const r=t?.attachments,s={addFeatureResults:t?.addResults?.map(m)??[],updateFeatureResults:t?.updateResults?.map(m)??[],deleteFeatureResults:t?.deleteResults?.map(m)??[],addAttachmentResults:r?.addResults?r.addResults.map(m):[],updateAttachmentResults:r?.updateResults?r.updateResults.map(m):[],deleteAttachmentResults:r?.deleteResults?r.deleteResults.map(m):[]};return t?.editMoment&&(s.editMoment=t.editMoment),s}function m(t){const e=!0===t.success?null:t.error||{code:void 0,description:"Feature edit failed"};return{objectId:t.objectId,globalId:t.globalId,error:e?new n.A("feature-layer-source:edit-failure",e.description,{code:e.code}):null}}function b(t,e){return new s.A({attributes:t.attributes,geometry:(0,l.rS)({...t.geometry,spatialReference:e})})}function M(t,e){return{adds:t?.adds?.map(t=>b(t,e))||[],updates:t?.updates?.map(t=>({original:b(t[0],e),current:b(t[1],e)}))||[],deletes:t?.deletes?.map(t=>b(t,e))||[],spatialReference:e}}function w(t){const e=t.details.raw,r=+e.code,s=+e.extendedCode;return 500===r&&(-2147217144===s||-2147467261===s)}},53104:(t,e,r)=>{r.d(e,{a:()=>d,b:()=>l,c:()=>a,d:()=>h});var s=r(32773),n=r(70648),o=r(25018);function a(t){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===t||"esriGeometryMultipoint"===t?o.d:"esriGeometryPolyline"===t?o.a:o.b}}}const i=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let u=1;function l(t,e){if((0,s.h)("esri-csp-restrictions"))return()=>({[e]:null,...t});try{let r=`this${c(e)} = null;`;for(const e in t)r+=`this${c(e)} = ${JSON.stringify(t[e])};`;const s=new Function(`\n      return class AttributesClass$${u++} {\n        constructor() {\n          ${r};\n        }\n      }\n    `)();return()=>new s}catch(r){return()=>({[e]:null,...t})}}function c(t){return i.test(t)?`.${t}`:`["${t}"]`}function d(t={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,s.o8)(t)}}]}function h(t,e){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:e,supportsDelete:e,supportsEditing:e,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:e,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:n.a,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:n.q,editing:{supportsGeometryUpdate:e,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},58003:(t,e,r)=>{r.d(e,{O:()=>h,g:()=>a,h:()=>p});var s=r(33489),n=r(96153);function o(t,e){return t?e?4:3:e?3:2}function a(t,e,r,s){if(!e?.lengths.length)return null;t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0);const n=t.coords,a=[],h=r?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:p,coords:f}=e,y=o(r,s);let g=0;for(const t of p){const e=i(h,f,g,t,r,s);e&&a.push(e),g+=t*y}if(a.sort((t,e)=>{let s=t[2]-e[2];return 0===s&&r&&(s=t[4]-e[4]),s}),a.length){let t=6*a[0][2];n[0]=a[0][0]/t,n[1]=a[0][1]/t,r&&(t=6*a[0][4],n[2]=0!==t?a[0][3]/t:0),(n[0]<h[0]||n[0]>h[1]||n[1]<h[2]||n[1]>h[3]||r&&(n[2]<h[4]||n[2]>h[5]))&&(n.length=0)}if(!n.length){const t=e.lengths[0]?function(t,e,r,s,n){const a=o(s,n);let i=0,h=0+a,p=0,f=0,y=0,g=0;for(let e=0,n=r-1;e<n;e++,i+=a,h+=a){const e=t[i],r=t[i+1],n=t[i+2],o=t[h],a=t[h+1],m=t[h+2],b=s?l(e,r,n,o,a,m):u(e,r,o,a);if(b)if(p+=b,s){const t=d(e,r,n,o,a,m);f+=b*t[0],y+=b*t[1],g+=b*t[2]}else{const t=c(e,r,o,a);f+=b*t[0],y+=b*t[1]}}return p>0?s?[f/p,y/p,g/p]:[f/p,y/p]:r>0?s?[t[0],t[1],t[2]]:[t[0],t[1]]:null}(f,0,p[0],r,s):null;if(!t)return null;n[0]=t[0],n[1]=t[1],r&&t.length>2&&(n[2]=t[2])}return t}function i(t,e,r,s,n,a){const i=o(n,a);let u=r,l=r+i,c=0,d=0,h=0,p=0,f=0;for(let r=0,o=s-1;r<o;r++,u+=i,l+=i){const r=e[u],s=e[u+1],o=e[u+2],a=e[l],i=e[l+1],y=e[l+2];let g=r*i-a*s;p+=g,c+=(r+a)*g,d+=(s+i)*g,n&&(g=r*y-a*o,h+=(o+y)*g,f+=g),r<t[0]&&(t[0]=r),r>t[1]&&(t[1]=r),s<t[2]&&(t[2]=s),s>t[3]&&(t[3]=s),n&&(o<t[4]&&(t[4]=o),o>t[5]&&(t[5]=o))}if(p>0&&(p*=-1),f>0&&(f*=-1),!p)return null;const y=[c,d,.5*p];return n&&(y[3]=h,y[4]=.5*f),y}function u(t,e,r,s){const n=r-t,o=s-e;return Math.sqrt(n*n+o*o)}function l(t,e,r,s,n,o){const a=s-t,i=n-e,u=o-r;return Math.sqrt(a*a+i*i+u*u)}function c(t,e,r,s){return[t+.5*(r-t),e+.5*(s-e)]}function d(t,e,r,s,n,o){return[t+.5*(s-t),e+.5*(n-e),r+.5*(o-r)]}class h{constructor(t=null,e={},r,s,n=0){this.geometry=t,this.attributes=e,this.centroid=r,this.objectId=s,this.displayId=n}static fromJSON(t){const e=t.geometry?n.O.fromJSON(t.geometry):null,r=t.centroid?n.O.fromJSON(t.centroid):null,s=t.objectId;return new h(e,t.attributes,r,s)}weakClone(){const t=new h(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t}clone(){const t=this.geometry?.clone(),e=new h(t,{...this.attributes},this.centroid?.clone(),this.objectId);return e.displayId=this.displayId,e}ensureCentroid(t){return this.centroid??=a(new n.O,this.geometry,t.hasZ,t.hasM),this.centroid}get usedMemory(){return 128+(0,s.c)(this.attributes)+(this.geometry?.usedMemory??0)}}function p(t){return!!t.geometry?.coords?.length}},70648:(t,e,r)=>{r.d(e,{a:()=>s,q:()=>n});const s={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!0,supportsCurrentUser:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsPaginationOnAggregatedQueries:!1,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!0,supportsReturnMesh:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,maxUniqueIDCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0,supportsTrueCurve:!1},n={supportsDate:!0,supportsFixedInterval:!0,supportsAutoInterval:!0,supportsFixedBoundaries:!0,supportsStackBy:!0,supportsSplitBy:!0,supportsSnapToData:!1,supportsReturnFullIntervalBin:!1,supportsFirstDayOfWeek:!1,supportsNormalization:!0,supportedStatistics:{count:!0,sum:!0,avg:!0,var:!0,stddev:!0,min:!0,max:!0,percentileContinuous:!0,percentileDiscrete:!0,envelope:!0,centroid:!0,convexHull:!0},supportedNormalizationTypes:{field:!0,log:!0,naturalLog:!0,percentOfTotal:!0,squareRoot:!0}}},80323:(t,e,r)=>{r.d(e,{a:()=>f,b:()=>y,c:()=>g,d:()=>d,e:()=>l,f:()=>c,g:()=>p,u:()=>b});var s=r(16699),n=r(47812),o=r(92349),a=r(80401),i=r(26809),u=r(2589);function l(t=b){return[t[0],t[1],t[2],t[3]]}function c(t,e,r=l()){return(0,i.e)(r,t),r[3]=e,r}function d(t,e=l()){const r=(0,n.g)(M,t);return m(e,(0,s.r)((0,o.g)(e,r))),e}function h(t,e,r=l()){return(0,o.s)(M,t,g(t)),(0,o.s)(w,e,g(e)),(0,o.m)(M,w,M),m(r,(0,s.r)((0,o.g)(r,M)))}function p(t,e,r,s=l()){return c(u.U,t,I),c(u.d,e,A),c(u.e,r,q),h(I,A,I),h(I,q,s),s}function f(t){return t}function y(t){return t[3]}function g(t){return(0,s.e)(t[3])}function m(t,e){return t[3]=e,t}const b=[0,0,1,0],M=(0,a.c)(),w=(0,a.c)();l();const I=l(),A=l(),q=l()},80401:(t,e,r)=>{function s(){return[0,0,0,1]}function n(t){return[t[0],t[1],t[2],t[3]]}r.d(e,{I:()=>o,a:()=>n,c:()=>s});const o=[0,0,0,1]},83637:(t,e,r)=>{r.d(e,{a:()=>Y,b:()=>H,c:()=>X,d:()=>z,e:()=>V,f:()=>B,g:()=>at,h:()=>st,i:()=>k,j:()=>Z,k:()=>D,l:()=>v,m:()=>j,n:()=>tt,o:()=>K,p:()=>ht,q:()=>rt,r:()=>ut,s:()=>ct,t:()=>I,u:()=>it,v:()=>A,w:()=>C,x:()=>Q,y:()=>et});var s=r(6407),n=r(20266),o=r(57732),a=r(47239),i=r(48402),u=r(77037),l=r(58003),c=r(11443),d=r(96153),h=r(92963);function p(t,e){return t?e?4:3:e?3:2}const f=()=>n.L.getLogger("esri.layers.graphics.featureConversionUtils"),y={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryMultiPatch:3,esriGeometryEnvelope:0},g=(t,e,r,s,n,o)=>{t[r]=n,t[r+1]=o},m=(t,e,r,s,n,o)=>{t[r]=n,t[r+1]=o,t[r+2]=e[s+2]},b=(t,e,r,s,n,o)=>{t[r]=n,t[r+1]=o,t[r+2]=e[s+3]},M=(t,e,r,s,n,o)=>{t[r]=n,t[r+1]=o,t[r+2]=e[s+2],t[r+3]=e[s+3]};function w(t,e,r,s){if(t){if(r)return e&&s?M:m;if(e&&s)return b}else if(e&&s)return m;return g}function I({scale:t,translate:e},r){return Math.round((r-e[0])/t[0])}function A({scale:t,translate:e},r){return Math.round((e[1]-r)/t[1])}function q({scale:t,translate:e},r){return Math.round((r-e[0])/t[0])}function S({scale:t,translate:e},r){return Math.round((r-e[1])/t[1])}function O({scale:t,translate:e},r,s){return r*t[s]+e[s]}function v(t,e,r){return t?e?r?_(t):F(t):r?R(t):x(t):null}function x(t){const e=t.coords;return{x:e[0],y:e[1]}}function N(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function F(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2]}}function T(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function R(t){const e=t.coords;return{x:e[0],y:e[1],m:e[2]}}function E(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function _(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function P(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function G(t,e){return t&&e?P:t?T:e?E:N}function C(t,e,r=G(null!=e.z,null!=e.m)){return r(t,e)}function k(t,e,r){if(null==t)return null;const s=p(e,r),n=[];for(let e=0;e<t.coords.length;e+=s){const r=[];for(let n=0;n<s;n++)r.push(t.coords[e+n]);n.push(r)}return e?r?{points:n,hasZ:e,hasM:r}:{points:n,hasZ:e}:r?{points:n,hasM:r}:{points:n}}function L(t,e,r=p(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const s=t.coords;let n=0;for(const t of e.points)for(let e=0;e<r;e++)s[n++]=t[e];return t}function D(t,e,r){if(!t)return null;const s=p(e,r),{coords:n,lengths:o}=t,a=[];let i=0;for(const t of o){const e=[];for(let r=0;r<t;r++){const t=[];for(let e=0;e<s;e++)t.push(n[i++]);e.push(t)}a.push(e)}return e?r?{paths:a,hasZ:e,hasM:r}:{paths:a,hasZ:e}:r?{paths:a,hasM:r}:{paths:a}}function U(t,e,r=p(e.hasZ,e.hasM)){const{lengths:s,coords:n}=t;let o=0;for(const t of e.paths){for(const e of t)for(let t=0;t<r;t++)n[o++]=e[t];s.push(t.length)}return t}function Z(t,e,r){if(!t)return null;const s=p(e,r),{coords:n,lengths:o}=t,a=[];let i=0;for(const t of o){const e=[];for(let r=0;r<t;r++){const t=[];for(let e=0;e<s;e++)t.push(n[i++]);e.push(t)}a.push(e)}return e?r?{rings:a,hasZ:e,hasM:r}:{rings:a,hasZ:e}:r?{rings:a,hasM:r}:{rings:a}}function j(t,e,r=e.hasZ,s=e.hasM){return Q(t,e.rings,r,s)}function Q(t,e,r,s){const n=p(r,s),{lengths:o,coords:a}=t;let i=0;pt(t);for(const t of e){for(const e of t)for(let t=0;t<n;t++)a[i++]=e[t];o.push(t.length)}return t}const J=[],$=[];function B(t,e,r,s,n){J[0]=t;const[o]=z($,J,e,r,s,n);return ft(J),ft($),o}function z(t,e,r,n,o,a){if(ft(t),!r){for(const r of e){const e=(0,h.a)(r,a);t.push(new l.O(null,r.attributes,null,e))}return t}switch(r){case"esriGeometryPoint":return function(t,e,r,s,n){const o=G(r,s);for(const r of e){const e=null!=r.geometry?o(new d.O,r.geometry):null;t.push(new l.O(e,r.attributes,null,(0,h.a)(r,n)))}return t}(t,e,n,o,a);case"esriGeometryMultipoint":return function(t,e,r,s,n){const o=p(r,s);for(const r of e){const e=null!=r.geometry?L(new d.O,r.geometry,o):null;t.push(new l.O(e,r.attributes,null,(0,h.a)(r,n)))}return t}(t,e,n,o,a);case"esriGeometryPolyline":return function(t,e,r,s,n){const o=p(r,s);for(const r of e){const e=null!=r.geometry?U(new d.O,r.geometry,o):null,s=null!=r.centroid?C(new d.O,r.centroid):null;t.push(new l.O(e,r.attributes,s,(0,h.a)(r,n)))}return t}(t,e,n,o,a);case"esriGeometryPolygon":case"esriGeometryMultiPatch":return function(t,e,r,s,n){for(const o of e){const e=null!=o.geometry?j(new d.O,o.geometry,r,s):null,a=(0,h.a)(o,n);null!=o.centroid?t.push(new l.O(e,o.attributes,N(new d.O,o.centroid),a)):t.push(new l.O(e,o.attributes,null,a))}return t}(t,e,n,o,a);default:f().error("convertToFeatureSet:unknown-geometry",new s.A("internal:geometry",`Unable to parse unknown geometry type '${r}'`)),ft(t)}return t}function V(t,e,r,s){$[0]=t,W(J,$,e,r,s);const n=J[0];return ft(J),ft($),n}function H(t,e,r){if(null==t)return null;const n=new d.O;return"hasZ"in t&&null==e&&(e=t.hasZ),"hasM"in t&&null==r&&(r=t.hasM),(0,u.fT)(t)?G(null!=e?e:null!=t.z,null!=r?r:null!=t.m)(n,t):(0,u.Bi)(t)?j(n,t,e,r):(0,u.Rg)(t)?U(n,t,p(e,r)):(0,u.U9)(t)?L(n,t,p(e,r)):void f().error("convertFromGeometry:unknown-geometry",new s.A("internal:geometry",`Unable to parse unknown geometry type '${t}'`))}function Y(t,e,r,n){const o=t&&("coords"in t?t:t.geometry);if(null==o)return null;switch(e){case"esriGeometryPoint":{let t=x;return r&&n?t=_:r?t=F:n&&(t=R),t(o)}case"esriGeometryMultipoint":return k(o,r,n);case"esriGeometryPolyline":return D(o,r,n);case"esriGeometryPolygon":return Z(o,r,n);default:return f().error("convertToGeometry:unknown-geometry",new s.A("internal:geometry",`Unable to parse unknown geometry type '${e}'`)),null}}function W(t,e,r,n,o){if(ft(t),null==r)return function(t,e){for(const r of e)t.push({attributes:r.attributes});return t}(t,e);switch(r){case"esriGeometryPoint":return function(t,e,r,s){let n=x;r&&s?n=_:r?n=F:s&&(n=R);for(const r of e){const{geometry:e,attributes:s}=r,o=null!=e?n(e):null;t.push({attributes:s,geometry:o})}return t}(t,e,n,o);case"esriGeometryMultipoint":return function(t,e,r,s){for(const{geometry:n,attributes:o}of e)t.push({attributes:o,geometry:null!=n?k(n,r,s):null});return t}(t,e,n,o);case"esriGeometryPolyline":return function(t,e,r,s){for(const{geometry:n,attributes:o}of e)t.push({attributes:o,geometry:null!=n?D(n,r,s):null});return t}(t,e,n,o);case"esriGeometryPolygon":return function(t,e,r,s){for(const{geometry:n,attributes:o,centroid:a}of e){const e=null!=n?Z(n,r,s):null;if(null!=a){const r=x(a);t.push({attributes:o,centroid:r,geometry:e})}else t.push({attributes:o,geometry:e})}return t}(t,e,n,o);default:f().error("convertToFeatureSet:unknown-geometry",new s.A("internal:geometry",`Unable to parse unknown geometry type '${r}'`))}return t}function X(t){const{spatialReference:e,transform:r,fields:s,hasM:n,hasZ:o,features:a,geometryType:i,exceededTransferLimit:u,queryGeometry:l,queryGeometryType:c}=t,d={features:W([],a,i,o,n),fields:s,geometryType:i,spatialReference:e,queryGeometry:Y(l,c,!1,!1)};return r&&(d.transform=r),u&&(d.exceededTransferLimit=u),n&&(d.hasM=n),o&&(d.hasZ=o),d}function K(t,e){const r=new c.O,{hasM:s,hasZ:n,features:o,spatialReference:a,geometryType:i,exceededTransferLimit:u,transform:l,fields:d}=t;return d&&(r.fields=d),r.geometryType=i??null,r.spatialReference=a??null,o&&z(r.features,o,i,n,s,e),u&&(r.exceededTransferLimit=u),s&&(r.hasM=s),n&&(r.hasZ=n),l&&(r.transform=l),r}function tt(t){const{transform:e,features:r,hasM:s,hasZ:n}=t;if(!e)return t;for(const t of r)null!=t.geometry&&it(t.geometry,t.geometry,s,n,e),null!=t.centroid&&it(t.centroid,t.centroid,s,n,e);return t.transform=null,t}function et(t,e){const{geometryType:r,features:s,hasM:n,hasZ:o}=e;if(!t)return e;for(let e=0;e<s.length;e++){const a=s[e],i=a.weakClone();i.geometry=new d.O,rt(i.geometry,a.geometry,n,o,r,t),a.centroid&&(i.centroid=new d.O,rt(i.centroid,a.centroid,n,o,"esriGeometryPoint",t)),s[e]=i}return e.transform=t,e}function rt(t,e,r,s,n,o,a=r,i=s){if(pt(t),!e?.coords.length)return null;const u=y[n],{coords:l,lengths:c}=e,d=p(r,s),h=p(r&&a,s&&i),f=w(r,s,a,i);if(!c.length)return f(t.coords,l,0,0,I(o,l[0]),A(o,l[1])),pt(t,d,0),t;let g,m,b,M,q=0,S=0,O=S;for(const e of c){if(e<u)continue;let r=0;S=O,b=g=I(o,l[q]),M=m=A(o,l[q+1]),f(t.coords,l,S,q,b,M),r++,q+=d,S+=h;for(let s=1;s<e;s++,q+=d)b=I(o,l[q]),M=A(o,l[q+1]),b===g&&M===m||(f(t.coords,l,S,q,b-g,M-m),S+=h,r++,g=b,m=M);r>=u&&(t.lengths.push(r),O=S)}return ft(t.coords,O),t.coords.length?t:null}function st(t,e,r,s,n,o,a=r,i=s){if(pt(t),!e?.coords.length)return null;const u=y[n],{coords:l,lengths:c}=e,d=p(r,s),h=p(r&&a,s&&i),f=w(r,s,a,i);if(!c.length)return f(t.coords,l,0,0,l[0],l[1]),pt(t,d,0),t;let g=0;const m=o*o;for(const e of c){if(e<u){g+=e*d;continue}const r=t.coords.length/h,s=g,n=g+(e-1)*d;f(t.coords,l,t.coords.length,s,l[s],l[s+1]),ot(t.coords,l,d,m,f,s,n),f(t.coords,l,t.coords.length,n,l[n],l[n+1]);const o=t.coords.length/h-r;o>=u?t.lengths.push(o):ft(t.coords,r*h),g+=e*d}return t.coords.length?t:null}function nt(t,e,r,s){const n=t[e],o=t[e+1],a=t[r],i=t[r+1],u=t[s],l=t[s+1];let c=a,d=i,h=u-c,p=l-d;if(0!==h||0!==p){const t=((n-c)*h+(o-d)*p)/(h*h+p*p);t>1?(c=u,d=l):t>0&&(c+=h*t,d+=p*t)}return h=n-c,p=o-d,h*h+p*p}function ot(t,e,r,s,n,o,a){let i,u=s,l=0;for(let t=o+r;t<a;t+=r)i=nt(e,t,o,a),i>u&&(l=t,u=i);u>s&&(l-o>r&&ot(t,e,r,s,n,o,l),n(t,e,t.length,l,e[l],e[l+1]),a-l>r&&ot(t,e,r,s,n,l,a))}function at(t,e,r,s){if(!e?.coords?.length)return null;const n=p(r,s);let o=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY;if(e&&e.coords){const t=e.coords;for(let e=0;e<t.length;e+=n){const r=t[e],s=t[e+1];o=Math.min(o,r),l=Math.max(l,r),u=Math.min(u,s),c=Math.max(c,s)}}return(0,a.i)(t)?(0,a.a)(t,o,u,l,c):(0,i.f)(o,u,l,c,t),t}function it(t,e,r,s,n){const{coords:a,lengths:i}=e,u=p(r,s);if(!a.length)return t!==e&&pt(t),t;(0,o.b)(n);const{originPosition:l,scale:c,translate:d}=n,h=yt;h.originPosition=l;const f=h.scale;f[0]=c[0]??1,f[1]=-(c[1]??1),f[2]=c[2]??1,f[3]=c[3]??1;const y=h.translate;if(y[0]=d[0]??0,y[1]=d[1]??0,y[2]=d[2]??0,y[3]=d[3]??0,!i.length){for(let e=0;e<u;++e)t.coords[e]=O(h,a[e],e);return t!==e&&pt(t,u,0),t}let g=0;for(let e=0;e<i.length;e++){const r=i[e];t.lengths[e]=r;for(let e=0;e<u;++e)t.coords[g+e]=O(h,a[g+e],e);let s=t.coords[g],n=t.coords[g+1];g+=u;for(let e=1;e<r;e++,g+=u){s+=a[g]*f[0],n+=a[g+1]*f[1],t.coords[g]=s,t.coords[g+1]=n;for(let e=2;e<u;++e)t.coords[g+e]=O(h,a[g+e],e)}}return t!==e&&pt(t,a.length,i.length),t}function ut(t,e,r,s,n,o){if(pt(t),t.lengths.push(...e.lengths),r===n&&s===o)for(let r=0;r<e.coords.length;r++)t.coords.push(e.coords[r]);else{const a=p(r,s),i=w(r,s,n,o),u=e.coords;for(let e=0;e<u.length;e+=a)i(t.coords,u,t.coords.length,e,u[e],u[e+1])}return t}function lt(t,e,r,s){let n=0,o=t[s*e],a=t[s*(e+1)];for(let i=1;i<r;i++){const r=o+t[s*(e+i)],u=a+t[s*(e+i)+1],l=(r-o)*(u+a);o=r,a=u,n+=l}return.5*n}function ct(t,e){const{coords:r,lengths:s}=t;let n=0,o=0;for(let t=0;t<s.length;t++){const a=s[t];o+=lt(r,n,a,e),n+=a}return Math.abs(o)}function dt(t,e,r,s){return 0===t*s-r*e&&t*r+e*s>0}function ht(t,e,r,s,n){const o=p(s,n);if(!t.lengths.length){if(t.coords.length<2)return null;const[r,s]=t.coords,n=q(e,r),o=S(e,s);return new d.O([],[n,o])}const a=new d.O([],[0,0]),i=y[r],u="esriGeometryPolygon"===r||"esriGeometryPolyline"===r;let l=0,c=0;for(let r=0;r<t.lengths.length;r++){const s=t.lengths[r],n=c;let d=q(e,t.coords[o*l]),h=S(e,t.coords[o*l+1]);a.coords[c++]=d,a.coords[c++]=h;let p=0,f=0,y=1;for(let r=1;r<s;r++){const s=q(e,t.coords[o*(r+l)]),n=S(e,t.coords[o*(r+l)+1]);if(s!==d||n!==h){const t=s-d,e=n-h;u&&dt(p,f,t,e)?(a.coords[c-2]+=t,a.coords[c-1]+=e,d+=t,h+=e):(a.coords[c++]=s,a.coords[c++]=n,d=s,h=n,p=t,f=e,y+=1)}}y<i?c=n:a.lengths.push(y),l+=s}return 0===a.lengths.length?null:a}function pt(t,e=0,r=0){ft(t.lengths,r),ft(t.coords,e)}function ft(t,e=0){t.length!==e&&(t.length=e)}const yt={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]}},86601:(t,e,r)=>{r.d(e,{A:()=>f});var s=r(32816),n=r(52731),o=r(99924),a=r(29298),i=(r(32773),r(20266),r(69421)),u=r(47812),l=r(87162),c=r(92349),d=r(80401),h=r(2589),p=r(80323);r(41390),r(85176),r(93181),r(13671),r(50704),r(40499),r(36555),r(58498),r(91047),r(35819),r(45371),r(61532),r(80959),r(6407),r(59121),r(19247),r(36172),r(36544),r(90740),r(84699),r(48064),r(18527),r(26809),r(91276),r(16699);let f=class extends((0,n.O)(o.o)){constructor(t){super(t),this.translation=(0,h.c)(),this.rotationAxis=(0,h.a)(p.u),this.rotationAngle=0,this.scale=(0,h.f)(1,1,1)}get rotation(){return(0,p.f)(this.rotationAxis,this.rotationAngle)}set rotation(t){this.rotationAxis=(0,h.b)((0,p.a)(t)),this.rotationAngle=(0,p.b)(t)}get localMatrix(){const t=(0,l.c)();return(0,c.s)(y,(0,p.a)(this.rotation),(0,p.c)(this.rotation)),(0,u.f)(t,y,this.translation,this.scale),t}get localMatrixInverse(){return(0,u.i)((0,l.c)(),this.localMatrix)}equals(t){return this===t||null!=t&&(0,u.e)(this.localMatrix,t.localMatrix)}};(0,s._)([(0,a.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],f.prototype,"translation",void 0),(0,s._)([(0,a.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],f.prototype,"rotationAxis",void 0),(0,s._)([(0,a.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],f.prototype,"rotationAngle",void 0),(0,s._)([(0,a.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],f.prototype,"scale",void 0),(0,s._)([(0,a.MZ)()],f.prototype,"rotation",null),(0,s._)([(0,a.MZ)()],f.prototype,"localMatrix",null),(0,s._)([(0,a.MZ)()],f.prototype,"localMatrixInverse",null),f=(0,s._)([(0,i.$)("esri.geometry.support.MeshTransform")],f);const y=(0,d.c)()},87162:(t,e,r)=>{function s(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function n(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}r.d(e,{I:()=>o,a:()=>n,c:()=>s});const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},92349:(t,e,r)=>{r.d(e,{a:()=>d,c:()=>l,e:()=>h,f:()=>c,g:()=>i,m:()=>u,s:()=>a});var s=r(2589),n=r(18527),o=(r(26809),r(91276));function a(t,e,r){r*=.5;const s=Math.sin(r);return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=Math.cos(r),t}function i(t,e){const r=2*Math.acos(e[3]),s=Math.sin(r/2);return s>(0,n.g)()?(t[0]=e[0]/s,t[1]=e[1]/s,t[2]=e[2]/s):(t[0]=1,t[1]=0,t[2]=0),r}function u(t,e,r){const s=e[0],n=e[1],o=e[2],a=e[3],i=r[0],u=r[1],l=r[2],c=r[3];return t[0]=s*c+a*i+n*l-o*u,t[1]=n*c+a*u+o*i-s*l,t[2]=o*c+a*l+s*u-n*i,t[3]=a*c-s*i-n*u-o*l,t}function l(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function c(t,e,r,s){const n=.5*Math.PI/180;e*=n,r*=n,s*=n;const o=Math.sin(e),a=Math.cos(e),i=Math.sin(r),u=Math.cos(r),l=Math.sin(s),c=Math.cos(s);return t[0]=o*u*c-a*i*l,t[1]=a*i*c+o*u*l,t[2]=a*u*l-o*i*c,t[3]=a*u*c+o*i*l,t}const d=o.s,h=o.a;(0,s.c)(),(0,s.f)(1,0,0),(0,s.f)(0,1,0)},96153:(t,e,r)=>{r.d(e,{O:()=>n});var s=r(33489);class n{constructor(t=[],e=[]){this.lengths=t??[],this.coords=e??[]}static fromJSON(t){return new n(t.lengths,t.coords)}static fromRect(t){const[e,r,s,o]=t,a=s-e,i=o-r;return new n([5],[e,r,a,0,0,i,-a,0,0,-i])}get isPoint(){return 0===this.lengths.length&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,e)=>t+e)}get usedMemory(){return 64+(0,s.e)(this.lengths,this.coords)}area(){let t=0,e=0;if(!this.lengths.length)return 0;for(let r=0;r<this.lengths.length;r++){const s=this.lengths[r];if(s<3)continue;let n=this.coords[2*e],o=this.coords[2*e+1];for(let r=1;r<s;r+=1){const s=this.coords[2*(r+e)],a=this.coords[2*(r+e)+1];t+=-.5*(s-n)*(a+o),n=s,o=a}e+=s}return t}forEachVertex(t){let e=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const s=this.lengths[r];for(let r=0;r<s;r++)t(this.coords[2*(r+e)],this.coords[2*(r+e)+1]);e+=s}}deltaDecode(){const t=this.clone(),{coords:e,lengths:r}=t;let s=0;for(const t of r){for(let r=1;r<t;r++)e[2*(s+r)]+=e[2*(s+r)-2],e[2*(s+r)+1]+=e[2*(s+r)-1];s+=t}return t}clone(t){if(0===this.lengths.length)return new n([],[this.coords[0],this.coords[1]]);const e=2*(0===this.lengths.length?1:this.lengths.reduce((t,e)=>t+e)),r=this.coords.slice(0,e);return t?(t.set(r),new n(this.lengths,t)):new n(Array.from(this.lengths),Array.from(r))}}}}]);