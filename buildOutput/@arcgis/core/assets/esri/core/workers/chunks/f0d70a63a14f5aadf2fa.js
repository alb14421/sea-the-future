"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[8340],{18340:(e,t,r)=>{r.r(t),r.d(t,{default:()=>U});var i=r(32816),s=r(90740),l=r(64604),n=r(2810),a=r(80959),o=r(99063),u=r(29298),d=(r(32773),r(20266),r(49877)),p=r(69421),h=r(44600),c=r(69763),y=r(73597),m=r(31315),g=r(88730),f=r(38424),v=r(46935),w=r(96807),_=r(65174),P=r(23351),S=r(54512),M=r(29447),T=r(53103),b=r(93471);r(59121),r(29512),r(6407),r(1178),r(41390),r(85176),r(93181),r(13671),r(50704),r(40499),r(36555),r(58498),r(91047),r(35819),r(45371),r(61532),r(36172),r(99924),r(19247),r(36544),r(84699),r(48064),r(2160),r(7969),r(56273),r(93804),r(96221),r(18683),r(64752),r(48844),r(29208),r(81272),r(80473),r(73509),r(28276),r(58194),r(4734),r(50214),r(59192),r(16345),r(54483),r(60369),r(13201),r(13226),r(43534),r(47812),r(18527),r(73067),r(23916),r(17745),r(44945),r(93074),r(67321),r(82408),r(91658),r(70580),r(75191),r(24319),r(62092),r(43059),r(89935),r(49813),r(82454),r(88321),r(2589),r(36533),r(84200),r(97827),r(18169),r(20762),r(48402),r(16699),r(67504),r(47387),r(46728),r(21632),r(64102),r(17012),r(52731),r(98203),r(30011),r(54131),r(19869),r(53065),r(20804),r(63834),r(87357),r(19969),r(9207),r(64524),r(88663),r(35121),r(35902),r(64884),r(53610),r(78273),r(49475);const I=["atom","xml"],E={base:b.A,key:"type",typeMap:{"simple-line":M.A},errorContext:"symbol"},A={base:b.A,key:"type",typeMap:{"picture-marker":P.A,"simple-marker":T.A},errorContext:"symbol"},D={base:b.A,key:"type",typeMap:{"simple-fill":S.A},errorContext:"symbol"};let Z=class extends((0,m.dM)((0,v.J)((0,g.q)((0,f.A)((0,w.j)((0,n.M)(y.A))))))){constructor(...e){super(...e),this.description=null,this.fullExtent=null,this.legendEnabled=!0,this.lineSymbol=null,this.pointSymbol=null,this.polygonSymbol=null,this.operationalLayerType="GeoRSS",this.url=null,this.type="geo-rss"}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}readFeatureCollections(e,t){return t.featureCollection.layers.forEach(e=>{const t=e.layerDefinition.drawingInfo.renderer.symbol;t&&"esriSFS"===t.type&&t.outline?.style.includes("esriSFS")&&(t.outline.style="esriSLSSolid")}),t.featureCollection.layers}get hasPoints(){return this._hasGeometry("esriGeometryPoint")}get hasPolylines(){return this._hasGeometry("esriGeometryPolyline")}get hasPolygons(){return this._hasGeometry("esriGeometryPolygon")}get title(){const e=this._get("title");return e&&"defaults"!==this.originOf("title")?e:this.url?(0,o.e7)(this.url,I)||"GeoRSS":e}set title(e){this._set("title",e)}load(e){const t=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service","Feature Service","Feature Collection","Scene Service"]},e).catch(a.QP).then(()=>this._fetchService(t)).then(e=>{this.read(e,{origin:"service"})})),Promise.resolve(this)}async hasDataChanged(){const e=await this._fetchService();return this.read(e,{origin:"service",ignoreDefaults:!0}),!0}async _fetchService(e){const t=this.spatialReference,{data:r}=await(0,l.A)(s.A.geoRSSServiceUrl,{query:{url:this.url,refresh:!!this.loaded||void 0,outSR:(0,c.i)(t)?void 0:t.wkid??JSON.stringify(t)},signal:e});return r}_hasGeometry(e){return this.featureCollections?.some(t=>t.featureSet?.geometryType===e&&t.featureSet.features?.length>0)??!1}};(0,i._)([(0,u.MZ)()],Z.prototype,"description",void 0),(0,i._)([(0,u.MZ)()],Z.prototype,"featureCollections",void 0),(0,i._)([(0,d.r)("service","featureCollections",["featureCollection.layers"])],Z.prototype,"readFeatureCollections",null),(0,i._)([(0,u.MZ)({type:h.A,json:{name:"lookAtExtent"}})],Z.prototype,"fullExtent",void 0),(0,i._)([(0,u.MZ)(_.i)],Z.prototype,"id",void 0),(0,i._)([(0,u.MZ)(_.a)],Z.prototype,"legendEnabled",void 0),(0,i._)([(0,u.MZ)({types:E,json:{write:!0}})],Z.prototype,"lineSymbol",void 0),(0,i._)([(0,u.MZ)({type:["show","hide"]})],Z.prototype,"listMode",void 0),(0,i._)([(0,u.MZ)({types:A,json:{write:!0}})],Z.prototype,"pointSymbol",void 0),(0,i._)([(0,u.MZ)({types:D,json:{write:!0}})],Z.prototype,"polygonSymbol",void 0),(0,i._)([(0,u.MZ)({type:["GeoRSS"]})],Z.prototype,"operationalLayerType",void 0),(0,i._)([(0,u.MZ)(_.u)],Z.prototype,"url",void 0),(0,i._)([(0,u.MZ)({json:{origins:{service:{read:{source:"name",reader:e=>e||void 0}}}}})],Z.prototype,"title",null),(0,i._)([(0,u.MZ)({readOnly:!0,json:{read:!1},value:"geo-rss"})],Z.prototype,"type",void 0),Z=(0,i._)([(0,p.$)("esri.layers.GeoRSSLayer")],Z);const U=Z},23351:(e,t,r)=>{r.d(t,{A:()=>c});var i,s=r(32816),l=r(32773),n=r(87985),a=r(29298),o=(r(20266),r(88663)),u=r(49877),d=r(69421),p=r(35121),h=r(64884);r(36544),r(85176),r(93181),r(13671),r(40499),r(6407),r(59121),r(90740),r(84699),r(93804),r(50704),r(91047),r(48064),r(93471),r(35902),r(13226),r(16699),r(99924),r(41390),r(36555),r(58498),r(35819),r(45371),r(61532),r(80959),r(19247),r(36172),r(99063),r(1178),r(29512);let c=i=class extends p.A{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&"string"!=typeof e&&null==e.imageData)return e;const i={};return e&&(i.url=e),null!=t&&(i.width=(0,n.t)(t)),null!=r&&(i.height=(0,n.t)(r)),i}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new i({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",(0,l.o8)(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};(0,s._)([(0,a.MZ)({json:{write:!1}})],c.prototype,"color",void 0),(0,s._)([(0,o.e)({esriPMS:"picture-marker"},{readOnly:!0})],c.prototype,"type",void 0),(0,s._)([(0,a.MZ)(h.u)],c.prototype,"url",void 0),(0,s._)([(0,a.MZ)(h.s)],c.prototype,"source",void 0),(0,s._)([(0,a.MZ)({type:Number,cast:n.t,json:{write:!0}})],c.prototype,"height",void 0),(0,s._)([(0,u.r)("height",["height","size"])],c.prototype,"readHeight",null),(0,s._)([(0,a.MZ)({type:Number,cast:n.t,json:{write:!0}})],c.prototype,"width",void 0),(0,s._)([(0,a.MZ)({json:{write:!1}})],c.prototype,"size",void 0),c=i=(0,s._)([(0,d.$)("esri.symbols.PictureMarkerSymbol")],c)},38424:(e,t,r)=>{r.d(t,{A:()=>S});var i=r(32816),s=r(90740),l=r(29512),n=r(64604),a=r(73067),o=r(6407),u=r(20266),d=r(57732),p=r(80959),h=r(99063),c=r(29298),y=(r(32773),r(49877)),m=r(69421),g=r(56273),f=r(23916),v=r(82408),w=r(43059),_=r(24319),P=r(82454);r(59121),r(1178),r(41390),r(85176),r(93181),r(13671),r(50704),r(40499),r(36555),r(58498),r(91047),r(35819),r(45371),r(61532),r(36172),r(84699),r(19247),r(36544),r(48064),r(17745),r(81272),r(44945),r(93074),r(67321),r(99924),r(73509),r(28276),r(44600),r(2160),r(7969),r(69763),r(93804),r(96221),r(18683),r(64752),r(48844),r(29208),r(59192),r(91658),r(70580),r(75191),r(89935),r(49813),r(62092),r(88321),r(2589),r(36533),r(84200),r(97827),r(18169),r(20762),r(48402),r(16699),r(67504),r(47387),r(46728),r(21632),r(64102);const S=e=>{const t=e;let S=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,d.d)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,r){if(t.itemId)return new w.default({id:t.itemId,portal:r?.portal})}writePortalItem(e,t){e?.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem?.id)try{const{load:i}=await r.e(4295).then(r.bind(r,24295));return(0,p.Te)(t),await i({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData,layerModuleTypeMap:e.layerModuleTypeMap,populateGroupLayer:e.populateGroupLayer},t)}catch(e){throw(0,p.zf)(e)||u.L.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${e}`),e}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch(e=>((0,p.QP)(e),!0)))}async setUserPrivileges(e,t){if(!s.A.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(t);if(this.url)try{const{features:{edit:r,fullEdit:i},content:{updateItem:s}}=await this._fetchUserPrivileges(e,t);this._set("userHasEditingPrivileges",r),this._set("userHasFullEditingPrivileges",i),this._set("userHasUpdateItemPrivileges",s)}catch(e){(0,p.QP)(e)}}async _fetchUserPrivileges(e,t){let r=this.portalItem;if(!e||!r||!r.loaded||r.sourceUrl)return this._fetchFallbackUserPrivileges(t);const i=!l.id?.findCredential(this.url),s=e===r.id;if(s&&r.portal.user)return this._getUserPrivileges(r,i);let n,a;if(s)n=r.portal.url;else try{n=await(0,f.h)(this.url,t)}catch(e){(0,p.QP)(e)}if(!n||!(0,h.b8)(n,r.portal.url))return this._fetchFallbackUserPrivileges(t);try{const e=null!=t?t.signal:null;a=await(l.id?.getCredential(`${n}/sharing`,{prompt:!1,signal:e}))}catch(e){(0,p.QP)(e)}const o=!0,u=!1,d=!1;if(!a)return{features:{edit:o,fullEdit:u},content:{updateItem:d}};try{if(s?await r.reload():(r=new w.default({id:e,portal:{url:n}}),await r.load(t)),r.portal.user)return this._getUserPrivileges(r,i)}catch(e){(0,p.QP)(e)}return{features:{edit:o,fullEdit:u},content:{updateItem:d}}}_getUserPrivileges(e,t){const r=(0,P.g)(e);return t&&(r.features.edit=!0),r}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(e){(0,p.QP)(e)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){const t=this.url?l.id?.findCredential(this.url):null;if(!t)return!0;const r=M.credential===t?M.user:await this._fetchEditingUser(e);return M.credential=t,M.user=r,null==r?.privileges||r.privileges.includes("features:user:edit")}async _fetchEditingUser(e){const t=this.portalItem?.portal?.user;if(t)return t;const r=l.id?.findServerInfo(this.url??"");if(!r?.owningSystemUrl)return null;const i=`${r.owningSystemUrl}/sharing/rest`,s=v.A.getDefault();if(s&&s.loaded&&(0,h.S8)(s.restUrl)===(0,h.S8)(i))return s.user;const o=`${i}/community/self`,u=null!=e?e.signal:null,d=await(0,a.r)((0,n.A)(o,{authMode:"no-prompt",query:{f:"json"},signal:u}));return d.ok?_.A.fromJSON(d.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const r=t?.portal,i=this.portalItem?.id&&(this.portalItem.portal||v.A.getDefault());return r&&i&&!(0,h.ut)(i.restUrl,r.restUrl)?(t.messages&&t.messages.push(new o.A("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,i._)([(0,c.MZ)({type:w.default})],S.prototype,"portalItem",null),(0,i._)([(0,y.r)("web-document","portalItem",["itemId"])],S.prototype,"readPortalItem",null),(0,i._)([(0,g.w)("web-document","portalItem",{itemId:{type:String}})],S.prototype,"writePortalItem",null),(0,i._)([(0,c.MZ)({clonable:!1})],S.prototype,"resourceReferences",void 0),(0,i._)([(0,c.MZ)({type:Boolean,readOnly:!0})],S.prototype,"userHasEditingPrivileges",void 0),(0,i._)([(0,c.MZ)({type:Boolean,readOnly:!0})],S.prototype,"userHasFullEditingPrivileges",void 0),(0,i._)([(0,c.MZ)({type:Boolean,readOnly:!0})],S.prototype,"userHasUpdateItemPrivileges",void 0),S=(0,i._)([(0,m.$)("esri.layers.mixins.PortalLayer")],S),S},M={credential:null,user:null}},58194:(e,t,r)=>{r.d(t,{A:()=>h});var i,s=r(32816),l=r(99924),n=r(4734),a=r(29298),o=(r(32773),r(20266),r(49877)),u=r(69421),d=r(56273),p=r(16345);r(41390),r(85176),r(93181),r(13671),r(50704),r(40499),r(36555),r(58498),r(91047),r(35819),r(45371),r(61532),r(80959),r(6407),r(59121),r(19247),r(36172),r(50214),r(93804),r(59192),r(54483),r(36544),r(90740),r(84699),r(48064);let h=class extends l.o{static{i=this}static get allTime(){return c}static get empty(){return y}static fromArray(e){return new i({start:null!=e[0]?new Date(e[0]):e[0],end:null!=e[1]?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?.getTime()??null}get isAllTime(){return this.equals(i.allTime)}get isEmpty(){return this.equals(i.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?.getTime()??null}clone(){return new i({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=this.start?.getTime()??this.start,r=this.end?.getTime()??this.end,i=e.start?.getTime()??e.start,s=e.end?.getTime()??e.end;return t===i&&r===s}expandTo(e,t=p.s){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=(0,n.t)(r,e,t));let s=this.end;if(s){const r=(0,n.t)(s,e,t);s=s.getTime()===r.getTime()?r:(0,n.o)(r,1,e,t)}return new i({start:r,end:s})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return i.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=this.start?.getTime()??-1/0,r=this.end?.getTime()??1/0,s=e.start?.getTime()??-1/0,l=e.end?.getTime()??1/0;let n,a;return s>=t&&s<=r?n=s:t>=s&&t<=l&&(n=t),r>=s&&r<=l?a=r:l>=t&&l<=r&&(a=l),null==n||null==a||isNaN(n)||isNaN(a)?i.empty:new i({start:n===-1/0?null:new Date(n),end:a===1/0?null:new Date(a)})}offset(e,t,r=p.s){if(this.isEmpty||this.isAllTime)return this.clone();const s=new i,{start:l,end:a}=this;return null!=l&&(s.start=(0,n.o)(l,e,t,r)),null!=a&&(s.end=(0,n.o)(a,e,t,r)),s}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return c.clone();const t=null!=this.start&&null!=e.start?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=null!=this.end&&null!=e.end?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new i({start:t,end:r})}};(0,s._)([(0,a.MZ)({type:Date,json:{write:{allowNull:!0}}})],h.prototype,"end",void 0),(0,s._)([(0,o.r)("end")],h.prototype,"readEnd",null),(0,s._)([(0,d.w)("end")],h.prototype,"writeEnd",null),(0,s._)([(0,a.MZ)({readOnly:!0,json:{read:!1}})],h.prototype,"isAllTime",null),(0,s._)([(0,a.MZ)({readOnly:!0,json:{read:!1}})],h.prototype,"isEmpty",null),(0,s._)([(0,a.MZ)({type:Date,json:{write:{allowNull:!0}}})],h.prototype,"start",void 0),(0,s._)([(0,o.r)("start")],h.prototype,"readStart",null),(0,s._)([(0,d.w)("start")],h.prototype,"writeStart",null),h=i=(0,s._)([(0,u.$)("esri.time.TimeExtent")],h);const c=new h,y=new h({start:void 0,end:void 0})},64524:(e,t,r)=>{r.d(t,{o:()=>s,t:()=>l});var i=r(36544);function s(e){const t=(0,i.c)(100*(1-e));return Math.max(0,Math.min(t,100))}function l(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}},64884:(e,t,r)=>{r.d(t,{s:()=>a,u:()=>n});var i=r(99063),s=r(1178);function l(e,t){if(!(0,i.oP)(e)){const r=function(e){if(!e)return null;const{origin:t,layer:r}=e;if("service"!==t&&"portal-item"!==t)return null;const i=r?.type;return"feature"===i||"stream"===i?r.parsedUrl?.path:"map-image"===i||"tile"===i?e.url?.path:null}(t);if(r)return(0,i.fj)(r,"images",e)}return(0,s.f)(e,t)}const n={json:{read:{source:["imageData","url"],reader:function(e,t,r){return t.imageData?(0,i.Hg)({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):l(t.url,r)}},write:{writer(e,t,r,l){!function(e,t,r,l){if((0,i.DB)(e)){const n=(0,i.r$)(e);if(!n)return;t.contentType=n.mediaType,t.imageData=n.data,r&&r.imageData===t.imageData&&r.url&&(0,s.w)(r.url,t,"url",l)}else(0,s.w)(e,t,"url",l)}(e,t,this.source,l)}}}},a={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const i={};return t.imageData&&(i.imageData=t.imageData),t.contentType&&(i.contentType=t.contentType),t.url&&(i.url=l(t.url,r)),i}}}}},80473:(e,t,r)=>{r.d(t,{PH:()=>a,sA:()=>n});var i=r(32816),s=r(69421);r(32773),r(20266),r(90740),r(59121),r(84699),r(50704),r(40499),r(93181),r(13671),r(91047),r(36544),r(48064),r(6407);let l=0;const n=e=>{const t=e;let r=class extends t{constructor(...e){super(...e),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+l++})}};return r=(0,i._)([(0,s.$)("esri.core.Identifiable")],r),r},a=e=>{const t=e;let r=class extends t{constructor(...e){super(...e),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:l++})}};return r=(0,i._)([(0,s.$)("esri.core.Identifiable.NumericIdentifiable")],r),r};n(class{})}}]);