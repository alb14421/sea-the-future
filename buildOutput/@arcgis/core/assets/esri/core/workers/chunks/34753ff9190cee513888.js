"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[4287],{24330:(e,r,t)=>{t.d(r,{a:()=>b,b:()=>v,c:()=>M,d:()=>g,i:()=>o,t:()=>h});var n=t(35902),i=t(32773);function o(e){return"r"in e&&"g"in e&&"b"in e}function s(e){return"h"in e&&"s"in e&&"v"in e}function a(e){return"l"in e&&"a"in e&&"b"in e}function c(e){return"l"in e&&"c"in e&&"h"in e}t(16699),t(91276),t(62482);const l=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],f=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function u(e,r){const t=[];let n,i;if(e[0].length!==r.length)throw new Error("dimensions do not match");const o=e.length,s=e[0].length;let a=0;for(n=0;n<o;n++){for(a=0,i=0;i<s;i++)a+=e[n][i]*r[i];t.push(a)}return t}function p(e){const r=[e.r/255,e.g/255,e.b/255].map(e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4),t=u(l,r);return{x:100*t[0],y:100*t[1],z:100*t[2]}}function m(e){const r=u(f,[e.x/100,e.y/100,e.z/100]).map(e=>{const r=e<=.0031308?12.92*e:1.055*e**(1/2.4)-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*r[0]),g:Math.round(255*r[1]),b:Math.round(255*r[2])}}function y(e){const r=[e.x/95.047,e.y/100,e.z/108.883].map(e=>e>(6/29)**3?e**(1/3):1/3*(29/6)**2*e+4/29);return{l:116*r[1]-16,a:500*(r[0]-r[1]),b:200*(r[1]-r[2])}}function d(e){const r=e.l,t=[(r+16)/116+e.a/500,(r+16)/116,(r+16)/116-e.b/200].map(e=>e>6/29?e**3:3*(6/29)**2*(e-4/29));return{x:95.047*t[0],y:100*t[1],z:108.883*t[2]}}function h(e){return o(e)?e:c(e)?function(e){return m(d(function(e){const r=e.l,t=e.c,n=e.h;return{l:r,a:t*Math.cos(n),b:t*Math.sin(n)}}(e)))}(e):a(e)?function(e){return m(d(e))}(e):function(e){return"x"in e&&"y"in e&&"z"in e}(e)?m(e):s(e)?function(e){const r=(e.h+360)%360/60,t=e.s/100,n=e.v/100*255,i=n*t,o=i*(1-Math.abs(r%2-1));let s;switch(Math.floor(r)){case 0:s={r:i,g:o,b:0};break;case 1:s={r:o,g:i,b:0};break;case 2:s={r:0,g:i,b:o};break;case 3:s={r:0,g:o,b:i};break;case 4:s={r:o,g:0,b:i};break;case 5:case 6:s={r:i,g:0,b:o};break;default:s={r:0,g:0,b:0}}return s.r=Math.round(s.r+n-i),s.g=Math.round(s.g+n-i),s.b=Math.round(s.b+n-i),s}(e):e}function b(e){return s(e)?e:function(e){const r=e.r,t=e.g,n=e.b,i=Math.max(r,t,n),o=i-Math.min(r,t,n);let s=i,a=0===o?0:i===r?(t-n)/o%6:i===t?(n-r)/o+2:(r-t)/o+4,c=0===o?0:o/s;return a<0&&(a+=6),a*=60,c*=100,s*=100/255,{h:a,s:c,v:s}}(h(e))}function v(e){return a(e)?e:function(e){return y(p(e))}(h(e))}function M(e){return c(e)?e:function(e){return function(e){const r=e.l,t=e.a,n=e.b,i=Math.sqrt(t*t+n*n);let o=Math.atan2(n,t);return o=o>0?o:o+2*Math.PI,{l:r,c:i,h:o}}(y(p(e)))}(h(e))}function g(e,r,t={}){if(0===e.length||r<=0)return[];if(1===(e=e.map(e=>"string"==typeof e?new n.A(e):e)).length||1===r){const t=[],n=e[0];for(let e=0;e<r;e++)t.push(n.clone());return t}if(t.shuffle&&(e=(0,i.s)((0,i.o8)(e),t.seed)),e.length>=r){const t=[],n=(e.length-1)/(r-1);for(let i=0;i<r;i++){const r=Math.round(i*n);t.push(e[r].clone())}return t}return function(e,r,t={}){const n=[],o=e.length-1,s=Math.ceil((r-e.length)/o);e:for(let i=0;i<o;i++){const o=e[i],a=e[i+1];for(let i=1;i<=s;i++){const c=i/(s+1);if(n.push(k(o,a,c,t)),n.length+e.length===r)break e}}return[...e.map(e=>e.clone()),...(0,i.s)(n,t.seed??1)]}(e,r,t)}const C=(e,r)=>{const t=Math.floor(10*r())-5;return Math.min(255,Math.max(0,e+t))};function k(e,r,t,o={}){const s=e.r,a=e.g,c=e.b,l=r.r,f=r.g,u=r.b,p=Math.round(s+(l-s)*t),m=Math.round(a+(f-a)*t),y=Math.round(c+(u-c)*t);if(!o.offset)return new n.A([p,m,y]);const d=(0,i.g)(o.seed);return new n.A([C(p,d),C(m,d),C(y,d)])}},34287:(e,r,t)=>{t.d(r,{OverrideHelper:()=>d});var n=t(35902),i=t(24330),o=t(32773),s=t(79875),a=t(44296),c=t(44747),l=t(6407),f=t(20266),u=t(69310);function p(e,r,t,n,i,o){if(null==e)return null;const s=e.references("geometry")&&o?function(e,r,t){const{transform:n,hasZ:i,hasM:o}=t;m.has(r)||m.set(r,function(e){const r={};switch(e){case"esriGeometryPoint":return(e,t,n,i)=>(0,u.e)(t,r,e,n,i);case"esriGeometryPolygon":return(e,t,n,i)=>(0,u.d)(t,r,e,n,i);case"esriGeometryPolyline":return(e,t,n,i)=>(0,u.c)(t,r,e,n,i);case"esriGeometryMultipoint":return(e,t,n,i)=>(0,u.u)(t,r,e,n,i);default:return f.L.getLogger("esri.views.2d.support.arcadeOnDemand").error(new l.A("mapview-arcade",`Unable to handle geometryType: ${e}`)),e=>e}}(r));const s=m.get(r)(e.geometry,n,i,o);return{...e,geometry:s}}(r,n,o):r,a=e.repurposeFeature(s,i);try{return e.evaluate(a,t)}catch(e){return f.L.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",e),null}}t(59121),t(90740),t(84699),t(44600),t(32816),t(29298),t(36544),t(85176),t(93181),t(13671),t(40499),t(69421),t(50704),t(91047),t(48064),t(2160),t(99924),t(41390),t(36555),t(58498),t(35819),t(45371),t(61532),t(80959),t(19247),t(36172),t(49877),t(7969),t(69763),t(93804),t(96221),t(18683),t(64604),t(29512),t(99063),t(1178),t(56273),t(64752),t(48844),t(29208),t(36533),t(84200),t(97827),t(18169),t(20762),t(48402),t(16699),t(67504);const m=new Map;t(13226),t(91276),t(18527),t(62482),t(133),t(54483),t(30011),t(16345),t(78016),t(26589),t(7011),t(59192),t(77037),t(91524);const y=e=>{if(!e)return[0,0,0,0];const{r,g:t,b:n,a:i}=e;return[r,t,n,255*i]};class d{static findApplicableOverrides(e,r,t){if(e&&r){if(e.primitiveName){let n=!1;for(const r of t)if(r.primitiveName===e.primitiveName){n=!0;break}if(!n)for(const n of r)n.primitiveName===e.primitiveName&&t.push(n)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const n of e.effects)d.findApplicableOverrides(n,r,t);if(e.symbolLayers)for(const n of e.symbolLayers)d.findApplicableOverrides(n,r,t);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects)for(const n of e.effects)d.findApplicableOverrides(n,r,t);if(e.markerPlacement&&d.findApplicableOverrides(e.markerPlacement,r,t),"CIMVectorMarker"===e.type){if(e.markerGraphics)for(const n of e.markerGraphics)d.findApplicableOverrides(n,r,t),d.findApplicableOverrides(n.symbol,r,t)}else"CIMCharacterMarker"===e.type?d.findApplicableOverrides(e.symbol,r,t):"CIMHatchFill"===e.type?d.findApplicableOverrides(e.lineSymbol,r,t):"CIMPictureMarker"===e.type&&d.findApplicableOverrides(e.animatedSymbolProperties,r,t)}}}static findEffectOverrides(e,r){if(!e)return null;if("CIMGeometricEffectDashes"===e.type&&(0,c.d)(e),!r||!e.primitiveName)return{type:"cim-effect-param",effect:e,overrides:[]};const t=(0,c.e)(e),n=e.primitiveName,i=[];for(const e of r)e.primitiveName===n&&i.push((0,c.e)(e));return{type:"cim-effect-param",effect:t,overrides:(0,c.f)(i)}}static async resolveSymbolOverrides(e,r,t,n,i,a,l){if(!e?.symbol)return null;let{symbol:f,primitiveOverrides:u}=e;const p=!!u;if(!p&&!n)return f;f=(0,o.o8)(f),u=(0,o.o8)(u);let m=!0;if(r||(r={attributes:{}},m=!1),p){if(m||(u=u.filter(e=>!e.valueExpressionInfo?.expression.includes("$feature"))),l||(u=u.filter(e=>!e.valueExpressionInfo?.expression.includes("$view"))),u.length>0){const e=(0,c.g)(r.attributes),n={spatialReference:t,fields:e,geometryType:i};await d.createRenderExpressions(u,n),d.evaluateOverrides(u,r,i??"esriGeometryPoint",a,l,new s.A(e))}d.applyOverrides(f,u)}return n&&d.applyDictionaryTextOverrides(f,r,n,null),f}static{this._expressionToRenderExpression=new Map}static async createRenderExpressions(e,r){const t=[];for(const n of e){const e=n.valueExpressionInfo;if(!e||d._expressionToRenderExpression.has(e.expression))continue;const i=(0,a.b)(e.expression,r.spatialReference);t.push(i),i.then(r=>d._expressionToRenderExpression.set(e.expression,r))}t.length>0&&await Promise.all(t)}static evaluateOverrides(e,r,t,n,o,s){const a={$view:{scale:o?.scale}};for(const o of e){o.value&&"object"==typeof o.value&&(0,i.i)(o.value)&&("Color"===o.propertyName||"StrokeColor"===o.propertyName)&&(o.value=y(o.value));const e=o.valueExpressionInfo;if(!e)continue;const c=d._expressionToRenderExpression.get(e.expression);c&&(o.value=p(c,r,a,t,s,n))}}static applyDictionaryTextOverrides(e,r,t,n,i="Normal"){if(e?.type)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const o=e.symbolLayers;if(!o)return;for(const s of o)s&&"CIMVectorMarker"===s.type&&d.applyDictionaryTextOverrides(s,r,t,n,"CIMTextSymbol"===e.type?e.textCase:i)}break;case"CIMVectorMarker":{const i=e.markerGraphics;if(!i)return;for(const e of i)e&&d.applyDictionaryTextOverrides(e,r,t,n)}break;case"CIMMarkerGraphic":{const o=e.textString;if(o&&o.includes("[")){const s=(0,c.h)(o,t);e.textString=(0,c.j)(r,s,n,i)}}}}static applyOverrides(e,r,t,n){if(e.primitiveName)for(const i of r)if(i.primitiveName===e.primitiveName){const r=(0,c.u)(i.propertyName);if(n&&n.push({cim:e,nocapPropertyName:r,value:e[r]}),t){let r=!1;for(const n of t)n.primitiveName===e.primitiveName&&(r=!0);r||t.push(i)}null!=i.value&&(e[r]=i.value)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const i of e.effects)d.applyOverrides(i,r,t,n);if(e.symbolLayers)for(const i of e.symbolLayers)d.applyOverrides(i,r,t,n);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects)for(const i of e.effects)d.applyOverrides(i,r,t,n);if("CIMVectorMarker"===e.type&&e.markerGraphics)for(const i of e.markerGraphics)d.applyOverrides(i,r,t,n),d.applyOverrides(i.symbol,r,t,n)}}static restoreOverrides(e){for(const r of e)r.cim[r.nocapPropertyName]=r.value}static buildOverrideKey(e){let r="";for(const t of e)void 0!==t.value&&(r+=`${t.primitiveName}${t.propertyName}${JSON.stringify(t.value)}`);return r}static toValue(e,r){if("DashTemplate"===e)return r.split(" ").map(e=>Number(e));if("Color"===e){const e=new n.A(r).toRgba();return e[3]*=255,e}return r}}}}]);