"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[2408],{24319:(t,e,r)=>{r.d(e,{A:()=>d});var s,o=r(32816),i=r(6407),l=r(99924),a=r(29298),n=(r(32773),r(20266),r(69421)),u=r(62092),p=r(91658);r(59121),r(41390),r(85176),r(93181),r(13671),r(50704),r(40499),r(36555),r(58498),r(91047),r(35819),r(45371),r(61532),r(80959),r(19247),r(36172),r(36544),r(90740),r(84699),r(48064),r(70580),r(93804),r(44600),r(2160),r(49877),r(7969),r(69763),r(96221),r(18683),r(64604),r(29512),r(99063),r(1178),r(56273),r(64752),r(48844),r(29208);let d=s=class extends l.o{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.portal?.restUrl;return t?`${t}/content/users/${this.id}`:null}get url(){const t=this.portal?.restUrl;return t?`${t}/community/users/${this.id}`:null}addItem(t){const e=t&&t.item,r=t?.data,s=t?.folder,o={method:"post"};e&&(o.query=e.createPostQuery(),null!=r&&("string"==typeof r?o.query.text=r:"object"==typeof r&&(o.query.text=JSON.stringify(r))));let i=this.userContentUrl;return s&&(i+="/"+("string"==typeof s?s:s.id)),this.portal.request(i+"/addItem",o).then(t=>(e.id=t.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}async deleteItem(t,e=!1){let r=this.userContentUrl;t.ownerFolder&&(r+="/"+t.ownerFolder);const s=e?{permanentDelete:!0}:{};await this.portal.request(r+`/items/${t.id}/delete`,{method:"post",query:s}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const r=this.userContentUrl+"/deleteItems",s=[],o=t.map(t=>t.id);if(o.length){const l={method:"post",query:{items:o.join(","),permanentDelete:e}},a=await this.portal.request(r,l);for(const e of a.results){const r=t.find(t=>e.itemId===t.id),o=e.success;let l=null;o?(r.id=null,r.portal=null):e.error&&(l=new i.A("portal:delete-item-failed",e.error.message,e.error)),s.push({item:r,success:o,error:l})}}return s}fetchFolders(){return this.portal.request(this.userContentUrl??"",{query:{num:1}}).then(t=>{let e;return e=t&&t.folders?t.folders.map(t=>{const e=u.A.fromJSON(t);return e.portal=this.portal,e}):[],e})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(t=>{const e=p.A.fromJSON(t);return e.portal=this.portal,e}):[],e})}async fetchItems(t){t??={};let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:s}=await r.e(3059).then(r.bind(r,43059)),o={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},i=await this.portal.request(e,{query:o});let l;return i?.items?(l=i.items.map(t=>{const e=s.fromJSON(t);return e.portal=this.portal,e}),await Promise.all(l.map(t=>t.load())),{items:l,nextStart:i.nextStart,total:i.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new p.A({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new i.A("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const r=this.userContentUrl,s=e?{folderID:"string"==typeof e?e:e.id}:null;await this.portal.request(r+`/items/${t.id}/restore`,{method:"post",query:s})}toJSON(){throw new i.A("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new s({sourceJSON:t});return e.read(t),e}};(0,o._)([(0,a.MZ)()],d.prototype,"access",void 0),(0,o._)([(0,a.MZ)({type:Date})],d.prototype,"created",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"culture",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"description",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"email",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"favGroupId",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"fullName",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"id",void 0),(0,o._)([(0,a.MZ)({type:Date})],d.prototype,"modified",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"orgId",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"portal",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"preferredView",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"privileges",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"region",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"role",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"roleId",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"sourceJSON",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"thumbnail",void 0),(0,o._)([(0,a.MZ)({readOnly:!0})],d.prototype,"thumbnailUrl",null),(0,o._)([(0,a.MZ)()],d.prototype,"units",void 0),(0,o._)([(0,a.MZ)({readOnly:!0})],d.prototype,"userContentUrl",null),(0,o._)([(0,a.MZ)({readOnly:!0})],d.prototype,"url",null),(0,o._)([(0,a.MZ)()],d.prototype,"username",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"userLicenseTypeId",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"userType",void 0),d=s=(0,o._)([(0,n.$)("esri.portal.PortalUser")],d)},28276:(t,e,r)=>{r.d(e,{Z:()=>p,g:()=>u});var s=r(32816),o=r(41390),i=r(13671),l=r(80959),a=r(69421);r(32773),r(20266),r(90740),r(59121),r(84699),r(85176),r(93181),r(50704),r(40499),r(36555),r(58498),r(91047),r(29298),r(36544),r(6407),r(35819),r(45371),r(61532),r(36172),r(19247),r(48064);class n{constructor(){this._resolver=(0,l.Tw)(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=1,this._cleanUp()},()=>{this._status=2,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return 1===this._status}isRejected(){return 2===this._status}isFulfilled(){return 0!==this._status}abort(){this._resolver.reject((0,l.NK)())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=(0,l.Tw)(),e=[...this._resolvingPromises,t.promise],r=this._allPromise=Promise.all(e);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},t=>{this.isFulfilled()||this._allPromise!==r||(0,l.zf)(t)||this._resolver.reject(t)}),t.resolve()}}const u=t=>{const e=t;let r=class extends e{constructor(...t){super(...t),this._promiseProps=new n,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(t,e){return this._promiseProps.promise.then(()=>this).then(t,e)}catch(t){return this.when(null,t)}addResolvingPromise(t){t&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in t?t.when():t)}addResolvingTask(t){t&&!this._promiseProps.isFulfilled()&&(this.addHandles((0,i.a)(t)),this._promiseProps.addResolvingPromise(t.promise))}};return r=(0,s._)([(0,a.$)("esri.core.Promise")],r),r},p=u(o.A)},62092:(t,e,r)=>{r.d(e,{A:()=>n});var s=r(32816),o=r(6407),i=r(99924),l=r(29298),a=(r(32773),r(20266),r(69421));r(59121),r(41390),r(85176),r(93181),r(13671),r(50704),r(40499),r(36555),r(58498),r(91047),r(35819),r(45371),r(61532),r(80959),r(19247),r(36172),r(36544),r(90740),r(84699),r(48064);let n=class extends i.o{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const t=this.portal?.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new o.A("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};(0,s._)([(0,l.MZ)({type:Date})],n.prototype,"created",void 0),(0,s._)([(0,l.MZ)()],n.prototype,"id",void 0),(0,s._)([(0,l.MZ)()],n.prototype,"portal",void 0),(0,s._)([(0,l.MZ)()],n.prototype,"title",void 0),(0,s._)([(0,l.MZ)({readOnly:!0})],n.prototype,"url",null),(0,s._)([(0,l.MZ)()],n.prototype,"username",void 0),n=(0,s._)([(0,a.$)("esri.portal.PortalFolder")],n)},70580:(t,e,r)=>{r.d(e,{A:()=>c});var s,o=r(32816),i=r(41390),l=r(93804),a=r(32773),n=r(29298),u=(r(20266),r(69421)),p=r(44600),d=r(7969),h=r(29208);r(85176),r(93181),r(13671),r(50704),r(40499),r(36555),r(58498),r(91047),r(35819),r(45371),r(61532),r(80959),r(6407),r(59121),r(19247),r(36172),r(36544),r(90740),r(84699),r(48064),r(2160),r(99924),r(49877),r(69763),r(96221),r(18683),r(64604),r(29512),r(99063),r(1178),r(56273),r(64752),r(48844);const y=new l.J({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let c=s=class extends i.A{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){"asc"!==t&&"desc"!==t||this._set("sortOrder",t)}clone(){return new s({categories:this.categories?(0,a.o8)(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let r=[];this.categories&&(r=this.categories.map(t=>Array.isArray(t)?JSON.stringify(t):t));let s="";if(this.extent){const t=(0,h.Cv)(this.extent,d.A.WGS84);null!=t&&(s=`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`)}let o=this.query;!this.disableExtraQuery&&t.extraQuery&&(o="("+o+")"+t.extraQuery);const i={categories:r,bbox:s,q:o,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(i.sortField=this.sortField.split(",").map(t=>y.toJSON(t.trim())).join(","),i.sortOrder=this.sortOrder),{query:{...e,...i}}}};(0,o._)([(0,n.MZ)()],c.prototype,"categories",void 0),(0,o._)([(0,n.MZ)()],c.prototype,"disableExtraQuery",void 0),(0,o._)([(0,n.MZ)({type:p.A})],c.prototype,"extent",void 0),(0,o._)([(0,n.MZ)()],c.prototype,"filter",void 0),(0,o._)([(0,n.MZ)()],c.prototype,"num",void 0),(0,o._)([(0,n.MZ)()],c.prototype,"query",void 0),(0,o._)([(0,n.MZ)()],c.prototype,"sortField",void 0),(0,o._)([(0,n.MZ)()],c.prototype,"sortOrder",null),(0,o._)([(0,n.MZ)()],c.prototype,"start",void 0),c=s=(0,o._)([(0,u.$)("esri.portal.PortalQueryParams")],c)},73509:(t,e,r)=>{r.d(e,{WV:()=>h,Zm:()=>c,x_:()=>y});var s=r(32816),o=r(6407),i=r(57732),l=r(28276),a=r(80959),n=r(48064),u=r(29298),p=r(69421);r(32773),r(20266),r(90740),r(59121),r(84699),r(41390),r(85176),r(93181),r(13671),r(50704),r(40499),r(36555),r(58498),r(91047),r(35819),r(45371),r(61532),r(36172),r(36544),r(19247);const d="loaded",h=t=>{const e=t;let r=class extends e{constructor(...t){super(...t),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(t=>{const e=this.load.bind(this);this.load=r=>{const s=new Promise((t,e)=>{const s=(0,a.NY)(r,e);this.destroyed&&e(new o.A("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(t,e).finally(()=>{s&&s.remove()})});if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const t=this._loadController=new AbortController;e({signal:t.signal})}return t(),s}})),this.when(()=>{this._set("loadStatus",d),this._loadController=null},t=>{this.destroyed||(this._set("loadStatus","failed"),this._set("loadError",t),this._loadController=null)})}destroy(){this._loadController&&(this._loadController=(0,i.a)(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===d}get loadWarnings(){return this._get("loadWarnings")}load(t){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new o.A("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return(0,s._)([(0,u.MZ)({readOnly:!0})],r.prototype,"loaded",null),(0,s._)([(0,u.MZ)({readOnly:!0})],r.prototype,"loadError",void 0),(0,s._)([(0,u.MZ)({clonable:!1})],r.prototype,"loadStatus",void 0),(0,s._)([(0,u.MZ)({type:[n.W],readOnly:!0})],r.prototype,"loadWarnings",null),r=(0,s._)([(0,p.$)("esri.core.Loadable")],r),r},y=h(l.Z);function c(t){return!(!t||!t.load)}},75191:(t,e,r)=>{r.d(e,{A:()=>a});var s=r(32816),o=r(41390),i=r(29298),l=(r(32773),r(20266),r(69421));r(85176),r(93181),r(13671),r(50704),r(40499),r(36555),r(58498),r(91047),r(35819),r(45371),r(61532),r(80959),r(6407),r(59121),r(19247),r(36172),r(36544),r(90740),r(84699),r(48064);let a=class extends o.A{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};(0,s._)([(0,i.MZ)()],a.prototype,"nextQueryParams",void 0),(0,s._)([(0,i.MZ)()],a.prototype,"queryParams",void 0),(0,s._)([(0,i.MZ)()],a.prototype,"results",void 0),(0,s._)([(0,i.MZ)()],a.prototype,"total",void 0),a=(0,s._)([(0,l.$)("esri.portal.PortalQueryResult")],a)},82408:(t,e,r)=>{r.d(e,{A:()=>A});var s=r(32816),o=r(90740),i=r(29512),l=r(64604),a=r(6407),n=r(99924),u=r(73509),p=r(57732),d=r(80959),h=r(29298),y=r(36544),c=(r(32773),r(49877)),m=r(69421),_=r(44600),v=r(59192),f=r(91658),M=r(70580),g=r(75191),Z=r(24319);let S;var P;let O;r(59121),r(99063),r(20266),r(84699),r(1178),r(41390),r(85176),r(93181),r(13671),r(50704),r(40499),r(36555),r(58498),r(91047),r(35819),r(45371),r(61532),r(36172),r(28276),r(19247),r(48064),r(2160),r(7969),r(69763),r(93804),r(96221),r(18683),r(56273),r(64752),r(48844),r(29208),r(62092);const w={PortalGroup:()=>Promise.resolve({default:f.A}),PortalItem:()=>r.e(3059).then(r.bind(r,43059)),PortalUser:()=>Promise.resolve({default:Z.A})};let A=class extends((0,n.T)(u.x_)){static{P=this}static{this.AUTH_MODE_ANONYMOUS="anonymous"}static{this.AUTH_MODE_AUTO="auto"}static{this.AUTH_MODE_IMMEDIATE="immediate"}static{this.AUTH_MODE_NO_PROMPT="no-prompt"}constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=o.A.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return"string"==typeof t?{url:t}:t}destroy(){C.unregister(this),this.defaultBasemap=(0,p.d)(this.defaultBasemap),this.defaultDevBasemap=(0,p.d)(this.defaultDevBasemap),this.defaultVectorBasemap=(0,p.d)(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=(0,p.r)(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(const e of t)o.A.request.trustedServers.includes(e)||o.A.request.trustedServers.push(e);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){const t=this.user?.orgId,e=!t||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get hasAPIKey(){return(0,l.f)(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get loaded(){return super.loaded}get restUrl(){let t=this.url;if(t){const e=t.indexOf("/sharing");t=e>0?t.slice(0,e):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,e=this.thumbnail;return t&&e?this._normalizeSSL(t+"/portals/self/resources/"+e):null}readUrlKey(t){return t?t.toLowerCase():t}readUser(t){let e=null;return t&&(e=Z.A.fromJSON(t),e.portal=this),e}load(t){const e=Promise.all([r.e(3059),r.e(1840)]).then(r.bind(r,51840)).then(({default:e})=>{(0,d.Te)(t),O=e}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t)).then(t=>{if(!this.hasAPIKey&&i.id){const t=i.id;this.credential=t.findCredential(this.restUrl),this.credential||this.authMode!==P.AUTH_MODE_AUTO&&this.authMode!==P.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=t.on("credential-create",function(t){const e=i.id;return()=>{const r=t.deref();r&&e.findCredential(r.restUrl)&&r.signIn().catch(()=>{})}}(new WeakRef(this))),C.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=t,this.read(t)});return this.addResolvingPromise(e),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),e=(await Promise.all([r.e(8730),r.e(1494),r.e(8321),r.e(3059),r.e(4033),r.e(4290)]).then(r.bind(r,84290))).default;return t?t.map(t=>new e({id:t.id,url:t.url})):[]}async fetchBasemaps(t,e){const r=await this._fetchBasemaps(t,e);if(!0===e?.include3d&&!1!==this.use3dBasemaps){const s=await this._fetchBasemaps3D(t,e);r.unshift(...s)}return r}async fetchDefault3DBasemap(t){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||"none"===this.default3DBasemapQuery)return null;const e=new M.A;e.query=this.default3DBasemapQuery,e.disableExtraQuery=!0;const r=(await this.queryItems(e,t)).results.find(t=>"Web Scene"===t.type);return r?new O({portalItem:r}):null}fetchCategorySchema(t){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",t).then(t=>t.categorySchema):(0,d.G4)(t)?Promise.reject((0,d.NK)()):Promise.resolve([])}async fetchClassificationSchema(t){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",t).then(t=>t.classificationSchema):null}fetchFeaturedGroups(t){const e=this.featuredGroups,r=new M.A({num:100,sortField:"title"});if(e?.length){const s=[];for(const t of e)s.push(`(title:"${t.title}" AND owner:${t.owner})`);return r.query=s.join(" OR "),this.queryGroups(r,t).then(t=>t.results)}return(0,d.G4)(t)?Promise.reject((0,d.NK)()):Promise.resolve([])}fetchRegions(t){const e=this.user?.culture||this.culture||(0,v.a)();return this.request(this.restUrl+"/portals/regions",{...t,query:{culture:e}})}fetchSettings(t){const e=this.user?.culture||this.culture||(0,v.a)();return this.request(this.restUrl+"/portals/self/settings",{...t,query:{culture:e}})}static getDefault(){return t=()=>new P,S&&!S.destroyed||(S=t()),S;var t}queryGroups(t,e){return this.queryPortal("/community/groups",t,"PortalGroup",e)}queryItems(t,e){return this.queryPortal("/search",t,"PortalItem",e)}queryUsers(t,e){return t.sortField||(t.sortField="username"),this.queryPortal("/community/users",t,"PortalUser",e)}fetchSelf(t=this.authMode,e=!1,r){const s=this.restUrl+"/portals/self",o={authMode:t,query:{culture:(0,v.a)().toLowerCase()},withCredentials:!0,...r};return"auto"===o.authMode&&(o.authMode="no-prompt"),e&&(o.query.default=!0),this.request(s,o)}queryPortal(t,e,r,s){const o=(0,y.e)(M.A,e),i=e=>this.request(this.restUrl+t,{...o.toRequestOptions(this),...s}).then(t=>{const r=o.clone();return r.start=t.nextStart,new g.A({nextQueryParams:r,queryParams:o,total:t.total,results:P._resultsToTypedArray(e,{portal:this},t,s)})}).then(t=>Promise.all(t.results.map(e=>"function"==typeof e.when?e.when():t)).then(()=>t,e=>((0,d.QP)(e),t)));return r&&w[r]?w[r]().then(({default:t})=>((0,d.Te)(s),i(t))):i()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new a.A("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===P.AUTH_MODE_ANONYMOUS||this.authMode===P.AUTH_MODE_NO_PROMPT&&!i.id)return Promise.reject(new a.A("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const t=t=>Promise.resolve().then(()=>"not-loaded"===this.loadStatus?(t||(this.authMode="immediate"),this.load().then(()=>null)):"loading"===this.loadStatus?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(t=>{t&&(this.sourceJSON=t,this.read(t))});return i.id?i.id.getCredential(this.restUrl,{prompt:this.authMode!==P.AUTH_MODE_NO_PROMPT}).then(e=>t(e)):t(this.credential)}normalizeUrl(t){const e=this.credential?.token;return this._normalizeSSL(e?t+(t.includes("?")?"&":"?")+"token="+e:t)}requestToTypedArray(t,e,r){return this.request(t,e).then(t=>{const e=P._resultsToTypedArray(r,{portal:this},t);return Promise.all(e.map(e=>"function"==typeof e.when?e.when():t)).then(()=>e,()=>e)})}request(t,e={}){const r={f:"json",...e.query},{authMode:s=(this.authMode===P.AUTH_MODE_ANONYMOUS||this.authMode===P.AUTH_MODE_NO_PROMPT?this.authMode:"auto"),body:o=null,cacheBust:i=!1,method:a="auto",responseType:n="json",signal:u}=e,p={authMode:s,body:o,cacheBust:i,method:a,query:r,responseType:n,timeout:0,signal:u};return e.withCredentials&&(p.withCredentials=!0),(0,l.A)(this._normalizeSSL(t),p).then(t=>t.data)}toJSON(){throw new a.A("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new P({sourceJSON:t})}_getHelperService(t){const e=this.helperServices&&this.helperServices[t];if(!e)throw new a.A("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return e}async _fetchBasemaps(t,e){const r=new M.A;r.query=t||((0,l.h)()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const s=await this.queryGroups(r,e);if(!s.total)return[];const o=s.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=o.sortField||"name",r.sortOrder=o.sortOrder||"desc";const i=await o.queryItems(r,e);return i.total?i.results.filter(t=>"Web Map"===t.type).map(t=>new O({portalItem:t})):[]}async _fetchBasemaps3D(t,e){const r=t||this.basemapGalleryGroupQuery3D;if(!r)return[];if((0,l.h)())return[];const s=new M.A({query:r,disableExtraQuery:!0}),o=await this.queryGroups(s,e);if(!o.total)return[];const i=o.results[0];s.num=100,s.query='type:"Web Scene"',s.sortField=i.sortField||"name",s.sortOrder=i.sortOrder||"desc";const a=await i.queryItems(s,e);return a.total?a.results.filter(t=>"Web Scene"===t.type).map(t=>new O({portalItem:t})):[]}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(t){if(t){const e=O.fromJSON(t);return e.portalItem={portal:this},e}return null}static _resultsToTypedArray(t,e,r,s){let o;if(r){const i=null!=s?s.signal:null;o=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(t||e)&&(o=o.map(r=>{const s=Object.assign(t?t.fromJSON(r):r,e);return"function"==typeof s.load&&s.load(i),s}))}else o=[];return o}};(0,s._)([(0,h.MZ)()],A.prototype,"access",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"allSSL",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"authMode",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"authorizedCrossOriginDomains",void 0),(0,s._)([(0,c.r)("authorizedCrossOriginDomains")],A.prototype,"readAuthorizedCrossOriginDomains",null),(0,s._)([(0,h.MZ)()],A.prototype,"basemapGalleryGroupQuery",void 0),(0,s._)([(0,h.MZ)({json:{name:"3DBasemapGalleryGroupQuery"}})],A.prototype,"basemapGalleryGroupQuery3D",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"bingKey",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"canListApps",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"canListData",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"canListPreProvisionedItems",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"canProvisionDirectPurchase",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"canSearchPublic",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"canShareBingPublic",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"canSharePublic",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"canSignInArcGIS",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"canSignInIDP",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"colorSetsGroupQuery",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"commentsEnabled",void 0),(0,s._)([(0,h.MZ)({type:Date})],A.prototype,"created",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"credential",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"culture",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"currentVersion",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"customBaseUrl",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"default3DBasemapQuery",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"defaultBasemap",void 0),(0,s._)([(0,c.r)("defaultBasemap")],A.prototype,"readDefaultBasemap",null),(0,s._)([(0,h.MZ)()],A.prototype,"defaultDevBasemap",void 0),(0,s._)([(0,c.r)("defaultDevBasemap")],A.prototype,"readDefaultDevBasemap",null),(0,s._)([(0,h.MZ)({type:_.A})],A.prototype,"defaultExtent",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"defaultVectorBasemap",void 0),(0,s._)([(0,c.r)("defaultVectorBasemap")],A.prototype,"readDefaultVectorBasemap",null),(0,s._)([(0,h.MZ)()],A.prototype,"description",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"devBasemapGalleryGroupQuery",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"eueiEnabled",void 0),(0,s._)([(0,h.MZ)({readOnly:!0})],A.prototype,"extraQuery",null),(0,s._)([(0,h.MZ)()],A.prototype,"featuredGroups",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"featuredItemsGroupQuery",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"galleryTemplatesGroupQuery",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"layoutGroupQuery",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"livingAtlasGroupQuery",void 0),(0,s._)([(0,h.MZ)({readOnly:!0})],A.prototype,"hasAPIKey",null),(0,s._)([(0,h.MZ)()],A.prototype,"hasCategorySchema",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"hasClassificationSchema",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"helpBase",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"helperServices",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"helpMap",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"homePageFeaturedContent",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"homePageFeaturedContentCount",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"httpPort",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"httpsPort",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"id",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"ipCntryCode",void 0),(0,s._)([(0,h.MZ)({readOnly:!0})],A.prototype,"isOrganization",null),(0,s._)([(0,h.MZ)()],A.prototype,"isPortal",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"isReadOnly",void 0),(0,s._)([(0,h.MZ)({readOnly:!0})],A.prototype,"itemPageUrl",null),(0,s._)([(0,h.MZ)()],A.prototype,"layerTemplatesGroupQuery",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"maxTokenExpirationMinutes",void 0),(0,s._)([(0,h.MZ)({type:Date})],A.prototype,"modified",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"name",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"portalHostname",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"portalMode",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"portalProperties",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"region",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"recycleBinEnabled",void 0),(0,s._)([(0,h.MZ)({readOnly:!0})],A.prototype,"restUrl",null),(0,s._)([(0,h.MZ)()],A.prototype,"rotatorPanels",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"showHomePageDescription",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"sourceJSON",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"staticImagesUrl",void 0),(0,s._)([(0,h.MZ)({json:{name:"2DStylesGroupQuery"}})],A.prototype,"stylesGroupQuery2d",void 0),(0,s._)([(0,h.MZ)({json:{name:"stylesGroupQuery"}})],A.prototype,"stylesGroupQuery3d",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"supportsHostedServices",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"symbolSetsGroupQuery",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"templatesGroupQuery",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"thumbnail",void 0),(0,s._)([(0,h.MZ)({readOnly:!0})],A.prototype,"thumbnailUrl",null),(0,s._)([(0,h.MZ)()],A.prototype,"units",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"url",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"urlKey",void 0),(0,s._)([(0,c.r)("urlKey")],A.prototype,"readUrlKey",null),(0,s._)([(0,h.MZ)()],A.prototype,"user",void 0),(0,s._)([(0,c.r)("user")],A.prototype,"readUser",null),(0,s._)([(0,h.MZ)()],A.prototype,"use3dBasemaps",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"useDefault3dBasemap",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"useStandardizedQuery",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"useVectorBasemaps",void 0),(0,s._)([(0,h.MZ)()],A.prototype,"vectorBasemapGalleryGroupQuery",void 0),A=P=(0,s._)([(0,m.$)("esri.portal.Portal")],A);const C=new FinalizationRegistry(t=>{t.remove()})},91658:(t,e,r)=>{r.d(e,{A:()=>d});var s,o=r(32816),i=r(6407),l=r(99924),a=r(29298),n=r(36544),u=(r(32773),r(69421)),p=r(70580);r(20266),r(90740),r(59121),r(84699),r(41390),r(85176),r(93181),r(13671),r(50704),r(40499),r(36555),r(58498),r(91047),r(35819),r(45371),r(61532),r(80959),r(19247),r(36172),r(48064),r(93804),r(44600),r(2160),r(49877),r(7969),r(69763),r(96221),r(18683),r(64604),r(29512),r(99063),r(1178),r(56273),r(64752),r(48844),r(29208);let d=s=class extends l.o{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e&&this.portal?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){const t=this.portal?.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const r=e.categorySchema||[];return r.some(t=>"contentCategorySetsGroupQuery.LivingAtlas"===t.source)?this._fetchCategorySchemaSet("LivingAtlas",t):r})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new i.A("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new s({sourceJSON:t});return e.read(t),e}queryItems(t,e){let r=(0,n.e)(p.A,t);const s=this.portal;return parseFloat(s.currentVersion)>5?(r=r||new p.A,s.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",e)):(r=r?r.clone():new p.A,r.query="group:"+this.id+(r.query?" "+r.query:""),s.queryItems(r,e))}_fetchCategorySchemaSet(t,e){const r=this.portal;return r.fetchSelf(r.authMode,!0,e).then(t=>{const s=t.contentCategorySetsGroupQuery;if(s){const t=new p.A({disableExtraQuery:!0,num:1,query:s});return r.queryGroups(t,e)}throw new i.A("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const s=r.results[0],o=new p.A({num:1,query:`typekeywords:"${t}"`});return s.queryItems(o,e)}throw new i.A("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(t=>t.total?t.results[0].fetchData("json",e).then(t=>{const e=t?.categorySchema;return e?.length?e:[]}):[])}};(0,o._)([(0,a.MZ)()],d.prototype,"access",void 0),(0,o._)([(0,a.MZ)({type:Date})],d.prototype,"created",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"description",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"id",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"isInvitationOnly",void 0),(0,o._)([(0,a.MZ)({type:Date})],d.prototype,"modified",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"owner",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"portal",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"snippet",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"sortField",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"sortOrder",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"sourceJSON",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"tags",void 0),(0,o._)([(0,a.MZ)()],d.prototype,"thumbnail",void 0),(0,o._)([(0,a.MZ)({readOnly:!0})],d.prototype,"thumbnailUrl",null),(0,o._)([(0,a.MZ)()],d.prototype,"title",void 0),(0,o._)([(0,a.MZ)({readOnly:!0})],d.prototype,"url",null),d=s=(0,o._)([(0,u.$)("esri.portal.PortalGroup")],d)}}]);