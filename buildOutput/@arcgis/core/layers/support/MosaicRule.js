/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{_ as e}from"../../chunks/tslib.es6.js";import{s as t}from"../../chunks/jsonMap.js";import{JSONSupport as o}from"../../core/JSONSupport.js";import{clone as i}from"../../core/lang.js";import{property as r}from"../../core/accessorSupport/decorators/property.js";import{cast as s}from"../../core/accessorSupport/decorators/cast.js";import{r as n}from"../../chunks/reader.js";import{subclass as a}from"../../core/accessorSupport/decorators/subclass.js";import{w as c}from"../../chunks/writer.js";import{I as p}from"../../chunks/ensureType.js";import l from"../../geometry/Point.js";import m from"./DimensionalDefinition.js";import u from"./RasterFunction.js";import"../../chunks/object.js";import"../../core/Accessor.js";import"../../core/Handles.js";import"../../chunks/Logger.js";import"../../config.js";import"../../chunks/string.js";import"../../chunks/maybe.js";import"../../chunks/get.js";import"../../chunks/utils.js";import"../../chunks/handleUtils.js";import"../../chunks/Lifecycle.js";import"../../chunks/metadata.js";import"../../chunks/ObjectPool.js";import"../../chunks/ObservableBase.js";import"../../chunks/tracking.js";import"../../chunks/watch.js";import"../../core/scheduling.js";import"../../chunks/nextTick.js";import"../../chunks/PooledArray.js";import"../../core/promiseUtils.js";import"../../core/Error.js";import"../../chunks/events.js";import"../../chunks/SetUtils.js";import"../../chunks/SimpleTrackingTarget.js";import"../../chunks/MapUtils.js";import"../../chunks/Warning.js";import"../../geometry/Geometry.js";import"../../geometry/SpatialReference.js";import"../../chunks/unitUtils.js";import"../../chunks/pe.js";import"../../chunks/assets.js";import"../../request.js";import"../../kernel.js";import"../../core/urlUtils.js";import"../../chunks/jsonUtils.js";import"../../chunks/persistableUrlUtils.js";import"../../geometry/support/webMercatorUtils.js";import"../../chunks/enumeration.js";import"../../chunks/rasterEnums.js";var d;const h=t()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),j=t()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});let k=d=class extends o{constructor(e){super(e),this.ascending=!0,this.itemRasterFunction=null,this.lockRasterIds=null,this.method="none",this.multidimensionalDefinition=null,this.objectIds=null,this.operation="first",this.sortField=null,this.sortValue=null,this.viewpoint=null,this.where=null}readAscending(e,t){return null!=t.ascending?t.ascending:null==t.sortAscending||t.sortAscending}readMethod(e,t){return function(e){let t;switch(e?e.toLowerCase().replace("esrimosaic",""):""){case"byattribute":case"attribute":t="esriMosaicAttribute";break;case"lockraster":t="esriMosaicLockRaster";break;case"center":t="esriMosaicCenter";break;case"northwest":t="esriMosaicNorthwest";break;case"nadir":t="esriMosaicNadir";break;case"viewpoint":t="esriMosaicViewpoint";break;case"seamline":t="esriMosaicSeamline";break;default:t="esriMosaicNone"}return j.fromJSON(t)}(t.mosaicMethod||t.defaultMosaicMethod)}writeMultidimensionalDefinition(e,t,o){null!=e&&(e=e.filter(({variableName:e,dimensionName:t})=>e&&"*"!==e||t)).length&&(t[o]=e.map(e=>e.toJSON()))}readOperation(e,t){const o=t.mosaicOperation,i=t.mosaicOperator?.toLowerCase(),r=o||(i?h.toJSON(i):null);return h.fromJSON(r)||"first"}castSortValue(e){return null==e||"string"==typeof e||"number"==typeof e?e:`${e}`}clone(){return new d({ascending:this.ascending,itemRasterFunction:i(this.itemRasterFunction),lockRasterIds:i(this.lockRasterIds),method:this.method,multidimensionalDefinition:i(this.multidimensionalDefinition),objectIds:i(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:i(this.viewpoint),where:this.where})}};e([r({type:Boolean,json:{write:!0}})],k.prototype,"ascending",void 0),e([n("ascending",["ascending","sortAscending"])],k.prototype,"readAscending",null),e([r({type:u,json:{name:"itemRenderingRule",write:!0}})],k.prototype,"itemRasterFunction",void 0),e([r({type:[p],json:{write:{overridePolicy(){return{enabled:"lock-raster"===this.method}}}}})],k.prototype,"lockRasterIds",void 0),e([r({type:j.apiValues,json:{type:j.jsonValues,write:{target:"mosaicMethod",writer:j.write,isRequired:!0}}})],k.prototype,"method",void 0),e([n("method",["mosaicMethod","defaultMosaicMethod"])],k.prototype,"readMethod",null),e([r({type:[m],json:{write:!0}})],k.prototype,"multidimensionalDefinition",void 0),e([c("multidimensionalDefinition")],k.prototype,"writeMultidimensionalDefinition",null),e([r({type:[p],json:{name:"fids",write:!0}})],k.prototype,"objectIds",void 0),e([r({type:h.apiValues,json:{type:h.jsonValues,read:{reader:h.read},write:{target:"mosaicOperation",writer:h.write}}})],k.prototype,"operation",void 0),e([n("operation",["mosaicOperation","mosaicOperator"])],k.prototype,"readOperation",null),e([r({type:String,json:{write:{overridePolicy(){return{enabled:"attribute"===this.method}}}}})],k.prototype,"sortField",void 0),e([r({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:"attribute"===this.method,allowNull:!0}}}}})],k.prototype,"sortValue",void 0),e([s("sortValue")],k.prototype,"castSortValue",null),e([r({type:l,json:{write:!0}})],k.prototype,"viewpoint",void 0),e([r({type:String,json:{write:!0}})],k.prototype,"where",void 0),k=d=e([a("esri.layers.support.MosaicRule")],k);export{k as default};
