/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{h as e}from"../lang.js";import{D as t,T as r}from"../../chunks/TimeOnly.js";import{r as n,e as a}from"../../chunks/string.js";import{D as o,Z as i,F as s}from"../../chunks/datetime.js";import{s as l,U as u,i as c}from"../../chunks/UnknownTimeZone.js";import{v as f}from"../../chunks/mathUtils.js";import{a as p,c as d,i as m}from"../../chunks/guards.js";import"../../chunks/enum.js";import"../../chunks/locale.js";import"../../chunks/handleUtils.js";import"../../geometry/Extent.js";import"../../chunks/tslib.es6.js";import"../accessorSupport/decorators/property.js";import"../../chunks/Logger.js";import"../../config.js";import"../../chunks/object.js";import"../../chunks/ensureType.js";import"../../chunks/MapUtils.js";import"../../chunks/get.js";import"../../chunks/utils.js";import"../../chunks/metadata.js";import"../Error.js";import"../accessorSupport/decorators/subclass.js";import"../../chunks/Lifecycle.js";import"../../chunks/tracking.js";import"../../chunks/Warning.js";import"../../geometry/Geometry.js";import"../JSONSupport.js";import"../Accessor.js";import"../Handles.js";import"../../chunks/maybe.js";import"../../chunks/ObjectPool.js";import"../../chunks/ObservableBase.js";import"../../chunks/watch.js";import"../scheduling.js";import"../../chunks/nextTick.js";import"../../chunks/PooledArray.js";import"../promiseUtils.js";import"../../chunks/events.js";import"../../chunks/SetUtils.js";import"../../chunks/SimpleTrackingTarget.js";import"../../chunks/reader.js";import"../../geometry/SpatialReference.js";import"../../chunks/unitUtils.js";import"../../chunks/jsonMap.js";import"../../chunks/pe.js";import"../../chunks/assets.js";import"../../request.js";import"../../kernel.js";import"../urlUtils.js";import"../../chunks/jsonUtils.js";import"../../chunks/persistableUrlUtils.js";import"../../chunks/writer.js";import"../../geometry/Point.js";import"../accessorSupport/decorators/cast.js";import"../../geometry/support/webMercatorUtils.js";const h={InvalidValueForAggregateFunction:"Invalid value used in aggregate function",MissingStatisticParameters:"Statistic does not have 1 or 0 Parameters",InvalidFunctionParameters:"Invalid parameters for call to {function}",UnsupportedIsLhs:"Unsupported left hand expression in is statement",UnsupportedIsRhs:"Unsupported right hand expression in is statement",UnsupportedOperator:"Unsupported operator - {operator}",UnsupportedSyntax:"Unsupported syntax - {node}",UnsupportedSqlFunction:"Sql function not found = {function}",InvalidDataType:"Invalid sql data type",InvalidDate:"Invalid date encountered",InvalidOperator:"Invalid operator encountered",InvalidTime:"Invalid time encountered",IllegalInterval:"Illegal interval",FunctionNotRecognized:"Function not recognized",InvalidTimeStamp:"Invalid timestamp encountered",InvalidParameterCount:"Invalid parameter count for call to {name}",PrimarySecondaryQualifiers:"Primary and Secondary SqlInterval qualifiers not supported",YearMonthIntervals:"Year-Month Intervals not supported",CannotCastValue:"Cannot cast value to the required data type"};class v extends Error{constructor(e,t){super(n(h[e],t)),this.declaredRootClass="esri.arcade.featureset.support.sqlerror",Error.captureStackTrace&&Error.captureStackTrace(this,v)}}function w(e){return Number.isNaN(e)||0===e?e:Math.trunc(e)}const I="esri.core.sql.SqlTimeStampOffset";class g{constructor(e){this._timeStampOffset=e,this.declaredRootClass=I,this._date=null}static isTimestampOffset(e){return"object"==typeof e&&null!=e&&"declaredRootClass"in e&&e.declaredRootClass===I}toDateTime(){return this._date??=o.fromISO(this._timeStampOffset,{setZone:!0}),this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return w(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return w(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return g.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(e){return new g(o.fromJSDate(e).toISO({includeOffset:!0}))}static fromDateTime(e){return new g(e.toISO({includeOffset:!0}))}static fromParts(e,t,r=0,n=0,a=0,o=0,i=0,s=!1,l=0,u=0){const c=`${e.toString().padStart(4,"0")}-${t.toString().padStart(2,"0")}-${r.toString().padStart(2,"0")}`;let f="";o<10&&(f="0");let p=`${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${f+o.toString()}`;0!==i&&(p+="."+i.toString().padStart(3,"0"));const d=`${s?"-":"+"}${l.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`;return new g(c+"T"+p+d)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let e=this.toDateTime().toSQL({includeOffset:!0,includeOffsetSpace:!0});return e&&(e=e.replace(".000","")),e}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(e){const t=this.toDateTime().plus(e);return g.fromDateTime(t)}}function y(e,t){const r=O[e.toLowerCase()];if(null==r)throw new v("FunctionNotRecognized");if(t.length<r.minParams||t.length>r.maxParams)throw new v("InvalidParameterCount",{name:e.toUpperCase()});return r.evaluate(t)}function T(e,t){const r=O[e.toLowerCase()];return null!=r&&t>=r.minParams&&t<=r.maxParams}const O={min:{minParams:1,maxParams:1,evaluate:e=>x(e[0],"min")},max:{minParams:1,maxParams:1,evaluate:e=>x(e[0],"max")},avg:{minParams:1,maxParams:1,evaluate:e=>N(e[0])},sum:{minParams:1,maxParams:1,evaluate:e=>function(e){if(null===e)return null;let t=0;for(let r=0;r<e.length;r++){const n=e[r];if(null!==n){if(!S(n))throw new v("InvalidValueForAggregateFunction");t+=n}}return t}(e[0])},stddev:{minParams:1,maxParams:1,evaluate:e=>function(e){if(null===e)return null;const t=E(e);return null===t?null:Math.sqrt(t)}(e[0])},count:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0].length},var:{minParams:1,maxParams:1,evaluate:e=>E(e[0])}};function N(e){if(null===e)return null;let t=0,r=0;for(let n=0;n<e.length;n++){const a=e[n];if(null!==a){if(!S(a))throw new v("InvalidValueForAggregateFunction");r++,t+=a}}return 0===r?null:t/e.length}function S(e){return"number"==typeof e}function x(e,n){if(null===e)return null;let a=null,i=null;for(const s of e){let e=s;e=t.isDateOnly(s)||r.isTimeOnly(s)?s.toNumber():o.isDateTime(s)?s.toMillis():g.isTimestampOffset(s)?s.toMilliseconds():s,(null===a||"max"===n&&null!==i&&null!==e&&i<=e||"min"===n&&null!==i&&null!==e&&i>=e)&&(a=s,i=e)}return a}function E(e){if(null===e)return null;if(0===(e=e.filter(e=>null!==e)).length)return null;const t=N(e);if(null===t)return null;let r=0;for(const n of e){if(!S(n))throw new v("InvalidValueForAggregateFunction");r+=(t-n)**2}return r/(e.length-1)}function C(e){if(null!==e.precision||null!==e.secondary)throw new v("PrimarySecondaryQualifiers")}function _(e,t){if(t.includes(".")){const r=t.split(".");e.second=parseFloat(r[0]),e.millis=parseInt(r[1],10)}else e.second=parseFloat(t)}const D="esri.core.sql.SqlInterval";class b{constructor(){this.declaredRootClass=D,this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0,this.millis=0}static isInterval(e){return"object"==typeof e&&null!=e&&"declaredRootClass"in e&&e.declaredRootClass===D}static createFromMilliseconds(e){const t=new b;return t.second=e/1e3,t}static createFromValueAndQualifier(e,t,r){let n=null;const a=new b;if(a.op="-"===r?"-":"+","interval-period"===t.type){C(t);const r=new RegExp("^[0-9]{1,}$");if("year"===t.period||"month"===t.period)throw new v("YearMonthIntervals");if("second"===t.period){if(!/^[0-9]{1,}(\.[0-9]{1,}){0,1}$/.test(e))throw new v("IllegalInterval");_(a,e)}else{if(!r.test(e))throw new v("IllegalInterval");a[t.period]=parseFloat(e)}}else{if(C(t.start),C(t.end),"year"===t.start.period||"month"===t.start.period||"year"===t.end.period||"month"===t.end.period)throw new v("YearMonthIntervals");switch(t.start.period){case"day":switch(t.end.period){case"hour":if(n=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!n.test(e))throw new v("IllegalInterval");a[t.start.period]=parseFloat(e.split(" ")[0]),a[t.end.period]=parseFloat(e.split(" ")[1]);break;case"minute":if(n=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!n.test(e))throw new v("IllegalInterval");{a[t.start.period]=parseFloat(e.split(" ")[0]);const r=e.split(" ")[1].split(":");a.hour=parseFloat(r[0]),a.minute=parseFloat(r[1])}break;case"second":if(n=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}(\\.[0-9]{1,}){0,1}$"),!n.test(e))throw new v("IllegalInterval");{a[t.start.period]=parseFloat(e.split(" ")[0]);const r=e.split(" ")[1].split(":");a.hour=parseFloat(r[0]),a.minute=parseFloat(r[1]),_(a,r[2])}break;default:throw new v("IllegalInterval")}break;case"hour":switch(t.end.period){case"minute":if(n=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!n.test(e))throw new v("IllegalInterval");a.hour=parseFloat(e.split(":")[0]),a.minute=parseFloat(e.split(":")[1]);break;case"second":if(n=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}(\\.[0-9]{1,}){0,1}$"),!n.test(e))throw new v("IllegalInterval");{const t=e.split(":");a.hour=parseFloat(t[0]),a.minute=parseFloat(t[1]),_(a,t[2])}break;default:throw new v("IllegalInterval")}break;case"minute":if("second"!==t.end.period)throw new v("IllegalInterval");if(n=new RegExp("^[0-9]{1,}:[0-9]{1,}(\\.[0-9]{1,}){0,1}$"),!n.test(e))throw new v("IllegalInterval");{const t=e.split(":");a.minute=parseFloat(t[0]),_(a,t[1])}break;default:throw new v("IllegalInterval")}}return a}valueInMilliseconds(){return("-"===this.op?-1:1)*(this.millis+1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}const M=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,A=/^(\d{1,2}):(\d{1,2})$/,L=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,F=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,P=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,R=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)? {0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,k=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})? {0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,$=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;function U(e,t){if(t instanceof i)return t===u.instance?o.fromMillis(e.getTime(),{zone:u.instance}):o.fromJSDate(e,{zone:t});switch(t){case"system":case"local":case null:return o.fromJSDate(e);default:return"unknown"===t?.toLowerCase()?o.fromMillis(e.getTime(),{zone:u.instance}):o.fromJSDate(e,{zone:t})}}function j(e){return b.isInterval(e)}function V(e){return o.isDateTime(e)}function z(e){return t.isDateOnly(e)}function q(e){return r.isTimeOnly(e)}function H(e){return g.isTimestampOffset(e)}function Z(e){let t=M.exec(e);if(null!==t){const[,e,n,a]=t,o=r.fromParts(parseInt(e,10),parseInt(n,10),parseInt(a,10),0);if(null!==o)return o;throw new v("InvalidTime")}if(t=A.exec(e),null!==t){const[,e,n]=t,a=r.fromParts(parseInt(e,10),parseInt(n,10),0,0);if(null!==a)return a;throw new v("InvalidTime")}if(t=L.exec(e),null!==t){const[,e,n,a,o]=t,i=r.fromParts(parseInt(e,10),parseInt(n,10),parseInt(a,10),parseInt(o,10));if(null!==i)return i;throw new v("InvalidTime")}throw new v("InvalidTime")}function W(e,t,r=!1){let n=P.exec(e);if(null!==n){const[,e,r,a,i,s,u,c]=n,f=o.fromObject({year:parseInt(e,10),month:parseInt(r,10),day:parseInt(a,10),hour:parseInt(i,10),minute:parseInt(s,10),second:parseInt(u,10),millisecond:c?parseInt(c.replace(".",""),10):0},{zone:l(t)});if(!1===f.isValid)throw new v("InvalidTimeStamp");return f}if(n=R.exec(e),null!==n){const[,e,t,r,a,o,i,s,l,u,c]=n,f=g.fromParts(parseInt(e,10),parseInt(t,10),parseInt(r,10),parseInt(a,10),parseInt(o,10),parseInt(i,10),s?parseInt(s.replace(".",""),10):0,"-"===l,parseInt(u,10),parseInt(c,10));if(!1===f.isValid)throw new v("InvalidTimeStamp");return f}if(n=k.exec(e),null!==n){const[,e,t,r,a,o,i,s,l]=n,u=g.fromParts(parseInt(e,10),parseInt(t,10),parseInt(r,10),parseInt(a,10),parseInt(o,10),0,0,"-"===i,parseInt(s,10),parseInt(l,10));if(!1===u.isValid)throw new v("InvalidTimeStamp");return u}if(n=$.exec(e),null!==n){const[,e,r,a,i,s]=n,u=o.fromObject({year:parseInt(e,10),month:parseInt(r,10),day:parseInt(a,10),hour:parseInt(i,10),minute:parseInt(s,10),second:0},{zone:l(t)});if(!1===u.isValid)throw new v("InvalidTimeStamp");return u}if(n=F.exec(e),null!==n){const[,e,r,a]=n,i=o.fromObject({year:parseInt(e,10),month:parseInt(r,10),day:parseInt(a,10),hour:0,minute:0,second:0},{zone:l(t)});if(!1===i.isValid)throw new v("InvalidTimeStamp");return i}throw new v("InvalidTimeStamp")}function Y(e,r){const n=F.exec(e);if(null===n)try{return W(e,r)}catch{throw new v("InvalidDate")}const[,a,o,i]=n,s=t.fromParts(parseInt(a,10),parseInt(o,10),parseInt(i,10));if(null===s)throw new v("InvalidDate");return s}function J(e){return!!V(e)||!!H(e)}function B(e){return!!(V(e)||z(e)||H(e)||q(e))}function G(e){if(V(e))return e.toMillis();if(z(e))return e.toNumber();if(H(e))return e.toMilliseconds();throw new v("InvalidDataType")}function K(e,t,r){if(null==e||null==t)return null;if(p(e)){if(p(t))return Q(e,t,r);if(d(t))return function(e,t,r){const n=parseFloat(t);if(!isNaN(n))return Q(e,n,r);const a=e.toString();switch(r){case"<>":return a!==t;case"=":return a===t;case">":return a>t;case"<":return a<t;case">=":return a>=t;case"<=":return a<=t}}(e,t,r);if(B(t))throw new v("InvalidOperator");if(z(t))throw new v("InvalidOperator")}else if(d(e)){if(p(t))return function(e,t,r){const n=parseFloat(e);if(!isNaN(n))return Q(n,t,r);const a=t.toString();switch(r){case"<>":return e!==a;case"=":return e===a;case">":return e>a;case"<":return e<a;case">=":return e>=a;case"<=":return e<=a}}(e,t,r);if(d(t))return function(e,t,r){switch(r){case"<>":return e!==t;case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}}(e,t,r);if(V(t))throw new v("InvalidOperator");if(z(t))throw new v("InvalidOperator");if(q(t))throw new v("InvalidOperator");if(H(t))throw new v("InvalidOperator")}else if(V(e)){if(J(t)){if(c(e.zone)){if(o.isDateTime(t)&&!c(t.zone))return X(e,t,r);if(g.isTimestampOffset(t))return X(e,t,r)}else if(o.isDateTime(t)&&c(t.zone)){if(!c(e.zone))return X(e,t,r);if(g.isTimestampOffset(e))return X(e,t,r)}return Q(G(e),G(t),r)}if(d(t))throw new v("InvalidOperator");if(z(t))return function(e,t,r){const n=t.toDateTimeLuxon(e.zone);return Q((e=e.startOf("day")).toMillis(),n.toMillis(),r)}(e,t,r);if(q(t))throw new v("InvalidOperator");if(p(t))throw new v("InvalidOperator")}else if(z(e)){if(H(t))return function(e,t,r){const n=e.toDateTimeLuxon(t.toDateTime().zone);return t=t.startOfDay(),Q(n.toMillis(),t.toMilliseconds(),r)}(e,t,r);if(V(t))return function(e,t,r){const n=e.toDateTimeLuxon(t.zone);return t=t.startOf("day"),Q(n.toMillis(),t.toMillis(),r)}(e,t,r);if(d(t))throw new v("InvalidOperator");if(z(t))return Q(e.toNumber(),t.toNumber(),r);if(q(t))throw new v("InvalidOperator");if(p(t))throw new v("InvalidOperator")}else if(q(e)){if(q(t))return Q(e.toNumber(),t.toNumber(),r);if(d(t))throw new v("InvalidOperator");if(p(t))throw new v("InvalidOperator");if(z(t))throw new v("InvalidOperator");if(J(t))throw new v("InvalidOperator")}else if(H(e)){if(J(t))return o.isDateTime(t)&&c(t.zone)?X(e,t,r):Q(G(e),G(t),r);if(d(t))throw new v("InvalidOperator");if(z(t))return function(e,t,r){const n=t.toDateTimeLuxon(e.toDateTime().zone);return Q((e=e.startOfDay()).toMilliseconds(),n.toMillis(),r)}(e,t,r);if(q(t))throw new v("InvalidOperator");if(p(t))throw new v("InvalidOperator")}switch(r){case"<>":return e!==t;case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}}function Q(e,t,r){switch(r){case"<>":return e!==t;case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}}function X(e,t,r){g.isTimestampOffset(e)&&(e=e.toDateTime()),g.isTimestampOffset(t)&&(t=t.toDateTime());const n=ee(e),a=ee(t);switch(r){case"<>":return n!==a;case"=":return n===a;case">":return n>a;case"<":return n<a;case">=":return n>=a;case"<=":return n<=a}}function ee(e){return 321408e5*e.year+26784e5*e.month+864e5*e.day+36e5*e.hour+6e4*e.minute+1e3*e.second+e.millisecond}function te(e,t,r){const n=ae[e.toLowerCase()];if(null==n)throw new v("FunctionNotRecognized");if(t.length<n.minParams||t.length>n.maxParams)throw new v("InvalidParameterCount",{name:e.toUpperCase()});return n.evaluate(t,r)}function re(e){return!(m(e)||z(e)||V(e)||q(e)||H(e))}function ne(e){return z(e)||q(e)?e.toString():H(e)?e.toSQLValue():V(e)?0===e.millisecond?e.toFormat("yyyy-LL-dd HH:mm:ss"):e.toSQL({includeOffset:!1}):m(e)?ne(o.fromJSDate(e)):e.toString()}const ae={extract:{minParams:2,maxParams:2,evaluate:([e,t])=>{if(null==t)return null;if(m(t))switch(e.toUpperCase()){case"SECOND":return t.getSeconds();case"MINUTE":return t.getMinutes();case"HOUR":return t.getHours();case"DAY":return t.getDate();case"MONTH":return t.getMonth()+1;case"YEAR":return t.getFullYear();case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":return 0;case"DOW":return o.fromJSDate(t,{zone:"system"}).weekday;case"DOY":return o.fromJSDate(t,{zone:"system"}).ordinal;case"WEEK":return o.fromJSDate(t,{zone:"system"}).weekNumber}else if(V(t))switch(e.toUpperCase()){case"SECOND":return t.second;case"MINUTE":return t.minute;case"HOUR":return t.hour;case"DAY":return t.day;case"MONTH":return t.month;case"YEAR":return t.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new v("InvalidFunctionParameters",{function:"EXTRACT"});case"DOW":return t.weekday;case"DOY":return t.ordinal;case"WEEK":return t.weekNumber}else if(z(t))switch(e.toUpperCase()){case"DAY":return t.day;case"MONTH":return t.month;case"YEAR":return t.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new v("InvalidFunctionParameters",{function:"EXTRACT"});case"DOW":return t.toDateTime("unknown").weekday;case"DOY":return t.toDateTime("unknown").ordinal;case"WEEK":return t.toDateTime("unknown").weekNumber}else if(q(t))switch(e.toUpperCase()){case"SECOND":return t.second;case"MINUTE":return t.minute;case"HOUR":return t.hour}else if(H(t))switch(e.toUpperCase()){case"SECOND":return t.second;case"MINUTE":return t.minute;case"HOUR":return t.hour;case"DAY":return t.day;case"MONTH":return t.month;case"YEAR":return t.year;case"TIMEZONE_HOUR":return t.timezoneOffsetHour;case"TIMEZONE_MINUTE":return t.timezoneOffsetMinutes;case"DOW":return t.toDateTime().weekday;case"DOY":return t.toDateTime().ordinal;case"WEEK":return t.toDateTime().weekNumber}throw new v("InvalidFunctionParameters",{function:"EXTRACT"})}},substring:{minParams:2,maxParams:3,evaluate:e=>{if(2===e.length){const[t,r]=e;return null==t||null==r?null:t.toString().substring(r-1)}if(3===e.length){const[t,r,n]=e;return null==t||null==r||null==n?null:n<=0?"":t.toString().substring(r-1,r+n-1)}}},position:{minParams:2,maxParams:2,evaluate:([e,t])=>null==e||null==t?null:t.indexOf(e)+1},trim:{minParams:2,maxParams:3,evaluate:e=>{const t=3===e.length,r=t?e[1]:" ",n=t?e[2]:e[1];if(null==r||null==n)return null;const o=`(${a(r)})`;switch(e[0]){case"BOTH":return n.replaceAll(new RegExp(`^${o}*|${o}*$`,"g"),"");case"LEADING":return n.replaceAll(new RegExp(`^${o}*`,"g"),"");case"TRAILING":return n.replaceAll(new RegExp(`${o}*$`,"g"),"")}throw new v("InvalidFunctionParameters",{function:"TRIM"})}},abs:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.abs(e[0])},ceiling:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.ceil(e[0])},floor:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.floor(e[0])},log:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.log(e[0])},log10:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.log(e[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.sin(e[0])},cos:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.cos(e[0])},tan:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.tan(e[0])},asin:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.asin(e[0])},acos:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.acos(e[0])},atan:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.atan(e[0])},sign:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0]>0?1:e[0]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:e=>null==e[0]||null==e[1]?null:e[0]**e[1]},mod:{minParams:2,maxParams:2,evaluate:e=>null==e[0]||null==e[1]?null:e[0]%e[1]},round:{minParams:1,maxParams:2,evaluate:e=>{const t=e[0],r=2===e.length?10**e[1]:1;return null==t?null:Math.round(t*r)/r}},truncate:{minParams:1,maxParams:2,evaluate:e=>null==e[0]?null:1===e.length||0===e[1]?Math.trunc(e[0]):f("trunc",e[0],-Number(e[1]))},char_length:{minParams:1,maxParams:1,evaluate:e=>d(e[0])?e[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:e=>{let t="";for(let r=0;r<e.length;r++){if(null==e[r])return null;t+=e[r].toString()}return t}},lower:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:1/0,evaluate:e=>{for(const t of e)if(null!==t)return t;return null}},cosh:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.cosh(e[0])},sinh:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.sinh(e[0])},tanh:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.tanh(e[0])},nullif:{minParams:2,maxParams:2,evaluate:e=>K(e[0],e[1],"=")?null:e[0]},cast:{minParams:2,maxParams:2,evaluate:(e,n)=>{const a=e[0],o=e[1];if(null===a)return null;switch(o.type){case"integer":{if(!re(a))throw new v("CannotCastValue");const e=parseInt(a,10);if(isNaN(e))throw new v("CannotCastValue");return e}case"smallint":{if(!re(a))throw new v("CannotCastValue");const e=parseInt(a,10);if(isNaN(e))throw new v("CannotCastValue");if(e>32767||e<-32767)throw new v("CannotCastValue");return e}case"float":case"real":{if(!re(a))throw new v("CannotCastValue");const e=parseFloat(a);if(isNaN(e))throw new v("CannotCastValue");return e}case"time":return function(e){if(m(e))return r.fromDateJS(e);if(V(e))return r.fromDateTime(e);if(z(e))throw new v("CannotCastValue");if(q(e))return e;if(H(e))return r.fromSqlTimeStampOffset(e);if(d(e))return Z(e);throw new v("CannotCastValue")}(a);case"date":return function(e){if(m(e))return t.fromDateJS(e);if(V(e))return t.fromParts(e.year,e.month,e.day);if(z(e))return e;if(q(e))throw new v("CannotCastValue");if(H(e)&&null===t.fromParts(e.year,e.month,e.day))throw new v("CannotCastValue");if(d(e)){const r=t.fromReader(e);if(null!==r&&r.isValid)return r}throw new v("CannotCastValue")}(a);case"timestamp":return function(e,t,r){if(m(e))return U(e,t);if(V(e))return e;if(z(e))return e.toDateTimeLuxon("unknown");if(q(e))throw new v("CannotCastValue");if(H(e))return e;if(d(e))return W(e,"unknown",r);throw new v("CannotCastValue")}(a,n,!0===o.withtimezone);case"varchar":{const e=ne(a);if(e.length>o.size)throw new v("CannotCastValue");return e}default:throw new v("InvalidDataType")}}}};function oe(e,t,r,n){if("||"===e)return te("concat",[t,r],n);if(null===t||null===r)return null;if(p(t)){if(p(r))return ie(t,r,e);if(j(r))return function(e,t,r){switch(r){case"+":return b.createFromMilliseconds(e+t.valueInMilliseconds());case"-":return b.createFromMilliseconds(e-t.valueInMilliseconds());case"*":return b.createFromMilliseconds(e*t.valueInMilliseconds());case"/":return b.createFromMilliseconds(e/t.valueInMilliseconds())}throw new v("InvalidOperator")}(t,r,e);if(q(r))return function(){throw new v("InvalidOperator")}();if(z(r))return function(){throw new v("InvalidOperator")}();if(H(r))return function(){throw new v("InvalidOperator")}();if(V(r))return function(){throw new v("InvalidOperator")}();if(d(r))return function(e,t,r){const n=parseFloat(t);if(isNaN(n))throw new v("InvalidOperator");return ie(e,n,r)}(t,r,e);throw new v("InvalidOperator")}if(z(t)){if(p(r))return function(e,t,r){const n=1e3*t*24*60*60;switch(r){case"+":return e.plus("milliseconds",n);case"-":return e.plus("milliseconds",-1*n)}throw new v("InvalidOperator")}(t,r,e);if(j(r))return function(e,t,r){switch(r){case"+":return e.plus("milliseconds",t.valueInMilliseconds());case"-":return e.plus("milliseconds",-1*t.valueInMilliseconds())}throw new v("InvalidOperator")}(t,r,e);if(q(r))return function(){throw new v("InvalidOperator")}();if(z(r))return function(e,t,r){if("-"===r)return e.toDateTimeLuxon("UTC").diff(t.toDateTimeLuxon("UTC")).as("days");throw new v("InvalidOperator")}(t,r,e);if(H(r))return function(e,t,r){if("-"===r)return e.toDateTimeLuxon(t.toDateTime().zone).diff(t.toDateTime()).as("days");throw new v("InvalidOperator")}(t,r,e);if(V(r))return function(e,t,r){if("-"===r)return e.toDateTimeLuxon(t.zone).diff(t).as("days");throw new v("InvalidOperator")}(t,r,e);if(d(r))return function(){throw new v("InvalidOperator")}();throw new v("InvalidOperator")}if(q(t)){if(p(r))return function(e,t,r){const n=1e3*t*24*60*60;switch(r){case"+":return e.plus("milliseconds",n);case"-":return e.plus("milliseconds",-1*n)}throw new v("InvalidOperator")}(t,r,e);if(j(r))return function(e,t,r){switch(r){case"+":return e.plus("milliseconds",t.valueInMilliseconds());case"-":return e.plus("milliseconds",-1*t.valueInMilliseconds())}throw new v("InvalidOperator")}(t,r,e);if(q(r))return function(){throw new v("InvalidOperator")}();if(z(r))return function(){throw new v("InvalidOperator")}();if(H(r))return function(){throw new v("InvalidOperator")}();if(V(r))return function(){throw new v("InvalidOperator")}();if(d(r))return function(){throw new v("InvalidOperator")}();throw new v("InvalidOperator")}if(j(t)){if(p(r))return function(e,t,r){switch(r){case"+":return b.createFromMilliseconds(e.valueInMilliseconds()+t);case"-":return b.createFromMilliseconds(e.valueInMilliseconds()-t);case"*":return b.createFromMilliseconds(e.valueInMilliseconds()*t);case"/":return b.createFromMilliseconds(e.valueInMilliseconds()/t)}throw new v("InvalidOperator")}(t,r,e);if(j(r))return function(e,t,r){switch(r){case"+":return b.createFromMilliseconds(e.valueInMilliseconds()+t.valueInMilliseconds());case"-":return b.createFromMilliseconds(e.valueInMilliseconds()-t.valueInMilliseconds());case"*":return b.createFromMilliseconds(e.valueInMilliseconds()*t.valueInMilliseconds());case"/":return b.createFromMilliseconds(e.valueInMilliseconds()/t.valueInMilliseconds())}throw new v("InvalidOperator")}(t,r,e);if(q(r))return function(e,t,r){if("+"===r)return t.plus("milliseconds",e.valueInMilliseconds());throw new v("InvalidOperator")}(t,r,e);if(z(r))return function(e,t,r){if("+"===r)return t.plus("milliseconds",e.valueInMilliseconds());throw new v("InvalidOperator")}(t,r,e);if(H(r))return function(e,t,r){if("+"===r)return t.addMilliseconds(e.valueInMilliseconds());throw new v("InvalidOperator")}(t,r,e);if(V(r))return function(e,t,r){switch(r){case"+":return t.plus({milliseconds:e.valueInMilliseconds()});case"-":return e.valueInMilliseconds()-t.toMillis()}throw new v("InvalidOperator")}(t,r,e);if(d(r))return function(){throw new v("InvalidOperator")}();throw new v("InvalidOperator")}if(V(t)){if(p(r))return function(e,t,r){const n=1e3*t*24*60*60;switch(r){case"+":return e.plus({milliseconds:n});case"-":return e.minus({milliseconds:n})}throw new v("InvalidOperator")}(t,r,e);if(j(r))return function(e,t,r){switch(r){case"+":return e.plus({milliseconds:t.valueInMilliseconds()});case"-":return e.minus({milliseconds:t.valueInMilliseconds()})}throw new v("InvalidOperator")}(t,r,e);if(q(r))return function(){throw new v("InvalidOperator")}();if(z(r))return function(e,t,r){if("-"===r)return e.diff(t.toDateTimeLuxon(e.zone)).as("days");throw new v("InvalidOperator")}(t,r,e);if(H(r))return function(e,t,r){if("-"===r)return e.diff(t.toDateTime()).as("days");throw new v("InvalidOperator")}(t,r,e);if(V(r))return function(e,t,r){if("-"===r)return e.diff(t).as("days");throw new v("InvalidOperator")}(t,r,e);if(d(r))return function(){throw new v("InvalidOperator")}();throw new v("InvalidOperator")}if(H(t)){if(p(r))return function(e,t,r){const n=1e3*t*24*60*60;switch(r){case"+":return e.addMilliseconds(n);case"-":return e.addMilliseconds(-1*n)}throw new v("InvalidOperator")}(t,r,e);if(j(r))return function(e,t,r){switch(r){case"+":return e.addMilliseconds(t.valueInMilliseconds());case"-":return e.addMilliseconds(-1*t.valueInMilliseconds())}throw new v("InvalidOperator")}(t,r,e);if(q(r))return function(){throw new v("InvalidOperator")}();if(z(r))return function(e,t,r){if("-"===r)return e.toDateTime().diff(t.toDateTimeLuxon(e.toDateTime().zone)).as("days");throw new v("InvalidOperator")}(t,r,e);if(H(r))return function(e,t,r){if("-"===r)return e.toDateTime().diff(t.toDateTime()).as("days");throw new v("InvalidOperator")}(t,r,e);if(V(r))return function(e,t,r){if("-"===r)return e.toDateTime().diff(t).as("days");throw new v("InvalidOperator")}(t,r,e);if(d(r))return function(){throw new v("InvalidOperator")}();throw new v("InvalidOperator")}if(d(t)){if(p(r))return function(e,t,r){const n=parseFloat(e);if(isNaN(n))throw new v("InvalidOperator");return ie(n,t,r)}(t,r,e);if(j(r))return function(){throw new v("InvalidOperator")}();if(q(r))return function(){throw new v("InvalidOperator")}();if(z(r))return function(){throw new v("InvalidOperator")}();if(H(r))return function(){throw new v("InvalidOperator")}();if(V(r))return function(){throw new v("InvalidOperator")}();if(d(r))return function(e,t,r){if("+"===r)return e+t;throw new v("InvalidOperator")}(t,r,e);throw new v("InvalidOperator")}throw new v("InvalidOperator")}function ie(e,t,r){switch(r){case"+":return e+t;case"-":return e-t;case"*":return e*t;case"/":return e/t}throw new v("InvalidOperator")}class se extends SyntaxError{constructor(e,t,r,n){super(e),this.expected=t,this.found=r,this.location=n,this.name="SyntaxError"}format(e){let t="Error: "+this.message;if(this.location){let r=null;const n=e.find(e=>e.source===this.location.source);n&&(r=n.text.split(/\r\n|\n|\r/g));const a=this.location.start,o=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(a):a,i=this.location.source+":"+o.line+":"+o.column;if(r){const e=this.location.end,n="".padEnd(o.line.toString().length," "),s=r[a.line-1],l=(a.line===e.line?e.column:s.length+1)-a.column||1;t+="\n --\x3e "+i+"\n"+n+" |\n"+o.line+" | "+s+"\n"+n+" | "+"".padEnd(a.column-1," ")+"".padEnd(l,"^")}else t+="\n at "+i}return t}static buildMessage(e,t){function r(e){return e.codePointAt(0).toString(16).toUpperCase()}const n=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function a(e){return n?e.replace(n,e=>"\\u{"+r(e)+"}"):e}function o(e){return a(e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,e=>"\\x0"+r(e)).replace(/[\x10-\x1F\x7F-\x9F]/g,e=>"\\x"+r(e)))}function i(e){return a(e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,e=>"\\x0"+r(e)).replace(/[\x10-\x1F\x7F-\x9F]/g,e=>"\\x"+r(e)))}const s={literal:e=>'"'+o(e.text)+'"',class(e){const t=e.parts.map(e=>Array.isArray(e)?i(e[0])+"-"+i(e[1]):i(e));return"["+(e.inverted?"^":"")+t.join("")+"]"+(e.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:e=>e.description};function l(e){return s[e.type](e)}return"Expected "+function(e){const t=e.map(l);if(t.sort(),t.length>0){let e=1;for(let r=1;r<t.length;r++)t[r-1]!==t[r]&&(t[e]=t[r],e++);t.length=e}switch(t.length){case 1:return t[0];case 2:return t[0]+" or "+t[1];default:return t.slice(0,-1).join(", ")+", or "+t[t.length-1]}}(e)+" but "+function(e){return e?'"'+o(e)+'"':"end of input"}(t)+" found."}}class le{static parse(e){return function(e,t){const r={},n=(t=void 0!==t?t:{}).grammarSource,a={start:Tr};let o=Tr;const i="!",s="=",l=">=",u=">",c="<=",f="<>",p="!=",d="||",m="@",h="'",v="N'",w="''",I=".",g="null",y="true",T="false",O="in",N="is",S="like",x="escape",E="not",C="and",_="or",D="between",b="from",M="for",A="substring",L="extract",F="trim",P="position",R="timestamp",k="date",$="time",U="leading",j="trailing",V="both",z="cast",q="as",H="integer",Z="int",W="smallint",Y="float",J="real",B="varchar",G="to",K="interval",Q="year",X="timezone_hour",ee="timezone_minute",te="month",re="day",ne="hour",ae="minute",oe="second",ie="dow",le="doy",ue="week",ce="case",fe="end",pe="when",de="then",me="else",he=",",ve="(",we=")",Ie="`",ge=/^[<-=]/,ye=/^[+\-]/,Te=/^[*\/]/,Oe=/^[A-Za-z_\x80-\uFFFF]/,Ne=/^[A-Za-z0-9_]/,Se=/^[A-Za-z0-9_.\x80-\uFFFF]/,xe=/^["]/,Ee=/^[^']/,Ce=/^[0-9]/,_e=/^[eE]/,De=/^[ \t\n\r]/,be=/^[^`]/,Me=vr("!",!1),Ae=vr("=",!1),Le=vr(">=",!1),Fe=vr(">",!1),Pe=vr("<=",!1),Re=vr("<>",!1),ke=wr([["<","="]],!1,!1,!1),$e=vr("!=",!1),Ue=wr(["+","-"],!1,!1,!1),je=vr("||",!1),Ve=wr(["*","/"],!1,!1,!1),ze=wr([["A","Z"],["a","z"],"_",["","￿"]],!1,!1,!1),qe=wr([["A","Z"],["a","z"],["0","9"],"_"],!1,!1,!1),He=wr([["A","Z"],["a","z"],["0","9"],"_",".",["","￿"]],!1,!1,!1),Ze=wr(['"'],!1,!1,!1),We=vr("@",!1),Ye=vr("'",!1),Je=vr("N'",!1),Be=vr("''",!1),Ge=wr(["'"],!0,!1,!1),Ke=vr(".",!1),Qe=wr([["0","9"]],!1,!1,!1),Xe=wr(["e","E"],!1,!1,!1),et=vr("NULL",!0),tt=vr("TRUE",!0),rt=vr("FALSE",!0),nt=vr("IN",!0),at=vr("IS",!0),ot=vr("LIKE",!0),it=vr("ESCAPE",!0),st=vr("NOT",!0),lt=vr("AND",!0),ut=vr("OR",!0),ct=vr("BETWEEN",!0),ft=vr("FROM",!0),pt=vr("FOR",!0),dt=vr("SUBSTRING",!0),mt=vr("EXTRACT",!0),ht=vr("TRIM",!0),vt=vr("POSITION",!0),wt=vr("TIMESTAMP",!0),It=vr("DATE",!0),gt=vr("TIME",!0),yt=vr("LEADING",!0),Tt=vr("TRAILING",!0),Ot=vr("BOTH",!0),Nt=vr("CAST",!0),St=vr("AS",!0),xt=vr("INTEGER",!0),Et=vr("INT",!0),Ct=vr("SMALLINT",!0),_t=vr("FLOAT",!0),Dt=vr("REAL",!0),bt=vr("VARCHAR",!0),Mt=vr("TO",!0),At=vr("INTERVAL",!0),Lt=vr("YEAR",!0),Ft=vr("TIMEZONE_HOUR",!0),Pt=vr("TIMEZONE_MINUTE",!0),Rt=vr("MONTH",!0),kt=vr("DAY",!0),$t=vr("HOUR",!0),Ut=vr("MINUTE",!0),jt=vr("SECOND",!0),Vt=vr("DOW",!0),zt=vr("DOY",!0),qt=vr("WEEK",!0),Ht=vr("CASE",!0),Zt=vr("END",!0),Wt=vr("WHEN",!0),Yt=vr("THEN",!0),Jt=vr("ELSE",!0),Bt=vr(",",!1),Gt=vr("(",!1),Kt=vr(")",!1),Qt=wr([" ","\t","\n","\r"],!1,!1,!1),Xt=vr("`",!1),er=wr(["`"],!0,!1,!1);function tr(e,t,r){return{op:t,expr:r,location:mr()}}function rr(e,t,r){return{op:t,expr:r,location:mr()}}function nr(e,t){return{op:e,expr:t,location:mr()}}function ar(e,t,r){return{op:t,expr:r,location:mr()}}function or(e,t,r){return{op:t,expr:r,location:mr()}}function ir(){return"'"}let sr=0|t.peg$currPos,lr=sr;const ur=[{line:1,column:1}];let cr,fr=sr,pr=t.peg$maxFailExpected||[],dr=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in a))throw new Error("Can't start parsing from rule \""+t.startRule+'".');o=a[t.startRule]}function mr(){return gr(lr,sr)}function hr(e,t){throw function(e,t){return new se(e,null,null,t)}(e,t=void 0!==t?t:gr(lr,sr))}function vr(e,t){return{type:"literal",text:e,ignoreCase:t}}function wr(e,t,r,n){return{type:"class",parts:e,inverted:t,ignoreCase:r,unicode:n}}function Ir(t){let r,n=ur[t];if(n)return n;if(t>=ur.length)r=ur.length-1;else for(r=t;!ur[--r];);for(n=ur[r],n={line:n.line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return ur[t]=n,n}function gr(e,t,r){const a=Ir(e),o=Ir(t);return{source:n,start:{offset:e,line:a.line,column:a.column},end:{offset:t,line:o.line,column:o.column}}}function yr(e){sr<fr||(sr>fr&&(fr=sr,pr=[]),pr.push(e))}function Tr(){let e,t;return e=sr,Mn(),t=Nr(),t!==r?(Mn(),lr=e,e=t):(sr=e,e=r),e}function Or(){let e,t,n,a,o,i,s,l;if(e=sr,t=Dn(),t!==r){for(Mn(),n=[],a=Nr();a!==r;)n.push(a),a=sr,o=sr,i=Mn(),s=_n(),s!==r?(l=Mn(),i=[i,s,l],o=i):(sr=o,o=r),o!==r?(o=Nr(),o===r?(sr=a,a=r):a=o):a=o;a=Mn(),o=bn(),o!==r?(lr=e,u=n,e={type:"expression-list",location:mr(),value:u}):(sr=e,e=r)}else sr=e,e=r;var u;return e}function Nr(){let e,t,n,a,o,i;if(e=sr,t=Sr(),t!==r){for(n=[],a=sr,Mn(),o=cn(),o!==r?(Mn(),i=Sr(),i!==r?(lr=a,a=tr(0,o,i)):(sr=a,a=r)):(sr=a,a=r);a!==r;)n.push(a),a=sr,Mn(),o=cn(),o!==r?(Mn(),i=Sr(),i!==r?(lr=a,a=tr(0,o,i)):(sr=a,a=r)):(sr=a,a=r);lr=e,e=Pn(t,n)}else sr=e,e=r;return e}function Sr(){let e,t,n,a,o,i;if(e=sr,t=xr(),t!==r){for(n=[],a=sr,Mn(),o=un(),o!==r?(Mn(),i=xr(),i!==r?(lr=a,a=rr(0,o,i)):(sr=a,a=r)):(sr=a,a=r);a!==r;)n.push(a),a=sr,Mn(),o=un(),o!==r?(Mn(),i=xr(),i!==r?(lr=a,a=rr(0,o,i)):(sr=a,a=r)):(sr=a,a=r);lr=e,e=Pn(t,n)}else sr=e,e=r;return e}function xr(){let t,n,a,o,l;return t=sr,n=ln(),n===r&&(n=sr,33===e.charCodeAt(sr)?(a=i,sr++):(a=r,0===dr&&yr(Me)),a!==r?(o=sr,dr++,61===e.charCodeAt(sr)?(l=s,sr++):(l=r,0===dr&&yr(Ae)),dr--,l===r?o=void 0:(sr=o,o=r),o!==r?(a=[a,o],n=a):(sr=n,n=r)):(sr=n,n=r)),n!==r?(a=Mn(),o=xr(),o!==r?(lr=t,t=function(e,t,r){return{type:"unary-expression",location:r,operator:"NOT",expr:t}}(0,o,mr())):(sr=t,t=r)):(sr=t,t=r),t===r&&(t=function(){let t,n,a,o;var i,s;return t=sr,n=Dr(),n!==r?(a=sr,Mn(),o=function(){let t;return t=function(){let e,t,n,a,o;if(e=sr,t=[],n=sr,Mn(),a=Er(),a!==r?(Mn(),o=Dr(),o!==r?(lr=n,n=nr(a,o)):(sr=n,n=r)):(sr=n,n=r),n!==r)for(;n!==r;)t.push(n),n=sr,Mn(),a=Er(),a!==r?(Mn(),o=Dr(),o!==r?(lr=n,n=nr(a,o)):(sr=n,n=r)):(sr=n,n=r);else t=r;return t!==r&&(lr=e,t={type:"arithmetic",tail:t}),e=t,e}(),t===r&&(t=function(){let e,t,n;return e=sr,t=_r(),t!==r?(Mn(),n=Or(),n!==r?(lr=e,e={op:t,right:n}):(sr=e,e=r)):(sr=e,e=r),e===r&&(e=sr,t=_r(),t!==r?(Mn(),n=jr(),n!==r?(lr=e,e={op:t,right:n}):(sr=e,e=r)):(sr=e,e=r)),e}(),t===r&&(t=function(){let e,t,n,a,o,i,s,l;var u,c;return e=sr,t=ln(),t!==r?(Mn(),n=fn(),n!==r?(a=Mn(),o=sr,i=Dr(),i!==r?(Mn(),s=un(),s!==r?(Mn(),l=Dr(),l!==r?(lr=o,u=i,c=l,o=Fn(mr(),u,c)):(sr=o,o=r)):(sr=o,o=r)):(sr=o,o=r),o!==r?(lr=e,e={op:"NOT"+n,right:o}):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r),e===r&&(e=sr,t=fn(),t!==r?(Mn(),n=sr,a=Dr(),a!==r?(o=Mn(),i=un(),i!==r?(Mn(),s=Dr(),s!==r?(lr=n,n=function(e,t,r){return Fn(mr(),t,r)}(0,a,s)):(sr=n,n=r)):(sr=n,n=r)):(sr=n,n=r),n!==r?(lr=e,e={op:t,right:n}):(sr=e,e=r)):(sr=e,e=r)),e}(),t===r&&(t=function(){let e,t,n,a;return e=sr,t=on(),t!==r?(Mn(),n=ln(),n!==r?(Mn(),a=Dr(),a!==r?(lr=e,e={op:t+"NOT",right:a}):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r),e===r&&(e=sr,t=on(),t!==r?(Mn(),n=Dr(),n!==r?(lr=e,e={op:t,right:n}):(sr=e,e=r)):(sr=e,e=r)),e}(),t===r&&(t=function(){let t,n,a,o,i;return t=sr,n=Cr(),n!==r?(Mn(),a=Jr(),a!==r?(Mn(),o=function(){let t,n,a,o;return t=sr,n=e.substr(sr,6),n.toLowerCase()===x?sr+=6:(n=r,0===dr&&yr(it)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="ESCAPE"):(sr=t,t=r)):(sr=t,t=r),t}(),o!==r?(Mn(),i=Br(),i!==r?(lr=t,t={op:n,right:a,escape:i.value}):(sr=t,t=r)):(sr=t,t=r)):(sr=t,t=r)):(sr=t,t=r),t===r&&(t=sr,n=Cr(),n!==r?(Mn(),a=Jr(),a!==r?(lr=t,t={op:n,right:a,escape:""}):(sr=t,t=r)):(sr=t,t=r)),t}())))),t}(),o!==r?a=o:(sr=a,a=r),a===r&&(a=null),lr=t,i=n,t=""==(s=a)||null==s||null==s?i:"arithmetic"==s.type?Pn(i,s.tail):Ln(s.op,i,s.right,s.escape,mr())):(sr=t,t=r),t}()),t}function Er(){let t;return e.substr(sr,2)===l?(t=l,sr+=2):(t=r,0===dr&&yr(Le)),t===r&&(62===e.charCodeAt(sr)?(t=u,sr++):(t=r,0===dr&&yr(Fe)),t===r&&(e.substr(sr,2)===c?(t=c,sr+=2):(t=r,0===dr&&yr(Pe)),t===r&&(e.substr(sr,2)===f?(t=f,sr+=2):(t=r,0===dr&&yr(Re)),t===r&&(t=e.charAt(sr),ge.test(t)?sr++:(t=r,0===dr&&yr(ke)),t===r&&(e.substr(sr,2)===p?(t=p,sr+=2):(t=r,0===dr&&yr($e))))))),t}function Cr(){let e,t,n,a,o;var i;return e=sr,t=sr,n=ln(),n!==r?(a=Mn(),o=sn(),o!==r?(n=[n,a,o],t=n):(sr=t,t=r)):(sr=t,t=r),t!==r&&(lr=e,t=(i=t)[0]+" "+i[2]),e=t,e===r&&(e=sn()),e}function _r(){let e,t,n,a,o;var i;return e=sr,t=sr,n=ln(),n!==r?(a=Mn(),o=an(),o!==r?(n=[n,a,o],t=n):(sr=t,t=r)):(sr=t,t=r),t!==r&&(lr=e,t=(i=t)[0]+" "+i[2]),e=t,e===r&&(e=an()),e}function Dr(){let e,t,n,a,o,i;if(e=sr,t=Mr(),t!==r){for(n=[],a=sr,Mn(),o=br(),o!==r?(Mn(),i=Mr(),i!==r?(lr=a,a=ar(0,o,i)):(sr=a,a=r)):(sr=a,a=r);a!==r;)n.push(a),a=sr,Mn(),o=br(),o!==r?(Mn(),i=Mr(),i!==r?(lr=a,a=ar(0,o,i)):(sr=a,a=r)):(sr=a,a=r);lr=e,e=Pn(t,n)}else sr=e,e=r;return e}function br(){let t;return t=e.charAt(sr),ye.test(t)?sr++:(t=r,0===dr&&yr(Ue)),t===r&&(e.substr(sr,2)===d?(t=d,sr+=2):(t=r,0===dr&&yr(je))),t}function Mr(){let e,t,n,a,o,i;if(e=sr,t=Lr(),t!==r){for(n=[],a=sr,Mn(),o=Ar(),o!==r?(Mn(),i=Lr(),i!==r?(lr=a,a=or(0,o,i)):(sr=a,a=r)):(sr=a,a=r);a!==r;)n.push(a),a=sr,Mn(),o=Ar(),o!==r?(Mn(),i=Lr(),i!==r?(lr=a,a=or(0,o,i)):(sr=a,a=r)):(sr=a,a=r);lr=e,e=Pn(t,n)}else sr=e,e=r;return e}function Ar(){let t;return t=e.charAt(sr),Te.test(t)?sr++:(t=r,0===dr&&yr(Ve)),t}function Lr(){let t,n,a,o;var i;return t=function(){let t;return t=Br(),t===r&&(t=function(){let e,t,n,a;var o;return e=sr,t=function(){let e,t,n,a;return e=sr,t=Xr(),t!==r?(n=en(),n!==r?(a=tn(),a!==r?(lr=e,e=parseFloat(t+n+a)):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r),e===r&&(e=sr,t=Xr(),t!==r?(n=en(),n!==r?(lr=e,e=parseFloat(t+n)):(sr=e,e=r)):(sr=e,e=r),e===r&&(e=sr,t=Xr(),t!==r?(n=tn(),n!==r?(lr=e,e=parseFloat(t+n)):(sr=e,e=r)):(sr=e,e=r),e===r&&(e=sr,t=Xr(),t!==r&&(lr=e,t=parseFloat(t)),e=t))),e}(),t!==r?(n=sr,dr++,a=Pr(),dr--,a===r?n=void 0:(sr=n,n=r),n!==r?(lr=e,o=t,e={type:"number",location:mr(),value:o}):(sr=e,e=r)):(sr=e,e=r),e}(),t===r&&(t=function(){let t,n;return t=sr,n=function(){let t,n,a,o;return t=sr,n=e.substr(sr,4),n.toLowerCase()===y?sr+=4:(n=r,0===dr&&yr(tt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(n=[n,a],t=n):(sr=t,t=r)):(sr=t,t=r),t}(),n!==r&&(lr=t,n={type:"boolean",location:mr(),value:!0}),t=n,t===r&&(t=sr,n=function(){let t,n,a,o;return t=sr,n=e.substr(sr,5),n.toLowerCase()===T?sr+=5:(n=r,0===dr&&yr(rt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(n=[n,a],t=n):(sr=t,t=r)):(sr=t,t=r),t}(),n!==r&&(lr=t,n={type:"boolean",location:mr(),value:!1}),t=n),t}(),t===r&&(t=function(){let t,n;return t=sr,n=function(){let t,n,a,o;return t=sr,n=e.substr(sr,4),n.toLowerCase()===g?sr+=4:(n=r,0===dr&&yr(et)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(n=[n,a],t=n):(sr=t,t=r)):(sr=t,t=r),t}(),n!==r&&(lr=t,n={type:"null",location:mr(),value:null}),t=n,t}(),t===r&&(t=function(){let e,t,n;var a,o;return e=sr,t=hn(),t!==r?(Mn(),n=Jr(),n!==r?(lr=e,"string"===(a=n).type&&(o=a.value,!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(o)&&hr("Date literal is invalid")),e={type:"date",location:mr(),value:a.value}):(sr=e,e=r)):(sr=e,e=r),e}(),t===r&&(t=function(){let e,t,n;var a,o;return e=sr,t=mn(),t!==r?(Mn(),n=Jr(),n!==r?(lr=e,"string"===(a=n).type&&(o=a.value,!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(o)&&hr("Timestamp literal is invalid")),e={type:"timestamp",location:mr(),value:a.value}):(sr=e,e=r)):(sr=e,e=r),e}(),t===r&&(t=function(){let t,n,a,o,i;var s,l,u;return t=sr,n=wn(),n!==r?(Mn(),a=e.charAt(sr),ye.test(a)?sr++:(a=r,0===dr&&yr(Ue)),a!==r?(Mn(),o=Jr(),o!==r?(Mn(),i=Hr(),i!==r?(lr=t,s=a,l=o,u=i,t={type:"interval",location:mr(),value:l,qualifier:u,op:s}):(sr=t,t=r)):(sr=t,t=r)):(sr=t,t=r)):(sr=t,t=r),t===r&&(t=sr,n=wn(),n!==r?(Mn(),a=Jr(),a!==r?(Mn(),o=Hr(),o!==r?(lr=t,t=function(e,t){return{type:"interval",location:mr(),value:e,qualifier:t,op:""}}(a,o)):(sr=t,t=r)):(sr=t,t=r)):(sr=t,t=r)),t}(),t===r&&(t=function(){let e,t,n;var a,o;return e=sr,t=vn(),t!==r?(Mn(),n=Jr(),n!==r?(lr=e,"string"===(a=n).type&&(o=a.value,!0!==/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(o)&&hr("Time literal is invalid")),e={type:"time",location:mr(),value:a.value}):(sr=e,e=r)):(sr=e,e=r),e}()))))))),t}(),t===r&&(t=function(){let e,t,n,a,o,i,s,l;var u,c,f;return e=sr,t=dn(),t!==r?(Mn(),n=sr,a=Dn(),a!==r?(Mn(),o=qr(),o!==r?(Mn(),i=pn(),i!==r?(Mn(),s=Nr(),s!==r?(Mn(),l=bn(),l!==r?(lr=n,c=o,f=s,n=Fn(mr(),c,f)):(sr=n,n=r)):(sr=n,n=r)):(sr=n,n=r)):(sr=n,n=r)):(sr=n,n=r),n===r&&(n=sr,a=Dn(),a!==r?(Mn(),o=qr(),o!==r?(Mn(),i=_n(),i!==r?(Mn(),s=Nr(),s!==r?(Mn(),l=bn(),l!==r?(lr=n,n=function(e,t){return Fn(mr(),e,t)}(o,s)):(sr=n,n=r)):(sr=n,n=r)):(sr=n,n=r)):(sr=n,n=r)):(sr=n,n=r)),n!==r?(lr=e,u=n,e={type:"function",location:mr(),name:"extract",args:u}):(sr=e,e=r)):(sr=e,e=r),e}(),t===r&&(t=function(){let t,n,a,o,i,s,l,u,c,f,p;var d,m,h,v;return t=sr,n=function(){let t,n,a,o;return t=sr,n=e.substr(sr,9),n.toLowerCase()===A?sr+=9:(n=r,0===dr&&yr(dt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="SUBSTRING"):(sr=t,t=r)):(sr=t,t=r),t}(),n!==r?(Mn(),a=sr,o=Dn(),o!==r?(Mn(),i=Nr(),i!==r?(Mn(),s=pn(),s!==r?(Mn(),l=Nr(),l!==r?(Mn(),u=sr,c=function(){let t,n,a,o;return t=sr,n=e.substr(sr,3),n.toLowerCase()===M?sr+=3:(n=r,0===dr&&yr(pt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="FOR"):(sr=t,t=r)):(sr=t,t=r),t}(),c!==r?(f=Mn(),p=Nr(),p!==r?(Mn(),u=p):(sr=u,u=r)):(sr=u,u=r),u===r&&(u=null),c=bn(),c!==r?(lr=a,m=i,h=l,v=u,a=Fn(mr(),m,h,...v?[v]:[])):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r),a===r&&(a=sr,o=Dn(),o!==r?(Mn(),i=Nr(),i!==r?(Mn(),s=_n(),s!==r?(Mn(),l=Nr(),l!==r?(Mn(),u=_n(),u!==r?(c=Mn(),f=Nr(),f!==r?(p=bn(),p!==r?(lr=a,a=function(e,t,r){return Fn(mr(),e,t,r)}(i,l,f)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r)),a!==r?(lr=t,d=a,t={type:"function",location:mr(),name:"substring",args:d}):(sr=t,t=r)):(sr=t,t=r),t}(),t===r&&(t=function(){let t,n,a,o,i,s,l,u,c;var f,p,d,m;return t=sr,n=function(){let t,n,a,o;return t=sr,n=e.substr(sr,4),n.toLowerCase()===F?sr+=4:(n=r,0===dr&&yr(ht)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="TRIM"):(sr=t,t=r)):(sr=t,t=r),t}(),n!==r?(Mn(),a=sr,o=Dn(),o!==r?(Mn(),i=zr(),Mn(),s=Nr(),s!==r?(Mn(),l=pn(),l!==r?(Mn(),u=Nr(),u!==r?(Mn(),c=bn(),c!==r?(lr=a,p=i,d=s,m=u,a=Fn(mr(),p,d,m)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r),a===r&&(a=sr,o=Dn(),o!==r?(Mn(),i=zr(),Mn(),s=Nr(),s!==r?(Mn(),l=bn(),l!==r?(lr=a,a=function(e,t){return Fn(mr(),e,t)}(i,s)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r)),a!==r?(lr=t,f=a,t={type:"function",location:mr(),name:"trim",args:f}):(sr=t,t=r)):(sr=t,t=r),t}(),t===r&&(t=function(){let t,n,a,o,i,s,l,u;var c,f,p;return t=sr,n=function(){let t,n,a,o;return t=sr,n=e.substr(sr,8),n.toLowerCase()===P?sr+=8:(n=r,0===dr&&yr(vt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="POSITION"):(sr=t,t=r)):(sr=t,t=r),t}(),n!==r?(Mn(),a=sr,o=Dn(),o!==r?(Mn(),i=Nr(),i!==r?(Mn(),s=an(),s!==r?(Mn(),l=Nr(),l!==r?(Mn(),u=bn(),u!==r?(lr=a,f=i,p=l,a=Fn(mr(),f,p)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r),a===r&&(a=sr,o=Dn(),o!==r?(Mn(),i=Nr(),i!==r?(Mn(),s=_n(),s!==r?(Mn(),l=Nr(),l!==r?(Mn(),u=bn(),u!==r?(lr=a,a=function(e,t){return Fn(mr(),e,t)}(i,l)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r)),a!==r?(lr=t,c=a,t={type:"function",location:mr(),name:"position",args:c}):(sr=t,t=r)):(sr=t,t=r),t}(),t===r&&(t=function(){let t,n,a,o,i,s,l,u;var c,f,p;return t=sr,n=function(){let t,n,a,o;return t=sr,n=e.substr(sr,4),n.toLowerCase()===z?sr+=4:(n=r,0===dr&&yr(Nt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="CAST"):(sr=t,t=r)):(sr=t,t=r),t}(),n!==r?(Mn(),a=sr,o=Dn(),o!==r?(Mn(),i=Nr(),i!==r?(Mn(),s=function(){let t,n,a,o;return t=sr,n=e.substr(sr,2),n.toLowerCase()===q?sr+=2:(n=r,0===dr&&yr(St)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="AS"):(sr=t,t=r)):(sr=t,t=r),t}(),s!==r?(Mn(),l=Vr(),l!==r?(Mn(),u=bn(),u!==r?(lr=a,f=i,p=l,a=Fn(mr(),f,p)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r),a===r&&(a=sr,o=Dn(),o!==r?(Mn(),i=Nr(),i!==r?(Mn(),s=_n(),s!==r?(Mn(),l=Vr(),l!==r?(Mn(),u=bn(),u!==r?(lr=a,a=function(e,t){return Fn(mr(),e,t)}(i,l)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r)):(sr=a,a=r)),a!==r?(lr=t,c=a,t={type:"function",location:mr(),name:"cast",args:c}):(sr=t,t=r)):(sr=t,t=r),t}(),t===r&&(t=function(){let t,n,a,o;var i,s;return t=sr,n=sr,dr++,a=dn(),dr--,a===r?n=void 0:(sr=n,n=r),n!==r?(a=function(){let t,n,a,o;if(t=sr,n=Fr(),n!==r&&(lr=t),t=n,t===r)if(t=sr,96===e.charCodeAt(sr)?(n=Ie,sr++):(n=r,0===dr&&yr(Xt)),n!==r){if(a=[],o=e.charAt(sr),be.test(o)?sr++:(o=r,0===dr&&yr(er)),o!==r)for(;o!==r;)a.push(o),o=e.charAt(sr),be.test(o)?sr++:(o=r,0===dr&&yr(er));else a=r;a!==r?(96===e.charCodeAt(sr)?(o=Ie,sr++):(o=r,0===dr&&yr(Xt)),o!==r?(lr=t,t=a.join("")):(sr=t,t=r)):(sr=t,t=r)}else sr=t,t=r;return t}(),a!==r?(Mn(),o=Or(),o!==r?(lr=t,i=a,s=o,t={type:"function",location:mr(),name:i,args:s}):(sr=t,t=r)):(sr=t,t=r)):(sr=t,t=r),t}(),t===r&&(t=function(){let e;return e=function(){let e,t,n,a,o,i,s;if(e=sr,t=Sn(),t!==r)if(Mn(),n=Nr(),n!==r){for(Mn(),a=[],o=sr,i=Kr(),i!==r?(s=Mn(),o=i):(sr=o,o=r);o!==r;)a.push(o),o=sr,i=Kr(),i!==r?(s=Mn(),o=i):(sr=o,o=r);o=xn(),o!==r?(lr=e,l=n,u=a,e={type:"case-expression",location:mr(),format:"simple",operand:l,clauses:u,else:null,elseLocation:null}):(sr=e,e=r)}else sr=e,e=r;else sr=e,e=r;var l,u;if(e===r)if(e=sr,t=Sn(),t!==r)if(Mn(),n=Nr(),n!==r){for(Mn(),a=[],o=sr,i=Kr(),i!==r?(s=Mn(),o=i):(sr=o,o=r);o!==r;)a.push(o),o=sr,i=Kr(),i!==r?(s=Mn(),o=i):(sr=o,o=r);o=Qr(),o!==r?(i=Mn(),s=xn(),s!==r?(lr=e,e=function(e,t,r){return{type:"case-expression",location:mr(),format:"simple",operand:e,clauses:t,else:r.value,elseLocation:r.location}}(n,a,o)):(sr=e,e=r)):(sr=e,e=r)}else sr=e,e=r;else sr=e,e=r;return e}(),e===r&&(e=function(){let e,t,n,a,o,i;if(e=sr,t=Sn(),t!==r){for(Mn(),n=[],a=sr,o=Gr(),o!==r?(i=Mn(),a=o):(sr=a,a=r);a!==r;)n.push(a),a=sr,o=Gr(),o!==r?(i=Mn(),a=o):(sr=a,a=r);a=xn(),a!==r?(lr=e,s=n,e={type:"case-expression",location:mr(),format:"searched",clauses:s,else:null,elseLocation:null}):(sr=e,e=r)}else sr=e,e=r;var s;if(e===r)if(e=sr,t=Sn(),t!==r){for(Mn(),n=[],a=sr,o=Gr(),o!==r?(i=Mn(),a=o):(sr=a,a=r);a!==r;)n.push(a),a=sr,o=Gr(),o!==r?(i=Mn(),a=o):(sr=a,a=r);a=Qr(),a!==r?(o=Mn(),i=xn(),i!==r?(lr=e,e=function(e,t){return{type:"case-expression",location:mr(),format:"searched",clauses:e,else:t.value,elseLocation:t.location}}(n,a)):(sr=e,e=r)):(sr=e,e=r)}else sr=e,e=r;return e}()),e}(),t===r&&(t=function(){let e,t;var n,a;return e=sr,t=function(){let e,t;return e=sr,t=function(){let e,t,n,a;if(e=sr,t=Pr(),t!==r){for(n=[],a=kr();a!==r;)n.push(a),a=kr();lr=e,e=t+n.join("")}else sr=e,e=r;return e}(),t!==r&&(lr=e),e=t,e}(),t!==r&&(lr=e,t=/^CURRENT_DATE$/i.test(n=t)?{type:"current-time",location:mr(),mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(n)?{type:"current-time",location:mr(),mode:"timestamp"}:/^CURRENT_TIME$/i.test(n)?{type:"current-time",location:mr(),mode:"time"}:/^CURRENT_USER$/i.test(n)?{type:"current-user",location:mr()}:{type:"column-reference",location:mr(),table:"",column:n}),e=t,e===r&&(e=sr,t=function(){let e,t,n,a;return e=sr,t=Ur(),t!==r?(n=function(){let e,t,n;for(e=sr,t=[],n=$r();n!==r;)t.push(n),n=$r();return lr=e,t=t.join(""),e=t,e}(),a=Ur(),a!==r?(lr=e,e=n):(sr=e,e=r)):(sr=e,e=r),e}(),t!==r&&(lr=e,a=t,t={type:"column-reference",location:mr(),table:"",column:a,delimited:!0}),e=t),e}(),t===r&&(t=jr(),t===r&&(t=sr,n=Dn(),n!==r?(Mn(),a=Nr(),a!==r?(Mn(),o=bn(),o!==r?(lr=t,(i=a).paren=!0,t=i):(sr=t,t=r)):(sr=t,t=r)):(sr=t,t=r))))))))))),t}function Fr(){let e,t,n,a;if(e=sr,t=Pr(),t!==r){for(n=[],a=Rr();a!==r;)n.push(a),a=Rr();lr=e,e=t+n.join("")}else sr=e,e=r;return e}function Pr(){let t;return t=e.charAt(sr),Oe.test(t)?sr++:(t=r,0===dr&&yr(ze)),t}function Rr(){let t;return t=e.charAt(sr),Ne.test(t)?sr++:(t=r,0===dr&&yr(qe)),t}function kr(){let t;return t=e.charAt(sr),Se.test(t)?sr++:(t=r,0===dr&&yr(He)),t}function $r(){let t;return t=function(){let t;return t=e.charAt(sr),Se.test(t)?sr++:(t=r,0===dr&&yr(He)),t}(),t===r&&(t=function(){let e,t,n;return e=sr,t=Ur(),t!==r?(n=Ur(),n!==r?(lr=e,e='"'):(sr=e,e=r)):(sr=e,e=r),e}()),t}function Ur(){let t;return t=e.charAt(sr),xe.test(t)?sr++:(t=r,0===dr&&yr(Ze)),t}function jr(){let t,n,a,o;var i;return t=sr,n=sr,64===e.charCodeAt(sr)?(a=m,sr++):(a=r,0===dr&&yr(We)),a!==r?(o=Fr(),o!==r?(a=[a,o],n=a):(sr=n,n=r)):(sr=n,n=r),n!==r&&(lr=t,i=n,n={type:"parameter",location:mr(),value:i[1]}),t=n,t}function Vr(){let t,n,a,o,i;var s;return t=sr,n=function(){let t,n,a,o;return t=sr,n=e.substr(sr,7),n.toLowerCase()===H?sr+=7:(n=r,0===dr&&yr(xt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="INTEGER"):(sr=t,t=r)):(sr=t,t=r),t}(),n===r&&(n=function(){let t,n,a,o;return t=sr,n=e.substr(sr,3),n.toLowerCase()===Z?sr+=3:(n=r,0===dr&&yr(Et)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="INT"):(sr=t,t=r)):(sr=t,t=r),t}()),n!==r&&(lr=t,n={type:"data-type",location:mr(),value:{type:"integer"}}),t=n,t===r&&(t=sr,n=function(){let t,n,a,o;return t=sr,n=e.substr(sr,8),n.toLowerCase()===W?sr+=8:(n=r,0===dr&&yr(Ct)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="SMALLINT"):(sr=t,t=r)):(sr=t,t=r),t}(),n!==r&&(lr=t,n={type:"data-type",location:mr(),value:{type:"smallint"}}),t=n,t===r&&(t=sr,n=function(){let t,n,a,o;return t=sr,n=e.substr(sr,5),n.toLowerCase()===Y?sr+=5:(n=r,0===dr&&yr(_t)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="FLOAT"):(sr=t,t=r)):(sr=t,t=r),t}(),n!==r&&(lr=t,n={type:"data-type",location:mr(),value:{type:"float"}}),t=n,t===r&&(t=sr,n=function(){let t,n,a,o;return t=sr,n=e.substr(sr,4),n.toLowerCase()===J?sr+=4:(n=r,0===dr&&yr(Dt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="REAL"):(sr=t,t=r)):(sr=t,t=r),t}(),n!==r&&(lr=t,n={type:"data-type",location:mr(),value:{type:"real"}}),t=n,t===r&&(t=sr,n=hn(),n!==r&&(lr=t,n={type:"data-type",location:mr(),value:{type:"date"}}),t=n,t===r&&(t=sr,n=mn(),n!==r&&(lr=t,n={type:"data-type",location:mr(),value:{type:"timestamp"}}),t=n,t===r&&(t=sr,n=vn(),n!==r&&(lr=t,n={type:"data-type",location:mr(),value:{type:"time"}}),t=n,t===r&&(t=sr,n=function(){let t,n,a,o;return t=sr,n=e.substr(sr,7),n.toLowerCase()===B?sr+=7:(n=r,0===dr&&yr(bt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="VARCHAR"):(sr=t,t=r)):(sr=t,t=r),t}(),n!==r?(Mn(),a=Dn(),a!==r?(Mn(),o=rn(),o!==r?(Mn(),i=bn(),i!==r?(lr=t,s=o,t={type:"data-type",location:mr(),value:{type:"varchar",size:parseInt(s)}}):(sr=t,t=r)):(sr=t,t=r)):(sr=t,t=r)):(sr=t,t=r)))))))),t}function zr(){let t,n;var a;return t=sr,n=function(){let t,n,a,o;return t=sr,n=e.substr(sr,7),n.toLowerCase()===U?sr+=7:(n=r,0===dr&&yr(yt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="LEADING"):(sr=t,t=r)):(sr=t,t=r),t}(),n===r&&(n=function(){let t,n,a,o;return t=sr,n=e.substr(sr,8),n.toLowerCase()===j?sr+=8:(n=r,0===dr&&yr(Tt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="TRAILING"):(sr=t,t=r)):(sr=t,t=r),t}(),n===r&&(n=function(){let t,n,a,o;return t=sr,n=e.substr(sr,4),n.toLowerCase()===V?sr+=4:(n=r,0===dr&&yr(Ot)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="BOTH"):(sr=t,t=r)):(sr=t,t=r),t}())),n===r&&(n=null),lr=t,a=n,n={type:"string",location:mr(),value:a??"BOTH"},t=n,t}function qr(){let t,n;var a;return t=sr,n=In(),n===r&&(n=gn(),n===r&&(n=yn(),n===r&&(n=Tn(),n===r&&(n=On(),n===r&&(n=Nn(),n===r&&(n=function(){let t,n,a,o;return t=sr,n=e.substr(sr,13),n.toLowerCase()===X?sr+=13:(n=r,0===dr&&yr(Ft)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="TIMEZONE_HOUR"):(sr=t,t=r)):(sr=t,t=r),t}(),n===r&&(n=function(){let t,n,a,o;return t=sr,n=e.substr(sr,15),n.toLowerCase()===ee?sr+=15:(n=r,0===dr&&yr(Pt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="TIMEZONE_MINUTE"):(sr=t,t=r)):(sr=t,t=r),t}(),n===r&&(n=function(){let t,n,a,o;return t=sr,n=e.substr(sr,3),n.toLowerCase()===ie?sr+=3:(n=r,0===dr&&yr(Vt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="DOW"):(sr=t,t=r)):(sr=t,t=r),t}(),n===r&&(n=function(){let t,n,a,o;return t=sr,n=e.substr(sr,3),n.toLowerCase()===le?sr+=3:(n=r,0===dr&&yr(zt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="DOY"):(sr=t,t=r)):(sr=t,t=r),t}(),n===r&&(n=function(){let t,n,a,o;return t=sr,n=e.substr(sr,4),n.toLowerCase()===ue?sr+=4:(n=r,0===dr&&yr(qt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="WEEK"):(sr=t,t=r)):(sr=t,t=r),t}())))))))))),n!==r&&(lr=t,a=n,n={type:"string",location:mr(),value:a}),t=n,t}function Hr(){let t,n,a,o;var i,s;return t=sr,n=function(){let e,t,n,a,o;var i,s;return e=sr,t=Zr(),t!==r?(Mn(),n=Dn(),n!==r?(Mn(),a=Yr(),a!==r?(Mn(),o=bn(),o!==r?(lr=e,i=t,s=a,e={type:"interval-period",location:mr(),period:i.value,precision:s,secondary:null}):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r),e===r&&(e=sr,t=Zr(),t!==r&&(lr=e,t=function(e){return{type:"interval-period",location:mr(),period:e.value,precision:null,secondary:null}}(t)),e=t),e}(),n!==r?(Mn(),a=function(){let t,n,a,o;return t=sr,n=e.substr(sr,2),n.toLowerCase()===G?sr+=2:(n=r,0===dr&&yr(Mt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="TO"):(sr=t,t=r)):(sr=t,t=r),t}(),a!==r?(Mn(),o=function(){let e,t,n,a,o,i,s;var l,u,c;return e=sr,t=Zr(),t!==r&&(lr=e,l=t,t={type:"interval-period",location:mr(),period:l.value,precision:null,secondary:null}),e=t,e===r&&(e=sr,t=Nn(),t!==r?(Mn(),n=Dn(),n!==r?(Mn(),a=Yr(),a!==r?(Mn(),o=_n(),o!==r?(Mn(),i=Wr(),i!==r?(Mn(),s=bn(),s!==r?(lr=e,u=a,c=i,e={type:"interval-period",location:mr(),period:"second",precision:u,secondary:c}):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r),e===r&&(e=sr,t=Nn(),t!==r?(Mn(),n=Dn(),n!==r?(Mn(),a=Yr(),a!==r?(Mn(),o=bn(),o!==r?(lr=e,e=function(e){return{type:"interval-period",location:mr(),period:"second",precision:e,secondary:null}}(a)):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r),e===r&&(e=sr,t=Nn(),t!==r&&(lr=e,t={type:"interval-period",location:mr(),period:"second",precision:null,secondary:null}),e=t))),e}(),o!==r?(lr=t,i=n,s=o,t={type:"interval-qualifier",location:mr(),start:i,end:s}):(sr=t,t=r)):(sr=t,t=r)):(sr=t,t=r),t===r&&(t=function(){let e,t,n,a,o,i,s;var l,u;return e=sr,t=Zr(),t!==r?(Mn(),n=Dn(),n!==r?(Mn(),a=Wr(),a!==r?(Mn(),o=bn(),o!==r?(lr=e,l=t,u=a,e={type:"interval-period",location:mr(),period:l.value,precision:u,secondary:null}):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r),e===r&&(e=sr,t=Zr(),t!==r&&(lr=e,t=function(e){return{type:"interval-period",location:mr(),period:e.value,precision:null,secondary:null}}(t)),e=t,e===r&&(e=sr,t=Nn(),t!==r?(Mn(),n=Dn(),n!==r?(Mn(),a=Yr(),a!==r?(Mn(),o=_n(),o!==r?(Mn(),i=Wr(),i!==r?(Mn(),s=bn(),s!==r?(lr=e,e=function(e,t){return{type:"interval-period",location:mr(),period:"second",precision:e,secondary:t}}(a,i)):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r),e===r&&(e=sr,t=Nn(),t!==r?(Mn(),n=Dn(),n!==r?(Mn(),a=Wr(),a!==r?(Mn(),o=bn(),o!==r?(lr=e,e=function(e){return{type:"interval-period",location:mr(),period:"second",precision:e,secondary:null}}(a)):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r),e===r&&(e=sr,t=Nn(),t!==r&&(lr=e,t={type:"interval-period",location:mr(),period:"second",precision:null,secondary:null}),e=t)))),e}()),t}function Zr(){let e,t;return e=sr,t=yn(),t!==r&&(lr=e,t={type:"string",location:mr(),value:"day"}),e=t,e===r&&(e=sr,t=Tn(),t!==r&&(lr=e,t={type:"string",location:mr(),value:"hour"}),e=t,e===r&&(e=sr,t=On(),t!==r&&(lr=e,t={type:"string",location:mr(),value:"minute"}),e=t,e===r&&(e=sr,t=gn(),t!==r&&(lr=e,t={type:"string",location:mr(),value:"month"}),e=t,e===r&&(e=sr,t=In(),t!==r&&(lr=e,t={type:"string",location:mr(),value:"year"}),e=t)))),e}function Wr(){let e,t;return e=sr,t=rn(),t!==r&&(lr=e,t=parseFloat(t)),e=t,e}function Yr(){let e,t;return e=sr,t=rn(),t!==r&&(lr=e,t=parseFloat(t)),e=t,e}function Jr(){let e;return e=Br(),e===r&&(e=jr()),e}function Br(){let t,n,a,o,i;if(t=sr,39===e.charCodeAt(sr)?(n=h,sr++):(n=r,0===dr&&yr(Ye)),n===r&&(e.substr(sr,2)===v?(n=v,sr+=2):(n=r,0===dr&&yr(Je))),n!==r){for(a=[],o=sr,e.substr(sr,2)===w?(i=w,sr+=2):(i=r,0===dr&&yr(Be)),i!==r&&(lr=o,i="'"),o=i,o===r&&(o=e.charAt(sr),Ee.test(o)?sr++:(o=r,0===dr&&yr(Ge)));o!==r;)a.push(o),o=sr,e.substr(sr,2)===w?(i=w,sr+=2):(i=r,0===dr&&yr(Be)),i!==r&&(lr=o,i=ir()),o=i,o===r&&(o=e.charAt(sr),Ee.test(o)?sr++:(o=r,0===dr&&yr(Ge)));39===e.charCodeAt(sr)?(o=h,sr++):(o=r,0===dr&&yr(Ye)),o!==r?(lr=t,s=a,t={type:"string",location:mr(),value:s.join("")}):(sr=t,t=r)}else sr=t,t=r;var s;return t}function Gr(){let e,t,n,a,o;var i,s;return e=sr,t=En(),t!==r?(Mn(),n=Nr(),n!==r?(Mn(),a=Cn(),a!==r?(Mn(),o=Nr(),o!==r?(lr=e,i=n,s=o,e={type:"when-clause",location:mr(),operand:i,value:s}):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r),e}function Kr(){let e,t,n,a,o;var i,s;return e=sr,t=En(),t!==r?(Mn(),n=Nr(),n!==r?(Mn(),a=Cn(),a!==r?(Mn(),o=Nr(),o!==r?(lr=e,i=n,s=o,e={type:"when-clause",location:mr(),operand:i,value:s}):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r)):(sr=e,e=r),e}function Qr(){let t,n,a;var o;return t=sr,n=function(){let t,n,a,o;return t=sr,n=e.substr(sr,4),n.toLowerCase()===me?sr+=4:(n=r,0===dr&&yr(Jt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="ELSE"):(sr=t,t=r)):(sr=t,t=r),t}(),n!==r?(Mn(),a=Nr(),a!==r?(lr=t,o=a,t={type:"else-clause",location:mr(),value:o}):(sr=t,t=r)):(sr=t,t=r),t}function Xr(){let t,n,a;var o;return t=rn(),t===r&&(t=sr,n=e.charAt(sr),ye.test(n)?sr++:(n=r,0===dr&&yr(Ue)),n!==r?(a=rn(),a!==r?(lr=t,o=a,t=n[0]+o):(sr=t,t=r)):(sr=t,t=r)),t}function en(){let t,n,a;var o;return t=sr,46===e.charCodeAt(sr)?(n=I,sr++):(n=r,0===dr&&yr(Ke)),n!==r?(a=rn(),a===r&&(a=null),lr=t,t="."+(null!=(o=a)?o:"")):(sr=t,t=r),t}function tn(){let t,n,a;return t=sr,n=function(){let t,n,a;var o;return t=sr,n=e.charAt(sr),_e.test(n)?sr++:(n=r,0===dr&&yr(Xe)),n!==r?(a=e.charAt(sr),ye.test(a)?sr++:(a=r,0===dr&&yr(Ue)),a===r&&(a=null),lr=t,t="e"+(null===(o=a)?"":o)):(sr=t,t=r),t}(),n!==r?(a=rn(),a!==r?(lr=t,t=n+a):(sr=t,t=r)):(sr=t,t=r),t}function rn(){let e,t,n;if(e=sr,t=[],n=nn(),n!==r)for(;n!==r;)t.push(n),n=nn();else t=r;return t!==r&&(lr=e,t=t.join("")),e=t,e}function nn(){let t;return t=e.charAt(sr),Ce.test(t)?sr++:(t=r,0===dr&&yr(Qe)),t}function an(){let t,n,a,o;return t=sr,n=e.substr(sr,2),n.toLowerCase()===O?sr+=2:(n=r,0===dr&&yr(nt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="IN"):(sr=t,t=r)):(sr=t,t=r),t}function on(){let t,n,a,o;return t=sr,n=e.substr(sr,2),n.toLowerCase()===N?sr+=2:(n=r,0===dr&&yr(at)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="IS"):(sr=t,t=r)):(sr=t,t=r),t}function sn(){let t,n,a,o;return t=sr,n=e.substr(sr,4),n.toLowerCase()===S?sr+=4:(n=r,0===dr&&yr(ot)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="LIKE"):(sr=t,t=r)):(sr=t,t=r),t}function ln(){let t,n,a,o;return t=sr,n=e.substr(sr,3),n.toLowerCase()===E?sr+=3:(n=r,0===dr&&yr(st)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="NOT"):(sr=t,t=r)):(sr=t,t=r),t}function un(){let t,n,a,o;return t=sr,n=e.substr(sr,3),n.toLowerCase()===C?sr+=3:(n=r,0===dr&&yr(lt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="AND"):(sr=t,t=r)):(sr=t,t=r),t}function cn(){let t,n,a,o;return t=sr,n=e.substr(sr,2),n.toLowerCase()===_?sr+=2:(n=r,0===dr&&yr(ut)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="OR"):(sr=t,t=r)):(sr=t,t=r),t}function fn(){let t,n,a,o;return t=sr,n=e.substr(sr,7),n.toLowerCase()===D?sr+=7:(n=r,0===dr&&yr(ct)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="BETWEEN"):(sr=t,t=r)):(sr=t,t=r),t}function pn(){let t,n,a,o;return t=sr,n=e.substr(sr,4),n.toLowerCase()===b?sr+=4:(n=r,0===dr&&yr(ft)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="FROM"):(sr=t,t=r)):(sr=t,t=r),t}function dn(){let t,n,a,o;return t=sr,n=e.substr(sr,7),n.toLowerCase()===L?sr+=7:(n=r,0===dr&&yr(mt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="EXTRACT"):(sr=t,t=r)):(sr=t,t=r),t}function mn(){let t,n,a,o;return t=sr,n=e.substr(sr,9),n.toLowerCase()===R?sr+=9:(n=r,0===dr&&yr(wt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="TIMESTAMP"):(sr=t,t=r)):(sr=t,t=r),t}function hn(){let t,n,a,o;return t=sr,n=e.substr(sr,4),n.toLowerCase()===k?sr+=4:(n=r,0===dr&&yr(It)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="DATE"):(sr=t,t=r)):(sr=t,t=r),t}function vn(){let t,n,a,o;return t=sr,n=e.substr(sr,4),n.toLowerCase()===$?sr+=4:(n=r,0===dr&&yr(gt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="TIME"):(sr=t,t=r)):(sr=t,t=r),t}function wn(){let t,n,a,o;return t=sr,n=e.substr(sr,8),n.toLowerCase()===K?sr+=8:(n=r,0===dr&&yr(At)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="INTERVAL"):(sr=t,t=r)):(sr=t,t=r),t}function In(){let t,n,a,o;return t=sr,n=e.substr(sr,4),n.toLowerCase()===Q?sr+=4:(n=r,0===dr&&yr(Lt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="YEAR"):(sr=t,t=r)):(sr=t,t=r),t}function gn(){let t,n,a,o;return t=sr,n=e.substr(sr,5),n.toLowerCase()===te?sr+=5:(n=r,0===dr&&yr(Rt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="MONTH"):(sr=t,t=r)):(sr=t,t=r),t}function yn(){let t,n,a,o;return t=sr,n=e.substr(sr,3),n.toLowerCase()===re?sr+=3:(n=r,0===dr&&yr(kt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="DAY"):(sr=t,t=r)):(sr=t,t=r),t}function Tn(){let t,n,a,o;return t=sr,n=e.substr(sr,4),n.toLowerCase()===ne?sr+=4:(n=r,0===dr&&yr($t)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="HOUR"):(sr=t,t=r)):(sr=t,t=r),t}function On(){let t,n,a,o;return t=sr,n=e.substr(sr,6),n.toLowerCase()===ae?sr+=6:(n=r,0===dr&&yr(Ut)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="MINUTE"):(sr=t,t=r)):(sr=t,t=r),t}function Nn(){let t,n,a,o;return t=sr,n=e.substr(sr,6),n.toLowerCase()===oe?sr+=6:(n=r,0===dr&&yr(jt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="SECOND"):(sr=t,t=r)):(sr=t,t=r),t}function Sn(){let t,n,a,o;return t=sr,n=e.substr(sr,4),n.toLowerCase()===ce?sr+=4:(n=r,0===dr&&yr(Ht)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="CASE"):(sr=t,t=r)):(sr=t,t=r),t}function xn(){let t,n,a,o;return t=sr,n=e.substr(sr,3),n.toLowerCase()===fe?sr+=3:(n=r,0===dr&&yr(Zt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="END"):(sr=t,t=r)):(sr=t,t=r),t}function En(){let t,n,a,o;return t=sr,n=e.substr(sr,4),n.toLowerCase()===pe?sr+=4:(n=r,0===dr&&yr(Wt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="WHEN"):(sr=t,t=r)):(sr=t,t=r),t}function Cn(){let t,n,a,o;return t=sr,n=e.substr(sr,4),n.toLowerCase()===de?sr+=4:(n=r,0===dr&&yr(Yt)),n!==r?(a=sr,dr++,o=Rr(),dr--,o===r?a=void 0:(sr=a,a=r),a!==r?(lr=t,t="THEN"):(sr=t,t=r)):(sr=t,t=r),t}function _n(){let t;return 44===e.charCodeAt(sr)?(t=he,sr++):(t=r,0===dr&&yr(Bt)),t}function Dn(){let t;return 40===e.charCodeAt(sr)?(t=ve,sr++):(t=r,0===dr&&yr(Gt)),t}function bn(){let t;return 41===e.charCodeAt(sr)?(t=we,sr++):(t=r,0===dr&&yr(Kt)),t}function Mn(){let e,t;for(e=[],t=An();t!==r;)e.push(t),t=An();return e}function An(){let t;return t=e.charAt(sr),De.test(t)?sr++:(t=r,0===dr&&yr(Qt)),t}function Ln(e,t,r,n,a){const o={type:"binary-expression",location:a,operator:e,left:t,right:r};return void 0!==n&&(o.escape=n),o}function Fn(e,...t){return{type:"expression-list",location:e,value:t}}function Pn(e,t){let r=e;for(const{op:e,expr:n,location:{end:a}}of t)r=Ln(e,r,n,void 0,{...r.location,end:a});return r}cr=o();const Rn=cr!==r&&sr===e.length;function kn(){throw cr!==r&&sr<e.length&&yr({type:"end"}),function(e,t,r){return new se(se.buildMessage(e,t),e,t,r)}(pr,fr<e.length?function(t=sr){const r=e.codePointAt(t);return void 0===r?"":String.fromCodePoint(r)}(fr):null,fr<e.length?gr(fr,fr+1):gr(fr,fr))}return t.peg$library?{peg$result:cr,peg$currPos:sr,peg$FAILED:r,peg$maxFailExpected:pr,peg$maxFailPos:fr,peg$success:Rn,peg$throw:Rn?void 0:kn}:Rn?cr:void kn()}(e)}}function ue(e,t){if(null!=e)switch(t(e),e.type){case"when-clause":ue(e.operand,t),ue(e.value,t);break;case"case-expression":for(const r of e.clauses)ue(r,t);"simple"===e.format&&ue(e.operand,t),null!==e.else&&ue(e.else,t);break;case"expression-list":for(const r of e.value)ue(r,t);break;case"unary-expression":ue(e.expr,t);break;case"binary-expression":ue(e.left,t),ue(e.right,t);break;case"function":ue(e.args,t);break;case"interval":ue(e.value,t),ue(e.qualifier,t);break;case"interval-qualifier":ue(e.start,t),ue(e.end,t)}}const ce=new Set(["current_timestamp","current_date","current_time"]);class fe{constructor(e){this.staticData=e}makeBool(e){return Ne(e)}featureValue(e,t,r,n){return Fe(e,t,r,n)}equalsNull(e){return null===e}applyLike(e,t,r){return Le(e,t,r)}ensureArray(e){return Se(e)}applyIn(e,t){return _e(e,t)}currentTimestamp(e){return De(e)}currentDate(e){return be(e)}currentTime(e){return Me(e)}makeSqlInterval(e,t,r){return b.createFromValueAndQualifier(e,t,r)}convertInterval(e){return b.isInterval(e)?e.valueInMilliseconds():e}compare(e,t,r){return K(t,r,e)}calculate(e,t,r,n){return oe(e,t,r,n)}evaluateTime(e){return Z(e)}evaluateTimestamp(e,t,r){return W(e,t,r)}evaluateDate(e,t){return Y(e,t)}evaluateFunction(e,t,r){return te(e,t,r)}lookup(e,t){const r=t[e];return void 0===r?null:r}between(e,t){return null==e||null==t[0]||null==t[1]?null:K(e,t[0],">=")&&K(e,t[1],"<=")}notbetween(e,t){return null==e||null==t[0]||null==t[1]?null:K(e,t[0],"<")||K(e,t[1],">")}ternaryNot(e){return xe(e)}ternaryAnd(e,t){return Ee(e,t)}ternaryOr(e,t){return Ce(e,t)}}function pe(e,...t){return`this.${e}(${t.join(", ")})`}function de(e){return void 0===e?"void 0":JSON.stringify(e)}function me({type:e,period:t,precision:r,secondary:n}){return JSON.stringify({type:e,period:t,precision:r,secondary:n})}const he="feature",ve="lookups",we="attributeAdapter",Ie="fieldsIndex",ge="timeZone",ye="currentUser";class Te{constructor(e){this._parseTree=e,this._staticData=Object.create(null),this._nextStaticDataId=0,this._tempVars=new Set,this._nextTempVarId=0}compile(){const e=this._compileNode(this._parseTree),t=`\n      ${this._tempVars.size>0?`var ${Array.from(this._tempVars).join(", ")};`:""}\n      return this.convertInterval(${e});\n    `;return new Function(he,ve,we,Ie,ge,ye,t).bind(new fe(this._staticData))}_storeStaticData(e){const t="static$"+this._nextStaticDataId++;return this._staticData[t]=e,t}_compileRefStaticData(e){return`this.staticData[${de(e)}]`}_generateTempVar(){const e="temp$"+this._nextTempVarId++;return this._tempVars.add(e),e}_compileSimpleCase(e){const t=this._compileNode(e.operand),r=this._generateTempVar(),n=[];for(const t of e.clauses){const e=pe("compare",de("="),r,this._compileNode(t.operand)),a=this._compileNode(t.value);n.push(`${e} ? (${a}) :`)}return null!=e.else?n.push(this._compileNode(e.else)):n.push(de(null)),`(${r} = ${t}, ${n.join(" ")})`}_compileSearchedCase(e){const t=[];for(const r of e.clauses){const e=pe("makeBool",this._compileNode(r.operand)),n=this._compileNode(r.value);t.push(`${e} ? (${n}) :`)}return null!=e.else?t.push(this._compileNode(e.else)):t.push(de(null)),t.join(" ")}_compileInExpr(e,t){const r=new Set,n=[];for(const e of t.value)"number"===e.type||"string"===e.type?r.add(e.value):n.push(e);const a=this._compileNode(e),o=pe("ensureArray",this._compileNode({type:"expression-list",location:t.location,value:n}));if(r.size>0){const e=this._compileRefStaticData(this._storeStaticData(r)),t=this._generateTempVar();return n.length>0?`(${t} = ${a}, ${e}.has(${t}) || ${pe("applyIn",t,o)})`:`(${t} = ${a}, ${t} == null ? null : ${e}.has(${t}))`}return pe("applyIn",a,o)}_compileNode(e){switch(e.type){case"interval":return pe("makeSqlInterval",this._compileNode(e.value),"interval-qualifier"===e.qualifier.type?function({type:e,start:t,end:r}){return`{type: ${de(e)}, start: ${me(t)}, end: ${me(r)}}`}(e.qualifier):me(e.qualifier),de(e.op));case"case-expression":return"simple"===e.format?this._compileSimpleCase(e):this._compileSearchedCase(e);case"parameter":return pe("lookup",de(e.value.toLowerCase()),ve);case"expression-list":return`[${e.value.map(e=>this._compileNode(e)).join(", ")}]`;case"unary-expression":return pe("ternaryNot",this._compileNode(e.expr));case"binary-expression":switch(e.operator){case"AND":return pe("ternaryAnd",this._compileNode(e.left),this._compileNode(e.right));case"OR":return pe("ternaryOr",this._compileNode(e.left),this._compileNode(e.right));case"IS":if("null"!==e.right.type)throw new v("UnsupportedIsRhs");return pe("equalsNull",this._compileNode(e.left));case"ISNOT":if("null"!==e.right.type)throw new v("UnsupportedIsRhs");return`!${pe("equalsNull",this._compileNode(e.left))}`;case"IN":return this._compileInExpr(e.left,e.right);case"NOT IN":return pe("ternaryNot",this._compileInExpr(e.left,e.right));case"BETWEEN":return pe("between",this._compileNode(e.left),this._compileNode(e.right));case"NOTBETWEEN":return pe("notbetween",this._compileNode(e.left),this._compileNode(e.right));case"LIKE":return pe("applyLike",this._compileNode(e.left),this._compileNode(e.right),de(e.escape));case"NOT LIKE":return pe("ternaryNot",pe("applyLike",this._compileNode(e.left),this._compileNode(e.right),de(e.escape)));case"<>":case"<":case">":case">=":case"<=":case"=":return pe("compare",de(e.operator),this._compileNode(e.left),this._compileNode(e.right));case"*":case"-":case"+":case"/":case"||":return pe("calculate",de(e.operator),this._compileNode(e.left),this._compileNode(e.right),ge);default:throw new v("UnsupportedOperator",{operator:e.operator})}case"null":case"boolean":case"string":case"number":return de(e.value);case"time":try{return this._compileRefStaticData(this._storeStaticData(Z(e.value)))}catch{return pe("evaluateTime",de(e.value))}case"date":try{return this._compileRefStaticData(this._storeStaticData(Y(e.value,"unknown")))}catch{return pe("evaluateDate",de(e.value),de("unknown"))}case"timestamp":try{return this._compileRefStaticData(this._storeStaticData(W(e.value,"unknown")))}catch{return pe("evaluateTimestamp",de(e.value),de("unknown"))}case"current-time":return"date"===e.mode?pe("currentDate",ge):"time"===e.mode?pe("currentTime",ge):pe("currentTimestamp",ge);case"current-user":return ye;case"column-reference":return pe("featureValue",he,de(e.column),Ie,we);case"data-type":return function({type:e,size:t,withtimezone:r}){return JSON.stringify({type:e,size:t,withtimezone:r})}(e.value);case"function":return pe("evaluateFunction",de(e.name),this._compileNode(e.args),ge)}throw new v("UnsupportedSyntax",{node:e.type})}}class Oe{static create(e,t={}){return new Oe(e,t.fieldsIndex,t.timeZone??void 0,t.currentUser)}constructor(e,t,r="UTC",n=null){this.fieldsIndex=t,this.timeZone=r,this.currentUser=n,this.parameters={},this._compiledExecutor=null,this._hasDateFunctions=void 0,this.parseTree=le.parse(e);const{isStandardized:a,isAggregate:o,currentUserRequired:i,referencedFieldNames:s}=this._extractExpressionInfo(t);this._referencedFieldNames=s,this.isStandardized=a,this.isAggregate=o,this.currentUserRequired=i}static convertValueToStorageFormat(e,n=null){if(null===n)return m(e)?e.getTime():V(e)?e.toMillis():H(e)?e.toStorageFormat():q(e)?e.toStorageString():z(e)?e.toStorageFormat():e;switch(n){case"date":return m(e)?e.getTime():V(e)?e.toMillis():H(e)?e.toMilliseconds():z(e)?e.toNumber():e;case"date-only":return m(e)?t.fromDateJS(e).toString():H(e)?t.fromSqlTimeStampOffset(e).toString():V(e)?t.fromDateTime(e).toString():e;case"time-only":return m(e)?r.fromDateJS(e).toStorageString():V(e)?r.fromDateTime(e).toStorageString():H(e)?r.fromSqlTimeStampOffset(e).toStorageString():q(e)?e.toStorageString():e;case"timestamp-offset":if(m(e))return g.fromJSDate(e).toStorageFormat();if(V(e))return g.fromDateTime(e).toStorageFormat();if(H(e))return e.toStorageFormat()}return e}get fieldNames(){return this._referencedFieldNames}testSet(e,t=Pe,r=this.currentUser){return!!this._evaluateNode(this.parseTree,null,t,e,r)}calculateValue(e,t=Pe,r=this.currentUser){const n=this._evaluateNode(this.parseTree,e,t,null,r);return b.isInterval(n)?n.valueInMilliseconds()/864e5:n}tryGetCompiledExecutor(){if(null!=this._compiledExecutor)return this._compiledExecutor;if(e("esri-csp-restrictions"))return null;const t=new Te(this.parseTree);return this._compiledExecutor=t.compile(),this._compiledExecutor}calculateValueCompiled(e,t=Pe,r=this.currentUser){const n=this.tryGetCompiledExecutor();return null==n?this.calculateValue(e,t):n(e,this.parameters,t,this.fieldsIndex,this.timeZone,r??null)}testFeature(e,t=Pe,r=this.currentUser){return!!this._evaluateNode(this.parseTree,e,t,null,r)}testFeatureCompiled(e,t=Pe,r=this.currentUser){const n=this.tryGetCompiledExecutor();return null==n?this.testFeature(e,t):!!n(e,this.parameters,t,this.fieldsIndex,this.timeZone,r??null)}get hasDateFunctions(){return null!=this._hasDateFunctions||(this._hasDateFunctions=!1,ue(this.parseTree,e=>{"current-time"===e.type?this._hasDateFunctions=!0:"function"===e.type&&(this._hasDateFunctions=this._hasDateFunctions||ce.has(e.name.toLowerCase()))})),this._hasDateFunctions}getFunctions(){const e=new Set;return ue(this.parseTree,t=>{"function"===t.type&&e.add(t.name.toLowerCase())}),Array.from(e)}getExpressions(){const e=new Map;return ue(this.parseTree,t=>{if("function"===t.type){const r=t.name.toLowerCase(),n=t.args.value[0];if("column-reference"===n.type){const t=n.column,a=`${r}-${t}`;e.has(a)||e.set(a,{aggregateType:r,field:t})}}}),[...e.values()]}getVariables(){const e=new Set;return ue(this.parseTree,t=>{"parameter"===t.type&&e.add(t.value.toLowerCase())}),Array.from(e)}_extractExpressionInfo(e){const t=[],r=new Set;let n=!0,a=!1,o=!1;return ue(this.parseTree,i=>{switch(i.type){case"column-reference":{const n=e?.get(i.column);let a,o;n?a=o=n.name??"":(o=i.column,a=o.toLowerCase()),r.has(a)||(r.add(a),t.push(o)),i.column=o;break}case"current-user":o=!0;break;case"function":{const{name:e,args:t}=i,r=t.value.length;n&&(n=function(e,t){const r=ae[e.toLowerCase()];return null!=r&&t>=r.minParams&&t<=r.maxParams}(e,r)),!1===a&&(a=T(e,r));break}}}),{referencedFieldNames:Array.from(t),isStandardized:n,isAggregate:a,currentUserRequired:o}}_evaluateNode(e,t,r,n,a){let i;switch(e.type){case"interval":{const o=this._evaluateNode(e.value,t,r,n,a);return b.createFromValueAndQualifier(o,e.qualifier,e.op)}case"case-expression":if("simple"===e.format){const o=this._evaluateNode(e.operand,t,r,n,a);for(let i=0;i<e.clauses.length;i++)if(K(o,this._evaluateNode(e.clauses[i].operand,t,r,n,a),"="))return this._evaluateNode(e.clauses[i].value,t,r,n,a);if(null!==e.else)return this._evaluateNode(e.else,t,r,n,a)}else{for(let o=0;o<e.clauses.length;o++)if(Ne(this._evaluateNode(e.clauses[o].operand,t,r,n,a)))return this._evaluateNode(e.clauses[o].value,t,r,n,a);if(null!==e.else)return this._evaluateNode(e.else,t,r,n,a)}return null;case"parameter":return i=this.parameters[e.value.toLowerCase()],m(i)?o.fromJSDate(i):null!=i&&"object"==typeof i&&"toDateTime"in i?i.toDateTime():i;case"expression-list":{const o=[];for(const i of e.value)o.push(this._evaluateNode(i,t,r,n,a));return o}case"unary-expression":return xe(this._evaluateNode(e.expr,t,r,n,a));case"binary-expression":switch(e.operator){case"AND":return Ee(this._evaluateNode(e.left,t,r,n,a),this._evaluateNode(e.right,t,r,n,a));case"OR":return Ce(this._evaluateNode(e.left,t,r,n,a),this._evaluateNode(e.right,t,r,n,a));case"IS":if("null"!==e.right.type)throw new v("UnsupportedIsRhs");return null===this._evaluateNode(e.left,t,r,n,a);case"ISNOT":if("null"!==e.right.type)throw new v("UnsupportedIsRhs");return null!==this._evaluateNode(e.left,t,r,n,a);case"IN":{const o=Se(this._evaluateNode(e.right,t,r,n,a));return _e(this._evaluateNode(e.left,t,r,n,a),o)}case"NOT IN":{const o=Se(this._evaluateNode(e.right,t,r,n,a));return xe(_e(this._evaluateNode(e.left,t,r,n,a),o))}case"BETWEEN":{const o=this._evaluateNode(e.left,t,r,n,a),i=this._evaluateNode(e.right,t,r,n,a);return null==o||null==i[0]||null==i[1]?null:K(o,i[0],">=")&&K(o,i[1],"<=")}case"NOTBETWEEN":{const o=this._evaluateNode(e.left,t,r,n,a),i=this._evaluateNode(e.right,t,r,n,a);return null==o||null==i[0]||null==i[1]?null:K(o,i[0],"<")||K(o,i[1],">")}case"LIKE":return Le(this._evaluateNode(e.left,t,r,n,a),this._evaluateNode(e.right,t,r,n,a),e.escape);case"NOT LIKE":return xe(Le(this._evaluateNode(e.left,t,r,n,a),this._evaluateNode(e.right,t,r,n,a),e.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return K(this._evaluateNode(e.left,t,r,n,a),this._evaluateNode(e.right,t,r,n,a),e.operator);case"-":case"+":case"*":case"/":case"||":return oe(e.operator,this._evaluateNode(e.left,t,r,n,a),this._evaluateNode(e.right,t,r,n,a),this.timeZone)}case"null":case"boolean":case"string":case"number":return e.value;case"date":return e.parsedValue??=Y(e.value,"unknown"),e.parsedValue;case"timestamp":return e.parsedValue??=W(e.value,"unknown"),e.parsedValue;case"time":return Z(e.value);case"current-time":return"date"===e.mode?be(this.timeZone):"time"===e.mode?Me(this.timeZone):De(this.timeZone);case"current-user":return a??null;case"column-reference":return Fe(t,e.column,this.fieldsIndex,r);case"data-type":return e.value;case"function":{if(this.isAggregate&&T(e.name,e.args.value.length)){const t=[];for(const o of e.args?.value||[]){const e=[];for(const t of n||[])e.push(this._evaluateNode(o,t,r,null,a));t.push(e)}return y(e.name,t)}const o=this._evaluateNode(e.args,t,r,n,a);return te(e.name,o,this.timeZone)}}throw new v("UnsupportedSyntax",{node:e.type})}}function Ne(e){return!0===e}function Se(e){return Array.isArray(e)?e:[e]}function xe(e){return null!==e?!0!==e:null}function Ee(e,t){return null!=e&&null!=t?!0===e&&!0===t:!1!==e&&!1!==t&&null}function Ce(e,t){return null!=e&&null!=t?!0===e||!0===t:!0===e||!0===t||null}function _e(e,t){if(null==e)return null;let r=!1;for(const n of t)if(null==n)r=null;else{if(e===n){r=!0;break}if(B(e)&&B(n)&&(r=K(e,n,"="),r))break}return r}function De(e){return U(new Date,e)}function be(e){return t.fromNow(e)}function Me(e){const t=U(new Date,e);return r.fromDateTime(t)}const Ae="-[]/{}()*+?.\\^$|";function Le(e,t,r){if(null==e)return null;const n=function(e,t){const r=t;let n="",a=0;for(let t=0;t<e.length;t++){const o=e.charAt(t);switch(a){case 0:o===r?a=1:Ae.includes(o)?n+="\\"+o:n+="%"===o?".*":"_"===o?".":o;break;case 1:Ae.includes(o)?n+="\\"+o:n+=o,a=0}}return new RegExp("^"+n+"$","m")}(t,r);return n.test(e)}function Fe(e,n,a,o){if("getAttributeSQL"in o)return o.getAttributeSQL(e,n);const i=o.getAttribute(e,n);if(null==i)return i;const l=a?.get(n);switch(l?.type){case"esriFieldTypeDate":case"date":return U(new Date(i),a?.getLuxonTimeZone(l.name)??s.utcInstance);case"esriFieldTypeDateOnly":case"date-only":return t.fromReader(i);case"esriFieldTypeTimeOnly":case"time-only":return r.fromReader(i);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return new g(i)}return i}const Pe={getAttribute(e,t){var r;return((r=e)&&"object"==typeof r.attributes?e.attributes:e)[t]}},Re=Object.freeze(Object.defineProperty({__proto__:null,default:Oe},Symbol.toStringTag,{value:"Module"}));export{g as S,Re as W,v as a,y as b,Oe as default};
