/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import s from"./Accessor.js";import{h as t,m as e}from"../chunks/handleUtils.js";import"./lang.js";import"./Handles.js";import"../chunks/Logger.js";import"../config.js";import"../chunks/object.js";import"../chunks/string.js";import"../chunks/maybe.js";import"./accessorSupport/decorators/subclass.js";import"../chunks/Lifecycle.js";import"../chunks/metadata.js";import"../chunks/utils.js";import"../chunks/tracking.js";import"../chunks/ensureType.js";import"../chunks/MapUtils.js";import"../chunks/Warning.js";import"./Error.js";import"../chunks/get.js";import"../chunks/ObjectPool.js";import"../chunks/ObservableBase.js";import"./accessorSupport/decorators/property.js";import"../chunks/watch.js";import"./scheduling.js";import"../chunks/nextTick.js";import"../chunks/PooledArray.js";import"./promiseUtils.js";import"../chunks/events.js";import"../chunks/SetUtils.js";import"../chunks/SimpleTrackingTarget.js";const r=s=>{const r=s;return class extends r{constructor(){super(...arguments),this._listenersMap=null}clearEvents(){this._listenersMap?.clear(),this._listenersMap=null}destroy(){this.clearEvents()}emit(s,t){let e=this._listenersMap?.get(s);if(!e)return!1;let r=!1;for(const s of e.slice()){const e="deref"in s?s.deref():s;e?e?.call(this,t):r=!0}return r&&(e=e.filter(s=>!("deref"in s)||null!=s.deref()),this._listenersMap.set(s,e)),e.length>0}on(s,r){if(Array.isArray(s)){const e=s.map(s=>this.on(s,r));return t(e)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??=new Map;const n=this._listenersMap.get(s)||[];return n.push(r),this._listenersMap.set(s,n),e(()=>{const t=this._listenersMap?.get(s),e=t?.indexOf(r)??-1;e>=0&&t.splice(e,1)})}once(s,t){const e=this.on(s,s=>{e.remove();const r="deref"in t?t.deref():t;r?.call(null,s)});return e}hasEventListener(s){const t=this._listenersMap?.get(s);return null!=t&&t.length>0}}},n=r(class{}),i=n,o=r(s);export{i as EventEmitter,n as Evented,o as EventedAccessor,r as EventedMixin};
