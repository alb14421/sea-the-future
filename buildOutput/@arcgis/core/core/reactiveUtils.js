/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{i as n,a as t}from"../chunks/events.js";import{h as r,m as s}from"../chunks/handleUtils.js";import{r as o}from"../chunks/maybe.js";import{isAborted as i,createAbortError as e,onAbort as c}from"./promiseUtils.js";import{w as u}from"../chunks/watch.js";export{a as autorun}from"../chunks/watch.js";import"./Error.js";import"./lang.js";import"../chunks/Logger.js";import"../config.js";import"../chunks/object.js";import"../chunks/string.js";import"../chunks/ObjectPool.js";import"./scheduling.js";import"../chunks/nextTick.js";import"../chunks/PooledArray.js";import"../chunks/SetUtils.js";import"../chunks/get.js";import"../chunks/utils.js";import"../chunks/Lifecycle.js";import"../chunks/tracking.js";import"../chunks/SimpleTrackingTarget.js";function m(n,t,r={}){return p(n,t,r,g)}function l(n,t,r={}){return p(n,t,r,y)}function p(n,t,r={},s){let i=null;const e=r.once?(n,r)=>{s(n)&&(o(i),t(n,r))}:(n,r)=>{s(n)&&t(n,r)};if(i=u(n,e,r.sync,r.equals),r.initial){const t=n();e(t,t)}return i}function j(r,i,e,c={}){let u=null,l=null,p=null;function a(){u&&l&&(l.remove(),c.onListenerRemove?.(u),u=null,l=null)}function j(n){c.once&&c.once&&o(p),e(n)}const f=m(r,(r,s)=>{a(),n(r)&&(u=r,l=t(r,i,j),c.onListenerAdd?.(r))},{sync:c.sync,initial:!0});return p=s(()=>{f.remove(),a()}),p}function f(n,t){return k(n,null,t)}function h(n,t){return k(n,y,t)}function k(n,t,s){if(i(s))return Promise.reject(e());const u=n();if(t?.(u))return Promise.resolve(u);let m=null;function l(){m=o(m)}return new Promise((o,i)=>{m=r([c(s,()=>{l(),i(e())}),p(n,n=>{l(),o(n)},{sync:!1,once:!0},t??g)])})}function g(n){return!0}function y(n){return!!n}function v(n,t,r={}){let s=!1;const o=m(n,(n,r)=>{s||t(n,r)},r);return{remove(){o.remove()},pause(){s=!0},resume(){s=!1}}}const d={sync:!0},P={initial:!0},w={sync:!0,initial:!0};export{P as initial,j as on,f as once,v as pausable,d as sync,w as syncAndInitial,m as watch,l as when,h as whenOnce};
