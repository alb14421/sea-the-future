/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{P as t,G as e,K as n,p as r}from"./Point2D.js";function a(r,a){if(!r.isEmpty())switch(r.getGeometryType()){case e.enumPolygon:return o(r);case e.enumPolyline:return i(r.getImpl());case e.enumLine:case e.enumBezier:case e.enumEllipticArc:return function(t){const e=t.calculateLength2D();return 0===e?t.getStartXY():t.calculateWeightedCentroid2D().mul(1/e)}(r);case e.enumMultiPoint:return function(e){const r=new n(0),a=new n(0),u=e.getImpl(),o=u.getAttributeStreamRef(0),s=u.getPointCount(),c=new t;for(let t=0;t<s;t++)o.queryPoint2D(2*t,c),r.add(c.x),a.add(c.y);const l=new t;return l.setCoords(r.getResult(),a.getResult()),l.divThis(s)}(r);case e.enumEnvelope:return r.getCenterXY();case e.enumPoint:return r.getXY();default:return t.construct(Number.NaN,Number.NaN)}return t.construct(Number.NaN,Number.NaN)}function u(t,e){return o(t,e)}function o(e,r=-1){const a=new n(0),u=new n(0),o=e.getImpl();let i;const g=o.hasNonLinearSegments();let d;const m=o.getXY(0);if(-1===r){if(d=o.calculateArea2D(),0===d)return l(e);g&&(i=o.querySegmentIterator());for(let t=0,e=o.getPathCount();t<e;t++)s(m,o,t,a,u),g&&c(m,i,a,u)}else{if(d=o.calculateRingArea2D(r),0===d)return l(e,r);g&&(i=o.querySegmentIterator(),i.resetToPath(r)),s(m,o,r,a,u),g&&c(m,i,a,u)}const f=new t,h=new t;return f.setCoords(a.getResult(),u.getResult()),h.assign(f.mul(1/d).add(m)),h}function s(e,r,a,u,o){const s=r.getPathStart(a),c=r.getPathEnd(a);if(c-s<3)return;const l=r.getAttributeStreamRef(0),i=l.readPoint2D(2*s),g=l.readPoint2D(2*(s+1));g.subThis(i);const d=new n(0),m=r.hasNonLinearSegments(),f=1/3,h=new t;for(let t=s+2;t<c;t++){l.queryPoint2D(2*t,h),h.subThis(i);const e=.5*h.crossProduct(g);m&&d.add(e);const n=f*e;u.add((g.x+h.x)*n),o.add((g.y+h.y)*n),g.setCoordsPoint2D(h)}const P=m?d.getResult():r.calculateRingArea2D(a),y=i.sub(e).mul(P);u.add(y.x),o.add(y.y)}function c(t,e,n,a){let u;for(e.nextPath()||r("centroid");null!==(u=e.nextCurve());){const e=u.calculateWeightedAreaCentroid2D(t);n.add(e.x),a.add(e.y)}}function l(t,e=-1){return i(t.getImpl(),e)}function i(e,r=-1){const a=-1===r?e.calculateLength2D():e.calculatePathLength2D(r);if(0===a)return function(e,r=-1){if(-1!==r)return e.getXY(e.getPathStart(r));const a=new n(0),u=new n(0);for(let t=0;t<e.getPathCount();++t){const n=e.getXY(e.getPathStart(t));a.add(n.x),u.add(n.y)}return t.construct(a.getResult(),u.getResult()).mul(1/e.getPathCount())}(e,r);const u=new n(0),o=new n(0),s=e.querySegmentIterator();for(-1!==r&&s.resetToPath(r);s.nextPath();){const t=s.getPathIndex(),n=e.getXY(e.getPathStart(t));for(;s.hasNextSegment();){const t=s.nextSegment(),e=t.calculateLength2D();if(0===e)continue;const r=t.calculateWeightedCentroid2D().sub(n.mul(e));u.add(r.x),o.add(r.y)}const a=n.mul(e.calculatePathLength2D(t));if(u.add(a.x),o.add(a.y),-1!==r)break}const c=new t;return c.setCoords(u.getResult(),o.getResult()),c.mul(1/a)}export{u as a,a as c};
