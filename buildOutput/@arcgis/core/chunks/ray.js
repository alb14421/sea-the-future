/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{e as t}from"../core/lang.js";import{n as i}from"./nextTick.js";import{s as r,i as s}from"./mat3.js";import{c as n}from"./mat3f64.js";import{e as o,h as e,d as c,j as a,i as m,c as h,n as g,s as u,k as f}from"./vec3.js";import{b as _,c as d}from"./vec3f64.js";import{s as l}from"./vector.js";class p{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&i(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*j);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,j));t++)this._items.push(this._allocator())}}const j=1024;function P(t){return t?M(_(t.origin),_(t.direction)):M(d(),d())}function M(t,i){return{origin:t,direction:i}}function w(i,r){return t(i.origin,r.origin)&&t(i.direction,r.direction)}function x(t,i){const r=y.get();return r.origin=t,r.direction=i,r}function b(t,i=P()){return k(t.origin,t.direction,i)}function v(t,i,r=P()){return o(r.origin,t),e(r.direction,i,t),r}function k(t,i,r=P()){return o(r.origin,t),o(r.direction,i),r}function O(t,i){const r=h(l.get(),g(l.get(),t.direction),e(l.get(),i,t.origin));return c(r,r)}function T(t,i,r){const s=c(t.direction,e(r,i,t.origin));return a(r,t.origin,m(r,t.direction,s)),r}function q(t,i,n,o){const e=t.origin,_=i.origin,d=t.direction,l=i.direction,p=c(g(A,d),g(B,l));if(Math.abs(p)>=1)return null;const j=h(A,d,l),P=u(z,_,e),M=r(C,d[0],d[1],d[2],-l[0],-l[1],-l[2],j[0],j[1],j[2]),w=s(C,M);if(null==w)return[n,o];const x=c(f(A,w[0],w[3],w[6]),P),b=c(f(B,w[1],w[4],w[7]),P);return a(n,e,m(z,d,x)),a(o,_,m(z,l,b)),[n,o]}const y=new p(()=>P()),z=d(),A=d(),B=d(),C=n();export{p as O,q as a,k as b,P as c,O as d,T as e,v as f,b as g,w as h,x as w};
