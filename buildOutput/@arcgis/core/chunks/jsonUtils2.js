/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import e from"../core/Error.js";import{s as t}from"./object.js";import{p as s}from"./parser.js";import{i as r}from"./utils5.js";function a(e,t,s){try{return function(e){if(!e||0===e.length)return null;if(function(e){const t=e[0];return!!t&&"scale"in t}(e)){const t=[];for(const s of e)t.push({scale:s.scale,value:c(s.value)});return t}return c(e)}(e)}catch(e){s?.messages?.push(e)}return null}function n(e,s,r,a){try{const a=o(e);t(r,a,s)}catch(e){a.messages&&a.messages.push(e)}}function o(e){const t=s(e);return t?r(t)?t.map(e=>e.toJSON()):t.map(({scale:e,effects:t})=>({scale:e,value:t.map(e=>e.toJSON())})):null}function c(e){if(!e?.length)return"";const t=[];for(const r of e){let e=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":e=[i(r,"amount")];break;case"blur":e=[i(r,"radius","pt")];break;case"hue-rotate":e=[i(r,"angle","deg")];break;case"drop-shadow":e=[i(r,"xoffset","pt"),i(r,"yoffset","pt"),i(r,"blurRadius","pt"),f(r,"color")];break;case"bloom":e=[i(r,"strength"),i(r,"radius","pt"),i(r,"threshold")]}const a=`${r.type}(${e.filter(Boolean).join(" ")})`;s(a),t.push(a)}return t.join(" ")}function i(t,s,r){if(null==t[s])throw new e("effect:missing-parameter",`Missing parameter '${s}' in ${t.type} effect`,{effect:t});return r?t[s]+r:""+t[s]}function f(t,s){if(null==t[s])throw new e("effect:missing-parameter",`Missing parameter '${s}' in ${t.type} effect`,{effect:t});const r=t[s];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}export{c as e,a as r,o as t,n as w};
