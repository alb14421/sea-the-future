/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{c as n,r as l,e,h as t}from"./mathUtils.js";import{x as a,p as r,m as u,B as s,i as c,j as o,a2 as i,W as f,r as h,s as M,a3 as p,a4 as d,z as E,y as w}from"./unitUtils.js";import{e as R}from"./geodesicConstants.js";const C={2:{5:m,7:null,9:null,10:m,1:_,6:null,8:null,0:null,3:q,11:W,2:m,4:H},5:{5:m,7:null,9:null,10:m,1:_,6:null,8:null,0:null,3:q,11:W,2:m,4:H},7:{5:null,7:m,9:null,10:m,1:null,6:x,8:null,0:null,3:null,11:null,2:null,4:null},9:{5:null,7:null,9:m,10:m,1:null,6:null,8:U,0:null,3:null,11:null,2:null,4:null},3:{5:F,7:null,9:null,10:F,1:g,6:null,8:null,0:null,3:m,11:y,2:F,4:j},4:{5:J,7:null,9:null,10:J,1:K,6:null,8:null,0:null,3:L,11:function(n,l,e,t){J(n,l,e,t),W(e,t,e,t)},2:J,4:m},1:{5:v,7:null,9:null,10:v,1:m,6:null,8:null,0:null,3:A,11:function(n,l,e,t){v(n,l,e,t),W(e,t,e,t)},2:v,4:D},6:{5:null,7:O,9:null,10:O,1:null,6:m,8:null,0:null,3:null,11:null,2:null,4:null},8:{5:null,7:null,9:B,10:B,1:null,6:null,8:m,0:null,3:null,11:null,2:null,4:null},0:{5:null,7:null,9:null,10:null,1:null,6:null,8:null,0:m,3:null,11:null,2:null,4:null},10:{5:m,7:m,9:m,10:m,1:_,6:x,8:U,0:null,3:q,11:W,2:m,4:H},11:{5:k,7:null,9:null,10:k,1:function(n,l,e,t){k(n,l,e,t),_(e,t,e,t)},6:null,8:null,0:null,3:function(n,l,e,t){k(n,l,e,t),q(e,t,e,t)},11:m,2:k,4:function(n,l,e,t){k(n,l,e,t),H(e,t,e,t)}}};function P(n,l){return T(n,l)?.projector}function T(n,l){if(null==n||null==l)return null;if(N.source.spatialReference===n&&N.dest.spatialReference===l)return N;const e=S(n,N.source),t=S(l,N.dest);return 0===e&&0===t?r(n,l)?N.projector=m:N.projector=null:N.projector=C[e][t],N}function I(n,l){switch(P(n,l)){case m:return"copy3";case _:return"wgs84ToSphericalECEF";case q:return"wgs84ToWebMercator";case W:return"wgs84ToPlateCarree";case H:return"wgs84ToWGS84ECEF";case F:return"webMercatorToWGS84";case g:return"webMercatorToSphericalECEF";case j:return"webMercatorToWGS84ECEF";case y:return"webMercatorToPlateCarree";case J:return"wgs84ECEFToWGS84";case K:return"wgs84ECEFToSphericalECEF";case L:return"wgs84ECEFToWebMercator";case v:return"sphericalECEFToWGS84";case A:return"sphericalECEFToWebMercator";case O:return"sphericalMarsPCPFToMars2000";case B:return"sphericalMoonPCPFToMoon2000";case D:return"sphericalECEFToWGS84ECEF";case x:return"mars2000ToSphericalPCPF";case U:return"moon2000ToSphericalPCPF";default:return null}}function S(n,l){return n?l.spatialReference===n?l.spatialReferenceId:(l.spatialReference=n,"metersPerUnit"in l&&(l.metersPerUnit=u(n,1)),s(n)?l.spatialReferenceId=1:c(n)?l.spatialReferenceId=2:o(n)?l.spatialReferenceId=3:i(n)?l.spatialReferenceId=11:n.wkt===f.wkt?l.spatialReferenceId=4:4490===n.wkid?l.spatialReferenceId=5:n.wkt===h.wkt?l.spatialReferenceId=6:n.wkt===M.wkt?l.spatialReferenceId=8:p(n)?l.spatialReferenceId=7:d(n)?l.spatialReferenceId=9:l.spatialReferenceId=0):0}function m(n,l,e,t){n!==e&&(e[t++]=n[l++],e[t++]=n[l++],e[t]=n[l])}function F(n,l,e,t){e[t]=V*(n[l]/Y),e[t+1]=V*(X-2*Math.atan(Math.exp(-n[l+1]/Y))),e[t+2]=n[l+2]}function g(n,l,e,t){const a=n[l]/Y,r=X-2*Math.atan(Math.exp(-n[l+1]/Y)),u=Y+n[l+2],s=Math.cos(r)*u;e[t]=Math.cos(a)*s,e[t+1]=Math.sin(a)*s,e[t+2]=Math.sin(r)*u}function j(n,l,e,t){F(n,l,e,t),H(e,t,e,t)}function b(l,e,t,a,r){const u=.4999999*Math.PI,s=n(Q*l[e+1],-u,u),c=Math.sin(s);t[a++]=Q*l[e]*r.radius,t[a++]=r.halfSemiMajorAxis*Math.log((1+c)/(1-c)),t[a]=l[e+2]}function q(n,l,e,t){b(n,l,e,t,a)}function W(n,l,e,t){e[t]=n[l]*Z,e[t+1]=n[l+1]*Z,e[t+2]=n[l+2]}function k(n,l,e,t){e[t]=n[l]*$,e[t+1]=n[l+1]*$,e[t+2]=n[l+2]}function y(n,l,e,t){F(n,l,e,t),W(e,t,e,t)}function G(n,l,e,t,a){const r=a+n[l+2],u=Q*n[l+1],s=Q*n[l],c=Math.cos(u)*r;e[t]=Math.cos(s)*c,e[t+1]=Math.sin(s)*c,e[t+2]=Math.sin(u)*r}function U(n,l,e,t){G(n,l,e,t,E.radius)}function x(n,l,e,t){G(n,l,e,t,w.radius)}function _(n,l,e,t){G(n,l,e,t,a.radius)}function z(n,l,e,a,r){const u=n[l],s=n[l+1],c=n[l+2],o=Math.sqrt(u*u+s*s+c*c),i=t(c/(0===o?1:o)),f=Math.atan2(s,u);e[a++]=V*f,e[a++]=V*i,e[a]=o-r}function B(n,l,e,t){z(n,l,e,t,E.radius)}function O(n,l,e,t){z(n,l,e,t,w.radius)}function v(n,l,e,t){z(n,l,e,t,a.radius)}function A(n,l,e,t){v(n,l,e,t),q(e,t,e,t)}function D(n,l,e,t){v(n,l,e,t),H(e,t,e,t)}function H(n,l,e,t){!function(n,l,e,t,a){const r=Q*n[l],u=Q*n[l+1],s=n[l+2],c=Math.sin(u),o=Math.cos(u),i=a.radius/Math.sqrt(1-a.eccentricitySquared*c*c);e[t++]=(i+s)*o*Math.cos(r),e[t++]=(i+s)*o*Math.sin(r),e[t++]=(i*(1-a.eccentricitySquared)+s)*c}(n,l,e,t,a)}function J(n,l,e,t){const r=R,u=n[l],s=n[l+1],c=n[l+2];let o,i,f,h,M,p,d,E,w,C,P,T,I,S,m,F,g,j,b,q,W;o=Math.abs(c),i=u*u+s*s,f=Math.sqrt(i),h=i+c*c,M=Math.sqrt(h),q=Math.atan2(s,u),p=c*c/h,d=i/h,S=r.a2/M,m=r.a3-r.a4/M,d>.3?(E=o/M*(1+d*(r.a1+S+p*m)/M),b=Math.asin(E),C=E*E,w=Math.sqrt(1-C)):(w=f/M*(1-p*(r.a5-S-d*m)/M),b=Math.acos(w),C=1-w*w,E=Math.sqrt(C)),P=1-a.eccentricitySquared*C,T=a.radius/Math.sqrt(P),I=r.a6*T,S=f-T*w,m=o-I*E,g=w*S+E*m,F=w*m-E*S,j=F/(I/P+g),b+=j,W=g+F*j/2,c<0&&(b=-b),e[t++]=V*q,e[t++]=V*b,e[t]=W}function K(n,l,e,t){J(n,l,e,t),_(e,t,e,t)}function L(n,l,e,t){J(n,l,e,t),q(e,t,e,t)}const N={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:m},Q=e(1),V=l(1),X=.5*Math.PI,Y=a.radius,Z=Y*Math.PI/180,$=180/(Y*Math.PI);function nn(n,l,e,t,a,r,u=Math.floor(n.length/3)){const s=P(l,a);if(null==s)return!1;if(s===m){if(n===t&&e===r)return!0;const l=e+3*u;for(let a=e,u=r;a<l;a++,u++)t[u]=n[a];return!0}const c=e+3*u;for(let l=e,a=r;l<c;l+=3,a+=3)s(n,l,t,a);return!0}const ln=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:nn},Symbol.toStringTag,{value:"Module"}));export{T as a,C as b,m as c,I as d,ln as e,P as g,$ as i,b as l,nn as p,z as s,q as w};
