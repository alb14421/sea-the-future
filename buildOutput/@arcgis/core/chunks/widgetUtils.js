/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{A as t}from"./watch.js";import{h as e,m as n}from"./handleUtils.js";import"../core/lang.js";import"./Logger.js";import{signalFromSignalOrOptions as s}from"../core/promiseUtils.js";import{watch as i,syncAndInitial as o}from"../core/reactiveUtils.js";import{waitAnimationFrame as r}from"../core/scheduling.js";const a=new Map;function c(){a.clear()}function u(t){return a.get(t)}function f(t,e){a.set(t,e)}function d(t){a.delete(t)}var l,m,v=function(t){l||function(t){if("WebkitTransition"in t.style)l="webkitTransitionEnd",m="webkitAnimationEnd";else{if(!("transition"in t.style))throw new Error("Your browser is not supported!");l="transitionend",m="animationend"}}(t)},p=function(t,e){return void 0===e&&(e=t+"-active"),function(n){v(n);var s=!1,i=function(o){s||(s=!0,n.removeEventListener(l,i),n.removeEventListener(m,i),n.classList.remove(t),n.classList.remove(e))};n.classList.add(t),n.addEventListener(l,i),n.addEventListener(m,i),requestAnimationFrame(function(){n.classList.add(e)})}},L=function(t,e){return void 0===e&&(e=t+"-active"),function(n,s){v(n);var i=!1,o=function(t){i||(i=!0,n.removeEventListener(l,o),n.removeEventListener(m,o),s())};n.classList.add(t),n.addEventListener(l,o),n.addEventListener(m,o),requestAnimationFrame(function(){n.classList.add(e)})}};function E(...e){const n=t.acquire();for(let t=0;t<e.length;t++){const s=e[t],i=typeof s;if("string"===i)n.push(s);else if(Array.isArray(s))n.push.apply(n,s);else if("object"===i)for(const t in s)s[t]&&n.push(t)}const s=n.join(" ");return t.release(n),s}const g=(()=>{const t=new Map,s=new ResizeObserver(e=>{c();for(const n of e)t.get(n.target)?.(n)});return(r,a,c)=>{let u=null;return e([i(()=>"function"==typeof r?r():r,e=>{u?.remove(),e&&(u=((e,i,o)=>(t.set(e,i),s.observe(e,o),n(()=>{s.unobserve(e),t.delete(e)})))(e,a,c))},o),n(()=>u?.remove())])}})();function h(t){const e=t?.closest("[dir]");return null!==e&&e instanceof HTMLElement&&"rtl"===e.dir||"rtl"===document.dir}function b(t,e){return("enter"===t?p:L)(e)}function w(t){this[t.getAttribute("data-node-ref")]=null}function j(t){this[t.getAttribute("data-node-ref")]=t}function y(t){return"Enter"===t||" "===t}async function A(t,e){await r(s(e));const n="function"==typeof t?t():t;n&&("setFocus"in n&&"function"==typeof n.setFocus?await n.setFocus():n instanceof HTMLElement&&n.focus())}export{h as a,A as b,E as c,w as d,b as e,f,u as g,d as h,y as i,c as j,g as o,j as s};
