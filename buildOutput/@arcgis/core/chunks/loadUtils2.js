/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{w as t,k as n,g as l,c as r}from"./aaBoundingRect.js";import{c as s}from"./dataUtils.js";import{g as u}from"./FeatureTileDescriptor.js";class o{constructor(t,n,l,r,s,u){this.data=t,this.mask=n,this.width=l,this.height=r,this.lij=s,this.extent=u}}function i(t){return u(t.lij[0],t.lij[1],t.lij[2])}function e(t){let[n,l,s,u]=[null,null,null,null];for(const r of t){const t=r.extent;n=c(t[0],n),l=c(t[1],l),s=a(t[2],s),u=a(t[3],u)}return null==n||null==l||null==s||null==u?null:r([n,l,s,u])}function a(t,n){return null==n?t:Math.max(t,n)}function c(t,n){return null==n?t:Math.min(t,n)}function f(r,u,o,i,e){const[a,c]=o;let f=null;const h=new Map;u.forEach(t=>{h.set(t.lij,s(r,t))});const j=(t,n,r)=>l(t.extent,n,r);return(l,r)=>{const s=Math.round(l),o=Math.round(r);if(s<0||s>=a||o<0||o>=c)return[0,0];const m=l/a*t(i)+i[0],d=(c-r)/c*n(i)+i[1];if(null==f||!j(f,m,d)){f=null;for(const[t,n]of u)if(j(n,m,d)){f=n;break}}if(null==f?.data)return[0,0];const p=h.get(f.lij);if(null==p)return[0,0];const x=f.extent;return p((m-x[0])/t(x)*e,e-(d-x[1])/n(x)*e)}}export{o as F,e as b,f as c,i as t};
