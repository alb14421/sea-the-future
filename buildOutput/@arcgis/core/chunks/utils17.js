/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{m as t}from"./timeUtils.js";import{isTimeOnlyField as i}from"../layers/support/fieldUtils.js";import{f as o}from"./numberUtils.js";import{f as e,i as s}from"./utils7.js";import r from"../symbols/SimpleLineSymbol.js";import"./date.js";import"./jsonMap.js";import"./object.js";import"../core/lang.js";import"./locale.js";import"./handleUtils.js";import"./constants.js";import"./datetime.js";import"../core/Error.js";import"./Logger.js";import"../config.js";import"./string.js";import"./SetUtils.js";import"../core/sql.js";import"./maybe.js";import"./guards.js";import"../intl.js";import"./number.js";import"./substitute.js";import"./messages.js";import"../core/promiseUtils.js";import"./events.js";import"../request.js";import"../kernel.js";import"../core/urlUtils.js";import"./jsonUtils.js";import"./MapUtils.js";import"./persistableUrlUtils.js";import"./assets.js";import"./basemapUtils.js";import"../core/Collection.js";import"./tslib.es6.js";import"./watch.js";import"./ObjectPool.js";import"../core/scheduling.js";import"./nextTick.js";import"./PooledArray.js";import"./get.js";import"./utils.js";import"./Lifecycle.js";import"./tracking.js";import"./SimpleTrackingTarget.js";import"../core/Evented.js";import"../core/Accessor.js";import"../core/Handles.js";import"../core/accessorSupport/decorators/subclass.js";import"./metadata.js";import"./ensureType.js";import"./Warning.js";import"./ObservableBase.js";import"../core/accessorSupport/decorators/property.js";import"./shared.js";import"./SimpleObservable.js";import"./utils5.js";import"./colorUtils.js";import"./screenUtils.js";import"./mat4.js";import"./common.js";import"./basemapDefinitions.js";import"./timeZoneUtils.js";import"./enumeration.js";import"../symbols/LineSymbol.js";import"../symbols/Symbol.js";import"../Color.js";import"./mathUtils.js";import"../core/JSONSupport.js";import"./reader.js";import"../symbols/LineSymbolMarker.js";import"./writer.js";import"./lineMarkers.js";const n="<",a=">";function l(t,i,s,r){let n="";return 0===i?n="< ":i===s&&(n="> "),n+(r?e(t,r):o(t))}const m=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function A(t){if(!("visualVariables"in t)||!t.visualVariables)return null;const i=t.visualVariables.find(t=>"color"===t.type);if(!i)return null;let o=null,e=null;if(i.stops){if(1===i.stops.length)return i.stops[0].color;o=i.stops[0].value,e=i.stops[i.stops.length-1].value}const s=null!=o&&null!=e?o+(e-o)/2:0,{getColor:r}=await import("./visualVariableUtils.js").then(t=>t.l);return r(i,s)??null}async function p(t,i){const o=t.trailCap,e=t.trailWidth||1,s=i||await A(t)||t.color;return new r({cap:o,color:s,width:e})}function j(o,e,r){const n=function(t,i){if(!i.field)return null;if("featureReduction"in t)switch(t.featureReduction?.type){case"cluster":case"binning":{const o=t.featureReduction.fields.find(({name:t})=>t.toLowerCase()===i.field.toLowerCase());return o&&"getField"in t?t.getField(o.onStatisticField):null}}return"getField"in t?t.getField?.(i.field):null}(o,e);if(!n||!s(n)&&!i(n))return null;let a=function(t,i){const o="popupTemplate"in t?t.popupTemplate?.fieldInfos:null;if(o?.length&&i)return o.find(t=>t.fieldName?.toLowerCase()===i.toLowerCase())?.format?.dateFormat}(o,n.name);if(!a&&"date"===n.type){let i=0,o=0;e.stops?(i=e.stops?.at(0)?.value??i,o=e.stops?.at(-1)?.value??o):"minDataValue"in e&&"maxDataValue"in e&&(i=e.minDataValue??i,o=e.maxDataValue??o),a=o-i>2*t.days?"short-date":"short-date-short-time"}return{fieldType:n.type,format:a,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in o?o.preferredTimeZone:null,viewTimeZone:r,datesInUnknownTimezone:"datesInUnknownTimezone"in o&&o.datesInUnknownTimezone}}}function u(t,i){if("authoringInfo"in t)return t.authoringInfo?.visualVariables?.find(({theme:t})=>t===i)}export{l as createStopLabel,u as getAuthoringInfoVisualVariableByTheme,j as getDateFormatOptions,A as getMedianColor,p as getSymbolForFlowRenderer,m as rgbImgSource,a as specialCharsGreaterThan,n as specialCharsLessThan};
