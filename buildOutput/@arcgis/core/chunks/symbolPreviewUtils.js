/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import e from"../Graphic.js";import{a as t}from"./screenUtils.js";import{i as r,a as i}from"./templateUtils2.js";import{d as a}from"./guards.js";import{renderPreviewHTML as n}from"../symbols/support/symbolUtils.js";async function o(o,m,l){if(!a(o)&&r(o)&&o.thumbnail){const e=`data:image/png;base64,${o.thumbnail.imageData}`,t=document.createElement("div");return t.classList.add("esri-thumbnail-preview"),"geometryType"in m&&m.geometryType&&t.classList.add(`esri-thumbnail-preview--${m.geometryType}`),t.style.backgroundImage=`url(${e})`,t}const y=await async function(t,i){if(!a(i)&&r(i))return s(t);if("renderer"in t&&t.renderer){const{renderer:r}=t,n=a(i)?i:new e({attributes:i.prototype.attributes});if("getSymbolAsync"in r){const e=await r.getSymbolAsync(n);if(e)return e}}return s(t)}(m,o);if(null==y)return null;const p={maxSize:t(l?.maxSize??32),ariaLabel:l?.ariaLabel};if((a(o)||i(o))&&"renderer"in m&&"dictionary"===m.renderer?.type&&(p.fieldMap=m.renderer.fieldMap??void 0,p.feature=a(o)?o:{attributes:o.prototype.attributes??{}}),a(o)&&o.geometry&&!1!==l?.useGeometry&&!o.geometry.type.includes("point")){p.geometry=o.geometry,p.useMarkerSymbolSize=!1;const e=t(l?.maxSize??22);p.size={width:e,height:e}}return await n(y,p)}async function s(e){if(!("geometryType"in e))return null;const{geometryType:t}=e,r="point"===t||"multipoint"===t?await import("../symbols/SimpleMarkerSymbol.js"):"polyline"===t?await import("../symbols/SimpleLineSymbol.js"):"polygon"===t||"mesh"===t||"multipatch"===t?await import("../symbols/SimpleFillSymbol.js"):null;return r?new r.default:null}export{o as f};
