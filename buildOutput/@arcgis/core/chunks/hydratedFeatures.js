/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import e from"../Graphic.js";import{m as t,o as n,clone as a}from"../core/lang.js";import s from"../geometry/SpatialReference.js";import{fromJSON as r}from"../geometry/support/jsonUtils.js";import{m as i}from"./dehydratedPoint.js";function o(e){return"declaredClass"in e}function m(e){return"declaredClass"in e}function l(t,n){return t?function(e){return"declaredClass"in e}(t)?t:new e({layer:n,sourceLayer:n,visible:t.visible,symbol:a(t.symbol),attributes:a(t.attributes),geometry:c(t.geometry)}):null}function c(e){return null==e?null:o(e)?e:r(function(e){const{wkid:t,wkt:n,wkt2:a,latestWkid:s}=e.spatialReference,r={wkid:t,wkt:n,wkt2:a,latestWkid:s};switch(e.type){case"point":{const{x:t,y:n,z:a,m:s}=e;return{x:t,y:n,z:a,m:s,spatialReference:r}}case"polygon":{const{rings:t,hasZ:n,hasM:a}=e;return{rings:u(t),hasZ:n,hasM:a,spatialReference:r}}case"polyline":{const{paths:t,hasZ:n,hasM:a}=e;return{paths:u(t),hasZ:n,hasM:a,spatialReference:r}}case"extent":{const{xmin:t,xmax:n,ymin:a,ymax:s,zmin:i,zmax:o,mmin:m,mmax:l,hasZ:c,hasM:u}=e;return{xmin:t,xmax:n,ymin:a,ymax:s,zmin:i,zmax:o,mmin:m,mmax:l,hasZ:c,hasM:u,spatialReference:r}}case"multipoint":{const{points:t,hasZ:n,hasM:a}=e;return{points:h(t)?f(t):t,hasZ:n,hasM:a,spatialReference:r}}default:return}}(e))}function u(e){return function(e){for(const t of e)if(0!==t.length)return h(t);return!1}(e)?e.map(e=>f(e)):e}function f(e){return e.map(e=>Array.from(e))}function h(e){return e.length>0&&(t(e[0])||n(e[0]))}function p(e,t){if(!e)return null;let n;if(m(e)){if(null==t)return e.clone();if(m(t))return t.copy(e)}return null!=t?(n=t,n.x=e.x,n.y=e.y,n.spatialReference=e.spatialReference,e.hasZ?(n.z=e.z,n.hasZ=e.hasZ):(n.z=void 0,n.hasZ=!1),e.hasM?(n.m=e.m,n.hasM=!0):(n.m=void 0,n.hasM=!1)):(n=i(e.x,e.y,e.z,e.spatialReference),e.hasM&&(n.m=e.m,n.hasM=!0)),n}function y(e){const{wkid:t,wkt:n,wkt2:a,latestWkid:r}=e,i={wkid:t,wkt:n,wkt2:a,latestWkid:r};return s.fromJSON(i)}export{l as a,c as b,p as c,y as h,o as i};
