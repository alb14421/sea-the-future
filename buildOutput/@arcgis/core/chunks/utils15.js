/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{J as t}from"./jsonMap.js";import{A as e,m as o}from"./unitUtils.js";import{geographicToWebMercator as r}from"../geometry/support/webMercatorUtils.js";import{_ as i}from"./tslib.es6.js";import{ClonableMixin as n}from"../core/Clonable.js";import{JSONSupportMixin as s,JSONSupport as a}from"../core/JSONSupport.js";import{property as p}from"../core/accessorSupport/decorators/property.js";import"../core/lang.js";import"./Logger.js";import{subclass as l}from"../core/accessorSupport/decorators/subclass.js";import c from"../core/Accessor.js";let u=class extends c{set horizontalWKID(t){t?e({wkid:+t})?this._set("horizontalWKID",+t):this._set("horizontalWKID",t):this._set("horizontalWKID",null)}set verticalWKID(t){t?this._set("verticalWKID",isFinite(t)&&e({wkid:+t})?+t:null):this._set("verticalWKID",null)}get isAdvanced(){const{affineTransformations:t,focalLength:e,principalOffsetPoint:o,radialDistortionCoefficients:r,tangentialDistortionCoefficients:i}=this;return t?.length>1&&!Number.isNaN(e)&&o?.length>1&&r?.length>1&&i?.length>1}};i([p({json:{write:!0}})],u.prototype,"affineTransformations",void 0),i([p({json:{write:!0}})],u.prototype,"focalLength",void 0),i([p({json:{write:!0}})],u.prototype,"principalOffsetPoint",void 0),i([p({json:{write:!0}})],u.prototype,"radialDistortionCoefficients",void 0),i([p({json:{write:!0}})],u.prototype,"tangentialDistortionCoefficients",void 0),i([p({json:{write:!0}})],u.prototype,"horizontalWKID",null),i([p({json:{write:!0}})],u.prototype,"verticalWKID",null),i([p({json:{write:!0}})],u.prototype,"x",void 0),i([p({json:{write:!0}})],u.prototype,"y",void 0),i([p({json:{write:!0}})],u.prototype,"z",void 0),i([p({json:{write:!0}})],u.prototype,"type",void 0),u=i([l("esri.layers.orientedImagery.core.CameraOrientation")],u);const f=u;let y=class extends(n(s(f))){constructor(){super(...arguments),this.type=1}toString(){const{type:t,horizontalWKID:e,verticalWKID:o,x:r,y:i,z:n,heading:s,pitch:a,roll:p,affineTransformations:l,focalLength:c,principalOffsetPoint:u,radialDistortionCoefficients:f,tangentialDistortionCoefficients:y}=this,d=[t,e,o,r,i,n,s,a,p];return this.isAdvanced&&(l?.forEach(t=>d.push(t)),d.push(c),u?.forEach(t=>d.push(t)),f?.forEach(t=>d.push(t)),y?.forEach(t=>d.push(t))),d.map(t=>Number.isNaN(t)?"":t).join("|")}};i([p({json:{write:!0}})],y.prototype,"type",void 0),i([p({type:[Number],json:{write:!0}})],y.prototype,"affineTransformations",void 0),i([p({type:Number,json:{write:!0}})],y.prototype,"focalLength",void 0),i([p({type:[Number],json:{write:!0}})],y.prototype,"principalOffsetPoint",void 0),i([p({type:[Number],json:{write:!0}})],y.prototype,"radialDistortionCoefficients",void 0),i([p({type:[Number],json:{write:!0}})],y.prototype,"tangentialDistortionCoefficients",void 0),i([p({type:Number,json:{write:!0}})],y.prototype,"heading",void 0),i([p({type:Number,json:{write:!0}})],y.prototype,"pitch",void 0),i([p({type:Number,json:{write:!0}})],y.prototype,"roll",void 0),i([p({type:Number,json:{write:!0}})],y.prototype,"x",void 0),i([p({type:Number,json:{write:!0}})],y.prototype,"y",void 0),i([p({type:Number,json:{write:!0}})],y.prototype,"z",void 0),y=i([l("esri.layers.orientedImagery.core.CameraOrientationHPR")],y);const d=y;let h=class extends(n(s(f))){constructor(){super(...arguments),this.type=4}toString(){const{type:t,latitude:e,longitude:o,ellipsoidRadius:r,squaredEccentricity:i,properties:n}=this,s=`${n}`.split("|");return s.splice(1,1),`${t}|${e}|${o}|${r}|${i}|${s.join("|")}`}};i([p({json:{write:!0}})],h.prototype,"type",void 0),i([p({json:{write:!0},type:Number})],h.prototype,"latitude",void 0),i([p({json:{write:!0},type:Number})],h.prototype,"longitude",void 0),i([p({json:{write:!0},type:Number})],h.prototype,"ellipsoidRadius",void 0),i([p({json:{write:!0},type:Number})],h.prototype,"squaredEccentricity",void 0),i([p({json:{write:!0}})],h.prototype,"properties",void 0),h=i([l("esri.layers.orientedImagery.core.CameraOrientationLTP")],h);const m=h;let v=class extends(n(s(f))){constructor(){super(...arguments),this.type=2}toString(){const{type:t,horizontalWKID:e,verticalWKID:o,x:r,y:i,z:n,omega:s,phi:a,kappa:p,affineTransformations:l,focalLength:c,principalOffsetPoint:u,radialDistortionCoefficients:f,tangentialDistortionCoefficients:y}=this,d=[t,e,o,r,i,n,s,a,p];return this.isAdvanced&&(l?.forEach(t=>d.push(t)),d.push(c),u?.forEach(t=>d.push(t)),f?.forEach(t=>d.push(t)),y?.forEach(t=>d.push(t))),d.map(t=>isNaN(t)?"":t).join("|")}};i([p({json:{write:!0}})],v.prototype,"type",void 0),i([p({type:[Number],json:{write:!0}})],v.prototype,"affineTransformations",void 0),i([p({type:Number,json:{write:!0}})],v.prototype,"focalLength",void 0),i([p({type:[Number],json:{write:!0}})],v.prototype,"principalOffsetPoint",void 0),i([p({type:[Number],json:{write:!0}})],v.prototype,"radialDistortionCoefficients",void 0),i([p({type:[Number],json:{write:!0}})],v.prototype,"tangentialDistortionCoefficients",void 0),i([p({type:Number,json:{write:!0}})],v.prototype,"omega",void 0),i([p({type:Number,json:{write:!0}})],v.prototype,"phi",void 0),i([p({type:Number,json:{write:!0}})],v.prototype,"kappa",void 0),i([p({type:Number,json:{write:!0}})],v.prototype,"x",void 0),i([p({type:Number,json:{write:!0}})],v.prototype,"y",void 0),i([p({type:Number,json:{write:!0}})],v.prototype,"z",void 0),v=i([l("esri.layers.orientedImagery.core.CameraOrientationOPK")],v);const g=v;let j=class extends(n(s(f))){constructor(){super(...arguments),this.type=3}get isAdvanced(){const{affineTransformations:t,focalLength:e,principalOffsetPoint:o,radialDistortionCoefficients:r,tangentialDistortionCoefficients:i}=this;return t?.length>1||!Number.isNaN(e)||o?.length>1||r?.length>1||i?.length>1}toString(){const{type:t,horizontalWKID:e,verticalWKID:o,x:r,y:i,z:n,yaw:s,pitch:a,roll:p,affineTransformations:l,focalLength:c,principalOffsetPoint:u,radialDistortionCoefficients:f,tangentialDistortionCoefficients:y}=this,d=[t,e,o,r,i,n,s,a,p];return this.isAdvanced&&(l?.forEach(t=>d.push(t)),d.push(c),u?.forEach(t=>d.push(t)),u?.forEach(t=>d.push(t)),f?.forEach(t=>d.push(t)),y?.forEach(t=>d.push(t))),d.map(t=>Number.isNaN(t)?"":t).join("|")}};i([p({json:{write:!0}})],j.prototype,"type",void 0),i([p({type:[Number],json:{write:!0}})],j.prototype,"affineTransformations",void 0),i([p({type:Number,json:{write:!0}})],j.prototype,"focalLength",void 0),i([p({type:[Number],json:{write:!0}})],j.prototype,"principalOffsetPoint",void 0),i([p({type:[Number],json:{write:!0}})],j.prototype,"radialDistortionCoefficients",void 0),i([p({type:[Number],json:{write:!0}})],j.prototype,"tangentialDistortionCoefficients",void 0),i([p({type:Number,json:{write:!0}})],j.prototype,"yaw",void 0),i([p({type:Number,json:{write:!0}})],j.prototype,"pitch",void 0),i([p({type:Number,json:{write:!0}})],j.prototype,"roll",void 0),i([p({type:Number,json:{write:!0}})],j.prototype,"x",void 0),i([p({type:Number,json:{write:!0}})],j.prototype,"y",void 0),i([p({type:Number,json:{write:!0}})],j.prototype,"z",void 0),j=i([l("esri.layers.orientedImagery.core.CameraOrientationYPR")],j);const w=j,N=new Map;N.set("2",{desc:"Using Omega Phi Kappa",constructor:g}),N.set("1",{desc:"Using Heading, Pitch and Roll",constructor:d}),N.set("3",{desc:"Using Yaw, Pitch and Roll",constructor:w}),N.set("4",{desc:"Using Local Tangent Plane",constructor:m});let b=class extends(n(a)){constructor(){super(...arguments),this.url=null}};i([p({type:Number,json:{write:!0}})],b.prototype,"lod",void 0),i([p({type:String,json:{write:!0}})],b.prototype,"rasterFunction",void 0),i([p({type:String,json:{write:!0}})],b.prototype,"url",void 0),b=i([l("esri.layers.orientedImagery.core.ElevationSourceDefinitions.ElevationSource")],b);let D=class extends(n(a)){constructor(){super(...arguments),this.constantElevation=null}};i([p({type:Number,json:{write:!0}})],D.prototype,"constantElevation",void 0),D=i([l("esri.layers.orientedImagery.core.ElevationSourceDefinitions.ConstantElevation")],D);const I=t=>null!=t&&"number"==typeof t.constantElevation,C=t=>null!=t&&t.url?.length>0;function z(t,e,o){return e&&(t=`${e}${t}`),o&&(t+=`${o}`),t}function E(t,e,o){return t?I(t)?new D(t):function(t,e,o){let{url:r}=t;return r?(r=z(r,e,o),new b({...t,url:r})):null}(t,e,o):t}const K=new t({Minutes:"minutes",Hours:"hours",Days:"days",Weeks:"weeks",Months:"months",Years:"years"}),W=new t({Feet:"feet",Meter:"meter"}),O=new t({360:"360",Horizontal:"horizontal",Inspection:"inspection",Nadir:"nadir",Oblique:"oblique",Terrestrial360Video:"terrestrial-360-video",TerrestrialFrameVideo:"terrestrial-frame-video",Aerial360Video:"aerial-360-video",AerialFrameVideo:"aerial-frame-video","":null}),x=new Map;x.set("1",function(t){const[e,o,r,i,n,s,a,p,l,c,u,f,y,d,h,m,v,g,j,w,N,b]=t.slice(1);return{horizontalWKID:e,verticalWKID:o,x:r,y:i,z:n,heading:s,pitch:a,roll:p,...T([l,c,u,f,y,d],[m,v],[g,j,w],[N,b],h)}}),x.set("3",function(t){const[e,o,r,i,n,s,a,p,l,c,u,f,y,d,h,m,v,g,j,w,N,b]=t.slice(1);return{horizontalWKID:e,verticalWKID:o,x:r,y:i,z:n,yaw:s,pitch:a,roll:p,...T([l,c,u,f,y,d],[m,v],[g,j,w],[N,b],h)}}),x.set("2",function(t){const[e,o,r,i,n,s,a,p,l,c,u,f,y,d,h,m,v,g,j,w,N,b]=t.slice(1);return{horizontalWKID:e,verticalWKID:o,x:r,y:i,z:n,omega:s,phi:a,kappa:p,...T([l,c,u,f,y,d],[m,v],[g,j,w],[N,b],h)}}),x.set("4",function(t){const[e,o,r,i,n,...s]=t.slice(1),a=x.get(n),p=N.get(n)?.constructor;return a&&p?{latitude:e,longitude:o,ellipsoidRadius:r,squaredEccentricity:i,properties:new p(a([n,"",...s]))}:null});const P=t=>{const e=t.map(t=>parseFloat(t)).filter(t=>!isNaN(t));if(e.length===t.length)return e};function T(t,e,o,r,i){const n=P(t),s=P(e),a=P(o),p=P(r);return{affineTransformations:6===n?.length?n:void 0,focalLength:6===n?.length?parseFloat(i):void 0,principalOffsetPoint:2!==s?.length?[0,0]:s,radialDistortionCoefficients:3!==a?.length?[0,0,0]:a,tangentialDistortionCoefficients:2!==p?.length?[0,0]:p}}function L(t){if(!t)return null;const e=`${t}`.split("|");if(0===e.length)return null;const o=N.get(e[0]);if(!o)return null;const r=x.get(e[0]);return r?new(0,o.constructor)(r(e)):null}function S(t){return Array.isArray(t)&&t?.length>5&&!t.some(isNaN)}function A(t){for(t=t.slice(0,8);t.length<8;)t.push(0);return t}function $(t){return t.spatialReference.isGeographic?r(t):t.clone()}function R(t){return t.isGeographic?1:o(t)}export{D as C,C as a,R as b,I as c,L as d,N as e,z as f,E as g,f as h,S as i,$ as j,O as o,A as p,K as t,W as v};
