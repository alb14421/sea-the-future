/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{_ as t}from"./tslib.es6.js";import{property as e}from"../core/accessorSupport/decorators/property.js";import"../core/lang.js";import"./Logger.js";import{subclass as s}from"../core/accessorSupport/decorators/subclass.js";import o from"../widgets/Widget.js";import{l as i}from"./componentsUtils.js";import{g as n}from"./timeWidgetUtils.js";import"./widgetUtils.js";import{m as r}from"./messageBundle.js";import{t as d}from"./jsxFactory.js";const p="esri-timezone-picker",l={base:p,trigger:`${p}__trigger`,itemTitle:`${p}__item-title`,itemDescription:`${p}__item_description`};let a=class extends o{constructor(t,e){super(t,e),this.disabled=!1,this.value=null,this.onChange=null,this.open=!1,this.onOpen=null,this.onClose=null,this._selectedId=null,this._onOpen=()=>{this.open=!0,this.onOpen?.()},this._onClose=()=>{this.open=!1,this.onClose?.()},this._killEvent=t=>(t.stopPropagation(),!0),this._onChange=t=>{const e=t.target.selectedItems?.[0].getAttribute("data-id"),s=c(this._gmtOffsets,e)?.utcOffset;null!=s&&(this._selectedId=e,this.onChange?.(s))}}loadDependencies(){return i({button:()=>import("./index6.js"),dropdown:()=>import("./index7.js"),"dropdown-group":()=>import("./index9.js"),"dropdown-item":()=>import("./index8.js")})}render(){const t=this._messages;if(!t)return d("div",{class:l.base,key:"empty"});const e=this._selectedItem,s=m(e);return d("div",{class:l.base,key:"container",onpointerdown:this._killEvent},d("calcite-dropdown",{disabled:this.disabled,open:this.open,overlayPositioning:"fixed",placement:"bottom-end",scale:"s",onCalciteDropdownClose:this._onClose,onCalciteDropdownOpen:this._onOpen,onCalciteDropdownSelect:this._onChange},d("calcite-button",{appearance:"transparent",class:l.trigger,"data-testid":"timezone-picker-button",disabled:this.disabled,key:"trigger",kind:"neutral",scale:"s",slot:"trigger",title:t.chooseTimezone},e?.short??""),d("calcite-dropdown-group",{selectionMode:"single"},this._gmtOffsets.map(t=>{const e=m(t);return d("calcite-dropdown-item",{"data-id":e,"data-testid":e,key:e,selected:s===e},d("div",{class:l.itemTitle,key:"title"},t.shortWithUTC),d("div",{class:l.itemDescription,key:"description"},t.long))}))))}get _gmtOffsets(){const t=this._messages;return t?n(t):[]}get _selectedItem(){const t=this._gmtOffsets,e=this.value,s=c(t,this._selectedId);return s?.utcOffset===e?s:function(t,e){return t.find(t=>t.utcOffset===e)}(t,e)}};function c(t,e){return t.find(t=>m(t)===e)}function m(t){return t?`${t.utcOffset}-${t.long}`:void 0}t([e()],a.prototype,"disabled",void 0),t([e()],a.prototype,"value",void 0),t([e()],a.prototype,"onChange",void 0),t([e()],a.prototype,"open",void 0),t([e()],a.prototype,"onOpen",void 0),t([e()],a.prototype,"onClose",void 0),t([e(),r("esri/widgets/support/t9n/timezone")],a.prototype,"_messages",void 0),t([e()],a.prototype,"_gmtOffsets",null),t([e()],a.prototype,"_selectedItem",null),t([e()],a.prototype,"_selectedId",void 0),a=t([s("esri.widgets.support.TimezonePicker")],a);export{a as T};
