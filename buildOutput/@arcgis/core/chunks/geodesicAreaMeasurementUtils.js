/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{b as t}from"./quantityUtils.js";import{V as r}from"./unitUtils.js";import{e}from"./earcut.js";import{k as o,a as s,w as n}from"./vec3.js";import{c as i}from"./vec3f64.js";import{p as a}from"./projectVectorToVector.js";import{l as c,w as u,g as l,m as f}from"./plane.js";import{a as m}from"./triangle.js";import{c as p}from"./geodesicLengthMeasurementUtils.js";import{geodesicAreas as g}from"../geometry/support/geodesicUtils.js";import{a as d}from"./geodesicMeasurementUtils.js";function j(t,r={positionsWorldCoords:[]}){return y(t,r)}function h(t,r={positionsWorldCoords:[]}){return y(t,r,!1)}function y(e,g,d=e.hasZ){const j=p(e.spatialReference),h=r(j);if(null==h)return null;const y=(t,r)=>!(r.length<2||(o(t,r[0],r[1],d&&r[2]||0),0));let w=0;for(const t of e.rings){const r=t.length;if(r<3)continue;const{positionsWorldCoords:p}=g;for(;p.length<r;)p.push(i());const d=q,h=o(U,0,0,0),M=1/r;for(let o=0;o<r;o++){if(!y(d,t[o]))return null;if(!a(d,e.spatialReference,p[o],j))return null;s(h,h,p[o],M)}const W=c(p[0],p[1],h,u());if(0===n(l(W)))continue;for(let t=0;t<r;t++)f(W,h,p[t],p[t]);const b=C(p);for(let t=0;t<b.length;t+=3)w+=m(p[b[t]],p[b[t+1]],p[b[t+2]])}return t(w,h)}const q=i(),U=i();function w(){return{positionsWorldCoords:[]}}function C(t){return e(function(t){const r=new Float64Array(2*t.length);for(let e=0;e<t.length;++e){const o=t[e],s=2*e;r[s]=o[0],r[s+1]=o[1]}return r}(t),[],2)}async function M(){return r=await import("../geometry/geometryEngine.js"),{geodesicArea(e){const{spatialReference:o}=e;return d(o,W,e=>function(r,e){try{return t(Math.abs(r.geodesicArea(e,"square-meters")),"square-meters")}catch(t){return null}}(r,e),e)}};var r}function W(r){return t(Math.abs(g([r],"square-meters")[0]),"square-meters")}export{j as a,w as c,h as e,M as l,C as t};
