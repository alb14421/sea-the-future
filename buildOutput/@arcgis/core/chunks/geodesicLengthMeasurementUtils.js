/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{d as n}from"./quantityUtils.js";import{a5 as t,i as e,j as r,D as s,B as i,p as o,a7 as a,O as u}from"./unitUtils.js";import{k as c,x as l}from"./vec3.js";import{c as f}from"./vec3f64.js";import{p}from"./projectVectorToVector.js";import{W as m,g as h}from"./spatialReferenceEllipsoidUtils.js";import d from"../geometry/Polyline.js";import{load as g,execute as y}from"../geometry/operators/geodeticLengthOperator.js";import{inverseGeodeticSolver as z,InverseGeodeticSolverResult as R,geodesicLengths as j}from"../geometry/support/geodesicUtils.js";import{a as x}from"./geodesicMeasurementUtils.js";function Z(n){return t(n)?e(n)||r(n)||s(n)||i(n)?m:n:h(n)}function v(t){return function(t){const{hasZ:e,spatialReference:r}=t,s=Z(r);let i=0;const o=a(s);if(null==o)return null;const u=O;for(const n of t.paths){if(n.length<2)continue;const t=n.length-1;for(let s=0;s<t;++s){const t=n[s];V[0]=t[0],V[1]=t[1],V[2]=e?t[2]:0;const o=n[s+1];k[0]=o[0],k[1]=o[1],k[2]=e?o[2]:0;const a=u(V,k,r);if(null==a)return null;i+=a.value}}return n(i,o)}(t)}function U(t,e){const{spatialReference:r}=t;return o(r,e.spatialReference)?(V[0]=t.x,V[1]=t.y,V[2]=t.hasZ?t.z:0,k[0]=e.x,k[1]=e.y,k[2]=e.hasZ?e.z:0,function(t,e,r){const s=S(V,k,r);return null!=s?{direct:n(s.direct,s.unit),horizontal:n(s.horizontal,s.unit),vertical:n(s.vertical,s.unit)}:null}(0,0,r)):null}function w(n,t){const{spatialReference:e}=n;return o(e,t.spatialReference)?(V[0]=n.x,V[1]=n.y,V[2]=n.hasZ?n.z:0,k[0]=t.x,k[1]=t.y,k[2]=t.hasZ?t.z:0,M(V,k,e)):null}function D(n,t){const{spatialReference:e}=n;return o(e,t.spatialReference)?(V[0]=n.x,V[1]=n.y,V[2]=n.hasZ?n.z:0,k[0]=t.x,k[1]=t.y,k[2]=t.hasZ?t.z:0,O(V,k,e)):null}function b(n,t){const{spatialReference:e}=n;return o(e,t.spatialReference)?(V[0]=n.x,V[1]=n.y,V[2]=n.hasZ?n.z:0,k[0]=t.x,k[1]=t.y,k[2]=t.hasZ?t.z:0,P(V,k,e)):null}function B(n){return null!=n?L(n.hasZ?n.z:0,n.spatialReference):null}function L(t,e){const r=u(e);return null!=r?n(t??0,r):null}function M(t,e,r){const s=S(t,e,r,0);return null!=s?n(s.direct,s.unit):null}function O(t,e,r){const s=S(t,e,r,1);return null!=s?n(s.horizontal,s.unit):null}function P(t,e,r){const s=S(t,e,r,2);return null!=s?n(s.verticalSigned,s.unit):null}function S(n,t,e,r){const s=Z(e),i=a(s);if(null==i)return null;const o=t[2]-n[2];if(2===r)return{verticalSigned:o,unit:i};if(!p(n,e,q,s)||!p(t,e,E,s))return null;if(0===r)return{direct:l(E,q),unit:i};if(c(T,n[0],n[1],t[2]),!p(T,e,T,s))return null;const u=l(T,E);return 1===r?{horizontal:u,unit:i}:{direct:l(E,q),horizontal:u,vertical:Math.abs(o),unit:i}}const V=f(),k=f(),q=f(),E=f(),T=f();function W(n,t,e){return x(e,F,G,n,t,e)}const A={geodesicLength:function(n){const{spatialReference:t}=n;return x(t,H,I,n)},geodesicDistanceBetweenPoints:function(n,t){if(!o(n.spatialReference,t.spatialReference))return null;const{spatialReference:e}=n;return K[0]=n.x,K[1]=n.y,K[2]=n.hasZ?n.z:0,N[0]=t.x,N[1]=t.y,N[2]=t.hasZ?t.z:0,W(K,N,e)},geodesicDistance:W};async function C(){return await g(),A}function F(t,e,r){return n(z(J,t,e,r).distance,"meters")}function G(t,e,r){return n(y(function(n,t,e){return new d({spatialReference:e,paths:[[[...n],[...t]]]})}(t,e,r),{unit:"meters"}),"meters")}function H(t){return n(j([t],"meters")[0],"meters")}function I(t){return n(y(t,{unit:"meters"}),"meters")}const J=new R,K=f(),N=f();export{D as a,v as b,Z as c,B as d,O as e,U as f,w as g,M as h,L as i,P as j,C as l,b as v};
