/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{h as e}from"../core/lang.js";function t(e){const{objectIdField:t,uniqueIdFields:r}=e;return r?.length?r.length>=2?{type:"unique-id-composite",fieldNames:r}:{type:"unique-id-simple",fieldName:r[0]}:{type:"object-id",fieldName:t}}function r(t,r,i,o,s,a){const l=function(t){switch(t){case"esriGeometryMultipoint":return{min:e("featurelayer-snapshot-multipoint-min-threshold"),max:e("featurelayer-snapshot-multipoint-max-threshold")};case"esriGeometryPoint":return{min:e("featurelayer-snapshot-point-min-threshold"),max:e("featurelayer-snapshot-point-max-threshold")};case"esriGeometryMultiPatch":case"esriGeometryPolygon":return{min:e("featurelayer-snapshot-polygon-min-threshold"),max:e("featurelayer-snapshot-polygon-max-threshold")};case"esriGeometryPolyline":return{min:e("featurelayer-snapshot-polyline-min-threshold"),max:e("featurelayer-snapshot-polyline-max-threshold")}}}(o);if(!e("featurelayer-snapshot-enabled")||!i?.query.supportsPagination||i?.operations.supportsEditing||r)return null;const u=function(t,r){const n=r?.clone().intersection(t),i=null!=n?n.width*n.height:0,o=r?r.width*r.height:0,s=0===o?0:i/o,a=e("featurelayer-snapshot-coverage");return!isNaN(s)&&s>=a}(s,a),{min:m,max:h}=l,p=u?h:m,c=function(t){switch(t){case"esriGeometryPoint":return null;case"esriGeometryPolyline":case"esriGeometryPolygon":case"esriGeometryMultiPatch":case"esriGeometryMultipoint":return e("featurelayer-snapshot-max-vertex-count")}}(o);let y=e("featurelayer-snapshot-initial-tolerance");return"esriGeometryPoint"!==o&&"esriGeometryMultipoint"!==o||(y=null),{supportsExceedsLimit:n(t,i),initialTolerance:y,maxFeatureCount:p,maxVertexCount:c}}function n(t,r){return!(!t&&!e("featurelayer-snapshot-non-hosted-exceedslimit-enabled"))&&r?.operations.supportsExceedsLimitStatistics}export{r as a,t as c};
