/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{L as i,s as t,E as s,f as e,x as o,i as n,F as r,a as l}from"./componentsUtils.js";import{g as a,t as c}from"./dom.js";import{c as p}from"./observers.js";import{l as h}from"./logger2.js";import"./assets.js";import"../config.js";import"../core/lang.js";import"./object.js";import"../request.js";import"../kernel.js";import"../core/urlUtils.js";import"../core/Error.js";import"./Logger.js";import"./string.js";import"./jsonUtils.js";import"./MapUtils.js";import"../core/promiseUtils.js";import"./handleUtils.js";import"./events.js";import"./maybe.js";import"./persistableUrlUtils.js";import"./guid.js";
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const m="flip-rtl",d={},b={},u={s:16,m:24,l:32};function f({icon:i,scale:t}){const s=u[t],e=function(i){const t=!isNaN(Number(i.charAt(0))),s=i.split("-");if(s.length>0){const t=/[a-z]/i;i=s.map((i,s)=>i.replace(t,function(i,t){return 0===s&&0===t?i:i.toUpperCase()})).join("")}return t?`i${i}`:i}(i),o="F"===e.charAt(e.length-1);return`${o?e.substring(0,e.length-1):e}${s}${o?"F":""}`}function j(i){return d[i]}const v=n`:host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}`;class g extends i{constructor(){super(...arguments),this.visible=!1,this.flipRtl=!1,this.icon=null,this.preload=!1,this.scale="m"}static{this.properties={pathData:[16,{},{state:!0}],visible:[16,{},{state:!0}],flipRtl:[7,{},{reflect:!0,type:Boolean}],icon:[3,{},{reflect:!0}],preload:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],textLabel:1}}static{this.styles=v}connectedCallback(){if(super.connectedCallback(),this.preload)return this.visible=!0,void this.loadIconPathData();this.visible||this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}willUpdate(i){(i.has("icon")&&(this.hasUpdated||null!==this.icon)||i.has("scale")&&(this.hasUpdated||"m"!==this.scale))&&this.loadIconPathData()}disconnectedCallback(){super.disconnectedCallback(),this.intersectionObserver?.disconnect(),this.intersectionObserver=null}async loadIconPathData(){const{icon:i,scale:t,visible:s}=this;if(!i||!s)return;const e={icon:i,scale:t},o=j(f(e))||await async function(i){const t=f(i),s=j(t);if(s)return s;b[t]||(b[t]=fetch(r(`./assets/icon/${t}.json`)).then(i=>i.json()).catch(()=>(h.error(`${i.icon} (${i.scale}) icon failed to load`),"")));const e=await b[t];return d[t]=e,e}(e);i===this.icon&&(this.pathData=o)}waitUntilVisible(i){this.intersectionObserver=p("intersection",t=>{t.forEach(t=>{t.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,i())})},{rootMargin:"50px"}),this.intersectionObserver?this.intersectionObserver.observe(this.el):i()}render(){const{el:i,flipRtl:n,pathData:r,scale:l,textLabel:p}=this,h=a(i),d=u[l],b=!!p,f=[].concat(r||"");return this.el.ariaHidden=c(!b),this.el.ariaLabel=b?p:null,this.el.role=b?"img":null,o`<svg aria-hidden=true class=${t({[m]:"rtl"===h&&n,svg:!0})} fill=currentColor height=100% viewBox=${`0 0 ${d} ${d}`} width=100% xmlns=http://www.w3.org/2000/svg>${f.map(i=>"string"==typeof i?e`<path d=${i??s} />`:e`<path d=${i.d??s} opacity=${("opacity"in i?i.opacity:1)??s} />`)}</svg>`}}l("calcite-icon",g);export{g as Icon};
