/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{e as t,j as e,h as s,n as r,m as i,i as n}from"./vec3.js";import{c as a,b as o}from"./vec3f64.js";import{canProjectWithoutEngine as p}from"./projectionUtils.js";import{g as c}from"./spatialReferenceEllipsoidUtils.js";import{p as h}from"./projectVectorToVector.js";import{s as d}from"./vector.js";import{s as l,a as f}from"./mathUtils2.js";class _{constructor(t=a(),e=a()){this.startRenderSpace=t,this.endRenderSpace=e,this.type="euclidean"}eval(t,e,n){return i(e,this.startRenderSpace,this.endRenderSpace,t),n&&(s(n,this.endRenderSpace,this.startRenderSpace),r(n,n)),e}createRenderGeometry(t,e){const r=[],i=[],n=(e,n)=>{const a=j;s(a,e,t),r.push([a[0],a[1],a[2]]),i.push([n[0],n[1],n[2]])},a=e.worldUpAtPosition(this.eval(.5,R),d.get());return n(this.startRenderSpace,a),n(this.endRenderSpace,a),{points:r,normals:i}}static fromPositionAndVector(t,s,r=1){return n(R,s,r),e(R,t,R),new _(o(t),o(R))}}class m{_projectIn(e,s){this._project?h(e,this.renderSpatialReference,s,this._pcpf):t(s,e)}constructor(t,e,s){this.startRenderSpace=t,this.endRenderSpace=e,this.renderSpatialReference=s,this.type="geodesic",this._start=a(),this._end=a(),this._pcpf=c(s),this._project=p(s,this._pcpf),this._projectIn(t,this._start),this._projectIn(e,this._end)}eval(t,n,a){if(this._project)if(a){const i=j;l(this._start,this._end,t,n,i),e(S,n,i),h(n,this._pcpf,n,this.renderSpatialReference),h(S,this._pcpf,S,this.renderSpatialReference),s(a,S,n),r(a,a)}else f(this._start,this._end,t,n),h(n,this._pcpf,n,this.renderSpatialReference);else i(n,this._start,this._end,t),a&&(s(a,this._end,this._start),r(a,a));return n}createRenderGeometry(t,e){const r=[],i=[],n=(e,n)=>{const a=S;s(a,e,t),r.push([a[0],a[1],a[2]]),i.push([n[0],n[1],n[2]])};for(let t=0;t<128;++t){const s=t/127,r=R,i=j;this.eval(s,r),e.worldUpAtPosition(r,i),n(r,i)}return{points:r,normals:i}}}const R=a(),j=a(),S=a();export{_ as E,m as G};
