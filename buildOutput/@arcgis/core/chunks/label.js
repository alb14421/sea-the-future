/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{q as e,c as t,i as n}from"./dom.js";
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const l="calciteInternalLabelClick",a="calciteInternalLabelConnected",s="calciteInternalLabelDisconnected",o="calcite-label",i=new WeakMap,r=new WeakMap,c=new WeakMap,d=new WeakMap,u=new Set;function f(n){if(!n)return;const f=(n=>{const{id:l}=n,a=l&&e(n,{selector:`${o}[for="${l}"]`});if(a)return a;const s=t(n,o);return!s||function(e,t){let n;const l="custom-element-ancestor-check",a=l=>{l.stopImmediatePropagation();const a=l.composedPath();n=a.slice(a.indexOf(t),a.indexOf(e))};return e.addEventListener(l,a,{once:!0}),t.dispatchEvent(new CustomEvent(l,{composed:!0,bubbles:!0})),e.removeEventListener(l,a),n.filter(n=>n!==t&&n!==e).filter(e=>e.tagName?.includes("-")).length>0}(s,n)?null:s})(n.el);if(r.has(f)&&f===n.labelEl||!f&&u.has(n))return;const m=g.bind(n);if(f){n.labelEl=f;const e=i.get(f)||[];e.push(n),i.set(f,e.sort(b)),r.has(n.labelEl)||(r.set(n.labelEl,h),n.labelEl.addEventListener(l,h)),u.delete(n),document.removeEventListener(a,c.get(n)),d.set(n,m),document.addEventListener(s,m)}else u.has(n)||(m(),document.removeEventListener(s,d.get(n)))}function m(e){if(!e)return;if(u.delete(e),document.removeEventListener(a,c.get(e)),document.removeEventListener(s,d.get(e)),c.delete(e),d.delete(e),!e.labelEl)return;const t=i.get(e.labelEl);1===t.length&&(e.labelEl.removeEventListener(l,r.get(e.labelEl)),r.delete(e.labelEl)),i.set(e.labelEl,t.filter(t=>t!==e).sort(b)),e.labelEl=null}function b(e,t){return n(e.el,t.el)?-1:1}function E(e){return e.label||e.labelEl?.textContent?.trim()||""}function h(e){const t=e.detail.sourceEvent.target,n=i.get(this),l=n.find(e=>e.el===t);if(n.includes(l))return;const a=n[0];a.disabled||a.onLabelClick(e)}function v(){u.has(this)&&f(this)}function g(){u.add(this);const e=c.get(this)||v.bind(this);c.set(this,e),document.addEventListener(a,e)}async function L(e){if(await e.componentOnReady(),i.has(e))return;const t=e.ownerDocument?.getElementById(e.for);t&&requestAnimationFrame(()=>{for(const e of u)if(e.el===t){f(e);break}})}export{L as a,s as b,f as c,m as d,E as g,a as l};
