/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{a as e,b as t}from"./tslib.es6.js";import{a as r,v as n,G as o,o as s,E as a}from"./Point2D.js";import{O as i}from"./OperatorShapePreservingLength.js";import{y as c,z as m,b as l,f as u,A as g,B as p,F as y,G as f,H as x,I as h}from"./ProjectionTransformation.js";import"./Envelope.js";import"./Envelope2D.js";import"./Transformation2D.js";import"./SimpleGeometryCursor.js";import"./OperatorDefinitions.js";class S{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(e,t,r){return!1}canAccelerateGeometry(e){return!1}execute(e,t,x,h){if(4===x)return(new i).execute(e,t,h);if(0===t.getCoordinateSystemType()&&r(""),n(e),e.isEmpty()||e.getDimension()<1)return 0;const S=t.getGCS(),d=c();S.querySpheroidData(d);const j=d.majorSemiAxis,E=d.e2,P=S.getUnit().getUnitToBaseFactor();let v;const G=e.getGeometryType();if(G===o.enumPolygon?v=e.getBoundary():G===o.enumEnvelope?v=m(e):s(G)?(v=new l({vd:e.getDescription()}),v.addSegment(e,!0)):v=e,v.hasNonLinearSegments()&&(v=(new u).execute(v,0,t.getTolerance(0),0,h)),S!==t){const r=t.getSRToGCSTransform();if(t.isPannable()){v=g(v,t),G===o.enumPolyline&&v===e&&(v=e.clone());const r=new a;t.getPannableExtent().queryIntervalX(r);for(let e=0,t=v.getPointCount();e<t;e++){const t=v.getXY(e);t.x=p(t.x,r),v.setXY(e,t)}}const n=v.createInstance();v=y(r,v,n,h)?n:(new f).execute(v,r,h)}return this._ExecuteMultiPathGeodeticLength(v,x,j,E,P)}_ExecuteMultiPathGeodeticLength(r,n,o,s,a){const i={stack:[],error:void 0,hasError:!1};try{const t=e(i,new x,!1);let c=0;const m=r.querySegmentIterator();for(;m.nextPath();)for(;m.hasNextSegment();){const e=m.nextSegment(),r=e.getStartXY(),i=e.getEndXY();r.scale(a),i.scale(a),h.geodeticDistance(o,s,r.x,r.y,i.x,i.y,t,null,null,n),c+=t.val}return c}catch(e){i.error=e,i.hasError=!0}finally{t(i)}}}export{S as OperatorGeodeticLength};
