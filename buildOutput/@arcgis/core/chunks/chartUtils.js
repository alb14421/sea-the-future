/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{R as t,D as o}from"./ResponsiveTheme.js";import"../intl.js";import{h as i,m as e}from"./handleUtils.js";import"../core/lang.js";import{throwIfAborted as s}from"../core/promiseUtils.js";import{s as r}from"./signal.js";import{u as n,f as l}from"./unitFormatUtils.js";import{c as a}from"./unitUtils.js";import{g as p}from"./common.js";import{g as m,b as c,n as j}from"../widgets/ElevationProfile/ElevationProfileLine.js";import{g as d}from"../widgets/ElevationProfile.js";import{c as u,N as g}from"./chartUtilsAm5.js";import{a as f}from"./widgetUtils.js";import{i as y}from"./modeUtils.js";import{X as x,V as b,A as h,a as v,b as S,L as T}from"./LineSeries.js";import{b as L,d as A,a as U,C as M}from"./Theme.js";import{T as P}from"./Tooltip.js";import{f as C}from"./number.js";import{s as F}from"./substitute.js";import"./date.js";import"./jsonMap.js";import"./object.js";import"./locale.js";import"./constants.js";import"./datetime.js";import"./messages.js";import"../core/Error.js";import"./Logger.js";import"../config.js";import"./string.js";import"../request.js";import"../kernel.js";import"../core/urlUtils.js";import"./jsonUtils.js";import"./MapUtils.js";import"./persistableUrlUtils.js";import"./assets.js";import"./events.js";import"./maybe.js";import"./tracking.js";import"./utils.js";import"./SimpleObservable.js";import"./ObservableBase.js";import"./Cyclical.js";import"./mathUtils.js";import"./quantityUtils.js";import"./pe.js";import"./tslib.es6.js";import"../Color.js";import"./colorUtils.js";import"./ensureType.js";import"../core/Evented.js";import"../core/Accessor.js";import"../core/Handles.js";import"../core/accessorSupport/decorators/subclass.js";import"./Lifecycle.js";import"./metadata.js";import"./Warning.js";import"./get.js";import"./ObjectPool.js";import"../core/accessorSupport/decorators/property.js";import"./watch.js";import"../core/scheduling.js";import"./nextTick.js";import"./PooledArray.js";import"./SetUtils.js";import"./SimpleTrackingTarget.js";import"./memoize.js";import"../core/reactiveUtils.js";import"./uuid.js";import"../geometry/Point.js";import"../core/accessorSupport/decorators/cast.js";import"./reader.js";import"./writer.js";import"../geometry/Geometry.js";import"../core/JSONSupport.js";import"../geometry/SpatialReference.js";import"../geometry/support/webMercatorUtils.js";import"./vec4f64.js";import"../geometry/Multipoint.js";import"../geometry/Extent.js";import"./zmUtils.js";import"./coordsUtils.js";import"./ScheduledQueueProcessor.js";import"./Queue.js";import"./ReactiveMap.js";import"./Scheduler.js";import"./debugFlags.js";import"./vec2.js";import"./vec3.js";import"./vec3f64.js";import"../geometry/Polyline.js";import"./extentUtils.js";import"./boundsUtils.js";import"./aaBoundingRect.js";import"./projectionUtils.js";import"../geometry/Polygon.js";import"./projectBuffer.js";import"./geodesicConstants.js";import"./projectXYZToVector.js";import"../geometry/support/GeographicTransformation.js";import"../geometry/support/GeographicTransformationStep.js";import"./zscale.js";import"../geometry/support/geodesicUtils.js";import"./elevationInfoUtils.js";import"./unitConversionUtils.js";import"./lengthUtils.js";import"./traversalUtils.js";import"./asyncUtils.js";import"../widgets/Widget.js";import"./domUtils.js";import"../core/Promise.js";import"./projector.js";import"./sanitizerUtils.js";import"./componentsUtils.js";import"./jsxWidgetSupport.js";import"../widgets/ElevationProfile/ElevationProfileViewModel.js";import"../Graphic.js";import"../PopupTemplate.js";import"../core/Clonable.js";import"../core/Collection.js";import"./shared.js";import"../layers/support/fieldUtils.js";import"../core/sql.js";import"./guards.js";import"../popup/content.js";import"../popup/content/AttachmentsContent.js";import"../popup/content/Content.js";import"../popup/support/AttachmentsOrderByInfo.js";import"../popup/content/CustomContent.js";import"../popup/content/ExpressionContent.js";import"../popup/ElementExpressionInfo.js";import"../popup/content/FieldsContent.js";import"../popup/FieldInfo.js";import"./enumeration.js";import"../popup/support/FieldInfoFormat.js";import"../popup/content/MediaContent.js";import"../popup/content/BarChartMediaInfo.js";import"../popup/content/mixins/ChartMediaInfo.js";import"../popup/content/mixins/MediaInfo.js";import"../popup/content/support/ChartMediaInfoValue.js";import"../popup/content/support/ChartMediaInfoValueSeries.js";import"./chartMediaInfoUtils.js";import"../popup/content/ColumnChartMediaInfo.js";import"../popup/content/ImageMediaInfo.js";import"../popup/content/support/ImageMediaInfoValue.js";import"../popup/content/LineChartMediaInfo.js";import"../popup/content/PieChartMediaInfo.js";import"../popup/content/RelationshipContent.js";import"../popup/support/RelatedRecordsInfoFieldOrder.js";import"../popup/content/TextContent.js";import"../popup/content/UtilityNetworkAssociationsContent.js";import"../popup/support/UtilityNetworkAssociationType.js";import"../popup/ExpressionInfo.js";import"../popup/LayerOptions.js";import"../popup/RelatedRecordsInfo.js";import"../support/actions/ActionBase.js";import"../core/Identifiable.js";import"../support/actions/ActionButton.js";import"../support/actions/ActionToggle.js";import"../geometry/support/jsonUtils.js";import"./typeUtils.js";import"./createFeatureId.js";import"./typeUtils2.js";import"../symbols/CIMSymbol.js";import"../symbols/Symbol.js";import"../symbols/LabelSymbol3D.js";import"../symbols/Symbol3D.js";import"./collectionUtils.js";import"../portal/Portal.js";import"../core/Loadable.js";import"../portal/PortalGroup.js";import"../portal/PortalQueryParams.js";import"../portal/PortalQueryResult.js";import"../portal/PortalUser.js";import"../portal/PortalFolder.js";import"../symbols/ExtrudeSymbol3DLayer.js";import"../symbols/Symbol3DLayer.js";import"./utils3.js";import"../symbols/edges/Edges3D.js";import"./screenUtils.js";import"./materialUtils.js";import"./opacityUtils.js";import"../symbols/edges/SketchEdges3D.js";import"../symbols/edges/SolidEdges3D.js";import"./Symbol3DMaterial.js";import"../symbols/FillSymbol3DLayer.js";import"../symbols/patterns/LineStylePattern3D.js";import"../symbols/patterns/StylePattern3D.js";import"./utils4.js";import"./colors.js";import"./symbolLayerUtils3D.js";import"./aaBoundingBox.js";import"./DoubleArray.js";import"../symbols/IconSymbol3DLayer.js";import"../symbols/LineSymbol3DLayer.js";import"../symbols/LineStyleMarker3D.js";import"./lineMarkers.js";import"../symbols/ObjectSymbol3DLayer.js";import"../symbols/PathSymbol3DLayer.js";import"../symbols/TextSymbol3DLayer.js";import"../symbols/Font.js";import"../symbols/WaterSymbol3DLayer.js";import"../symbols/support/StyleOrigin.js";import"./Thumbnail.js";import"./calloutUtils.js";import"../symbols/callouts/Callout3D.js";import"../symbols/callouts/LineCallout3D.js";import"../symbols/support/Symbol3DVerticalOffset.js";import"../symbols/LineSymbol3D.js";import"../symbols/MeshSymbol3D.js";import"../symbols/PictureFillSymbol.js";import"../symbols/FillSymbol.js";import"../symbols/SimpleLineSymbol.js";import"../symbols/LineSymbol.js";import"../symbols/LineSymbolMarker.js";import"./urlUtils.js";import"../symbols/PictureMarkerSymbol.js";import"../symbols/MarkerSymbol.js";import"../symbols/PointSymbol3D.js";import"../symbols/PolygonSymbol3D.js";import"../symbols/SimpleFillSymbol.js";import"../symbols/SimpleMarkerSymbol.js";import"../symbols/TextSymbol.js";import"../symbols/WebStyleSymbol.js";import"./LRUCache.js";import"./MemCache.js";import"./ElevationQueryTileCache.js";import"./defaultUnit.js";import"./getDefaultUnitForView.js";import"./throttle.js";import"../widgets/ElevationProfile/ElevationProfileLineGround.js";import"./elevationQuerySourceUtils.js";import"./groundInstanceUtils.js";import"../widgets/ElevationProfile/ElevationProfileLineInput.js";import"./ElevationQuery.js";import"../layers/support/ElevationSampler.js";import"./ElevationTile.js";import"./ElevationSamplerData.js";import"./TileKey.js";import"../widgets/ElevationProfile/ElevationProfileLineQuery.js";import"../widgets/ElevationProfile/ElevationProfileLineView.js";import"./ray.js";import"./mat3.js";import"./mat3f64.js";import"./vector.js";import"./mat4f64.js";import"./quatf64.js";import"./vec2f64.js";import"./hitTest.js";import"./projectVectorToVector.js";import"./projectPointToVector.js";import"./dehydratedPoint.js";import"./LayerConstants.js";import"./layerUtils.js";import"../layers/catalog/catalogUtils.js";import"./debugFlags2.js";import"./ElevationProvider.js";import"./dehydratedFeatureUtils.js";import"./Intersector2.js";import"../views/3d/webgl/RenderCamera.js";import"./mat4.js";import"./vec4.js";import"./frustum.js";import"./plane.js";import"./mathUtils2.js";import"./HUDIntersectorResult.js";import"./sphere.js";import"./orientedBoundingBox.js";import"./quat.js";import"./spatialReferenceEllipsoidUtils.js";import"./computeTranslationToOriginAndRotation.js";import"./intersectorUtilsConversions.js";import"./Intersector.js";import"../layers/GraphicsLayer.js";import"./GraphicsCollection.js";import"../layers/Layer.js";import"../time/TimeExtent.js";import"./timeUtils.js";import"../layers/mixins/BlendLayer.js";import"./layerContainerType.js";import"./jsonUtils2.js";import"./parser.js";import"./utils5.js";import"../layers/mixins/ScaleRangeLayer.js";import"../symbols/support/ElevationInfo.js";import"../symbols/support/FeatureExpressionInfo.js";import"./InputManager.js";import"../widgets/Sketch/SketchViewModel.js";import"./UpdatingHandles.js";import"./isSupportedObject.js";import"./layerUtils2.js";import"./editableLayers.js";import"./keybindings.js";import"../views/interactive/sketch/SketchLabelOptions.js";import"./SketchOptions.js";import"../views/interactive/sketch/SketchTooltipOptions.js";import"./SketchTooltipVisibleElements.js";import"../views/interactive/sketch/SketchValueOptions.js";import"./SnappingManager.js";import"./normalizedPoint.js";import"./Settings.js";import"../views/interactive/snapping/SnappingOptions.js";import"../views/interactive/snapping/FeatureSnappingLayerSource.js";import"./constraints.js";import"../rest/support/Query.js";import"./DataLayerSource.js";import"../layers/support/Field.js";import"./domains.js";import"../layers/support/CodedValueDomain.js";import"../layers/support/Domain.js";import"../layers/support/InheritedDomain.js";import"../layers/support/RangeDomain.js";import"./fieldType.js";import"./FullTextSearch.js";import"./spatialRelationships.js";import"../rest/support/StatisticDefinition.js";import"./utils11.js";import"./Version2.js";import"./Version.js";import"./geometry2dUtils.js";import"./RightAngleSnappingHint.js";import"./geodesicLengthMeasurementUtils.js";import"../geometry/operators/geodeticLengthOperator.js";import"./geodeticCurveType.js";import"./geodesicMeasurementUtils.js";import"./automaticAreaMeasurementUtils.js";import"./geodesicAreaMeasurementUtils.js";import"./earcut.js";import"./triangle.js";import"./lineSegment.js";import"./automaticLengthMeasurementUtils.js";import"./HighlightDefaults.js";import"./hitTestSelectUtils.js";import"./screenUtils2.js";import"./sketchUtils.js";import"./messageBundle.js";import"./jsxFactory.js";import"./UnitSelect.js";import"./globalCss.js";import"./DefaultTheme.js";import"./ColorSet.js";import"./Tick.js";import"./Button.js";function D(t,o){const i=Math.floor(Math.log10(t)),e=t/10**i;let s;return s=o?e<1.5?1:e<3?2:e<5?2.5:e<7?5:10:e<=1?1:e<=2?2:e<=3?2.5:e<=5?5:10,s*10**i}const k="#f8f8f8",w="#a9a9a9",E="#323232",I={fontFamily:"Avenir Next",paddingBottom:6,paddingLeft:0,paddingRight:0,paddingTop:0,axisGridStroke:"#f4f4f4",axisLabelsFontSize:9,axisLabelsFontWeight:"400",axisLabelsColor:w,axisTooltipFontSize:12,axisTooltipBackgroundColor:E,axisTooltipLabelColor:k,axisTooltipPaddingTop:Math.round(3),axisTooltipPaddingBottom:Math.round(3),axisTooltipPaddingHorizontal:Math.round(3.75),xAxisMinGridDistance:50,xAxisLabelsSpacing:Math.round(6),xAxisMinLabelPosition:.05,xAxisMaxLabelPosition:.9,yAxisMinGridDistance:30,yAxisLabelSpacing:Math.round(3.75),yAxisMinLabelPosition:0,yAxisMaxLabelPosition:.8,seriesTooltipFontSize:12,seriesTooltipBackgroundColor:k,seriesTooltipLabelColor:E,seriesFillLighten:.9,seriesTooltipSpacing:6,seriesTooltipPaddingVertical:Math.round(3.75),seriesTooltipPaddingHorizontal:Math.round(3.75)},R={...I,axisGridStroke:E,axisLabelsColor:w,axisTooltipBackgroundColor:E,axisTooltipLabelColor:k,seriesTooltipBackgroundColor:E,seriesTooltipLabelColor:k,seriesFillLighten:-.75},z={minX:void 0,maxX:void 0,minY:void 0,maxY:void 0};async function B(e){const n=await u(e.container);s(e.abortOptions);const l=y(),a=l?R:I;n.setThemes(l?[t.new(n),o.new(n)]:[t.new(n)]);const p=f(e.container),c=n.container.children.push(x.new(n,{panX:!0,panY:!0,paddingTop:a.paddingTop,paddingBottom:a.paddingBottom,paddingLeft:p?a.paddingRight:a.paddingLeft,paddingRight:p?a.paddingLeft:a.paddingRight,maxTooltipDistance:-1}));c.zoomOutButton.set("forceHidden",!0);const j=c.xAxes.push(b.new(n,{renderer:h.new(n,{})})),d=c.yAxes.push(b.new(n,{renderer:v.new(n,{})})),g=r(null),T=r("loading"),M={chart:c,xAxis:j,yAxis:d,seriesInfos:new Map,messages:null,theme:a,pointerIsOver:!1,rtl:p,get state(){return T.value},get data(){return g.value},set data(t){g.value=t}};!function(t){const{chart:o,xAxis:i,theme:e}=t;i.setAll({extraMax:0,extraMin:0,maxDeviation:0,numberFormatter:_(t,"distance"),strictMinMax:!0,strictMinMaxSelection:!0}),i.axisHeader.set("forceHidden",!0);const s=i.get("renderer");s.setAll({inside:!1,minGridDistance:e.xAxisMinGridDistance}),s.labels.template.setAll({centerX:A,centerY:A,fill:L(e.axisLabelsColor),fontFamily:e.fontFamily,fontSize:e.axisLabelsFontSize,fontWeight:e.axisLabelsFontWeight,maxPosition:e.xAxisMaxLabelPosition,minPosition:e.xAxisMinLabelPosition,paddingLeft:0,paddingRight:0,paddingTop:e.xAxisLabelsSpacing});const r=i.set("tooltip",P.new(o.root,{paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0}));r.get("background")?.setAll({fill:L(e.axisTooltipBackgroundColor),stroke:void 0}),r.label.setAll({fill:L(e.axisTooltipLabelColor),fontFamily:e.fontFamily,fontSize:e.axisTooltipFontSize,paddingBottom:e.axisTooltipPaddingBottom,paddingLeft:e.axisTooltipPaddingHorizontal,paddingRight:e.axisTooltipPaddingHorizontal,paddingTop:e.axisTooltipPaddingTop,direction:t.rtl?"rtl":"ltr"}),s.grid.template.setAll({strokeOpacity:1,stroke:L(e.axisGridStroke)})}(M),function(t){const{yAxis:o,theme:i,rtl:e}=t;o.setAll({baseValue:m().noDataValue,extraMax:0,extraMin:0,maxDeviation:0,numberFormatter:_(t,"elevation"),strictMinMax:!0,strictMinMaxSelection:!0,tooltip:void 0}),o.axisHeader.set("visible",!1);const s=o.get("renderer");s.setAll({minGridDistance:i.yAxisMinGridDistance,opposite:e,inside:!0}),s.labels.template.setAll({centerX:A,centerY:U,fill:L(i.axisLabelsColor),fontFamily:i.fontFamily,fontSize:i.axisLabelsFontSize,fontWeight:i.axisLabelsFontWeight,maxPosition:i.yAxisMaxLabelPosition,minPosition:i.yAxisMinLabelPosition,paddingBottom:0,paddingLeft:e?0:i.yAxisLabelSpacing,paddingRight:e?i.yAxisLabelSpacing:0,paddingTop:0,textAlign:"start"}),s.grid.template.setAll({strokeOpacity:1,stroke:L(i.axisGridStroke)})}(M),function({chart:t,xAxis:o,yAxis:i}){const e=S.new(t.root,{behavior:"none",xAxis:o,yAxis:i,snapToSeriesBy:"y"});e.lineY.set("visible",!1),t.set("cursor",e)}(M);const C=i([Q(M,e.onRangeChange),N(M,e.onCursorPositionChange),st(n.events.once("frameended",()=>{T.value="ready"})),st(n)]);return{destroy:()=>{C.remove(),T.value="destroyed"},update:t=>{t.data===M.data&&t.messages===M.messages||X(M)||function(t,o){if(X(t))return;const i=t.data??void 0,e=o.data??void 0;t.chart.get("cursor")?.set("forceHidden",!e?.refined);const s=i!==e,r=i?.effectiveUnits!==e?.effectiveUnits,n=i?.uniformScaling!==e?.uniformScaling;t.data=e,t.messages=o.messages,(s||r)&&(function(t){const{chart:o,data:i,xAxis:e,yAxis:s}=t,{minX:r,maxX:n,minY:l,maxY:a}=Y({data:i,pixelWidth:e.width(),pixelHeight:s.height()}),p=!!i?.uniformScaling,m=!!i?.refined;o.setAll({panX:!0,panY:p,pinchZoomX:m,pinchZoomY:m&&p,wheelX:"panX",wheelY:m?p?"zoomXY":"zoomX":"none"}),e.setAll({max:n,min:r,panX:!0,panY:!1,zoomX:!0,zoomY:p}),s.setAll({max:a,min:l,panX:!1,panY:p,zoomX:p,zoomY:p})}(t),function(t){const{chart:o,data:i,seriesInfos:e,xAxis:s,yAxis:r}=t;if(null==i||0===i.lines.length)return void o.series.clear();const n=new Map,l=new Set(o.series.values),a=i.lines.length;for(let s=0;s<a;s++){const r=i.lines[s];let p=e.get(r.id);p?(p.fill&&l.delete(p.fill),l.delete(p.line)):(p=G(t,r),p.fill&&o.series.push(p.fill),o.series.push(p.line)),n.set(p.id,p);const m=a-s-1;p.fill?.set("layer",m),p.line.set("layer",a+m),H(t,p,r)}t.seriesInfos=n;for(const t of l)o.series.removeValue(t);s.set("layer",a+1),r.set("layer",a+2)}(t)),n&&O(t),Z(t)}(M,t)},zoomOut:()=>O(M),test:void 0}}function X(t){return"destroyed"===t.state}function O(t){X(t)||(t.xAxis.zoom(0,1),t.yAxis.zoom(0,1))}function Y({data:t,pixelWidth:o,pixelHeight:i}){if(null==t)return z;const e=t.statistics,s=e?.maxDistance;let r=e?.minElevation,n=e?.maxElevation;if(null==s||null==r||null==n)return z;const l=Math.max(s-0,.001);let p=Math.max(n-r,.001);const c=t.effectiveUnits;if(t.dynamicElevationRange){const t=a(l,c.distance,c.elevation);p=Math.max(p,t/m().maxChartRatio)}return r-=.02*p,n=r+p+.1*p,[r,n]=function(t,o,i=10){const e=D(o-t,!1);if(0===e)return[t,o];const s=D(e/(i-1),!0);return[Math.floor(t/s)*s,Math.ceil(o/s)*s]}(r,n,10),p=n-r,t.uniformScaling?function({data:t,bounds:o,pixelWidth:i,pixelHeight:e,centered:s}){if(null==t)return o;let{minX:r,maxX:n,minY:l,maxY:p}=o;if(null==r||null==n||null==l||null==p)return z;const m=n-r,c=p-l,j=t.effectiveUnits,d=a(c,j.elevation,j.distance)/e/(m/i);return d>=1?[r,n]=V([r,n],d):[l,p]=V([l,p],1/d),{minX:r,maxX:n,minY:l,maxY:p}}({data:t,bounds:{minX:0,maxX:s,minY:r,maxY:n},pixelWidth:o,pixelHeight:i,centered:!0}):{minX:0,maxX:0+l,minY:r,maxY:r+p}}function V([t,o],i,e){const s=(o-t)*i;{const i=(t+o)/2-s/2;return[i,i+s]}}function H({theme:t},o,i){const e=L(i.color.toCss()),s=i.samples??[],r=s.length>0,{line:n,fill:l}=o;n.set("visible",r),n.set("stroke",e),l?.set("visible",r),l?.set("fill",M.lighten(e,t.seriesFillLighten)),n.data.setAll(s),l?.data.setAll(s)}function G(t,o){const{id:i}=o,e=W(t,`line-${i}`),s=function({theme:t,chart:o,rtl:i}){const e=P.new(o.root,{autoTextColor:!1,forceHidden:!0,getFillFromSprite:!1,getLabelFillFromSprite:!1,pointerOrientation:"vertical",visible:!1}),s=t.seriesTooltipPaddingHorizontal,r=t.seriesTooltipPaddingVertical;return e.label.setAll({fill:L(t.seriesTooltipLabelColor),fontFamily:t.fontFamily,fontSize:t.seriesTooltipFontSize,paddingBottom:r,paddingLeft:s,paddingRight:s,paddingTop:r,textAlign:i?"end":"start",direction:"ltr"}),e.get("background")?.setAll({stroke:void 0,fill:L(t.seriesTooltipBackgroundColor)}),e.adapters.add("dy",o=>{const i=t.seriesTooltipSpacing,s=e.get("pointTo")?.y??0;return(o??0)+(e.y()>s?i:-i)}),e}(t);e.setAll({dy:o.chartStrokeOffsetY,tooltip:s}),e.strokes.template.setAll({strokeWidth:o.chartStrokeWidth});let r=null;return o.chartFillEnabled&&(r=W(t,`fill-${i}`),r.fills.template.setAll({fillOpacity:1,visible:!0})),{id:i,line:e,fill:r}}function W(t,o){return T.new(t.chart.root,{connect:!1,excludeFromTotal:!0,fill:void 0,id:o,stroke:void 0,valueXField:"distance",valueYField:"elevation",xAxis:t.xAxis,yAxis:t.yAxis})}function Q(t,o){const{xAxis:i,yAxis:e}=t,s=()=>{o(q(i),q(e))},r=t=>[t.on("start",s),t.on("end",s)];return et([...r(i),...r(e)])}function q(t){const o=Math.abs((t.get("end")??0)-(t.get("start")??0)),i=0!==o?1/o:1;return Math.abs(1-i)<p()?1:i}function N(t,o){const{chart:i,xAxis:e,yAxis:s}=t,r=i.get("cursor"),n=i.plotContainer.events,l=o=>{t.pointerIsOver=o,Z(t)},a=()=>{l(!1),o(null,null)};return et([r?.events.on("cursormoved",()=>{if(!t.pointerIsOver)return;Z(t);let i=r?.getPrivate("positionX")??0,n=r?.getPrivate("positionY")??0;const l=t.data;if(null!=l?.statistics){const{maxDistance:t,minElevation:o,maxElevation:r}=l.statistics;let a,p;null!=t&&(1===q(e)?(a=0,p=t):(a=ot(e),p=it(e)),i=$(i,a,p,0,t)),null!=o&&null!=r&&(1===q(s)?(a=o,p=r):(a=ot(s),p=it(s)),n=$(n,a,p,o,r))}o(i,n)}),n.on("pointerover",()=>l(!0)),n.on("pointerout",a),n.on("blur",a)])}function $(t,o,i,e,s){return(o+t*(i-o)-e)/(s-e)}function Z(t){const o=function(t){const{data:o}=t,i=o?.lines.map(o=>({line:o,y:tt(t,o)?.elevation})).sort(J);return i&&0!==i.length&&null!=i[0].y?i.map(({y:o,line:i})=>function(t,o,i){const{data:e,messages:s}=t;if(null==e||null==s)return"";const r=`[${o.color.toHex()}]●[/]`,n=m().formatPrecision,a=F(s.chartTooltip,{name:d(o,s),elevation:null!=i?l(s,i,e.effectiveUnits.elevation,n):j});return t.rtl?a+"  "+r:r+"  "+a}(t,i,o)).join("\n"):null}(t);o?(t.seriesInfos.forEach(t=>{const i=t.line.get("tooltip");i.set("forceHidden",!1),i.label.set("text",o)}),t.xAxis.getTooltip().setAll({tooltipText:K(t)})):t.seriesInfos.forEach(t=>{t.line.get("tooltip")?.set("forceHidden",!0)})}function J({y:t},{y:o}){return null==t?1:null==o?-1:o-t}function K(t){const{data:o,messages:i}=t;if(null==o||null==i)return"";const e=o.lines[0],s=e?tt(t,e):null,r=m().formatPrecision;return null!=s?l(i,s.distance,o.effectiveUnits.distance,r):"-"}function _(t,o){const i=g.new(t.chart.root,{});return i.format=(i,e,s)=>{const{data:r,messages:l}=t;return null==l||null==r||"string"==typeof i?"":`${C(i,{maximumFractionDigits:s})} ${n(l,r.effectiveUnits[o],"abbr")}`},i}function tt({chart:t,xAxis:o},i){const e=i.samples??[];if(0===e.length)return null;const s=t.get("cursor"),r=s?.getPrivate("positionX")??0,n=o.toAxisPosition(r),l=o.positionToValue(n);return c(e,l,t=>t.distance)}function ot(t){return t.positionToValue(t.get("start")??0)}function it(t){return t.positionToValue(t.get("end")??1)}function et(t){return i(t.map(st))}function st(t){return e(()=>{t?.dispose()})}export{B as createChart,Y as getAdjustedBounds};
