/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{_ as e}from"./tslib.es6.js";import{d as t}from"./maybe.js";import{watch as i,initial as s}from"../core/reactiveUtils.js";import{s as o}from"./string.js";import{property as n}from"../core/accessorSupport/decorators/property.js";import"../core/lang.js";import"./Logger.js";import{subclass as r}from"../core/accessorSupport/decorators/subclass.js";import l from"../widgets/Widget.js";import a from"../core/Accessor.js";import{H as c}from"./Heading.js";import"./widgetUtils.js";import{t as d}from"./jsxFactory.js";import{l as p}from"./componentsUtils.js";import{g as u}from"./globalCss.js";import{m}from"./messageBundle.js";import{F as h}from"./FeatureUtilityNetworkAssociationsViewModel.js";const y="esri-feature-element-info",g={base:y,title:`${y}__title`,description:`${y}__description`};let v=class extends l{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null}render(){return d("div",{class:g.base},this._renderTitle(),this._renderDescription())}_renderTitle(){const{title:e}=this;return e?d(c,{class:g.title,innerHTML:e,level:this.headingLevel}):null}_renderDescription(){const{description:e}=this;return e?d("div",{class:g.description,innerHTML:e,key:"description"}):null}};e([n()],v.prototype,"description",void 0),e([n()],v.prototype,"headingLevel",void 0),e([n()],v.prototype,"title",void 0),v=e([r("esri.widgets.Feature.support.FeatureElementInfo")],v);let f=class extends a{constructor(e){super(e),this.title=!0,this.description=!0}};e([n({type:Boolean,nonNullable:!0})],f.prototype,"title",void 0),e([n({type:Boolean,nonNullable:!0})],f.prototype,"description",void 0),f=e([r("esri.widgets.Feature.FeatureUtilityNetworkAssociations.VisibleElements")],f);const _="esri-feature-utility-network-associations",w=`${_}__loading-container`,j={base:_,listContainer:`${_}__list`,loadingContainer:w,loadingContainerSticky:`${w}--sticky`};let b=class extends l{constructor(e,t){super(e,t),this._featureElementInfo=null,this.onSelectAssociationType=()=>{},this.flowType="feature-utility-network-associations",this.flowItems=null,this.parentFeatureViewModel=null,this.headingLevel=5,this.viewModel=new h,this.messages=null,this.messagesCommon=null,this.visibleElements=new f}initialize(){this._featureElementInfo=new v,this.addHandles([i(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),s)])}loadDependencies(){return p({icon:()=>import("./index.js"),list:()=>import("./index19.js"),"list-item":()=>import("./index18.js"),loader:()=>import("./index28.js"),notice:()=>import("./index20.js")})}destroy(){this._featureElementInfo=t(this._featureElementInfo)}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){const{state:e}=this.viewModel;return d("div",{class:this.classes(j.base,u.widget)},this._featureElementInfo?.render(),"loading"===e?this._renderLoading():"disabled"===e?this._renderAssociationNotFound():this._renderContent())}_renderStickyLoading(){return"querying"===this.viewModel.state?d("div",{class:j.loadingContainerSticky,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoadingIcon(){return d("calcite-loader",{inline:!0,label:this.messagesCommon.loading})}_renderLoading(){return d("div",{class:j.loadingContainer,key:"loading-container"},this._renderLoadingIcon())}_renderAssociationNotFound(){return d("calcite-notice",{icon:"information",key:"association-not-found",kind:"info",open:!0,scale:"s",width:"full"},d("div",{slot:"message"},this.messages?.noAssociations))}_renderAssociationType(e){const{viewModel:t}=this,i=this._getAssociationTypeTitle(e);return d("calcite-list-item",{description:o(e.description),key:`association-type-${e.type}`,label:o(i),value:e.type,onCalciteListItemSelect:()=>this.onSelectAssociationType({viewModel:t,listType:e,title:i})},d("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"}))}_renderAssociations(e){const{viewModel:t}=this;return"featureForm"===t.source||t.getFeatureCountForAssociationType(e.type)>0?this._renderAssociationType(e):void 0}_renderContent(){const{messages:e,viewModel:t}=this,{state:i,associationTypes:s}=t;return d("div",{class:j.listContainer,key:"list-container"},"ready"===i?d("div",null,d("calcite-list",{displayMode:"flat",label:e?.associationsList},s.map(e=>this._renderAssociations(e)))):null,this._renderStickyLoading())}_getAssociationTypeTitle(e){const{messages:t}=this;if(e.title)return e.title;switch(e.type){case"attachment":return t.associationsAttachments;case"connectivity":return t.associationsConnectivity;case"structure":return t.associationsStructure;case"content":return t.associationsContents;case"container":return t.associationsContainer}}_setupFeatureElementInfo(){const{headingLevel:e,visibleElements:t}=this,i=t.description&&this.description,s=t.title&&this.title;this._featureElementInfo?.set({description:i,title:s,headingLevel:e})}};e([n({constructOnly:!0})],b.prototype,"onSelectAssociationType",void 0),e([n()],b.prototype,"flowType",void 0),e([n()],b.prototype,"flowItems",void 0),e([n()],b.prototype,"parentFeatureViewModel",void 0),e([n()],b.prototype,"featureVisibleElements",void 0),e([n()],b.prototype,"description",null),e([n()],b.prototype,"headingLevel",void 0),e([n()],b.prototype,"title",null),e([n({type:h})],b.prototype,"viewModel",void 0),e([n(),m("esri/widgets/Feature/t9n/Feature")],b.prototype,"messages",void 0),e([n(),m("esri/t9n/common")],b.prototype,"messagesCommon",void 0),e([n({type:f,nonNullable:!0})],b.prototype,"visibleElements",void 0),b=e([r("esri.widgets.Feature.FeatureUtilityNetworkAssociations")],b);const F=Object.freeze(Object.defineProperty({__proto__:null,default:b},Symbol.toStringTag,{value:"Module"}));export{v as F,f as V,b as a,F as b};
