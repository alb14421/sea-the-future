/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{f as t,o as n}from"./mathUtils.js";import"../core/lang.js";import"../geometry/Extent.js";import{s,j as a,i as r,t as c,m as i}from"./mat3.js";import{c as u}from"./mat3f64.js";import{q as o,v as e}from"./vec2.js";function h(t){return"curveRings"in t&&!!t.curveRings?.length||"curvePaths"in t&&!!t.curvePaths?.length}function f(t){return"curveRings"in t?t.curveRings:t.curvePaths}function M(t){return"b"in t}function l(t){return"c"in t}function b(t){return Array.isArray(t)}function m(t){return"a"in t&&4===t.a.length}function g(t){return"a"in t&&7===t.a.length}function P(t){return M(t)?t.b[0]:l(t)?t.c[0]:function(t){return"a"in t}(t)?t.a[0]:t}function I(t){if(M(t)){const[n,s,a]=t.b;return{b:[[...n],[...s],[...a]]}}if(l(t)){const[n,s]=t.c;return{c:[[...n],[...s]]}}if(b(t))return[...t];if(m(t)){const[n,s,a,r]=t.a;return{a:[[...n],[...s],a,r]}}if(g(t)){const[n,s,a,r,c,i,u]=t.a;return{a:[[...n],[...s],a,r,c,i,u]}}return t}function v(t,n,s,a){return t[0]=n[0]*(1-a)+s[0]*a,t[1]=n[1]*(1-a)+s[1]*a,t}function R(t,n){return o(t,n)}function q(t,n,s){const a=R(n,s);if(0===a)return R(n,t);const r=(n[0]-t[0])*(s[1]-t[1])-(n[1]-t[1])*(s[0]-t[0]);return r*r/a}function y(t,n){const s=Math.atan2(t,n);return s<0?s+2*Math.PI:s}function d(n,s,a){const[r,c,i,u]=a.a,o=Math.abs(n-s),e=o>Math.PI,h=o<Math.PI,f=t(o,Math.PI);return(!f&&(e&&i||h&&!i)||f&&(n>s&&u||n<s&&!u))&&(n+=2*(Math.sign(s-n)||1)*Math.PI),n}const j=[0,0];function p(t,n,s,a,r){const c=1-r,i=c*c,u=r*r,o=i*c,e=3*r*i,h=3*u*c,f=u*r;return[t[0]*o+n[0]*e+s[0]*h+a[0]*f,t[1]*o+n[1]*e+s[1]*h+a[1]*f]}function x(t,n,s){const a=t,[r,c,i]=n.b,u=v([0,0],a,c,s),o=v(j,c,i,s),e=v([0,0],i,r,s),h=v([0,0],u,o,s),f=v([0,0],o,e,s);return[{b:[v([],h,f,s),u,h]},{b:[[...r],f,e]}]}class E{constructor(t,n,s,a,r,c){this.cx=t,this.cy=n,this.radius=s,this.thetaStart=a,this.thetaEnd=r,this.isInvalid=c}}function w(t,n){const{thetaStart:s,thetaEnd:a}=t;return function(t,n){const{cx:s,cy:a,radius:r}=t;return[s+r*Math.cos(n),a+r*Math.sin(n)]}(t,s*(1-n)+a*n)}const S=u();function A(t,n){const[r,c]=n.c,i=function(t,n,r){const[c,i]=t,[u,o]=n,[e,h]=r,f=c*c+i*i,M=u*u+o*o,l=e*e+h*h;s(S,c,u,e,i,o,h,1,1,1);const b=a(S);if(0===b)return null;s(S,f,M,l,i,o,h,1,1,1);const m=a(S);return s(S,f,M,l,c,u,e,1,1,1),[m/b*.5,a(S)/b*-.5]}(t,c,r),u=null==i,o=i??v([],t,r,.5),[e,h]=t,[f,M]=c,[l,b]=r,[m,g]=o,P=e-m,I=h-g,R=Math.sqrt(P*P+I*I),q=y(h-g,e-m),d=y(M-g,f-m);let j=y(b-g,l-m);return(d-q)*(j-d)<0&&(j+=2*Math.sign(q-j)*Math.PI),new E(m,g,R,q,j,u)}function k(t,n,s){const a=w(t,s/2),r=w(t,s),c=w(t,(s+1)/2);return[{c:[r,a]},{c:[[...n.c[0]],c]}]}function U(t,s){const[a,r]=s.a,[c,i]=t,[u,o]=a,[e,h]=r,f=c-e,M=i-h,l=Math.sqrt(f*f+M*M),b=u-e,m=o-h,g=Math.sqrt(b*b+m*m),P=0===l||0===g||!n(l,g),I=l,v=y(i-h,c-e),R=d(y(o-h,u-e),v,s);return new E(e,h,I,v,R,P)}function z(t,n,s){const{cx:a,cy:r,thetaStart:c,thetaEnd:i}=t,[u,o,e,h]=n.a,f=c*(1-s)+i*s;return[{a:[w(t,s),[a,r],Math.abs(f-c)<Math.PI?1:0,h]},{a:[[...u],[a,r],Math.abs(i-f)<Math.PI?1:0,h]}]}class B{constructor(t,n,s,a,r,c,i,u,o){this.cx=t,this.cy=n,this.a=s,this.b=a,this.cosR=r,this.sinR=c,this.u1=i,this.u2=u,this.isInvalid=o}}function C(t,n){const[s,a,r,c,i,u,o]=n.a,[e,h]=t,[f,M]=s,[l,b]=a,m=u*o,g=Math.cos(i),P=Math.sin(i),I=y(1/m*(h-b)*g-1/m*(e-l)*P,1/u*(h-b)*P+1/u*(e-l)*g),v=d(y(1/m*(M-b)*g-1/m*(f-l)*P,1/u*(M-b)*P+1/u*(f-l)*g),I,n);return new B(l,b,u,m,g,P,I,v,0===u||0===m)}function D(t,n){const{u1:s,u2:a}=t;return function(t,n){const{a:s,b:a,cosR:r,sinR:c,cx:i,cy:u}=t,o=Math.cos(n),e=Math.sin(n);return[s*o*r-a*e*c+i,s*o*c+a*e*r+u]}(t,s*(1-n)+a*n)}function F(t,n,s){if(s<0||s>1)return[];if(0===s||1===s)return[I(n)];const[a,[r,c],i,u,o,e,h]=n.a,{u1:f,u2:M}=t,l=f*(1-s)+M*s;return[{a:[[...D(t,s)],[r,c],Math.abs(l-f)<Math.PI?1:0,u,o,e,h]},{a:[[...a],[r,c],Math.abs(M-l)<Math.PI?1:0,u,o,e,h]}]}const G=u(),H=u(),J=u(),K=u();function L(t,n,a){const[u,o,h,f,M,l,b]=n.a,m=C(t,n),{cosR:g,sinR:P,a:I,b:v,cx:q,cy:d}=m,j=e([0,0],u,a),p=e([0,0],o,a),x=a[0]*a[4]<0?1-f:f;{const t=I*I*P*P+v*v*g*g,n=2*(v*v-I*I)*P*g,a=I*I*g*g+v*v*P*P,r=-2*t*q-n*d,c=-n*q-2*a*d;s(G,t,n/2,r/2,n/2,a,c/2,r/2,c/2,t*q*q+n*q*d+a*d*d-I*I*v*v)}if(r(H,a),null==H){const n=e([0,0],t,a);return{a:[j,p,h,f,y(j[1],j[0]),Math.sqrt(R(j,n))/2,0]}}c(J,H),i(K,i(K,J,G),H);{const t=K[0],n=2*K[1],s=K[4],a=2*K[2],r=2*K[5],c=n*n-4*t*s,i=2*(t*r*r+s*a*a-n*a*r+c*K[8]),u=Math.sqrt((t-s)**2+n*n),o=-Math.sqrt(i*(t+s+u))/c,e=-Math.sqrt(i*(t+s-u))/c;return{a:[j,p,h,x,.5*y(-n,s-t),o,e/o]}}}export{P as a,b,M as c,l as d,m as e,A as f,f as g,U as h,h as i,v as j,p as k,R as l,C as m,D as n,z as o,q as p,k as q,x as r,F as s,g as t,L as u};
