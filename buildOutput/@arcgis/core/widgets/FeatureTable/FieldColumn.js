/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{_ as t}from"../../chunks/tslib.es6.js";import{L as e}from"../../chunks/Logger.js";import{on as i,sync as s}from"../../core/reactiveUtils.js";import{r as o}from"../../chunks/sanitizerUtils.js";import{property as r}from"../../core/accessorSupport/decorators/property.js";import"../../core/lang.js";import{subclass as n}from"../../core/accessorSupport/decorators/subclass.js";import{c as p}from"../../chunks/date.js";import{c as l,f as m}from"../../chunks/number.js";import{i as a}from"../../chunks/editableLayers.js";import{w as u}from"../../chunks/featureLayerUtils.js";import c from"../../layers/support/Field.js";import{validateFieldValue as d,isDateField as h,isTimeOnlyField as j,isIntegerField as f,isNumericField as y,isStringField as g,isDateOnlyField as b,isTimestampOffsetField as k}from"../../layers/support/fieldUtils.js";import{i as v}from"../../chunks/utils7.js";import{s as F}from"../../chunks/constants.js";import{g as I}from"../../chunks/timeZoneUtils.js";import D from"../FeatureForm/FieldInput.js";import C from"./Grid/EditorColumn.js";import{c as S}from"../../chunks/tableUtils.js";import{c as _,g as U,v as x,d as V,e as T,f as L,n as E,p as R,h as O}from"../../chunks/dateUtils.js";import{b as w}from"../../chunks/widgetUtils.js";import"../../config.js";import"../../chunks/object.js";import"../../chunks/string.js";import"../../chunks/events.js";import"../../chunks/handleUtils.js";import"../../chunks/maybe.js";import"../../core/promiseUtils.js";import"../../core/Error.js";import"../../chunks/watch.js";import"../../chunks/ObjectPool.js";import"../../core/scheduling.js";import"../../chunks/nextTick.js";import"../../chunks/PooledArray.js";import"../../chunks/SetUtils.js";import"../../chunks/get.js";import"../../chunks/utils.js";import"../../chunks/Lifecycle.js";import"../../chunks/tracking.js";import"../../chunks/SimpleTrackingTarget.js";import"../../chunks/ensureType.js";import"../../chunks/MapUtils.js";import"../../chunks/metadata.js";import"../../chunks/Warning.js";import"../../chunks/jsonMap.js";import"../../chunks/locale.js";import"../../chunks/datetime.js";import"../../layers/catalog/catalogUtils.js";import"../../chunks/layerUtils.js";import"../../kernel.js";import"../../core/urlUtils.js";import"../../chunks/jsonUtils.js";import"../../request.js";import"../../chunks/persistableUrlUtils.js";import"../../core/Collection.js";import"../../core/Evented.js";import"../../core/Accessor.js";import"../../core/Handles.js";import"../../chunks/ObservableBase.js";import"../../chunks/shared.js";import"../../chunks/SimpleObservable.js";import"../../chunks/asyncUtils.js";import"../../core/sql.js";import"../../chunks/uuid.js";import"../../layers/support/CodedValueDomain.js";import"../../chunks/enumeration.js";import"../../core/JSONSupport.js";import"../../layers/support/Domain.js";import"../../chunks/featureQueryAll.js";import"../../rest/support/Query.js";import"../../core/accessorSupport/decorators/cast.js";import"../../chunks/writer.js";import"../../geometry/Point.js";import"../../chunks/reader.js";import"../../geometry/Geometry.js";import"../../geometry/SpatialReference.js";import"../../chunks/unitUtils.js";import"../../chunks/pe.js";import"../../chunks/assets.js";import"../../geometry/support/webMercatorUtils.js";import"../../geometry/support/jsonUtils.js";import"../../geometry/Extent.js";import"../../geometry/Multipoint.js";import"../../chunks/zmUtils.js";import"../../geometry/Polygon.js";import"../../chunks/coordsUtils.js";import"../../chunks/extentUtils.js";import"../../chunks/boundsUtils.js";import"../../chunks/aaBoundingRect.js";import"../../chunks/mathUtils.js";import"../../geometry/Polyline.js";import"../../chunks/typeUtils.js";import"../../chunks/DataLayerSource.js";import"../../chunks/FullTextSearch.js";import"../../core/Clonable.js";import"../../chunks/spatialRelationships.js";import"../../rest/support/StatisticDefinition.js";import"../../time/TimeExtent.js";import"../../chunks/timeUtils.js";import"../../renderers/SimpleRenderer.js";import"../../renderers/Renderer.js";import"../../renderers/support/AuthoringInfo.js";import"../../renderers/support/AuthoringInfoVisualVariable.js";import"../../chunks/colorRamps.js";import"../../rest/support/AlgorithmicColorRamp.js";import"../../Color.js";import"../../chunks/colorUtils.js";import"../../rest/support/ColorRamp.js";import"../../rest/support/MultipartColorRamp.js";import"../../renderers/mixins/VisualVariablesMixin.js";import"../../renderers/visualVariables/ColorVariable.js";import"../../renderers/visualVariables/VisualVariable.js";import"../../renderers/visualVariables/support/ColorStop.js";import"../../renderers/visualVariables/OpacityVariable.js";import"../../renderers/visualVariables/support/OpacityStop.js";import"../../chunks/opacityUtils.js";import"../../renderers/visualVariables/RotationVariable.js";import"../../renderers/visualVariables/SizeVariable.js";import"../../chunks/screenUtils.js";import"../../renderers/visualVariables/support/SizeStop.js";import"../../chunks/visualVariableUtils.js";import"../../Graphic.js";import"../../PopupTemplate.js";import"../../popup/content.js";import"../../popup/content/AttachmentsContent.js";import"../../popup/content/Content.js";import"../../popup/support/AttachmentsOrderByInfo.js";import"../../popup/content/CustomContent.js";import"../../popup/content/ExpressionContent.js";import"../../popup/ElementExpressionInfo.js";import"../../popup/content/FieldsContent.js";import"../../popup/FieldInfo.js";import"../../popup/support/FieldInfoFormat.js";import"../../popup/content/MediaContent.js";import"../../popup/content/BarChartMediaInfo.js";import"../../popup/content/mixins/ChartMediaInfo.js";import"../../popup/content/mixins/MediaInfo.js";import"../../popup/content/support/ChartMediaInfoValue.js";import"../../popup/content/support/ChartMediaInfoValueSeries.js";import"../../chunks/chartMediaInfoUtils.js";import"../../popup/content/ColumnChartMediaInfo.js";import"../../popup/content/ImageMediaInfo.js";import"../../popup/content/support/ImageMediaInfoValue.js";import"../../popup/content/LineChartMediaInfo.js";import"../../popup/content/PieChartMediaInfo.js";import"../../popup/content/RelationshipContent.js";import"../../popup/support/RelatedRecordsInfoFieldOrder.js";import"../../popup/content/TextContent.js";import"../../popup/content/UtilityNetworkAssociationsContent.js";import"../../popup/support/UtilityNetworkAssociationType.js";import"../../popup/ExpressionInfo.js";import"../../popup/LayerOptions.js";import"../../popup/RelatedRecordsInfo.js";import"../../support/actions/ActionBase.js";import"../../core/Identifiable.js";import"../../support/actions/ActionButton.js";import"../../support/actions/ActionToggle.js";import"../../chunks/guards.js";import"../../chunks/createFeatureId.js";import"../../chunks/typeUtils2.js";import"../../symbols/CIMSymbol.js";import"../../symbols/Symbol.js";import"../../symbols/LabelSymbol3D.js";import"../../symbols/Symbol3D.js";import"../../chunks/collectionUtils.js";import"../../portal/Portal.js";import"../../core/Loadable.js";import"../../core/Promise.js";import"../../portal/PortalGroup.js";import"../../portal/PortalQueryParams.js";import"../../portal/PortalQueryResult.js";import"../../portal/PortalUser.js";import"../../portal/PortalFolder.js";import"../../symbols/ExtrudeSymbol3DLayer.js";import"../../symbols/Symbol3DLayer.js";import"../../chunks/utils3.js";import"../../symbols/edges/Edges3D.js";import"../../chunks/materialUtils.js";import"../../symbols/edges/SketchEdges3D.js";import"../../symbols/edges/SolidEdges3D.js";import"../../chunks/Symbol3DMaterial.js";import"../../symbols/FillSymbol3DLayer.js";import"../../symbols/patterns/LineStylePattern3D.js";import"../../symbols/patterns/StylePattern3D.js";import"../../chunks/utils4.js";import"../../chunks/colors.js";import"../../chunks/symbolLayerUtils3D.js";import"../../chunks/vec3f64.js";import"../../chunks/aaBoundingBox.js";import"../../chunks/DoubleArray.js";import"../../symbols/IconSymbol3DLayer.js";import"../../symbols/LineSymbol3DLayer.js";import"../../symbols/LineStyleMarker3D.js";import"../../chunks/lineMarkers.js";import"../../symbols/ObjectSymbol3DLayer.js";import"../../symbols/PathSymbol3DLayer.js";import"../../symbols/TextSymbol3DLayer.js";import"../../symbols/Font.js";import"../../symbols/WaterSymbol3DLayer.js";import"../../symbols/support/StyleOrigin.js";import"../../chunks/Thumbnail.js";import"../../chunks/calloutUtils.js";import"../../symbols/callouts/Callout3D.js";import"../../symbols/callouts/LineCallout3D.js";import"../../symbols/support/Symbol3DVerticalOffset.js";import"../../symbols/LineSymbol3D.js";import"../../symbols/MeshSymbol3D.js";import"../../symbols/PictureFillSymbol.js";import"../../symbols/FillSymbol.js";import"../../symbols/SimpleLineSymbol.js";import"../../symbols/LineSymbol.js";import"../../symbols/LineSymbolMarker.js";import"../../chunks/urlUtils.js";import"../../symbols/PictureMarkerSymbol.js";import"../../symbols/MarkerSymbol.js";import"../../symbols/PointSymbol3D.js";import"../../symbols/PolygonSymbol3D.js";import"../../symbols/SimpleFillSymbol.js";import"../../symbols/SimpleMarkerSymbol.js";import"../../symbols/TextSymbol.js";import"../../symbols/WebStyleSymbol.js";import"../../chunks/lengthUtils.js";import"../../chunks/commonProperties2.js";import"../../symbols/support/jsonUtils.js";import"../../chunks/defaults.js";import"../../chunks/defaultsJSON.js";import"../../renderers/UniqueValueRenderer.js";import"../../chunks/diffUtils.js";import"../../chunks/RendererLegendOptions.js";import"../../renderers/support/UniqueValue.js";import"../../renderers/support/UniqueValueClass.js";import"../../renderers/support/UniqueValueGroup.js";import"../../renderers/support/UniqueValueInfo.js";import"../../chunks/styleUtils.js";import"../../rest/support/AttachmentQuery.js";import"../../rest/support/NormalizationBinParametersMixin.js";import"../../rest/support/RelationshipQuery.js";import"../../chunks/domains.js";import"../../layers/support/InheritedDomain.js";import"../../layers/support/RangeDomain.js";import"../../chunks/fieldType.js";import"../../chunks/basemapUtils.js";import"../../chunks/utils5.js";import"../../chunks/mat4.js";import"../../chunks/common.js";import"../../chunks/basemapDefinitions.js";import"../../chunks/messages.js";import"../../chunks/featureUtils.js";import"../FeatureForm/EditableInput.js";import"../FeatureForm/InputBase.js";import"../../chunks/featureFormUtils.js";import"../../intl.js";import"../../chunks/substitute.js";import"../../chunks/formUtils.js";import"../../form/elements/AttachmentElement.js";import"../../form/elements/Element.js";import"../../form/elements/inputs/attachments/AttachmentInput.js";import"../../chunks/Input.js";import"../../form/elements/inputs/attachments/AudioInput.js";import"../../chunks/utils2.js";import"../../form/elements/inputs/attachments/DocumentInput.js";import"../../form/elements/inputs/attachments/ImageInput.js";import"../../form/elements/inputs/attachments/SignatureInput.js";import"../../form/elements/inputs/attachments/VideoInput.js";import"../../form/elements/FieldElement.js";import"../../form/elements/inputs.js";import"../../form/elements/inputs/BarcodeScannerInput.js";import"../../form/elements/inputs/TextInput.js";import"../../form/elements/inputs/Input.js";import"../../form/elements/inputs/ComboBoxInput.js";import"../../form/elements/inputs/DatePickerInput.js";import"../../form/elements/inputs/DateTimeOffsetPickerInput.js";import"../../form/elements/inputs/DateTimePickerInput.js";import"../../form/elements/inputs/RadioButtonsInput.js";import"../../form/elements/inputs/SwitchInput.js";import"../../form/elements/inputs/TextAreaInput.js";import"../../form/elements/inputs/TextBoxInput.js";import"../../form/elements/inputs/TimePickerInput.js";import"../../form/elements/RelationshipElement.js";import"../../form/elements/TextElement.js";import"../../form/elements/UtilityNetworkAssociationsElement.js";import"../../chunks/formUtils2.js";import"./Grid/Column.js";import"../../chunks/uriUtils.js";import"../../chunks/columnUtils.js";import"../../chunks/componentsUtils.js";const A=Symbol(),P="esri-column",M={input:`${P}__cell-input`,inputContainer:`${P}__cell__input-container`},Z=p("short-date-short-time"),N=p("short-date"),B={useGrouping:!0,maximumFractionDigits:20};let q=class extends C{constructor(t){super(t),this._activeFieldInput=null,this.cellValueFormatFunction=({root:t,rowData:e,value:i})=>{const{formatFunction:s}=this;if(s&&e){const{index:r,item:{attachments:n,feature:p,relatedRecords:l}}=e;return s({attachments:n,column:this,feature:p,field:this.field,index:r,relatedRecords:l,value:o.sanitize(i),virtualIndex:this.getVirtualRowIndex(t)})}if(null===i)return"&nbsp;";const{field:r}=this,n=this._getDomainForFeature(e?.item?.feature);if(n){const t=this._getComputedDomain(i,n);if("date"===r.type&&"range"===n.type)return this._formatDateValueForDisplay(r,t);if(this._isNumericField&&"range"===n.type){const t=this.template?.format,e=t?l(t):B;return m(parseFloat(i),e)}return _.has(r.type)?"range"===n.type?o.sanitize(U(r,t)):o.sanitize(t):t}if("date"===r.type||_.has(r.type))return this._formatDateValueForDisplay(r,i);if(this._isNumericField){const t=this.template?.format,e=t?l(t):B;return m(parseFloat(i),e)}return o.sanitize(i)},this.cellValueValidatorFunction=({oldValue:t,value:i})=>{const{_effectiveRange:s,field:o}=this,{max:r,min:n}=s;if(this.effectiveRequired&&(null==i||""===i))return!1;if(this._isNumericField&&(d(o,i)||!x({max:r,min:n,value:i})))return e.getLogger(this).warn("value-exceeds-valid-range","Field value exceeds valid range. Attempted edit was rejected."),!1;if(this._isAnyDateOrTimeField){const t=o.type;if(!V({type:t,range:s,value:i}))return!1}return t!==i},this.field=null,this.formatFunction=null,this.inputRenderFunction=async({root:t,column:i,rowData:s})=>{if(this.editInfo||!this.effectiveEditable)return;const o=this.getCellValue(s),{field:r}=this;if("big-integer"===r.type&&d(r,o))return void e.getLogger(this).warn("value-exceeds-valid-range","Field value is beyond supported limit. Editing is disabled for this field value.");const n=s?.item.feature;if(!n)return;this._activeFieldInput=this._setUpFieldInput(n,o);const p=document.createElement("div");p.classList.add(M.inputContainer);const l=[],m="coded-value"===this._effectiveDomain?.type;if(this._isAnyDateOrTimeField&&!m){const t=document.createElement("div"),e=this._setUpDateComponents(o),i=this._setUpDateActionBar();e.forEach(e=>t.appendChild(e)),p.appendChild(t),p.appendChild(i),l.push(...e)}else{const t=this.createInputElement({value:o});p.appendChild(t),l.push(t)}this._set("editInfo",{column:i,inputs:l,root:t,rowData:s,oldValue:o}),this.removeCellContent(t),t.appendChild(p),this._syncRowEditingState(t,!0),this.grid?.generateCellPartNames();const a=l[0];await w(a),"selectText"in a&&await a.selectText()},this.layer=null,this.parseInputValueFunction=({inputs:t})=>{const{editInfo:e,field:i,includeTime:s}=this;if(!e||!t.length)return null;const o=t[0];if(this._isAnyDateOrTimeField){if("coded-value"===this._effectiveDomain?.type){if(null==o.value||""===o.value)return null;const t=String(o.value);return h(i)?parseFloat(t):t}const{timeZone:r}=this.effectiveTimeZoneOptions,n=e.oldValue??void 0;switch(i.type){case"date-only":{const t=o.value;return""!==t?t:null}case"time-only":{const t=E(o.value);return""!==t?t:null}case"timestamp-offset":{const e=s?t[1]:void 0,i=t.at(-1);return L({oldValue:n,dateComponent:o,timeComponent:e,timeZoneComponent:i,defaultTimeZone:r})}case"date":{const{max:e,min:i}=this._effectiveRange;return T({oldValue:n,dateComponent:o,timeComponent:t[1],timeZone:r,max:e,min:i})}}return null}const r=o.value,{effectiveRequired:n}=this;return n||null!=r&&""!==r?this._isNumericField?parseFloat(r):this._isStringField?r.trim():r:null},this.sortable=!0,this.store=null,this.template=null,this.view=null}get _effectiveDomain(){const t=this._activeFieldInput?.feature;return t?this._getDomainForFeature(t):null}get _effectiveRange(){return this._activeFieldInput?.range??{max:null,min:null}}get _isAnyDateOrTimeField(){const{field:t}=this;return v(t)||j(t)}get _isIntegerField(){return f(this.field)}get _isNumericField(){return y(this.field)}get _isStringField(){return g(this.field)}get _isSubtypeField(){const{layer:t}=this;if(t?.subtypeField){const{subtypeField:e,fieldsIndex:i}=t;return(i.get(e)?.name??e)===this.fieldName}return!1}get alias(){return this.field?.alias}get defaultValue(){return this.field?.defaultValue}get effectiveDescription(){const{description:t,field:e}=this,i=e.description,s=S(t)?S(i)?null:i:t;return null==s?null:o.sanitize(s)}get effectiveEditable(){const{editable:t,field:e,layer:i,tableEditingEnabled:s}=this;if(!e||!i)return!1;const o=a(i),r=i.effectiveCapabilities??i.capabilities,n=r?.operations?.supportsUpdate;return!!(e.editable&&o&&n&&"oid"!==e.type&&s)&&t}get effectiveLabel(){return o.sanitize(this.label||this.alias||this.fieldName)}get effectiveRequired(){return!this.nullable||this._isSubtypeField||this._activeFieldInput?.required||this.required}get effectiveTimeZoneOptions(){const{layer:t,field:e}=this;if(!t||"date"!==e?.type&&"timestamp-offset"!==e?.type)return{timeZone:void 0,timeZoneName:void 0};const{tableTimeZone:i,timeZone:s,view:o}=this;return I(t.preferredTimeZone||null,!!t.datesInUnknownTimezone,s??i??o?.timeZone??F,p("short-time"),e.type)}get includeTime(){const{field:t,template:e}=this;return"time-only"===t.type||"date-only"!==t.type&&(!e?.input||"includeTime"in e.input&&!1!==e.input.includeTime)}get loadingMessage(){return this.messages?.loading||"..."}get maxLength(){const{field:t,template:e}=this,i=t?.length??-1,s=e?.input&&"maxLength"in e.input?e.input.maxLength:null;return null!=s&&!isNaN(s)&&s>=-1&&(-1===i||s<=i)?s:i}get minLength(){const{template:t,maxLength:e}=this,i=t?.input&&"minLength"in t.input?t.input.minLength:null;return e&&i<=e?i:null}get name(){return this.field?.name}get nullable(){return!1!==this.field.nullable}get shouldShowPrompt(){return this._isSubtypeField}createInputElement({value:t}){const{_effectiveDomain:e,maxLength:o,minLength:r,effectiveRequired:n}=this;let p;if("coded-value"===e?.type)p=this.createCalciteSelect(t,e.codedValues.map(({code:t,name:e})=>({value:t,name:e}))),this.addHandles([i(()=>p,"calciteSelectChange",()=>this.onInputBlur(),s)],A);else if(this._isNumericField){const{_effectiveRange:{max:e,min:i}}=this;p=document.createElement("calcite-input"),p.type="number",this._isIntegerField&&(p.step=1),null!=e&&(p.max=e),null!=i&&(p.min=i),p.status=x({max:e,min:i,value:t})?"idle":"invalid"}else p=document.createElement("calcite-input"),this.addHandles([i(()=>p,"calciteInputChange",()=>this.onInputBlur(),s)],A),o>-1&&(p.maxLength=o),r>0&&(p.minLength=r);return p.classList.add(M.input),p.required=n,p.value=null!=t?t.toString():"",this.addHandles([i(()=>p,"keydown",t=>{"Escape"===t.key&&this.onInputBlur(!0)},s),i(()=>p,"blur",()=>this.onInputBlur(),s)],A),p}onInputBlur(t=!1){this.removeHandles(A),super.onInputBlur(t)}onEditComplete(){const t=this.editInfo?.root;t&&this._syncRowEditingState(t,!1),this._activeFieldInput=null,super.onEditComplete()}_clearActiveEditValues(){this.editInfo?.inputs?.forEach(t=>t.value="")}_setUpDateActionBar(){const{messagesCommon:t}=this,e=t?.cancel??"",i=t?.clear??"",s=t?.save??"",o=document.createElement("calcite-action-bar");return o.expandDisabled=!0,o.layout="horizontal",o.appendChild(this.createCalciteAction({text:s,icon:"save",onclick:()=>this.submit()})),this.effectiveRequired||o.appendChild(this.createCalciteAction({text:i,icon:"trash",onclick:()=>{this._clearActiveEditValues(),this.submit()}})),o.appendChild(this.createCalciteAction({text:e,icon:"x",onclick:()=>this.cancel()})),o}_formatDateValueForDisplay(t,e){const{timeZone:i,timeZoneName:s}=this.effectiveTimeZoneOptions;return null!=e?U(t,e,{...this._getDateFormatOptions(),timeZone:i,timeZoneName:s}):null}_setUpDateComponents(t){const{_effectiveRange:{max:e,min:s,rawMax:o,rawMin:r},field:n,effectiveRequired:p}=this,l=this._getDateFieldValuesForComponents(n,t),m=[];if(v(n)){const t=this.createDateComponent(),a=b(n)||k(n)?o:e,u=b(n)||k(n)?r:s,c=this._getDateFieldValuesForComponents(n,a??null),d=this._getDateFieldValuesForComponents(n,u??null);t.value=l.date??"",t.max=c.date??"",t.min=d.date??"",t.required=p,this.addHandles([i(()=>t,"calciteInputDatePickerOpen",()=>this._onDateComponentOpen(t))],A),m.push(t)}if(this.includeTime){const t=this.createTimeComponent();t.value=l.time??"",t.required=p,this.addHandles([i(()=>t,"calciteInputTimePickerOpen",()=>this._onDateComponentOpen(t))],A),m.push(t)}if("timestamp-offset"===n.type){const t=this.createTimeZoneComponent();t.value=l.timeZoneOffset??"0",this.addHandles([i(()=>t,"calciteInputTimeZoneOpen",()=>this._onDateComponentOpen(t))],A),m.push(t)}return m}_onDateComponentOpen(t){this.editInfo?.inputs.forEach(e=>{e!==t&&"open"in e&&(e.open=!1)})}_syncRowEditingState(t,e=!1){const i=this.grid?.getRowContainingNode(t);i&&(e?i.setAttribute("editing","true"):i.removeAttribute("editing"))}_getDateFieldValuesForComponents(t,e){switch(t.type){case"date":return O(e,this.effectiveTimeZoneOptions.timeZone);case"date-only":return{date:e};case"time-only":return{time:e};case"timestamp-offset":return R(e);default:return{}}}_setUpFieldInput(t,e){const{field:i,layer:s,effectiveTimeZoneOptions:{timeZone:o}}=this,r=new D({feature:t,field:i,initialFeature:t.clone(),layer:s,timeZone:o});return r.set("value",e),r}_isDomainCompatible(t){if(!t)return!1;const{_isNumericField:e,_isStringField:i}=this,{type:s}=t;if("coded-value"===s){const s=typeof t.codedValues[0].code;if("string"===s&&i||"number"===s&&e)return!0}return!("range"!==s||!e)}_getDomainForFeature(t){const{fieldName:e,layer:i,template:s}=this;if(!t||!i?.getFieldDomain)return null;if("wfs"===i.type||"geojson"===i.type||"csv"===i.type||"knowledge-graph-sublayer"===i.type)return null;if(s?.domain&&this._isDomainCompatible(s.domain))return s.domain;if("feature"!==i.type&&"subtype-group"!==i.type&&null==i.getField(e)?.domain){const t=u(i,e);if(t)return t}return i.getFieldDomain(e,{feature:t})}_getComputedDomain(t,e){if(!e)return null;if("range"===e.type)return t;if("coded-value"===e.type){const i=e.codedValues.filter(e=>e.hasOwnProperty("code")&&e.code===t);return i&&i.length?i[0].name:t}return null}_getDateFormatOptions(){const{template:t}=this,e=t?.format?.dateFormat;return e?p(e):t?.input&&"includeTime"in t.input&&!1===t.input.includeTime?N:Z}};t([r()],q.prototype,"_effectiveDomain",null),t([r()],q.prototype,"_activeFieldInput",void 0),t([r()],q.prototype,"_effectiveRange",null),t([r()],q.prototype,"_isAnyDateOrTimeField",null),t([r()],q.prototype,"_isIntegerField",null),t([r()],q.prototype,"_isNumericField",null),t([r()],q.prototype,"_isStringField",null),t([r()],q.prototype,"_isSubtypeField",null),t([r({readOnly:!0})],q.prototype,"alias",null),t([r()],q.prototype,"cellValueFormatFunction",void 0),t([r()],q.prototype,"cellValueValidatorFunction",void 0),t([r({readOnly:!0})],q.prototype,"defaultValue",null),t([r()],q.prototype,"effectiveDescription",null),t([r()],q.prototype,"effectiveEditable",null),t([r()],q.prototype,"effectiveLabel",null),t([r()],q.prototype,"effectiveRequired",null),t([r()],q.prototype,"effectiveTimeZoneOptions",null),t([r({type:c})],q.prototype,"field",void 0),t([r()],q.prototype,"formatFunction",void 0),t([r()],q.prototype,"includeTime",null),t([r()],q.prototype,"inputRenderFunction",void 0),t([r()],q.prototype,"layer",void 0),t([r({readOnly:!0})],q.prototype,"loadingMessage",null),t([r()],q.prototype,"maxLength",null),t([r()],q.prototype,"minLength",null),t([r({readOnly:!0})],q.prototype,"name",null),t([r({readOnly:!0})],q.prototype,"nullable",null),t([r()],q.prototype,"parseInputValueFunction",void 0),t([r()],q.prototype,"shouldShowPrompt",null),t([r()],q.prototype,"sortable",void 0),t([r()],q.prototype,"store",void 0),t([r()],q.prototype,"template",void 0),t([r()],q.prototype,"view",void 0),q=t([n("esri.widgets.FeatureTable.FieldColumn")],q);const z=q;export{z as default};
