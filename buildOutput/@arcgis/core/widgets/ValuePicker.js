/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{_ as t}from"../chunks/tslib.es6.js";import{d as e}from"../chunks/maybe.js";import{on as o}from"../core/reactiveUtils.js";import{property as s}from"../core/accessorSupport/decorators/property.js";import"../core/lang.js";import{L as i}from"../chunks/Logger.js";import{subclass as r}from"../core/accessorSupport/decorators/subclass.js";import n from"./Widget.js";import{l}from"../chunks/componentsUtils.js";import{g as a}from"../chunks/globalCss.js";import"../chunks/widgetUtils.js";import{m as p}from"../chunks/messageBundle.js";import{v as c}from"../chunks/vmEvent.js";import{t as u}from"../chunks/jsxFactory.js";import m from"./ValuePicker/ValuePickerCollection.js";import h from"./ValuePicker/ValuePickerCombobox.js";import d from"./ValuePicker/ValuePickerLabel.js";import y from"./ValuePicker/ValuePickerSlider.js";import{EventedAccessor as v}from"../core/Evented.js";import{after as j,isAbortError as k}from"../core/promiseUtils.js";import b from"../core/Accessor.js";import"../chunks/events.js";import"../chunks/handleUtils.js";import"../chunks/watch.js";import"../chunks/ObjectPool.js";import"../core/scheduling.js";import"../chunks/nextTick.js";import"../chunks/PooledArray.js";import"../core/Error.js";import"../chunks/object.js";import"../config.js";import"../chunks/string.js";import"../chunks/SetUtils.js";import"../chunks/get.js";import"../chunks/utils.js";import"../chunks/Lifecycle.js";import"../chunks/tracking.js";import"../chunks/SimpleTrackingTarget.js";import"../chunks/ensureType.js";import"../chunks/MapUtils.js";import"../chunks/metadata.js";import"../chunks/Warning.js";import"../intl.js";import"../chunks/date.js";import"../chunks/jsonMap.js";import"../chunks/locale.js";import"../chunks/constants.js";import"../chunks/datetime.js";import"../chunks/number.js";import"../chunks/substitute.js";import"../chunks/messages.js";import"../request.js";import"../kernel.js";import"../core/urlUtils.js";import"../chunks/jsonUtils.js";import"../chunks/persistableUrlUtils.js";import"../chunks/assets.js";import"../chunks/domUtils.js";import"../core/Promise.js";import"../core/Handles.js";import"../chunks/ObservableBase.js";import"../chunks/uuid.js";import"../core/accessorSupport/decorators/cast.js";import"../chunks/projector.js";import"../chunks/sanitizerUtils.js";import"../chunks/jsxWidgetSupport.js";import"../core/Collection.js";import"../chunks/shared.js";import"../chunks/SimpleObservable.js";import"../chunks/ValuePickerBaseComponent.js";import"./Slider.js";import"../chunks/css.js";import"./Slider/SliderViewModel.js";const g={first:!0},w={first:!1};let x=class extends v{constructor(t){super(t),this._animationController=null,this.disabled=!1,this.layout="horizontal",this.loop=!1,this.playRate=1e3,this.values=null}destroy(){this._pause()}get state(){return this._animationController?"playing":"ready"}next(){this.emit("next")}pause(){this.emit("pause"),this._pause()}play(){this.emit("play"),this._play()}previous(){this.emit("previous")}_pause(){this._animationController?.abort(),this._animationController=null}_play(){this._pause(),this._animationController=new AbortController,this._animate(g)}async _animate(t){if(this.emit("animate",t),this._animationController){try{await j(this.playRate,null,this._animationController.signal)}catch(t){return k(t)||i.getLogger(this).error(t),void this._pause()}this._animate(w)}}};t([s()],x.prototype,"_animationController",void 0),t([s({nonNullable:!0})],x.prototype,"disabled",void 0),t([s({nonNullable:!0})],x.prototype,"layout",void 0),t([s({nonNullable:!0})],x.prototype,"loop",void 0),t([s({nonNullable:!0})],x.prototype,"playRate",void 0),t([s({readOnly:!0})],x.prototype,"state",null),t([s()],x.prototype,"values",void 0),t([s()],x.prototype,"next",null),t([s()],x.prototype,"pause",null),t([s()],x.prototype,"play",null),t([s()],x.prototype,"previous",null),x=t([r("esri.widgets.ValuePicker.ValuePickerViewModel")],x);const _=x;let M=class extends b{constructor(t){super(t),this.nextButton=!0,this.playButton=!0,this.previousButton=!0}};t([s({nonNullable:!0})],M.prototype,"nextButton",void 0),t([s({nonNullable:!0})],M.prototype,"playButton",void 0),t([s({nonNullable:!0})],M.prototype,"previousButton",void 0),M=t([r("esri.widgets.ValuePicker.ValuePickerVisibleElements")],M);const f=M,P="esri-value-picker",V={actionBar:`${P}__action-bar`,caption:`${P}__caption`,captionBorder:`${P}__caption-border`,captionText:`${P}__caption-text`,separator:`${P}__separator`},C={base:null,key:"type",typeMap:{collection:m,combobox:h,label:d,slider:y}};let B=class extends n{constructor(t,e){super(t,e),this.caption=null,this.messages=null,this.messagesCommon=null,this.viewModel=new _,this.visibleElements=new f}initialize(){this.addHandles([o(()=>this.viewModel,"animate",({first:t})=>{this.component?.animate(t)}),o(()=>this.viewModel,"next",()=>{this.component?.next()}),o(()=>this.viewModel,"previous",()=>{this.component?.previous()})])}destroy(){this.component=e(this.component)}loadDependencies(){return l({action:()=>import("../chunks/index5.js"),"action-bar":()=>import("../chunks/index15.js")})}get canNext(){return this.component?.canNext??!0}get canPlay(){return this.component?.canPlay??!0}get canPrevious(){return this.component?.canPrevious??!0}set component(t){const e=this._get("component");t!==e&&(e?.viewModel===this.viewModel&&(e.viewModel=null),t&&e?.destroy()),t&&(t.viewModel??=this.viewModel),this._set("component",t)}get disabled(){return this.viewModel.disabled}set disabled(t){this.viewModel.disabled=t}get icon(){return"list-rectangle"}set icon(t){this._overrideIfSome("icon",t)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get layout(){return this.viewModel.layout}set layout(t){this.viewModel.layout=t}get loop(){return this.viewModel.loop}set loop(t){this.viewModel.loop=t}get playRate(){return this.viewModel.playRate}set playRate(t){this.viewModel.playRate=t}get values(){return this.viewModel.values}set values(t){this.viewModel.values=t}next(){this.viewModel.next()}pause(){this.viewModel.pause()}play(){this.viewModel.play()}previous(){this.viewModel.previous()}render(){const{disabled:t,state:e}=this.viewModel,o="playing"===e,s="horizontal"===this.layout,{control:i,pagination:r}=this.messagesCommon,{pause:n,play:l}=i,{previous:p,up:c,next:m,down:h}=r,d=o?n:l,y=this.visibleElements.playButton&&u("calcite-action",{active:o,alignment:"center",bind:this,disabled:t||!this.canPlay,icon:o?"pause":"play",key:"play",onclick:o?this.pause:this.play,text:d,title:d}),v=s?p:c,j=this.visibleElements.previousButton&&u("calcite-action",{alignment:"center",bind:this,disabled:t||o||!this.canPrevious,icon:s?"chevron-left":"chevron-up",key:"previous",onclick:this.previous,text:v,title:v}),k=s?m:h,b=this.visibleElements.nextButton&&u("calcite-action",{alignment:"center",bind:this,disabled:t||o||!this.canNext,icon:s?"chevron-right":"chevron-down",key:"next",onclick:this.next,text:k,title:k}),g=this.caption&&u("div",{class:V.caption},u("div",{class:V.captionBorder},u("div",{class:V.captionText},this.caption))),w="combobox"===this.component?.type||"label"===this.component?.type||"slider"===this.component?.type,x=(y||j||b)&&(g||w)&&u("div",{class:V.separator}),_=this.component?.render();return u("div",{"aria-label":this.label,class:this.classes(P,a.widget,`${P}__layout--${this.layout}`,`${P}__type--${this.component?.type}`)},u("calcite-action-bar",{class:V.actionBar,expandDisabled:!0,layout:this.layout},[y,j,b,x,g,_]))}};t([s()],B.prototype,"canNext",null),t([s()],B.prototype,"canPlay",null),t([s()],B.prototype,"canPrevious",null),t([s()],B.prototype,"caption",void 0),t([s({types:C,value:null})],B.prototype,"component",null),t([s()],B.prototype,"disabled",null),t([s()],B.prototype,"icon",null),t([s()],B.prototype,"label",null),t([s()],B.prototype,"layout",null),t([s()],B.prototype,"loop",null),t([s(),p("esri/widgets/ValuePicker/t9n/ValuePicker")],B.prototype,"messages",void 0),t([s(),p("esri/t9n/common")],B.prototype,"messagesCommon",void 0),t([s()],B.prototype,"playRate",null),t([s()],B.prototype,"values",null),t([s(),c(["animate","next","pause","play","previous"])],B.prototype,"viewModel",void 0),t([s({type:f,nonNullable:!0})],B.prototype,"visibleElements",void 0),B=t([r("esri.widgets.ValuePicker")],B);const S=B;export{S as default};
