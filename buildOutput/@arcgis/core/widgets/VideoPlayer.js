/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import{g as s}from"../core/Accessor.js";import{clone as t}from"../core/lang.js";import{L as i}from"../chunks/Logger.js";import{watch as o,initial as r}from"../core/reactiveUtils.js";import{property as l}from"../core/accessorSupport/decorators/property.js";import{subclass as n}from"../core/accessorSupport/decorators/subclass.js";import{f as c}from"../chunks/date.js";import a from"../views/VideoView.js";import m from"./Slider.js";import p from"./Widget.js";import{l as u}from"../chunks/componentsUtils.js";import{g as d}from"../chunks/globalCss.js";import"../chunks/widgetUtils.js";import{m as j}from"../chunks/messageBundle.js";import{t as h}from"../chunks/jsxFactory.js";import k from"./VideoPlayer/VideoPlayerViewModel.js";import y from"../Color.js";import"../core/Handles.js";import"../chunks/maybe.js";import"../chunks/get.js";import"../chunks/utils.js";import"../chunks/handleUtils.js";import"../chunks/Lifecycle.js";import"../chunks/metadata.js";import"../chunks/ObjectPool.js";import"../chunks/ObservableBase.js";import"../chunks/tracking.js";import"../chunks/watch.js";import"../core/scheduling.js";import"../chunks/nextTick.js";import"../chunks/PooledArray.js";import"../core/promiseUtils.js";import"../core/Error.js";import"../chunks/object.js";import"../config.js";import"../chunks/string.js";import"../chunks/events.js";import"../chunks/SetUtils.js";import"../chunks/SimpleTrackingTarget.js";import"../chunks/ensureType.js";import"../chunks/MapUtils.js";import"../chunks/Warning.js";import"../chunks/jsonMap.js";import"../chunks/locale.js";import"../chunks/constants.js";import"../chunks/datetime.js";import"../Viewpoint.js";import"../Camera.js";import"../CameraLayout.js";import"../core/Clonable.js";import"../chunks/Cyclical.js";import"../chunks/mathUtils.js";import"../core/JSONSupport.js";import"../core/accessorSupport/decorators/cast.js";import"../chunks/reader.js";import"../chunks/writer.js";import"../geometry/Point.js";import"../geometry/Geometry.js";import"../geometry/SpatialReference.js";import"../chunks/unitUtils.js";import"../chunks/pe.js";import"../chunks/assets.js";import"../request.js";import"../kernel.js";import"../core/urlUtils.js";import"../chunks/jsonUtils.js";import"../chunks/persistableUrlUtils.js";import"../geometry/support/webMercatorUtils.js";import"../geometry/support/jsonUtils.js";import"../geometry/Extent.js";import"../geometry/Multipoint.js";import"../chunks/zmUtils.js";import"../geometry/Polygon.js";import"../chunks/coordsUtils.js";import"../chunks/extentUtils.js";import"../chunks/boundsUtils.js";import"../chunks/aaBoundingRect.js";import"../geometry/Polyline.js";import"../chunks/typeUtils.js";import"../core/Evented.js";import"../core/Promise.js";import"../geometry/operators/projectOperator.js";import"../chunks/SimpleGeometryCursor.js";import"../layers/support/ExtentAndRotationGeoreference.js";import"../chunks/screenUtils.js";import"../chunks/common.js";import"../chunks/projectionUtils.js";import"../chunks/SimpleObservable.js";import"../chunks/vec3f64.js";import"../chunks/projectBuffer.js";import"../chunks/geodesicConstants.js";import"../chunks/projectXYZToVector.js";import"../geometry/support/GeographicTransformation.js";import"../geometry/support/GeographicTransformationStep.js";import"../chunks/zscale.js";import"../chunks/GeoreferenceBase.js";import"../chunks/MediaElementView.js";import"../chunks/normalizeUtilsSync.js";import"../chunks/normalizeUtilsCommon.js";import"../layers/support/TileInfo.js";import"../layers/support/LOD.js";import"../chunks/TileKey.js";import"../layers/support/VideoElement.js";import"../chunks/sanitizerUtils.js";import"../layers/support/MediaElementBase.js";import"../core/Identifiable.js";import"../core/Loadable.js";import"../chunks/MultiOriginJSONSupport.js";import"../layers/support/ControlPointsGeoreference.js";import"../chunks/perspectiveUtils.js";import"../chunks/mat3.js";import"../chunks/mat3f64.js";import"../chunks/vec2.js";import"../chunks/vec3.js";import"../chunks/vec2f64.js";import"../layers/support/CornersGeoreference.js";import"../chunks/videoUtils.js";import"../chunks/mediaLayerUtils2.js";import"../views/DOMContainer.js";import"../chunks/domUtils.js";import"../core/Collection.js";import"../chunks/shared.js";import"../chunks/UpdatingHandles.js";import"../chunks/projector.js";import"../chunks/ManagedCanvas.js";import"../chunks/Scheduler.js";import"../chunks/signal.js";import"../chunks/debugFlags.js";import"../chunks/viewpointUtils.js";import"../chunks/mat2d.js";import"../chunks/mat2df64.js";import"../geometry/support/normalizeUtils.js";import"../chunks/simplify.js";import"../chunks/utils9.js";import"../chunks/utils10.js";import"../chunks/ViewEvents.js";import"../chunks/InputManager.js";import"../chunks/Queue.js";import"../chunks/a11yUtils.js";import"../views/ViewAnimation.js";import"../chunks/Animation.js";import"../views/input/gamepad/GamepadInputDevice.js";import"../chunks/screenUtils2.js";import"../chunks/easing.js";import"../chunks/unitBezier.js";import"../views/2d/ViewState.js";import"../chunks/mat2df32.js";import"../chunks/mat3f32.js";import"../chunks/vec2f32.js";import"../chunks/floatRGBA.js";import"../symbols/Font.js";import"../chunks/CIMSymbolHelper.js";import"../chunks/BidiEngine.js";import"../chunks/labelPoint.js";import"../chunks/OptimizedGeometry.js";import"../chunks/memoryEstimations.js";import"../chunks/GeometryUtils.js";import"../chunks/utils6.js";import"../chunks/defaultCIMValues.js";import"../chunks/fontUtils.js";import"../chunks/rasterizingUtils.js";import"../chunks/definitions.js";import"../chunks/shapingUtils.js";import"../chunks/Rect.js";import"../chunks/BoundingBox.js";import"../chunks/defaults.js";import"../symbols/SimpleFillSymbol.js";import"../chunks/enumeration.js";import"../symbols/FillSymbol.js";import"../symbols/SimpleLineSymbol.js";import"../symbols/LineSymbol.js";import"../symbols/Symbol.js";import"../chunks/colorUtils.js";import"../symbols/LineSymbolMarker.js";import"../chunks/lineMarkers.js";import"../symbols/SimpleMarkerSymbol.js";import"../symbols/MarkerSymbol.js";import"../symbols/TextSymbol.js";import"../chunks/defaultsJSON.js";import"../chunks/OverrideHelper.js";import"../chunks/colorUtils2.js";import"../chunks/vec4.js";import"../chunks/vec4f64.js";import"../layers/support/FieldsIndex.js";import"../chunks/UnknownTimeZone.js";import"../layers/support/fieldUtils.js";import"../core/sql.js";import"../chunks/guards.js";import"../chunks/timeZoneUtils.js";import"../chunks/ArcadeExpression.js";import"../chunks/TimeOnly.js";import"../chunks/enum.js";import"../chunks/callExpressionWithFeature.js";import"../chunks/quantizationUtils.js";import"../chunks/Container.js";import"../chunks/EffectView.js";import"../chunks/parser.js";import"../chunks/utils5.js";import"../chunks/mat4.js";import"../chunks/DisplayObject.js";import"../chunks/vec4f32.js";import"../chunks/WGLContainer.js";import"../chunks/utils30.js";import"../chunks/enums.js";import"../chunks/VertexElementDescriptor.js";import"../chunks/WGLBrushVTLSymbol.js";import"../chunks/VertexArrayObject.js";import"../chunks/Texture.js";import"../chunks/VertexAttributeLocations.js";import"../chunks/VertexBuffer.js";import"../chunks/BufferObject.js";import"../chunks/config.js";import"../chunks/ShaderCompiler.js";import"../chunks/ProgramTemplate.js";import"../chunks/Program.js";import"../chunks/TiledDisplayObject.js";import"../chunks/TileKey2.js";import"../chunks/vec3f32.js";import"../chunks/util.js";import"../views/support/HighlightOptions.js";import"../chunks/HighlightDefaults.js";import"../chunks/earcut.js";import"../chunks/featureConversionUtils.js";import"../chunks/aaBoundingBox.js";import"../chunks/DoubleArray.js";import"../chunks/OptimizedFeature.js";import"../chunks/OptimizedFeatureSet.js";import"../chunks/createFeatureId.js";import"../chunks/clippingUtils.js";import"../chunks/GridShader.js";import"../chunks/GraphShaderModule.js";import"../chunks/FramebufferObject.js";import"../chunks/ShaderBuilder.js";import"../chunks/utils26.js";import"../chunks/constants4.js";import"../chunks/CircularArray.js";import"../chunks/testSVGPremultipliedAlpha.js";import"../chunks/SymbolFader.js";import"../chunks/SymbolRepository.js";import"../chunks/constants3.js";import"../chunks/TileStrategy.js";import"../chunks/ScheduledQueueProcessor.js";import"../chunks/ReactiveMap.js";import"./Compass/CompassViewModel.js";import"../chunks/utils24.js";import"./support/GoTo.js";import"../chunks/goToUtils.js";import"../chunks/ZoomMomentumEstimator.js";import"../chunks/pbf.js";import"../chunks/FeatureCommandQueue.js";import"../chunks/UpdateTracking2D.js";import"../chunks/heatmapTextureUtils.js";import"../chunks/lengthUtils.js";import"../chunks/streamLayerUtils.js";import"../chunks/capabilities2.js";import"../chunks/QueueProcessor.js";import"../chunks/TexturedLineMeshWriter.js";import"../chunks/libtess.js";import"../chunks/TurboLine.js";import"../chunks/renderState.js";import"../chunks/glsl.js";import"../chunks/GraphicsView2D.js";import"../chunks/ComputedAttributeStorage.js";import"../chunks/diffUtils.js";import"../chunks/queryUtils.js";import"../chunks/projectionSupport.js";import"../chunks/json.js";import"../chunks/timeSupport.js";import"../rest/support/Query.js";import"../chunks/DataLayerSource.js";import"../layers/support/Field.js";import"../chunks/domains.js";import"../layers/support/CodedValueDomain.js";import"../layers/support/Domain.js";import"../layers/support/InheritedDomain.js";import"../layers/support/RangeDomain.js";import"../chunks/fieldType.js";import"../chunks/FullTextSearch.js";import"../chunks/spatialRelationships.js";import"../rest/support/StatisticDefinition.js";import"../time/TimeExtent.js";import"../chunks/timeUtils.js";import"../chunks/FeatureMetadata.js";import"../chunks/labelFormatUtils.js";import"../chunks/number.js";import"../chunks/labelUtils.js";import"../chunks/rbush.js";import"../chunks/quickselect.js";import"../chunks/ellipticArc7Utils.js";import"../chunks/dehydratedFeatures.js";import"../chunks/asyncUtils.js";import"../chunks/Overlay.js";import"../chunks/utils25.js";import"../chunks/grouping.js";import"../chunks/OverlayContainer.js";import"../chunks/utils27.js";import"../views/navigation/Navigation.js";import"../views/navigation/NavigationActionMap.js";import"../views/navigation/gamepad/GamepadSettings.js";import"../views/ui/DefaultUI.js";import"../views/ui/UI.js";import"../intl.js";import"../chunks/substitute.js";import"../chunks/messages.js";import"../chunks/modeUtils.js";import"./Attribution.js";import"./Attribution/AttributionViewModel.js";import"../chunks/accessibleHandler.js";import"../chunks/uuid.js";import"../chunks/jsxWidgetSupport.js";import"./Compass.js";import"./NavigationToggle.js";import"./NavigationToggle/NavigationToggleViewModel.js";import"./Zoom.js";import"./Zoom/ZoomViewModel.js";import"../chunks/css.js";import"./Slider/SliderViewModel.js";import"../chunks/videoUtils2.js";import"../layers/support/TelemetryData.js";import"../layers/support/VideoTimeExtent.js";import"../symbols/support/cimSymbolUtils.js";import"../chunks/utils8.js";import"../chunks/jsonUtils2.js";import"../chunks/gfxUtils.js";import"../chunks/LRUCache.js";import"../chunks/MemCache.js";import"../chunks/Symbol3DMaterial.js";import"../chunks/materialUtils.js";import"../chunks/opacityUtils.js";import"../chunks/typeUtils2.js";import"../symbols/CIMSymbol.js";import"../symbols/LabelSymbol3D.js";import"../symbols/Symbol3D.js";import"../chunks/collectionUtils.js";import"../portal/Portal.js";import"../portal/PortalGroup.js";import"../portal/PortalQueryParams.js";import"../portal/PortalQueryResult.js";import"../portal/PortalUser.js";import"../portal/PortalFolder.js";import"../symbols/ExtrudeSymbol3DLayer.js";import"../symbols/Symbol3DLayer.js";import"../chunks/utils3.js";import"../symbols/edges/Edges3D.js";import"../symbols/edges/SketchEdges3D.js";import"../symbols/edges/SolidEdges3D.js";import"../symbols/FillSymbol3DLayer.js";import"../symbols/patterns/LineStylePattern3D.js";import"../symbols/patterns/StylePattern3D.js";import"../chunks/utils4.js";import"../chunks/colors.js";import"../chunks/symbolLayerUtils3D.js";import"../symbols/IconSymbol3DLayer.js";import"../symbols/LineSymbol3DLayer.js";import"../symbols/LineStyleMarker3D.js";import"../symbols/ObjectSymbol3DLayer.js";import"../symbols/PathSymbol3DLayer.js";import"../symbols/TextSymbol3DLayer.js";import"../symbols/WaterSymbol3DLayer.js";import"../symbols/support/StyleOrigin.js";import"../chunks/Thumbnail.js";import"../chunks/calloutUtils.js";import"../symbols/callouts/Callout3D.js";import"../symbols/callouts/LineCallout3D.js";import"../symbols/support/Symbol3DVerticalOffset.js";import"../symbols/LineSymbol3D.js";import"../symbols/MeshSymbol3D.js";import"../symbols/PictureFillSymbol.js";import"../chunks/urlUtils.js";import"../symbols/PictureMarkerSymbol.js";import"../symbols/PointSymbol3D.js";import"../symbols/PolygonSymbol3D.js";import"../symbols/WebStyleSymbol.js";const g="esri-video-player",b={base:g,playerActions:`${g}__actions`,playerControls:`${g}__controls`,playerTimecode:`${g}__timecode`,playerToolbar:`${g}__toolbar`,progress:`${g}__progress`,settings:`${g}__settings`,settingsFlow:`${g}__settings-flow`,slider:`${g}__slider`,sliderProgressContainer:`${g}__slider-progress-container`,videoView:`${g}__video-view`},v="esri-metadata-table",f={table:v,data:`${v}__data`,emptyState:`${v}__empty-state`};function w({viewModel:e,messages:s}){const{metadata:t}=e;return t?h("calcite-block",{expanded:!0,heading:s.metadata},h("calcite-accordion",{appearance:"solid",selectionMode:"single"},h("calcite-accordion-item",{heading:s.missionInfo},h("div",{class:f.table},Object.keys(t.missionInfo).map(e=>[h("div",{class:f.data},e),h("div",{class:f.data},t.missionInfo[e])]))),h("calcite-accordion-item",{heading:s.platformInfo},h("div",{class:f.table},Object.keys(t.platformInfo).map(e=>[h("div",{class:f.data},e),h("div",{class:f.data},t.platformInfo[e])]))),h("calcite-accordion-item",{heading:s.frameInfo},h("div",{class:f.table},Object.keys(t.frameInfo).map(e=>[h("div",{class:f.data},e),h("div",{class:f.data},t.frameInfo[e])]))))):h("calcite-tile",{class:f.emptyState,description:s.metadataDescription,heading:s.metadataNotLoaded})}function S({viewModel:e,messages:s}){const{state:t,playing:i}=e,o="not-ready"===t||"waiting"===t,r=i?s.pause:s.play,l=h("calcite-action",{active:i,alignment:"center",bind:e,disabled:o,icon:i?"pause-f":"play-f",key:"play",onclick:i?e.pause:e.play,scale:"s",text:r,title:r}),n=s.reverse,c=h("calcite-action",{alignment:"center",bind:e,disabled:o,icon:"reverse-f",key:"reverse",onclick:e.seekBackward,scale:"s",text:n,title:n}),a=s.forward,m=h("calcite-action",{alignment:"center",bind:e,disabled:o,icon:"forward-f",key:"forward",onclick:e.seekForward,scale:"s",text:a,title:a}),p=s.beginning,u=h("calcite-action",{alignment:"center",bind:e,disabled:o,icon:"beginning-f",key:"beginning",onclick:e.seekToBeginning,scale:"s",text:p,title:p}),d=s.end,j=h("calcite-action",{alignment:"center",bind:e,disabled:o,icon:"end-f",key:"end",onclick:e.seekToEnding,scale:"s",text:d,title:d});return h("calcite-action-bar",{class:b.playerActions,expandDisabled:!0,layout:"horizontal",scale:"s"},[u,c,l,m,j])}const x=new y([255,127,0]),M={active:null,speed:"1x",quality:"Auto",color:x};let U=null;function D({viewModel:e,settings:s,messages:t}){const{state:i}=e,o="not-ready"===i||"waiting"===i,r=h("calcite-flow-item",{heading:t.playbackSpeed,key:"playback-speed",selected:"speed"===s.active,onCalciteFlowItemBack:()=>{s.active=null}},h("calcite-list",{label:t.playbackSpeed,selectionMode:"single-persist"},[{label:"0.25x",value:.25},{label:"0.5x",value:.5},{label:"1x",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}].map(({label:t,value:i})=>h("calcite-list-item",{key:t,label:t,onclick:()=>{s.speed=t,e.changePlaybackSpeed(i)},selected:t===s.speed})))),l=h("calcite-flow-item",{heading:t.quality,key:`Quality (${s.quality})`,selected:"quality"===s.active,onCalciteFlowItemBack:()=>{s.active=null}},h("calcite-list",{label:t.quality,selectionMode:"single-persist"},["Auto"].map(e=>h("calcite-list-item",{key:e,label:e,onclick:()=>{s.quality=e},selected:e===s.quality})))),n=h("calcite-flow-item",{heading:t.graphics,key:`Graphics (${s.color})`,selected:"color"===s.active,onCalciteFlowItemBack:()=>{s.active=null}},h("calcite-block",{expanded:!0,heading:t.color},h("calcite-color-picker",{channelsDisabled:!0,format:"hex",savedDisabled:!0,scale:"s",value:s.color?.toHex()??x.toHex(),onCalciteColorPickerChange:t=>{U=t.currentTarget.value?.toString(),s.color=U?new y(U):null,s.color&&e.changeGraphicsColor(s.color)}})));return h("div",{class:b.settings},h("calcite-popover",{autoClose:!0,label:t.settings,overlayPositioning:"fixed",placement:"top-end",pointerDisabled:!0,referenceElement:"settings-action",scale:"s"},h("calcite-flow",{class:b.settingsFlow,key:"root-flow"},h("calcite-flow-item",{closable:!1,heading:"Settings",key:"root-flow-item",selected:!s.active},h("calcite-list",{label:t.settings},h("calcite-list-item",{key:`Speed (${s.speed})`,label:t.speed,onclick:()=>{s.active="speed"}},h("div",{slot:"content-end"},h("calcite-chip",{label:s.speed,scale:"s"},s.speed)),h("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"})),h("calcite-list-item",{key:`Quality (${s.quality})`,label:t.quality,onclick:()=>{s.active="quality"}},h("div",{slot:"content-end"},h("calcite-chip",{label:s.quality,scale:"s"},s.quality)),h("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"})),h("calcite-list-item",{key:`Graphics (${s.color})`,label:t.graphics,onclick:()=>{s.active="color"}},h("calcite-color-picker-swatch",{color:s.color?.toString()??x.toString(),scale:"s",slot:"content-end"}),h("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"})))),"speed"===s.active?r:null,"quality"===s.active?l:null,"color"===s.active?n:null)),h("calcite-action",{alignment:"center",bind:e,disabled:o,icon:"sliders",id:"settings-action",key:"settings",scale:"s",slot:"trigger",text:t.settings}))}function V(e){return"none"===e.followingMode?"circle-disallowed":"follow-sensor"===e.followingMode?"zoom-to-object":"follow-frame"===e.followingMode?"follow":"video"}function C({viewModel:e,messages:s,settings:t,toggleMetadata:i}){const{state:o}=e,r="not-ready"===o||"waiting"===o,l=h("div",null,h("calcite-popover",{autoClose:!0,label:s.layers,overlayPositioning:"fixed",placement:"top-end",pointerDisabled:!0,referenceElement:"layers-action",scale:"s"},h("calcite-panel",{heading:s.layers},h("calcite-list",{label:s.layers,selectionMode:"multiple"},h("calcite-list-item",{label:s.sensor,onclick:()=>{e.toggleSensorDisplay()},selected:!!e.layer?.telemetryDisplay?.sensorLocation}),h("calcite-list-item",{label:s.sightLine,onclick:()=>{e.toggleSensorSightLineDisplay()},selected:!!e.layer?.telemetryDisplay?.lineOfSight}),h("calcite-list-item",{label:s.sensorTrail,onclick:()=>{e.toggleSensorTrailDisplay()},selected:!!e.layer?.telemetryDisplay?.sensorTrail}),h("calcite-list-item",{label:s.frameCenter,onclick:()=>{e.toggleFrameCenterDisplay()},selected:!!e.layer?.telemetryDisplay?.frameCenter}),h("calcite-list-item",{label:s.frameOutline,onclick:()=>{e.toggleFrameOutlineDisplay()},selected:!!e.layer?.telemetryDisplay?.frameOutline}),h("calcite-list-item",{label:s.frame,onclick:()=>{e.toggleFrameDisplay()},selected:!!e.layer?.telemetryDisplay?.frame})))),h("calcite-action",{alignment:"center",bind:e,disabled:r,icon:"layers",id:"layers-action",key:"layers",scale:"s",slot:"trigger",text:s.layers})),n=h("div",null,h("calcite-popover",{autoClose:!0,label:s.follow,overlayPositioning:"fixed",placement:"top-end",pointerDisabled:!0,referenceElement:"follow-action",scale:"s"},h("calcite-panel",{heading:s.follow},h("calcite-list",{label:s.follow,selectionMode:"single-persist"},h("calcite-list-item",{label:s.none,onclick:()=>{e.followingMode="none"}},h("calcite-icon",{icon:"circle-disallowed",scale:"s",slot:"content-start"})),h("calcite-list-item",{label:s.sensor,onclick:()=>{e.followingMode="follow-sensor"}},h("calcite-icon",{icon:"zoom-to-object",scale:"s",slot:"content-start"})),h("calcite-list-item",{label:s.frame,onclick:()=>{e.followingMode="follow-frame"}},h("calcite-icon",{icon:"follow",scale:"s",slot:"content-start"})),h("calcite-list-item",{label:s.video,onclick:()=>{e.followingMode="follow-both"},selected:!0},h("calcite-icon",{icon:"video",scale:"s",slot:"content-start"}))))),h("calcite-action",{alignment:"center",bind:e,disabled:r,icon:V(e),id:"follow-action",key:"follow",scale:"s",slot:"trigger",text:s.follow})),c=h(D,{messages:s,settings:t,viewModel:e}),a=h("calcite-action",{alignment:"center",bind:e,disabled:r,icon:"feature-details",key:"metadata",onclick:i,scale:"s",text:s.metadata});return h("calcite-action-bar",{class:b.playerControls,expandDisabled:!0,layout:"horizontal",scale:"s"},[l,n,c,a])}let T=class extends p{constructor(e,o){super(e,o),this._settings=t(M),this._metadataVisible=!1,this._slider=new m({visibleElements:{labels:!1,rangeLabels:!1},min:0,max:100,values:[0],thumbsConstrained:!1}),this.videoView=new a({container:document.createElement("div"),constraints:{rotationEnabled:!1}}),this.viewModel=new k,s(i.getLogger(this),"Video Player","arcgis-video-player",{version:"4.33"})}initialize(){this.addHandles([o(()=>this.viewModel.layer,()=>{this.videoView.layer=this.viewModel.layer},r),o(()=>this.view?.map,()=>{this.videoView.map=this.view?.map},r),this._slider.on(["thumb-change","thumb-drag"],({value:e})=>{const s=e*this.viewModel.duration/100;this.viewModel.seekTo(s)})])}loadDependencies(){return Promise.all([u({action:()=>import("../chunks/index5.js"),"action-bar":()=>import("../chunks/index15.js")}),Promise.all([u({action:()=>import("../chunks/index5.js"),"action-bar":()=>import("../chunks/index15.js"),panel:()=>import("../chunks/index25.js").then(e=>e.i),popover:()=>import("../chunks/index26.js").then(e=>e.i),list:()=>import("../chunks/index19.js"),"list-item":()=>import("../chunks/index18.js"),icon:()=>import("../chunks/index.js")}),u({action:()=>import("../chunks/index5.js"),flow:()=>import("../chunks/index32.js"),"flow-item":()=>import("../chunks/index33.js"),icon:()=>import("../chunks/index.js"),list:()=>import("../chunks/index19.js"),"list-item":()=>import("../chunks/index18.js"),popover:()=>import("../chunks/index26.js").then(e=>e.i),block:()=>import("../chunks/index29.js"),"color-picker":()=>import("../chunks/index37.js"),chip:()=>import("../chunks/index35.js"),"color-picker-swatch":()=>import("../chunks/index72.js").then(e=>e.x)})]),u({accordion:()=>import("../chunks/index56.js"),"accordion-item":()=>import("../chunks/index57.js"),block:()=>import("../chunks/index29.js"),tile:()=>import("../chunks/index70.js")}),u({progress:()=>import("../chunks/index60.js"),panel:()=>import("../chunks/index25.js").then(e=>e.i),scrim:()=>import("../chunks/index22.js")})])}get icon(){return"video-web"}set icon(e){this._overrideIfSome("icon",e)}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get rotationEnabled(){return this.videoView.constraints.rotationEnabled}set rotationEnabled(e){this.videoView.constraints.rotationEnabled=e,this.videoView.ui.components=e?[...this.videoView.ui.components,"compass"]:this.videoView.ui.components.filter(e=>"compass"!==e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get zoomEnabled(){return this.videoView.navigation.mouseWheelZoomEnabled}set zoomEnabled(e){this.videoView.navigation.mouseWheelZoomEnabled=e,this.videoView.ui.components=e?[...this.videoView.ui.components,"zoom"]:this.videoView.ui.components.filter(e=>"zoom"!==e)}render(){return h("div",{class:this.classes(b.base,d.widget)},h("calcite-panel",{heading:this.layer?.title||"Video Player"},this._renderLoadingScrim(),this._renderBuffering(),this._renderVideoSection(),this._renderActionBar(),this._renderMetadataSection()))}_renderLoadingScrim(){const{state:e}=this.viewModel;return this.videoView.ready?null:h("calcite-scrim",{loading:"error"!==e},"error"===e?this.messages.errorLoadingLayer:null)}_renderBuffering(){const{currentTime:e,buffered:s,duration:t}=this.viewModel,i=s/(t||1),o=e/(t||1);return this.viewModel.ended||i>o?null:h("calcite-progress",{type:"indeterminate"})}_renderVideoSection(){const{buffered:e,currentTime:s,duration:t}=this.viewModel,i=this.videoView.container;if(!i)return null;i.className=b.videoView;const o=e/(t||1),r=s/(t||1);return this._slider.values=[100*r],h("section",{afterCreate:L,bind:i},h("div",{class:b.sliderProgressContainer},h("progress",{class:b.progress,max:"1",value:`${o}`}),h("div",{class:b.slider},this._slider.render())))}_renderActionBar(){return h("div",{class:b.playerToolbar},h(S,{messages:this.messages,viewModel:this.viewModel}),h("div",{class:b.playerTimecode},_(this.viewModel.currentTime)," / ",_(this.viewModel.duration)),h(C,{messages:this.messages,settings:this._settings,toggleMetadata:()=>this._metadataVisible=!this._metadataVisible,viewModel:this.viewModel}))}_renderMetadataSection(){return this._metadataVisible?h(w,{messages:this.messages,viewModel:this.viewModel}):null}};function _(e){return isFinite(e)?c(1e3*Math.round(e),{minute:"2-digit",second:"2-digit"}):""}function L(e){e.prepend(this)}e([l()],T.prototype,"_settings",void 0),e([l()],T.prototype,"icon",null),e([l()],T.prototype,"layer",null),e([l(),j("esri/widgets/VideoPlayer/t9n/VideoPlayer")],T.prototype,"messages",void 0),e([l()],T.prototype,"rotationEnabled",null),e([l()],T.prototype,"videoView",void 0),e([l({type:k})],T.prototype,"viewModel",void 0),e([l()],T.prototype,"view",null),e([l()],T.prototype,"zoomEnabled",null),T=e([n("esri.widgets.VideoPlayer")],T);const P=T;export{P as default};
