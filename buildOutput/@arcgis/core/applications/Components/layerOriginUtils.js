/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{h as e,j as r,w as t}from"../../core/Accessor.js";import{y as i}from"../../chunks/layerUtils.js";import"../../core/lang.js";import"../../core/Handles.js";import"../../chunks/Logger.js";import"../../config.js";import"../../chunks/object.js";import"../../chunks/string.js";import"../../chunks/maybe.js";import"../../core/accessorSupport/decorators/subclass.js";import"../../chunks/Lifecycle.js";import"../../chunks/metadata.js";import"../../chunks/utils.js";import"../../chunks/handleUtils.js";import"../../chunks/tracking.js";import"../../chunks/ensureType.js";import"../../chunks/MapUtils.js";import"../../chunks/Warning.js";import"../../core/Error.js";import"../../chunks/get.js";import"../../chunks/ObjectPool.js";import"../../chunks/ObservableBase.js";import"../../core/accessorSupport/decorators/property.js";import"../../chunks/watch.js";import"../../core/scheduling.js";import"../../chunks/nextTick.js";import"../../chunks/PooledArray.js";import"../../core/promiseUtils.js";import"../../chunks/events.js";import"../../chunks/SetUtils.js";import"../../chunks/SimpleTrackingTarget.js";import"../../kernel.js";import"../../core/urlUtils.js";import"../../chunks/jsonUtils.js";import"../../request.js";import"../../chunks/persistableUrlUtils.js";import"../../core/Collection.js";import"../../chunks/tslib.es6.js";import"../../core/Evented.js";import"../../chunks/shared.js";import"../../chunks/SimpleObservable.js";import"../../layers/catalog/catalogUtils.js";import"../../core/reactiveUtils.js";const s=e=>"feature"===e.type&&!e.isTable,o={feature:{predicate:i,propertyGroups:[{id:"attribute-table-template",properties:["attributeTableTemplate"]},{id:"blend-mode",properties:["blendMode"],predicate:s},{id:"charts",properties:["charts"]},{id:"custom-parameters",properties:["customParameters"]},{id:"definition-expression",properties:["definitionExpression"]},{id:"display-filter",properties:["displayFilterInfo","displayFilterEnabled"],predicate:s},{id:"effect",properties:["effect","featureEffect"],predicate:s},{id:"feature-reduction",properties:["featureReduction"],predicate:s},{id:"floor-info",properties:["floorInfo"],predicate:s},{id:"form-template",properties:["formTemplate"]},{id:"labels",properties:["labelingInfo","labelsVisible"],predicate:s},{id:"legend-enabled",properties:["legendEnabled"],predicate:s},{id:"opacity",properties:["opacity"],predicate:s},{id:"order-by",properties:["orderBy"],predicate:s},{id:"popup",properties:["popupTemplate","popupEnabled"]},{id:"refresh-interval",properties:["refreshInterval"]},{id:"renderer",properties:["renderer"],predicate:s},{id:"scale-range",properties:["minScale","maxScale"],predicate:s},{id:"use-view-time",properties:["useViewTime"]}]}};function p(e){const r=o[e.type];return r?.propertyGroups.filter(r=>!r.predicate||r.predicate(e))??[]}function n(e){const r=p(e),t=[];for(const e of r)t.push(...e.properties);return t}function c(r,i,s){const o=t(s);r.revert(i,e(o-1))}function a(e,i,s){const o=t(s),p=e,n=p.originIdOf(i);n<o&&1!==n&&p.updateOrigin(i,r(o))}function u(e){const r=o[e.type];return!(!r||r.predicate&&!r.predicate(e))}function d(e){return u(e)}function l(e,r){return function(e,r){if(!u(e))return;const t=n(e);for(const i of t)c(e,i,r)}(e,r)}function m(e,r){return function(e,r){if(!u(e))return;const t=n(e);for(const i of t)a(e,i,r)}(e,r)}function f(e,r){return function(e,r){if(!u(e))return;const i=p(e).map(i=>function(e,r,i){const s=t(i),{id:o,properties:p}=r,n=p.map(r=>function(e,r,t){return e.originIdOf(r)<t?"source":"overridden"}(e,r,s)).reduce((e,r)=>e===r?e:"overridden");return{id:o,properties:[...p],status:n}}(e,i,r));return{propertyGroupOriginInfos:i,status:i.map(e=>e.status).reduce((e,r)=>e===r?e:"mixed")}}(e,r)}export{l as clearOverrides,m as disconnectFromSource,f as getLayerOriginInfo,d as isSupportedLayer};
