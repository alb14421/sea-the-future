// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.34/esri/copyright.txt for details.
if("undefined"!=typeof window&&"undefined"!=typeof navigator&&window.document&&(window.dojoConfig||(window.dojoConfig={}),!window.dojoConfig.hasOwnProperty("baseUrl"))){const o=window.document.currentScript.src;let d;d=o.endsWith("/init.js")?o.slice(0,o.lastIndexOf("/"))+"/dojo":o.endsWith("/dojo/dojo.js")?o.slice(0,o.lastIndexOf("/")):o+(o.endsWith("/")?"dojo":"/dojo"),window.dojoConfig.baseUrl=d}
//>>built
!function(e,t){var r=function(){return void 0!==f&&"function"!=typeof f?f:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this}(),o=function(){},s=function(e){for(var t in e)return 0;return 1},i={}.toString,n=function(e){return"[object Function]"==i.call(e)},a=function(e){return"[object String]"==i.call(e)},l=function(e){return"[object Array]"==i.call(e)},c=function(e,t){if(e)for(var r=0;r<e.length;)t(e[r++])},u=function(e,t){for(var r in t)e[r]=t[r];return e},p=function(e,t){return u(new Error(e),{src:"dojoLoader",info:t})},d=1,h=function(){return"_"+d++},y=function(e,t,r){return se(e,t,r,0,y)},f=r,m=f.document,g=m&&m.createElement("DiV"),b=y.has=function(e){return n(_[e])?_[e]=_[e](f,m,g):_[e]},_=b.cache=t.hasCache;for(var S in n(e)&&(e=e(r)),b.add=function(e,t,r,o){return(void 0===_[e]||o)&&(_[e]=t),r&&b(e)},b.add("host-webworker","undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope),b("host-webworker")&&(u(t.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0}),t.loaderPatch={injectUrl:function(e,t){try{importScripts(e),t()}catch(t){console.info("failed to load resource ("+e+")"),console.error(t)}}}),e.has)b.add(S,e.has[S],0,1);var v,w=0,x="sync",T=[],M=0,I=o,O=o;if(y.isXdUrl=o,y.initSyncLoader=function(e,t,r){return M||(M=e,I=t,O=r),{sync:x,requested:1,arrived:2,nonmodule:3,executing:4,executed:5,syncExecStack:T,modules:G,execQ:ne,getModule:_e,injectModule:Ve,setArrived:ue,signal:R,finishExec:Ce,execModule:Ee,dojoRequirePlugin:M,getLegacyMode:function(){return w},guardCheckComplete:Fe}},b("dom")||b("host-webworker")){var P=location.protocol,k=location.host;if(y.isXdUrl=function(e){if(/^\./.test(e))return!1;if(/^\/\//.test(e))return!0;var t=e.match(/^([^\/\:]+\:)\/+([^\/]+)/);return t&&(t[1]!=P||k&&t[2]!=k)},b.add("dojo-force-activex-xhr",b("host-browser")&&!m.addEventListener&&"file:"==window.location.protocol),b("dojo-force-activex-xhr")){for(var C,L=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],E=0;E<3;)try{if(C=L[E++],new ActiveXObject(C))break}catch(e){}v=function(){return new ActiveXObject(C)}}else v=function(){return new XMLHttpRequest};y.getXhr=v,b.add("dojo-gettext-api",1),y.getText=function(e,t,r){var o=v();if(o.open("GET",je(e),!1),o.send(null),200!=o.status&&(location.host||o.status))throw p("xhrFailed",o.status);return r&&r(o.responseText,t),o.responseText}}y.eval=function(e,t){};var A={},F="error",R=y.signal=function(e,t){var r=A[e];c(r&&r.slice(0),function(e){e.apply(null,l(t)?t:[t])})},j=y.on=function(e,t){var r=A[e]||(A[e]=[]);return r.push(t),{remove:function(){for(var e=0;e<r.length;e++)if(r[e]===t)return void r.splice(e,1)}}},N=[],D={},U=[],V={},q=y.map={},z=[],G={},B="",$={},J="url:",W={},H={},Z=0;if(!b("foreign-loader"))var Q=function(e,t){var r,o,s,i,n;for(r in t=!1!==t,W)o=W[r],(s=r.match(/^url\:(.+)/))?$[J+ve(s[1],e)]=o:"*now"==r?i=o:"*noref"!=r&&(n=me(r,e,!0),$[n.mid]=$[J+n.url]=o);i&&i(ie(e)),t&&(W={})};var K,Y=function(e){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(e){return"\\"+e})},X=function(e,t){for(var r in t.splice(0,t.length),e)t.push([r,e[r],new RegExp("^"+Y(r)+"(/|$)"),r.length]);return t.sort(function(e,t){return t[3]-e[3]}),t},ee=function(e){var t=e.name;t||(e={name:t=e}),(e=u({main:"main"},e)).location=e.location?e.location:t,e.packageMap&&(q[t]=e.packageMap),e.main.indexOf("./")||(e.main=e.main.substring(2)),V[t]=e},te=[],re=function(e,t,r){for(var o in e){if("waitSeconds"==o&&(y.waitms=1e3*(e[o]||0)),"cacheBust"==o&&(B=e[o]?a(e[o])?e[o]:(new Date).getTime()+"":""),"baseUrl"!=o&&"combo"!=o||(y[o]=e[o]),"async"==o){var s=e[o];y.legacyMode=w=a(s)&&/sync|legacyAsync/.test(s)?s:!s&&x,y.async=!w}e[o]!==_&&(y.rawConfig[o]=e[o],"has"!=o&&b.add("config-"+o,e[o],0,t))}for(o in y.baseUrl||(y.baseUrl="./"),/\/$/.test(y.baseUrl)||(y.baseUrl+="/"),e.has)b.add(o,e.has[o],0,t);for(var i in c(e.packages,ee),e.packagePaths)c(e.packagePaths[i],function(e){var t=i+"/"+e;a(e)&&(e={name:e}),e.location=t,ee(e)});if(X(u(q,e.map),z),c(z,function(e){e[1]=X(e[1],[]),"*"==e[0]&&(z.star=e)}),X(u(D,e.paths),U),function(e,t){c(e,function(e){t.push([a(e[0])?new RegExp("^"+Y(e[0])+"$"):e[0],e[1]])})}(e.aliases,N),!b("foreign-loader")){if(t)te.push({config:e.config});else for(o in e.config){var n=_e(o,r);n.config=u(n.config||{},e.config[o])}e.cache&&(Q(),W=e.cache,Q(0,!!e.cache["*noref"]))}R("config",[e,y.rawConfig])};if(y.rawConfig={},re(t,1),re(e,1),re(H,1),!b("foreign-loader"))var oe=function(e){Fe(function(){c(e.deps,Ve)})},se=function(e,t,r,s,i){var n,c;if(a(e)){if((n=_e(e,s,!0))&&n.executed)return n.result;throw p("undefinedModule",e)}if(l(e)||(re(e,0,s),e=t,t=r),l(e))if(e.length){c="require*"+h();for(var d,f=[],m=0;m<e.length;)d=e[m++],f.push(_e(d,s));n=u(ye("",c,0,""),{injected:2,deps:f,def:t||o,require:s?s.require:y,gc:1}),G[n.mid]=n,oe(n);var g=Ae&&w!=x;Fe(function(){Ee(n,g)}),n.executed||ne.push(n),Re()}else t&&t();return i},ie=function(e){if(!e)return y;var t=e.require;return t||(t=function(r,o,s){return se(r,o,s,e,t)},e.require=u(t,y),t.module=e,t.toUrl=function(t){return ve(t,e)},t.toAbsMid=function(t){return Se(t,e)},t.syncLoadNls=function(t){var r=me(t,e),o=G[r.mid];return o&&o.executed||(De=$[r.mid]||$[J+r.url])&&(Ue(De),o=G[r.mid]),o&&o.executed&&o.result}),t},ne=[],ae=[],le={},ce=function(e){e.injected=1,le[e.mid]=1,e.url&&(le[e.url]=e.pack||1),Be()},ue=function(e){e.injected=2,delete le[e.mid],e.url&&delete le[e.url],s(le)&&(Ge(),"xd"==w&&(w=x))},pe=y.idle=function(){return!ae.length&&s(le)&&!ne.length&&!Ae};var de=function(e,t){if(t)for(var r=0;r<t.length;r++)if(t[r][2].test(e))return t[r];return 0},he=function(e){var t,r,o=[];for(e=e.replace(/\\/g,"/").split("/");e.length;)".."==(t=e.shift())&&o.length&&".."!=r?(o.pop(),r=o[o.length-1]):"."!=t&&o.push(r=t);return o.join("/")},ye=function(e,t,r,o){var s=y.isXdUrl(o);return{pid:e,mid:t,pack:r,url:o,executed:0,def:0,isXd:s,isAmd:!!(s||V[e]&&V[e].isAmd)}},fe=function(e,t,r,o,s,i,a,l,u,d){var h,y,f,m,g,b,_;if(_=/^\./.test(e),/(^\/)|(\:)|(\.js$)/.test(e)||_&&!t)return ye(0,e,0,e);if(e=he(_?t.mid+"/../"+e:e),/^\./.test(e))throw p("irrationalPath",e);d||_||!i.star||(m=de(e,i.star[1])),!m&&t&&(m=(m=de(t.mid,i))&&de(e,m[1])),m&&(e=m[1]+e.substring(m[3])),(y=r[h=(K=e.match(/^([^\/]+)(\/(.+))?$/))?K[1]:""])?e=h+"/"+(f=K[3]||y.main):h="";var S=0;return c(l,function(t){var r=e.match(t[0]);r&&r.length>0&&(S=n(t[1])?e.replace(t[0],t[1]):t[1])}),S?fe(S,0,r,o,s,i,a,l,u):(b=o[e])?u?ye(b.pid,b.mid,b.pack,b.url):o[e]:(g=(m=de(e,a))?m[1]+e.substring(m[3]):h?("/"===y.location.slice(-1)?y.location.slice(0,-1):y.location)+"/"+f:e,/(^\/)|(\:)/.test(g)||(g=s+g),ye(h,e,y,he(g+=".js")))},me=function(e,t,r){return fe(e,t,V,G,y.baseUrl,z,U,N,void 0,r)};if(!b("foreign-loader"))var ge=function(e,t,r){return e.normalize?e.normalize(t,function(e){return Se(e,r)}):Se(t,r)},be=0,_e=function(e,t,r){var o,s,i,n;return(o=e.match(/^(.+?)\!(.*)$/))?(s=_e(o[1],t,r),w!=x||s.executed||(Ve(s),2!==s.injected||s.executed||Fe(function(){Ee(s)}),s.executed?ke(s):ne.unshift(s)),5!==s.executed||s.load||ke(s),s.load?(i=ge(s,o[2],t),e=s.mid+"!"+(s.dynamic?++be+"!":"")+i):(i=o[2],e=s.mid+"!"+ ++be+"!waitingForPlugin"),n={plugin:s,mid:e,req:ie(t),prid:i}):n=me(e,t),G[n.mid]||!r&&(G[n.mid]=n)};var Se=y.toAbsMid=function(e,t){return me(e,t).mid},ve=y.toUrl=function(e,t){var r=me(e+"/x",t),o=r.url;return je(0===r.pid?e:o.substring(0,o.length-5))};if(!b("foreign-loader"))var we={injected:2,executed:5,def:3,result:3},xe=function(e){return G[e]=u({mid:e},we)},Te=xe("require"),Me=xe("exports"),Ie=xe("module"),Oe={},Pe=0,ke=function(e){var t=e.result;return e.dynamic=t.dynamic,e.normalize=t.normalize,e.load=t.load,e},Ce=function(e){for(y.trace("loader-finish-exec",[e.mid]),e.executed=5,e.defOrder=Pe++,c(e.provides,function(e){e()}),e.loadQ&&(ke(e),function(e){var t={};c(e.loadQ,function(r){var o=ge(e,r.prid,r.req.module),s=e.dynamic?r.mid.replace(/waitingForPlugin$/,o):e.mid+"!"+o,i=u(u({},r),{mid:s,prid:o,injected:0});G[s]&&G[s].injected||Ne(G[s]=i),t[r.mid]=G[s],ue(r),delete G[r.mid]}),e.loadQ=0;var r=function(e){for(var r,o=e.deps||[],s=0;s<o.length;s++)(r=t[o[s].mid])&&(o[s]=r)};for(var o in G)r(G[o]);c(ne,r)}(e)),E=0;E<ne.length;)ne[E]===e?ne.splice(E,1):E++;/^require\*/.test(e.mid)&&delete G[e.mid]},Le=[],Ee=function(e,t){if(4===e.executed)return y.trace("loader-circular-dependency",[Le.concat(e.mid).join("->")]),!e.def||t?Oe:e.cjs&&e.cjs.exports;if(!e.executed){if(!e.def)return Oe;var r,o,s=e.mid,a=e.deps||[],l=[],c=0;for(e.executed=4;r=a[c++];){if((o=r===Te?ie(e):r===Me?e.cjs.exports:r===Ie?e.cjs:Ee(r,t))===Oe)return e.executed=0,y.trace("loader-exec-module",["abort",s]),Oe;l.push(o)}!function(e,t){y.trace("loader-run-factory",[e.mid]);var r,o,s=e.def;T.unshift(e),r=n(s)||(o=s,"[object AsyncFunction]"==i.call(o))?s.apply(null,t):s,e.result=void 0===r&&e.cjs?e.cjs.exports:r,T.shift(e)}(e,l),Ce(e)}return e.result},Ae=0,Fe=function(e){try{Ae++,e()}catch(e){throw e}finally{Ae--}pe()&&R("idle",[])},Re=function(){Ae||Fe(function(){I();for(var e,t,r=0;r<ne.length;)e=Pe,t=ne[r],Ee(t),e!=Pe?(I(),r=0):r++})};var je="function"==typeof e.fixupUrl?e.fixupUrl:function(e){return(e+="")+(B?(/\?/.test(e)?"&":"?")+B:"")};void 0===b("dojo-loader-eval-hint-url")&&b.add("dojo-loader-eval-hint-url",1);var Ne=function(e){var t=e.plugin;5!==t.executed||t.load||ke(t),t.load?t.load(e.prid,e.req,function(t){e.result=t,ue(e),Ce(e),Re()}):t.loadQ?t.loadQ.push(e):(t.loadQ=[e],ne.unshift(t),Ve(t))},De=0,Ue=function(e,t){b("config-stripStrict")&&(e=e.replace(/(["'])use strict\1/g,"")),e===De?De.call(null):y.eval(e,b("dojo-loader-eval-hint-url")?t.url:t.mid)},Ve=function(e){var t=e.mid,r=e.url;if(!(e.executed||e.injected||le[t]||e.url&&(e.pack&&le[e.url]===e.pack||1==le[e.url])))if(ce(e),e.plugin)Ne(e);else{var o=function(){if(ze(e),2!==e.injected){if(b("dojo-enforceDefine"))return void R(F,p("noDefine",e));ue(e),u(e,we),y.trace("loader-define-nonmodule",[e.url])}w?!T.length&&Re():Re()};if(De=$[t]||$[J+e.url])return y.trace("loader-inject",["cache",e.mid,r]),Ue(De,e),void o();if(w)if(e.isXd)w==x&&(w="xd");else if(!e.isAmd||w==x)return y.trace("loader-inject",["xhr",e.mid,r,w!=x]),void y.getText(r,w!=x,function(s){if(w==x){if(T.unshift(e),Ue(s,e),T.shift(),ze(e),e.cjs||(ue(e),Ce(e)),e.finish){var i=t+"*finish",n=e.finish;delete e.finish,We(i,["dojo",("dojo/require!"+n.join(",")).replace(/\./g,"/")],function(e){c(n,function(t){e.require(t)})}),ne.unshift(_e(i))}o()}else(s=O(e,s))?(Ue(s,e),o()):y.injectUrl(je(r),o,e)});y.trace("loader-inject",["script",e.mid,r]),y.injectUrl(je(r),o,e)}},qe=function(e,t,r){y.trace("loader-define-module",[e.mid,t]);var o=e.mid;if(2===e.injected)return R(F,p("multipleDefine",e)),e;u(e,{deps:t,def:r,cjs:{id:e.mid,uri:e.url,exports:e.result={},setExports:function(t){e.cjs.exports=t},config:function(){return e.config}}});for(var s=0;t[s];s++)t[s]=_e(t[s],e);return w&&!le[o]&&(oe(e),ne.push(e),Re()),ue(e),n(r)||t.length||(e.result=r,Ce(e)),e},ze=function(e,t){for(var r,o,s=[];ae.length;)o=ae.shift(),t&&(o[0]=t.shift()),r=o[0]&&_e(o[0])||e,s.push([r,o[1],o[2]]);Q(e),c(s,function(e){oe(qe.apply(null,e))})},Ge=o,Be=o;if(b("dom"),b("dom")){var $e=function(e,t,r,o){return e.addEventListener(t,o,!1),function(){e.removeEventListener(t,o,!1)}},Je=$e(window,"load",0,function(){y.pageLoaded=1;try{"complete"!=m.readyState&&(m.readyState="complete")}catch(e){}Je()});Z||(Z=m.currentScript),y.injectUrl=function(e,t,r){var o=r.node=m.createElement("script"),s=$e(o,"load",0,function(e){var r=(e=e||window.event).target||e.srcElement;("load"===e.type||/complete|loaded/.test(r.readyState))&&(s(),i(),t&&t())}),i=$e(o,"error",0,function(t){s(),i(),R(F,p("scriptError: "+e,[e,t]))});return o.type="text/javascript",o.charset="utf-8",o.src=e,Z.parentNode.insertBefore(o,Z),o}}if(y.log=o,y.trace=o,b("foreign-loader"))We=o;else{var We=function(e,t,r){var o=arguments.length,s=["require","exports","module"],i=[0,e,t];1==o?i=[0,n(e)?s:[],e]:2==o&&a(e)?i=[e,n(t)?s:[],t]:3==o&&(i=[e,t,r]),y.trace("loader-define",i.slice(0,2));var l=i[0]&&_e(i[0]);l&&!le[l.mid]?oe(qe(l,i[1],i[2])):ae.push(i)};We.amd={vendor:"dojotoolkit.org"}}if(u(u(y,t.loaderPatch),e.loaderPatch),j(F,function(e){try{if(console.error(e),e instanceof Error){for(var t in e)console.log(t+":",e[t]);console.log(".")}}catch(e){}}),u(y,{uid:h,cache:$,packs:V}),!f.define&&(f.define=We,f.require=y,!b("foreign-loader"))){c(te,function(e){re(e)});var He=H.deps||e.deps||t.deps,Ze=H.callback||e.callback||t.callback;y.boot=He||Ze?[He||[],Ze]:0}}(function(e){return e.dojoConfig||e.djConfig||e.require||{}},{async:1,deps:["esri/kernel"],hasCache:{"config-selectorEngine":"lite","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../esri",name:"esri"}]}),require({cache:{"esri/Map":function(){define(["./chunks/tslib.es6","./Basemap","./Ground","./core/CollectionFlattener","./core/Evented","./core/maybe","./core/accessorSupport/decorators/property","./core/accessorSupport/decorators/cast","./core/has","./core/RandomLCG","./core/accessorSupport/decorators/subclass","./effects/FocusAreas","./layers/support/editableLayers","./support/basemapEnsureType","./support/collectionUtils","./support/groundUtils","./support/LayersMixin","./support/TablesMixin"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g){"use strict";let b=class extends(g.TablesMixin(m.LayersMixin(s.EventedAccessor))){constructor(e){super(e),this.allLayers=new o({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:e=>"layers"in e?e.layers:null}),this.focusAreas=new p,this.allTables=y.createFlattenedTablesCollection(this),this.basemap=null,this.editableLayers=new o({getCollections:()=>[this.allLayers],itemFilterFunction:d.isEditableLayer}),this.ground=new r,this._basemapCache=h.createCache()}destroy(){h.destroyCache(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=i.destroyMaybe(this.basemap),i.destroyMaybe(this.ground),this._set("ground",null)}castBasemap(e){return h.basemapEnsureType(e,this._basemapCache)}castGround(e){return f.ensureType(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};return e.__decorate([n.property({readOnly:!0,dependsOn:[]})],b.prototype,"allLayers",void 0),e.__decorate([n.property({type:p,nonNullable:!0,json:{write:{overridePolicy:e=>({enabled:e.areas.length>0,ignoreOrigin:!0})}}})],b.prototype,"focusAreas",void 0),e.__decorate([n.property({readOnly:!0})],b.prototype,"allTables",void 0),e.__decorate([n.property({type:t,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],b.prototype,"basemap",void 0),e.__decorate([a.cast("basemap")],b.prototype,"castBasemap",null),e.__decorate([n.property({readOnly:!0})],b.prototype,"editableLayers",void 0),e.__decorate([n.property({type:r,nonNullable:!0})],b.prototype,"ground",void 0),e.__decorate([a.cast("ground")],b.prototype,"castGround",null),e.__decorate([n.property()],b.prototype,"undoRedo",void 0),b=e.__decorate([u.subclass("esri.Map")],b),b})},"esri/chunks/tslib.es6":function(){define(["exports"],function(e){"use strict";var t="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var o=new Error(r);return o.name="SuppressedError",o.error=e,o.suppressed=t,o};e.__addDisposableResource=function(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var o,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=t[Symbol.asyncDispose]}if(void 0===o){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=t[Symbol.dispose],r&&(s=o)}if("function"!=typeof o)throw new TypeError("Object not disposable.");s&&(o=function(){try{s.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:o,async:r})}else r&&e.stack.push({async:!0});return t},e.__awaiter=function(e,t,r,o){return new(r||(r=Promise))(function(s,i){function n(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(n,a)}l((o=o.apply(e,t||[])).next())})},e.__decorate=function(e,t,r,o){var s,i=arguments.length,n=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},e.__disposeResources=function(e){function r(r){e.error=e.hasError?new t(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}var o,s=0;return function t(){for(;o=e.stack.pop();)try{if(!o.async&&1===s)return s=0,e.stack.push(o),Promise.resolve().then(t);if(o.dispose){var i=o.dispose.call(o.value);if(o.async)return s|=2,Promise.resolve(i).then(t,function(e){return r(e),t()})}else s|=1}catch(e){r(e)}if(1===s)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()},e.__param=function(e,t){return function(r,o){t(r,o,e)}}})},"esri/Basemap":function(){define(["require","./chunks/tslib.es6","./config","./request","./core/Collection","./core/collectionUtils","./core/JSONSupport","./core/lang","./core/Loadable","./core/loadAll","./core/Logger","./core/maybe","./core/promiseUtils","./core/urlUtils","./core/accessorSupport/decorators/property","./core/has","./core/accessorSupport/decorators/subclass","./core/accessorSupport/decorators/writer","./geometry/SpatialReference","./portal/Portal","./portal/PortalItem","./support/basemapDefinitions","./support/BasemapStyle","./webdoc/support/writeUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b,_,S,v,w,x){"use strict";var T;let M=0,I=T=class extends(n.JSONSupportMixin(l.Loadable)){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+M++,this.baseLayers=new s,this.referenceLayers=new s;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"===e.type&&u.getLogger(this).error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=e=>{e.parent=null};this.addHandles([this.baseLayers.on("after-add",e=>t(e.item)),this.referenceLayers.on("after-add",e=>t(e.item)),this.baseLayers.on("after-remove",e=>r(e.item)),this.referenceLayers.on("after-remove",e=>r(e.item))])}initialize(){this.when().catch(e=>{u.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const t of e)t.destroyed||t.destroy();const t=this.referenceLayers.toArray();for(const e of t)e.destroyed||e.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=p.destroyMaybe(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",i.referenceSetter(e,this._get("baseLayers")))}_writeBaseLayers(e,t,r){const o=[];e?(r={...r,layerContainerType:"basemap"},this.baseLayers.forEach(e=>{const t=x.getLayerJSON(e,r.webmap?r.webmap.getLayerJSONFromResourceInfo(e):null,r);null!=t&&o.push(t)}),this.referenceLayers.forEach(e=>{const t=x.getLayerJSON(e,r.webmap?r.webmap.getLayerJSONFromResourceInfo(e):null,r);null!=t&&("scene"!==e.type&&(t.isReference=!0),o.push(t))}),t.baseMapLayers=o):t.baseMapLayers=o}get loaded(){return super.loaded}set referenceLayers(e){this._set("referenceLayers",i.referenceSetter(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return c.loadAll(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(e=>a.isClonable(e)?e.clone():e),referenceLayers:this.referenceLayers.map(e=>a.isClonable(e)?e.clone():e)};return this.loaded&&(e.loadStatus="loaded"),new T({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t?.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(e=>{const t=a.clone(e);return t.url&&h.isProtocolRelative(t.url)&&(t.url=`https:${t.url}`),t.templateUrl&&h.isProtocolRelative(t.templateUrl)&&(t.templateUrl=`https:${t.templateUrl}`),t})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:r,style:o}=this;d.throwIfAborted(e);const s=[];if(t){const r=t.context?t.context.url:null;if(s.push(this._loadLayersFromJSON(t.data,r,e)),t.data.id&&!t.data.title){const e=t.data.id;s.push(v.getBasemapTitle(e).then(e=>{e&&this.read({title:e},t.context)}))}}else r?s.push(this._loadFromItem(r,e)):o&&s.push(this._loadFromStylesService(o,e));await Promise.all(s)}async _loadLayersFromJSON(t,r,o){const s=this.resourceInfo?.context,i=this.portalItem?.portal||s?.portal||null,n=P[s?.origin||""]??"web-map",{populateOperationalLayers:a}=await new Promise((t,r)=>e(["./layers/support/layersCreator"],t,r)),l=[];if(d.throwIfAborted(o),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){const e={context:{...s,origin:n,url:r,portal:i,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},o=e=>"web-scene"===n&&"ArcGISSceneServiceLayer"===e.layerType||e.isReference,c=a(this.baseLayers,t.baseMapLayers.filter(e=>!o(e)),e);l.push(c);const u=a(this.referenceLayers,t.baseMapLayers.filter(o),e);l.push(u)}await Promise.allSettled(l)}async _loadFromItem(e,t){const r=await e.load(t),o=await r.fetchData("json",t),s=h.urlToObject(e.itemUrl??"");return this._set("resourceInfo",{data:o.baseMap??{},context:{origin:O[e.type||""]??"web-map",portal:e.portal||_.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:o.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||_.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,t)}async _loadFromStylesService(e,t){const s=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,i=`${s}/styles/${e.id}/self`,n=`${s}/webmaps/${e.id}`,a=e.apiKey??r.apiKeys.basemapStyles,[l,c]=await Promise.all([(await o(i,{query:{token:a},signal:t?.signal})).data,(await o(n,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:a},signal:t?.signal})).data]);this.thumbnailUrl??=l.thumbnailUrl;const u=h.urlToObject(n);if(this._set("resourceInfo",{data:c.baseMap??{},context:{origin:"web-map",url:u}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:c.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,u,t),a)for(const e of[...this.baseLayers,...this.referenceLayers])"apiKey"in e&&(e.apiKey=a)}static fromId(e){const t=v.esriBasemapDefinitions[e];return t?t.itemId?new T({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):T.fromJSON(t,t.is3d?{origin:"web-scene",portal:new _({url:"https://www.arcgis.com"})}:{origin:"web-map"}):null}};t.__decorate([y.property({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,r,o){this._writeBaseLayers(e,t,o)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:s}},writer(e,t,r,o){this._writeBaseLayers(e,t,o)}}}}}})],I.prototype,"baseLayers",null),t.__decorate([y.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],I.prototype,"id",void 0),t.__decorate([y.property({type:S})],I.prototype,"portalItem",void 0),t.__decorate([y.property()],I.prototype,"referenceLayers",null),t.__decorate([y.property({readOnly:!0})],I.prototype,"resourceInfo",void 0),t.__decorate([y.property({type:b})],I.prototype,"spatialReference",void 0),t.__decorate([y.property({type:w})],I.prototype,"style",void 0),t.__decorate([y.property()],I.prototype,"thumbnailUrl",void 0),t.__decorate([y.property({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],I.prototype,"title",void 0),t.__decorate([g.writer("title")],I.prototype,"writeTitle",null),I=T=t.__decorate([m.subclass("esri.Basemap")],I);const O={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},P={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"};return I})},"esri/config":function(){define(["module","./core/has","./core/object"],function(e,t,r){"use strict";const o={apiKey:void 0,apiKeys:{scopes:[]},applicationName:"",applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(r.deepMerge(o,globalThis.esriConfig,!0),delete o.has),!o.assetsPath){{const t=new URL(e.uri,document.baseURI).href;o.assetsPath=t.slice(0,t.lastIndexOf("esri/"))}o.defaultAssetsPath=o.assetsPath}return o})},"esri/core/has":function(){define(function(){"use strict";let e;const t=globalThis;function r(r){return"function"==typeof e[r]?e[r]=e[r](t):e[r]}return e=t.dojoConfig?.has||t.esriConfig?.has?{...t.dojoConfig?.has,...t.esriConfig?.has}:{},r.add=(t,o,s,i)=>{(i||void 0===e[t])&&(e[t]=o),s&&r(t)},r.cache=e,r.add("big-integer-warning-enabled",!0),r.add("esri-deprecation-warnings",!0),r.add("esri-tests-disable-screenshots",!1),r.add("esri-tests-use-full-window",!1),r.add("esri-tests-post-to-influx",!0),r.add("esri-cim-animations-enable-status","enabled"),r.add("esri-cim-animations-spotlight",!1),r.add("esri-cim-animations-freeze-time",!1),(()=>{r.add("host-webworker",void 0!==t.WorkerGlobalScope&&self instanceof t.WorkerGlobalScope);const e="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(r.add("host-browser",e),r.add("dom",e),r("host-browser")){const e=navigator,t=e.userAgent,o=e.appVersion,s=parseFloat(o);if(r.add("edge",parseFloat(t.split("Edge/")[1])||void 0),r.add("webkit",!r("edge")&&parseFloat(t.split("WebKit/")[1])||void 0),r.add("chrome",!r("edge")&&parseFloat(t.split("Chrome/")[1])||void 0),r.add("safari",!o.includes("Safari")||r("chrome")||r("edge")?void 0:parseFloat(o.split("Version/")[1])),r.add("mac",o.includes("Macintosh")),/(iPhone|iPod|iPad)/.test(t)){const e=RegExp.$1.replace(/P/,"p"),o=/OS ([\d_]+)/.test(t)?RegExp.$1:"1",s=parseFloat(o.replace(/_/,".").replaceAll("_",""));r.add(e,s),r.add("ios",s)}r("webkit")||(t.includes("Gecko")&&!r("edge")&&r.add("mozilla",s),r("mozilla")&&r.add("ff",parseFloat(t.split("Firefox/")[1]||t.split("Minefield/")[1])||void 0))}})(),(()=>{if(t.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),o=/iPhone/i.test(e);t&&r.add("esri-mobile",t),o&&r.add("esri-iPhone",o),r.add("esri-geolocation",!!navigator.geolocation)}r.add("esri-wasm","WebAssembly"in t),r.add("esri-performance-mode-frames-between-render",20),r.add("esri-force-performance-mode",!1),r.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in t,r=!1===t.crossOriginIsolated;return e&&!r}),r.add("wasm-simd",()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]))),r.add("esri-atomics","Atomics"in t),r.add("esri-workers","Worker"in t),r.add("web-feat:cache","caches"in t),r.add("esri-workers-arraybuffer-transfer",!r("safari")||Number(r("safari"))>=12),r.add("workers-pool-size",8),r.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),r.add("featurelayer-simplify-payload-size-factors",[1,1,4]),r.add("featurelayer-fast-triangulation-enabled",!0),r.add("featurelayer-animation-enabled",!0),r.add("featurelayer-snapshot-enabled",!0),r.add("featurelayer-snapshot-initial-tolerance",0),r.add("featurelayer-snapshot-point-min-threshold",8e4),r.add("featurelayer-snapshot-point-max-threshold",4e5),r.add("featurelayer-snapshot-multipoint-min-threshold",2e4),r.add("featurelayer-snapshot-multipoint-max-threshold",1e5),r.add("featurelayer-snapshot-polygon-min-threshold",1e3),r.add("featurelayer-snapshot-polygon-max-threshold",2e3),r.add("featurelayer-snapshot-polyline-min-threshold",1e3),r.add("featurelayer-snapshot-polyline-max-threshold",2e3),r.add("featurelayer-snapshot-max-vertex-count",25e4),r.add("featurelayer-snapshot-non-hosted-exceedslimit-enabled",!1),r.add("featurelayer-snapshot-concurrency",4),r.add("featurelayer-snapshot-coverage",.1),r.add("featurelayer-query-max-depth",4),r.add("featurelayer-query-pausing-enabled",!1),r.add("featurelayer-query-tile-concurrency",4),r.add("featurelayer-query-tile-max-features",6e5),r.add("featurelayer-advanced-symbols",!1),r.add("featurelayer-pbf",!0),r.add("featurelayer-pbf-statistics",!1),r.add("feature-layers-workers",!0),r.add("feature-polyline-generalization-factor",1),r.add("mapview-transitions-duration",200),r.add("mapview-essential-goto-duration",200),r.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),r.add("mapserver-pbf-version-support",10.81),r.add("mapservice-popup-identify-max-tolerance",20),r.add("request-queue-concurrency-hosted",16),r.add("request-queue-concurrency-non-hosted",4),r.add("curve-densification-coarse-segments",128),r.add("curve-densification-max-segments",2e3),r.add("curve-densification-min-segments",3),r.add("curve-densification-pixel-deviation",.5),r.add("view-readyState-waiting-delay",1e3),r.add("gradient-depth-bias",.01),r.add("gradient-depth-epsilon",1e-8),r.add("enable-feature:esri-compress-textures",!0),r("host-webworker")||r("host-browser")&&(r.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),r.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{r.add("esri-image-decode",!0,!0,!0)}).catch(()=>{r.add("esri-image-decode",!1,!0,!0)})}return!1}),r.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})(),r})},"esri/core/object":function(){define(["exports","./lang"],function(e,t){"use strict";function r(e,t,r){let o=r;for(const r of e){if(null==o)return;if(!(r in o)){if(!t)return;o[r]={}}o=o[r]}return o}function o(e,r,s){return r?Object.keys(r).reduce((e,i)=>{if("__proto__"===i)return e;let n=e[i],a=r[i];return n===a?e:void 0===n?(e[i]=t.clone(a),e):(Array.isArray(a)||Array.isArray(e)?(n=n?Array.isArray(n)?e[i]=n.slice():e[i]=[n]:e[i]=[],a&&(Array.isArray(a)||(a=[a]),s?a.forEach(e=>{n.includes(e)||n.push(e)}):e[i]=a.slice())):a&&"object"==typeof a?e[i]=o(n,a,s):e.hasOwnProperty(i)&&!r.hasOwnProperty(i)||(e[i]=a),e)},e||{}):e}e.deepMerge=function(e,t,r=!1){return o(e,t,r)},e.getDeepValue=function(e,t){if(null!=t)return t[e]||r(e.split("."),!1,t)},e.getKey=function(e,t){for(const r of Object.entries(e))if(t===r[1])return r[0]},e.hasValue=function(e,t){return Object.values(e).includes(t)},e.notDeepEqual=function e(t,r){if(null==t&&null==r)return!1;if(null==t)return!0;if(null==r)return!0;if("object"==typeof t){if(Array.isArray(t)){const o=r;if(t.length!==o.length)return!0;for(let r=0;r<t.length;r++)if(e(t[r],o[r]))return!0;return!1}if(Object.keys(t).length!==Object.keys(r).length)return!0;for(const o in t)if(e(t[o],r[o]))return!0;return!1}return t!==r},e.setDeepValue=function(e,t,o){const s=e.split("."),i=s.pop(),n=r(s,!0,o);n&&i&&(n[i]=t)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/lang":function(){define(["exports","./arrayUtils","./typedArrayUtil"],function(e,t,r){"use strict";function o(e){if(!e||"object"!=typeof e||"function"==typeof e)return e;const t=l(e);if(null!=t)return t;if(s(e))return e.clone();if(i(e))return e.map(o);if(n(e))throw new Error("Trying to clone an unclonable Accessor instance");const r={};for(const t of Object.getOwnPropertyNames(e))r[t]=o(e[t]);return r}function s(e){return"function"==typeof e.clone}function i(e){return"function"==typeof e.map&&"function"==typeof e.forEach}function n(e){return"function"==typeof e.notifyChange&&"function"==typeof e.watch}function a(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function l(e){if(r.isInt8Array(e)||r.isUint8Array(e)||r.isUint8ClampedArray(e)||r.isInt16Array(e)||r.isUint16Array(e)||r.isInt32Array(e)||r.isUint32Array(e)||r.isFloat32Array(e)||r.isFloat64Array(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[r,s]of e)t.set(r,o(s));return t}if(e instanceof Set){const t=new Set;for(const r of e)t.add(o(r));return t}return null}e.clone=o,e.equals=function(e,t){return e===t||"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)||"function"==typeof e?.getTime&&"function"==typeof t?.getTime&&e.getTime()===t.getTime()||!1},e.equalsShallow=function(e,r){return e===r||(null==e||"string"==typeof e?e===r:"number"==typeof e?e===r||"number"==typeof r&&isNaN(e)&&isNaN(r):e instanceof Date?r instanceof Date&&e.getTime()===r.getTime():Array.isArray(e)?Array.isArray(r)&&t.equals(e,r):e instanceof Set?r instanceof Set&&function(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}(e,r):e instanceof Map?r instanceof Map&&function(e,t){if(e.size!==t.size)return!1;for(const[r,o]of e){const e=t.get(r);if(e!==o||void 0===e&&!t.has(r))return!1}return!0}(e,r):!!a(e)&&a(r)&&function(e,t){if(null===e||null===t)return!1;const r=Object.keys(e);if(null===t||Object.keys(t).length!==r.length)return!1;for(const o of r)if(e[o]!==t[o]||!Object.prototype.hasOwnProperty.call(t,o))return!1;return!0}(e,r))},e.fixJson=function e(t,r){let o;if(r)for(o in t)t.hasOwnProperty(o)&&(void 0===t[o]?delete t[o]:t[o]instanceof Object&&e(t[o],!0));else for(o in t)t.hasOwnProperty(o)&&void 0===t[o]&&delete t[o];return t},e.isAccessorLike=n,e.isClonable=s,e.isPlainObject=a,e.tryClone=function e(t,r){if(!t||"object"!=typeof t||"function"==typeof t||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const o=l(t);if(null!=o)return o;if(i(t)){let o=!0;const s=t.map(t=>{const s=e(t,r);return null!=t&&null==s&&(o=!1),s});return o?s:null}if(s(t))return t.clone(r);if(t instanceof File||t instanceof Blob)return t;if(n(t))return null;const a=new(0,Object.getPrototypeOf(t).constructor);for(const r of Object.getOwnPropertyNames(t)){const o=t[r],s=e(o);if(null!=o&&null==s)return null;a[r]=s}return a},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/arrayUtils":function(){define(["exports","./compilerUtils","./RandomLCG"],function(e,t,r){"use strict";function o(e){return e}function s(e,t=o){if(!e||0===e.length)return;let r=e[0],s=t(r);for(let o=1;o<e.length;++o){const i=e[o],n=Number(t(i));n>s&&(s=n,r=i)}return r}function i(e,t,r,o,s,i,n){if(null==e&&null==o)return!0;t=Math.max(0,t),s=Math.max(0,s),r=Math.max(0,r<0?(e?.length??0)+r:r),i=Math.max(0,i<0?(o?.length??0)+i:i);const a=r-t;if(null==e||null==o||a!==i-s)return!1;if(n){for(let r=0;r<a;r++)if(!n(e[t+r],o[s+r]))return!1}else for(let r=0;r<a;r++)if(e[t+r]!==o[s+r])return!1;return!0}class n{constructor(){this.last=0}}const a=new n;function l(e,t,r,o){o=o||a;const s=Math.max(0,o.last-10);for(let i=s;i<r;++i)if(e[i]===t)return o.last=i,i;const i=Math.min(s,r);for(let r=0;r<i;++r)if(e[r]===t)return o.last=r,r;return-1}const c=new Set;function u(e){return e?(p.seed=e,()=>p.getFloat()):Math.random}const p=new r;e.PositionHint=n,e.addMany=function(e,t){if(!t)return e;for(const r of t)e.push(r);return e},e.binaryIndexOf=function(e,t,r){const o=e.length;let s=0,i=o-1;for(;s<i;){const r=s+Math.floor((i-s)/2);t>e[r]?s=r+1:i=r}const n=e[s];return r?t>=e[o-1]?-1:n===t?s:s-1:n===t?s:-1},e.countIf=function(e,t){return e.reduce((e,r)=>t(r)?e+1:e,0)},e.difference=function(e,t,r){let o,s;return r?(o=t.filter(t=>!e.some(e=>r(e,t))),s=e.filter(e=>!t.some(t=>r(t,e)))):(o=t.filter(t=>!e.includes(t)),s=e.filter(e=>!t.includes(e))),{added:o,removed:s}},e.emptyArray=[],e.equals=function(e,t,r){return i(e,0,e?.length??0,t,0,t?.length??0,r)},e.filterInPlace=function(e,t){let r=0;for(let o=0;o<e.length;++o){const s=e[o];t(s,o)&&(e[r]=s,r++)}e.length=r},e.getRandomNumberGenerator=u,e.indexOf=l,e.intersect=function(e,t,r){return e&&t?r?e.filter(e=>t.findIndex(t=>r(e,t))>-1):e.filter(e=>t.includes(e)):[]},e.isArrayLike=function(e){return e&&"number"==typeof e.length},e.isSome=function(e,t){return null!=e},e.max=s,e.min=function(e,t=o){return s(e,e=>-t(e))},e.pickRandom=function(e,t,r){const o=e.length;if(t>=o)return e.slice();const s=u(r),i=new Set,n=[];for(;n.length<t;){const t=Math.floor(s()*o);i.has(t)||(i.add(t),n.push(e[t]))}return n},e.pushIfSome=function(e,...t){for(const r of t)null!=r&&e.push(r);return e.length},e.range=function(e,t){void 0===t&&(t=e,e=0);const r=new Array(t-e);for(let o=e;o<t;o++)r[o-e]=o;return r},e.reallocGrowthFactor=1.5,e.reallocShrinkFactor=1/1.5,e.reallocShrinkThreshold=.5,e.remove=function(e,t){const r=e.indexOf(t);return-1!==r?(e.splice(r,1),t):null},e.removeUnordered=function(e,r,o,s){const i=o??e.length,n=l(e,t.toConst(r),i,s);if(-1!==n)return e[n]=e[i-1],null==o&&e.pop(),r},e.removeUnorderedMany=function(e,t,r=e.length,o=t.length,s,i){if(0===o||0===r)return r;c.clear();for(let e=0;e<o;++e)c.add(t[e]);s=s||a;const n=Math.max(0,s.last-10);for(let t=n;t<r;++t)if(c.has(e[t])&&(i?.push(e[t]),c.delete(e[t]),e[t]=e[r-1],--r,--t,0===c.size||0===r))return c.clear(),r;for(let t=0;t<n;++t)if(c.has(e[t])&&(i?.push(e[t]),c.delete(e[t]),e[t]=e[r-1],--r,--t,0===c.size||0===r))return c.clear(),r;return c.clear(),r},e.shuffle=function(e,t){if(!e)return e;const r=u(t);for(let t=e.length-1;t>0;t--){const o=Math.floor(r()*(t+1)),s=e[t];e[t]=e[o],e[o]=s}return e},e.sliceEquals=i,e.splitIntoChunks=function(e,t){const r=e.length;if(0===r)return[];const o=[];for(let s=0;s<r;s+=t)o.push(e.slice(s,s+t));return o},e.unique=function(e,t){return t?e.filter((e,r,o)=>o.findIndex(t.bind(null,e))===r):Array.from(new Set(e))},e.update=function(e,t){let r=e.length!==t.length;r&&(e.length=t.length);for(let o=0;o<t.length;++o)e[o]!==t[o]&&(e[o]=t[o],r=!0);return r},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/compilerUtils":function(){define(["exports","./has"],function(e,t){"use strict";e.neverReached=function(e){},e.neverReachedSilent=function(e){},e.toConst=function(e){return e},e.typeCast=function(e){return()=>e},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/RandomLCG":function(){define(function(){"use strict";class e{static{this._m=2147483647}static{this._a=48271}static{this._c=0}constructor(e=1){this._seed=e}set seed(t){this._seed=t??Math.random()*e._m}getInt(){return this._seed=(e._a*this._seed+e._c)%e._m,this._seed}getFloat(){return this.getInt()/(e._m-1)}getIntRange(e,t){return Math.round(this.getFloatRange(e,t))}getFloatRange(t,r){const o=r-t;return t+this.getInt()/e._m*o}}return e})},"esri/core/typedArrayUtil":function(){define(["exports","./has"],function(e,t){"use strict";function r(e){return"Int8Array"===e?.constructor?.name}function o(e){return"Uint8Array"===e?.constructor?.name}function s(e){return"Uint8ClampedArray"===e?.constructor?.name}function i(e){return"Int16Array"===e?.constructor?.name}function n(e){return"Uint16Array"===e?.constructor?.name}function a(e){return"Int32Array"===e?.constructor?.name}function l(e){return"Uint32Array"===e?.constructor?.name}function c(e){return"Float16Array"===e?.constructor?.name}function u(e){return"Float32Array"===e?.constructor?.name}function p(e){return"Float64Array"===e?.constructor?.name}e.isArrayBuffer=function(e){return e instanceof ArrayBuffer},e.isFloat=function(e){return p(e)||u(e)},e.isFloat16Array=c,e.isFloat32Array=u,e.isFloat64Array=p,e.isInt16Array=i,e.isInt32Array=a,e.isInt8Array=r,e.isSigned=function(e){return p(e)||u(e)||a(e)||i(e)||r(e)},e.isTypedArray=function(e){return"buffer"in e},e.isUint16Array=n,e.isUint32Array=l,e.isUint8Array=o,e.isUint8ClampedArray=s,e.maxUint16=65535,e.maxUint32=2**32-1,e.maximumValue=function(e){return p(e)?179769e303:c(e)?65504:u(e)?3402823e32:l(e)?4294967295:n(e)?65535:o(e)||s(e)?255:a(e)?2147483647:i(e)?32767:r(e)?127:256},e.minInt16=-32768,e.minInt32=-2147483648,e.nativeArrayMaxSize=1024,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/request":function(){define(["require","./config","./kernel","./core/Error","./core/has","./core/lang","./core/MapUtils","./core/promiseUtils","./core/urlUtils","./layers/support/arcgisLayerUrl","./portal/support/urlUtils","./support/apiKeyUtils","./support/requestUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d){"use strict";const h=e=>Object.freeze(Object.defineProperty({__proto__:null,default:e},Symbol.toStringTag,{value:"Module"}));async function y(t,r){t instanceof URL&&(t=t.toString()),r?.query instanceof URLSearchParams&&(r.query=l.queryToObject(r.query.toString().replaceAll("+"," ")));const o=l.isDataProtocol(t),i=l.isBlobProtocol(t);i||o||(t=l.normalize(t));const u={url:t,requestOptions:{...r}},p=e=>({data:e,getAllHeaders:w,getHeader:w,httpStatus:200,requestOptions:u.requestOptions,url:u.url}),d=l.getInterceptor(t,g.internalInterceptors);if(d){const e=await k(d,u);if(null!=e)return p(e)}let h=l.getInterceptor(t);if(h){const e=await k(h,u);if(null!=e)return p(e);h.after||h.error||(h=null)}if(t=u.url,"image"===(r=u.requestOptions).responseType&&(s("host-webworker")||s("host-node")))throw M("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),u);if("head"===r.method){if(r.body)throw M("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),u);if(o||i)throw M("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),u)}if(await async function(){s("host-webworker")&&(!f&&globalThis.invokeStaticMessage?f=await new Promise((t,r)=>e(["./core/workers/request"],t,r)):m=!0)}(),f)return f.execute(t,r);const y=new AbortController,b=a.onAbort(r,()=>y.abort()),_={controller:y,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:h,params:u,redoRequest:!1,useIdentity:g.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},S=r.useRequestQueue?async function(t){const r=function(e){let t,r;return"string"==typeof e?(t=l.getOrigin(e,!0),r=c.isHostedAgolService(e)):(t=e.origin,r=c.isHostedAgolService(e.toString())),null==t?null:{origin:t,isHosted:r}}(t.params.url);if(!r)return E(t);const{QueueProcessor:o}=await new Promise((t,r)=>e(["./core/QueueProcessor"],t,r)),i=n.getOrCreateMapValue(L,r.origin,()=>{const e=r.isHosted?s("request-queue-concurrency-hosted"):s("request-queue-concurrency-non-hosted");return new o({concurrency:e,process:e=>{if(a.isAborted(e.params.requestOptions))throw M("",a.createAbortError("Request canceled"),e.params);return E(e)}})});return i.push(t)}(_):E(_),v=await S.finally(()=>b?.remove());return h?.after?.(v),v}let f,m=!1;const g=t.request,b="FormData"in globalThis,_=new Set([499,498,403,401]),S=new Set(["COM_0056","COM_0057","SB_0008"]),v=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],w=()=>null,x=Symbol();function T(e){const t=l.getOrigin(e);return!t||t.endsWith(".arcgis.com")||y._corsServers.includes(t)||l.isTrustedServer(t)}function M(e,t,r,s){let n;const l={url:r.url,requestOptions:r.requestOptions,getAllHeaders:w,getHeader:w,ssl:!1};if(t instanceof o)return t.details?(t.details=i.clone(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=l,t;if(t){const e=s&&(()=>Array.from(s.headers)),r=s&&(e=>s.headers.get(e)),o=s?.status,i=t.message;i&&(n=i),e&&r&&(l.getAllHeaders=e,l.getHeader=r),l.httpStatus=(null!=t.httpCode?t.httpCode:t.code)||o||0,l.subCode=t.subcode,l.messageCode=t.messageCode,"string"==typeof t.details?(l.messages=[t.details],n??=t.details):(l.messages=t.details,n??=l.messages?.[0]),l.raw=x in t?t[x]:t}return n??="Error",a.isAbortError(t)?a.createAbortError():new o(e,n,l)}async function I(){r.id||await new Promise((t,r)=>e(["./identity/IdentityManager"],e=>t(h(e)),r))}function O(e){return v.some(t=>t.test(e))}async function P(e){let t=e.params.url,o=d.getPreferredUrl(t);const i=e.params.requestOptions,n=e.fetchOptions??{},c=l.isBlobProtocol(t)||l.isDataProtocol(t),p=i.responseType||"json",h=c?0:null!=i.timeout?i.timeout:g.timeout;let f=!1;if(!c){e.useSSL&&(t=l.toHTTPS(t));let a={...i.query};e.credentialToken&&(a.token=e.credentialToken);let c=l.objectToQuery(a);s("esri-url-encodes-apostrophe")&&(c=c.replaceAll("'","%27"));const p=o.length+1+c.length;let h;f="delete"===i.method||"post"===i.method||"put"===i.method||!!i.body||p>g.maxUrlLength;const y=i.useProxy||!!l.getProxyRule(t);if(y){const e=l.getProxyUrl(t);h=e.path,!f&&h.length+1+p>g.maxUrlLength&&(f=!0),e.query&&(a={...e.query,...a})}if("HEAD"===n.method&&(f||y)){if(f){if(p>g.maxUrlLength)throw M("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params);throw M("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params)}if(y)throw M("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(f?(n.method="delete"===i.method?"DELETE":"put"===i.method?"PUT":"POST",i.body?t=l.addQueryParameters(t,a):(n.body=l.objectToQuery(a),n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded")):t=l.addQueryParameters(t,a),y&&(e.useProxy=!0,t=`${h}?${t}`),a.token&&b&&n.body instanceof FormData&&!u.isSecureProxyService(t)&&n.body.set("token",a.token),i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!l.hasSameOrigin(t,l.getAppUrl()))if(l.isTrustedServer(t))e.withCredentials=!0;else if(r.id){const o=r.id.findServerInfo(t);o?.webTierAuth&&(e.withCredentials=!0)}e.withCredentials&&(n.credentials="include",d.isNoCorsRequestRequired(t)&&await d.sendNoCorsRequest(f?l.addQueryParameters(t,a):t)),o=d.getPreferredUrl(t)}let m,_,S=0,v=!1;h>0&&(S=setTimeout(()=>{v=!0,e.controller.abort()},h));try{if("native-request-init"===i.responseType)_=n,_.url=o,i.signal?_.signal=i.signal:delete _.signal;else if("image"!==i.responseType||"default"!==n.cache||"GET"!==n.method||f||function(e){if(e)for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0;return!1}(i.headers)||!c&&!e.useProxy&&g.proxyUrl&&!T(t)){if(y._beforeFetch&&await y._beforeFetch(t,n),m=await fetch(o,n),y._afterFetch&&await y._afterFetch(m),e.useProxy||function(e){const t=l.getOrigin(e);t&&!y._corsServers.includes(t)&&y._corsServers.push(t)}(t),"native"===i.responseType)_=m;else if("HEAD"!==n.method)if(m.ok){switch(p){case"array-buffer":_=await m.arrayBuffer();break;case"blob":case"image":_=await m.blob();break;default:_=await m.text()}if(S&&(clearTimeout(S),S=0),"json"===p||"xml"===p||"document"===p)if(_)switch(p){case"json":_=JSON.parse(_);break;case"xml":_=C(_,"application/xml");break;case"document":_=C(_,"text/html")}else _=null;if(_){if("array-buffer"===p||"blob"===p){const e=m.headers.get("Content-Type");if(e&&/application\/json|text\/plain/i.test(e)&&_["blob"===p?"size":"byteLength"]<=750)try{const e=await new Response(_).json();e.error&&(_=e)}catch{}}"image"===p&&_ instanceof Blob&&(_=await F(URL.createObjectURL(_),e,!0))}}else{_=await m.text();try{_=JSON.parse(_)}catch{}}}else _=await F(o,e)}catch(r){if("AbortError"===r.name){if(v)throw d.createTimeoutError();throw a.createAbortError("Request canceled")}if(!(!m&&r instanceof TypeError&&g.proxyUrl)||i.body||"delete"===i.method||"head"===i.method||"post"===i.method||"put"===i.method||e.useProxy||T(t))throw r;e.redoRequest=!0,l.addProxyRule({proxyUrl:g.proxyUrl,urlPrefix:l.getOrigin(t)??""})}finally{S&&clearTimeout(S)}return[m,_]}async function k(e,t){if(null!=e.responseData)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,s;try{s=await e.before(t)}catch(e){r=M("request:interceptor",e,t)}if((s instanceof Error||s instanceof o)&&(r=M("request:interceptor",s,t)),r)throw e.error&&e.error(r),r;return s}}function C(e,t){let r;try{r=(new DOMParser).parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}y._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],y._beforeFetch=void 0,y._afterFetch=void 0;const L=new Map;async function E(e){let t,o;await async function(e){const t=e.params.url,o=e.params.requestOptions,s=e.controller.signal,i=o.body;let n=null,l=null;if(b&&"HTMLFormElement"in globalThis&&(i instanceof FormData?n=i:i instanceof HTMLFormElement&&(n=new FormData(i))),"string"==typeof i&&(l=i),e.fetchOptions={cache:o.cacheBust?"no-cache":"default",credentials:"same-origin",headers:o.headers||{},method:"head"===o.method?"HEAD":"GET",mode:"cors",priority:g.priority,redirect:"follow",signal:s},(n||l)&&(e.fetchOptions.body=n||l),(m||"anonymous"===o.authMode)&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||o.query?.token||n?.get("token")),!e.hasToken){const r=p.getApiKey(t);r&&(o.query??={},o.query.token=r,e.hasToken=!0)}if(e.useIdentity&&!e.hasToken&&!e.credential&&!e.credentialToken&&!O(t)&&!a.isAborted(s)){let i;"immediate"===o.authMode?(await I(),i=await r.id.getCredential(t,{signal:s})):"no-prompt"===o.authMode?(await I(),i=await r.id.getCredential(t,{prompt:!1,signal:s}).catch(()=>{})):r.id&&(i=r.id.findCredential(t)),i&&(e.credential=i,e.credentialToken=i.token,e.useSSL=!!i.ssl)}}(e);try{do{[t,o]=await P(e)}while(!await A(e,t,o))}catch(r){const o=M("request:server",r,e.params,t);throw o.details.ssl=e.useSSL,e.interceptor?.error&&e.interceptor.error(o),o}const s=e.params.url;if(o)if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(s)){if(!e.hasToken&&!e.credentialToken&&o.user?.username&&!l.isTrustedServer(s)){const e=l.getOrigin(s,!0);e&&g.trustedServers.push(e)}Array.isArray(o.authorizedCrossOriginNoCorsDomains)&&d.registerNoCorsDomains(o.authorizedCrossOriginNoCorsDomains)}else"json"===(e.params.requestOptions.responseType||"json")&&d.setPreferredHost(s,o);const i=e.credential;if(i&&r.id){const e=r.id.findServerInfo(i.server);let t=e?.owningSystemUrl;if(t){t=t.replace(/\/?$/,"/sharing");const e=r.id.findCredential(t,i.userId);e&&-1===r.id._getIdenticalSvcIdx(t,e)&&e.resources.unshift(t)}}return{data:o,getAllHeaders:t?()=>Array.from(t.headers):w,getHeader:t?e=>t.headers.get(e):w,httpStatus:t?.status??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function A(e,t,o){if(e.redoRequest)return e.redoRequest=!1,!1;const s=e.params.requestOptions;if(!t||"native"===s.responseType||"native-request-init"===s.responseType)return!0;let i,n;if(o&&(o.error&&"object"==typeof o.error?i=o.error:"error"===o.status&&Array.isArray(o.messages)&&(i={...o},i[x]=o,i.details=o.messages)),!i&&!t.ok)throw i=new Error(`Unable to load ${t.url} status: ${t.status}`),i[x]=o,i;let a,l=null;i&&(n=Number(i.code),l=i.hasOwnProperty("subcode")?Number(i.subcode):null,a=i.messageCode,a=a?.toUpperCase());const c=s.authMode;if(403===n&&(4===l||i.message?.toLowerCase().includes("ssl")&&!i.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&("no-prompt"!==c||498===n)&&void 0!==n&&_.has(n)&&!O(e.params.url)&&(403!==n||(!a||!S.has(a))&&(null==l||2===l&&e.credentialToken))){await I();try{const t=await r.id.getCredential(e.params.url,{error:M("request:server",i,e.params),credential:e.credential,prompt:"no-prompt"!==c,signal:e.controller.signal,token:e.credentialToken});return e.credential=t,e.credentialToken=t.token,e.useSSL=e.useSSL||t.ssl,!1}catch(t){if("no-prompt"===c)return e.credential=void 0,e.credentialToken=void 0,!1;i=t}}if(i)throw i;return!0}function F(e,t,r=!1){const o=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=g.priority,s.src=e,d.loadImageAsync(s,e,r,o)}return y})},"esri/kernel":function(){define(["require","exports","./core/has","./core/urlUtils","./support/revision"],function(e,t,r,o,s){"use strict";Symbol.dispose??=Symbol("Symbol.dispose"),Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");const i="4.34";if(t.fullVersion=i,t.fullVersion="4.34.0-next.46",t.id=void 0,r("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),!r("host-webworker")){console.info(`Using ArcGIS Maps SDK for JavaScript ${t.fullVersion} [Date: ${s.buildDate}, Revision: ${s.commitHash.slice(0,8)}]`);{let e;"function"==typeof globalThis.require&&(e=globalThis.require);const t=t=>{if(!e)return Promise.reject("global AMD `require` function not found");const r=t.startsWith("@arcgis/core/")?t.replace("@arcgis/core/","esri/").replace(/.js$/,""):t;return new Promise(t=>e([r],e=>{t(e)}))},r=e=>{const t=globalThis.$arcgis.importMap?.imports;return t&&e in t?t[e]:null},s=e=>{let s;const i=r(e);return i?(s=!0,e=i):s=e.startsWith("/")||e.startsWith("./")||e.startsWith("../")||o.isAbsolute(e),s?import(e):t(e)};globalThis.$arcgis.import||Object.defineProperty(globalThis.$arcgis,"import",{configurable:!1,enumerable:!0,writable:!1,value:e=>Array.isArray(e)?Promise.all(e.map(s)):s(e)})}}t.buildDate=s.buildDate,t.revision=s.commitHash,t.addTokenParameter=function(e){const r=t.id?.findCredential(e);return r?.token?o.addQueryParameter(e,"token",r.token):e},t.setId=function(e){t.id=e},t.version=i,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/core/urlUtils":function(){define(["exports","../config","./arrayUtils","./Error","./Logger","./support/jsonUtils","../portal/support/urlUtils","../support/base64Utils"],function(e,t,r,o,s,i,n,a){"use strict";const l=t.request,c="esri/config: esriConfig.request.proxyUrl is not set.",u=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,p=/^\s*http:/i,d=/^\s*https:/i,h=/^\s*file:/i,y=/:\d+$/,f=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,m=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),g=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");class b{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let t=this.uri.match(m);this.scheme=t[2]||(t[1]?"":null),this.authority=t[4]||(t[3]?"":null),this.path=t[5],this.query=t[7]||(t[6]?"":null),this.fragment=t[9]||(t[8]?"":null),null!=this.authority&&(t=this.authority.match(g),this.user=t[3]||null,this.password=t[4]||null,this.host=t[6]||t[7],this.port=t[9]||null)}toString(){return this.uri}}const _={},S=new b(t.applicationUrl);let v=S;const w=function(){const e=v.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${v.scheme}://${v.host}${null!=v.port?`:${v.port}`:""}${t}`}();let x=w;const T={setAppUrl:e=>v=e,setAppBaseUrl:e=>x=e,restoreUrls:()=>{v=S,x=w}};function M(e){if(!e)return null;const t={path:null,query:null},r=new b(e),o=e.indexOf("?");return null===r.query?t.path=e:(t.path=e.slice(0,o),t.query=I(r.query)),r.fragment&&(t.hash=r.fragment,null===r.query&&(t.path=t.path.slice(0,t.path.length-(r.fragment.length+1)))),t}function I(e){const t=e.split("&"),r={};for(const e of t){if(!e)continue;const t=e.indexOf("=");let o,s;t<0?(o=decodeURIComponent(e),s=""):(o=decodeURIComponent(e.slice(0,t)),s=decodeURIComponent(e.slice(t+1)));let i=r[o];"string"==typeof i&&(i=r[o]=[i]),Array.isArray(i)?i.push(s):r[o]=s}return r}function O(e,t){return e?t&&"function"==typeof t?Object.keys(e).map(r=>encodeURIComponent(r)+"="+encodeURIComponent(t(r,e[r]))).join("&"):Object.keys(e).map(r=>{const o=e[r];if(null==o)return"";const s=encodeURIComponent(r)+"=",n=t?.[r];return n?s+encodeURIComponent(n(o)):Array.isArray(o)?o.map(e=>i.isSerializable(e)?s+encodeURIComponent(JSON.stringify(e)):s+encodeURIComponent(e)).join("&"):i.isSerializable(o)?s+encodeURIComponent(JSON.stringify(o)):s+encodeURIComponent(o)}).filter(e=>e).join("&"):""}function P(e=!1){let t,r=l.proxyUrl;if("string"==typeof e){t=Q(e);const o=E(e);o&&(r=o.proxyUrl)}else t=!!e;if(!r)throw s.getLogger("esri.core.urlUtils").warn(c),new o("urlUtils:proxy-not-set",c);return t&&Y()&&(r=K(r)),M(r)}const k={path:"",query:""};function C(e){const t=e.indexOf("?");return-1!==t?(k.path=e.slice(0,t),k.query=e.slice(t+1)):(k.path=e,k.query=null),k}function L(e){return(e=X(e=ee(e=C(e).path),!0)).toLowerCase()}function E(e){const t=l.proxyRules,r=L(e);for(let e=0;e<t.length;e++)if(r.startsWith(t[e].urlPrefix))return t[e]}function A(e){const t=(e=N(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function F(e,t,r=!1){if(!e||!t)return!1;const o=te(e),s=te(t);return!(!r&&o.scheme!==s.scheme)&&null!=o.host&&null!=s.host&&o.host.toLowerCase()===s.host.toLowerCase()&&o.port===s.port}function R(e){return _[e]||(Z(e)||H(e)?_[e]=[new b(j(e))]:_[e]=[new b(`http://${e}`),new b(`https://${e}`)]),_[e]}function j(e,t=x,r){return H(e)?r?.preserveProtocolRelative?e:"http"===v.scheme&&v.authority===U(e).slice(2)?`http:${e}`:`https:${e}`:Z(e)?e:D(e.startsWith("/")?function(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return-1===r?e:e.slice(0,r)}(t):t,e)}function N(e){return function(e){const t=l.httpsDomains;if(!function(e){return null!=e&&p.test(e)||"http"===v.scheme&&H(e)}(e))return e;const r=e.indexOf("/",7);let o;if(o=-1===r?e:e.slice(0,r),o=o.toLowerCase().slice(7),y.test(o)){if(!o.endsWith(":80"))return e;o=o.slice(0,-3),e=e.replace(":80","")}return"http"!==v.scheme||o!==v.authority||f.test(e)?((Y()&&o===v.authority||t&&t.some(e=>o===e||o.endsWith(`.${e}`))||Y()&&!E(e))&&(e=K(e)),e):e}(e=function(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}(e=function(e){if(/^https?:\/\//i.test(e)){const t=C(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}(e=j(e=e.trim()))))}function D(...e){const t=e.filter(r.isSome);if(!t?.length)return;const o=[];if(V(t[0])){const e=t[0],r=e.indexOf("//");-1!==r&&(o.push(e.slice(0,r+1)),null!=(s=t[0])&&h.test(s)&&(o[0]+="/"),t[0]=e.slice(r+2))}else t[0].startsWith("/")&&o.push("");var s;const i=t.reduce((e,t)=>t?e.concat(t.split("/")):e,[]);for(let e=0;e<i.length;e++){const t=i[e];".."===t&&o.length>0&&".."!==o[o.length-1]?o.pop():(!t&&e===i.length-1||t&&("."!==t||0===o.length))&&o.push(t)}return o.join("/")}function U(e,t=!1){if(null==e||q(e)||z(e))return null;let r=e.indexOf("://");if(-1===r&&H(e))r=2;else{if(-1===r)return null;r+=3}const o=e.indexOf("/",r);return-1!==o&&(e=e.slice(0,o)),t&&(e=X(e,!0)),e}function V(e){return H(e)||Z(e)}function q(e){return null!=e&&e.startsWith("blob:")}function z(e){return null!=e&&e.startsWith("data:")}function G(e){const t=$(e);return t?.isBase64?a.base64ToArrayBuffer(t.data):null}const B=/^data:(.*?)(;base64)?,(.*)$/;function $(e){const t=e.match(B);if(!t)return null;const[,r,o,s]=t;return{mediaType:r,isBase64:!!o,data:s}}function J(e){const t=G(e);if(!t)return null;const r=$(e);return new Blob([t],{type:r.mediaType})}function W(e,t){if(!e)return!1;const r=document.createElement("a");if(!("download"in r))return!1;const o=URL.createObjectURL(e);return r.download=t,r.href=o,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o),!0}function H(e){return null!=e&&e.startsWith("/")&&"/"===e[1]}function Z(e){return null!=e&&u.test(e)}function Q(e){return null!=e&&d.test(e)||"https"===v.scheme&&H(e)}function K(e){return H(e)?`https:${e}`:e.replace(p,"https:")}function Y(){return"https"===v.scheme}function X(e,t=!1){return H(e)?e.slice(2):(e=e.replace(u,""),t&&e.length>1&&e.startsWith("/")&&"/"===e[1]&&(e=e.slice(2)),e)}function ee(e){return e.endsWith("/")?e:`${e}/`}function te(e){return"string"==typeof e?new b(j(e)):(e.scheme||(e.scheme=v.scheme),e)}const re=/([^.]*)\.([^/]*)$/,oe=/(^data:image\/svg|\.svg$)/i;e.Url=b,e.addProxy=function(e,t=!1){const r=E(e);let o,s;if(r){const e=C(r.proxyUrl);o=e.path,s=e.query?I(e.query):null}else if(t){const t=P(e);o=t.path,s=t.query}if(o){const t=M(e);e=o+"?"+t.path;const r=O({...s,...t.query});r&&(e=`${e}?${r}`)}return e},e.addProxyRule=function(e){const t={proxyUrl:e.proxyUrl,urlPrefix:L(e.urlPrefix)},r=l.proxyRules,o=t.urlPrefix;let s=r.length;for(let e=0;e<r.length;e++){const t=r[e].urlPrefix;if(o.startsWith(t)){if(o.length===t.length)return-1;s=e;break}t.startsWith(o)&&(s=e+1)}return r.splice(s,0,t),s},e.addQueryParameter=function(e,t,r){const o=M(e),s=o.query||{};return s[t]=String(r),`${o.path}?${O(s)}`},e.addQueryParameters=function(e,t){if(!t)return e;const r=M(e),o=r.query||{};for(const[e,r]of Object.entries(t))null!=r&&(o[e]=r);const s=O(o);return s?`${r.path}?${s}`:r.path},e.base64UrlEncode=function(e){return a.arrayBufferToBase64(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")},e.blobUrlToBlob=async function(e){return(await fetch(e)).blob()},e.changeDomain=function(e,t,r){if(!(t&&r&&e&&V(e)))return e;const o=e.indexOf("//"),s=e.indexOf("/",o+2),i=e.indexOf(":",o+2),n=Math.min(s<0?e.length:s,i<0?e.length:i);return e.slice(o+2,n).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,o+2)}${r}${e.slice(n)}`},e.changeHost=function(e,t){const r=new URL(e);return r.host=t,r.port&&!y.test(t)&&(r.port=""),r.toString()},e.dataComponents=$,e.dataToArrayBuffer=G,e.dataToBlob=J,e.downloadBlobAsFile=function(e,t){W(e,t)},e.downloadDataAsFile=function(e,t){!function(e,t){const r=J(e);if(!r)return!1;W(r,t)}(e,t)},e.ensureTrailingSlash=ee,e.getAppBaseUrl=()=>x,e.getAppUrl=()=>v,e.getFilename=function(e,t){if(!e)return"";const r=M(e).path.replace(/\/+$/,""),o=r.slice(r.lastIndexOf("/")+1);if(!t?.length)return o;const s=new RegExp(`\\.(${t.join("|")})$`,"i");return o.replace(s,"")},e.getHost=function(e){return new URL(e).host},e.getInterceptor=function(e,t=l.interceptors){const r=t=>t instanceof RegExp?t.test(e):"string"==typeof t?e.startsWith(t):null==t;if(t)for(const e of t)if(Array.isArray(e.urls)){if(e.urls.some(r))return e}else if(r(e.urls))return e;return null},e.getOrigin=U,e.getPathExtension=function(e){if(null==e)return null;const t=e.match(re);return t?t[2]:null},e.getProxyRule=E,e.getProxyUrl=P,e.hasProtocol=Z,e.hasSameCanonicalArcGISOnlinePortal=function(e,t){if(!e||!t)return!1;e=A(e),t=A(t);const r=n.parseKnownArcGISOnlineDomain(e),o=n.parseKnownArcGISOnlineDomain(t);return null!=r&&null!=o&&r.portalHostname===o.portalHostname},e.hasSameCanonicalPortal=function(e,t){if(!e||!t)return!1;e=A(e),t=A(t);const r=n.parseKnownArcGISOnlineDomain(e),o=n.parseKnownArcGISOnlineDomain(t);return null!=r&&null!=o?r.portalHostname===o.portalHostname:null==r&&null==o&&F(e,t,!0)},e.hasSameOrigin=F,e.hasSamePortal=function(e,t){return e=A(e),t=A(t),X(e)===X(t)},e.isAbsolute=V,e.isAppHTTPS=Y,e.isBlobProtocol=q,e.isDataProtocol=z,e.isHTTPSProtocol=Q,e.isProtocolRelative=H,e.isSVG=function(e){return oe.test(e)},e.isTrustedServer=function(e){if("string"==typeof e){if(!V(e))return!0;e=te(e)}if(F(e,v))return!0;const t=l.trustedServers||[];for(let r=0;r<t.length;r++){const o=R(t[r]);for(let t=0;t<o.length;t++)if(F(e,o[t]))return!0}return!1},e.join=D,e.makeAbsolute=j,e.makeData=function(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`},e.makeRelative=function(e,t=x,r){if(null==e||!V(e))return e;const o=N(e),s=o.toLowerCase(),i=N(t).toLowerCase().replace(/\/+$/,""),n=r?N(r).toLowerCase().replace(/\/+$/,""):null;if(n&&!i.startsWith(n))return e;const a=(e,t,r)=>-1===(r=e.indexOf(t,r))?e.length:r;let l=a(s,"/",s.indexOf("//")+2),c=-1;for(;s.slice(0,l+1)===i.slice(0,l)+"/"&&(c=l+1,l!==s.length);)l=a(s,"/",l+1);if(-1===c)return e;if(n&&c<n.length)return e;e=o.slice(c);const u=i.slice(c-1).replaceAll(/[^/]+/g,"").length;if(u>0)for(let t=0;t<u;t++)e=`../${e}`;else e=`./${e}`;return e},e.normalize=N,e.objectToQuery=O,e.parseData=async function(e){return"string"==typeof e?$(e)??{data:e}:new Promise((t,r)=>{const o=new FileReader;o.readAsDataURL(e),o.onload=()=>t($(o.result)),o.onerror=e=>r(e)})},e.queryToObject=I,e.removeFile=function(e){let t=0;if(V(e)){const r=e.indexOf("//");-1!==r&&(t=r+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)},e.removeQueryParameter=function(e,t){const{path:r,query:o}=M(e);if(!o)return e;delete o[t];const s=O(o);return s?`${r}?${s}`:r},e.removeQueryParameters=function(e,t){const r=M(e),o=Object.keys(r.query||{});return o.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${o.join(", ")}.`),r.path},e.removeTrailingSlash=function(e){return e.replace(/\/+$/,"")},e.splitPathExtension=function(e){if(null==e)return null;const t=e.match(re);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}},e.test=T,e.toHTTP=function(e){return H(e)?`http:${e}`:e.replace(d,"http:")},e.toHTTPS=K,e.trustedServersUrlCache=_,e.urlToObject=M,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/Error":function(){define(["./lang","./Logger","./Message"],function(e,t,r){"use strict";class o extends r{constructor(e,t,r){super(e,t,r)}toJSON(){if(null!=this.details)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,r)=>{if(r&&"object"==typeof r&&"function"==typeof r.toJSON)return r;try{return e.clone(r)}catch(e){return"[object]"}}))}}catch(e){throw t.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new o(e.name,e.message,e.details)}}return o.prototype.type="error",o})},"esri/core/Logger":function(){define(["../config","./has","./string"],function(e,t,r){"use strict";const o={info:0,warn:1,error:2,none:3};class s{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=e.level&&(this.level=e.level),null!=e.writer&&(this.writer=e.writer),this._module=e.module,s._loggers.set(this.module,this);const t=this.module.lastIndexOf(".");-1!==t&&(this._parent=s.getLogger(this.module.slice(0,t)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e="string"!=typeof e?e.declaredClass:e,s._loggers.get(e)||new s({module:e})}static{this._loggers=new Map}static{this._tickCounter=0}static{this._tickCounterScheduled=!1}static{this._throttlingDisabled=!1}_log(t,o,...i){if(this._matchLevel(t)){if("always"!==o&&!s._throttlingDisabled){const e=function(...e){return r.numericHash(JSON.stringify(e,(e,t)=>"object"!=typeof t||Array.isArray(t)?t:"[Object]"))}(i),n=this._loggedMessages[t].get(e);if("once"===o&&null!=n||"oncePerTick"===o&&n&&n>=s._tickCounter)return;this._loggedMessages[t].set(e,s._tickCounter),s._scheduleTickCounterIncrement()}for(const r of e.log.interceptors)if(r(t,this.module,...i))return;this._inheritedWriter()(t,this.module,...i)}}_parentWithMember(e,t){let r=this;for(;null!=r;){const t=r[e];if(null!=t)return t;r=r.parent}return t}_inheritedWriter(){return this._parentWithMember("writer",i)}_matchLevel(t){const r=e.log.level||"warn";return o[this._parentWithMember("level",r)]<=o[t]}static _scheduleTickCounterIncrement(){s._tickCounterScheduled||(s._tickCounterScheduled=!0,Promise.resolve().then(()=>{s._tickCounter++,s._tickCounterScheduled=!1}))}}function i(e,t,...r){console[e](`[${t}]`,...r)}return s})},"esri/core/string":function(){define(["exports","./object"],function(e,t){"use strict";const r=/\{([^}]+)\}/g;function o(e){return e??""}let s;e.escapeRegExpString=function(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,e=>t?.includes(e)?e:`\\${e}`)},e.numericHash=function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t},e.replace=function(e,s){return s?e.replaceAll(r,"object"==typeof s?(e,r)=>o(t.getDeepValue(r,s)):(e,t)=>o(s(t))):e},e.safeToString=function(e,...t){let r=e[0];for(let o=0;o<t.length;++o)r+=t[o]+e[o+1];return r},e.stripHTML=function(e){return s??=new DOMParser,s.parseFromString(e||"","text/html").body.innerText||""},e.templateHasKey=function(e,t){return new RegExp(`{${t}}`,"ig").test(e)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/Message":function(){define(["./object"],function(e){"use strict";return class{constructor(t,r,o=void 0){var s;this.name=t,this.details=o,this.message=(r&&(s=o,r.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(t,r)=>""===r?"$":(e.getDeepValue(r,s)??"").toString())))??""}toString(){return"["+this.name+"]: "+this.message}}})},"esri/core/support/jsonUtils":function(){define(["exports"],function(e){"use strict";e.isSerializable=function(e){return e&&"object"==typeof e&&"toJSON"in e&&"function"==typeof e.toJSON},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/portal/support/urlUtils":function(){define(["exports"],function(e){"use strict";const t=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,r={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};e.isSecureProxyService=function(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)},e.normalizeArcGISOnlineOrgDomain=function(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,r=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,o=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):r.test(e)?e=e.replace(r,"https://devext.arcgis.com"):o.test(e)&&(e=e.replace(o,"https://qaext.arcgis.com")),e},e.parseKnownArcGISOnlineDomain=function(e){const o=e?.match(t);if(!o)return null;const[,s,i,n]=o;if(!s)return null;let a=null,l=null,c=null;const{devext:u,qaext:p,www:d}=r;if(i)if(a=s,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:l,portalHostname:c}=u);break;case"qa":({customBaseUrl:l,portalHostname:c}=p);break;default:return null}else({customBaseUrl:l,portalHostname:c}=d);else switch(s.toLowerCase()){case"devext":({customBaseUrl:l,portalHostname:c}=u);break;case"qaext":({customBaseUrl:l,portalHostname:c}=p);break;case"www":({customBaseUrl:l,portalHostname:c}=d);break;default:return null}return{customBaseUrl:l,isPortal:!1,portalHostname:c,urlKey:a}},e.reArcGISOnlineDomain=t,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/base64Utils":function(){define(["exports"],function(e){"use strict";e.arrayBufferToBase64=function(e){const t=new Uint8Array(e);let r="";for(let e=0;e<t.length;e++)r+=String.fromCharCode(t[e]);return btoa(r)},e.base64ToArrayBuffer=function(e){const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r.buffer},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/revision":function(){define(["exports"],function(e){"use strict";e.buildDate="20250727",e.commitHash="dc07ab9824458d7c8be6f41020a84653d5bf521a",Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/MapUtils":function(){define(["exports"],function(e){"use strict";e.equals=function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t||e.size!==t.size)return!1;for(const[r,o]of e)if(!t.has(r)||o!==t.get(r))return!1;return!0},e.everyMap=function(e,t){for(const r of e.values())if(!t(r))return!1;return!0},e.findInMap=function(e,t){for(const r of e.values())if(t(r))return r;return null},e.getOrCreateMapValue=function(e,t,r){const o=e.get(t);if(void 0!==o)return o;const s=r();return e.set(t,s),s},e.memoize=function(e){const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))},e.someMap=function(e,t){for(const r of e.values())if(t(r))return!0;return!1},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/promiseUtils":function(){define(["exports","./clock","./Error","./events","./Logger","./maybe"],function(e,t,r,o,s,i){"use strict";function n(e="Aborted"){return new r("AbortError",e)}function a(e,t="Aborted"){if(c(e))throw n(t)}function l(e){return e instanceof AbortSignal?e:e?.signal??void 0}function c(e){const t=l(e);return null!=t&&t.aborted}function u(e,t){const r=l(e);if(null!=r){if(!r.aborted)return o.once(r,"abort",()=>t());t()}}function p(e){return"AbortError"===e?.name}async function d(e){if(!e)return;if("function"!=typeof e.forEach){const t=Object.keys(e),r=t.map(t=>e[t]),o=await d(r),s={};return t.map((e,t)=>s[e]=o[t]),s}const t=e;return Promise.allSettled(t).then(e=>Array.from(t,(t,r)=>{const o=e[r];return"fulfilled"===o.status?{promise:t,value:o.value}:{promise:t,error:o.reason}}))}function h(e,t=void 0,r){const o=new AbortController;return u(r,()=>o.abort()),new Promise((r,s)=>{let i=setTimeout(()=>{i=0,r(t)},e);u(o,()=>{i&&(clearTimeout(i),s(n()))})})}function y(e){return e&&"function"==typeof e.then}function f(e){return y(e)?e:Promise.resolve(e)}function m(){let e,r;const o=new Promise((t,o)=>{e=t,r=o}),s=t=>{e(t)};return s.resolve=t=>e(t),s.reject=e=>r(e),s.timeout=(e,r)=>t.clock.setTimeout(()=>s.reject(r),e),s.promise=o,s}e.after=h,e.allSettledErrors=async function(e){return(await Promise.allSettled(e)).filter(e=>"rejected"===e.status).map(e=>e.reason)},e.allSettledValues=async function(e){return(await Promise.allSettled(e)).filter(e=>"fulfilled"===e.status).map(e=>e.value)},e.always=function(e,t){return e.then(t,t)},e.createAbortError=n,e.createResolver=m,e.debounce=function(e,t=-1){let r,o,s,i,a=null;const l=(...c)=>{if(r){o=c,i&&i.reject(n()),i=m();const e=i.promise;if(a){const e=a;a=null,e.abort()}return e}if(s=i||m(),i=null,t>0){const o=new AbortController;r=f(e(...c,o.signal));const s=r;h(t).then(()=>{r===s&&(i?o.abort():a=o)})}else r=1,r=f(e(...c));const u=()=>{const e=o;o=s=r=a=null,null!=e&&l(...e)},p=r,d=s;return p.then(u,u),p.then(d.resolve,d.reject),d.promise};return l},e.eachAlways=d,e.eachAlwaysValues=async function(e){return(await d(e)).filter(e=>!!e.value).map(e=>e.value)},e.filter=async function(e,t){const r=e.slice(),o=await Promise.all(e.map((e,r)=>t(e,r)));return r.filter((e,t)=>o[t])},e.ignoreAbortErrors=async function(e){try{return await e}catch(e){if(!p(e))throw e;return}},e.isAbortError=p,e.isAborted=c,e.isPromiseLike=y,e.logOnError=async function(e,t=s.getLogger("esri")){try{return await e}catch(e){p(e)||t.error(e)}},e.onAbort=u,e.onAbortOrThrow=function(e,t){const r=l(e);if(null!=r)return a(r),o.once(r,"abort",()=>t(n()))},e.settleWithPromise=function(e,t){t.then(e.resolve,e.reject)},e.signalFromSignalOrOptions=l,e.throwIfAbortError=function(e){if(p(e))throw e},e.throwIfAborted=a,e.throwIfDestroyed=function(e,t="Aborted"){if(e?.destroyed)throw n(t)},e.throwIfNotAbortError=function(e){if(!p(e))throw e},e.timeout=function(e,t,o,s){const i=o&&"abort"in o?o:null;null!=s||i||(s=o);let n=setTimeout(()=>{n=0,i?.abort()},t);const a=()=>s||new r("promiseUtils:timeout","The wrapped promise did not resolve within "+t+" ms");return e.then(e=>{if(0===n)throw a();return clearTimeout(n),e},e=>{throw clearTimeout(n),0===n?a():e})},e.waitTick=async function(e){await Promise.resolve(),a(e)},e.when=f,e.whenOrAbort=function(e,t){return null==l(t)?e:new Promise((r,o)=>{let s=u(t,()=>o(n()));const a=()=>{s=i.removeMaybe(s)};e.then(a,a),e.then(r,o)})},e.whenOrTimeout=function(e,t,o){return Promise.race([e,h(t).then(()=>{throw new r("timeout",`Did not resolve within ${t} milliseconds (${o??"timeout"})`)})])},e.wrapAbortWithTimeout=function(e,t){const r=new AbortController,o=setTimeout(()=>r.abort(),t);return u(e,()=>{r.abort(),clearTimeout(o)}),{...e,signal:r.signal}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/clock":function(){define(["exports","./handleUtils"],function(e,t){"use strict";function r(e){return{setTimeout:(r,o)=>{const s=e.setTimeout(r,o);return t.makeHandle(()=>e.clearTimeout(s))}}}const o=r(globalThis);e.clock=o,e.wrap=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/handleUtils":function(){define(["exports"],function(e){"use strict";const t={remove:()=>{}};function r(e){return e?{remove(){e&&(e(),e=void 0)}}:t}function o(e){e.forEach(e=>e?.remove())}function s(e){return"object"==typeof e&&!!e&&"remove"in e&&"function"==typeof e.remove}e.abortHandle=function(e){return r(()=>e?.abort())},e.asyncHandle=function(e,t){let o=!1,s=null;return e.then(e=>{o?e.remove():s=e}),r(()=>{o=!0,null!=s?s.remove():null!=t&&(t.abort(),t=null)})},e.destroyHandle=function(e){return r(null!=e?()=>e.destroy():void 0)},e.disposable=function(e){return{[Symbol.dispose](){e.remove()}}},e.drainHandles=function(e){o(e),e.length=0},e.handlesGroup=function(e){return r(()=>o(e))},e.isHandle=s,e.makeHandle=r,e.refHandle=function(e){return r(()=>e()?.remove())},e.removeHandles=o,e.removeIfHandle=function(e){s(e)&&e.remove()},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/events":function(){define(["exports","./handleUtils"],function(e,t){"use strict";function r(e){return function(e){return null!=e&&"object"==typeof e&&"on"in e&&"function"==typeof e.on}(e)||o(e)}function o(e){return null!=e&&"object"==typeof e&&"addEventListener"in e&&"function"==typeof e.addEventListener}function s(e,t,s){if(!r(e))throw new TypeError("target is not a Evented or EventTarget object");return o(e)?i(e,t,s):e.on(t,s)}function i(e,r,o,s){if(Array.isArray(r)){const i=r.slice();for(const t of i)e.addEventListener(t,o,s);return t.makeHandle(()=>{for(const t of i)e.removeEventListener(t,o,s)})}return e.addEventListener(r,o,s),t.makeHandle(()=>e.removeEventListener(r,o,s))}e.addEventListener=i,e.isEventedOrEventTarget=r,e.on=s,e.once=function(e,t,o){if(!r(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,o);const i=s(e,t,t=>{i.remove(),o.call(e,t)});return i},e.pausable=function(e,t,r){let o=!1;const i=s(e,t,t=>{o||r.call(e,t)});return{resume(){o=!1},pause(){o=!0},remove(){i.remove()}}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/maybe":function(){define(["exports"],function(e){"use strict";e.abortMaybe=function(e){return e?.abort(),null},e.assertIsSome=function(e,t){if(null==e)throw new Error(t??"value is None")},e.destroyMaybe=function(e){return e?.destroy(),null},e.disposeMaybe=function(e){return e?.dispose(),null},e.equalsMaybe=function(e,t,r){return null!=e&&null!=t?null!=r?r(e,t):e.equals(t):e===t},e.mappedFind=function(e,t){let r;return e.some((e,o)=>(r=t(e,o),null!=r)),r??void 0},e.maybeProperty=function(e,t){return e?.[t]},e.releaseMaybe=function(e){return e?.release(),null},e.removeMaybe=function(e){return e?.remove(),null},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/arcgisLayerUrl":function(){define(["exports","../../core/urlUtils","../../chunks/persistableUrlUtils"],function(e,t,r){"use strict";const o={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},s=Object.values(o),i=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${s.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),n=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${s.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),a=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function l(e){if(null==e)return null;const r=t.urlToObject(e),s=r?.path.match(i)||r?.path.match(n);if(!s)return null;const[,a,l,c,p]=s,d=l.indexOf("/");return{title:u(-1!==d?l.slice(d+1):l),serverType:o[c.toLowerCase()],sublayer:null!=p&&""!==p?parseInt(p,10):null,url:{path:a}}}function c(e){const r=t.urlToObject(e).path.match(a);return r?{serviceUrl:r[1],sublayerId:Number(r[2])}:null}function u(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}e.cleanTitle=u,e.isArcGISUrl=function(e){return i.test(e)},e.isHostedAgolService=function(e){let r=t.getOrigin(e,!0);return!!r&&(r=r.toLowerCase(),r.endsWith(".arcgis.com")&&(r.startsWith("services")||r.startsWith("tiles")||r.startsWith("features")||/^[a-z\d-]+\.svcs[a-z\d-]*\./.test(r)))},e.isServerOrServicesAGOLUrl=function(e){if(!e)return!1;const r=new t.Url(t.makeAbsolute(e)),o=r.authority?.toLowerCase();return"server.arcgisonline.com"===o||"services.arcgisonline.com"===o},e.isWmsServer=function(e){if(!e)return!1;const t=e.toLowerCase(),r=t.includes("/services/"),o=t.includes("/mapserver/wmsserver"),s=t.includes("/imageserver/wmsserver"),i=t.includes("/wmsserver");return r&&(o||s||i)},e.parse=l,e.parseNonStandardSublayerUrl=c,e.sanitizeUrl=function(e,r){return e?t.removeTrailingSlash(t.removeQueryParameters(e,r)):e},e.sanitizeUrlWithLayerId=function(e){let{url:r}=e;if(!r)return{url:r};r=t.removeQueryParameters(r,e.logger);const o=t.urlToObject(r),s=l(o.path);let i;if(null!=s)null!=s.sublayer&&null==e.layer.layerId&&(i=s.sublayer),r=s.url.path;else if(e.nonStandardUrlAllowed){const e=c(o.path);null!=e&&(r=e.serviceUrl,i=e.sublayerId)}return{url:t.removeTrailingSlash(r),layerId:i}},e.serverTypes=s,e.titleFromUrlAndName=function(e,t){const r=[];if(e){const t=l(e);null!=t&&t.title&&r.push(t.title)}if(t){const e=u(t);r.push(e)}if(2===r.length){if(r[0].toLowerCase().includes(r[1].toLowerCase()))return r[0];if(r[1].toLowerCase().includes(r[0].toLowerCase()))return r[1]}return r.join(" - ")},e.writeUrlWithLayerId=function(e,o,s,i,n){r.write(o,i,"url",n),i.url&&null!=e.layerId&&(i.url=t.join(i.url,s,e.layerId.toString()))},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/persistableUrlUtils":function(){define(["exports","../kernel","../core/urlUtils","../portal/support/urlUtils"],function(e,t,r,o){"use strict";function s(e,t){const o=t?.url?.path;if(e&&o&&(e=r.makeAbsolute(e,o,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const o=r.makeRelative(e,t.portalItem.itemUrl);null!=o&&o.startsWith(c)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(o).path)}return(e=h(e,t?.portal))&&l.test(e)?y(e):e}function i(e,t,o=0){if(null==(e=e&&l.test(e)?f(e):e))return e;!r.isAbsolute(e)&&t?.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let s=r.makeAbsolute(e);if(t){const o=t.verifyItemRelativeUrls?.rootPath||t.url?.path;if(o){const i=h(o,t.portal),n=h(s,t.portal);s=r.makeRelative(n,i,i),null!=s&&s!==n&&s!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(s)}}return s=d(s,t?.portal),r.isAbsolute(s)&&(s=r.normalize(s)),t?.resources&&t?.portalItem&&!r.isAbsolute(s)&&!r.isDataProtocol(s)&&0===o&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(s),compress:!1}),s}function n(e,t,r){return s(e,r)}function a(e,t,r,o){const s=i(e,o);void 0!==s&&(t[r]=s)}const l=/\/items\/([^/]+)\/resources\/(.*)/,c="./resources/";function u(e){const t=e?.match(l)??null;return t?.[1]??null}function p(e){const t=e?.match(l)??null;if(null==t)return null;const o=t[2],s=o.lastIndexOf("/");if(-1===s){const{path:e,extension:t}=r.splitPathExtension(o);return{prefix:null,filename:e,extension:t}}const{path:i,extension:n}=r.splitPathExtension(o.slice(s+1));return{prefix:o.slice(0,s),filename:i,extension:n}}function d(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?r.changeDomain(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function h(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const o=`${t.urlKey}.${t.customBaseUrl}`,s=r.getAppUrl();return r.hasSameOrigin(s,`${s.scheme}://${o}`)?r.changeDomain(e,t.portalHostname,o):r.changeDomain(e,o,t.portalHostname)}function y(e){if(!e)return e||null;let r=e;return r&&t.id&&!t.id.findCredential(r)&&(r=o.normalizeArcGISOnlineOrgDomain(r),r=r.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),r=r.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),r=r.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),r}function f(e){if(!e)return e||null;let r=e;return r=r.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),r=r.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),r=r.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),r&&t.id&&!t.id.findCredential(r)&&(r=o.normalizeArcGISOnlineOrgDomain(r)),r}const m=Object.freeze(Object.defineProperty({__proto__:null,ensureMainOnlineDomain:d,fromCDNUrl:f,fromJSON:s,itemIdFromResourceUrl:u,prefixAndFilenameFromResourceUrl:p,read:n,toCDNUrl:y,toJSON:i,write:a},Symbol.toStringTag,{value:"Module"}));e.ensureMainOnlineDomain=d,e.fromCDNUrl=f,e.fromJSON=s,e.itemIdFromResourceUrl=u,e.persistableUrlUtils=m,e.prefixAndFilenameFromResourceUrl=p,e.read=n,e.toCDNUrl=y,e.toJSON=i,e.write=a})},"esri/support/apiKeyUtils":function(){define(["exports","../config","../core/urlUtils"],function(e,t,r){"use strict";const o=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function s(e){if(!i(e))return null;const r=t=>t instanceof RegExp?t.test(e):"string"==typeof t&&e.startsWith(t),o=t.apiKeys;if(Array.isArray(o.scopes))for(const e of o.scopes)if(Array.isArray(e.urls)){if(e.urls.some(r))return e.token}else if(r(e.urls))return e.token;return o.basemapStyles&&/^https?:\/\/(i?basemaps|basemapstyles)-api\.arcgis\.com\//i.test(e)?o.basemapStyles:t.apiKey&&/^https?:\/\/.+\.arcgis\.com(\/|$)/i.test(e)?t.apiKey:null}function i(e){const t=r.getOrigin(e,!0);return!!t&&!o.has(t)&&!e.endsWith("/sharing/rest/generateToken")}e.getApiKey=s,e.hasBasemapStylesApiKey=function(){return null!=t.apiKey||null!=t.apiKeys.basemapStyles},e.isApiKeyApplicable=function(e,t){return t?i(e):null!=s(e)},e.supportsApiKey=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/requestUtils":function(){define(["exports","../config","../core/has","../core/promiseUtils","../core/urlUtils","../layers/support/arcgisLayerUrl","../portal/support/urlUtils"],function(e,t,r,o,s,i,n){"use strict";function a(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const l="Timeout exceeded",c=new Map;e.createTimeoutError=function(){return new Error(l)},e.getPreferredUrl=function(e){const t=i.parse(e)?.url.path.toLowerCase();if(!t)return e;const r=c.get(t);return r?s.changeHost(e,r):e},e.isNoCorsRequestRequired=function(e){const r=t.request.crossOriginNoCorsDomains;if(r){let t=s.getOrigin(e);if(t)return t=t.toLowerCase(),!s.hasSameOrigin(t,s.getAppUrl())&&r[t]<Date.now()-36e5}return!1},e.isTimeoutError=function(e){return"object"==typeof e&&!!e&&"message"in e&&e.message===l},e.loadImageAsync=function(e,t,s=!1,i){return new Promise((n,l)=>{if(o.isAborted(i))return void l(a());let c=()=>{d(),l(new Error(`Unable to load ${t}`))},u=()=>{const t=e;d(),n(t)},p=()=>{if(!e)return;const t=e;d(),t.src="",l(a())};const d=()=>{r("esri-image-decode")||(e.removeEventListener("error",c),e.removeEventListener("load",u)),c=null,u=null,e=null,null!=i&&i.removeEventListener("abort",p),p=null,s&&URL.revokeObjectURL(t)};null!=i&&i.addEventListener("abort",p),r("esri-image-decode")?e.decode().then(u,c):(e.addEventListener("error",c),e.addEventListener("load",u))})},e.preferredHosts=c,e.registerNoCorsDomains=function(e){t.request.crossOriginNoCorsDomains||(t.request.crossOriginNoCorsDomains={});const r=t.request.crossOriginNoCorsDomains;for(let t of e)t=t.toLowerCase(),/^https?:\/\//.test(t)?r[s.getOrigin(t)??""]=0:(r[s.getOrigin("http://"+t)??""]=0,r[s.getOrigin("https://"+t)??""]=0)},e.sendNoCorsRequest=async function(e){const r=s.urlToObject(e);e=r.path,"json"===r.query?.f&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const o=t.request.crossOriginNoCorsDomains,i=s.getOrigin(e);o&&i&&(o[i.toLowerCase()]=Date.now())},e.setPreferredHost=function(e,t){const r=t?.preferredHost;if(!r||s.hasSameOrigin(e,`https://${r}`,!0))return;const o=i.parse(e);if(!o||"FeatureServer"!==o.serverType||n.isSecureProxyService(e))return;const a=o.url.path.toLowerCase();c.has(a)||c.set(a,r)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/Collection":function(){define(["../chunks/tslib.es6","./ArrayPool","./Evented","./handleUtils","./lang","./ObjectPool","./scheduling","./accessorSupport/ensureType","./accessorSupport/tracking","./accessorSupport/decorators/property","./accessorSupport/decorators/shared","./accessorSupport/decorators/subclass","./accessorSupport/tracking/SimpleObservable","./support/jsonUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h){"use strict";var y;class f{constructor(e,t,r,o,s){this.target=e,this.added=t,this.removed=r,this.start=o,this.deleteCount=s}}const m=new i(class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function g(e){e&&"object"==typeof e&&"destroy"in e&&"function"==typeof e.destroy&&e.destroy()}function b(e){return e?e instanceof O?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function _(e){if(e?.length)return e[0]}function S(e,t,r,o){const s=Math.min(e.length-r,t.length-o);let i=0;for(;i<s&&e[r+i]===t[o+i];)i++;return i}function v(e,t,r,o){t&&t.forEach((t,s,i)=>{e.push(t),v(e,r.call(o,t,s,i),r,o)})}const w=new Set,x=new Set,T=new Set,M=new Map;let I=0,O=class extends r.EventedAccessor{static{y=this}static{this.ofType=t=>{if(!t)return y;if(M.has(t))return M.get(t);let r=null;if("function"==typeof t)r=t.prototype.declaredClass;else if(t.base)r=t.base.prototype.declaredClass;else for(const e in t.typeMap){const o=t.typeMap[e].prototype.declaredClass;r?r+=` | ${o}`:r=o}let o=class extends y{};return e.__decorate([u.shared({Type:t,ensureType:"function"==typeof t?a.ensureType(t):a.ensureOneOfType(t)})],o.prototype,"itemType",void 0),o=e.__decorate([p.subclass(`esri.core.Collection<${r}>`)],o),M.set(t,o),o}}static isCollection(e){return null!=e&&e instanceof y}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new d.SimpleObservable,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:I++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof y?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),super.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return l.trackAccess(this._observable),this._items}set items(e){this._emitBeforeChanges(1)||(this._splice(0,this.length,b(e)),this._emitAfterChanges(1))}hasEventListener(e){return!this.destroyed&&("change"===e?this._chgListeners.length>0:super.hasEventListener(e))}on(e,t){if(this.destroyed)return o.makeHandle();if("change"===e){const e=this._chgListeners,r={removed:!1,callback:t};return e.push(r),this._notifications&&this._notifications.push({listeners:e.slice(),items:this._items.slice(),changes:[]}),o.makeHandle(()=>{r.removed=!0,e.splice(e.indexOf(r),1)})}return super.on(e,t)}once(e,t){const r="deref"in t?()=>t.deref():()=>t,o=this.on(e,e=>{r()?.call(null,e),o.remove()});return o}add(e,t){if(l.trackAccess(this._observable),this._emitBeforeChanges(1))return this;const r=this.getNextIndex(t??null);return this._splice(r,0,[e]),this._emitAfterChanges(1),this}addMany(e,t=this._items.length){if(l.trackAccess(this._observable),!e?.length)return this;if(this._emitBeforeChanges(1))return this;const r=this.getNextIndex(t);return this._splice(r,0,b(e)),this._emitAfterChanges(1),this}at(e){if(l.trackAccess(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(l.trackAccess(this._observable),!this.length||this._emitBeforeChanges(2))return[];const e=this._removeAllRaw();return this._emitAfterChanges(2),e}_removeAllRaw(){return 0===this.length?[]:this._splice(0,this.length)||[]}clone(){return l.trackAccess(this._observable),this._createNewInstance({items:this._items.map(s.clone)})}concat(...e){l.trackAccess(this._observable);const t=e.map(b);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(l.trackAccess(this._observable),!this.length||this._emitBeforeChanges(2))return;const r=this._splice(0,this.length),o=r.length;for(let s=0;s<o;s++)e.call(t,r[s],s,r);this._emitAfterChanges(2)}destroyAll(){this.drain(g)}destroyMany(e){const t=this.removeMany(e);return t.forEach(g),t}every(e,t){return l.trackAccess(this._observable),this._items.every(e,t)}filter(e,t){l.trackAccess(this._observable);const r=2===arguments.length?this._items.filter(e,t):this._items.filter(e);return this._createNewInstance({items:r})}find(e,t){return l.trackAccess(this._observable),this._items.find(e,t)}findIndex(e,t){return l.trackAccess(this._observable),this._items.findIndex(e,t)}flatten(e,t){l.trackAccess(this._observable);const r=[];return v(r,this,e,t),new y(r)}forEach(e,t){return l.trackAccess(this._observable),this._items.forEach(e,t)}getItemAt(e){return l.trackAccess(this._observable),this._items[e]}getNextIndex(e){l.trackAccess(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return l.trackAccess(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return l.trackAccess(this._observable),this._items.indexOf(e,t)}join(e=","){return l.trackAccess(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return l.trackAccess(this._observable),this._items.lastIndexOf(e,t)}map(e,t){l.trackAccess(this._observable);const r=this._items.map(e,t);return new y({items:r})}reorder(e,t=this.length-1){l.trackAccess(this._observable);const r=this.indexOf(e);if(-1!==r){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(4))return e;this._splice(r,1),this._splice(t,0,[e]),this._emitAfterChanges(4)}return e}}pop(){if(l.trackAccess(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=_(this._splice(this.length-1,1));return this._emitAfterChanges(2),e}push(...e){return l.trackAccess(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,e),this._emitAfterChanges(1)),this.length}reduce(e,t){l.trackAccess(this._observable);const r=this._items;return 2===arguments.length?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){l.trackAccess(this._observable);const r=this._items;return 2===arguments.length?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return l.trackAccess(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(l.trackAccess(this._observable),e<0||e>=this.length||this._emitBeforeChanges(2))return;const t=_(this._splice(e,1));return this._emitAfterChanges(2),t}removeMany(e){if(l.trackAccess(this._observable),!e?.length||this._emitBeforeChanges(2))return[];const t=e instanceof y?e.toArray():e,r=this._items,o=[],s=t.length;for(let e=0;e<s;e++){const s=t[e],i=r.indexOf(s);if(i>-1){const s=1+S(t,r,e+1,i+1),n=this._splice(i,s);n&&n.length>0&&o.push.apply(o,n),e+=s-1}}return this._emitAfterChanges(2),o}reverse(){if(l.trackAccess(this._observable),this._emitBeforeChanges(4))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(4),this}shift(){if(l.trackAccess(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=_(this._splice(0,1));return this._emitAfterChanges(2),e}slice(e=0,t=this.length){return l.trackAccess(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return l.trackAccess(this._observable),this._items.some(e,t)}sort(e){if(l.trackAccess(this._observable),!this.length||this._emitBeforeChanges(4)||!this._requiresSort(e))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(4),this}_requiresSort(e=(e,t)=>e===t?0:e<t?-1:1){const t=this.length-1;for(let r=0;r<t;r++)if(e(this.items[r],this.items[r+1])>0)return!0;return!1}splice(e,t,...r){l.trackAccess(this._observable),1===arguments.length&&(t=this.length),t??=0;const o=(t?2:0)|(r.length?1:0);if(this._emitBeforeChanges(o))return[];const s=this._splice(e,t,r)||[];return this._emitAfterChanges(o),s}toArray(){return l.trackAccess(this._observable),this._items.slice()}toJSON(e){return l.trackAccess(this._observable),this.toArray().map(t=>h.isSerializable(t)?t.toJSON(e):t)}toLocaleString(){return l.trackAccess(this._observable),this._items.toLocaleString()}toString(){return l.trackAccess(this._observable),this._items.toString()}unshift(...e){return l.trackAccess(this._observable),!e.length||this._emitBeforeChanges(1)||(this._splice(0,0,e),this._emitAfterChanges(1)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,r){const o=this._items,s=this.itemType;let i,a;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=n.schedule(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(a=o.splice(e,t),this.hasEventListener("before-remove")){const t=m.acquire();t.target=this,t.cancellable=!0;for(let r=0,s=a.length;r<s;r++)i=a[r],t.reset(i),this.emit("before-remove",t),t.defaultPrevented&&(a.splice(r,1),o.splice(e,0,i),e+=1,r-=1,s-=1);m.release(t)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const e=m.acquire();e.target=this,e.cancellable=!1;const t=a.length;for(let r=0;r<t;r++)e.reset(a[r]),this.emit("after-remove",e);m.release(e)}}if(r?.length){if(s){const e=[];for(const t of r){const r=s.ensureType(t);null==r&&null!=t||e.push(r)}r=e}const t=this.hasEventListener("before-add"),i=this.hasEventListener("after-add"),n=e===this.length;if(t||i){const s=m.acquire();s.target=this,s.cancellable=!0;const a=m.acquire();a.target=this,a.cancellable=!1;for(const l of r)t?(s.reset(l),this.emit("before-add",s),s.defaultPrevented||(n?o.push(l):o.splice(e++,0,l),this._set("length",o.length),i&&(a.reset(l),this.emit("after-add",a)))):(n?o.push(l):o.splice(e++,0,l),this._set("length",o.length),a.reset(l),this.emit("after-add",a));m.release(a),m.release(s)}else{if(n)for(const e of r)o.push(e);else o.splice(e,0,...r);this._set("length",o.length)}}if((r?.length||a?.length)&&this._notifyChangeEvent(r,a),this.hasEventListener("after-splice")){const o=new f(this,r,a,e,t);this.emit("after-splice",o)}return a}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=m.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,m.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=m.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),m.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const r of e){const e=r.changes;w.clear(),x.clear(),T.clear();for(const{added:t,removed:r}of e){if(t)if(0===T.size&&0===x.size)for(const e of t)w.add(e);else for(const e of t)x.has(e)?(T.add(e),x.delete(e)):T.has(e)||w.add(e);if(r)if(0===T.size&&0===w.size)for(const e of r)x.add(e);else for(const e of r)w.has(e)?w.delete(e):(T.delete(e),x.add(e))}const o=t.acquire();w.forEach(e=>{o.push(e)});const s=t.acquire();x.forEach(e=>{s.push(e)});const i=this._items,n=r.items,a=t.acquire();if(T.forEach(e=>{n.indexOf(e)!==i.indexOf(e)&&a.push(e)}),r.listeners&&(o.length||s.length||a.length)){const e={target:this,added:o,removed:s,moved:a},t=r.listeners.length;for(let o=0;o<t;o++){const t=r.listeners[o];t.removed||t.callback.call(this,e)}}t.release(o),t.release(s),t.release(a)}w.clear(),x.clear(),T.clear()}};return e.__decorate([c.property()],O.prototype,"_updating",void 0),e.__decorate([c.property()],O.prototype,"length",void 0),e.__decorate([c.property()],O.prototype,"items",null),e.__decorate([c.property({readOnly:!0})],O.prototype,"updating",null),O=y=e.__decorate([p.subclass("esri.core.Collection")],O),O})},"esri/core/ArrayPool":function(){define(["./ObjectPool"],function(e){"use strict";function t(e){e.length=0}class r{constructor(r=50,o=50){this._pool=new e(Array,void 0,t,o,r)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return o.acquire()}static release(e){return o.release(e)}static prune(){o.prune()}}const o=new r(100);return r})},"esri/core/ObjectPool":function(){define(["./has"],function(e){"use strict";class t{constructor(e,t,r,o=1,s=0){this._ctor=e,this._acquireFunction=t,this._releaseFunction=r,this.allocationSize=o,this._pool=new Array(s),this._initialSize=s;for(let e=0;e<s;e++)this._pool[e]=new this._ctor;this.allocationSize=Math.max(o,1)}destroy(){this.prune(0)}acquire(...e){let r;if(t.test.disabled)r=new this._ctor;else{if(0===this._pool.length){const e=this.allocationSize;for(let t=0;t<e;t++)this._pool[t]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...e):function(e){return e?.acquire&&"function"==typeof e.acquire}(r)&&r.acquire(...e),r}release(e){e&&!t.test.disabled&&(this._releaseFunction?this._releaseFunction(e):function(e){return e?.release&&"function"==typeof e.release}(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let t=e;t<this._pool.length;++t){const e=this._pool[t];this._dispose(e)}this._pool.length=e}}_dispose(e){e.dispose&&"function"==typeof e.dispose&&e.dispose()}static{this.test={disabled:!!e("esri-tests-disable-memory-pools")}}}return t})},"esri/core/Evented":function(){define(["exports","./Accessor","./handleUtils"],function(e,t,r){"use strict";const o=e=>{const t=e;return class extends t{constructor(){super(...arguments),this._listenersMap=null}clearEvents(){this._listenersMap?.clear(),this._listenersMap=null}destroy(){this.clearEvents()}emit(e,t){let r=this._listenersMap?.get(e);if(!r)return!1;let o=!1;for(const e of r.slice()){const r="deref"in e?e.deref():e;r?r?.call(this,t):o=!0}return o&&(r=r.filter(e=>!("deref"in e)||null!=e.deref()),this._listenersMap.set(e,r)),r.length>0}on(e,t){if(Array.isArray(e)){const o=e.map(e=>this.on(e,t));return r.handlesGroup(o)}if(e.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??=new Map;const o=this._listenersMap.get(e)||[];return o.push(t),this._listenersMap.set(e,o),r.makeHandle(()=>{const r=this._listenersMap?.get(e),o=r?.indexOf(t)??-1;o>=0&&r.splice(o,1)})}once(e,t){const r=this.on(e,e=>{r.remove();const o="deref"in t?t.deref():t;o?.call(null,e)});return r}hasEventListener(e){const t=this._listenersMap?.get(e);return null!=t&&t.length>0}}},s=o(class{}),i=s,n=o(t);e.EventEmitter=i,e.Evented=s,e.EventedAccessor=n,e.EventedMixin=o,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/Accessor":function(){define(["./deprecate","./Handles","./Logger","./maybe","./accessorSupport/beforeDestroy","./accessorSupport/get","./accessorSupport/Lifecycle","./accessorSupport/metadata","./accessorSupport/Properties","./accessorSupport/set","./accessorSupport/testSupport","./accessorSupport/watch","./accessorSupport/decorators/property","./accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h){"use strict";var y,f;function m(e){if(null==e)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return e.constructor?.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const g=Symbol("Accessor-Handles"),b=Symbol("Accessor-Initialized");class _{static{y=g,f=b}static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:t,declaredClass:r,constructor:o}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const s=this;class i extends s{constructor(...e){super(...e),this.inherited=null,o&&o.apply(this,e)}}a.getPropertiesMetadata(i.prototype);for(const t in e){const r=e[t];i.prototype[t]="function"==typeof r?function(...e){const o=this.inherited;let i;this.inherited=function(...e){if(s.prototype[t])return s.prototype[t].apply(this,e)};try{i=r.apply(this,e)}catch(e){throw this.inherited=o,e}return this.inherited=o,i}:e[t]}for(const e in t){const r=m(t[e]);d.property(r)(i.prototype,e)}return h.subclass(r)(i)}static freeze(e){return e instanceof _?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof _?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){if(this[y]=null,this[f]=!1,this.constructor===_)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const t=new l(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:t}),e.length>0&&(t.ctorArgs=this.normalizeCtorArgs?.apply(this,e)??e[0]),u.getAccessorInterceptor()?.onInstanceConstruct(this)}postscript(){const e=this.__accessor__,t=e.ctorArgs;e.initialize(),t&&(this.set(t),e.ctorArgs=null),e.constructed(),this.initialize(),this[b]=!0}initialize(){}[s.beforeDestroySymbol](){this[g]=o.destroyMaybe(this[g])}destroy(){this.destroyed||(p.removeTarget(this),this.__accessor__.destroy(),u.getAccessorInterceptor()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[b]}get destroyed(){return this.__accessor__?.lifecycle===n.Lifecycle.DESTROYED||!1}get destroying(){return this.__accessor__?.lifecycle===n.Lifecycle.DESTROYING||!1}commitProperty(e){i.get(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,t){return c.set(this,e,t),this}watch(t,o,s){return e.deprecatedFunction(r.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),p.watch(this,t,o,s)}addHandles(e,r){if(this.destroyed){const t=Array.isArray(e)?e:[e];for(const e of t)e.remove();return}(this[g]??=new t).add(e,r)}removeHandles(e){this[g]?.remove(e)}removeAllHandles(){this[g]?.removeAll()}removeHandlesReference(e){this[g]?.removeReference(e)}hasHandles(e){return!0===this[g]?.has(e)}_override(e,t){void 0===t?this.__accessor__.clearOverride(e):this.__accessor__.override(e,t)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,t){null==t?this.__accessor__.clearOverride(e):this.__accessor__.override(e,t)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,t){return this.__accessor__.internalSet(e,t),this}}return _})},"esri/core/deprecate":function(){define(["exports","./has"],function(e,t){"use strict";const r=new WeakMap,o="https://www.esriurl.com/";function s(e,o,s={}){if(t("esri-deprecation-warnings")){const{replacement:t,version:i,see:n,warnOnce:a}=s;let l=o;if(t&&(l+=`\n\t🛠️ Replacement: ${t}`),i&&(l+=`\n\t⚙️ Version: ${i}`),n)if(Array.isArray(n)){l+="\n\t🔗 See for more details:";for(const e of n)l+=`\n\t\t${e}`}else l+=`\n\t🔗 See ${n} for more details.`;!function(e,t,o=!1){const s=`🛑 DEPRECATED - ${t}`;if(!o)return void e.warn(s);let i=r.get(e);i||(i=new Set,r.set(e,i)),i.has(t)||(i.add(t),e.warn(s))}(e,l,a)}}e.deprecateUnnecessaryViewModel=function(e,r,i,n={}){t("esri-deprecation-warnings")&&s(e,`This view model is deprecated. Use the ${r} component directly instead.`,{see:[`${r} component reference: ${o}${i}/`,`Esri's move to web components: ${o}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...n})},e.deprecateWidget=function(e,r,i,n={}){t("esri-deprecation-warnings")&&s(e,`This widget is deprecated. Use the ${r} component instead.`,{see:[`${r} component reference: ${o}${i}/`,`Esri's move to web components: ${o}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...n})},e.deprecated=s,e.deprecatedConstructorSignature=function(e,r,o={}){t("esri-deprecation-warnings")&&s(e,`Multiple argument constructor: ${r}`,{warnOnce:!0,replacement:`new ${r}({ <your properties here> })`,...o})},e.deprecatedFunction=function(e,r,o={}){if(t("esri-deprecation-warnings")){const{moduleName:t}=o;s(e,"Function: "+(t?t+"::":"")+r+"()",o)}},e.deprecatedModule=function(e,r,o={}){t("esri-deprecation-warnings")&&s(e,`Module: ${r}`,o)},e.deprecatedProperty=function(e,r,o={}){if(t("esri-deprecation-warnings")){const{moduleName:t}=o;s(e,"Property: "+(t?t+"::":"")+r,o)}},e.deprecatedPropertyValue=function(e,r,o,i={}){if(t("esri-deprecation-warnings")){const{moduleName:t}=i;s(e,`'${(t?t+"::":"")+r}' value: ${o}`,i)}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/Handles":function(){define(["./iteratorUtils"],function(e){"use strict";class t{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(t=>{e+=t.length}),e}add(t,r){if(e.isIterable(t)){const e=this._getOrCreateGroup(r);for(const r of t)s(r)&&e.push(r)}else s(t)&&this._getOrCreateGroup(r).push(t);return this}forEach(e,t){if("function"==typeof e)this._groups.forEach(t=>t.forEach(e));else{const r=this._getGroup(e);r&&t&&r.forEach(t)}}has(e){return this._groups.has(r(e))}remove(t){if("string"!=typeof t&&e.isIterable(t)){for(const e of t)this.remove(e);return this}return this.has(t)?(o(this._getGroup(t)),this._groups.delete(r(t)),this):this}removeAll(){return this._groups.forEach(o),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(r(e),t),t}_getGroup(e){return this._groups.get(r(e))}}function r(e){return e||"_default_"}function o(e){for(const r of e)r instanceof t?r.removeAll():r.remove()}function s(e){return null!=e&&(!!e.remove||e instanceof t)}return t})},"esri/core/iteratorUtils":function(){define(["exports"],function(e){"use strict";e.cache=function(e){const t=[];return function*(){yield*t;for(const r of e)t.push(r),yield r}},e.find=function(e,t){for(const r of e)if(null!=r&&t(r))return r},e.isIterable=function(e){return null!=e&&"function"==typeof e[Symbol.iterator]},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/beforeDestroy":function(){define(["exports"],function(e){"use strict";const t=Symbol("Accessor-beforeDestroy");e.beforeDestroySymbol=t,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/get":function(){define(["exports","./utils"],function(e,t){"use strict";function r(e,r){const o=e.endsWith("?")?e.slice(0,-1):e;if(null!=r.getItemAt||Array.isArray(r)){const e=parseInt(o,10);if(!isNaN(e))return Array.isArray(r)?r[e]:r.at(e)}const s=t.getProperties(r);return t.isPropertyDeclared(s,o)?s.get(o):r[o]}function o(e,t,s){if(null==e)return e;const i=r(t[s],e);return!i&&s<t.length-1?void 0:s===t.length-1?i:o(i,t,s+1)}function s(e,s,i=0){return"string"!=typeof s||s.includes(".")?o(e,t.pathToArray(s),i):r(s,e)}e.exists=function(e,t){return void 0!==s(t,e)},e.get=function(e,t){return s(e,t)},e.valueOf=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/utils":function(){define(["exports","../handleUtils","../lang"],function(e,t,r){"use strict";function o(e){return e.__accessor__??null}function s(e,t,o){return t?Object.keys(t).reduce((e,i)=>{const n=i;if("__proto__"===n)return e;let a=null,l="merge";if(o&&(a=o.path?`${o.path}.${i}`:i,l=o.policy(a)),"replace"===l)return e[n]=t[n],e;if("replace-arrays"===l&&Array.isArray(e[n]))return e[n]=t[n],e;if(void 0===e[n])return e[n]=r.clone(t[n]),e;let c=e[n],u=t[n];if(c===u)return e;if(Array.isArray(u)||Array.isArray(e))c=c?Array.isArray(c)?e[n]=c.slice():e[n]=[c]:e[n]=[],u&&(Array.isArray(u)||(u=[u]),u.forEach(e=>{c.includes(e)||c.push(e)}));else if(u&&"object"==typeof u)if(o){const t=o.path;o.path=a,e[n]=s(c,u,o),o.path=t}else e[n]=s(c,u,null);else e.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(e[n]=u);return e},e||{}):e}function i(e){return e.includes(",")?e.split(",").map(e=>e.trim()):[e.trim()]}function n(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...i(r));return t}return i(e)}e.getDependsInfo=function(e,t){const r=o(e);return r?r.getDependsInfo(e,t,""):""},e.getProperties=o,e.isPropertyDeclared=function(e,t){return null!=e?.metadata?.[t]},e.merge=function(e,t,r){return s(e,t,r?{policy:r,path:""}:null)},e.parse=function(e,r,o,s){const i=n(r);if(1!==i.length){const r=i.map(t=>s(e,t,o));return t.handlesGroup(r)}return s(e,i[0],o)},e.pathToArray=function(e){return Array.isArray(e)?e:e.split(".")},e.splitPath=n,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/Lifecycle":function(){define(["exports"],function(e){"use strict";e.Lifecycle={INITIALIZING:0,CONSTRUCTING:1,CONSTRUCTED:2,DESTROYING:3,DESTROYED:4},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/metadata":function(){define(["exports","../lang","./utils"],function(e,t,r){"use strict";function o(e){let r=e.constructor.__accessorMetadata__;const o=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(r){if(!o){r=Object.create(r);for(const e in r)r[e]=t.clone(r[e]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:r,enumerable:!1,configurable:!0,writable:!0})}}else r={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:r,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}const s=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function i(e){return s.test(e)?"replace":"merge"}e.getPropertiesMetadata=o,e.getPropertyMetadata=function(e,t){const r=o(e);let s=r[t];return s||(s=r[t]={}),s},e.mergeProperty=function(e,t){return r.merge(e,t,i)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/Properties":function(){define(["../has","../lang","../Logger","../ObjectPool","./Lifecycle","./Property","./PropertyOrigin","./Store","./tracking","./tracking/Flags","./tracking/TrackingTarget"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";function p(e,t,r){return void 0!==e}function d(e,t,r,o){return!(void 0===e||null==r&&e.flags&c.Flags.NonNullable&&(o.lifecycle,s.Lifecycle.INITIALIZING,1))}const h=new o(class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}});return class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=s.Lifecycle.INITIALIZING,this.store=new a.Store,this.mutable=!0,this._origin=7;const t=this.host.constructor.__accessorMetadata__;for(const e in t){const r=new i.Property(e,t[e]);this.propertiesByName.set(e,r)}this.metadata=t}initialize(){this.lifecycle=s.Lifecycle.CONSTRUCTING}constructed(){this.lifecycle=s.Lifecycle.CONSTRUCTED}destroy(){this.lifecycle=s.Lifecycle.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==s.Lifecycle.INITIALIZING}get(e){const t=this.propertiesByName.get(e);if(!p(t))return;if(t.metadata.get)return t.getComputed(this);this.mutable&&l.trackAccess(t);const r=this.store;return r.has(e)?r.get(e):t.metadata.value}originOf(e){const t=this.store.originOf(e);if(void 0===t){const t=this.propertiesByName.get(e);if(void 0!==t&&t.flags&c.Flags.HasDefaultValue)return"defaults"}return n.idToName(t)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const t=this.propertiesByName.get(e);if(p(t))return this.store.has(e)?this.store.get(e):t.metadata.value}internalSet(e,t){const r=this.propertiesByName.get(e);p(r)&&this._internalSet(r,t)}getDependsInfo(e,t,r){const o=this.propertiesByName.get(t);if(!p(o))return"";const s=new u.TrackingTarget,n=l.runTracked(s,()=>o.metadata.get?.call(e));let a=`${r}${e.declaredClass.split(".").pop()}.${t}: ${n}\n`;const c=s.accessed??new Set;if(0===c.size)return a;r+="  ";for(const e of c)e instanceof i.Property&&(a+=`${r}${e.propertyName}: undefined\n`);return a}setAtOrigin(e,t,r){const o=this.propertiesByName.get(e);if(p(o))return this._setAtOrigin(o,t,r)}isOverridden(e){const t=this.propertiesByName.get(e);return void 0!==t&&!!(t.flags&c.Flags.Overridden)}clearOrigin(e,t){const r=this.store,o=this.propertiesByName.get(e);if(!p(o))return;const s=r.isAtOrigin(e,t)&&!(o.flags&c.Flags.Overridden);r.delete(e,t),s&&o.notifyChange()}clearOverride(e){const t=this.propertiesByName.get(e);t&&t.flags&c.Flags.Overridden&&(t.flags&=~c.Flags.Overridden,t.notifyChange())}override(e,t){const r=this.propertiesByName.get(e);if(!d(r,0,t,this))return;const o=r.metadata.cast;if(o){const e=this._cast(o,t),{valid:r,value:s}=e;if(h.release(e),!r)return;t=s}r.flags|=c.Flags.Overridden,this._internalSet(r,t)}set(e,t){const r=this.propertiesByName.get(e);if(!d(r,0,t,this))return;const o=r.metadata.cast;if(o){const e=this._cast(o,t),{valid:r,value:s}=e;if(h.release(e),!r)return;t=s}const s=r.metadata.set;s?s.call(this.host,t):this._internalSet(r,t)}setDefaultOrigin(e){this._origin=n.nameToId(e)}getDefaultOrigin(){return n.idToName(this._origin)}notifyChange(e){const t=this.propertiesByName.get(e);void 0!==t&&t.notifyChange()}invalidate(e){const t=this.propertiesByName.get(e);void 0!==t&&t.invalidate()}commit(e){const t=this.propertiesByName.get(e);void 0!==t&&t.commit()}_internalSet(e,t){const r=this.lifecycle!==s.Lifecycle.INITIALIZING?this._origin:0;this._setAtOrigin(e,t,r)}_setAtOrigin(e,r,o){const s=this.store,i=e.propertyName;if(s.isAtOrigin(i,o)&&t.equals(r,s.get(i))&&~e.flags&c.Flags.Overridden)return;const n=s.isBelowOrigin(i,o)||s.isAtOrigin(i,o);n&&e.invalidate(),s.set(i,r,o),n&&e.commit(),l.initializeDependencyTracking(this.host,e)}_cast(e,t){const r=h.acquire();return r.valid=!0,r.value=t,e&&(r.value=e.call(this.host,t,r)),r}}})},"esri/core/accessorSupport/Property":function(){define(["exports","./ObservableBase","./tracking","./tracking/Flags","./tracking/TrackingTarget"],function(e,t,r,o,s){"use strict";class i extends t.ObservableBase{constructor(e,t){super(),this.propertyName=e,this.metadata=t,this.trackingTarget=new s.TrackingTarget(this),this.flags=0,this.flags=o.Flags.Dirty|(t.nonNullable?o.Flags.NonNullable:0)|(t.hasOwnProperty("value")?o.Flags.HasDefaultValue:0)|(void 0===t.get?o.Flags.DepTrackingInitialized:0)|(void 0===t.dependsOn?o.Flags.AutoTracked:0)}destroy(){this.flags&o.Flags.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&r.trackAccess(this);const t=e.store,s=this.propertyName,i=this.flags,n=t.get(s);if(i&o.Flags.Computing)return n;if(~i&o.Flags.Dirty&&t.has(s))return n;this.flags|=o.Flags.Computing;const a=e.host;let l;i&o.Flags.AutoTracked?l=r.runTracked(this.trackingTarget,this.metadata.get,a):(r.trackExplicitDependencies(a,this),l=this.metadata.get.call(a)),this.flags|=o.Flags.DepTrackingInitialized,t.set(s,l,1);const c=t.get(s);return c===n?this.flags&=~o.Flags.Dirty:r.runUntracked(this.commit,this),this.flags&=~o.Flags.Computing,c}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~o.Flags.Dirty,this.onCommitted()}onInvalidated(){~this.flags&o.Flags.Overridden&&(this.flags|=o.Flags.Dirty);const e=this._observers;if(e&&e.length>0)for(const t of e)t.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const t=e.slice();for(const e of t)e.onCommitted()}}}e.Property=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/ObservableBase":function(){define(["exports","../handleUtils","./tracking/ObservationHandle"],function(e,t,r){"use strict";const o=t.makeHandle();e.ObservableBase=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return o;null==this._observers&&(this._observers=[]);const t=this._observers;let s=!1,i=!1;const n=t.length;for(let r=0;r<n;++r){const o=t[r];if(o.destroyed)i=!0;else if(o===e){s=!0;break}}return s||(t.push(e),i&&this._removeDestroyedObservers()),new r.ObservationHandle(t,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||0===e.length)return;const t=e.length;let r=0;for(let o=0;o<t;++o){for(;o+r<t&&e[o+r].destroyed;)++r;if(r>0){if(!(o+r<t))break;e[o]=e[o+r]}}e.length=t-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(null!=e){for(const t of e)t.onCommitted();this._observers=null}}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/ObservationHandle":function(){define(["exports","../../arrayUtils"],function(e,t){"use strict";e.ObservationHandle=class{constructor(e,t){this._observers=e,this._observer=t}remove(){t.remove(this._observers,this._observer)}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking":function(){define(["exports","../has","../Logger","./utils","./tracking/Flags","./tracking/TrackingTarget"],function(e,t,r,o,s,i){"use strict";const n=new i.TrackingTarget,a=[];let l=n;function c(e){l.onAccessed(e)}let u=!1,p=!1;function d(e,t,r){if(u)return h(e,t,r);let o=null;return y(e),o=t.call(r),f(),o}function h(e,t,o){const s=u;u=!0,y(e);let i=null;try{i=t.call(o)}catch(e){p&&r.getLogger("esri.core.accessorSupport.tracking").error(e)}return f(),u=s,i}function y(e){l=e,a.push(e)}function f(){const e=a.length;if(e>1){const t=a.pop();l=a[e-2],t.onTrackingEnd()}else if(1===e){const e=a.pop();l=n,e.onTrackingEnd()}else l=n}function m(e,t){if(t.flags&s.Flags.DepTrackingInitialized)return;t.flags|=s.Flags.DepTrackingInitialized;const r=p;p=!1,t.flags&s.Flags.AutoTracked?h(t.trackingTarget,t.metadata.get,e):b(e,t),p=r}const g=[];function b(e,t){t.flags&s.Flags.ExplicitlyTracking||(t.flags|=s.Flags.ExplicitlyTracking,h(t.trackingTarget,()=>{const r=t.metadata.dependsOn||g;for(const t of r)if("string"!=typeof t||t.includes(".")){const r=o.pathToArray(t);for(let t=0,o=e;t<r.length&&null!=o&&"object"==typeof o;++t)o=_(o,r[t],t!==r.length-1)}else _(e,t,!1)}),t.flags&=~s.Flags.ExplicitlyTracking)}function _(e,t,r){const s=t.endsWith("?")?t.slice(0,-1):t;if(null!=e.getItemAt||Array.isArray(e)){const t=parseInt(s,10);if(!isNaN(t))return Array.isArray(e)?e[t]:e.at(t)}const i=o.getProperties(e);if(i){const t=i.propertiesByName.get(s);t&&(c(t),m(e,t))}return r?e[s]:void 0}e.initializeDependencyTracking=m,e.runTracked=d,e.runTrackedNoThrow=h,e.runUntracked=function(e,t){return d(n,e,t)},e.trackAccess=c,e.trackExplicitDependencies=b,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/Flags":function(){define(["exports"],function(e){"use strict";e.Flags={Dirty:1,Overridden:2,Computing:4,NonNullable:8,HasDefaultValue:16,DepTrackingInitialized:32,AutoTracked:64,ExplicitlyTracking:128},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/TrackingTarget":function(){define(["exports"],function(e){"use strict";e.TrackingTarget=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){this.accessed?.clear(),this.clear()}onAccessed(e){null!=this._observer&&e!==this._observer&&(null==this.accessed&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){null!=this._observer&&(this.clear(),null!=this.accessed&&(null==this._handles&&(this._handles=[]),this.accessed.forEach(e=>{this._handles.push(e.observe(this._observer))}),this.accessed.clear()))}clear(){if(null!=this._handles){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/PropertyOrigin":function(){define(["exports"],function(e){"use strict";function t(e){switch(e){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"link-chart":return 6;case"user":return 7;default:return null}}function r(e){switch(e){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"link-chart";case 7:return"user"}}e.idToName=r,e.idToReadableName=function(e){return r(e)},e.idToWritableName=function(e){return r(e)},e.nameToId=t,e.originIdNum=8,e.readableNameToId=function(e){return t(e)},e.writableNameToId=function(e){return t(e)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/Store":function(){define(["exports","../lang"],function(e,t){"use strict";class r{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const o=new r;return this._values.forEach((r,s)=>{e&&e.has(s)||o.set(s,t.clone(r))}),o}get(e){return this._values.get(e)}originOf(){return 7}keys(){return[...this._values.keys()]}set(e,t){this._values.set(e,t)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}isAtOrigin(e,t){return this.has(e)}isBelowOrigin(e,t){return!this.has(e)}forEach(e){this._values.forEach(e)}}e.Store=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/set":function(){define(["exports","../Error","../has","../Logger","./get"],function(e,t,r,o,s){"use strict";e.set=function e(o,i,n){if(o&&i)if("object"==typeof i)for(const t of Object.getOwnPropertyNames(i))e(o,t,i[t]);else{if(i.includes(".")){const t=i.split("."),r=t.splice(-1,1)[0];return void e(s.get(o,t),r,n)}const a=o.__accessor__;null!=a&&function(e,o){if(r("esri-unknown-property-errors")&&!function(e,t){return null!=t.metadata[e]}(e,o))throw new t("set:unknown-property",function(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}(e,o))}(i,a),o[i]=n}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/testSupport":function(){define(["exports"],function(e){"use strict";let t;e.getAccessorInterceptor=function(){return t},e.setAccessorInterceptor=function(e){t=e},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/watch":function(){define(["exports","../ArrayPool","../handleUtils","../lang","../ReentrantObjectPool","../scheduling","../SetUtils","../uid","./get","./Lifecycle","./trackingUtils","./utils"],function(e,t,r,o,s,i,n,a,l,c,u,p){"use strict";class d{constructor(){this.uid=a.generateUID(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static{this.pool=new s.ReentrantObjectPool(d)}static acquireUntracked(e,t,r,s,i){return this.pool.acquire(0,e,t,r,s,i,o.equals)}static acquireTracked(e,t,r,o){return this.pool.acquire(1,e,t,r,null,null,o)}notify(e,t){0===this.type?this.callback.call(this.target,e,t,this.path,this.target):this.callback.call(null,e,t,void 0,void 0)}acquire(e,t,r,o,s,i,n){this.uid=a.generateUID(),this.removed=!1,this.type=e,this.oldValue=t,this.callback=r,this.getValue=o,this.target=s,this.path=i,this.equals=n}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=a.generateUID(),this.removed=!0}}const h=new t,y=new Set;let f;function m(e){y.delete(e),y.add(e),f||(f=i.schedule(b))}function g(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function b(){let e=10;for(;f&&e--;){f=null;const e=_(),t=h.acquire();for(const r of e){const e=r.uid;g(r),e===r.uid&&r.removed&&t.push(r)}for(const e of y)e.removed&&(t.push(e),y.delete(e));for(const e of t)d.pool.release(e);h.release(t),h.release(e),S.forEach(e=>e())}}function _(){const e=h.acquire();e.length=y.size;let t=0;for(const r of y)e[t]=r,++t;return y.clear(),e}const S=new Set;e.afterDispatch=function(e){return S.add(e),r.makeHandle(()=>S.delete(e))},e.dispatch=b,e.isValueInUse=function(e){return n.someSet(y,t=>t.oldValue===e)},e.removeTarget=function(e){for(const t of y.values())t.target===e&&(t.removed=!0)},e.watch=function(e,t,s,i=!1){return e.__accessor__&&e.__accessor__.lifecycle!==c.Lifecycle.DESTROYED?i?function(e,t,r){const s=p.parse(e,t,r,(e,t,r)=>{let i=!1;return u.reaction(()=>l.valueOf(e,t),(n,a)=>{e.__accessor__.lifecycle!==c.Lifecycle.DESTROYED?i||(i=!0,o.equals(a,n)||r.call(e,n,a,t,e),i=!1):s.remove()})});return s}(e,t,s):function(e,t,o){let s=p.parse(e,t,o,(e,t,o)=>{let i,n,a=u.reactionDeferred(()=>l.valueOf(e,t),(r,a)=>{e.__accessor__?.lifecycle===c.Lifecycle.DESTROYED||i&&i.uid!==n?s.remove():(i||(i=d.acquireUntracked(r,o,a,e,t),n=i.uid),m(i))});return r.makeHandle(()=>{a.remove(),i&&(i.uid!==n||i.removed||(i.removed=!0,m(i)),i=null),s=a=null})});return s}(e,t,s):r.makeHandle()},e.watchTracked=function(e,t,s=!1,i=o.equalsShallow){return s?function(e,t,r){let o=!1;return u.reaction(e,(e,s)=>{o||(o=!0,r(s,e)||t(e,s),o=!1)})}(e,t,i):function(e,t,o){let s,i,n=u.reactionDeferred(e,(e,r)=>{s&&s.uid!==i?n.remove():(s||(s=d.acquireTracked(e,t,r,o),i=s.uid),m(s))});return r.makeHandle(()=>{n.remove(),s&&(s.uid!==i||s.removed||(s.removed=!0,m(s)),s=null),n=null})}(e,t,i)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/ReentrantObjectPool":function(){define(["exports","./ObjectPool"],function(e,t){"use strict";e.ReentrantObjectPool=class extends t{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const t=super.acquire(...e);return this._set.delete(t),t}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/scheduling":function(){define(["exports","./nextTick","./PerformanceSampler","./PooledArray","./promiseUtils","./time"],function(e,t,r,o,s,i){"use strict";class n{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}}class a{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}}let l=0,c=0;const u={time:i.Milliseconds(0),deltaTime:i.Milliseconds(0),elapsedFrameTime:i.Milliseconds(0),frameDuration:i.Milliseconds(0)},p=["prepare","preRender","render","postRender","update","finish"],d=[],h=new o;class y{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,f()}}function f(){null==_&&(l=performance.now(),_=requestAnimationFrame(S))}const m={frameTasks:h,willDispatch:!1,clearFrameTasks:function(e=!1){h.forAll(e=>{e.removed=!0}),e&&w()},dispatch:x,executeFrameTasks:function(e){const t=i.Milliseconds(e-l);l=e;const r=c>0?c:1e3/60,o=Math.max(0,t-r);u.time=e,u.frameDuration=i.Milliseconds(r-o);for(let r=0;r<p.length;r++){const o=performance.now(),s=p[r];h.forAll(o=>{o.paused||o.removed||(0===r&&o.ticks++,o.phases[s]&&(u.elapsedFrameTime=i.Milliseconds(performance.now()-e),u.deltaTime=0===o.ticks?i.Milliseconds(0):t,o.phases[s]?.call(o,u)))}),I[r].push(performance.now()-o)}w(),O.push(performance.now()-e)},reschedule:function(){null!=_&&(cancelAnimationFrame(_),_=requestAnimationFrame(S))}};function g(e){const r=new a(e);return d.push(r),m.willDispatch||(m.willDispatch=!0,t.nextTick(x)),r}function b(e){const t=new n(e);return h.push(t),f(),new y(t)}let _=null;function S(){const e=performance.now();_=null;const t=h.some(e=>!e.paused&&!e.removed);_=t?requestAnimationFrame(S):null,m.executeFrameTasks(e)}const v=new o;function w(){h.forAll(e=>{e.removed&&v.push(e)}),h.removeUnorderedMany(v.data,v.length),v.clear()}function x(){for(;d.length;){const e=d.shift();e.isActive&&e.callback()}m.willDispatch=!1}function T(e=1,r){const o=s.createResolver(),i=()=>{s.isAborted(r)?o.reject(s.createAbortError()):0===e?o():(--e,t.nextTick(()=>i()))};return i(),o.promise}function M(e){return T(1,e)}const I=p.map(e=>new r(e)),O=new r("total");e.FrameTaskHandle=y,e.addFrameTask=b,e.cleanupScheduling=function(){h.prune(),v.prune()},e.debug=m,e.performanceInfo=I,e.performanceTotal=O,e.schedule=g,e.setFrameDuration=function(e){c=Math.max(0,e)},e.waitAnimationFrame=async function(e){await M(e),await new Promise(t=>requestAnimationFrame(()=>{e?.aborted||t()}))},e.waitRender=function(){const e=s.createResolver(),t=b({postRender:()=>{t.remove(),g(e)}});return e.promise},e.waitTick=M,e.waitTicks=T,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/nextTick":function(){define(["exports"],function(e){"use strict";const t=[];e.nextTick=function(e){t.push(e),1===t.length&&queueMicrotask(()=>{const e=t.slice();t.length=0;for(const t of e)t()})},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/PerformanceSampler":function(){define(function(){"use strict";return class{constructor(e,t=30){this.name=e,this._counter=0,this._samples=new Array(t)}push(e){null!=e&&(this._samples[++this._counter%this._samples.length]=e)}set(e){null!=e&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,t)=>e-t)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,t)=>e+t,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}}})},"esri/core/PooledArray":function(){define(["./arrayUtils","./compilerUtils","./heapSort"],function(e,t,r){"use strict";class o{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new e.PositionHint,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),void 0!==t.deallocator&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>s(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const t=new Array;for(let r=0;r<this._length;r++){const o=this.data[r];e(o)&&t.push(o)}return t}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,t){const r=this.data.indexOf(e,t);return-1!==r&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let t=e;t<this._length;++t)this.data[t]=this._deallocator(this.data[t]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,t=e.length){for(let r=0;r<t;r++)this.data[this._length++]=e[r]}fill(e,t){for(let r=0;r<t;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,s(this)}pop(){if(0===this.length)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(r){const o=e.indexOf(this.data,t.toConst(r),this.length,this._hint);if(-1!==o)return this.data.splice(o,1),this.length=this.length-1,r}removeUnordered(r){return this.removeUnorderedIndex(e.indexOf(this.data,t.toConst(r),this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,o){this.length=e.removeUnorderedMany(this.data,t,this.length,r,this._hint,o),this._shrink()}front(){if(0!==this.length)return this.data[0]}back(){if(0!==this.length)return this.data[this.length-1]}swapElements(e,t){if(e>=this.length||t>=this.length||e===t)return;const r=this.data[e];this.data[e]=this.data[t],this.data[t]=r}sort(e){r.sort(this.data,0,this.length,e)}iterableSort(e){return r.iterableSort(this.data,0,this.length,e)}some(e,t){for(let r=0;r<this.length;++r)if(e.call(t,this.data[r],r,this.data))return!0;return!1}find(e,t){const{data:r,length:o}=this;for(let s=0;s<o;++s)if(e.call(t,r[s]))return r[s]}filterInPlace(e,t){let r=0;for(let o=0;o<this._length;++o){const s=this.data[o];e.call(t,s,o,this.data)&&(this.data[o]=this.data[r],this.data[r]=s,r++)}if(this._deallocator)for(let e=r;e<this._length;e++)this.data[e]=this._deallocator(this.data[e]);return this._length=r,this._shrink(),this}forAll(e,t){const{data:r,length:o}=this;for(let s=0;s<o;++s)e.call(t,r[s],s,r)}forEach(e,t){this.data.slice(0,this.length).forEach(e,t)}map(e,t){const r=new Array(this.length);for(let o=0;o<this.length;++o)r[o]=e.call(t,this.data[o],o,this.data);return r}reduce(e,t){let r=t;for(let t=0;t<this.length;++t)r=e(r,this.data[t],t,this.data);return r}has(e){const t=this.length,r=this.data;for(let o=0;o<t;++o)if(r[o]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}}function s(e){e.data.length>1.5*e.length&&(e.data.length=Math.floor(1.1*e.length))}return o})},"esri/core/heapSort":function(){define(["exports"],function(e){"use strict";const t=(e,t,r,o)=>{let s=t,i=t;const n=r>>>1,a=e[s-1];for(;i<=n;){i=s<<1,i<r&&o(e[i-1],e[i])<0&&++i;const t=e[i-1];if(o(t,a)<=0)break;e[s-1]=t,s=i}e[s-1]=a},r=(e,t)=>e<t?-1:e>t?1:0;e.iterableSort=function*(e,o,s,i){void 0===o&&(o=0),void 0===s&&(s=e.length),void 0===i&&(i=r);for(let r=s>>>1;r>o;r--)t(e,r,s,i),yield;const n=o+1;for(let r=s-1;r>o;r--){const s=e[o];e[o]=e[r],e[r]=s,t(e,n,r,i),yield}},e.sort=function(e,o,s,i){void 0===o&&(o=0),void 0===s&&(s=e.length),void 0===i&&(i=r);for(let r=s>>>1;r>o;r--)t(e,r,s,i);const n=o+1;for(let r=s-1;r>o;r--){const s=e[o];e[o]=e[r],e[r]=s,t(e,n,r,i)}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/time":function(){define(["exports"],function(e){"use strict";e.Milliseconds=function(e){return e},e.Seconds=function(e){return e},e.millisecondsFromSeconds=function(e){return 1e3*e},e.now=function(){return performance.now()},e.secondsFromMilliseconds=function(e){return.001*e},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/SetUtils":function(){define(["exports"],function(e){"use strict";function t(e,t){if(!t)return e;for(const r of t)null!=r&&e.add(r);return e}function r(e,r){const o=new Set;return t(o,e),t(o,r),o}function o(e,t){const r=new Set;for(const o of t)e.has(o)&&r.add(o);return r}function s(e,t){const r=new Set(e);for(const e of t)r.delete(e);return r}e.addMany=t,e.addMaybe=function(e,t){return null!=t&&e.add(t),e},e.difference=s,e.equals=function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t||e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0},e.first=function(e){return e.values().next().value},e.intersection=o,e.isSubsetOf=function(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const r of e)if(!t.has(r))return!1;return!0},e.last=function(e){let t;for(t of e);return t},e.someSet=function(e,t){for(const r of e.values())if(t(r))return!0;return!1},e.symmetricDifference=function(e,t){return s(r(e,t),o(e,t))},e.union=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/uid":function(){define(["exports"],function(e){"use strict";let t=0;e.generateUID=function(){return++t},e.nullUid=0,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/trackingUtils":function(){define(["exports","../handleUtils","./tracking","./tracking/SimpleTrackingTarget"],function(e,t,r,o){"use strict";let s=!1;const i=[];function n(e){i.includes(e)||i.unshift(e)}function a(){for(;i.length;)i.pop()()}e.autorun=function(e,i){let l=!1,c=!1;const u=!!i?.sync;let p=new o.SimpleTrackingTarget(()=>{l||c||(c=!0,u?d():queueMicrotask(d))});function d(){c=!1,p&&!l&&(s?n(d):(p.clear(),s=!0,l=!0,r.runTracked(p,e),l=!1,s=!1,a()))}return l=!0,r.runTracked(p,e),l=!1,t.makeHandle(function(){p&&(p.destroy(),p=null)})},e.drainNotificationQueue=a,e.reaction=function(e,i){let l=new o.SimpleTrackingTarget(function t(){if(!l||u)return;if(s)return void n(t);const o=c;l.clear(),s=!0,u=!0,c=r.runTracked(l,e),u=!1,s=!1,i(c,o),a()}),c=null,u=!1;return u=!0,c=r.runTracked(l,e),u=!1,t.makeHandle(function(){l&&(l.destroy(),l=null,c=null)})},e.reactionDeferred=function(e,s){let i=new o.SimpleTrackingTarget(function(){s(n,a)}),n=null;function a(){return i?(i.clear(),n=r.runTracked(i,e),n):null}return a(),t.makeHandle(function(){i&&(i.destroy(),i=null),n=null})},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/SimpleTrackingTarget":function(){define(["exports","./TrackingTarget"],function(e,t){"use strict";class r extends t.TrackingTarget{constructor(e){super(new o(e)),this._observer&&s.register(this,new WeakRef(this._observer),this)}destroy(){this._observer&&s.unregister(this._observer),this.accessed?.clear(),this.clear(),this._observer?.destroy()}}class o{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(1===e)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=i}}const s=new FinalizationRegistry(e=>{e.deref()?.destroy()});function i(){}e.SimpleTrackingTarget=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/decorators/property":function(){define(["exports","../../Logger","../ensureType","../get","../metadata","../set"],function(e,t,r,o,s,i){"use strict";function n(e,t){if(e||t)return e?t?(r,o)=>t(e(r,o),o):e:t}e.composeCasters=n,e.property=function(e={}){return(a,l)=>{if(a===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${a.name}.${l}. Accessor does not support static properties.`);const c=Object.getOwnPropertyDescriptor(a,l),u=s.getPropertyMetadata(a,l);c&&(c.get||c.set?(u.get=c.get||u.get,u.set=c.set||u.set):"value"in c&&("value"in e&&t.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${l}" on "${a.constructor.name}" already defined in the metadata`,e),u.value=e.value=c.value)),null!=e.readOnly&&(u.readOnly=e.readOnly);const p=e.aliasOf;if(p){const e="string"==typeof p?p:p.source,t="string"==typeof p?null:!0===p.overridable;let r;u.dependsOn=[e],u.get=function(){let t=o.get(this,e);if("function"==typeof t){r||(r=e.split(".").slice(0,-1).join("."));const s=o.get(this,r);s&&(t=t.bind(s))}return t},u.readOnly||(u.set=t?function(e){this._override(l,e)}:function(t){i.set(this,e,t)})}const d=e.type,h=e.types;if(!u.cast){let t;d?t=function(e){let t=0,o=e;if(r.isLongFormType(e))return r.ensureLongFormType(e);for(;Array.isArray(o)&&1===o.length&&"string"!=typeof o[0]&&"number"!=typeof o[0];)o=o[0],t++;const s=o;if(r.isOneOf(s))return 0===t?r.ensureOneOf(s):r.ensureNArrayTyped(r.ensureOneOf(s),t);if(1===t)return r.ensureArray(s);if(t>1)return r.ensureNArray(s,t);const i=e;return i.from?i.from:r.ensureType(i)}(d):h&&(t=Array.isArray(h)?r.ensureArrayTyped(r.ensureOneOfType(h[0])):r.ensureOneOfType(h)),e.cast=n(e.cast,t)}s.mergeProperty(u,e),e.range&&(u.cast=r.ensureRange(u.cast,e.range))}},e.propertyJSONMeta=function(e,t,r){const o=s.getPropertyMetadata(e,r);o.json||(o.json={});let i=o.json;return void 0!==t&&(i.origins||(i.origins={}),i.origins[t]||(i.origins[t]={}),i=i.origins[t]),i},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/ensureType":function(){define(["exports","../has","../Logger","../MapUtils"],function(e,t,r,o){"use strict";const s=()=>r.getLogger("esri.core.accessorSupport.ensureTypes");function i(e){if(null==e)return e;const t=new Date(e);return isNaN(t.getTime())?(s().error("Accessor#set",`Invalid date value: '${e}', falling back to current date`),new Date):t}function n(e){return null==e?e:!!e}function a(e){return null==e?e:e.toString()}function l(e,t=0){return null==e?e:(e=parseFloat(e),isNaN(e)?t:e)}function c(e){return null==e?e:Math.round(parseFloat(e))}function u(e){return null}function p(e){return e?.constructor&&void 0!==e.constructor.__accessorMetadata__}function d(e,t){return null!=t&&e&&!(t instanceof e)}function h(e){return e&&"isCollection"in e}function y(e){return e?.Type?"function"==typeof e.Type?e.Type:e.Type.base:null}function f(e,t){return!!p(t)&&(s().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+g(e)+"'"),!0)}function m(e,t){return null==t?t:h(e)?function(e,t){if(!t?.constructor||!h(t.constructor))return f(e,t)?t:new e(t);const r=y(e.prototype.itemType),o=y(t.constructor.prototype.itemType);return r?o?r===o?t:r.prototype.isPrototypeOf(o.prototype)?new e(t):(f(e,t),t):new e(t):t}(e,t):d(e,t)?f(e,t)?t:new e(t):t}function g(e){return e?.prototype?.declaredClass||"unknown"}const b=new WeakMap;function _(e,t){const r=function(e){switch(e){case Number:return e=>l(e);case x:return c;case Boolean:return n;case String:return a;case Date:return i;case T:return u;default:return o.getOrCreateMapValue(b,e,()=>m.bind(null,e))}}(e);return 1===arguments.length?r:r(t)}function S(e,t,r){return 1===arguments.length?S.bind(null,e):t?Array.isArray(t)?t.map(t=>e(t,r)):[e(t,r)]:t}function v(e,t,r){return 0!==t&&Array.isArray(r)?r.map(r=>v(e,t-1,r)):e(r)}function w(e,t,r){if(2===arguments.length)return r=>w(e,t,r);if(!r)return r;r=v(e,t,r);let o=t,s=r;for(;o>0&&Array.isArray(s);)o--,s=s[0];if(void 0!==s)for(let e=0;e<o;e++)r=[r];return r}class x{}class T{}function M(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case x:return"integer";case Date:return"date";case T:return"null";default:return g(e.value)}case"array":return`array of ${M(e.value)}`;case"one-of":{const t=e.values.map(e=>M(e));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function I(e,t){if(null==e)return!0;switch(t.type){case"native":switch(t.value){case Number:case x:return"number"==typeof e;case Boolean:return"boolean"==typeof e;case String:return"string"==typeof e;case T:return null===e}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(e=>!I(e,t.value));case"one-of":return t.values.some(t=>I(e,t))}}e.Integer=x,e.Null=T,e.ensureArray=function(e,t){return 1===arguments.length?S(t=>_(e,t)):S(t=>_(e,t),t)},e.ensureArrayTyped=S,e.ensureBoolean=n,e.ensureClass=m,e.ensureDate=i,e.ensureInteger=c,e.ensureLongFormType=function e(t){switch(t.type){case"native":return _(t.value);case"array":return S(e(t.value));case"one-of":return function(e){let t=null;return(r,o)=>I(r,e)?r:(null==t&&(t=M(e)),s().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),o&&(o.valid=!1),null)}(t);default:return null}},e.ensureNArray=function(e,t,r){return 2===arguments.length?w(t=>_(e,t),t):w(t=>_(e,t),t,r)},e.ensureNArrayTyped=w,e.ensureNull=u,e.ensureNumber=l,e.ensureOneOf=function e(t,r){if(2===arguments.length)return e(t).call(null,r);const o=new Set,i=t.filter(e=>"function"!=typeof e),n=t.filter(e=>"function"==typeof e);for(const e of t)"string"!=typeof e&&"number"!=typeof e||o.add(e);let a=null,l=null;return(e,t)=>{if(null==e)return e;const r=typeof e,c="string"===r||"number"===r;return c&&(o.has(e)||n.some(e=>"string"===r&&e===String||"number"===r&&e===Number))||"object"===r&&n.some(t=>!d(t,e))?e:(c&&i.length?(a||(a=i.map(e=>"string"==typeof e?`'${e}'`:`${e}`).join(", ")),s().error("Accessor#set",`'${e}' is not a valid value for this property, only the following values are valid: ${a}`)):"object"==typeof e&&n.length?(l||(l=n.map(e=>g(e)).join(", ")),s().error("Accessor#set",`'${e}' is not a valid value for this property, value must be one of ${l}`)):s().error("Accessor#set",`'${e}' is not a valid value for this property`),t&&(t.valid=!1),null)}},e.ensureOneOfType=function e(t,r){if(2===arguments.length)return e(t).call(null,r);const o={},i=[],n=[];for(const e in t.typeMap){const r=t.typeMap[e];o[e]=_(r),i.push(g(r)),n.push(e)}const a="string"==typeof t.key?e=>e[t.key]:t.key;return e=>{if(t.base&&!d(t.base,e))return e;if(null==e)return e;const r=a(e)||t.defaultKeyValue,l=o[r];if(!l)return s().error("Accessor#set",`Invalid property value, value needs to be one of '${i.join("', '")}', or a plain object that can autocast (having .type = '${n.join("', '")}')`),null;if(!d(t.typeMap[r],e))return e;if("string"==typeof t.key&&!p(e)){const r={};for(const o in e)o!==t.key&&(r[o]=e[o]);return l(r)}return l(e)}},e.ensureRange=function(e,t){return r=>{let o=e(r);return null!=t.step&&(o=Math.round(o/t.step)*t.step),null!=t.min&&(o=Math.max(t.min,o)),null!=t.max&&(o=Math.min(t.max,o)),o}},e.ensureString=a,e.ensureType=_,e.isClassedType=p,e.isLongFormType=function(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1},e.isOneOf=function(e){return!!Array.isArray(e)&&!e.some(t=>{const r=typeof t;return!("string"===r||"number"===r||"function"===r&&e.length>1)})},e.requiresType=d,e.types={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/decorators/subclass":function(){define(["exports","../../has","../../Logger","../beforeDestroy","../Lifecycle","../metadata","../tracking","../extensions/serializableProperty"],function(e,t,r,o,s,i,n,a){"use strict";const l=new Set,c=new Set;function u(e,t){return null==t.get?function(){const t=this.__accessor__,r=t.propertiesByName.get(e);if(void 0===r)return;t.mutable&&n.trackAccess(r);const o=t.store;return o.has(e)?o.get(e):r.metadata.value}:function(){const t=this.__accessor__,r=t.propertiesByName.get(e);if(void 0!==r)return r.getComputed(t)}}function p(e){const t=e.prototype,r=i.getPropertiesMetadata(t),o={};for(const e of Object.getOwnPropertyNames(r)){const t=r[e];a.processPrototypePropertyMetadata(t),o[e]={enumerable:!0,configurable:!0,get:u(e,t),set(r){const o=this.__accessor__;if(void 0!==o){if(o.mutable)return o.initialized&&t.readOnly?d("read-only",e):o.lifecycle===s.Lifecycle.CONSTRUCTED&&t.constructOnly?d("construct-only",e):void o.set(e,r)}else Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:r})}}}Object.defineProperties(e.prototype,o)}const d=(e,t)=>{r.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};e.finalizeClass=p,e.subclass=function(e){return t=>{e??="esri.core.Accessor",t.prototype.declaredClass=e,p(t);const r=[],n=[];let a=t.prototype;for(;a;)a.hasOwnProperty("initialize")&&!l.has(a.initialize)&&(l.add(a.initialize),r.push(a.initialize)),a.hasOwnProperty("destroy")&&!c.has(a.destroy)&&(c.add(a.destroy),n.push(a.destroy)),a=Object.getPrototypeOf(a);l.clear(),c.clear();const u=class extends t{constructor(...e){if(super(...e),this.constructor===u&&"function"==typeof this.postscript){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let e=r.length-1;e>=0;e--)r[e].call(this)}}),n.length){let e=!1;const t=this[o.beforeDestroySymbol];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!e){this.__accessor__.lifecycle=s.Lifecycle.DESTROYING,e=!0,t.call(this);for(let e=0;e<n.length;e++)n[e].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};u.__accessorMetadata__=i.getPropertiesMetadata(t.prototype),u.prototype.declaredClass=e;const d=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(u,"name",{value:d,configurable:!0}),u}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/extensions/serializableProperty":function(){define(["exports","../ensureType","./serializableProperty/originAliases","./serializableProperty/reader","./serializableProperty/shorthands","./serializableProperty/writer"],function(e,t,r,o,s,i){"use strict";function n(e,t,r){let o=e?.json;if(o?.origins&&r){let e;e="link-chart"===r?o.origins[r]&&("any"===t||t in o.origins[r])?o.origins[r]:o.origins["web-map"]:o.origins[r],e&&("any"===t||t in e)&&(o=e)}return o}function a(e){return e.type?l(e):c(e)}function l(e){if(!e.type)return;let r=0,o=e.type;for(;Array.isArray(o)&&!t.isOneOf(o);)o=o[0],r++;return{type:o,ndimArray:r}}function c(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}e.originSpecificPropertyDefinition=function(e,t){return n(e,"any",t?.origin)},e.originSpecificReadPropertyDefinition=function(e,t){return n(e,"read",t?.origin)},e.originSpecificWritePropertyDefinition=function(e,t){return n(e,"write",t?.origin)},e.processPrototypePropertyMetadata=function(e){s.process(e)&&(r.process(e),function(e){const t=(r=e).json.types?c(r.json):r.type?l(r):c(r);var r;if(e.json.origins)for(const r in e.json.origins){const s=e.json.origins[r],n=s.types?a(s):t;o.create(n,s,!1),s.types&&!s.write&&e.json.write?.enabled&&(s.write={...e.json.write}),i.create(n,s)}o.create(t,e.json,!0),i.create(t,e.json)}(e))},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["exports"],function(e){"use strict";e.process=function(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const e in r)if(t[e]){const o=t[e];r[e].forEach(e=>{t[e]=o}),delete t[e]}}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["exports","../../../Logger","../../../object","../../../Warning","../../metadata","./type"],function(e,t,r,o,s,i){"use strict";const n=()=>t.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function a(e){const t=e.ndimArray??0;if(t>1)return function(e){const t=l(e),r=c.bind(null,t),o=e.ndimArray??0;return(e,t,s)=>{if(null==e)return e;e=r(e,s,o);let i=o,n=e;for(;i>0&&Array.isArray(n);)i--,n=n[0];if(void 0!==n)for(let t=0;t<i;t++)e=[e];return e}}(e);if(1===t)return u(e);if("type"in e&&p(e.type)){const t=e.type.prototype?.itemType?.Type,r=u("function"==typeof t?{type:t}:{types:t});return(t,o,s)=>{const i=r(t,o,s);return i?new e.type(i):i}}return l(e)}function l(e){return"type"in e?function(e){return e.prototype.read?(t,r,o)=>{if(null==t)return t;const s=typeof t;if("object"!==s)return void n().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const i=new e;return i.read(t,o),i}:e.fromJSON}(e.type):function(e){let t=null;const r=e.errorContext??"type",i=e.validate;return(a,l,c)=>{if(null==a)return a;const u=typeof a;if("object"!==u)return void n().error(`Expected JSON value of type 'object' to deserialize, but got '${u}'`);t||(t=function(e){const t={};for(const r in e.typeMap){const o=e.typeMap[r],i=s.getPropertiesMetadata(o.prototype);if("function"==typeof e.key)continue;const n=i[e.key];if(!n)continue;if(n.json?.type&&Array.isArray(n.json.type)&&1===n.json.type.length&&"string"==typeof n.json.type[0]){t[n.json.type[0]]=o;continue}const a=n.json?.write;if(!a?.writer){t[r]=o;continue}const l=a.target,c="string"==typeof l?l:e.key,u={};a.writer(r,u,c),u[c]&&(t[u[c]]=o)}return t}(e));const p=e.key;if("string"!=typeof p)return;const d=a[p],h=d?t[d]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!h){const e=`Type '${d||"unknown"}' is not supported`;return c?.messages&&a&&c.messages.push(new o(`${r}:unsupported`,e,{definition:a,context:c})),void n().error(e)}const y=new h;return y.read(a,c),i?i(y):y}}(e.types)}function c(e,t,r,o){return 0!==o&&Array.isArray(t)?t.map(t=>c(e,t,r,o-1)):e(t,void 0,r)}function u(e){const t=l(e);return(e,r,o)=>{if(null==e)return e;if(Array.isArray(e)){const r=[];for(const s of e){const e=t(s,void 0,o);void 0!==e&&r.push(e)}return r}const s=t(e,void 0,o);return void 0!==s?[s]:void 0}}function p(e){if(!i.isCollection(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&("function"==typeof t.Type?d(t.Type):h(t.Type))}function d(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||p(e))}function h(e){for(const t in e.typeMap)if(!d(e.typeMap[t]))return!1;return!0}e.create=function(e,t,o){e&&(!o&&!t.read||t.read?.reader||!1===t.read?.enabled||function(e){return"types"in e?h(e.types):d(e.type)}(e)&&r.setDeepValue("read.reader",a(e),t))},e.createTypeReader=a,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/Warning":function(){define(["./Message"],function(e){"use strict";class t extends e{constructor(e,t,r){super(e,t,r)}}return t.prototype.type="warning",t})},"esri/core/accessorSupport/extensions/serializableProperty/type":function(){define(["exports"],function(e){"use strict";e.isCollection=function(e){return!!e&&e.prototype?.declaredClass&&0===e.prototype.declaredClass.indexOf("esri.core.Collection")},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["exports"],function(e){"use strict";function t(e){e.name&&(e.read&&"object"==typeof e.read?void 0===e.read.source&&(e.read.source=e.name):e.read={source:e.name},e.write&&"object"==typeof e.write?void 0===e.write.target&&(e.write.target=e.name):e.write={target:e.name})}function r(e){"boolean"==typeof e.read?e.read={enabled:e.read}:"function"==typeof e.read?e.read={enabled:!0,reader:e.read}:e.read&&"object"==typeof e.read&&void 0===e.read.enabled&&(e.read.enabled=!0)}function o(e){"boolean"==typeof e.write?e.write={enabled:e.write}:"function"==typeof e.write?e.write={enabled:!0,writer:e.write}:e.write&&"object"==typeof e.write&&void 0===e.write.enabled&&(e.write.enabled=!0)}e.process=function(e){if(e.json||(e.json={}),r(e.json),o(e.json),t(e.json),e.json.origins)for(const s in e.json.origins)r(e.json.origins[s]),o(e.json.origins[s]),t(e.json.origins[s]);return!0},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["exports","../../../Error","../../../Logger","../../../object","./type"],function(e,t,r,o,s){"use strict";function i(e,o,s){for(const t in o.typeMap)if(e instanceof o.typeMap[t])return!0;if(s?.messages){const i=o.errorContext??"type",n=`Values of type '${("function"!=typeof o.key?e[o.key]:e.declaredClass)??"Unknown"}' cannot be written`;s&&s.messages&&e&&s.messages.push(new t(`${i}:unsupported`,n,{definition:e,context:s})),r.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function n(e,t,r,s){o.setDeepValue(r,a(e,s),t)}function a(e,t){return e&&"function"==typeof e.write?e.write({},t):e&&"function"==typeof e.toJSON?e.toJSON():"number"==typeof e?l(e):e}function l(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function c(e,t,r,s){let i;null===e?i=null:e&&"function"==typeof e.map?(i=e.map(e=>a(e,s)),"function"==typeof i.toArray&&(i=i.toArray())):i=[a(e,s)],o.setDeepValue(r,i,t)}function u(e,t,r){return 0!==r&&Array.isArray(e)?e.map(e=>u(e,t,r-1)):a(e,t)}e.create=function(e,t){if(!t.write||t.write.writer||!1===t.write.enabled&&!t.write.overridePolicy)return;const r=e?.ndimArray??0;var a,l;e&&(1===r||"type"in e&&s.isCollection(e.type))?t.write.writer=c:r>1?t.write.writer=(l=r,(e,t,r,s)=>{let i;if(null===e)i=null;else{i=u(e,s,l);let t=l,r=i;for(;t>0&&Array.isArray(r);)t--,r=r[0];if(void 0!==r)for(let e=0;e<t;e++)i=[i]}o.setDeepValue(r,i,t)}):t.types?Array.isArray(t.types)?t.write.writer=(a=t.types[0],(e,t,r,o)=>e&&Array.isArray(e)?n(e.filter(e=>i(e,a,o)),t,r,o):n(e,t,r,o)):t.write.writer=function(e){return(t,r,o,s)=>t?i(t,e,s)?n(t,r,o,s):void 0:n(t,r,o,s)}(t.types):t.write.writer=n},e.numberToJSON=l,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/decorators/shared":function(){define(["exports"],function(e){"use strict";e.shared=function(e){return(t,r)=>{t[r]=e}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","../ObservableBase"],function(e,t){"use strict";class r extends t.ObservableBase{notify(){const e=this._observers;if(e&&e.length>0){const t=e.slice();for(const e of t)e.onInvalidated(),e.onCommitted()}}}e.SimpleObservable=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/collectionUtils":function(){define(["exports","./Collection"],function(e,t){"use strict";e.castForReferenceSetter=function(e){return e},e.referenceSetter=function(e,r,o=t){return r||(r=new o),r===e||r.destroyed||(r.removeAll(),function(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}(e)?r.addMany(e):e&&r.add(e)),r},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/JSONSupport":function(){define(["exports","../chunks/tslib.es6","./Accessor","./accessorSupport/DefaultsStore","./accessorSupport/defaultsStoreUtils","./accessorSupport/read","./accessorSupport/utils","./accessorSupport/write","./accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";const c=e=>{const r=e;let c=class extends r{constructor(...e){super(...e);const t=n.getProperties(this),r=t.store,i=new o.DefaultsStore;t.store=i,s.setupConstructedDefaults(t,r,i)}read(e,t){i.read(this,e,t)}write(e,t){return a.write(this,e??{},t)}toJSON(e){return this.write({},e)}static fromJSON(e,t){return u.call(this,e,t)}};return c=t.__decorate([l.subclass("esri.core.JSONSupport")],c),c.prototype.toJSON.isDefaultToJSON=!0,c};function u(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}const p=c(r);e.JSONSupport=p,e.JSONSupportMixin=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/DefaultsStore":function(){define(["exports","../lang"],function(e,t){"use strict";class r{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const o=new r;return this._values.forEach((r,s)=>{e&&e.has(s)||o.set(s,t.clone(r.value),r.origin)}),o}get(e,t){t=this._normalizeOrigin(t);const r=this._values.get(e);return null==t||r?.origin===t?r?.value:void 0}originOf(e){return this._values.get(e)?.origin??7}keys(e){e=this._normalizeOrigin(e);const t=[...this._values.keys()];return null==e?t:t.filter(t=>this._values.get(t)?.origin===e)}set(e,t,r){if(0===(r=this._normalizeOrigin(r))){const t=this._values.get(e);if(null!=t?.origin&&t.origin>r)return}this._values.set(e,new o(t,r))}delete(e,t){null!=(t=this._normalizeOrigin(t))&&this._values.get(e)?.origin!==t||this._values.delete(e)}has(e,t){return null!=(t=this._normalizeOrigin(t))?this._values.get(e)?.origin===t:this._values.has(e)}isAtOrigin(e,t){return t=this._normalizeOrigin(t),this.has(e,t)&&this.originOf(e)===t}isBelowOrigin(e,t){return t=this._normalizeOrigin(t),!this.has(e)||this.originOf(e)<t}forEach(e){this._values.forEach(({value:t},r)=>e(t,r))}_normalizeOrigin(e){if(null!=e)return 0===e?e:7}}class o{constructor(e,t){this.value=e,this.origin=t}}e.DefaultsStore=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/defaultsStoreUtils":function(){define(["exports"],function(e){"use strict";e.setupConstructedDefaults=function(e,t,r){t.keys().forEach(e=>{r.set(e,t.get(e),0)});const o=e.metadata;Object.keys(o).forEach(t=>{e.internalGet(t)&&r.set(t,e.internalGet(t),0)})},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/read":function(){define(["exports","./get","./utils","./extensions/serializableProperty"],function(e,t,r,o){"use strict";function s(e,r,o){if(!e?.read||!1===e.read.enabled||!e.read.source)return!1;const s=e.read.source;if("string"==typeof s){if(s===r)return!0;if(s.includes(".")&&s.startsWith(r)&&t.exists(s,o))return!0}else for(const e of s){if(e===r)return!0;if(e.includes(".")&&e.startsWith(r)&&t.exists(e,o))return!0}return!1}function i(e,t,r,i,n){let a=o.originSpecificReadPropertyDefinition(t[r],n);(function(e){return e&&(!e.read||!1!==e.read.enabled&&!e.read.source)})(a)&&(e[r]=!0);for(const l of Object.getOwnPropertyNames(t))a=o.originSpecificReadPropertyDefinition(t[l],n),s(a,r,i)&&(e[l]=!0)}function n(e,t,r,s){const i=r.metadata,n=o.originSpecificPropertyDefinition(i[t],s),a=n?.default;if(void 0===a)return;const l="function"==typeof a?a.call(e,t,s):a;void 0!==l&&r.set(t,l)}const a={origin:"service"};e.read=function(e,s,l=a){if(!s||"object"!=typeof s)return;const c=r.getProperties(e),u=c.metadata,p={};for(const e of Object.getOwnPropertyNames(s))i(p,u,e,s,l);c.setDefaultOrigin(l.origin);for(const r of Object.getOwnPropertyNames(p)){const i=o.originSpecificReadPropertyDefinition(u[r],l).read,n=i?.source;let a;a=n&&"string"==typeof n?t.valueOf(s,n):s[r],i?.reader&&(a=i.reader.call(e,a,s,l)),void 0!==a&&c.set(r,a)}if(!l||!l.ignoreDefaults){c.setDefaultOrigin("defaults");for(const t of Object.getOwnPropertyNames(u))p[t]||n(e,t,c,l)}c.setDefaultOrigin("user")},e.readLoadable=function(e,t,r,o=a){const s={...o,messages:[]};r(s),s.messages?.forEach(t=>{"warning"!==t.type||e.loaded?o?.messages&&o.messages.push(t):e.loadWarnings.push(t)})},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/write":function(){define(["exports","../arrayUtils","../Error","../Logger","./get","./PropertyOrigin","./utils","./extensions/serializableProperty"],function(e,t,r,o,s,i,n,a){"use strict";function l(e,t,r,o,s){const i={};return t.write?.writer?.call(e,o,i,r,s),i}function c(e,n,a,l,c,u){if(!l?.write)return!1;const p=s.get(e,a);if(!c&&l.write.overridePolicy){const t=l.write.overridePolicy.call(e,p,a,u??void 0);void 0!==t&&(c=t)}if(c||(c=l.write),!c||!1===c.enabled)return!1;if(c.layerContainerTypes&&u?.layerContainerType&&!c.layerContainerTypes.includes(u.layerContainerType))return!1;if((null===p&&!c.allowNull&&!c.writerEnsuresNonNull||void 0===p)&&c.isRequired){const t=new r("web-document-write:property-required",`Missing value for required property '${a}' on '${e.declaredClass}'`,{propertyName:a,target:e});return t&&u?.messages?u.messages.push(t):t&&!u&&o.getLogger("esri.core.accessorSupport.write").error(t.name,t.message),!1}return!(void 0===p||null===p&&!c.allowNull&&!c.writerEnsuresNonNull||!(c.alwaysWriteDefaults||n.store.multipleOriginsSupported&&0!==n.store.originOf(a))&&function(e,r,o,s,i){const n=s.default;if(void 0===n)return!1;if(null!=s.defaultEquals)return s.defaultEquals(i);if("function"==typeof n){if(Array.isArray(i)){const s=n.call(e,r,o??void 0);return t.equals(s,i)}return!1}return n===i}(e,a,u,l,p)||!c.ignoreOrigin&&u?.origin&&n.store.multipleOriginsSupported&&n.store.originOf(a)<i.nameToId(u.origin))}e.willPropertyWrite=function(e,t,r,o){const s=n.getProperties(e),i=s.metadata,l=a.originSpecificWritePropertyDefinition(i[t],o);return!!l&&c(e,s,t,l,r,o)},e.write=function(e,t,r){if(e&&"function"==typeof e.toJSON&&(!e.toJSON.isDefaultToJSON||!e.write))return n.merge(t,e.toJSON(r));const o=n.getProperties(e),u=o.metadata;for(const p in u){const d=a.originSpecificWritePropertyDefinition(u[p],r);if(!c(e,o,p,d,void 0,r))continue;const h=s.get(e,p),y=l(e,d,d.write&&"string"==typeof d.write.target?d.write.target:p,h,r);Object.keys(y).length>0&&(t=n.merge(t,y),r?.resources?.pendingOperations?.length&&r.resources.pendingOperations.push(Promise.all(r.resources.pendingOperations).then(()=>n.merge(t,y,()=>"replace-arrays"))),r?.writtenProperties&&r.writtenProperties.push({target:e,propName:p,oldOrigin:i.idToReadableName(o.store.originOf(p)),newOrigin:r.origin}))}return t},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/Loadable":function(){define(["exports","../chunks/tslib.es6","./Error","./maybe","./Promise","./promiseUtils","./Warning","./accessorSupport/decorators/property","./accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";const c="loaded",u=e=>{const s=e;let u=class extends s{constructor(...e){super(...e),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(e=>{const t=this.load.bind(this);this.load=o=>{const s=new Promise((e,t)=>{const s=i.onAbortOrThrow(o,t);this.destroyed&&t(new r("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(e,t).finally(()=>{s&&s.remove()})});if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const e=this._loadController=new AbortController;t({signal:e.signal})}return e(),s}})),this.when(()=>{this._set("loadStatus",c),this._loadController=null},e=>{this.destroyed||(this._set("loadStatus","failed"),this._set("loadError",e),this._loadController=null)})}destroy(){this._loadController&&(this._loadController=o.abortMaybe(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===c}get loadWarnings(){return this._get("loadWarnings")}load(e){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new r("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return t.__decorate([a.property({readOnly:!0})],u.prototype,"loaded",null),t.__decorate([a.property({readOnly:!0})],u.prototype,"loadError",void 0),t.__decorate([a.property({clonable:!1})],u.prototype,"loadStatus",void 0),t.__decorate([a.property({type:[n],readOnly:!0})],u.prototype,"loadWarnings",null),u=t.__decorate([l.subclass("esri.core.Loadable")],u),u},p=u(s.EsriPromise);e.Loadable=p,e.LoadableMixin=u,e.isLoadable=function(e){return!(!e||!e.load)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/Promise":function(){define(["exports","../chunks/tslib.es6","./Accessor","./handleUtils","./promiseUtils","./accessorSupport/decorators/subclass"],function(e,t,r,o,s,i){"use strict";class n{constructor(){this._resolver=s.createResolver(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=1,this._cleanUp()},()=>{this._status=2,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return 1===this._status}isRejected(){return 2===this._status}isFulfilled(){return 0!==this._status}abort(){this._resolver.reject(s.createAbortError())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=s.createResolver(),t=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(t);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},e=>{this.isFulfilled()||this._allPromise!==r||s.isAbortError(e)||this._resolver.reject(e)}),e.resolve()}}const a=e=>{const r=e;let s=class extends r{constructor(...e){super(...e),this._promiseProps=new n,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(e,t){return this._promiseProps.promise.then(()=>this).then(e,t)}catch(e){return this.when(null,e)}addResolvingPromise(e){e&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in e?e.when():e)}addResolvingTask(e){e&&!this._promiseProps.isFulfilled()&&(this.addHandles(o.abortHandle(e)),this._promiseProps.addResolvingPromise(e.promise))}};return s=t.__decorate([i.subclass("esri.core.Promise")],s),s},l=a(r);e.EsriPromise=l,e.EsriPromiseMixin=a,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/loadAll":function(){define(["exports","./asyncUtils","./Collection","./Loadable"],function(e,t,r,o){"use strict";async function s(e,s){const i=[],n=(...e)=>{for(const t of e)null!=t&&(Array.isArray(t)?n(...t):r.isCollection(t)?t.forEach(e=>n(e)):o.isLoadable(t)&&i.push(t))};s(n);let a=null;if(await t.map(i,async e=>{const r=await t.result((o=e,"loadAll"in o&&"function"==typeof o.loadAll?e.loadAll():e.load()));var o;!1!==r.ok||a||(a=r)}),a)throw a.error;return e}e.loadAll=async function(e,t){return await e.load(),s(e,t)},e.loadAllChildren=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/asyncUtils":function(){define(["exports","../chunks/tslib.es6","./Accessor","./maybe","./promiseUtils","./accessorSupport/decorators/property","./accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n){"use strict";function a(e){return{ok:!0,value:e}}function l(e){return{ok:!1,error:e}}function c(e){return null!=e&&!0===e.ok?e.value:null}function u(e){return null!=e&&!1===e.ok?e.error:null}let p=class extends r{get value(){return c(this._result)}get error(){return u(this._result)}get finished(){return null!=this._result}constructor(e,t){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=o.abortMaybe(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(e=>{this._result=a(e),this._cleanup()},e=>{this._result=l(e),this._cleanup()}),this._abortHandle=s.onAbort(t,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=o.removeMaybe(this._abortHandle),this._abortController=null}};t.__decorate([i.property()],p.prototype,"value",null),t.__decorate([i.property()],p.prototype,"error",null),t.__decorate([i.property()],p.prototype,"finished",null),t.__decorate([i.property()],p.prototype,"promise",void 0),t.__decorate([i.property()],p.prototype,"_result",void 0),p=t.__decorate([n.subclass("esri.core.asyncUtils.ReactiveTask")],p),e.assertResult=function(e){if(!0===e.ok)return e.value;throw e.error},e.createTask=function(e,t){return new p(e,t)},e.forEach=function(e,t,r){return s.eachAlways(e.map((e,o)=>t.apply(r,[e,o])))},e.makeResultError=l,e.makeResultOk=a,e.map=async function(e,t,r){return(await s.eachAlways(e.map((e,o)=>t.apply(r,[e,o])))).map(e=>e.value)},e.result=async function(e){if(null==e)return{ok:!1,error:new Error("no promise provided")};try{return a(await e)}catch(e){return l(e)}},e.resultError=u,e.resultOrAbort=async function(e){try{return a(await e)}catch(e){return s.throwIfAbortError(e),l(e)}},e.resultValue=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/decorators/writer":function(){define(["exports","./property"],function(e,t){"use strict";e.writer=function(e,r,o){let s,i;return void 0===r?(i=e,s=[void 0]):"string"!=typeof r?(i=e,s=[void 0],o=r):(i=r,s=Array.isArray(e)?e:[e]),(e,r)=>{const n=e.constructor.prototype;for(const a of s){const s=t.propertyJSONMeta(e,a,i);s.write&&"object"==typeof s.write||(s.write={}),o&&(s.write.target=o),s.write.writer=n[r]}}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/SpatialReference":function(){define(["exports","../chunks/tslib.es6","../core/Accessor","../core/JSONSupport","../core/lang","../core/unitUtils","../core/accessorSupport/ensureType","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","./support/spatialReferenceUtils"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";var p;return e.default=class extends o.JSONSupport{static{p=this}static{this.GCS_NAD_1927=null}static{this.WGS84=null}static{this.WebMercator=null}static{this.PlateCarree=null}static fromJSON(e){if(!e)return null;if(102100===e?.wkid)return p.WebMercator;if(4326===e?.wkid)return p.WGS84;const t=new p;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){if(e&&"object"==typeof e)return e;const t="string"==typeof e?"wkt":"wkid";return{[t]:e}}get isWGS84(){return u.isWGS84(this)}get isWebMercator(){return u.isWebMercator(this)}get isGeographic(){return u.isGeographic(this)}get isWrappable(){return u.isWrappable(this)}get metersPerUnit(){return i.getMetersPerUnitForSR(this)}get unit(){return i.getUnitString(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===p.WGS84)return new p(u.wgs84);if(this===p.WebMercator)return new p(u.webMercator);const e=new p;return null!=this.wkid?(e.wkid=this.wkid,null!=this.latestWkid&&(e.latestWkid=this.latestWkid),null!=this.vcsWkid&&(e.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(e.latestVcsWkid=this.latestVcsWkid)):(null!=this.wkt&&(e.wkt=this.wkt),null!=this.wkt2&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=s.clone(this.imageCoordinateSystem)),e}equals(e){if(null==e)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(null==this.imageCoordinateSystem||null==e.imageCoordinateSystem)return!1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:o}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return null==t||o?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):r?s.id===t&&s.referenceServiceName===r:s.id===t}return u.equals(this,e)}toJSON(e){return this.write(void 0,e)}},t.__decorate([a.property({readOnly:!0})],e.default.prototype,"isWGS84",null),t.__decorate([a.property({readOnly:!0})],e.default.prototype,"isWebMercator",null),t.__decorate([a.property({readOnly:!0})],e.default.prototype,"isGeographic",null),t.__decorate([a.property({readOnly:!0})],e.default.prototype,"isWrappable",null),t.__decorate([a.property({type:n.Integer,json:{write:!0}})],e.default.prototype,"latestWkid",void 0),t.__decorate([a.property({readOnly:!0})],e.default.prototype,"metersPerUnit",null),t.__decorate([a.property({readOnly:!0})],e.default.prototype,"unit",null),t.__decorate([a.property({type:n.Integer,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:null==this.wkt}}}}}}})],e.default.prototype,"wkid",void 0),t.__decorate([a.property({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:null==this.wkid}}}}}}})],e.default.prototype,"wkt",void 0),t.__decorate([c.writer("wkt"),c.writer("web-scene","wkt")],e.default.prototype,"writeWkt",null),t.__decorate([a.property({type:String,json:{write:!1}})],e.default.prototype,"wkt2",void 0),t.__decorate([a.property({type:n.Integer,json:{write:!0}})],e.default.prototype,"vcsWkid",void 0),t.__decorate([a.property({type:n.Integer,json:{write:!0}})],e.default.prototype,"latestVcsWkid",void 0),t.__decorate([a.property()],e.default.prototype,"imageCoordinateSystem",void 0),e.default=p=t.__decorate([l.subclass("esri.geometry.SpatialReference")],e.default),e.default.prototype.toJSON.isDefaultToJSON=!0,e.default.GCS_NAD_1927=r.freeze(new e.default({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),e.default.WGS84=r.freeze(new e.default(u.wgs84)),e.default.WebMercator=r.freeze(new e.default(u.webMercator)),e.default.PlateCarree=r.freeze(new e.default(u.plateCarree)),e.default})},"esri/core/unitUtils":function(){define(["exports","./has","./jsonMap","../geometry/ellipsoidUtils","../geometry/support/Ellipsoid","../geometry/support/spatialReferenceUtils","../geometry/support/WKIDUnitConversion"],function(e,t,r,o,s,i,n){"use strict";const a=s.earth.radius*Math.PI/200,l=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,c=n,u=/UNIT\[([^\]]+)]/i,p=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),d=r.strict()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),h=e=>e*e,y=e=>e*e*e,f={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:h(.001)},"square-centimeters":{inBaseUnits:h(.01)},"square-decimeters":{inBaseUnits:h(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:h(1e3)},"square-inches":{inBaseUnits:h(.0254)},"square-feet":{inBaseUnits:h(.3048)},"square-yards":{inBaseUnits:h(.9144)},"square-miles":{inBaseUnits:h(1609.344)},"square-nautical-miles":{inBaseUnits:h(1852)},"square-us-feet":{inBaseUnits:h(1200/3937)},acres:{inBaseUnits:.0015625*h(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*y(.001)},"cubic-centimeters":{inBaseUnits:1e3*y(.01)},"cubic-decimeters":{inBaseUnits:1e3*y(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*y(1e3)},"cubic-inches":{inBaseUnits:1e3*y(.0254)},"cubic-feet":{inBaseUnits:1e3*y(.3048)},"cubic-yards":{inBaseUnits:1e3*y(.9144)},"cubic-miles":{inBaseUnits:1e3*y(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},m=(()=>{const e={};for(const t in f)for(const r in f[t].units)e[r]=t;return e})(),g=["metric","imperial"],b=[...g,"square-inches","square-feet","square-yards","square-miles","square-nautical-miles","square-us-feet","square-millimeters","square-centimeters","square-decimeters","square-meters","square-kilometers","acres","ares","hectares"],_=[...g,"inches","feet","yards","miles","nautical-miles","us-feet","millimeters","centimeters","decimeters","meters","kilometers"],S=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function v(e){const t=m[e];if(!t)throw new Error("unknown type");return t}function w(e){return f[e].baseUnit}function x(e,t=null){return t=t||v(e),f[t].baseUnit===e}function T(e,t,r){if(t===r)return e;const o=v(t);if(o!==v(r))throw new Error("incompatible units");const s=x(t,o)?e:function(e,t,r){return e*f[r].units[t].inBaseUnits}(e,t,o);return x(r,o)?s:function(e,t,r){return e/f[r].units[t].inBaseUnits}(s,r,o)}function M(e){switch(e){case"metric":return"meters";case"imperial":return"feet";default:return e}}function I(e,t){const r=T(e,t,"meters");return Math.abs(r)<3e3?"meters":"kilometers"}function O(e,t){const r=T(e,t,"meters");return Math.abs(r)<1e5?"meters":"kilometers"}function P(e,t){const r=T(e,t,"feet");return Math.abs(r)<1e3?"feet":"miles"}function k(e,t){const r=T(e,t,"feet");return Math.abs(r)<1e5?"feet":"miles"}function C(e,t){const r=T(e,t,"square-meters");return Math.abs(r)<3e6?"square-meters":"square-kilometers"}function L(e,t){const r=T(e,t,"square-feet");return Math.abs(r)<1e6?"square-feet":"square-miles"}function E(e){return d.fromJSON(e.toLowerCase())||null}function A(e){return F(e)>=o.getReferenceEllipsoid(e).metersPerDegree?"meters":D(e)}function F(e,t=s.earth.metersPerDegree){return R(e,!0)??t}function R(e,t=!1){const r=e?.wkid??null,o=e?.wkt2??e?.wkt??null;let n=null;if(r){if(i.isWKIDFromMars(r))return s.mars.metersPerDegree;if(i.isWKIDFromMoon(r))return s.moon.metersPerDegree;n=c.values[c[r]],!n&&t&&p.has(r)&&(n=a)}else o&&(V(o)?n=j(l.exec(o),n):U(o)&&(n=j(u.exec(o),n)));return n}function j(e,t){return e?.[1]?N(e[1]):t}function N(e){return parseFloat(e.split(",")[1])}function D(e){const t=e?.wkid??null,r=e?.wkt2??e?.wkt??null;let o=null;if(t)o=c.units[c[t]];else if(r){const e=V(r)?l:U(r)?u:null;if(e){const t=e.exec(r);t?.[1]&&(o=function(e){const t=/[\\"']([^\\"']+)/.exec(e);let r=t?.[1];if(!r||!E(r)){const t=N(e);r=null;const o=c.values;for(let e=0;e<o.length;++e)if(Math.abs(t-o[e])<q){r=c.units[e];break}}return r}(t[1]))}}return null!=o?E(o):null}function U(e){return/^GEOCCS/i.test(e)}function V(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const q=1e-7,z=r.strict()({esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"}),G=r.strict()({esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"}),B=r.strict()({esriDUDecimalDegrees:"degrees",esriDURadians:"radians"});e.adaptiveAreaUnit=function(e,t,r){switch(r){case"metric":return C(e,t);case"imperial":return L(e,t);default:return r}},e.adaptiveImperialAreaUnit=L,e.adaptiveImperialLengthUnit=P,e.adaptiveImperialVerticalLengthUnit=k,e.adaptiveLengthUnit=function(e,t,r){switch(r){case"metric":return I(e,t);case"imperial":return P(e,t);default:return r}},e.adaptiveMetricAreaUnit=C,e.adaptiveMetricLengthUnit=I,e.adaptiveMetricVerticalLengthUnit=O,e.adaptiveVerticalLengthUnit=function(e,t,r){switch(r){case"metric":return O(e,t);case"imperial":return k(e,t);default:return r}},e.angleUnitsJSONMap=B,e.areaUnitFromSpatialReference=function(e){const t=D(e);return null==t?null:S.get(t)},e.areaUnitsJSONMap=z,e.baseUnitForUnit=function(e){return w(v(e))},e.baseUnitForUnitType=w,e.convertFromSpatialReferenceUnit=function(e,t,r,o=!1){if(!o&&i.isGeographic(t))throw new Error("Unable to convert from an angular unit to a linear unit.");const s=D(t);return s!==r&&(e=s?T(e,s,r):T(e*=F(t),"meters",r)),e},e.convertToSpatialReferenceUnit=function(e,t,r,o=!1){if(!o&&i.isGeographic(r))throw new Error("Unable to convert from a linear unit to an angular unit.");const s=D(r);return t!==s&&(e=s?T(e,t,s):T(e,t,"meters")/F(r)),e},e.convertUnit=T,e.defaultAreaUnit=function(e){switch(e){case"metric":return"square-meters";case"imperial":return"square-feet";default:return e}},e.defaultLengthUnit=M,e.defaultVerticalLengthUnit=function(e){return M(e)},e.getDefaultUnitSystem=function(e){const t=D(e);if(null==t)return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null},e.getMetersPerCartesianUnitForSR=function(e){return i.isGeographic(e)?1:F(e)},e.getMetersPerUnit=R,e.getMetersPerUnitForSR=F,e.getMetersPerVerticalUnitForSR=function(e){if(null!=e&&!i.isEarth(e))return 1;const t=F(e);return t>1e5?1:t},e.getUnitString=D,e.getVerticalUnitStringForSR=A,e.gradGcsIds=p,e.inchesPerMeter=39.37,e.isBaseUnit=x,e.isMeasurementSystem=function(e){return"imperial"===e||"metric"===e},e.isProjectedWKT=V,e.lengthToDegrees=function(e,t,r){return T(e,t,"meters")/(r*Math.PI/180)},e.lengthUnitFromSpatialReference=function(e){const t=D(e);return null!=t&&_.includes(t)?t:null},e.lengthUnitsJSONMap=G,e.measurementAreaUnits=b,e.measurementLengthUnits=_,e.unitFromRESTJSON=E,e.unitType=v,e.verticalLengthUnitFromSpatialReference=function(e){const t=A(e);return null!=t&&_.includes(t)?t:null},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/jsonMap":function(){define(["exports","./object"],function(e,t){"use strict";class r{constructor(e,r={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=r,this.apiValues=[],this.jsonValues=[],this._apiToJSON=function(e){const t={};for(const r in e)t[e[r]]=r;return t}(e),this.apiValues=o(this._apiToJSON),this.jsonValues=o(this._jsonToAPI),this.read=e=>this.fromJSON(e),this.write=(e,r,o)=>{const s=this.toJSON(e);void 0!==s&&t.setDeepValue(o,s,r)},this.write.isJSONMapWriter=!0}toJSON(e){if(null==e)return null;if(this._apiToJSON.hasOwnProperty(e)){const t=this._apiToJSON[e];return this._options.useNumericKeys?+t:t}return this._options.ignoreUnknown?null:e}fromJSON(e){return null!=e&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}}function o(e){const t=[];for(const r in e)t.push(r);return t.sort(),t}e.JSONMap=r,e.strict=function(){return function(e,t){return new r(e,{ignoreUnknown:!0,...t})}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/ellipsoidUtils":function(){define(["exports","./support/Ellipsoid","./support/spatialReferenceUtils"],function(e,t,r){"use strict";function o(e){return{wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${e.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`}}const s=o(t.earth),i=o(t.mars),n=o(t.moon),a={wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${t.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`},l=i.wkt.toUpperCase(),c=n.wkt.toUpperCase();function u(e){return r.equals(e,s)}e.SphericalECEFSpatialReferenceLike=s,e.SphericalPCPFMarsLike=i,e.SphericalPCPFMoonLike=n,e.WGS84ECEFSpatialReferenceLike=a,e.getReferenceEllipsoid=function(e){if(null!=e&&r.isValid(e)){const o=e.wkid,s=e.wkt2??e.wkt;if(r.isWKIDFromMars(o))return t.mars;const i=s?.toUpperCase();if(s&&i===l)return t.mars;if(r.isWKIDFromMoon(o)||i&&i===c)return t.moon}return t.earth},e.getReferenceEllipsoidFromWKID=function(e){return r.isWKIDFromMars(e)?t.mars:r.isWKIDFromMoon(e)?t.moon:t.earth},e.isSphericalECEF=u,e.isSphericalPCPF=function(e){return u(e)||r.equals(e,i)||r.equals(e,n)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/Ellipsoid":function(){define(["exports"],function(e){"use strict";class t{constructor(e,t,r,o,s,i){this.semiMajorAxis=e,this.flattening=t,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=o,this.scaleHeight=s;const n=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*n,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=i||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const r=new t(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),o=new t(3396190,1/169.8944472236118,23e4,6e4,.111),s=new t(1737400,0,0,0,0);e.Ellipsoid=t,e.earth=r,e.mars=o,e.moon=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/spatialReferenceUtils":function(){define(["exports","../../core/string","../../chunks/pe","./WKIDUnitConversion"],function(e,t,r,o){"use strict";const s=[102100,102113,3857,3785,900913],i=[4326,...s,104905,104971],n=[-20037508.342788905,20037508.342788905],a=[-20037508.342787,20037508.342787],l={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:n,origin:a,dx:1e-5},c={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:n,origin:a,dx:1e-5},102100:l,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:n,origin:a,dx:1e-5},3857:l,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:l};function u(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function p(e){const t=e?.wkid;return null!=t&&t>=2e3&&s.includes(t)}function d(e){return 104971===e||104905===e}function h(e){return d(e?.wkid)}function y(e){return 104903===e}function f(e){return y(e?.wkid)}function m(e){if(null==e)return!1;const t=e.wkid;return null!=t&&t>=2e3||null!=e.wkt2||null!=e.wkt}const g={wkid:4326,wkt:t.replace(c[4326].wkTemplate,{Central_Meridian:"0.0"})};e.equals=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;const r=e.wkid,o=t.wkid;if(null!=r||null!=o){if(r===o)return!0;if(p(e)&&p(t))return!0;const s=e.latestWkid;if(null!=s&&o===s)return!0;const i=t.latestWkid;return null!=i&&r===i}let s,i;return e.wkt2&&t.wkt2?(s=e.wkt2,i=t.wkt2):e.wkt&&t.wkt&&(s=e.wkt,i=t.wkt),!(!s||!i)&&s.toUpperCase()===i.toUpperCase()},e.equalsWithProjectionEngine=async function(e,t){if(e===t)return!0;r.isLoaded()||await r.load();const o=e=>{const t=e.wkt2||e.wkt;if(t){const e=r.PeFactory.fromString(r.PeDefs.PE_TYPE_COORDSYS,t);return e?.getCode()}const o=e.wkid??e.latestWkid;return o?r.PeFactory.coordsys(o)?.getCode():null},s=e?o(e):null,i=t?o(t):null;return null!=s&&null!=i&&s===i},e.getInfo=function(e){const t=e?.wkid;return null!=t&&t>=2e3&&c[t]||null},e.getWktFromWkt=async function(e,t){if(1===t&&!u(e)||2===t&&u(e))return e;r.isLoaded()||await r.load();const o=r.PeFactory.fromString(r.PeDefs.PE_TYPE_NONE,e);return o?.toString(1===t?r.PeDefs.PE_STR_FMT_WKT:r.PeDefs.PE_STR_FMT_WKT2)??null},e.isCGCS2000=function(e){return 4490===e?.wkid},e.isEarth=function(e){return!(h(e)||f(e))},e.isGeographic=function(e){if(!m(e))return!1;const{wkid:t}=e;if(t)return null==o[t];const r=e.wkt2||e.wkt;return!!r&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(r)},e.isMars=h,e.isMoon=f,e.isPlateCarree=function(e){return 32662===e?.wkid},e.isValid=m,e.isWGS84=function(e){return 4326===e?.wkid},e.isWKIDFromMars=d,e.isWKIDFromMoon=y,e.isWKT2=u,e.isWebMercator=p,e.isWrappable=function(e){const t=e?.wkid;return null!=t&&t>=2e3&&i.includes(t)},e.plateCarree={wkid:32662},e.srToRESTValue=function(e){if(!e)return;const{wkid:t,vcsWkid:r}=e;if(t)return r?JSON.stringify({wkid:t,vcsWkid:r}):String(t);const o=e.wkt||e.wkt2;return JSON.stringify(o?r?{wkt:o,vcsWkid:r}:{wkt:o}:{})},e.webMercator={wkid:102100,latestWkid:3857},e.webMercatorOrigin=a,e.webMercatorValid=n,e.wgs84=g,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/pe":function(){define(["require","exports","../assets","../core/has"],function(e,t,r,o){"use strict";let s;function i(){return!!t._pe}function n(){return!!o("esri-wasm")}function a(){return s||(s=new Promise((t,r)=>e(["./pe-wasm"],t,r)).then(({default:e})=>e({locateFile:e=>r.getAssetUrl(`esri/geometry/support/${e}`)})).then(e=>{P(e)}),s)}t._pe=null;const l={geogToProj(e,r,o){t._pe.ensureCache.prepare();const s=L(o),i=o===s,n=t._pe.ensureFloat64(s),a=t._pe._pe_geog_to_proj(t._pe.getPointer(e),r,n);return a&&E(o,r,n,i),a},projGeog(e,t,r,o){switch(o){case c.PE_TRANSFORM_P_TO_G:return l.projToGeog(e,t,r);case c.PE_TRANSFORM_G_TO_P:return l.geogToProj(e,t,r)}return 0},projToGeog:(e,t,r)=>l.projToGeogCenter(e,t,r,0),projToGeogCenter(e,r,o,s){t._pe.ensureCache.prepare();const i=L(o),n=o===i,a=t._pe.ensureFloat64(i),l=t._pe._pe_proj_to_geog_center(t._pe.getPointer(e),r,a,s);return l&&E(o,r,a,n),l}};class c{static init(){c.PE_BUFFER_MAX=t._pe.PeDefs.prototype.PE_BUFFER_MAX,c.PE_NAME_MAX=t._pe.PeDefs.prototype.PE_NAME_MAX,c.PE_MGRS_MAX=t._pe.PeDefs.prototype.PE_MGRS_MAX,c.PE_USNG_MAX=t._pe.PeDefs.prototype.PE_USNG_MAX,c.PE_DD_MAX=t._pe.PeDefs.prototype.PE_DD_MAX,c.PE_DDM_MAX=t._pe.PeDefs.prototype.PE_DDM_MAX,c.PE_DMS_MAX=t._pe.PeDefs.prototype.PE_DMS_MAX,c.PE_UTM_MAX=t._pe.PeDefs.prototype.PE_UTM_MAX,c.PE_PARM_MAX=t._pe.PeDefs.prototype.PE_PARM_MAX,c.PE_TYPE_NONE=t._pe.PeDefs.prototype.PE_TYPE_NONE,c.PE_TYPE_GEOGCS=t._pe.PeDefs.prototype.PE_TYPE_GEOGCS,c.PE_TYPE_PROJCS=t._pe.PeDefs.prototype.PE_TYPE_PROJCS,c.PE_TYPE_GEOGTRAN=t._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN,c.PE_TYPE_COORDSYS=t._pe.PeDefs.prototype.PE_TYPE_COORDSYS,c.PE_TYPE_UNIT=t._pe.PeDefs.prototype.PE_TYPE_UNIT,c.PE_TYPE_LINUNIT=t._pe.PeDefs.prototype.PE_TYPE_LINUNIT,c.PE_STR_OPTS_NONE=t._pe.PeDefs.prototype.PE_STR_OPTS_NONE,c.PE_STR_AUTH_NONE=t._pe.PeDefs.prototype.PE_STR_AUTH_NONE,c.PE_STR_AUTH_TOP=t._pe.PeDefs.prototype.PE_STR_AUTH_TOP,c.PE_STR_NAME_CANON=t._pe.PeDefs.prototype.PE_STR_NAME_CANON,c.PE_STR_FMT_WKT=t._pe.PeDefs.prototype.PE_STR_FMT_WKT,c.PE_STR_FMT_WKT2=t._pe.PeDefs.prototype.PE_STR_FMT_WKT2,c.PE_PARM_X0=t._pe.PeDefs.prototype.PE_PARM_X0,c.PE_PARM_ND=t._pe.PeDefs.prototype.PE_PARM_ND,c.PE_TRANSFORM_1_TO_2=t._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,c.PE_TRANSFORM_2_TO_1=t._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,c.PE_TRANSFORM_P_TO_G=t._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,c.PE_TRANSFORM_G_TO_P=t._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,c.PE_HORIZON_RECT=t._pe.PeDefs.prototype.PE_HORIZON_RECT,c.PE_HORIZON_POLY=t._pe.PeDefs.prototype.PE_HORIZON_POLY,c.PE_HORIZON_LINE=t._pe.PeDefs.prototype.PE_HORIZON_LINE,c.PE_HORIZON_DELTA=t._pe.PeDefs.prototype.PE_HORIZON_DELTA}}t.PeDouble=null;const u={},p={},d=e=>{const r=e.getType();switch(r){case c.PE_TYPE_GEOGCS:e=t._pe.castObject(e,t._pe.PeGeogcs);break;case c.PE_TYPE_PROJCS:e=t._pe.castObject(e,t._pe.PeProjcs);break;case c.PE_TYPE_GEOGTRAN:e=t._pe.castObject(e,t._pe.PeGeogtran);break;default:r&c.PE_TYPE_UNIT&&(e=t._pe.castObject(e,t._pe.PeUnit))}return e},h={initialize(){t._pe.PeFactory.prototype.initialize(null)},coordsys:e=>h.factoryByType(c.PE_TYPE_COORDSYS,e),factoryByType(e,r){let o=null,s=u[e];if(s||(s={},u[e]=s),s.hasOwnProperty(String(r))&&(o=s[r],t._pe.compare(o,t._pe.NULL)&&(o=null)),!o){const i=t._pe.PeFactory.prototype.factoryByType(e,r);t._pe.compare(i,t._pe.NULL)||(o=d(i),s[r]=o)}return o},fromString(e,r){let o=null,s=p[e];if(s||(s={},p[e]=s),s.hasOwnProperty(r)&&(o=s[r],t._pe.compare(o,t._pe.NULL)&&(o=null)),!o){const i=t._pe.PeFactory.prototype.fromString(e,r);t._pe.compare(i,t._pe.NULL)||(o=d(i),s[r]=o)}return o},geogcs:e=>h.factoryByType(c.PE_TYPE_GEOGCS,e),geogtran:e=>h.factoryByType(c.PE_TYPE_GEOGTRAN,e),getCode:e=>t._pe.PeFactory.prototype.getCode(e),projcs:e=>h.factoryByType(c.PE_TYPE_PROJCS,e),unit:e=>h.factoryByType(c.PE_TYPE_UNIT,e)};let y;t.PeGCSExtent=null;const f={PE_GTLIST_OPTS_COMMON:0,init(){f.PE_GTLIST_OPTS_COMMON=t._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,y=t._pe._pe_getPeGTlistExtendedEntrySize()},getGTlist(e,r,o,s,i,n){let a=null;const l=new t._pe.PeInteger(n);try{const c=t._pe.PeGTlistExtended.prototype.getGTlist(e,r,o,s,i,l);if((n=l.val)&&(a=[c],n>1)){const e=t._pe.getPointer(c);for(let r=1;r<n;r++)a.push(t._pe.wrapPointer(e+y*r,t._pe.PeGTlistExtendedEntry))}}finally{t._pe.destroy(l)}return a}},m={destroy(e){if(e?.length){for(const t of e)k(t),t.getEntries().forEach(e=>{k(e);const t=e.getGeogtran();k(t),t.getParameters().forEach(k),[t.getGeogcs1(),t.getGeogcs2()].forEach(e=>{k(e);const t=e.getDatum();k(t),k(t.getSpheroid()),k(e.getPrimem()),k(e.getUnit())})});t._pe.PeGTlistExtendedEntry.prototype.Delete(e[0])}}},g={geogToGeog(e,r,o,s,i){t._pe.ensureCache.prepare();const n=L(o),a=o===n,l=t._pe.ensureFloat64(n);let c=0;s&&(c=t._pe.ensureFloat64(s));const u=t._pe._pe_geog_to_geog(t._pe.getPointer(e),r,l,c,i);return u&&E(o,r,l,a),u}},b={geodesicCoordinate(e,r,o,s,i,n,a,l){t._pe.PeLineType.prototype.geodesic_coordinate(e,r,o,s,i,n,a,l)},geodeticCoordinate(e,r,o,s,i,n,a,l,c){t._pe.PeLineType.prototype.geodetic_coordinate(e,r,o,s,i,n,a,l,c)},geodeticDistance(e,r,o,s,i,n,a,l,c,u){t._pe.PeLineType.prototype.geodetic_distance(e,r,o,s,i,n,a,l,c,u)},greatEllipticDistance(e,r,o,s,i,n,a,l,c){t._pe.PeLineType.prototype.great_elliptic_distance(e,r,o,s,i,n,a,l,c)}},_={phiToEta:(e,r)=>t._pe.PeMath.prototype.phi_to_eta(e,r),etaToPhi:(e,r)=>t._pe.PeMath.prototype.eta_to_phi(e,r),phiToPhig:(e,r)=>t._pe.PeMath.prototype.phi_to_phig(e,r),q:(e,r,o)=>t._pe.PeMath.prototype.q(e,r,o),q90:(e,r)=>t._pe.PeMath.prototype.q90(e,r)},S=(e,r,o,s,i,n)=>{let a,l;switch(t._pe.ensureCache.prepare(),e){case"dd":a=t._pe._pe_geog_to_dd,l=c.PE_DD_MAX;break;case"ddm":a=t._pe._pe_geog_to_ddm,l=c.PE_DDM_MAX;break;case"dms":a=t._pe._pe_geog_to_dms,l=c.PE_DMS_MAX}let u=0;r&&(u=t._pe.getPointer(r));const p=L(s),d=t._pe.ensureFloat64(p),h=C(o,l),y=a(u,o,d,i,t._pe.ensureInt32(h));if(y)for(let e=0;e<o;e++)n[e]=t._pe.UTF8ToString(h[e]);return y},v=(e,r,o,s,i)=>{let n;switch(t._pe.ensureCache.prepare(),e){case"dd":n=t._pe._pe_dd_to_geog;break;case"ddm":n=t._pe._pe_ddm_to_geog;break;case"dms":n=t._pe._pe_dms_to_geog}let a=0;r&&(a=t._pe.getPointer(r));const l=s.map(e=>t._pe.ensureString(e)),c=t._pe.ensureInt32(l),u=t._pe.ensureFloat64(new Array(2*o)),p=n(a,o,c,u);return p&&E(i,o,u),p},w={geogToDms:(e,t,r,o,s)=>S("dms",e,t,r,o,s),dmsToGeog:(e,t,r,o)=>v("dms",e,t,r,o),geogToDdm:(e,t,r,o,s)=>S("ddm",e,t,r,o,s),ddmToGeog:(e,t,r,o)=>v("ddm",e,t,r,o),geogToDd:(e,t,r,o,s)=>S("dd",e,t,r,o,s),ddToGeog:(e,t,r,o)=>v("dd",e,t,r,o)};class x{static init(){x.PE_MGRS_STYLE_NEW=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,x.PE_MGRS_STYLE_OLD=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,x.PE_MGRS_STYLE_AUTO=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,x.PE_MGRS_180_ZONE_1_PLUS=t._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,x.PE_MGRS_ADD_SPACES=t._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}static geogToMgrsExtended(e,r,o,s,i,n,a){t._pe.ensureCache.prepare();let l=0;e&&(l=t._pe.getPointer(e));const u=L(o),p=t._pe.ensureFloat64(u),d=C(r,c.PE_MGRS_MAX),h=t._pe.ensureInt32(d),y=t._pe._pe_geog_to_mgrs_extended(l,r,p,s,i,n,h);if(y)for(let e=0;e<r;e++)a[e]=t._pe.UTF8ToString(d[e]);return y}static mgrsToGeogExtended(e,r,o,s,i){t._pe.ensureCache.prepare();let n=0;e&&(n=t._pe.getPointer(e));const a=o.map(e=>t._pe.ensureString(e)),l=t._pe.ensureInt32(a),c=t._pe.ensureFloat64(new Array(2*r)),u=t._pe._pe_mgrs_to_geog_extended(n,r,l,s,c);return u&&E(i,r,c),u}}const T={geogToUsng(e,r,o,s,i,n,a){t._pe.ensureCache.prepare();let l=0;e&&(l=t._pe.getPointer(e));const u=L(o),p=t._pe.ensureFloat64(u),d=C(r,c.PE_MGRS_MAX),h=t._pe.ensureInt32(d),y=t._pe._pe_geog_to_usng(l,r,p,s,i,n,h);if(y)for(let e=0;e<r;e++)a[e]=t._pe.UTF8ToString(d[e]);return y},usngToGeog(e,r,o,s){t._pe.ensureCache.prepare();let i=0;e&&(i=t._pe.getPointer(e));const n=o.map(e=>t._pe.ensureString(e)),a=t._pe.ensureInt32(n),l=t._pe.ensureFloat64(new Array(2*r)),c=t._pe._pe_usng_to_geog(i,r,a,l);return c&&E(s,r,l),c}};class M{static init(){M.PE_UTM_OPTS_NONE=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,M.PE_UTM_OPTS_ADD_SPACES=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,M.PE_UTM_OPTS_NS=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS}static geogToUtm(e,r,o,s,i){t._pe.ensureCache.prepare();let n=0;e&&(n=t._pe.getPointer(e));const a=L(o),l=t._pe.ensureFloat64(a),u=C(r,c.PE_UTM_MAX),p=t._pe.ensureInt32(u),d=t._pe._pe_geog_to_utm(n,r,l,s,p);if(d)for(let e=0;e<r;e++)i[e]=t._pe.UTF8ToString(u[e]);return d}static utmToGeog(e,r,o,s,i){t._pe.ensureCache.prepare();let n=0;e&&(n=t._pe.getPointer(e));const a=o.map(e=>t._pe.ensureString(e)),l=t._pe.ensureInt32(a),c=t._pe.ensureFloat64(new Array(2*r)),u=t._pe._pe_utm_to_geog(n,r,l,s,c);return u&&E(i,r,c),u}}class I{static{this.cache=new Map}static init(){I.PE_PCSINFO_OPTION_NONE=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,I.PE_PCSINFO_OPTION_DOMAIN=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,I.PE_POLE_OUTSIDE_BOUNDARY=t._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,I.PE_POLE_POINT=t._pe.PePCSInfo.prototype.PE_POLE_POINT}static generate(e,r=I.PE_PCSINFO_OPTION_DOMAIN){let o=null,s=null;return I.cache.has(e)&&(s=I.cache.get(e),s[r]&&(o=s[r])),o||(o=t._pe.PePCSInfo.prototype.generate(e,r),s||(s=[],I.cache.set(e,s)),s[r]=o),o}}const O={versionString:()=>t._pe.PeVersion.prototype.version_string()};function P(e){function r(e,t,r){e[t]=r(e[t])}t._pe=e,c.init(),f.init(),x.init(),M.init(),I.init(),t.PeDouble=class extends t._pe.PeDouble{constructor(e=NaN){super(e)}destroy(){t._pe.destroy(this)}[Symbol.dispose](){this.destroy()}},t.PeGCSExtent=class extends t._pe.PeGCSExtent{destroy(){t._pe.destroy(this)}[Symbol.dispose](){this.destroy()}};const o=[t._pe.PeAngunit,t._pe.PeDatum,t._pe.PeGeogcs,t._pe.PeGeogtran,t._pe.PeObject,t._pe.PeParameter,t._pe.PePrimem,t._pe.PeProjcs,t._pe.PeSpheroid,t._pe.PeUnit];for(const e of o)r(e.prototype,"getName",e=>function(){return e.call(this,new Array(c.PE_NAME_MAX))});for(const e of[t._pe.PeGeogtran,t._pe.PeProjcs])r(e.prototype,"getParameters",e=>function(){const r=new Array(c.PE_PARM_MAX);let o=e.call(this);for(let e=0;e<r.length;e++){const s=t._pe.getValue(o,"*");r[e]=s?t._pe.wrapPointer(s,t._pe.PeParameter):null,o+=Int32Array.BYTES_PER_ELEMENT}return r});r(t._pe.PeHorizon.prototype,"getCoord",e=>function(t=!1){const r=this.getSize();if(!r)return null;const o=[];return E(o,r,e.call(this),t),o}),r(t._pe.PeGTlistExtendedEntry.prototype,"getEntries",e=>{const r=t._pe._pe_getPeGTlistExtendedGTsSize();return function(){let o=null;const s=e.call(this);if(!t._pe.compare(s,t._pe.NULL)){o=[s];const e=this.getSteps();if(e>1){const i=t._pe.getPointer(s);for(let s=1;s<e;s++)o.push(t._pe.wrapPointer(i+r*s,t._pe.PeGTlistExtendedGTs))}}return o}});const s=t._pe._pe_getPeHorizonSize(),i=e=>function(){let r=this._cache;if(r||(r=new Map,this._cache=r),r.has(e))return r.get(e);let o=null;const i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){o=[i];const e=i.getNump();if(e>1){const r=t._pe.getPointer(i);for(let i=1;i<e;i++)o.push(t._pe.wrapPointer(r+s*i,t._pe.PeHorizon))}}return r.set(e,o),o};r(t._pe.PeProjcs.prototype,"horizonGcsGenerate",i),r(t._pe.PeProjcs.prototype,"horizonPcsGenerate",i),t._pe.PeObject.prototype.toString=function(e=c.PE_STR_OPTS_NONE){t._pe.ensureCache.prepare();const r=t._pe.getPointer(this),o=t._pe.ensureInt8(new Array(c.PE_BUFFER_MAX));return t._pe.UTF8ToString(t._pe._pe_object_to_string_ext(r,e,o))},t._pe.PeGeogcs.prototype.destroy=function(){this.Delete(),k(this),this.ptr=0},t._pe.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},t._pe.PeProjcs.prototype.destroy=function(){this.Delete(),k(this),this.ptr=0},t._pe.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function k(e){if(!e)return;const r=t._pe.getClass(e);if(!r)return;const o=t._pe.getCache(r);if(!o)return;const s=t._pe.getPointer(e);s&&delete o[s]}function C(e,r){const o=[],s=new Array(r);for(let r=0;r<e;r++)o.push(t._pe.ensureInt8(s));return o}function L(e){return ArrayBuffer.isView(e)?e:Array.isArray(e[0])?e.flat():e}function E(e,r,o,s=!1){if(s)for(let s=0;s<2*r;s++)e[s]=t._pe.getValue(o+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=0===e.length;for(let i=0;i<r;i++)s&&(e[i]=new Array(2)),e[i][0]=t._pe.getValue(o,"double"),e[i][1]=t._pe.getValue(o+Float64Array.BYTES_PER_ELEMENT,"double"),o+=2*Float64Array.BYTES_PER_ELEMENT}}const A=Object.freeze(Object.defineProperty({__proto__:null,PeCSTransformations:l,PeDefs:c,get PeDouble(){return t.PeDouble},PeFactory:h,get PeGCSExtent(){return t.PeGCSExtent},PeGTTransformations:g,PeGTlistExtended:f,PeGTlistExtendedEntry:m,PeLineType:b,PeMath:_,PeNotationDms:w,PeNotationMgrs:x,PeNotationUsng:T,PeNotationUtm:M,PePCSInfo:I,PeVersion:O,_init:P,get _pe(){return t._pe},isLoaded:i,isSupported:n,load:a},Symbol.toStringTag,{value:"Module"}));t.PeCSTransformations=l,t.PeDefs=c,t.PeFactory=h,t.PeGTTransformations=g,t.PeGTlistExtended=f,t.PeGTlistExtendedEntry=m,t.PeLineType=b,t.PeMath=_,t.PeNotationDms=w,t.PeNotationMgrs=x,t.PeNotationUsng=T,t.PeNotationUtm=M,t.PePCSInfo=I,t.PeVersion=O,t._init=P,t.isLoaded=i,t.isSupported=n,t.load=a,t.pe=A})},"esri/assets":function(){define(["exports","./config","./request","./core/Error","./core/Logger","./core/urlUtils"],function(e,t,r,o,s,i){"use strict";function n(e){if(!t.assetsPath)throw s.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new o("assets:path-not-set","config.assetsPath is not set");return i.join(t.assetsPath,e)}e.fetchAsset=function(e,t){return r(n(e),t)},e.getAssetUrl=n,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/WKIDUnitConversion":function(){define(function(){"use strict";let e;const t={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(e=2e3;e<=2045;e++)t[e]=0;for(e=2056;e<=2065;e++)t[e]=0;for(e=2067;e<=2135;e++)t[e]=0;for(e=2137;e<=2154;e++)t[e]=0;for(e=2161;e<=2170;e++)t[e]=0;for(e=2172;e<=2193;e++)t[e]=0;for(e=2195;e<=2198;e++)t[e]=0;for(e=2200;e<=2203;e++)t[e]=0;for(e=2205;e<=2217;e++)t[e]=0;for(e=2222;e<=2224;e++)t[e]=1;for(e=2225;e<=2250;e++)t[e]=2;for(e=2251;e<=2253;e++)t[e]=1;for(e=2257;e<=2264;e++)t[e]=2;for(e=2274;e<=2279;e++)t[e]=2;for(e=2280;e<=2282;e++)t[e]=1;for(e=2283;e<=2289;e++)t[e]=2;for(e=2290;e<=2292;e++)t[e]=0;for(e=2308;e<=2313;e++)t[e]=0;for(e=2315;e<=2491;e++)t[e]=0;for(e=2494;e<=2866;e++)t[e]=0;for(e=2867;e<=2869;e++)t[e]=1;for(e=2870;e<=2888;e++)t[e]=2;for(e=2891;e<=2895;e++)t[e]=2;for(e=2896;e<=2898;e++)t[e]=1;for(e=2902;e<=2908;e++)t[e]=2;for(e=2915;e<=2920;e++)t[e]=2;for(e=2921;e<=2923;e++)t[e]=1;for(e=2924;e<=2930;e++)t[e]=2;for(e=2931;e<=2962;e++)t[e]=0;for(e=2964;e<=2968;e++)t[e]=2;for(e=2969;e<=2973;e++)t[e]=0;for(e=2975;e<=2991;e++)t[e]=0;for(e=2995;e<=3051;e++)t[e]=0;for(e=3054;e<=3079;e++)t[e]=0;for(e=3081;e<=3088;e++)t[e]=0;for(e=3092;e<=3101;e++)t[e]=0;for(e=3106;e<=3138;e++)t[e]=0;for(e=3146;e<=3151;e++)t[e]=0;for(e=3153;e<=3166;e++)t[e]=0;for(e=3168;e<=3172;e++)t[e]=0;for(e=3174;e<=3203;e++)t[e]=0;for(e=3294;e<=3358;e++)t[e]=0;for(e=3367;e<=3403;e++)t[e]=0;for(e=3408;e<=3416;e++)t[e]=0;for(e=3417;e<=3438;e++)t[e]=2;for(e=3441;e<=3446;e++)t[e]=2;for(e=3447;e<=3450;e++)t[e]=0;for(e=3451;e<=3459;e++)t[e]=2;for(e=3460;e<=3478;e++)t[e]=0;for(e=3554;e<=3559;e++)t[e]=0;for(e=3560;e<=3570;e++)t[e]=2;for(e=3571;e<=3581;e++)t[e]=0;for(e=3594;e<=3597;e++)t[e]=0;for(e=3601;e<=3604;e++)t[e]=0;for(e=3637;e<=3639;e++)t[e]=0;for(e=3665;e<=3667;e++)t[e]=0;for(e=3693;e<=3695;e++)t[e]=0;for(e=3701;e<=3727;e++)t[e]=0;for(e=3728;e<=3739;e++)t[e]=2;for(e=3740;e<=3751;e++)t[e]=0;for(e=3753;e<=3760;e++)t[e]=2;for(e=3761;e<=3773;e++)t[e]=0;for(e=3775;e<=3777;e++)t[e]=0;for(e=3779;e<=3781;e++)t[e]=0;for(e=3783;e<=3785;e++)t[e]=0;for(e=3788;e<=3791;e++)t[e]=0;for(e=3797;e<=3802;e++)t[e]=0;for(e=3814;e<=3816;e++)t[e]=0;for(e=3825;e<=3829;e++)t[e]=0;for(e=3832;e<=3841;e++)t[e]=0;for(e=3844;e<=3852;e++)t[e]=0;for(e=3873;e<=3885;e++)t[e]=0;for(e=3890;e<=3893;e++)t[e]=0;for(e=3907;e<=3912;e++)t[e]=0;for(e=3942;e<=3950;e++)t[e]=0;for(e=3968;e<=3970;e++)t[e]=0;for(e=3973;e<=3976;e++)t[e]=0;for(e=3986;e<=3989;e++)t[e]=0;for(e=3994;e<=3997;e++)t[e]=0;for(e=4048;e<=4051;e++)t[e]=0;for(e=4056;e<=4063;e++)t[e]=0;for(e=4093;e<=4096;e++)t[e]=0;for(e=4390;e<=4398;e++)t[e]=0;for(e=4399;e<=4413;e++)t[e]=2;for(e=4418;e<=4433;e++)t[e]=2;for(e=4455;e<=4457;e++)t[e]=2;for(e=4484;e<=4489;e++)t[e]=0;for(e=4491;e<=4554;e++)t[e]=0;for(e=4568;e<=4589;e++)t[e]=0;for(e=4652;e<=4656;e++)t[e]=0;for(e=4766;e<=4800;e++)t[e]=0;for(e=5014;e<=5016;e++)t[e]=0;for(e=5069;e<=5072;e++)t[e]=0;for(e=5105;e<=5130;e++)t[e]=0;for(e=5167;e<=5188;e++)t[e]=0;for(e=5253;e<=5259;e++)t[e]=0;for(e=5269;e<=5275;e++)t[e]=0;for(e=5292;e<=5311;e++)t[e]=0;for(e=5329;e<=5331;e++)t[e]=0;for(e=5343;e<=5349;e++)t[e]=0;for(e=5355;e<=5357;e++)t[e]=0;for(e=5387;e<=5389;e++)t[e]=0;for(e=5459;e<=5463;e++)t[e]=0;for(e=5479;e<=5482;e++)t[e]=0;for(e=5518;e<=5520;e++)t[e]=0;for(e=5530;e<=5539;e++)t[e]=0;for(e=5550;e<=5552;e++)t[e]=0;for(e=5562;e<=5583;e++)t[e]=0;for(e=5623;e<=5625;e++)t[e]=2;for(e=5631;e<=5639;e++)t[e]=0;for(e=5649;e<=5653;e++)t[e]=0;for(e=5663;e<=5680;e++)t[e]=0;for(e=5682;e<=5685;e++)t[e]=0;for(e=5875;e<=5877;e++)t[e]=0;for(e=5896;e<=5899;e++)t[e]=0;for(e=5921;e<=5940;e++)t[e]=0;for(e=6050;e<=6125;e++)t[e]=0;for(e=6244;e<=6275;e++)t[e]=0;for(e=6328;e<=6348;e++)t[e]=0;for(e=6350;e<=6356;e++)t[e]=0;for(e=6366;e<=6372;e++)t[e]=0;for(e=6381;e<=6387;e++)t[e]=0;for(e=6393;e<=6404;e++)t[e]=0;for(e=6480;e<=6483;e++)t[e]=0;for(e=6511;e<=6514;e++)t[e]=0;for(e=6579;e<=6581;e++)t[e]=0;for(e=6619;e<=6624;e++)t[e]=0;for(e=6625;e<=6627;e++)t[e]=2;for(e=6628;e<=6632;e++)t[e]=0;for(e=6634;e<=6637;e++)t[e]=0;for(e=6669;e<=6692;e++)t[e]=0;for(e=6707;e<=6709;e++)t[e]=0;for(e=6720;e<=6723;e++)t[e]=0;for(e=6732;e<=6738;e++)t[e]=0;for(e=6931;e<=6933;e++)t[e]=0;for(e=6956;e<=6959;e++)t[e]=0;for(e=7005;e<=7007;e++)t[e]=0;for(e=7057;e<=7070;e++)t[e]=2;for(e=7074;e<=7082;e++)t[e]=0;for(e=7109;e<=7118;e++)t[e]=0;for(e=7119;e<=7127;e++)t[e]=1;for(e=7374;e<=7376;e++)t[e]=0;for(e=7528;e<=7586;e++)t[e]=0;for(e=7587;e<=7645;e++)t[e]=2;for(e=7692;e<=7696;e++)t[e]=0;for(e=7755;e<=7787;e++)t[e]=0;for(e=7791;e<=7795;e++)t[e]=0;for(e=7799;e<=7801;e++)t[e]=0;for(e=7803;e<=7805;e++)t[e]=0;for(e=7825;e<=7831;e++)t[e]=0;for(e=7845;e<=7859;e++)t[e]=0;for(e=8013;e<=8032;e++)t[e]=0;for(e=8065;e<=8068;e++)t[e]=1;for(e=8518;e<=8529;e++)t[e]=2;for(e=8533;e<=8536;e++)t[e]=2;for(e=8538;e<=8540;e++)t[e]=2;for(e=8677;e<=8679;e++)t[e]=0;for(e=8836;e<=8840;e++)t[e]=0;for(e=8857;e<=8859;e++)t[e]=0;for(e=8908;e<=8910;e++)t[e]=0;for(e=9154;e<=9159;e++)t[e]=0;for(e=9205;e<=9218;e++)t[e]=0;for(e=9271;e<=9273;e++)t[e]=0;for(e=9295;e<=9297;e++)t[e]=0;for(e=9356;e<=9360;e++)t[e]=0;for(e=9404;e<=9407;e++)t[e]=0;for(e=9476;e<=9482;e++)t[e]=0;for(e=9487;e<=9494;e++)t[e]=0;for(e=9697;e<=9699;e++)t[e]=0;for(e=9821;e<=9865;e++)t[e]=0;for(e=10285;e<=10291;e++)t[e]=0;for(e=10314;e<=10317;e++)t[e]=0;for(e=10448;e<=10465;e++)t[e]=0;for(e=10726;e<=10729;e++)t[e]=0;for(e=10731;e<=10733;e++)t[e]=0;for(e=11114;e<=11118;e++)t[e]=0;for(e=20004;e<=20032;e++)t[e]=0;for(e=20047;e<=20049;e++)t[e]=0;for(e=20062;e<=20092;e++)t[e]=0;for(e=20135;e<=20138;e++)t[e]=0;for(e=20248;e<=20258;e++)t[e]=0;for(e=20348;e<=20358;e++)t[e]=0;for(e=20436;e<=20440;e++)t[e]=0;for(e=20822;e<=20824;e++)t[e]=0;for(e=20904;e<=20932;e++)t[e]=0;for(e=20934;e<=20936;e++)t[e]=0;for(e=21004;e<=21032;e++)t[e]=0;for(e=21035;e<=21037;e++)t[e]=0;for(e=21095;e<=21097;e++)t[e]=0;for(e=21148;e<=21150;e++)t[e]=0;for(e=21207;e<=21264;e++)t[e]=0;for(e=21307;e<=21364;e++)t[e]=0;for(e=21413;e<=21423;e++)t[e]=0;for(e=21453;e<=21463;e++)t[e]=0;for(e=21473;e<=21483;e++)t[e]=0;for(e=21780;e<=21782;e++)t[e]=0;for(e=21891;e<=21894;e++)t[e]=0;for(e=21896;e<=21899;e++)t[e]=0;for(e=22171;e<=22177;e++)t[e]=0;for(e=22181;e<=22187;e++)t[e]=0;for(e=22191;e<=22197;e++)t[e]=0;for(e=22207;e<=22222;e++)t[e]=0;for(e=22229;e<=22232;e++)t[e]=0;for(e=22234;e<=22236;e++)t[e]=0;for(e=22243;e<=22250;e++)t[e]=0;for(e=22262;e<=22265;e++)t[e]=0;for(e=22307;e<=22322;e++)t[e]=0;for(e=22348;e<=22357;e++)t[e]=0;for(e=22407;e<=22422;e++)t[e]=0;for(e=22462;e<=22465;e++)t[e]=0;for(e=22521;e<=22525;e++)t[e]=0;for(e=22607;e<=22622;e++)t[e]=0;for(e=22641;e<=22646;e++)t[e]=0;for(e=22648;e<=22657;e++)t[e]=0;for(e=22707;e<=22722;e++)t[e]=0;for(e=22762;e<=22765;e++)t[e]=0;for(e=22807;e<=22822;e++)t[e]=0;for(e=22991;e<=22994;e++)t[e]=0;for(e=23028;e<=23038;e++)t[e]=0;for(e=23301;e<=23333;e++)t[e]=2;for(e=23830;e<=23853;e++)t[e]=0;for(e=23866;e<=23872;e++)t[e]=0;for(e=23877;e<=23884;e++)t[e]=0;for(e=23886;e<=23894;e++)t[e]=0;for(e=23946;e<=23948;e++)t[e]=0;for(e=24311;e<=24313;e++)t[e]=0;for(e=24342;e<=24347;e++)t[e]=0;for(e=24370;e<=24374;e++)t[e]=10;for(e=24375;e<=24381;e++)t[e]=0;for(e=24718;e<=24721;e++)t[e]=0;for(e=24817;e<=24821;e++)t[e]=0;for(e=24877;e<=24882;e++)t[e]=0;for(e=24891;e<=24893;e++)t[e]=0;for(e=25391;e<=25395;e++)t[e]=0;for(e=25828;e<=25838;e++)t[e]=0;for(e=26191;e<=26195;e++)t[e]=0;for(e=26391;e<=26393;e++)t[e]=0;for(e=26701;e<=26722;e++)t[e]=0;for(e=26729;e<=26799;e++)t[e]=2;for(e=26801;e<=26803;e++)t[e]=2;for(e=26811;e<=26813;e++)t[e]=2;for(e=26847;e<=26870;e++)t[e]=2;for(e=26891;e<=26899;e++)t[e]=0;for(e=26901;e<=26923;e++)t[e]=0;for(e=26929;e<=26946;e++)t[e]=0;for(e=26948;e<=26998;e++)t[e]=0;for(e=27037;e<=27040;e++)t[e]=0;for(e=27205;e<=27232;e++)t[e]=0;for(e=27258;e<=27260;e++)t[e]=0;for(e=27391;e<=27398;e++)t[e]=0;for(e=27561;e<=27564;e++)t[e]=0;for(e=27571;e<=27574;e++)t[e]=0;for(e=27581;e<=27584;e++)t[e]=0;for(e=27591;e<=27594;e++)t[e]=0;for(e=27700;e<=27707;e++)t[e]=0;for(e=28191;e<=28193;e++)t[e]=0;for(e=28348;e<=28358;e++)t[e]=0;for(e=28402;e<=28432;e++)t[e]=0;for(e=28462;e<=28492;e++)t[e]=0;for(e=29118;e<=29122;e++)t[e]=0;for(e=29168;e<=29172;e++)t[e]=0;for(e=29177;e<=29185;e++)t[e]=0;for(e=29187;e<=29195;e++)t[e]=0;for(e=29900;e<=29903;e++)t[e]=0;for(e=30161;e<=30179;e++)t[e]=0;for(e=30491;e<=30494;e++)t[e]=0;for(e=30729;e<=30732;e++)t[e]=0;for(e=31251;e<=31259;e++)t[e]=0;for(e=31265;e<=31268;e++)t[e]=0;for(e=31275;e<=31279;e++)t[e]=0;for(e=31281;e<=31297;e++)t[e]=0;for(e=31461;e<=31469;e++)t[e]=0;for(e=31491;e<=31495;e++)t[e]=0;for(e=31917;e<=31922;e++)t[e]=0;for(e=31965;e<=32e3;e++)t[e]=0;for(e=32001;e<=32003;e++)t[e]=2;for(e=32005;e<=32031;e++)t[e]=2;for(e=32033;e<=32060;e++)t[e]=2;for(e=32064;e<=32067;e++)t[e]=2;for(e=32074;e<=32077;e++)t[e]=2;for(e=32081;e<=32086;e++)t[e]=0;for(e=32107;e<=32130;e++)t[e]=0;for(e=32133;e<=32159;e++)t[e]=0;for(e=32164;e<=32167;e++)t[e]=2;for(e=32180;e<=32199;e++)t[e]=0;for(e=32201;e<=32260;e++)t[e]=0;for(e=32301;e<=32360;e++)t[e]=0;for(e=32401;e<=32460;e++)t[e]=0;for(e=32501;e<=32560;e++)t[e]=0;for(e=32601;e<=32662;e++)t[e]=0;for(e=32664;e<=32667;e++)t[e]=2;for(e=32701;e<=32761;e++)t[e]=0;for(e=53001;e<=53004;e++)t[e]=0;for(e=53008;e<=53019;e++)t[e]=0;for(e=53021;e<=53032;e++)t[e]=0;for(e=53034;e<=53037;e++)t[e]=0;for(e=53042;e<=53046;e++)t[e]=0;for(e=53074;e<=53080;e++)t[e]=0;for(e=54001;e<=54004;e++)t[e]=0;for(e=54008;e<=54019;e++)t[e]=0;for(e=54021;e<=54032;e++)t[e]=0;for(e=54034;e<=54037;e++)t[e]=0;for(e=54042;e<=54046;e++)t[e]=0;for(e=54048;e<=54053;e++)t[e]=0;for(e=54074;e<=54080;e++)t[e]=0;for(e=54090;e<=54096;e++)t[e]=0;for(e=54098;e<=54101;e++)t[e]=0;for(e=65161;e<=65163;e++)t[e]=0;for(e=102001;e<=102040;e++)t[e]=0;for(e=102042;e<=102063;e++)t[e]=0;for(e=102065;e<=102067;e++)t[e]=0;for(e=102070;e<=102117;e++)t[e]=0;for(e=102122;e<=102216;e++)t[e]=0;for(e=102221;e<=102377;e++)t[e]=0;for(e=102382;e<=102388;e++)t[e]=0;for(e=102389;e<=102398;e++)t[e]=2;for(e=102399;e<=102444;e++)t[e]=0;for(e=102445;e<=102447;e++)t[e]=2;for(e=102448;e<=102458;e++)t[e]=0;for(e=102459;e<=102468;e++)t[e]=2;for(e=102469;e<=102499;e++)t[e]=0;for(e=102500;e<=102519;e++)t[e]=1;for(e=102520;e<=102524;e++)t[e]=0;for(e=102525;e<=102529;e++)t[e]=2;for(e=102530;e<=102588;e++)t[e]=0;for(e=102590;e<=102598;e++)t[e]=0;for(e=102601;e<=102603;e++)t[e]=0;for(e=102605;e<=102628;e++)t[e]=0;for(e=102629;e<=102646;e++)t[e]=2;for(e=102648;e<=102700;e++)t[e]=2;for(e=102701;e<=102703;e++)t[e]=0;for(e=102707;e<=102730;e++)t[e]=2;for(e=102733;e<=102758;e++)t[e]=2;for(e=102767;e<=102900;e++)t[e]=0;for(e=102901;e<=102933;e++)t[e]=2;for(e=102934;e<=102950;e++)t[e]=13;for(e=102951;e<=102963;e++)t[e]=0;for(e=102965;e<=102969;e++)t[e]=0;for(e=102971;e<=102973;e++)t[e]=0;for(e=102975;e<=102989;e++)t[e]=0;for(e=102990;e<=102992;e++)t[e]=1;for(e=102997;e<=103002;e++)t[e]=0;for(e=103003;e<=103008;e++)t[e]=2;for(e=103009;e<=103011;e++)t[e]=0;for(e=103012;e<=103014;e++)t[e]=2;for(e=103019;e<=103021;e++)t[e]=0;for(e=103022;e<=103024;e++)t[e]=2;for(e=103029;e<=103031;e++)t[e]=0;for(e=103032;e<=103034;e++)t[e]=2;for(e=103065;e<=103068;e++)t[e]=0;for(e=103074;e<=103076;e++)t[e]=0;for(e=103077;e<=103079;e++)t[e]=1;for(e=103080;e<=103082;e++)t[e]=0;for(e=103083;e<=103085;e++)t[e]=2;for(e=103090;e<=103093;e++)t[e]=0;for(e=103097;e<=103099;e++)t[e]=0;for(e=103100;e<=103102;e++)t[e]=2;for(e=103107;e<=103109;e++)t[e]=0;for(e=103110;e<=103112;e++)t[e]=2;for(e=103113;e<=103116;e++)t[e]=0;for(e=103117;e<=103120;e++)t[e]=2;for(e=103153;e<=103157;e++)t[e]=0;for(e=103158;e<=103162;e++)t[e]=2;for(e=103163;e<=103165;e++)t[e]=0;for(e=103166;e<=103168;e++)t[e]=1;for(e=103169;e<=103171;e++)t[e]=2;for(e=103186;e<=103188;e++)t[e]=0;for(e=103189;e<=103191;e++)t[e]=2;for(e=103192;e<=103195;e++)t[e]=0;for(e=103196;e<=103199;e++)t[e]=2;for(e=103200;e<=103224;e++)t[e]=0;for(e=103225;e<=103227;e++)t[e]=1;for(e=103232;e<=103237;e++)t[e]=0;for(e=103238;e<=103243;e++)t[e]=2;for(e=103244;e<=103246;e++)t[e]=0;for(e=103247;e<=103249;e++)t[e]=2;for(e=103254;e<=103256;e++)t[e]=0;for(e=103257;e<=103259;e++)t[e]=2;for(e=103264;e<=103266;e++)t[e]=0;for(e=103267;e<=103269;e++)t[e]=2;for(e=103300;e<=103375;e++)t[e]=0;for(e=103381;e<=103383;e++)t[e]=0;for(e=103384;e<=103386;e++)t[e]=1;for(e=103387;e<=103389;e++)t[e]=0;for(e=103390;e<=103392;e++)t[e]=2;for(e=103397;e<=103399;e++)t[e]=0;for(e=103400;e<=103471;e++)t[e]=2;for(e=103476;e<=103478;e++)t[e]=0;for(e=103479;e<=103481;e++)t[e]=2;for(e=103486;e<=103488;e++)t[e]=0;for(e=103489;e<=103491;e++)t[e]=2;for(e=103492;e<=103495;e++)t[e]=0;for(e=103496;e<=103499;e++)t[e]=2;for(e=103528;e<=103543;e++)t[e]=0;for(e=103544;e<=103548;e++)t[e]=2;for(e=103549;e<=103551;e++)t[e]=0;for(e=103552;e<=103554;e++)t[e]=1;for(e=103555;e<=103557;e++)t[e]=2;for(e=103558;e<=103560;e++)t[e]=0;for(e=103571;e<=103573;e++)t[e]=0;for(e=103574;e<=103576;e++)t[e]=2;for(e=103577;e<=103580;e++)t[e]=0;for(e=103581;e<=103583;e++)t[e]=2;for(e=103595;e<=103694;e++)t[e]=0;for(e=103696;e<=103699;e++)t[e]=0;for(e=103700;e<=103793;e++)t[e]=2;for(e=103794;e<=103890;e++)t[e]=0;for(e=103891;e<=103896;e++)t[e]=2;for(e=103900;e<=103971;e++)t[e]=2;for(e=103972;e<=103977;e++)t[e]=0;for(e=112e3;e<=112101;e++)t[e]=0;return t})},"esri/portal/Portal":function(){define(["require","exports","../chunks/tslib.es6","../config","../kernel","../request","../core/Error","../core/JSONSupport","../core/Loadable","../core/maybe","../core/promiseUtils","../core/accessorSupport/decorators/property","../core/accessorSupport/ensureType","../core/has","../core/RandomLCG","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass","../geometry/Extent","../intl/locale","./portalDefault","./PortalGroup","./PortalQueryParams","./PortalQueryResult","./PortalUser","../support/apiKeyUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b,_,S,v,w,x,T){"use strict";const M=e=>Object.freeze(Object.defineProperty({__proto__:null,default:e},Symbol.toStringTag,{value:"Module"}));var I;let O;const P={PortalGroup:()=>Promise.resolve({default:S}),PortalItem:()=>new Promise((t,r)=>e(["./PortalItem"],e=>t(M(e)),r)),PortalUser:()=>Promise.resolve({default:x})};t.default=class extends(a.JSONSupportMixin(l.Loadable)){static{I=this}static{this.AUTH_MODE_ANONYMOUS="anonymous"}static{this.AUTH_MODE_AUTO="auto"}static{this.AUTH_MODE_IMMEDIATE="immediate"}static{this.AUTH_MODE_NO_PROMPT="no-prompt"}constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=o.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return"string"==typeof e?{url:e}:e}destroy(){k.unregister(this),this.defaultBasemap=c.destroyMaybe(this.defaultBasemap),this.defaultDevBasemap=c.destroyMaybe(this.defaultDevBasemap),this.defaultVectorBasemap=c.destroyMaybe(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=c.removeMaybe(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)o.request.trustedServers.includes(t)||o.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=this.user?.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get hasAPIKey(){return T.isApiKeyApplicable(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get loaded(){return super.loaded}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.slice(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e?e.toLowerCase():e}readUser(e){let t=null;return e&&(t=x.fromJSON(e),t.portal=this),t}load(t){const r=new Promise((t,r)=>e(["../Basemap"],e=>t(M(e)),r)).then(({default:e})=>{u.throwIfAborted(t),O=e}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t)).then(e=>{if(!this.hasAPIKey&&s.id){const e=s.id;this.credential=e.findCredential(this.restUrl),this.credential||this.authMode!==I.AUTH_MODE_AUTO&&this.authMode!==I.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=e.on("credential-create",function(e){const t=s.id;return()=>{const r=e.deref();r&&t.findCredential(r.restUrl)&&r.signIn().catch(()=>{})}}(new WeakRef(this))),k.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=e,this.read(e)});return this.addResolvingPromise(r),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),r=(await new Promise((t,r)=>e(["../layers/ElevationLayer"],e=>t(M(e)),r))).default;return t?t.map(e=>new r({id:e.id,url:e.url})):[]}async fetchBasemaps(e,t){const r=await this._fetchBasemaps(e,t);if(!0===t?.include3d&&!1!==this.use3dBasemaps){const o=await this._fetchBasemaps3D(e,t);r.unshift(...o)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||"none"===this.default3DBasemapQuery)return null;const t=new v;t.query=this.default3DBasemapQuery,t.disableExtraQuery=!0;const r=(await this.queryItems(t,e)).results.find(e=>"Web Scene"===e.type);return r?new O({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(e=>e.categorySchema):u.isAborted(e)?Promise.reject(u.createAbortError()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then(e=>e.classificationSchema):null}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new v({num:100,sortField:"title"});if(t?.length){const o=[];for(const e of t)o.push(`(title:"${e.title}" AND owner:${e.owner})`);return r.query=o.join(" OR "),this.queryGroups(r,e).then(e=>e.results)}return u.isAborted(e)?Promise.reject(u.createAbortError()):Promise.resolve([])}fetchRegions(e){const t=this.user?.culture||this.culture||b.getLocale();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){const t=this.user?.culture||this.culture||b.getLocale();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return _.ensureDefaultPortalInstance(()=>new I)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,r){const o=this.restUrl+"/portals/self",s={authMode:e,query:{culture:b.getLocale().toLowerCase()},withCredentials:!0,...r};return"auto"===s.authMode&&(s.authMode="no-prompt"),t&&(s.query.default=!0),this.request(o,s)}queryPortal(e,t,r,o){const s=d.ensureType(v,t),i=t=>this.request(this.restUrl+e,{...s.toRequestOptions(this),...o}).then(e=>{const r=s.clone();return r.start=e.nextStart,new w({nextQueryParams:r,queryParams:s,total:e.total,results:I._resultsToTypedArray(t,{portal:this},e,o)})}).then(e=>Promise.all(e.results.map(t=>"function"==typeof t.when?t.when():e)).then(()=>e,t=>(u.throwIfAbortError(t),e)));return r&&P[r]?P[r]().then(({default:e})=>(u.throwIfAborted(o),i(e))):i()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new n("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===I.AUTH_MODE_ANONYMOUS||this.authMode===I.AUTH_MODE_NO_PROMPT&&!s.id)return Promise.reject(new n("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const e=e=>Promise.resolve().then(()=>"not-loaded"===this.loadStatus?(e||(this.authMode="immediate"),this.load().then(()=>null)):"loading"===this.loadStatus?this.load().then(()=>this.credential?null:(this.credential=e,this.fetchSelf("immediate"))):this.user&&this.credential===e?null:(this.credential=e,this.fetchSelf("immediate"))).then(e=>{e&&(this.sourceJSON=e,this.read(e))});return s.id?s.id.getCredential(this.restUrl,{prompt:this.authMode!==I.AUTH_MODE_NO_PROMPT}).then(t=>e(t)):e(this.credential)}normalizeUrl(e){const t=this.credential?.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,r){return this.request(e,t).then(e=>{const t=I._resultsToTypedArray(r,{portal:this},e);return Promise.all(t.map(t=>"function"==typeof t.when?t.when():e)).then(()=>t,()=>t)})}request(e,t={}){const r={f:"json",...t.query},{authMode:o=(this.authMode===I.AUTH_MODE_ANONYMOUS||this.authMode===I.AUTH_MODE_NO_PROMPT?this.authMode:"auto"),body:s=null,cacheBust:n=!1,method:a="auto",responseType:l="json",signal:c}=t,u={authMode:o,body:s,cacheBust:n,method:a,query:r,responseType:l,timeout:0,signal:c};return t.withCredentials&&(u.withCredentials=!0),i(this._normalizeSSL(e),u).then(e=>e.data)}toJSON(){throw new n("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new I({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new n("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const r=new v;r.query=e||(T.hasBasemapStylesApiKey()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const o=await this.queryGroups(r,t);if(!o.total)return[];const s=o.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const i=await s.queryItems(r,t);return i.total?i.results.filter(e=>"Web Map"===e.type).map(e=>new O({portalItem:e})):[]}async _fetchBasemaps3D(e,t){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];if(T.hasBasemapStylesApiKey())return[];const o=new v({query:r,disableExtraQuery:!0}),s=await this.queryGroups(o,t);if(!s.total)return[];const i=s.results[0];o.num=100,o.query='type:"Web Scene"',o.sortField=i.sortField||"name",o.sortOrder=i.sortOrder||"desc";const n=await i.queryItems(o,t);return n.total?n.results.filter(e=>"Web Scene"===e.type).map(e=>new O({portalItem:e})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=O.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,r,o){let s;if(r){const i=null!=o?o.signal:null;s=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(s=s.map(r=>{const o=Object.assign(e?e.fromJSON(r):r,t);return"function"==typeof o.load&&o.load(i),o}))}else s=[];return s}},r.__decorate([p.property()],t.default.prototype,"access",void 0),r.__decorate([p.property()],t.default.prototype,"allSSL",void 0),r.__decorate([p.property()],t.default.prototype,"authMode",void 0),r.__decorate([p.property()],t.default.prototype,"authorizedCrossOriginDomains",void 0),r.__decorate([f.reader("authorizedCrossOriginDomains")],t.default.prototype,"readAuthorizedCrossOriginDomains",null),r.__decorate([p.property()],t.default.prototype,"basemapGalleryGroupQuery",void 0),r.__decorate([p.property({json:{name:"3DBasemapGalleryGroupQuery"}})],t.default.prototype,"basemapGalleryGroupQuery3D",void 0),r.__decorate([p.property()],t.default.prototype,"bingKey",void 0),r.__decorate([p.property()],t.default.prototype,"canListApps",void 0),r.__decorate([p.property()],t.default.prototype,"canListData",void 0),r.__decorate([p.property()],t.default.prototype,"canListPreProvisionedItems",void 0),r.__decorate([p.property()],t.default.prototype,"canProvisionDirectPurchase",void 0),r.__decorate([p.property()],t.default.prototype,"canSearchPublic",void 0),r.__decorate([p.property()],t.default.prototype,"canShareBingPublic",void 0),r.__decorate([p.property()],t.default.prototype,"canSharePublic",void 0),r.__decorate([p.property()],t.default.prototype,"canSignInArcGIS",void 0),r.__decorate([p.property()],t.default.prototype,"canSignInIDP",void 0),r.__decorate([p.property()],t.default.prototype,"colorSetsGroupQuery",void 0),r.__decorate([p.property()],t.default.prototype,"commentsEnabled",void 0),r.__decorate([p.property({type:Date})],t.default.prototype,"created",void 0),r.__decorate([p.property()],t.default.prototype,"credential",void 0),r.__decorate([p.property()],t.default.prototype,"culture",void 0),r.__decorate([p.property()],t.default.prototype,"currentVersion",void 0),r.__decorate([p.property()],t.default.prototype,"customBaseUrl",void 0),r.__decorate([p.property()],t.default.prototype,"default3DBasemapQuery",void 0),r.__decorate([p.property()],t.default.prototype,"defaultBasemap",void 0),r.__decorate([f.reader("defaultBasemap")],t.default.prototype,"readDefaultBasemap",null),r.__decorate([p.property()],t.default.prototype,"defaultDevBasemap",void 0),r.__decorate([f.reader("defaultDevBasemap")],t.default.prototype,"readDefaultDevBasemap",null),r.__decorate([p.property({type:g})],t.default.prototype,"defaultExtent",void 0),r.__decorate([p.property()],t.default.prototype,"defaultVectorBasemap",void 0),r.__decorate([f.reader("defaultVectorBasemap")],t.default.prototype,"readDefaultVectorBasemap",null),r.__decorate([p.property()],t.default.prototype,"description",void 0),r.__decorate([p.property()],t.default.prototype,"devBasemapGalleryGroupQuery",void 0),r.__decorate([p.property()],t.default.prototype,"eueiEnabled",void 0),r.__decorate([p.property({readOnly:!0})],t.default.prototype,"extraQuery",null),r.__decorate([p.property()],t.default.prototype,"featuredGroups",void 0),r.__decorate([p.property()],t.default.prototype,"featuredItemsGroupQuery",void 0),r.__decorate([p.property()],t.default.prototype,"galleryTemplatesGroupQuery",void 0),r.__decorate([p.property()],t.default.prototype,"layoutGroupQuery",void 0),r.__decorate([p.property()],t.default.prototype,"livingAtlasGroupQuery",void 0),r.__decorate([p.property({readOnly:!0})],t.default.prototype,"hasAPIKey",null),r.__decorate([p.property()],t.default.prototype,"hasCategorySchema",void 0),r.__decorate([p.property()],t.default.prototype,"hasClassificationSchema",void 0),r.__decorate([p.property()],t.default.prototype,"helpBase",void 0),r.__decorate([p.property()],t.default.prototype,"helperServices",void 0),r.__decorate([p.property()],t.default.prototype,"helpMap",void 0),r.__decorate([p.property()],t.default.prototype,"homePageFeaturedContent",void 0),r.__decorate([p.property()],t.default.prototype,"homePageFeaturedContentCount",void 0),r.__decorate([p.property()],t.default.prototype,"httpPort",void 0),r.__decorate([p.property()],t.default.prototype,"httpsPort",void 0),r.__decorate([p.property()],t.default.prototype,"id",void 0),r.__decorate([p.property()],t.default.prototype,"ipCntryCode",void 0),r.__decorate([p.property({readOnly:!0})],t.default.prototype,"isOrganization",null),r.__decorate([p.property()],t.default.prototype,"isPortal",void 0),r.__decorate([p.property()],t.default.prototype,"isReadOnly",void 0),r.__decorate([p.property({readOnly:!0})],t.default.prototype,"itemPageUrl",null),r.__decorate([p.property()],t.default.prototype,"layerTemplatesGroupQuery",void 0),r.__decorate([p.property()],t.default.prototype,"maxTokenExpirationMinutes",void 0),r.__decorate([p.property({type:Date})],t.default.prototype,"modified",void 0),r.__decorate([p.property()],t.default.prototype,"name",void 0),r.__decorate([p.property()],t.default.prototype,"portalHostname",void 0),r.__decorate([p.property()],t.default.prototype,"portalMode",void 0),r.__decorate([p.property()],t.default.prototype,"portalProperties",void 0),r.__decorate([p.property()],t.default.prototype,"region",void 0),r.__decorate([p.property()],t.default.prototype,"recycleBinEnabled",void 0),r.__decorate([p.property({readOnly:!0})],t.default.prototype,"restUrl",null),r.__decorate([p.property()],t.default.prototype,"rotatorPanels",void 0),r.__decorate([p.property()],t.default.prototype,"showHomePageDescription",void 0),r.__decorate([p.property()],t.default.prototype,"sourceJSON",void 0),r.__decorate([p.property()],t.default.prototype,"staticImagesUrl",void 0),r.__decorate([p.property({json:{name:"2DStylesGroupQuery"}})],t.default.prototype,"stylesGroupQuery2d",void 0),r.__decorate([p.property({json:{name:"stylesGroupQuery"}})],t.default.prototype,"stylesGroupQuery3d",void 0),r.__decorate([p.property()],t.default.prototype,"supportsHostedServices",void 0),r.__decorate([p.property()],t.default.prototype,"symbolSetsGroupQuery",void 0),r.__decorate([p.property()],t.default.prototype,"templatesGroupQuery",void 0),r.__decorate([p.property()],t.default.prototype,"thumbnail",void 0),r.__decorate([p.property({readOnly:!0})],t.default.prototype,"thumbnailUrl",null),r.__decorate([p.property()],t.default.prototype,"units",void 0),r.__decorate([p.property()],t.default.prototype,"url",void 0),r.__decorate([p.property()],t.default.prototype,"urlKey",void 0),r.__decorate([f.reader("urlKey")],t.default.prototype,"readUrlKey",null),r.__decorate([p.property()],t.default.prototype,"user",void 0),r.__decorate([f.reader("user")],t.default.prototype,"readUser",null),r.__decorate([p.property()],t.default.prototype,"use3dBasemaps",void 0),r.__decorate([p.property()],t.default.prototype,"useDefault3dBasemap",void 0),r.__decorate([p.property()],t.default.prototype,"useStandardizedQuery",void 0),r.__decorate([p.property()],t.default.prototype,"useVectorBasemaps",void 0),r.__decorate([p.property()],t.default.prototype,"vectorBasemapGalleryGroupQuery",void 0),t.default=I=r.__decorate([m.subclass("esri.portal.Portal")],t.default);const k=new FinalizationRegistry(e=>{e.remove()});return t.default})},"esri/core/accessorSupport/decorators/reader":function(){define(["exports","./property"],function(e,t){"use strict";e.reader=function(e,r,o){let s,i;return void 0===r||Array.isArray(r)?(i=e,o=r,s=[void 0]):(i=r,s=Array.isArray(e)?e:[e]),(e,r)=>{const n=e.constructor.prototype;s.forEach(s=>{const a=t.propertyJSONMeta(e,s,i);a.read&&"object"==typeof a.read||(a.read={}),a.read.reader=n[r],o&&(a.read.source=(a.read.source||[]).concat(o))})}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/Extent":function(){define(["exports","../chunks/tslib.es6","../core/string","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/subclass","./Geometry","./Point","./SpatialReference","./support/contains","./support/intersectsBase","./support/spatialReferenceUtils","./support/webMercatorUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y){"use strict";var f;function m(e,t,r){return null==t?r:null==r?t:e(t,r)}function g(e,t){const[r,o]=t.valid,s=2*o;let i,n=0;return e>o?(i=Math.ceil(Math.abs(e-o)/s),e-=i*s,n=i):e<r&&(i=Math.ceil(Math.abs(e-r)/s),e+=i*s,n=-i),{x:e,frameId:n}}return e.default=f=class extends l{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,o,s){return!(i=e)||"esri.geometry.SpatialReference"!==i.declaredClass&&null==i.wkid?"object"==typeof e?(e.spatialReference=null==e.spatialReference?u.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:o,spatialReference:s??u.WGS84}:{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0};var i}static fromPoint(e){return new f({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new c({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return null!=this.mmin&&null!=this.mmax}get hasZ(){return null!=this.zmin&&null!=this.zmax}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return null!=e.z&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new f;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,null!=this.zmin&&(e.zmin=this.zmin,e.zmax=this.zmax),null!=this.mmin&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&y.canProject(t,r)&&(e=t.isWebMercator?y.geographicToWebMercator(e):y.webMercatorToGeographic(e,!0)),"point"===e.type?p.extentContainsPoint(this,e):"extent"===e.type&&p.extentContainsExtent(this,e)}equals(e){if(this===e)return!0;if(null==e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&y.canProject(t,r)&&(e=t.isWebMercator?y.geographicToWebMercator(e):y.webMercatorToGeographic(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),r=this.width*t,o=this.height*t;if(this.xmin+=r,this.ymin+=o,this.xmax-=r,this.ymax-=o,this.hasZ){const e=(this.zmax-this.zmin)*t;this.zmin+=e,this.zmax-=e}if(this.hasM){const e=(this.mmax-this.mmin)*t;this.mmin+=e,this.mmax-=e}return this}intersects(e){if(null==e)return!1;"mesh"===e.type&&(e=e.extent);const t=this.spatialReference,r=e.spatialReference;return t&&r&&!h.equals(t,r)&&y.canProject(t,r)&&(e=t.isWebMercator?y.geographicToWebMercator(e):y.webMercatorToGeographic(e,!0)),d.getFeatureExtentIntersector(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,null!=r&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=m(Math.min,this.zmin,e.zmin),this.zmax=m(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=m(Math.min,this.mmin,e.mmin),this.mmax=m(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:null!=e&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=m(Math.max,this.zmin,e.zmin),this.zmax=m(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=m(Math.max,this.mmin,e.mmin),this.mmax=m(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=h.getInfo(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,o=this._getCM(e);if(o){const s=t.isWebMercator?y.webMercatorToGeographic(o):o;this.xmin-=o.x,this.xmax-=o.x,t.isWebMercator||(s.x=g(s.x,e).x),this.spatialReference=new u(r.replace((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:s.x}))}return this}_getCM(e){let t=null;const[r,o]=e.valid,s=this.xmin,i=this.xmax;return s>=r&&s<=o&&i>=r&&i<=o||(t=this.center),t}_normalize(e,t,r){const o=this.spatialReference;if(!o)return this;const s=r??h.getInfo(o);if(null==s)return this;const i=this._getParts(s).map(e=>e.extent);if(i.length<2)return i[0]||this;if(i.length>2)return e?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(e)return this._shiftCM(s);if(t)return i;let n=!0,a=!0;return i.forEach(e=>{e.hasZ||(n=!1),e.hasM||(a=!1)}),{rings:i.map(e=>{const t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(n){const r=(e.zmax-e.zmin)/2;for(let e=0;e<t.length;e++)t[e].push(r)}if(a){const r=(e.mmax-e.mmin)/2;for(let e=0;e<t.length;e++)t[e].push(r)}return t}),hasZ:n,hasM:a,spatialReference:o}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:r,ymax:o,spatialReference:s}=this,i=this.width,n=this.xmin,a=this.xmax;let l;e=e||h.getInfo(s);const[c,u]=e.valid;l=g(this.xmin,e);const p=l.x,d=l.frameId;l=g(this.xmax,e);const y=l.x,m=l.frameId,b=p===y&&i>0;if(i>2*u){const e=new f(n<a?p:y,r,u,o,s),i=new f(c,r,n<a?y:p,o,s),l=new f(0,r,u,o,s),h=new f(c,r,0,o,s),g=[],b=[];e.contains(l)&&g.push(d),e.contains(h)&&b.push(d),i.contains(l)&&g.push(m),i.contains(h)&&b.push(m);for(let e=d+1;e<m;e++)g.push(e),b.push(e);t.push({extent:e,frameIds:[d]},{extent:i,frameIds:[m]},{extent:l,frameIds:g},{extent:h,frameIds:b})}else p>y||b?t.push({extent:new f(p,r,u,o,s),frameIds:[d]},{extent:new f(c,r,y,o,s),frameIds:[m]}):t.push({extent:new f(p,r,y,o,s),frameIds:[d]});this.cache._parts=t}const r=this.hasZ,o=this.hasM;if(r||o){const e={};r&&(e.zmin=this.zmin,e.zmax=this.zmax),o&&(e.mmin=this.mmin,e.mmax=this.mmax);for(let r=0;r<t.length;r++)t[r].extent.set(e)}return t}},t.__decorate([o.property({readOnly:!0})],e.default.prototype,"cache",null),t.__decorate([o.property({readOnly:!0})],e.default.prototype,"center",null),t.__decorate([o.property({readOnly:!0})],e.default.prototype,"extent",null),t.__decorate([o.property({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],e.default.prototype,"hasM",null),t.__decorate([o.property({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],e.default.prototype,"hasZ",null),t.__decorate([o.property({readOnly:!0})],e.default.prototype,"height",null),t.__decorate([o.property({readOnly:!0})],e.default.prototype,"width",null),t.__decorate([o.property({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],e.default.prototype,"xmin",void 0),t.__decorate([o.property({type:Number,json:{write:!0}})],e.default.prototype,"ymin",void 0),t.__decorate([o.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],e.default.prototype,"mmin",void 0),t.__decorate([o.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],e.default.prototype,"zmin",void 0),t.__decorate([o.property({type:Number,json:{write:!0}})],e.default.prototype,"xmax",void 0),t.__decorate([o.property({type:Number,json:{write:!0}})],e.default.prototype,"ymax",void 0),t.__decorate([o.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],e.default.prototype,"mmax",void 0),t.__decorate([o.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],e.default.prototype,"zmax",void 0),e.default=f=t.__decorate([a.subclass("esri.geometry.Extent")],e.default),e.default.prototype.toJSON.isDefaultToJSON=!0,e.default})},"esri/geometry/Geometry":function(){define(["exports","../chunks/tslib.es6","../core/JSONSupport","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass","./SpatialReference"],function(e,t,r,o,s,i,n,a,l,c){"use strict";return e.default=class extends r.JSONSupport{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=c.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof c)return e;if(null!=e){const r=new c;return r.read(e,t),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}},t.__decorate([o.property()],e.default.prototype,"type",void 0),t.__decorate([o.property({readOnly:!0})],e.default.prototype,"cache",null),t.__decorate([o.property({readOnly:!0})],e.default.prototype,"extent",null),t.__decorate([o.property({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],e.default.prototype,"hasM",void 0),t.__decorate([o.property({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],e.default.prototype,"hasZ",void 0),t.__decorate([o.property({type:c,json:{write:!0},value:c.WGS84})],e.default.prototype,"spatialReference",void 0),t.__decorate([a.reader("spatialReference")],e.default.prototype,"readSpatialReference",null),e.default=t.__decorate([l.subclass("esri.geometry.Geometry")],e.default),e.default})},"esri/geometry/Point":function(){define(["exports","../chunks/tslib.es6","../core/Accessor","../core/Logger","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/cast","../core/has","../core/RandomLCG","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","../core/accessorSupport/ensureType","./Geometry","./SpatialReference","./support/pointUtils","./support/spatialReferenceUtils","./support/webMercatorUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m){"use strict";var g;const b=[0,0];function _(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}return e.default=g=class extends d{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const o=e._get("spatialReference");t._set("spatialReference",r.isFrozen(o)?o:o.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,r,s,i){let n;if(Array.isArray(e))n=e,i=t,e=n[0],t=n[1],r=n[2],s=n[3];else if(e&&"object"==typeof e){if(n=e,e=null!=n.x?n.x:n.longitude,t=null!=n.y?n.y:n.latitude,r=n.z,s=n.m,(i=n.spatialReference)&&"esri.geometry.SpatialReference"!==i.declaredClass&&(i=new h(i)),null!=n.longitude||null!=n.latitude)if(null==n.longitude)o.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(null==n.latitude)o.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!n.declaredClass&&i?.isWebMercator){const r=m.lngLatToXY(n.longitude,n.latitude,b);e=r[0],t=r[1]}}else _(r)?(i=r,r=null):_(s)&&(i=s,s=null);const a={x:e,y:t};return null==a.x&&null!=a.y?o.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):null==a.y&&null!=a.x&&o.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),null!=i&&(a.spatialReference=i),null!=r&&(a.z=r),null!=s&&(a.m=s),a}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return void 0!==this.m}set hasM(e){e!==(void 0!==this._get("m"))&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return void 0!==this.z}set hasZ(e){e!==(void 0!==this._get("z"))&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return y.getLatitude(this)}set latitude(e){const{spatialReference:t,x:r}=this;null!=e&&t&&(t.isWebMercator?this._set("y",m.lngLatToXY(r,e,b)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return y.getLongitude(this)}set longitude(e){const{y:t,spatialReference:r}=this;null!=e&&r&&(r.isWebMercator?this._set("x",m.lngLatToXY(e,t,b)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return"string"==typeof e?NaN:e}clone(){const e=new g;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return g.copy(e,this),this}equals(e){if(null==e)return!1;const{x:t,y:r,z:o,m:s,spatialReference:i}=this,{z:n,m:a}=e;let{x:l,y:c,spatialReference:u}=e;if(!i.equals(u))if(i.isWebMercator&&u.isWGS84)[l,c]=m.lngLatToXY(l,c),u=i;else{if(!i.isWGS84||!u.isWebMercator)return!1;[l,c]=m.xyToLngLat(l,c),u=i}return t===l&&r===c&&o===n&&s===a&&i.wkid===u.wkid}offset(e,t,r){return this.x+=e,this.y+=t,null!=r&&(this.z=(this.z??0)+r),this}normalize(){if(!this.spatialReference)return this;const e=f.getInfo(this.spatialReference);if(!e)return this;let t=this.x;const[r,o]=e.valid,s=2*o;let i;return t>o?(i=Math.ceil(Math.abs(t-o)/s),t-=i*s):t<r&&(i=Math.ceil(Math.abs(t-r)/s),t+=i*s),this._set("x",t),this}distance(e){return y.distance(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}},t.__decorate([s.property({readOnly:!0})],e.default.prototype,"cache",null),t.__decorate([s.property({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],e.default.prototype,"hasM",null),t.__decorate([s.property({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],e.default.prototype,"hasZ",null),t.__decorate([s.property({type:Number})],e.default.prototype,"latitude",null),t.__decorate([s.property({type:Number})],e.default.prototype,"longitude",null),t.__decorate([s.property({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),i.cast(e=>isNaN(e)?e:p.ensureNumber(e))],e.default.prototype,"x",void 0),t.__decorate([u.writer("x")],e.default.prototype,"writeX",null),t.__decorate([l.reader("x")],e.default.prototype,"readX",null),t.__decorate([s.property({type:Number,json:{write:!0}})],e.default.prototype,"y",void 0),t.__decorate([s.property({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],e.default.prototype,"z",void 0),t.__decorate([s.property({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],e.default.prototype,"m",void 0),e.default=g=t.__decorate([c.subclass("esri.geometry.Point")],e.default),e.default.prototype.toJSON.isDefaultToJSON=!0,e.default})},"esri/core/accessorSupport/decorators/cast":function(){define(["exports","../ensureType","../metadata"],function(e,t,r){"use strict";const o=Object.prototype.toString;function s(e){const r="__accessorMetadata__"in e?t.ensureType(e):e;return function(...e){if(e.push(r),"number"==typeof e[2])throw new Error("Using @cast has parameter decorator is not supported since 4.16");return i.apply(this,e)}}function i(e,t,o,s){r.getPropertyMetadata(e,t).cast=s}e.cast=function(...e){var t;if(3!==e.length||"string"!=typeof e[1])return 1===e.length&&"[object Function]"===o.call(e[0])?s(e[0]):1===e.length&&"string"==typeof e[0]?(t=e[0],(e,o)=>{r.getPropertyMetadata(e,t).cast=e[o]}):void 0},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/pointUtils":function(){define(["exports","./spatialReferenceUtils","./webMercatorUtils"],function(e,t,r){"use strict";function o({x:e,y:o,spatialReference:s},i=[0,0]){if(s){if(t.isWebMercator(s))return r.xyToLngLat(e,o,i);if(t.isGeographic(s))return i[0]=e,i[1]=o,i}return null}const s=[0,0];e.distance=function(e,t){const r=e.x-t.x,o=e.y-t.y,s=null!=e.z&&null!=t.z?e.z-t.z:0;return Math.sqrt(r*r+o*o+s*s)},e.getLatitude=function(e){return o(e,s)?.[1]??null},e.getLongitude=function(e){return o(e,s)?.[0]??null},e.getLongitudeLatitude=o,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/webMercatorUtils":function(){define(["exports","../../core/lang","../asserts","../SpatialReference","./Ellipsoid","./spatialReferenceUtils"],function(e,t,r,o,s,i){"use strict";function n(e){return 57.29577951308232*e}function a(e){return.017453292519943*e}function l(e){return null!=e.wkid||null!=e.wkt}const c=[0,0];function u(e,t,r,o,s){const i=e,n=s;if(n.spatialReference=r,"x"in i&&"x"in n)[n.x,n.y]=t(i.x,i.y,c,o);else if("xmin"in i&&"xmin"in n)[n.xmin,n.ymin]=t(i.xmin,i.ymin,c,o),[n.xmax,n.ymax]=t(i.xmax,i.ymax,c,o);else if("paths"in i&&"paths"in n||"rings"in i&&"rings"in n){const e="paths"in i?i.paths:i.rings,r=[];let s;for(let i=0;i<e.length;i++){const n=e[i];s=[],r.push(s);for(let e=0;e<n.length;e++)s.push(t(n[e][0],n[e][1],[0,0],o)),n[e].length>2&&s[e].push(n[e][2]),n[e].length>3&&s[e].push(n[e][3])}"paths"in n?n.paths=r:n.rings=r}else if("points"in i&&"points"in n){const e=i.points,r=[];for(let s=0;s<e.length;s++)r[s]=t(e[s][0],e[s][1],[0,0],o),e[s].length>2&&r[s].push(e[s][2]),e[s].length>3&&r[s].push(e[s][3]);n.points=r}return s}function p(e,t){const r=e&&(l(e)?e:e.spatialReference),o=t&&(l(t)?t:t.spatialReference);return!(e&&"type"in e&&"mesh"===e.type||t&&"type"in t&&"mesh"===t.type||!r||!o)&&(!!i.equals(o,r)||i.isWebMercator(o)&&i.isWGS84(r)||i.isWebMercator(r)&&i.isWGS84(o))}function d(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const o=a(t);return r[0]=a(e)*s.earth.radius,r[1]=s.earth.halfSemiMajorAxis*Math.log((1+Math.sin(o))/(1-Math.sin(o))),r}function h(e,t,r=[0,0],o=!1){if(e===i.webMercatorValid[0])r[0]=-180;else if(e===i.webMercatorValid[1])r[0]=180;else{const t=n(e/s.earth.radius);r[0]=o?t:t-360*Math.floor((t+180)/360)}return r[1]=n(Math.PI/2-2*Math.atan(Math.exp(-t/s.earth.radius))),r}e.canProject=p,e.geographicToWebMercator=function(e,s=!1,i=t.clone(e)){return r.assertNotMesh(e),r.assertNotMesh(i),u(e,d,o.WebMercator,s,i)},e.lngLatToXY=d,e.project=function(e,r){if(null==e)return null;const s=e.spatialReference,n=r&&(l(r)?r:r.spatialReference);return p(s,n)?i.equals(s,n)?t.clone(e):i.isWebMercator(n)?u(e,d,o.WebMercator,!1,t.clone(e)):i.isWGS84(n)?u(e,h,o.WGS84,!1,t.clone(e)):null:null},e.webMercatorToGeographic=function(e,s=!1,i=t.clone(e)){return r.assertNotMesh(e),r.assertNotMesh(i),u(e,h,o.WGS84,s,i)},e.x2lon=function(e){return e/s.earth.radius},e.xyToLngLat=h,e.y2lat=function(e){return Math.PI/2-2*Math.atan(Math.exp(-e/s.earth.radius))},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/asserts":function(){define(["exports","../core/Error"],function(e,t){"use strict";function r(e){if(e&&"object"==typeof e&&"type"in e&&"mesh"===e.type)throw new t("internal:mesh","Mesh geometries are not supported for this operation")}e.assertNotMesh=r,e.assertNotMeshes=function(e){e.forEach(r)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/contains":function(){define(["exports"],function(e){"use strict";const t=[0,0];function r(e,t){return o(e,t[0],t[1])}function o(e,t,r,o){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(null==o||!e.hasZ||o>=e.zmin&&o<=e.zmax)}function s(e,t){return i(e.rings,t)}function i(e,t){if(!e)return!1;if(function(e){return!Array.isArray(e[0][0])}(e))return n(!1,e,t);let r=!1;for(let o=0,s=e.length;o<s;o++)r=n(r,e[o],t);return r}function n(e,t,r){const[o,s]=r;let i=e,n=0;for(let e=0,r=t.length;e<r;e++){n++,n===r&&(n=0);const[a,l]=t[e],[c,u]=t[n];(l<s&&u>=s||u<s&&l>=s)&&a+(s-l)/(u-l)*(c-a)<o&&(i=!i)}return i}e.extentContainsCoords2D=r,e.extentContainsCoords3D=function(e,t){return o(e,t[0],t[1],t[2])},e.extentContainsExtent=function(e,t){const{xmin:r,ymin:s,zmin:i,xmax:n,ymax:a,zmax:l}=t;return e.hasZ&&t.hasZ?o(e,r,s,i)&&o(e,r,a,i)&&o(e,n,a,i)&&o(e,n,s,i)&&o(e,r,s,l)&&o(e,r,a,l)&&o(e,n,a,l)&&o(e,n,s,l):o(e,r,s)&&o(e,r,a)&&o(e,n,a)&&o(e,n,s)},e.extentContainsMultipoint=function(e,t){if(!t.points?.length)return!1;for(const o of t.points)if(!r(e,o))return!1;return!0},e.extentContainsPoint=function(e,t){return null!=t&&o(e,t.x,t.y,t.z)},e.extentContainsXYZ=o,e.polygonContainsCoords=s,e.polygonContainsPoint=function(e,r){return t[1]=r.y,t[0]=r.x,s(e,t)},e.ringsContainsCoords=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersectsBase":function(){define(["exports","./contains"],function(e,t){"use strict";function r(e,r){return t.extentContainsPoint(e,r)}function o(e,t){const r=e.hasZ&&t.hasZ;let o,s,i;if(e.xmin<=t.xmin){if(o=t.xmin,e.xmax<o)return!1}else if(o=e.xmin,t.xmax<o)return!1;if(e.ymin<=t.ymin){if(s=t.ymin,e.ymax<s)return!1}else if(s=e.ymin,t.ymax<s)return!1;if(r&&t.hasZ)if(e.zmin<=t.zmin){if(i=t.zmin,e.zmax<i)return!1}else if(i=e.zmin,t.zmax<i)return!1;return!0}function s(e,r){const{points:o,hasZ:s}=r,i=s?t.extentContainsCoords3D:t.extentContainsCoords2D;for(const t of o)if(i(e,t))return!0;return!1}const i=[0,0],n=[0,0],a=[0,0],l=[0,0],c=[i,n,a,l],u=[[a,i],[i,n],[n,l],[l,a]];function p(e,r){return function(e,r){i[0]=e.xmin,i[1]=e.ymax,n[0]=e.xmax,n[1]=e.ymax,a[0]=e.xmin,a[1]=e.ymin,l[0]=e.xmax,l[1]=e.ymin;for(const e of c)if(t.ringsContainsCoords(r,e))return!0;for(const o of r){if(!o.length)continue;let r=o[0];if(t.extentContainsCoords2D(e,r))return!0;for(let s=1;s<o.length;s++){const i=o[s];if(t.extentContainsCoords2D(e,i)||y(r,i,u))return!0;r=i}}return!1}(e,r.rings)}function d(e,r){i[0]=e.xmin,i[1]=e.ymax,n[0]=e.xmax,n[1]=e.ymax,a[0]=e.xmin,a[1]=e.ymin,l[0]=e.xmax,l[1]=e.ymin;const o=r.paths;for(const r of o){if(!o.length)continue;let s=r[0];if(t.extentContainsCoords2D(e,s))return!0;for(let o=1;o<r.length;o++){const i=r[o];if(t.extentContainsCoords2D(e,i)||y(s,i,u))return!0;s=i}}return!1}const h=[0,0];function y(e,t,r){for(let o=0;o<r.length;o++)if(f(e,t,r[o][0],r[o][1]))return!0;return!1}function f(e,t,r,o,s){const[i,n]=e,[a,l]=t,[c,u]=r,[p,d]=o,h=p-c,y=i-c,f=a-i,m=d-u,g=n-u,b=l-n,_=m*f-h*b;if(0===_)return!1;const S=(h*g-m*y)/_,v=(f*g-b*y)/_;return S>=0&&S<=1&&v>=0&&v<=1&&(s&&(s[0]=i+S*(a-i),s[1]=n+S*(l-n)),!0)}e.extentIntersectsExtent=o,e.extentIntersectsMultipoint=s,e.extentIntersectsPoint=r,e.extentIntersectsPolygon=p,e.extentIntersectsPolyline=d,e.getFeatureExtentIntersector=function(e){switch(e){case"esriGeometryEnvelope":case"extent":return o;case"esriGeometryMultipoint":case"multipoint":return s;case"esriGeometryPoint":case"point":return r;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return p;case"esriGeometryPolyline":case"polyline":return d}},e.isSelfIntersecting=function(e){for(let t=0;t<e.length;t++){const r=e[t];for(let o=0;o<r.length-1;o++){const s=r[o],i=r[o+1];for(let r=t+1;r<e.length;r++)for(let t=0;t<e[r].length-1;t++){const o=e[r][t],n=e[r][t+1];if(f(s,i,o,n,h)&&!(h[0]===s[0]&&h[1]===s[1]||h[0]===o[0]&&h[1]===o[1]||h[0]===i[0]&&h[1]===i[1]||h[0]===n[0]&&h[1]===n[1]))return!0}}const o=r.length;if(!(o<=4))for(let e=0;e<o-3;e++){let t=o-1;0===e&&(t=o-2);const s=r[e],i=r[e+1];for(let o=e+2;o<t;o++){const e=r[o],t=r[o+1];if(f(s,i,e,t,h)&&!(h[0]===s[0]&&h[1]===s[1]||h[0]===e[0]&&h[1]===e[1]||h[0]===i[0]&&h[1]===i[1]||h[0]===t[0]&&h[1]===t[1]))return!0}}}return!1},e.segmentIntersects=f,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/intl/locale":function(){define(["exports","../core/handleUtils","../core/has"],function(e,t,r){"use strict";let o,s;const i=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale,n=globalThis.document?.documentElement;function a(){const e=n?.getAttribute("lang"),t=globalThis.navigator?.language;return i??e??t??"en"}function l(){return void 0===s&&(s=a()),s}const c=/^(?<language>[a-z]{2,3})(?:-(?<extlang>[a-z]{3}))?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function u(e=l()){return c.exec(e)?.groups}const p=[],d=new Map,h=[];function y(){const e=o??a();s!==e&&([...h].forEach(t=>t(e)),s=e,[...p].forEach(t=>t(e)))}globalThis.addEventListener?.("languagechange",y),n&&new MutationObserver(()=>{y()}).observe(n,{attributeFilter:["lang"]}),e.assertNoLocaleChangeListeners=function(){const e=Array.from(d.values())[0];d.clear();const t=p.length;if(0!==t)throw new Error(`Unexpected ${t} locale change listeners still active.${e?` For example:\n${e}`:" Set enableListenerTracing in esri/intl/locale.ts to include a stack trace."}`)},e.beforeLocaleChange=function(e){return h.push(e),t.makeHandle(()=>h.splice(h.indexOf(e),1))},e.getDefaultLocale=a,e.getLocale=l,e.getLocaleLanguage=function(e=l()){return u(e)?.language},e.getLocaleParts=u,e.normalizeLocale=function(e=l()){const t=u(e);return t?.language&&t?.extlang?e.replace(`${t.language}-`,""):e},e.onLocaleChange=function(e){return p.push(e),t.makeHandle(()=>{p.splice(p.indexOf(e),1)})},e.prefersRTL=function(e=l()){const t=u(e)?.language;return"he"===t||"ar"===t},e.setLocale=function(e){o=e||void 0,y()},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/portal/portalDefault":function(){define(["exports"],function(e){"use strict";let t;e.clearDefaultPortalInstance=function(){t=void 0},e.ensureDefaultPortalInstance=function(e){return t&&!t.destroyed||(t=e()),t},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/portal/PortalGroup":function(){define(["exports","../chunks/tslib.es6","../core/Error","../core/JSONSupport","../core/accessorSupport/decorators/property","../core/accessorSupport/ensureType","../core/has","../core/RandomLCG","../core/accessorSupport/decorators/subclass","./PortalQueryParams"],function(e,t,r,o,s,i,n,a,l,c){"use strict";var u;return e.default=u=class extends o.JSONSupport{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t&&this.portal?this.portal?.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.portal?.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then(t=>{const r=t.categorySchema||[];return r.some(e=>"contentCategorySetsGroupQuery.LivingAtlas"===e.source)?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new r("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new u({sourceJSON:e});return t.read(e),t}queryItems(e,t){let r=i.ensureType(c,e);const o=this.portal;return parseFloat(o.currentVersion)>5?(r=r||new c,o.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",t)):(r=r?r.clone():new c,r.query="group:"+this.id+(r.query?" "+r.query:""),o.queryItems(r,t))}_fetchCategorySchemaSet(e,t){const o=this.portal;return o.fetchSelf(o.authMode,!0,t).then(e=>{const s=e.contentCategorySetsGroupQuery;if(s){const e=new c({disableExtraQuery:!0,num:1,query:s});return o.queryGroups(e,t)}throw new r("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(o=>{if(o.total){const r=o.results[0],s=new c({num:1,query:`typekeywords:"${e}"`});return r.queryItems(s,t)}throw new r("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(e=>e.total?e.results[0].fetchData("json",t).then(e=>{const t=e?.categorySchema;return t?.length?t:[]}):[])}},t.__decorate([s.property()],e.default.prototype,"access",void 0),t.__decorate([s.property({type:Date})],e.default.prototype,"created",void 0),t.__decorate([s.property()],e.default.prototype,"description",void 0),t.__decorate([s.property()],e.default.prototype,"id",void 0),t.__decorate([s.property()],e.default.prototype,"isInvitationOnly",void 0),t.__decorate([s.property({type:Date})],e.default.prototype,"modified",void 0),t.__decorate([s.property()],e.default.prototype,"owner",void 0),t.__decorate([s.property()],e.default.prototype,"portal",void 0),t.__decorate([s.property()],e.default.prototype,"snippet",void 0),t.__decorate([s.property()],e.default.prototype,"sortField",void 0),t.__decorate([s.property()],e.default.prototype,"sortOrder",void 0),t.__decorate([s.property()],e.default.prototype,"sourceJSON",void 0),t.__decorate([s.property()],e.default.prototype,"tags",void 0),t.__decorate([s.property()],e.default.prototype,"thumbnail",void 0),t.__decorate([s.property({readOnly:!0})],e.default.prototype,"thumbnailUrl",null),t.__decorate([s.property()],e.default.prototype,"title",void 0),t.__decorate([s.property({readOnly:!0})],e.default.prototype,"url",null),e.default=u=t.__decorate([l.subclass("esri.portal.PortalGroup")],e.default),e.default})},"esri/portal/PortalQueryParams":function(){define(["exports","../chunks/tslib.es6","../core/Accessor","../core/jsonMap","../core/lang","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/subclass","../geometry/Extent","../geometry/SpatialReference","../geometry/support/webMercatorUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p){"use strict";var d;const h=new o.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});return e.default=d=class extends r{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){"asc"!==e&&"desc"!==e||this._set("sortOrder",e)}clone(){return new d({categories:this.categories?s.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let r=[];this.categories&&(r=this.categories.map(e=>Array.isArray(e)?JSON.stringify(e):e));let o="";if(this.extent){const e=p.project(this.extent,u.WGS84);null!=e&&(o=`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`)}let s=this.query;!this.disableExtraQuery&&e.extraQuery&&(s="("+s+")"+e.extraQuery);const i={categories:r,bbox:o,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(i.sortField=this.sortField.split(",").map(e=>h.toJSON(e.trim())).join(","),i.sortOrder=this.sortOrder),{query:{...t,...i}}}},t.__decorate([i.property()],e.default.prototype,"categories",void 0),t.__decorate([i.property()],e.default.prototype,"disableExtraQuery",void 0),t.__decorate([i.property({type:c})],e.default.prototype,"extent",void 0),t.__decorate([i.property()],e.default.prototype,"filter",void 0),t.__decorate([i.property()],e.default.prototype,"num",void 0),t.__decorate([i.property()],e.default.prototype,"query",void 0),t.__decorate([i.property()],e.default.prototype,"sortField",void 0),t.__decorate([i.property()],e.default.prototype,"sortOrder",null),t.__decorate([i.property()],e.default.prototype,"start",void 0),e.default=d=t.__decorate([l.subclass("esri.portal.PortalQueryParams")],e.default),e.default})},"esri/portal/PortalQueryResult":function(){define(["exports","../chunks/tslib.es6","../core/Accessor","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a){"use strict";return e.default=class extends r{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}},t.__decorate([o.property()],e.default.prototype,"nextQueryParams",void 0),t.__decorate([o.property()],e.default.prototype,"queryParams",void 0),t.__decorate([o.property()],e.default.prototype,"results",void 0),t.__decorate([o.property()],e.default.prototype,"total",void 0),e.default=t.__decorate([a.subclass("esri.portal.PortalQueryResult")],e.default),e.default})},"esri/portal/PortalUser":function(){define(["require","exports","../chunks/tslib.es6","../core/Error","../core/JSONSupport","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/subclass","./PortalFolder","./PortalGroup"],function(e,t,r,o,s,i,n,a,l,c,u,p){"use strict";const d=e=>Object.freeze(Object.defineProperty({__proto__:null,default:e},Symbol.toStringTag,{value:"Module"}));var h;return t.default=h=class extends s.JSONSupport{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.id}`:null}get url(){const e=this.portal?.restUrl;return e?`${e}/community/users/${this.id}`:null}addItem(e){const t=e&&e.item,r=e?.data,o=e?.folder,s={method:"post"};t&&(s.query=t.createPostQuery(),null!=r&&("string"==typeof r?s.query.text=r:"object"==typeof r&&(s.query.text=JSON.stringify(r))));let i=this.userContentUrl;return o&&(i+="/"+("string"==typeof o?o:o.id)),this.portal.request(i+"/addItem",s).then(e=>(t.id=e.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}async deleteItem(e,t=!1){let r=this.userContentUrl;e.ownerFolder&&(r+="/"+e.ownerFolder);const o=t?{permanentDelete:!0}:{};await this.portal.request(r+`/items/${e.id}/delete`,{method:"post",query:o}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.slice();const r=this.userContentUrl+"/deleteItems",s=[],i=e.map(e=>e.id);if(i.length){const n={method:"post",query:{items:i.join(","),permanentDelete:t}},a=await this.portal.request(r,n);for(const t of a.results){const r=e.find(e=>t.itemId===e.id),i=t.success;let n=null;i?(r.id=null,r.portal=null):t.error&&(n=new o("portal:delete-item-failed",t.error.message,t.error)),s.push({item:r,success:i,error:n})}}return s}fetchFolders(){return this.portal.request(this.userContentUrl??"",{query:{num:1}}).then(e=>{let t;return t=e&&e.folders?e.folders.map(e=>{const t=u.fromJSON(e);return t.portal=this.portal,t}):[],t})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(e=>{const t=p.fromJSON(e);return t.portal=this.portal,t}):[],t})}async fetchItems(t){t??={};let r=this.userContentUrl??"";t.folder&&(r+="/"+t.folder.id);const{default:o}=await new Promise((t,r)=>e(["./PortalItem"],e=>t(d(e)),r)),s={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},i=await this.portal.request(r,{query:s});let n;return i?.items?(n=i.items.map(e=>{const t=o.fromJSON(e);return t.portal=this.portal,t}),await Promise.all(n.map(e=>e.load())),{items:n,nextStart:i.nextStart,total:i.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new p({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new o("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const r=this.userContentUrl,o=t?{folderID:"string"==typeof t?t:t.id}:null;await this.portal.request(r+`/items/${e.id}/restore`,{method:"post",query:o})}toJSON(){throw new o("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new h({sourceJSON:e});return t.read(e),t}},r.__decorate([i.property()],t.default.prototype,"access",void 0),r.__decorate([i.property({type:Date})],t.default.prototype,"created",void 0),r.__decorate([i.property()],t.default.prototype,"culture",void 0),r.__decorate([i.property()],t.default.prototype,"description",void 0),r.__decorate([i.property()],t.default.prototype,"email",void 0),r.__decorate([i.property()],t.default.prototype,"favGroupId",void 0),r.__decorate([i.property()],t.default.prototype,"fullName",void 0),r.__decorate([i.property()],t.default.prototype,"id",void 0),r.__decorate([i.property({type:Date})],t.default.prototype,"modified",void 0),r.__decorate([i.property()],t.default.prototype,"orgId",void 0),r.__decorate([i.property()],t.default.prototype,"portal",void 0),r.__decorate([i.property()],t.default.prototype,"preferredView",void 0),r.__decorate([i.property()],t.default.prototype,"privileges",void 0),r.__decorate([i.property()],t.default.prototype,"region",void 0),r.__decorate([i.property()],t.default.prototype,"role",void 0),r.__decorate([i.property()],t.default.prototype,"roleId",void 0),r.__decorate([i.property()],t.default.prototype,"sourceJSON",void 0),r.__decorate([i.property()],t.default.prototype,"thumbnail",void 0),r.__decorate([i.property({readOnly:!0})],t.default.prototype,"thumbnailUrl",null),r.__decorate([i.property()],t.default.prototype,"units",void 0),r.__decorate([i.property({readOnly:!0})],t.default.prototype,"userContentUrl",null),r.__decorate([i.property({readOnly:!0})],t.default.prototype,"url",null),r.__decorate([i.property()],t.default.prototype,"username",void 0),r.__decorate([i.property()],t.default.prototype,"userLicenseTypeId",void 0),r.__decorate([i.property()],t.default.prototype,"userType",void 0),t.default=h=r.__decorate([c.subclass("esri.portal.PortalUser")],t.default),t.default})},"esri/portal/PortalFolder":function(){define(["exports","../chunks/tslib.es6","../core/Error","../core/JSONSupport","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";return e.default=class extends o.JSONSupport{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new r("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}},t.__decorate([s.property({type:Date})],e.default.prototype,"created",void 0),t.__decorate([s.property()],e.default.prototype,"id",void 0),t.__decorate([s.property()],e.default.prototype,"portal",void 0),t.__decorate([s.property()],e.default.prototype,"title",void 0),t.__decorate([s.property({readOnly:!0})],e.default.prototype,"url",null),t.__decorate([s.property()],e.default.prototype,"username",void 0),e.default=t.__decorate([l.subclass("esri.portal.PortalFolder")],e.default),e.default})},"esri/portal/PortalItem":function(){define(["require","exports","../chunks/tslib.es6","../assets","../core/Error","../core/JSONSupport","../core/lang","../core/Loadable","../core/urlUtils","../core/accessorSupport/decorators/property","../core/accessorSupport/ensureType","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass","../geometry/Extent","./Portal","./PortalItemResource","./PortalRating","../chunks/persistableUrlUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g){"use strict";var b;const _=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),S=new Set(["KML","GeoJson","CSV"]);return t.default=b=class extends(i.JSONSupportMixin(a.Loadable)){static from(e){return u.ensureClass(b,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return"Feature Service"===e||"Feature Collection"===e?r=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":"Image Service"===e?r=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===e?r="Scene Layer":"Video Service"===e?r="Video Layer":"Scene Package"===e?r="Scene Layer Package":"Stream Service"===e?r="Feature Layer":"Geoprocessing Service"===e?r=t.includes("Web Tool")?"Tool":"Geoprocessing Service":"Geoenrichment Service"===e?r="GeoEnrichment Service":"Geocoding Service"===e?r="Locator":"Microsoft Powerpoint"===e?r="Microsoft PowerPoint":"GeoJson"===e?r="GeoJSON":"Globe Service"===e?r="Globe Layer":"Vector Tile Service"===e?r="Tile Layer":"netCDF"===e?r="NetCDF":"Map Service"===e?r=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e?.toLowerCase().includes("add in")?r=e.replaceAll(/(add in)/gi,"Add-In"):"datastore catalog service"===e?r="Big Data File Share":"Compact Tile Package"===e?r="Tile Package (tpkx)":"Raster function template"===e?r="Raster Function Template":"OGCFeatureServer"===e?r="OGC Feature Layer":"web mapping application"===e&&t.includes("configurableApp")?r="Instant App":"Insights Page"===e?r="Insights Report":"Excalibur Imagery Project"===e?r="Excalibur Project":"3DTiles Service"===e?r="3D tiles layer":"3DTiles Package"===e&&(r="3D tiles package"),r}readExtent(e){return e&&e.length?new h(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type?.toLowerCase()||"",t=this.typeKeywords||[];let r,s=!1,i=!1,n=!1,a=!1,l=!1,c=!1,u=!1,p=!1;return e.indexOf("service")>0||"feature collection"===e||"kml"===e||"wms"===e||"wmts"===e||"wfs"===e?(s=t.includes("Hosted Service"),"feature service"===e||"feature collection"===e||"kml"===e||"wfs"===e?(i=t.includes("Table"),n=t.includes("Route Layer"),a=t.includes("Markup"),l=t.includes("Spatiotemporal"),c=t.includes("UtilityNetwork"),r=l&&i?"spatiotemporaltable":i?"table":n?"routelayer":a?"markup":l?"spatiotemporal":c?"utilitynetwork":s?"featureshosted":"features"):"map service"===e||"wms"===e||"wmts"===e?(l=t.includes("Spatiotemporal"),u=t.includes("Relational"),r=l||u?"mapimages":s||t.includes("Tiled")||"wmts"===e?"maptiles":"mapimages"):r="scene service"===e?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===e?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===e?"streamlayer":"vector tile service"===e?"vectortile":"datastore catalog service"===e?"datastorecollection":"geocoding service"===e?"geocodeservice":"video service"===e?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":"geoprocessing service"===e?t.includes("Web Tool")?"tool":"layers":"geodata service"===e?"geodataservice":"3dtiles service"===e?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):"web map"===e||"cityengine web scene"===e?r="maps":"web scene"===e?r=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===e&&t.includes("configurableApp")?r="instantapps":"web mapping application"===e||"mobile application"===e||"application"===e||"operation view"===e||"desktop application"===e?r="apps":"map document"===e||"map package"===e||"published map"===e||"scene document"===e||"globe document"===e||"basemap package"===e||"mobile basemap package"===e||"mobile map package"===e||"project package"===e||"project template"===e||"pro map"===e||"layout"===e||"layer"===e&&t.includes("ArcGIS Pro")||"explorer map"===e&&t.indexOf("Explorer Document")?r="mapsgray":"service definition"===e||"shapefile"===e||"cad drawing"===e||"geojson"===e||"netcdf"===e||"administrative report"===e?r="datafiles":"360 vr experience"===e?r="360vr":"explorer add in"===e||"desktop add in"===e||"windows viewer add in"===e||"windows viewer configuration"===e?r="appsgray":"arcgis pro add in"===e||"arcgis pro configuration"===e?r="addindesktop":"pdf"===e?r="pdf":"microsoft word"===e?r="word":"microsoft excel"===e?r="excel":"microsoft powerpoint"===e?r="ppt":"rule package"===e||"file geodatabase"===e||"sqlite geodatabase"===e||"csv collection"===e||"kml collection"===e||"windows mobile package"===e||"map template"===e||"desktop application template"===e||"gml"===e||"arcpad package"===e||"code sample"===e||"document link"===e||"earth configuration"===e||"operations dashboard add in"===e||"rules package"===e||"workflow manager package"===e||"explorer map"===e&&t.includes("Explorer Mapping Application")||t.includes("Document")?r="datafilesgray":"network analysis service"===e||"geoprocessing service"===e||"geodata service"===e||"geometry service"===e||"geoprocessing package"===e||"locator package"===e||"geoprocessing sample"===e||"workflow manager service"===e?r="toolsgray":"layer"===e||"layer package"===e||"explorer layer"===e?r="layersgray":"analysis model"===e?r="analysismodel":"scene package"===e?r="scenepackage":"3dtiles package"===e?r="3dtileslayerpackage":"3dtiles service"===e?r="3dtileslayer":"mobile scene package"===e?r="mobilescenepackage":"tile package"===e||"compact tile package"===e?r="tilepackage":"task file"===e?r="taskfile":"report template"===e?r="report-template":"statistical data collection"===e?r="statisticaldatacollection":"insights workbook"===e?r="workbook":"insights model"===e?r="insightsmodel":"insights page"===e?r="insightspage":"insights theme"===e?r="insightstheme":"hub initiative"===e?r="hubinitiative":"hub page"===e?r="hubpage":"hub site application"===e?r="hubsite":"hub event"===e?r="hubevent":"hub project"===e?r="hubproject":"relational database connection"===e?r="relationaldatabaseconnection":"big data file share"===e?r="datastorecollection":"image collection"===e?r="imagecollection":"desktop style"===e?r="desktopstyle":"style"===e?r=t.includes("Dictionary")?"dictionarystyle":"style":"dashboard"===e?r="dashboard":"raster function template"===e?r="rasterprocessingtemplate":"vector tile package"===e?r="vectortilepackage":"ortho mapping project"===e?r="orthomappingproject":"ortho mapping template"===e?r="orthomappingtemplate":"solution"===e?r="solutions":"geopackage"===e?r="geopackage":"deep learning package"===e?r="deeplearningpackage":"real time analytic"===e?r="realtimeanalytics":"reality mapping project"===e?r="realitymappingproject":"big data analytic"===e?r="bigdataanalytics":"feed"===e?r="feed":"excalibur imagery project"===e?r="excaliburimageryproject":"notebook"===e?r="notebook":"storymap"===e?r="storymap":"survey123 add in"===e?r="survey123addin":"mission"===e?r="mission":"mission report"===e?r="missionreport":"mission template"===e?r="missiontemplate":"quickcapture project"===e?r="quickcaptureproject":"pro report"===e?r="proreport":"pro report template"===e?r="proreporttemplate":"urban model"===e?r="urbanmodel":"urban project"===e?r="urbanproject":"web experience"===e?r="experiencebuilder":"web experience template"===e?r="webexperiencetemplate":"experience builder widget"===e?r="experiencebuilderwidget":"experience builder widget package"===e?r="experiencebuilderwidgetpackage":"workflow"===e?r="workflow":"kernel gateway connection"===e?r="kernelgatewayconnection":"insights script"===e?r="insightsscript":"hub initiative template"===e?r="hubinitiativetemplate":"storymap theme"===e?r="storymaptheme":"knowledge graph"===e?r="knowledgegraph":"knowledge graph layer"===e?r="knowledgegraphlayer":"knowledge studio project"===e?r="knowledgestudio":"native application"===e?r="nativeapp":"native application installer"===e?r="nativeappinstaller":"web link chart"===e?r="linkchart":"knowledge graph web investigation"===e?r="investigation":"ogcfeatureserver"===e?r="features":"pro presentation"===e?r="propresentation":"pro project"===e?r="proproject":"insights workbook package"===e?r="insightsworkbookpackage":"apache parquet"===e?r="apacheparquet":"notebook code snippet library"===e?r="notebookcodesnippets":"suitability model"===e?r="suitabilitymodel":"esri classifier definition"===e?r="classifierdefinition":"esri classification schema"===e?r="classificationschema":"insights data engineering workbook"===e?r="dataengineeringworkbook":"insights data engineering model"===e?r="dataengineeringmodel":"deep learning studio project"===e?r="deeplearningproject":"discussion"===e?r="discussion":"allsource project"===e?r="allsourceproject":"api key"===e?r="apikey":"data pipeline"===e?r="datapipelines":"group layer"===e?(p=t.includes("Map"),r=p?"layergroup2d":"layergroup"):r="media layer"===e?"onlinemedialayer":"form"===e?t.includes("Survey123")?"survey":"datafilesgray":"csv"===e?"csv":"image"===e?"image":"maps",r?o.getAssetUrl("esri/images/portal/"+r+"16.png"):null}get isLayer(){return null!=this.type&&_.has(this.type)}get itemCdnUrl(){return g.toCDNUrl(this.itemUrl)}get itemPageUrl(){const e=this.portal?.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){const e=this.portal?.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get loaded(){return super.loaded}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal?.normalizeUrl(`${e}/info/${t}?f=json`)??null:null}get userItemUrl(){const e=this.portal?.restUrl;if(!e)return null;const t=this.owner||this.portal?.user?.id;return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=y.getDefault()),r=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:null!=e?e.signal:null,query:{token:this.apiKey}}):{}).then(e=>{this.sourceJSON=e,this.read(e)});return this.addResolvingPromise(r),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}},r=e instanceof m?e.rating:e;return null==r||isNaN(r)||"number"!=typeof e||(t.query.rating=r),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new m({rating:r,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:n.clone(this.applicationProxies),avgRating:this.avgRating,categories:n.clone(this.categories),classification:n.clone(this.classification),created:n.clone(this.created),culture:this.culture,description:this.description,extent:n.clone(this.extent),groupCategories:n.clone(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:n.clone(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:n.clone(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:n.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:n.clone(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new b({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){const e=this.toJSON();for(const t of["tags","typeKeywords","categories"])e[t]=e[t]?.join(", ");for(const t of["extent","classification"]){const r=e[t];r&&(e[t]=JSON.stringify(r))}return e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return null!=t.rating?(t.created=new Date(t.created),new m(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},b)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.applicationProxies&&!Object.hasOwn(e,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e?.data,r={method:"post"};r.query=this.createPostQuery();for(const e in r.query)null===r.query[e]&&(r.query[e]="");return r.query.clearEmptyFields=!0,null!=t&&("string"==typeof t?r.query.text=t:"object"==typeof t&&(r.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,r).then(()=>this.reload())}):Promise.reject(new s("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new s("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:r}=this;await t.signIn();const{copyResources:o,folder:i,tags:n,title:a}=e||{},l={method:"post",query:{copyPrivateResources:"all"===o,folder:"string"==typeof i?i:i?.id,includeResources:!!o,tags:n?.join(","),title:a}},{itemId:c}=await t.request(`${r}/copy`,l);return new b({id:c,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,r=e.filename,o={method:"post"};if("string"==typeof t)l.isDataProtocol(t)?o.query={data:t}:o.query={url:l.makeAbsolute(t)},null!=r&&(o.query.filename=r);else{const e=new FormData;null!=r?e.append("file",t,r):e.append("file",t),o.body=e}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,o).then(()=>this.reload())}):Promise.reject(new s("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},r){const{fetchResources:o}=await new Promise((t,r)=>e(["./support/resourceUtils"],t,r));return o(this,t,r)}async addResource(t,r,o){const{addOrUpdateResources:s}=await new Promise((t,r)=>e(["./support/resourceUtils"],t,r));return t.portalItem=this,await s(this,[{resource:t,content:r,compress:o?.compress,access:o?.access}],"add",o),t}async removeResource(t,r){const{removeResource:o}=await new Promise((t,r)=>e(["./support/resourceUtils"],t,r));if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new s("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return o(this,t,r)}async removeAllResources(t){const{removeAllResources:r}=await new Promise((t,r)=>e(["./support/resourceUtils"],t,r));return r(this,t)}resourceFromPath(e){return new f({portalItem:this,path:e})}toJSON(){const e=this.extent,t={accessInformation:this.accessInformation,categories:n.clone(this.categories),classification:n.clone(this.classification),created:this.created?.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:n.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:n.clone(this.typeKeywords),url:this.url};return n.fixJson(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new b({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}},r.__decorate([c.property({type:["private","shared","org","public"]})],t.default.prototype,"access",void 0),r.__decorate([c.property()],t.default.prototype,"accessInformation",void 0),r.__decorate([c.property({type:String})],t.default.prototype,"apiKey",void 0),r.__decorate([c.property({json:{read:{source:"appProxies"}}})],t.default.prototype,"applicationProxies",void 0),r.__decorate([c.property()],t.default.prototype,"avgRating",void 0),r.__decorate([c.property()],t.default.prototype,"categories",void 0),r.__decorate([c.property()],t.default.prototype,"classification",void 0),r.__decorate([c.property({type:Date})],t.default.prototype,"created",void 0),r.__decorate([c.property()],t.default.prototype,"culture",void 0),r.__decorate([c.property()],t.default.prototype,"description",void 0),r.__decorate([c.property({readOnly:!0})],t.default.prototype,"displayName",null),r.__decorate([c.property({type:h})],t.default.prototype,"extent",void 0),r.__decorate([p.reader("extent")],t.default.prototype,"readExtent",null),r.__decorate([c.property()],t.default.prototype,"groupCategories",void 0),r.__decorate([c.property({readOnly:!0})],t.default.prototype,"iconUrl",null),r.__decorate([c.property()],t.default.prototype,"id",void 0),r.__decorate([c.property({readOnly:!0})],t.default.prototype,"isLayer",null),r.__decorate([c.property({type:Boolean,readOnly:!0})],t.default.prototype,"isOrgItem",void 0),r.__decorate([c.property()],t.default.prototype,"itemControl",void 0),r.__decorate([c.property({readOnly:!0})],t.default.prototype,"itemPageUrl",null),r.__decorate([c.property({readOnly:!0})],t.default.prototype,"itemUrl",null),r.__decorate([c.property()],t.default.prototype,"licenseInfo",void 0),r.__decorate([c.property({type:Date})],t.default.prototype,"modified",void 0),r.__decorate([c.property()],t.default.prototype,"name",void 0),r.__decorate([c.property()],t.default.prototype,"numComments",void 0),r.__decorate([c.property()],t.default.prototype,"numRatings",void 0),r.__decorate([c.property()],t.default.prototype,"numViews",void 0),r.__decorate([c.property()],t.default.prototype,"owner",void 0),r.__decorate([c.property()],t.default.prototype,"ownerFolder",void 0),r.__decorate([c.property({type:y})],t.default.prototype,"portal",void 0),r.__decorate([c.property()],t.default.prototype,"screenshots",void 0),r.__decorate([c.property()],t.default.prototype,"size",void 0),r.__decorate([c.property()],t.default.prototype,"snippet",void 0),r.__decorate([c.property()],t.default.prototype,"sourceJSON",void 0),r.__decorate([c.property({type:String})],t.default.prototype,"sourceUrl",void 0),r.__decorate([c.property({type:String})],t.default.prototype,"spatialReference",void 0),r.__decorate([c.property()],t.default.prototype,"tags",void 0),r.__decorate([c.property()],t.default.prototype,"thumbnail",void 0),r.__decorate([c.property({readOnly:!0})],t.default.prototype,"thumbnailUrl",null),r.__decorate([c.property()],t.default.prototype,"title",void 0),r.__decorate([c.property()],t.default.prototype,"type",void 0),r.__decorate([c.property()],t.default.prototype,"typeKeywords",void 0),r.__decorate([c.property({type:String,json:{read(e,t){if(S.has(t.type)){const t=this.portal?.restUrl;e||=t&&this.id?`${t}/content/items/${this.id}/data`:null}return e}}})],t.default.prototype,"url",void 0),r.__decorate([c.property({readOnly:!0})],t.default.prototype,"userItemUrl",null),t.default=b=r.__decorate([d.subclass("esri.portal.PortalItem")],t.default),t.default})},"esri/portal/PortalItemResource":function(){define(["require","exports","../chunks/tslib.es6","../core/Accessor","../core/Error","../core/Logger","../core/urlUtils","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/cast","../core/has","../core/RandomLCG","../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l,c,u,p){"use strict";function d(e,t){return null==e?e:(e=e.replace(/^\/+/,""),null!=t&&n.isAbsolute(e)&&(e=n.makeRelative(e,t.itemUrl)),e?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}return t.default=class extends o{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e?.portalItem&&e.path?{...e,path:d(e.path,e.portalItem)}:e}set path(e){null!=e&&n.isAbsolute(e)?i.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return d(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const r=this.cdnUrl;if(null==r)throw new s("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey,_ts:t?.cacheBust?Date.now():null},signal:t?.signal})}async update(t,r){const{addOrUpdateResources:o}=await new Promise((t,r)=>e(["./support/resourceUtils"],t,r));return await o(this.portalItem,[{resource:this,content:t,compress:r?.compress,access:r?.access}],"update",r),this}hasPath(){return null!=this.path}},r.__decorate([a.property()],t.default.prototype,"portalItem",void 0),r.__decorate([a.property({type:String,value:null})],t.default.prototype,"path",null),r.__decorate([l.cast("path")],t.default.prototype,"_castPath",null),r.__decorate([a.property({type:String,readOnly:!0})],t.default.prototype,"url",null),r.__decorate([a.property({type:String,readOnly:!0})],t.default.prototype,"cdnUrl",null),r.__decorate([a.property({type:String,readOnly:!0})],t.default.prototype,"itemRelativeUrl",null),t.default=r.__decorate([p.subclass("esri.portal.PortalItemResource")],t.default),t.default})},"esri/portal/PortalRating":function(){define(["exports","../chunks/tslib.es6","../core/Accessor","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a){"use strict";return e.default=class extends r{constructor(e){super(e),this.created=null,this.rating=null}},t.__decorate([o.property({type:Date})],e.default.prototype,"created",void 0),t.__decorate([o.property()],e.default.prototype,"rating",void 0),e.default=t.__decorate([a.subclass("esri.portal.PortalRating")],e.default),e.default})},"esri/support/basemapDefinitions":function(){define(["exports","../assets","../intl/messages"],function(e,t,r){"use strict";const o={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]}};e.esriBasemapDefinitions=o,e.getBasemapTitle=async function(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,o=await r.fetchMessageBundle("esri/t9n/basemaps");return o[e]||o[t]},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/intl/messages":function(){define(["exports","../core/Error","../core/handleUtils","../core/promiseUtils","./locale"],function(e,t,r,o,s){"use strict";const i={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function n(e){if(function(e){return e in i}(e)){const t=i[e];return!0===t?e:t}return null}const a=[],l=new Map;function c(e){for(const t of l.keys())u(e.pattern,t)&&l.delete(t)}function u(e,t){return"string"==typeof e?t.startsWith(e):e.test(t)}s.beforeLocaleChange(()=>{l.clear()});const p=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=o.createResolver())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}},d={cache:l,loaders:a};e.fetchMessageBundle=async function(e){const r=s.getLocale();l.has(e)||l.set(e,async function(e,r){const o=[];for(const t of a)if(u(t.pattern,e))try{return await t.fetchMessageBundle(e,r)}catch(e){o.push(e)}if(o.length)throw new t("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:o});throw new t("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}(e,r));const o=l.get(e);return o&&await p.add(o),o},e.messageBundlesLocaleMap=i,e.normalizeMessageBundleLocale=function(e){const t=s.getLocaleLanguage(e);return t?n(e)??n(t):null},e.registerMessageBundleLoader=function(e){return a.includes(e)||(c(e),a.unshift(e)),r.makeHandle(()=>{const t=a.indexOf(e);t>-1&&(a.splice(t,1),c(e))})},e.test=d,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/BasemapStyle":function(){define(["../chunks/tslib.es6","../intl","../core/Accessor","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/subclass","../intl/locale","../intl/messages"],function(e,t,r,o,s,i,n,a,l,c){"use strict";let u=class extends r{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const e=this.language;let t="local"===e||"global"===e?e:c.normalizeMessageBundleLocale(e??l.getLocale())??"global";return t="no"===t?"nb":t,t}};return e.__decorate([o.property()],u.prototype,"apiKey",void 0),e.__decorate([o.property()],u.prototype,"id",void 0),e.__decorate([o.property()],u.prototype,"language",void 0),e.__decorate([o.property()],u.prototype,"places",void 0),e.__decorate([o.property()],u.prototype,"serviceUrl",void 0),e.__decorate([o.property()],u.prototype,"worldview",void 0),u=e.__decorate([a.subclass("esri.support.BasemapStyle")],u),u})},"esri/intl":function(){define(["exports","./intl/date","./intl/number","./intl/substitute","./intl/locale","./intl/messages","./intl/t9n","./assets"],function(e,t,r,o,s,i,n,a){"use strict";i.registerMessageBundleLoader(n.createJSONLoader({pattern:"esri/",location:a.getAssetUrl})),e.convertDateFormatToIntlOptions=t.convertDateFormatToIntlOptions,e.formatDate=t.formatDate,e.formatDateOnly=t.formatDateOnly,e.formatTimeOnly=t.formatTimeOnly,e.formatTimestamp=t.formatTimestamp,e.convertNumberFormatToIntlOptions=r.convertNumberFormatToIntlOptions,e.formatNumber=r.formatNumber,e.substitute=o.substitute,e.getLocale=s.getLocale,e.getLocaleLanguage=s.getLocaleLanguage,e.onLocaleChange=s.onLocaleChange,e.prefersRTL=s.prefersRTL,e.setLocale=s.setLocale,e.fetchMessageBundle=i.fetchMessageBundle,e.normalizeMessageBundleLocale=i.normalizeMessageBundleLocale,e.registerMessageBundleLoader=i.registerMessageBundleLoader,e.createJSONLoader=n.createJSONLoader,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/intl/date":function(){define(["exports","../core/jsonMap","./locale","../time/constants","../time/timeZoneUtils","../chunks/datetime"],function(e,t,r,o,s,i){"use strict";const n={year:void 0,month:void 0,day:void 0,weekday:void 0},a={hour:void 0,minute:void 0,second:void 0},l={timeZone:o.utc},c={year:"numeric",month:"numeric",day:"numeric"},u={year:"numeric",month:"long",day:"numeric"},p={year:"numeric",month:"short",day:"numeric"},d={year:"numeric",month:"long",weekday:"long",day:"numeric"},h={hour:"numeric",minute:"numeric"},y={...h,second:"numeric"},f={hourCycle:"h23"},m={...h,...f},g={...y,...f},b={"short-date":c,"short-date-short-time":{...c,...h},"short-date-short-time-24":{...c,...m},"short-date-long-time":{...c,...y},"short-date-long-time-24":{...c,...g},"short-date-le":c,"short-date-le-short-time":{...c,...h},"short-date-le-short-time-24":{...c,...m},"short-date-le-long-time":{...c,...y},"short-date-le-long-time-24":{...c,...g},"long-month-day-year":u,"long-month-day-year-short-time":{...u,...h},"long-month-day-year-short-time-24":{...u,...m},"long-month-day-year-long-time":{...u,...y},"long-month-day-year-long-time-24":{...u,...g},"day-short-month-year":p,"day-short-month-year-short-time":{...p,...h},"day-short-month-year-short-time-24":{...p,...m},"day-short-month-year-long-time":{...p,...y},"day-short-month-year-long-time-24":{...p,...g},"long-date":d,"long-date-short-time":{...d,...h},"long-date-short-time-24":{...d,...m},"long-date-long-time":{...d,...y},"long-date-long-time-24":{...d,...g},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":h,"long-time":y},_=t.strict()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),S={ar:"ar-u-nu-latn-ca-gregory",nn:"no-NN"},v=new Intl.DateTimeFormat("bs",{month:"long"}).formatToParts(new Date(2025,2)),w=v.find(({type:e})=>"month"===e)?.value.toLowerCase();function x(){const e=r.getLocaleLanguage();return(e&&S[e])??r.normalizeLocale()}"mart"!==w&&(S.bs="sr-Latn-CS");let T=new WeakMap;const M=b["short-date-short-time"];function I(e){let t=T.get(e);if(!t){const r=x(),s=P(e.timeZone??o.system),i={...e,timeZone:s};t=new Intl.DateTimeFormat(r,i),T.set(e,t)}return t}function O(e,t=M){return I(t).format(e)}function P(e){switch(e){case o.system:return o.systemTimeZone;case o.unknown:return o.utc;default:return e}}r.beforeLocaleChange(()=>{T=new WeakMap}),e.convertDateFormatToIntlOptions=function(e){return b[e]},e.dateFormatJSONMap=_,e.formatDate=O,e.formatDateOnly=function(e,t=M){return O(new Date(e),{...t,...l,...a})},e.formatTimeOnly=function(e,t=M){return O(new Date(`1970-01-01T${e}Z`),{...t,...l,...n})},e.formatTimestamp=function(e,t=M){if(t.timeZone)return O(new Date(e),t);const r=i.DateTime.fromISO(e,{setZone:!0}),s=0===r.offset?o.utc:t.timeZone,n={...t,timeZone:s};return r.toLocaleString(n,{locale:x()})},e.getDateTimeFormatter=I,e.getShortOffsetTimeZoneSuffix=function(e,t=new Date){return function(e,t){return new Intl.DateTimeFormat(x(),t).formatToParts(e)}(t,{timeZone:e,timeZoneName:s.shortTimeZoneName}).find(({type:e})=>"timeZoneName"===e)?.value},e.resolveTimeZone=P,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/time/constants":function(){define(["exports"],function(e){"use strict";const t=Intl.DateTimeFormat().resolvedOptions().timeZone;e.system="system",e.systemTimeZone=t,e.unknown="unknown",e.utc="UTC",Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/time/timeZoneUtils":function(){define(["exports","./constants","./legacyTimeZoneMap","../chunks/datetime"],function(e,t,r,o){"use strict";const s="shortOffset";function i(e,r=t.system){return e?function(e){return"timeZoneIANA"in e}(e)?e.timeZoneIANA:a(e,r):r}function n(e){return{timeZoneIANA:e}}function a(e,s=t.system){if(!e||!r.legacyTimeZoneMap.has(e.timeZone))return s;const i=r.legacyTimeZoneMap.get(e.timeZone);return e.timeZone.startsWith("UTC")||e.respectsDaylightSaving?i:function(e){const t=o.DateTime.local().setZone(e),r=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return 0===r?"Etc/UTC":`Etc/GMT${o.FixedOffsetZone.instance(-r).formatOffset(0,"narrow")}`}(i)}e.convertLegacyTimeZone=a,e.fromTimeReference=i,e.getTimeZoneFormattingOptions=function(e,r,o,i,n){if(r&&"date"===n)return{timeZone:t.utc,timeZoneName:void 0};const a=i.timeStyle||i.hour,l="timestamp-offset"===n?void 0:e??t.utc,c=o===t.unknown;return{timeZone:c?l:o,timeZoneName:c&&a?s:void 0}},e.isTimeZoneValid=function(e){const r=new Set(["etc/utc","etc/gmt","gmt"]),o=new Set(Intl.supportedValuesOf("timeZone").map(e=>e.toLowerCase()));return e===t.system||e===t.unknown||r.has(e.toLowerCase())||o.has(e.toLowerCase())},e.shortTimeZoneName=s,e.timeZoneProperty=function(e,t=!1){return{json:{read:{source:e,reader:(t,r)=>r[e]?i(r[e]):null},write:!!t&&{allowNull:!0,writer(t,r){r[e]=t?n(t):null}}}}},e.toTimeReference=n,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/time/legacyTimeZoneMap":function(){define(["exports"],function(e){"use strict";const t=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);e.legacyTimeZoneMap=t,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/datetime":function(){define(["exports"],function(e){"use strict";class t extends Error{}class r extends t{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class o extends t{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class s extends t{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class i extends t{}class n extends t{constructor(e){super(`Invalid unit ${e}`)}}class a extends t{}class l extends t{constructor(){super("Zone is an abstract class")}}const c="numeric",u="short",p="long",d={year:c,month:c,day:c},h={year:c,month:u,day:c},y={year:c,month:u,day:c,weekday:u},f={year:c,month:p,day:c},m={year:c,month:p,day:c,weekday:p},g={hour:c,minute:c},b={hour:c,minute:c,second:c},_={hour:c,minute:c,second:c,timeZoneName:u},S={hour:c,minute:c,second:c,timeZoneName:p},v={hour:c,minute:c,hourCycle:"h23"},w={hour:c,minute:c,second:c,hourCycle:"h23"},x={hour:c,minute:c,second:c,hourCycle:"h23",timeZoneName:u},T={hour:c,minute:c,second:c,hourCycle:"h23",timeZoneName:p},M={year:c,month:c,day:c,hour:c,minute:c},I={year:c,month:c,day:c,hour:c,minute:c,second:c},O={year:c,month:u,day:c,hour:c,minute:c},P={year:c,month:u,day:c,hour:c,minute:c,second:c},k={year:c,month:u,day:c,weekday:u,hour:c,minute:c},C={year:c,month:p,day:c,hour:c,minute:c,timeZoneName:u},L={year:c,month:p,day:c,hour:c,minute:c,second:c,timeZoneName:u},E={year:c,month:p,day:c,weekday:p,hour:c,minute:c,timeZoneName:p},A={year:c,month:p,day:c,weekday:p,hour:c,minute:c,second:c,timeZoneName:p};class F{get type(){throw new l}get name(){throw new l}get ianaName(){return this.name}get isUniversal(){throw new l}offsetName(e,t){throw new l}formatOffset(e,t){throw new l}offset(e){throw new l}equals(e){throw new l}get isValid(){throw new l}}let R=null;class j extends F{static get instance(){return null===R&&(R=new j),R}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return rt(e,t,r)}formatOffset(e,t){return nt(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return"system"===e.type}get isValid(){return!0}}const N=new Map,D={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6},U=new Map;class V extends F{static create(e){let t=U.get(e);return void 0===t&&U.set(e,t=new V(e)),t}static resetCache(){U.clear(),N.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(e){return!1}}constructor(e){super(),this.zoneName=e,this.valid=V.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return rt(e,t,r,this.name)}formatOffset(e,t){return nt(this.offset(e),t)}offset(e){if(!this.valid)return NaN;const t=new Date(e);if(isNaN(t))return NaN;const r=function(e){let t=N.get(e);return void 0===t&&(t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),N.set(e,t)),t}(this.name);let[o,s,i,n,a,l,c]=r.formatToParts?function(e,t){const r=e.formatToParts(t),o=[];for(let e=0;e<r.length;e++){const{type:t,value:s}=r[e],i=D[t];"era"===t?o[i]=s:Re(i)||(o[i]=parseInt(s,10))}return o}(r,t):function(e,t){const r=e.format(t).replace(/\u200E/g,""),o=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,s,i,n,a,l,c,u]=o;return[n,s,i,a,l,c,u]}(r,t);"BC"===n&&(o=1-Math.abs(o));let u=+t;const p=u%1e3;return u-=p>=0?p:1e3+p,(Ye({year:o,month:s,day:i,hour:24===a?0:a,minute:l,second:c,millisecond:0})-u)/6e4}equals(e){return"iana"===e.type&&e.name===this.name}get isValid(){return this.valid}}let q={};const z=new Map;function G(e,t={}){const r=JSON.stringify([e,t]);let o=z.get(r);return void 0===o&&(o=new Intl.DateTimeFormat(e,t),z.set(r,o)),o}const B=new Map,$=new Map;let J=null;const W=new Map;function H(e){let t=W.get(e);return void 0===t&&(t=new Intl.DateTimeFormat(e).resolvedOptions(),W.set(e,t)),t}const Z=new Map;function Q(e,t,r,o){const s=e.listingMode();return"error"===s?null:"en"===s?r(t):o(t)}class K{constructor(e,t,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:o,floor:s,...i}=r;if(!t||Object.keys(i).length>0){const t={useGrouping:!1,...r};r.padTo>0&&(t.minimumIntegerDigits=r.padTo),this.inf=function(e,t={}){const r=JSON.stringify([e,t]);let o=B.get(r);return void 0===o&&(o=new Intl.NumberFormat(e,t),B.set(r,o)),o}(e,t)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}return Be(this.floor?Math.floor(e):He(e,3),this.padTo)}}class Y{constructor(e,t,r){let o;if(this.opts=r,this.originalZone=void 0,this.opts.timeZone)this.dt=e;else if("fixed"===e.zone.type){const t=e.offset/60*-1,r=t>=0?`Etc/GMT+${t}`:`Etc/GMT${t}`;0!==e.offset&&V.create(r).valid?(o=r,this.dt=e):(o="UTC",this.dt=0===e.offset?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else"system"===e.zone.type?this.dt=e:"iana"===e.zone.type?(this.dt=e,o=e.zone.name):(o="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||o,this.dtf=G(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(e=>{if("timeZoneName"===e.type){const t=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:t}}return e}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class X{constructor(e,t,r){this.opts={style:"long",...r},!t&&De()&&(this.rtf=function(e,t={}){const{base:r,...o}=t,s=JSON.stringify([e,o]);let i=$.get(s);return void 0===i&&(i=new Intl.RelativeTimeFormat(e,t),$.set(s,i)),i}(e,r))}format(e,t){return this.rtf?this.rtf.format(e,t):function(e,t,r="always",o=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},i=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===r&&i){const r="days"===e;switch(t){case 1:return r?"tomorrow":`next ${s[e][0]}`;case-1:return r?"yesterday":`last ${s[e][0]}`;case 0:return r?"today":`this ${s[e][0]}`}}const n=Object.is(t,-0)||t<0,a=Math.abs(t),l=1===a,c=s[e],u=o?l?c[1]:c[2]||c[1]:l?s[e][0]:e;return n?`${a} ${u} ago`:`in ${a} ${u}`}(t,e,this.opts.numeric,"long"!==this.opts.style)}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const ee={firstDay:1,minimalDays:4,weekend:[6,7]};class te{static fromOpts(e){return te.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,r,o,s=!1){const i=e||_e.defaultLocale,n=i||(s?"en-US":J||(J=(new Intl.DateTimeFormat).resolvedOptions().locale,J)),a=t||_e.defaultNumberingSystem,l=r||_e.defaultOutputCalendar,c=ze(o)||_e.defaultWeekSettings;return new te(n,a,l,c,i)}static resetCache(){J=null,z.clear(),B.clear(),$.clear(),W.clear(),Z.clear()}static fromObject({locale:e,numberingSystem:t,outputCalendar:r,weekSettings:o}={}){return te.create(e,t,r,o)}constructor(e,t,r,o,s){const[i,n,a]=function(e){const t=e.indexOf("-x-");-1!==t&&(e=e.substring(0,t));const r=e.indexOf("-u-");if(-1===r)return[e];{let t,o;try{t=G(e).resolvedOptions(),o=e}catch(s){const i=e.substring(0,r);t=G(i).resolvedOptions(),o=i}const{numberingSystem:s,calendar:i}=t;return[o,s,i]}}(e);this.locale=i,this.numberingSystem=t||n||null,this.outputCalendar=r||a||null,this.weekSettings=o,this.intl=function(e,t,r){return r||t?(e.includes("-u-")||(e+="-u"),r&&(e+=`-ca-${r}`),t&&(e+=`-nu-${t}`),e):e}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){var e;return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(e=this).numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===H(e.locale).numberingSystem)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return e&&t?"en":"intl"}clone(e){return e&&0!==Object.getOwnPropertyNames(e).length?te.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,ze(e.weekSettings)||this.weekSettings,e.defaultToEN||!1):this}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return Q(this,e,pt,()=>{const r="ja"===this.intl||this.intl.startsWith("ja-"),o=(t&=!r)?{month:e,day:"numeric"}:{month:e},s=t?"format":"standalone";if(!this.monthsCache[s][e]){const t=r?e=>this.dtFormatter(e,o).format():e=>this.extract(e,o,"month");this.monthsCache[s][e]=function(e){const t=[];for(let r=1;r<=12;r++){const o=yo.utc(2009,r,1);t.push(e(o))}return t}(t)}return this.monthsCache[s][e]})}weekdays(e,t=!1){return Q(this,e,ft,()=>{const r=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},o=t?"format":"standalone";return this.weekdaysCache[o][e]||(this.weekdaysCache[o][e]=function(e){const t=[];for(let r=1;r<=7;r++){const o=yo.utc(2016,11,13+r);t.push(e(o))}return t}(e=>this.extract(e,r,"weekday"))),this.weekdaysCache[o][e]})}meridiems(){return Q(this,void 0,()=>mt,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[yo.utc(2016,11,13,9),yo.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Q(this,e,St,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[yo.utc(-40,1,1),yo.utc(2017,1,1)].map(e=>this.extract(e,t,"era"))),this.eraCache[e]})}extract(e,t,r){const o=this.dtFormatter(e,t).formatToParts().find(e=>e.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new K(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new Y(e,this.intl,t)}relFormatter(e={}){return new X(this.intl,this.isEnglish(),e)}listFormatter(e={}){return function(e,t={}){const r=JSON.stringify([e,t]);let o=q[r];return o||(o=new Intl.ListFormat(e,t),q[r]=o),o}(this.intl,e)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||H(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Ue()?function(e){let t=Z.get(e);if(!t){const r=new Intl.Locale(e);t="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,"minimalDays"in t||(t={...ee,...t}),Z.set(e,t)}return t}(this.locale):ee}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let re=null;class oe extends F{static get utcInstance(){return null===re&&(re=new oe(0)),re}static instance(e){return 0===e?oe.utcInstance:new oe(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new oe(ot(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${nt(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${nt(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return nt(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return"fixed"===e.type&&e.fixed===this.fixed}get isValid(){return!0}}class se extends F{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function ie(e,t){if(Re(e)||null===e)return t;if(e instanceof F)return e;if("string"==typeof e){const r=e.toLowerCase();return"default"===r?t:"local"===r||"system"===r?j.instance:"utc"===r||"gmt"===r?oe.utcInstance:oe.parseSpecifier(r)||V.create(e)}return je(e)?oe.instance(e):"object"==typeof e&&"offset"in e&&"function"==typeof e.offset?e:new se(e)}const ne={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},ae={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},le=ne.hanidec.replace(/[\[|\]]/g,"").split(""),ce=new Map;function ue({numberingSystem:e},t=""){const r=e||"latn";let o=ce.get(r);void 0===o&&(o=new Map,ce.set(r,o));let s=o.get(t);return void 0===s&&(s=new RegExp(`${ne[r]}${t}`),o.set(t,s)),s}let pe,de=()=>Date.now(),he="system",ye=null,fe=null,me=null,ge=60,be=null;class _e{static get now(){return de}static set now(e){de=e}static set defaultZone(e){he=e}static get defaultZone(){return ie(he,j.instance)}static get defaultLocale(){return ye}static set defaultLocale(e){ye=e}static get defaultNumberingSystem(){return fe}static set defaultNumberingSystem(e){fe=e}static get defaultOutputCalendar(){return me}static set defaultOutputCalendar(e){me=e}static get defaultWeekSettings(){return be}static set defaultWeekSettings(e){be=ze(e)}static get twoDigitCutoffYear(){return ge}static set twoDigitCutoffYear(e){ge=e%100}static get throwOnInvalid(){return pe}static set throwOnInvalid(e){pe=e}static resetCaches(){te.resetCache(),V.resetCache(),yo.resetCache(),ce.clear()}}class Se{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const ve=[0,31,59,90,120,151,181,212,243,273,304,334],we=[0,31,60,91,121,152,182,213,244,274,305,335];function xe(e,t){return new Se("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function Te(e,t,r){const o=new Date(Date.UTC(e,t-1,r));e<100&&e>=0&&o.setUTCFullYear(o.getUTCFullYear()-1900);const s=o.getUTCDay();return 0===s?7:s}function Me(e,t,r){return r+(Ze(e)?we:ve)[t-1]}function Ie(e,t){const r=Ze(e)?we:ve,o=r.findIndex(e=>e<t);return{month:o+1,day:t-r[o]}}function Oe(e,t){return(e-t+7)%7+1}function Pe(e,t=4,r=1){const{year:o,month:s,day:i}=e,n=Me(o,s,i),a=Oe(Te(o,s,i),r);let l,c=Math.floor((n-a+14-t)/7);return c<1?(l=o-1,c=et(l,t,r)):c>et(o,t,r)?(l=o+1,c=1):l=o,{weekYear:l,weekNumber:c,weekday:a,...at(e)}}function ke(e,t=4,r=1){const{weekYear:o,weekNumber:s,weekday:i}=e,n=Oe(Te(o,1,t),r),a=Qe(o);let l,c=7*s+i-n-7+t;c<1?(l=o-1,c+=Qe(l)):c>a?(l=o+1,c-=Qe(o)):l=o;const{month:u,day:p}=Ie(l,c);return{year:l,month:u,day:p,...at(e)}}function Ce(e){const{year:t,month:r,day:o}=e;return{year:t,ordinal:Me(t,r,o),...at(e)}}function Le(e){const{year:t,ordinal:r}=e,{month:o,day:s}=Ie(t,r);return{year:t,month:o,day:s,...at(e)}}function Ee(e,t){if(!Re(e.localWeekday)||!Re(e.localWeekNumber)||!Re(e.localWeekYear)){if(!Re(e.weekday)||!Re(e.weekNumber)||!Re(e.weekYear))throw new i("Cannot mix locale-based week fields with ISO-based week fields");return Re(e.localWeekday)||(e.weekday=e.localWeekday),Re(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Re(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}return{minDaysInFirstWeek:4,startOfWeek:1}}function Ae(e){const t=Ne(e.year),r=Ge(e.month,1,12),o=Ge(e.day,1,Ke(e.year,e.month));return t?r?!o&&xe("day",e.day):xe("month",e.month):xe("year",e.year)}function Fe(e){const{hour:t,minute:r,second:o,millisecond:s}=e,i=Ge(t,0,23)||24===t&&0===r&&0===o&&0===s,n=Ge(r,0,59),a=Ge(o,0,59),l=Ge(s,0,999);return i?n?a?!l&&xe("millisecond",s):xe("second",o):xe("minute",r):xe("hour",t)}function Re(e){return void 0===e}function je(e){return"number"==typeof e}function Ne(e){return"number"==typeof e&&e%1==0}function De(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function Ue(){try{return"undefined"!=typeof Intl&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch(e){return!1}}function Ve(e,t,r){if(0!==e.length)return e.reduce((e,o)=>{const s=[t(o),o];return e&&r(e[0],s[0])===e[0]?e:s},null)[1]}function qe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ze(e){if(null==e)return null;if("object"!=typeof e)throw new a("Week settings must be an object");if(!Ge(e.firstDay,1,7)||!Ge(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(e=>!Ge(e,1,7)))throw new a("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Ge(e,t,r){return Ne(e)&&e>=t&&e<=r}function Be(e,t=2){let r;return r=e<0?"-"+(""+-e).padStart(t,"0"):(""+e).padStart(t,"0"),r}function $e(e){return Re(e)||null===e||""===e?void 0:parseInt(e,10)}function Je(e){return Re(e)||null===e||""===e?void 0:parseFloat(e)}function We(e){if(!Re(e)&&null!==e&&""!==e){const t=1e3*parseFloat("0."+e);return Math.floor(t)}}function He(e,t,r="round"){const o=10**t;switch(r){case"expand":return e>0?Math.ceil(e*o)/o:Math.floor(e*o)/o;case"trunc":return Math.trunc(e*o)/o;case"round":return Math.round(e*o)/o;case"floor":return Math.floor(e*o)/o;case"ceil":return Math.ceil(e*o)/o;default:throw new RangeError(`Value rounding ${r} is out of range`)}}function Ze(e){return e%4==0&&(e%100!=0||e%400==0)}function Qe(e){return Ze(e)?366:365}function Ke(e,t){const r=(o=t-1)-12*Math.floor(o/12)+1;var o;return 2===r?Ze(e+(t-r)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function Ye(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function Xe(e,t,r){return-Oe(Te(e,1,t),r)+t-1}function et(e,t=4,r=1){const o=Xe(e,t,r),s=Xe(e+1,t,r);return(Qe(e)-o+s)/7}function tt(e){return e>99?e:e>_e.twoDigitCutoffYear?1900+e:2e3+e}function rt(e,t,r,o=null){const s=new Date(e),i={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};o&&(i.timeZone=o);const n={timeZoneName:t,...i},a=new Intl.DateTimeFormat(r,n).formatToParts(s).find(e=>"timezonename"===e.type.toLowerCase());return a?a.value:null}function ot(e,t){let r=parseInt(e,10);Number.isNaN(r)&&(r=0);const o=parseInt(t,10)||0;return 60*r+(r<0||Object.is(r,-0)?-o:o)}function st(e){const t=Number(e);if("boolean"==typeof e||""===e||!Number.isFinite(t))throw new a(`Invalid unit value ${e}`);return t}function it(e,t){const r={};for(const o in e)if(qe(e,o)){const s=e[o];if(null==s)continue;r[t(o)]=st(s)}return r}function nt(e,t){const r=Math.trunc(Math.abs(e/60)),o=Math.trunc(Math.abs(e%60)),s=e>=0?"+":"-";switch(t){case"short":return`${s}${Be(r,2)}:${Be(o,2)}`;case"narrow":return`${s}${r}${o>0?`:${o}`:""}`;case"techie":return`${s}${Be(r,2)}${Be(o,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function at(e){return function(e){return["hour","minute","second","millisecond"].reduce((t,r)=>(t[r]=e[r],t),{})}(e)}const lt=["January","February","March","April","May","June","July","August","September","October","November","December"],ct=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ut=["J","F","M","A","M","J","J","A","S","O","N","D"];function pt(e){switch(e){case"narrow":return[...ut];case"short":return[...ct];case"long":return[...lt];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const dt=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ht=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],yt=["M","T","W","T","F","S","S"];function ft(e){switch(e){case"narrow":return[...yt];case"short":return[...ht];case"long":return[...dt];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const mt=["AM","PM"],gt=["Before Christ","Anno Domini"],bt=["BC","AD"],_t=["B","A"];function St(e){switch(e){case"narrow":return[..._t];case"short":return[...bt];case"long":return[...gt];default:return null}}function vt(e,t){let r="";for(const o of e)o.literal?r+=o.val:r+=t(o.val);return r}const wt={D:d,DD:h,DDD:f,DDDD:m,t:g,tt:b,ttt:_,tttt:S,T:v,TT:w,TTT:x,TTTT:T,f:M,ff:O,fff:C,ffff:E,F:I,FF:P,FFF:L,FFFF:A};class xt{static create(e,t={}){return new xt(e,t)}static parseFormat(e){let t=null,r="",o=!1;const s=[];for(let i=0;i<e.length;i++){const n=e.charAt(i);"'"===n?((r.length>0||o)&&s.push({literal:o||/^\s+$/.test(r),val:""===r?"'":r}),t=null,r="",o=!o):o||n===t?r+=n:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=n,t=n)}return r.length>0&&s.push({literal:o||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return wt[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0,r=void 0){if(this.opts.forceSimple)return Be(e,t);const o={...this.opts};return t>0&&(o.padTo=t),r&&(o.signDisplay=r),this.loc.numberFormatter(o).format(e)}formatDateTimeFromString(e,t){const r="en"===this.loc.listingMode(),o=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,s=(t,r)=>this.loc.extract(e,t,r),i=t=>e.isOffsetFixed&&0===e.offset&&t.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,t.format):"",n=(t,o)=>r?function(e,t){return pt(t)[e.month-1]}(e,t):s(o?{month:t}:{month:t,day:"numeric"},"month"),a=(t,o)=>r?function(e,t){return ft(t)[e.weekday-1]}(e,t):s(o?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday"),l=t=>{const r=xt.macroTokenToFormatOpts(t);return r?this.formatWithSystemDefault(e,r):t},c=t=>r?function(e,t){return St(t)[e.year<0?0:1]}(e,t):s({era:t},"era");return vt(xt.parseFormat(t),t=>{switch(t){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12==0?12:e.hour%12);case"hh":return this.num(e.hour%12==0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return i({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return i({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return i({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return r?function(e){return mt[e.hour<12?0:1]}(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod");case"d":return o?s({day:"numeric"},"day"):this.num(e.day);case"dd":return o?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":case"E":return this.num(e.weekday);case"ccc":return a("short",!0);case"cccc":return a("long",!0);case"ccccc":return a("narrow",!0);case"EEE":return a("short",!1);case"EEEE":return a("long",!1);case"EEEEE":return a("narrow",!1);case"L":return o?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return o?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return n("short",!0);case"LLLL":return n("long",!0);case"LLLLL":return n("narrow",!0);case"M":return o?s({month:"numeric"},"month"):this.num(e.month);case"MM":return o?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return n("short",!1);case"MMMM":return n("long",!1);case"MMMMM":return n("narrow",!1);case"y":return o?s({year:"numeric"},"year"):this.num(e.year);case"yy":return o?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return o?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return o?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return c("short");case"GG":return c("long");case"GGGGG":return c("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return l(t)}})}formatDurationFromString(e,t){const r="negativeLargestOnly"===this.opts.signMode?-1:1,o=e=>{switch(e[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},s=xt.parseFormat(t),i=s.reduce((e,{literal:t,val:r})=>t?e:e.concat(r),[]),n=e.shiftTo(...i.map(o).filter(e=>e));return vt(s,((e,t)=>s=>{const i=o(s);if(i){const o=t.isNegativeDuration&&i!==t.largestUnit?r:1;let n;return n="negativeLargestOnly"===this.opts.signMode&&i!==t.largestUnit?"never":"all"===this.opts.signMode?"always":"auto",this.num(e.get(i)*o,s.length,n)}return s})(n,{isNegativeDuration:n<0,largestUnit:Object.keys(n.values)[0]}))}}const Tt=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Mt(...e){const t=e.reduce((e,t)=>e+t.source,"");return RegExp(`^${t}$`)}function It(...e){return t=>e.reduce(([e,r,o],s)=>{const[i,n,a]=s(t,o);return[{...e,...i},n||r,a]},[{},null,1]).slice(0,2)}function Ot(e,...t){if(null==e)return[null,null];for(const[r,o]of t){const t=r.exec(e);if(t)return o(t)}return[null,null]}function Pt(...e){return(t,r)=>{const o={};let s;for(s=0;s<e.length;s++)o[e[s]]=$e(t[r+s]);return[o,null,r+s]}}const kt=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,Ct=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Lt=RegExp(`${Ct.source}(?:${kt.source}?(?:\\[(${Tt.source})\\])?)?`),Et=RegExp(`(?:[Tt]${Lt.source})?`),At=Pt("weekYear","weekNumber","weekDay"),Ft=Pt("year","ordinal"),Rt=RegExp(`${Ct.source} ?(?:${kt.source}|(${Tt.source}))?`),jt=RegExp(`(?: ${Rt.source})?`);function Nt(e,t,r){const o=e[t];return Re(o)?r:$e(o)}function Dt(e,t){return[{hours:Nt(e,t,0),minutes:Nt(e,t+1,0),seconds:Nt(e,t+2,0),milliseconds:We(e[t+3])},null,t+4]}function Ut(e,t){const r=!e[t]&&!e[t+1],o=ot(e[t+1],e[t+2]);return[{},r?null:oe.instance(o),t+3]}function Vt(e,t){return[{},e[t]?V.create(e[t]):null,t+1]}const qt=RegExp(`^T?${Ct.source}$`),zt=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Gt(e){const[t,r,o,s,i,n,a,l,c]=e,u="-"===t[0],p=l&&"-"===l[0],d=(e,t=!1)=>void 0!==e&&(t||e&&u)?-e:e;return[{years:d(Je(r)),months:d(Je(o)),weeks:d(Je(s)),days:d(Je(i)),hours:d(Je(n)),minutes:d(Je(a)),seconds:d(Je(l),"-0"===l),milliseconds:d(We(c),p)}]}const Bt={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function $t(e,t,r,o,s,i,n){const a={year:2===t.length?tt($e(t)):$e(t),month:ct.indexOf(r)+1,day:$e(o),hour:$e(s),minute:$e(i)};return n&&(a.second=$e(n)),e&&(a.weekday=e.length>3?dt.indexOf(e)+1:ht.indexOf(e)+1),a}const Jt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Wt(e){const[,t,r,o,s,i,n,a,l,c,u,p]=e,d=$t(t,s,o,r,i,n,a);let h;return h=l?Bt[l]:c?0:ot(u,p),[d,new oe(h)]}const Ht=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Zt=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Qt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Kt(e){const[,t,r,o,s,i,n,a]=e;return[$t(t,s,o,r,i,n,a),oe.utcInstance]}function Yt(e){const[,t,r,o,s,i,n,a]=e;return[$t(t,a,r,o,s,i,n),oe.utcInstance]}const Xt=Mt(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Et),er=Mt(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Et),tr=Mt(/(\d{4})-?(\d{3})/,Et),rr=Mt(Lt),or=It(function(e,t){return[{year:Nt(e,t),month:Nt(e,t+1,1),day:Nt(e,t+2,1)},null,t+3]},Dt,Ut,Vt),sr=It(At,Dt,Ut,Vt),ir=It(Ft,Dt,Ut,Vt),nr=It(Dt,Ut,Vt),ar=It(Dt),lr=Mt(/(\d{4})-(\d\d)-(\d\d)/,jt),cr=Mt(Rt),ur=It(Dt,Ut,Vt),pr="Invalid Duration",dr={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},hr={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...dr},yr={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:4.3481250000000005,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...dr},fr=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],mr=fr.slice(0).reverse();function gr(e,t,r=!1){const o={values:r?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new vr(o)}function br(e,t){let r=t.milliseconds??0;for(const o of mr.slice(1))t[o]&&(r+=t[o]*e[o].milliseconds);return r}function _r(e,t){const r=br(e,t)<0?-1:1;fr.reduceRight((o,s)=>{if(Re(t[s]))return o;if(o){const i=t[o]*r,n=e[s][o],a=Math.floor(i/n);t[s]+=a*r,t[o]-=a*n*r}return s},null),fr.reduce((r,o)=>{if(Re(t[o]))return r;if(r){const s=t[r]%1;t[r]-=s,t[o]+=s*e[r][o]}return o},null)}function Sr(e){const t={};for(const[r,o]of Object.entries(e))0!==o&&(t[r]=o);return t}class vr{constructor(e){const t="longterm"===e.conversionAccuracy||!1;let r=t?yr:hr;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||te.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,t){return vr.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(null==e||"object"!=typeof e)throw new a("Duration.fromObject: argument expected to be an object, got "+(null===e?"null":typeof e));return new vr({values:it(e,vr.normalizeUnit),loc:te.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(je(e))return vr.fromMillis(e);if(vr.isDuration(e))return e;if("object"==typeof e)return vr.fromObject(e);throw new a(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[r]=function(e){return Ot(e,[zt,Gt])}(e);return r?vr.fromObject(r,t):vr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[r]=function(e){return Ot(e,[qt,ar])}(e);return r?vr.fromObject(r,t):vr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new a("need to specify a reason the Duration is invalid");const r=e instanceof Se?e:new Se(e,t);if(_e.throwOnInvalid)throw new s(r);return new vr({invalid:r})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new n(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const r={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?xt.create(this.loc,r).formatDurationFromString(this,e):pr}toHuman(e={}){if(!this.isValid)return pr;const t=!1!==e.showZeros,r=fr.map(r=>{const o=this.values[r];return Re(o)||0===o&&!t?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(o)}).filter(e=>e);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=He(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},yo.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?br(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=vr.fromDurationLike(e),r={};for(const e of fr)(qe(t.values,e)||qe(this.values,e))&&(r[e]=t.get(e)+this.get(e));return gr(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const t=vr.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=st(e(this.values[r],r));return gr(this,{values:t},!0)}get(e){return this[vr.normalizeUnit(e)]}set(e){return this.isValid?gr(this,{values:{...this.values,...it(e,vr.normalizeUnit)}}):this}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:r,matrix:o}={}){return gr(this,{loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:o,conversionAccuracy:r})}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return _r(this.matrix,e),gr(this,{values:e},!0)}rescale(){return this.isValid?gr(this,{values:Sr(this.normalize().shiftToAll().toObject())},!0):this}shiftTo(...e){if(!this.isValid)return this;if(0===e.length)return this;e=e.map(e=>vr.normalizeUnit(e));const t={},r={},o=this.toObject();let s;for(const i of fr)if(e.indexOf(i)>=0){s=i;let e=0;for(const t in r)e+=this.matrix[t][i]*r[t],r[t]=0;je(o[i])&&(e+=o[i]);const n=Math.trunc(e);t[i]=n,r[i]=(1e3*e-1e3*n)/1e3}else je(o[i])&&(r[i]=o[i]);for(const e in r)0!==r[e]&&(t[s]+=e===s?r[e]:r[e]/this.matrix[s][e]);return _r(this.matrix,t),gr(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=0===this.values[t]?0:-this.values[t];return gr(this,{values:e},!0)}removeZeros(){return this.isValid?gr(this,{values:Sr(this.values)},!0):this}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;function t(e,t){return void 0===e||0===e?void 0===t||0===t:e===t}for(const r of fr)if(!t(this.values[r],e.values[r]))return!1;return!0}}const wr="Invalid Interval";class xr{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new a("need to specify a reason the Interval is invalid");const r=e instanceof Se?e:new Se(e,t);if(_e.throwOnInvalid)throw new o(r);return new xr({invalid:r})}static fromDateTimes(e,t){const r=fo(e),o=fo(t),s=function(e,t){return e&&e.isValid?t&&t.isValid?t<e?xr.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null:xr.invalid("missing or invalid end"):xr.invalid("missing or invalid start")}(r,o);return s??new xr({start:r,end:o})}static after(e,t){const r=vr.fromDurationLike(t),o=fo(e);return xr.fromDateTimes(o,o.plus(r))}static before(e,t){const r=vr.fromDurationLike(t),o=fo(e);return xr.fromDateTimes(o.minus(r),o)}static fromISO(e,t){const[r,o]=(e||"").split("/",2);if(r&&o){let e,s,i,n;try{e=yo.fromISO(r,t),s=e.isValid}catch(o){s=!1}try{i=yo.fromISO(o,t),n=i.isValid}catch(o){n=!1}if(s&&n)return xr.fromDateTimes(e,i);if(s){const r=vr.fromISO(o,t);if(r.isValid)return xr.after(e,r)}else if(n){const e=vr.fromISO(r,t);if(e.isValid)return xr.before(i,e)}}return xr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const r=this.start.startOf(e,t);let o;return o=t?.useLocaleWeeks?this.end.reconfigure({locale:r.locale}):this.end,o=o.startOf(e,t),Math.floor(o.diff(r,e).get(e))+(o.valueOf()!==this.end.valueOf())}hasSame(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return!!this.isValid&&this.s>e}isBefore(e){return!!this.isValid&&this.e<=e}contains(e){return!!this.isValid&&this.s<=e&&this.e>e}set({start:e,end:t}={}){return this.isValid?xr.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(fo).filter(e=>this.contains(e)).sort((e,t)=>e.toMillis()-t.toMillis()),r=[];let{s:o}=this,s=0;for(;o<this.e;){const e=t[s]||this.e,i=+e>+this.e?this.e:e;r.push(xr.fromDateTimes(o,i)),o=i,s+=1}return r}splitBy(e){const t=vr.fromDurationLike(e);if(!this.isValid||!t.isValid||0===t.as("milliseconds"))return[];let r,{s:o}=this,s=1;const i=[];for(;o<this.e;){const e=this.start.plus(t.mapUnits(e=>e*s));r=+e>+this.e?this.e:e,i.push(xr.fromDateTimes(o,r)),o=r,s+=1}return i}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return!!this.isValid&&+this.e===+e.s}abutsEnd(e){return!!this.isValid&&+e.e===+this.s}engulfs(e){return!!this.isValid&&this.s<=e.s&&this.e>=e.e}equals(e){return!(!this.isValid||!e.isValid)&&this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return t>=r?null:xr.fromDateTimes(t,r)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return xr.fromDateTimes(t,r)}static merge(e){const[t,r]=e.sort((e,t)=>e.s-t.s).reduce(([e,t],r)=>t?t.overlaps(r)||t.abutsStart(r)?[e,t.union(r)]:[e.concat([t]),r]:[e,r],[[],null]);return r&&t.push(r),t}static xor(e){let t=null,r=0;const o=[],s=e.map(e=>[{time:e.s,type:"s"},{time:e.e,type:"e"}]),i=Array.prototype.concat(...s).sort((e,t)=>e.time-t.time);for(const e of i)r+="s"===e.type?1:-1,1===r?t=e.time:(t&&+t!==+e.time&&o.push(xr.fromDateTimes(t,e.time)),t=null);return xr.merge(o)}difference(...e){return xr.xor([this].concat(e)).map(e=>this.intersection(e)).filter(e=>e&&!e.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:wr}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=d,t={}){return this.isValid?xt.create(this.s.loc.clone(t),e).formatInterval(this):wr}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:wr}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:wr}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:wr}toFormat(e,{separator:t=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:wr}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):vr.invalid(this.invalidReason)}mapEndpoints(e){return xr.fromDateTimes(e(this.s),e(this.e))}}class Tr{static hasDST(e=_e.defaultZone){const t=yo.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return V.isValidZone(e)}static normalizeZone(e){return ie(e,_e.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||te.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||te.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||te.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:r=null,locObj:o=null,outputCalendar:s="gregory"}={}){return(o||te.create(t,r,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:o=null,outputCalendar:s="gregory"}={}){return(o||te.create(t,r,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:r=null,locObj:o=null}={}){return(o||te.create(t,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:o=null}={}){return(o||te.create(t,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return te.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return te.create(t,null,"gregory").eras(e)}static features(){return{relative:De(),localeWeek:Ue()}}}function Mr(e,t){const r=e=>e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),o=r(t)-r(e);return Math.floor(vr.fromMillis(o).as("days"))}function Ir(e,t=e=>e){return{regex:e,deser:([e])=>t(function(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let r=0;r<e.length;r++){const o=e.charCodeAt(r);if(-1!==e[r].search(ne.hanidec))t+=le.indexOf(e[r]);else for(const e in ae){const[r,s]=ae[e];o>=r&&o<=s&&(t+=o-r)}}return parseInt(t,10)}return t}(e))}}const Or=`[ ${String.fromCharCode(160)}]`,Pr=new RegExp(Or,"g");function kr(e){return e.replace(/\./g,"\\.?").replace(Pr,Or)}function Cr(e){return e.replace(/\./g,"").replace(Pr," ").toLowerCase()}function Lr(e,t){return null===e?null:{regex:RegExp(e.map(kr).join("|")),deser:([r])=>e.findIndex(e=>Cr(r)===Cr(e))+t}}function Er(e,t){return{regex:e,deser:([,e,t])=>ot(e,t),groups:t}}function Ar(e){return{regex:e,deser:([e])=>e}}const Fr={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Rr=null;function jr(e,t){return Array.prototype.concat(...e.map(e=>function(e,t){if(e.literal)return e;const r=Ur(xt.macroTokenToFormatOpts(e.val),t);return null==r||r.includes(void 0)?e:r}(e,t)))}class Nr{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=jr(xt.parseFormat(t),e),this.units=this.tokens.map(t=>function(e,t){const r=ue(t),o=ue(t,"{2}"),s=ue(t,"{3}"),i=ue(t,"{4}"),n=ue(t,"{6}"),a=ue(t,"{1,2}"),l=ue(t,"{1,3}"),c=ue(t,"{1,6}"),u=ue(t,"{1,9}"),p=ue(t,"{2,4}"),d=ue(t,"{4,6}"),h=e=>{return{regex:RegExp((t=e.val,t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:([e])=>e,literal:!0};var t},y=(y=>{if(e.literal)return h(y);switch(y.val){case"G":return Lr(t.eras("short"),0);case"GG":return Lr(t.eras("long"),0);case"y":return Ir(c);case"yy":case"kk":return Ir(p,tt);case"yyyy":case"kkkk":return Ir(i);case"yyyyy":return Ir(d);case"yyyyyy":return Ir(n);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return Ir(a);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return Ir(o);case"MMM":return Lr(t.months("short",!0),1);case"MMMM":return Lr(t.months("long",!0),1);case"LLL":return Lr(t.months("short",!1),1);case"LLLL":return Lr(t.months("long",!1),1);case"o":case"S":return Ir(l);case"ooo":case"SSS":return Ir(s);case"u":return Ar(u);case"uu":return Ar(a);case"uuu":case"E":case"c":return Ir(r);case"a":return Lr(t.meridiems(),0);case"EEE":return Lr(t.weekdays("short",!1),1);case"EEEE":return Lr(t.weekdays("long",!1),1);case"ccc":return Lr(t.weekdays("short",!0),1);case"cccc":return Lr(t.weekdays("long",!0),1);case"Z":case"ZZ":return Er(new RegExp(`([+-]${a.source})(?::(${o.source}))?`),2);case"ZZZ":return Er(new RegExp(`([+-]${a.source})(${o.source})?`),2);case"z":return Ar(/[a-z_+-/]{1,256}?/i);case" ":return Ar(/[^\S\n\r]/);default:return h(y)}})(e)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return y.token=e,y}(t,e)),this.disqualifyingUnit=this.units.find(e=>e.invalidReason),!this.disqualifyingUnit){const[e,t]=[`^${(r=this.units).map(e=>e.regex).reduce((e,t)=>`${e}(${t.source})`,"")}$`,r];this.regex=RegExp(e,"i"),this.handlers=t}var r}explainFromTokens(e){if(this.isValid){const[t,r]=function(e,t,r){const o=e.match(t);if(o){const e={};let t=1;for(const s in r)if(qe(r,s)){const i=r[s],n=i.groups?i.groups+1:1;!i.literal&&i.token&&(e[i.token.val[0]]=i.deser(o.slice(t,t+n))),t+=n}return[o,e]}return[o,{}]}(e,this.regex,this.handlers),[o,s,n]=r?function(e){let t,r=null;return Re(e.z)||(r=V.create(e.z)),Re(e.Z)||(r||(r=new oe(e.Z)),t=e.Z),Re(e.q)||(e.M=3*(e.q-1)+1),Re(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),Re(e.u)||(e.S=We(e.u)),[Object.keys(e).reduce((t,r)=>{const o=(e=>{switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(r);return o&&(t[o]=e[r]),t},{}),r,t]}(r):[null,null,void 0];if(qe(r,"a")&&qe(r,"H"))throw new i("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:r,result:o,zone:s,specificOffset:n}}return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Dr(e,t,r){return new Nr(e,r).explainFromTokens(t)}function Ur(e,t){if(!e)return null;const r=xt.create(t,e).dtFormatter((Rr||(Rr=yo.fromMillis(1555555555555)),Rr)),o=r.formatToParts(),s=r.resolvedOptions();return o.map(t=>function(e,t,r){const{type:o,value:s}=e;if("literal"===o){const e=/^\s+$/.test(s);return{literal:!e,val:e?" ":s}}const i=t[o];let n=o;"hour"===o&&(n=null!=t.hour12?t.hour12?"hour12":"hour24":null!=t.hourCycle?"h11"===t.hourCycle||"h12"===t.hourCycle?"hour12":"hour24":r.hour12?"hour12":"hour24");let a=Fr[n];if("object"==typeof a&&(a=a[i]),a)return{literal:!1,val:a}}(t,e,s))}const Vr="Invalid DateTime",qr=864e13;function zr(e){return new Se("unsupported zone",`the zone "${e.name}" is not supported`)}function Gr(e){return null===e.weekData&&(e.weekData=Pe(e.c)),e.weekData}function Br(e){return null===e.localWeekData&&(e.localWeekData=Pe(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function $r(e,t){const r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new yo({...r,...t,old:r})}function Jr(e,t,r){let o=e-60*t*1e3;const s=r.offset(o);if(t===s)return[o,t];o-=60*(s-t)*1e3;const i=r.offset(o);return s===i?[o,s]:[e-60*Math.min(s,i)*1e3,Math.max(s,i)]}function Wr(e,t){const r=new Date(e+=60*t*1e3);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function Hr(e,t,r){return Jr(Ye(e),t,r)}function Zr(e,t){const r=e.o,o=e.c.year+Math.trunc(t.years),s=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),i={...e.c,year:o,month:s,day:Math.min(e.c.day,Ke(o,s))+Math.trunc(t.days)+7*Math.trunc(t.weeks)},n=vr.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=Ye(i);let[l,c]=Jr(a,r,e.zone);return 0!==n&&(l+=n,c=e.zone.offset(l)),{ts:l,o:c}}function Qr(e,t,r,o,s,i){const{setZone:n,zone:a}=r;if(e&&0!==Object.keys(e).length||t){const o=t||a,s=yo.fromObject(e,{...r,zone:o,specificOffset:i});return n?s:s.setZone(a)}return yo.invalid(new Se("unparsable",`the input "${s}" can't be parsed as ${o}`))}function Kr(e,t,r=!0){return e.isValid?xt.create(te.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Yr(e,t,r){const o=e.c.year>9999||e.c.year<0;let s="";if(o&&e.c.year>=0&&(s+="+"),s+=Be(e.c.year,o?6:4),"year"===r)return s;if(t){if(s+="-",s+=Be(e.c.month),"month"===r)return s;s+="-"}else if(s+=Be(e.c.month),"month"===r)return s;return s+=Be(e.c.day),s}function Xr(e,t,r,o,s,i,n){let a=!r||0!==e.c.millisecond||0!==e.c.second,l="";switch(n){case"day":case"month":case"year":break;default:if(l+=Be(e.c.hour),"hour"===n)break;if(t){if(l+=":",l+=Be(e.c.minute),"minute"===n)break;a&&(l+=":",l+=Be(e.c.second))}else{if(l+=Be(e.c.minute),"minute"===n)break;a&&(l+=Be(e.c.second))}if("second"===n)break;!a||o&&0===e.c.millisecond||(l+=".",l+=Be(e.c.millisecond,3))}return s&&(e.isOffsetFixed&&0===e.offset&&!i?l+="Z":e.o<0?(l+="-",l+=Be(Math.trunc(-e.o/60)),l+=":",l+=Be(Math.trunc(-e.o%60))):(l+="+",l+=Be(Math.trunc(e.o/60)),l+=":",l+=Be(Math.trunc(e.o%60)))),i&&(l+="["+e.zone.ianaName+"]"),l}const eo={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},to={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},ro={ordinal:1,hour:0,minute:0,second:0,millisecond:0},oo=["year","month","day","hour","minute","second","millisecond"],so=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],io=["year","ordinal","hour","minute","second","millisecond"];function no(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new n(e);return t}function ao(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return no(e)}}function lo(e,t){const r=ie(t.zone,_e.defaultZone);if(!r.isValid)return yo.invalid(zr(r));const o=te.fromObject(t);let s,i;if(Re(e.year))s=_e.now();else{for(const t of oo)Re(e[t])&&(e[t]=eo[t]);const t=Ae(e)||Fe(e);if(t)return yo.invalid(t);const o=function(e){if(void 0===po&&(po=_e.now()),"iana"!==e.type)return e.offset(po);const t=e.name;let r=ho.get(t);return void 0===r&&(r=e.offset(po),ho.set(t,r)),r}(r);[s,i]=Hr(e,o,r)}return new yo({ts:s,zone:r,loc:o,o:i})}function co(e,t,r){const o=!!Re(r.round)||r.round,s=Re(r.rounding)?"trunc":r.rounding,i=(e,i)=>(e=He(e,o||r.calendary?0:2,r.calendary?"round":s),t.loc.clone(r).relFormatter(r).format(e,i)),n=o=>r.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(r.unit)return i(n(r.unit),r.unit);for(const e of r.units){const t=n(e);if(Math.abs(t)>=1)return i(t,e)}return i(e>t?-0:0,r.units[r.units.length-1])}function uo(e){let t,r={};return e.length>0&&"object"==typeof e[e.length-1]?(r=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[r,t]}let po;const ho=new Map;class yo{constructor(e){const t=e.zone||_e.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new Se("invalid input"):null)||(t.isValid?null:zr(t));this.ts=Re(e.ts)?_e.now():e.ts;let o=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[o,s]=[e.old.c,e.old.o];else{const i=je(e.o)&&!e.old?e.o:t.offset(this.ts);o=Wr(this.ts,i),r=Number.isNaN(o.year)?new Se("invalid input"):null,o=r?null:o,s=r?null:i}this._zone=t,this.loc=e.loc||te.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=o,this.o=s,this.isLuxonDateTime=!0}static now(){return new yo({})}static local(){const[e,t]=uo(arguments),[r,o,s,i,n,a,l]=t;return lo({year:r,month:o,day:s,hour:i,minute:n,second:a,millisecond:l},e)}static utc(){const[e,t]=uo(arguments),[r,o,s,i,n,a,l]=t;return e.zone=oe.utcInstance,lo({year:r,month:o,day:s,hour:i,minute:n,second:a,millisecond:l},e)}static fromJSDate(e,t={}){const r=(o=e,"[object Date]"===Object.prototype.toString.call(o)?e.valueOf():NaN);var o;if(Number.isNaN(r))return yo.invalid("invalid input");const s=ie(t.zone,_e.defaultZone);return s.isValid?new yo({ts:r,zone:s,loc:te.fromObject(t)}):yo.invalid(zr(s))}static fromMillis(e,t={}){if(je(e))return e<-qr||e>qr?yo.invalid("Timestamp out of range"):new yo({ts:e,zone:ie(t.zone,_e.defaultZone),loc:te.fromObject(t)});throw new a(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(je(e))return new yo({ts:1e3*e,zone:ie(t.zone,_e.defaultZone),loc:te.fromObject(t)});throw new a("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const r=ie(t.zone,_e.defaultZone);if(!r.isValid)return yo.invalid(zr(r));const o=te.fromObject(t),s=it(e,ao),{minDaysInFirstWeek:n,startOfWeek:a}=Ee(s,o),l=_e.now(),c=Re(t.specificOffset)?r.offset(l):t.specificOffset,u=!Re(s.ordinal),p=!Re(s.year),d=!Re(s.month)||!Re(s.day),h=p||d,y=s.weekYear||s.weekNumber;if((h||u)&&y)throw new i("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&u)throw new i("Can't mix ordinal dates with month/day");const f=y||s.weekday&&!h;let m,g,b=Wr(l,c);f?(m=so,g=to,b=Pe(b,n,a)):u?(m=io,g=ro,b=Ce(b)):(m=oo,g=eo);let _=!1;for(const e of m)Re(s[e])?s[e]=_?g[e]:b[e]:_=!0;const S=f?function(e,t=4,r=1){const o=Ne(e.weekYear),s=Ge(e.weekNumber,1,et(e.weekYear,t,r)),i=Ge(e.weekday,1,7);return o?s?!i&&xe("weekday",e.weekday):xe("week",e.weekNumber):xe("weekYear",e.weekYear)}(s,n,a):u?function(e){const t=Ne(e.year),r=Ge(e.ordinal,1,Qe(e.year));return t?!r&&xe("ordinal",e.ordinal):xe("year",e.year)}(s):Ae(s),v=S||Fe(s);if(v)return yo.invalid(v);const w=f?ke(s,n,a):u?Le(s):s,[x,T]=Hr(w,c,r),M=new yo({ts:x,zone:r,o:T,loc:o});return s.weekday&&h&&e.weekday!==M.weekday?yo.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${M.toISO()}`):M.isValid?M:yo.invalid(M.invalid)}static fromISO(e,t={}){const[r,o]=function(e){return Ot(e,[Xt,or],[er,sr],[tr,ir],[rr,nr])}(e);return Qr(r,o,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[r,o]=function(e){return Ot(function(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e),[Jt,Wt])}(e);return Qr(r,o,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[r,o]=function(e){return Ot(e,[Ht,Kt],[Zt,Kt],[Qt,Yt])}(e);return Qr(r,o,t,"HTTP",t)}static fromFormat(e,t,r={}){if(Re(e)||Re(t))throw new a("fromFormat requires an input string and a format");const{locale:o=null,numberingSystem:s=null}=r,i=te.fromOpts({locale:o,numberingSystem:s,defaultToEN:!0}),[n,l,c,u]=function(e,t,r){const{result:o,zone:s,specificOffset:i,invalidReason:n}=Dr(e,t,r);return[o,s,i,n]}(i,e,t);return u?yo.invalid(u):Qr(n,l,r,`format ${t}`,e,c)}static fromString(e,t,r={}){return yo.fromFormat(e,t,r)}static fromSQL(e,t={}){const[r,o]=function(e){return Ot(e,[lr,or],[cr,ur])}(e);return Qr(r,o,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new a("need to specify a reason the DateTime is invalid");const o=e instanceof Se?e:new Se(e,t);if(_e.throwOnInvalid)throw new r(o);return new yo({invalid:o})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const r=Ur(e,te.fromObject(t));return r?r.map(e=>e?e.val:null).join(""):null}static expandFormat(e,t={}){return jr(xt.parseFormat(e),te.fromObject(t)).map(e=>e.val).join("")}static resetCache(){po=void 0,ho.clear()}get(e){return this[e]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Gr(this).weekYear:NaN}get weekNumber(){return this.isValid?Gr(this).weekNumber:NaN}get weekday(){return this.isValid?Gr(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Br(this).weekday:NaN}get localWeekNumber(){return this.isValid?Br(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Br(this).weekYear:NaN}get ordinal(){return this.isValid?Ce(this.c).ordinal:NaN}get monthShort(){return this.isValid?Tr.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Tr.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Tr.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Tr.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,r=Ye(this.c),o=this.zone.offset(r-e),s=this.zone.offset(r+e),i=this.zone.offset(r-o*t),n=this.zone.offset(r-s*t);if(i===n)return[this];const a=r-i*t,l=r-n*t,c=Wr(a,i),u=Wr(l,n);return c.hour===u.hour&&c.minute===u.minute&&c.second===u.second&&c.millisecond===u.millisecond?[$r(this,{ts:a}),$r(this,{ts:l})]:[this]}get isInLeapYear(){return Ze(this.year)}get daysInMonth(){return Ke(this.year,this.month)}get daysInYear(){return this.isValid?Qe(this.year):NaN}get weeksInWeekYear(){return this.isValid?et(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?et(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:r,calendar:o}=xt.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:r,outputCalendar:o}}toUTC(e=0,t={}){return this.setZone(oe.instance(e),t)}toLocal(){return this.setZone(_e.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:r=!1}={}){if((e=ie(e,_e.defaultZone)).equals(this.zone))return this;if(e.isValid){let o=this.ts;if(t||r){const t=e.offset(this.ts),r=this.toObject();[o]=Hr(r,t,e)}return $r(this,{ts:o,zone:e})}return yo.invalid(zr(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:r}={}){return $r(this,{loc:this.loc.clone({locale:e,numberingSystem:t,outputCalendar:r})})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=it(e,ao),{minDaysInFirstWeek:r,startOfWeek:o}=Ee(t,this.loc),s=!Re(t.weekYear)||!Re(t.weekNumber)||!Re(t.weekday),n=!Re(t.ordinal),a=!Re(t.year),l=!Re(t.month)||!Re(t.day),c=a||l,u=t.weekYear||t.weekNumber;if((c||n)&&u)throw new i("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&n)throw new i("Can't mix ordinal dates with month/day");let p;s?p=ke({...Pe(this.c,r,o),...t},r,o):Re(t.ordinal)?(p={...this.toObject(),...t},Re(t.day)&&(p.day=Math.min(Ke(p.year,p.month),p.day))):p=Le({...Ce(this.c),...t});const[d,h]=Hr(p,this.o,this.zone);return $r(this,{ts:d,o:h})}plus(e){return this.isValid?$r(this,Zr(this,vr.fromDurationLike(e))):this}minus(e){return this.isValid?$r(this,Zr(this,vr.fromDurationLike(e).negate())):this}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const r={},o=vr.normalizeUnit(e);switch(o){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0}if("weeks"===o)if(t){const e=this.loc.getStartOfWeek(),{weekday:t}=this;t<e&&(r.weekNumber=this.weekNumber-1),r.weekday=e}else r.weekday=1;if("quarters"===o){const e=Math.ceil(this.month/3);r.month=3*(e-1)+1}return this.set(r)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?xt.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):Vr}toLocaleString(e=d,t={}){return this.isValid?xt.create(this.loc.clone(t),e).formatDateTime(this):Vr}toLocaleParts(e={}){return this.isValid?xt.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:r=!1,includeOffset:o=!0,extendedZone:s=!1,precision:i="milliseconds"}={}){if(!this.isValid)return null;const n="extended"===e;let a=Yr(this,n,i=no(i));return oo.indexOf(i)>=3&&(a+="T"),a+=Xr(this,n,t,r,o,s,i),a}toISODate({format:e="extended",precision:t="day"}={}){return this.isValid?Yr(this,"extended"===e,no(t)):null}toISOWeekDate(){return Kr(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:r=!0,includePrefix:o=!1,extendedZone:s=!1,format:i="extended",precision:n="milliseconds"}={}){return this.isValid?(n=no(n),(o&&oo.indexOf(n)>=3?"T":"")+Xr(this,"extended"===i,t,e,r,s,n)):null}toRFC2822(){return Kr(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Kr(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Yr(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:r=!0}={}){let o="HH:mm:ss.SSS";return(t||e)&&(r&&(o+=" "),t?o+="z":e&&(o+="ZZ")),Kr(this,o,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Vr}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",r={}){if(!this.isValid||!e.isValid)return vr.invalid("created by diffing an invalid DateTime");const o={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=(a=t,Array.isArray(a)?a:[a]).map(vr.normalizeUnit),i=e.valueOf()>this.valueOf(),n=function(e,t,r,o){let[s,i,n,a]=function(e,t,r){const o=[["years",(e,t)=>t.year-e.year],["quarters",(e,t)=>t.quarter-e.quarter+4*(t.year-e.year)],["months",(e,t)=>t.month-e.month+12*(t.year-e.year)],["weeks",(e,t)=>{const r=Mr(e,t);return(r-r%7)/7}],["days",Mr]],s={},i=e;let n,a;for(const[l,c]of o)r.indexOf(l)>=0&&(n=l,s[l]=c(e,t),a=i.plus(s),a>t?(s[l]--,(e=i.plus(s))>t&&(a=e,s[l]--,e=i.plus(s))):e=a);return[e,s,a,n]}(e,t,r);const l=t-s,c=r.filter(e=>["hours","minutes","seconds","milliseconds"].indexOf(e)>=0);0===c.length&&(n<t&&(n=s.plus({[a]:1})),n!==s&&(i[a]=(i[a]||0)+l/(n-s)));const u=vr.fromObject(i,o);return c.length>0?vr.fromMillis(l,o).shiftTo(...c).plus(u):u}(i?this:e,i?e:this,s,o);var a;return i?n.negate():n}diffNow(e="milliseconds",t={}){return this.diff(yo.now(),e,t)}until(e){return this.isValid?xr.fromDateTimes(this,e):this}hasSame(e,t,r){if(!this.isValid)return!1;const o=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(t,r)<=o&&o<=s.endOf(t,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||yo.fromObject({},{zone:this.zone}),r=e.padding?this<t?-e.padding:e.padding:0;let o=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(o=e.unit,s=void 0),co(t,this.plus(r),{...e,numeric:"always",units:o,unit:s})}toRelativeCalendar(e={}){return this.isValid?co(e.base||yo.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(yo.isDateTime))throw new a("min requires all arguments be DateTimes");return Ve(e,e=>e.valueOf(),Math.min)}static max(...e){if(!e.every(yo.isDateTime))throw new a("max requires all arguments be DateTimes");return Ve(e,e=>e.valueOf(),Math.max)}static fromFormatExplain(e,t,r={}){const{locale:o=null,numberingSystem:s=null}=r;return Dr(te.fromOpts({locale:o,numberingSystem:s,defaultToEN:!0}),e,t)}static fromStringExplain(e,t,r={}){return yo.fromFormatExplain(e,t,r)}static buildFormatParser(e,t={}){const{locale:r=null,numberingSystem:o=null}=t,s=te.fromOpts({locale:r,numberingSystem:o,defaultToEN:!0});return new Nr(s,e)}static fromFormatParser(e,t,r={}){if(Re(e)||Re(t))throw new a("fromFormatParser requires an input string and a format parser");const{locale:o=null,numberingSystem:s=null}=r,i=te.fromOpts({locale:o,numberingSystem:s,defaultToEN:!0});if(!i.equals(t.locale))throw new a(`fromFormatParser called with a locale of ${i}, but the format parser was created for ${t.locale}`);const{result:n,zone:l,specificOffset:c,invalidReason:u}=t.explainFromTokens(e);return u?yo.invalid(u):Qr(n,l,r,`format ${t.format}`,e,c)}static get DATE_SHORT(){return d}static get DATE_MED(){return h}static get DATE_MED_WITH_WEEKDAY(){return y}static get DATE_FULL(){return f}static get DATE_HUGE(){return m}static get TIME_SIMPLE(){return g}static get TIME_WITH_SECONDS(){return b}static get TIME_WITH_SHORT_OFFSET(){return _}static get TIME_WITH_LONG_OFFSET(){return S}static get TIME_24_SIMPLE(){return v}static get TIME_24_WITH_SECONDS(){return w}static get TIME_24_WITH_SHORT_OFFSET(){return x}static get TIME_24_WITH_LONG_OFFSET(){return T}static get DATETIME_SHORT(){return M}static get DATETIME_SHORT_WITH_SECONDS(){return I}static get DATETIME_MED(){return O}static get DATETIME_MED_WITH_SECONDS(){return P}static get DATETIME_MED_WITH_WEEKDAY(){return k}static get DATETIME_FULL(){return C}static get DATETIME_FULL_WITH_SECONDS(){return L}static get DATETIME_HUGE(){return E}static get DATETIME_HUGE_WITH_SECONDS(){return A}}function fo(e){if(yo.isDateTime(e))return e;if(e&&e.valueOf&&je(e.valueOf()))return yo.fromJSDate(e);if(e&&"object"==typeof e)return yo.fromObject(e);throw new a(`Unknown datetime argument: ${e}, of type ${typeof e}`)}e.DateTime=yo,e.Duration=vr,e.FixedOffsetZone=oe,e.IANAZone=V,e.Zone=F})},"esri/intl/number":function(){define(["exports","./locale"],function(e,t){"use strict";const r={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let o=new WeakMap,s={};function i(e){const i=e||s;if(!o.has(i)){const s=t.getLocaleLanguage(),n=s&&r[s]||t.normalizeLocale();o.set(i,new Intl.NumberFormat(n,e))}return o.get(i)}t.beforeLocaleChange(()=>{o=new WeakMap,s={}});const n=new Map;e.convertNumberFormatToIntlOptions=function(e={}){const t={};return null!=e.digitSeparator&&(t.useGrouping=e.digitSeparator),null!=e.places&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t},e.formatNumber=function(e,t){return Object.is(e,-0)&&(e=0),i(t).format(e)},e.getFormatter=i,e.parseNumber=function(e,r=t.getLocale()){if(!e)return null;let o=n.get(r);if(!o){const e=i().formatToParts(12345.6),t=[...i({useGrouping:!1}).format(9876543210)].reverse(),s=new Map(t.map((e,t)=>[e,t])),a=new RegExp(`[${e.find(e=>"group"===e.type)?.value}]`,"g"),l=new RegExp(`[${e.find(e=>"decimal"===e.type)?.value}]`),c=new RegExp(`[${t.join("")}]`,"g"),u=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,p=/[-\u2212\u2013\u2014\u2015]/g;o=e=>{if(""===(e=e.trim().replaceAll(a,"").replace(l,".").replace(c,e=>String(s.get(e))).replaceAll(u,"").replaceAll(p,"-")))return null;const t=Number(e);return isNaN(t)?null:t},n.set(r,o)}return o(e)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/intl/substitute":function(){define(["exports","../core/Logger","../core/object","../core/string","./date","./number"],function(e,t,r,o,s,i){"use strict";const n=()=>t.getLogger("esri.intl.substitute");function a(e){switch(typeof e){case"string":return e;case"number":return i.formatNumber(e);case"boolean":return""+e;default:return e instanceof Date?s.formatDate(e):""}}e.substitute=function(e,t,l={}){const{format:c={}}=l;return o.replace(e,e=>function(e,t,o){let l,c;const u=e.indexOf(":");if(-1===u?l=e.trim():(l=e.slice(0,u).trim(),c=e.slice(u+1).trim()),!l)return"";const p=r.getDeepValue(l,t);if(null==p)return"";const d=(c?o?.[c]:null)??o?.[l];return d?function(e,t){switch(t.type){case"date":return s.formatDate(e,t.intlOptions);case"number":return i.formatNumber(e,t.intlOptions);default:return n().warn("missing format descriptor for key {key}"),a(e)}}(p,d):c?function(e,t){switch(t.toLowerCase()){case"dateformat":return s.formatDate(e);case"numberformat":return i.formatNumber(e);default:return n().warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?s.formatDate(e):/^numberformat/i.test(t)?i.formatNumber(e):a(e)}}(p,c):a(p)}(e,t,c))},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/intl/t9n":function(){define(["exports","../request","../core/Error","./messages"],function(e,t,r,o){"use strict";async function s(e){if(null!=n.fetchBundleAsset)return n.fetchBundleAsset(e);const r=await t(e,{responseType:"text"});return JSON.parse(r.data)}class i{constructor({base:e="",pattern:t,location:r=new URL(window.location.href)}){let o;o="string"==typeof r?e=>new URL(e,new URL(r,window.location.href)).href:r instanceof URL?e=>new URL(e,r).href:r,this.pattern="string"==typeof t?new RegExp(`^${t}`):t,this.getAssetUrl=o,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,t){return async function(e,t,i,n){const a=t.exec(i);if(!a)throw new r("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const l=a[1]?`${a[1]}/`:"",c=a[2],u=o.normalizeMessageBundleLocale(n),p=`${l}${c}.json`,d=u?`${l}${c}_${u}.json`:p;let h;try{h=await s(e(d))}catch(t){if(d===p)throw new r("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:t});try{h=await s(e(p))}catch(e){throw new r("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:e})}}return h}(this.getAssetUrl,this.matcher,e,t)}}const n={};e.JSONLoader=i,e.createJSONLoader=function(e){return new i(e)},e.test=n,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/writeUtils":function(){define(["exports","../../core/Error","../../core/lang","../../core/object","../../core/accessorSupport/extensions/serializableProperty/writer","../../layers/support/layerUtils"],function(e,t,r,o,s,i){"use strict";const n=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),a=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","video","web-tile","wcs","wfs","wms","wmts"]),l=new Set([...a,"link-chart"]);function c(e,t){"maxScale"in e&&(t.maxScale=s.numberToJSON(e.maxScale)??void 0),"minScale"in e&&(t.minScale=s.numberToJSON(e.minScale)??void 0)}e.disableRestrictedWriting=function(e){n.add(e),a.add(e)},e.enableRestrictedWriting=function(e){n.delete(e),a.delete(e)},e.getLayerJSON=function(e,u,p){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return p?.messages&&p.messages.push(new t("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(i.isFeatureCollectionLayer(e)&&!e.isTable)u=e.resourceInfo;else if(function(e,t){if(t.restrictedWebMapWriting){const r=function(e){switch(e.layerContainerType){case"basemap":return n;case"operational-layers":return"link-chart"===e.origin?l:a;default:return null}}(t);return null==r||r.has(e.type)&&!i.isFeatureCollectionLayer(e)}return!0}(e,p)){const t={};return e.write(t,p)?t:null}return null!=u&&function(e,t){if(function(e,t){if(t)if(i.isFeatureCollectionLayer(e)){const r=o.getDeepValue("featureCollection.layers",t),s=r?.[0]?.layerDefinition;s&&c(e,s)}else"group"!==e.type&&c(e,t)}(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,"normal"===t.blendMode&&delete t.blendMode),t.opacity=s.numberToJSON(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&"wmts"!==e.type))if(i.isFeatureCollectionLayer(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}(e,u=r.clone(u)),u},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/layerUtils":function(){define(["exports","../../kernel","../../request","../../core/Collection","../../core/urlUtils","../catalog/catalogUtils"],function(e,t,r,o,s,i){"use strict";function n(e){return"scene"===e?.type}function a(e){return null!=e&&"object"==typeof e&&"type"in e&&"subtype-group"===e.type&&"sublayers"in e}function l(e){const t=e?.type;return"imagery-tile"===t||"tile"===t||"open-street-map"===t||"vector-tile"===t||"web-tile"===t||"wmts"===t}function c(e,t){return null!=e?.parent&&"declaredClass"in e.parent&&"esri.Basemap"===e.parent.declaredClass&&e.parent[t].includes(e)}function u(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function p(e){return!e||"Feature Service"===e.type&&!e.sourceUrl}e.applyPreferredHostToPortalItem=function(e,t){if(!t||!p(e))return;const r=(e.url,null);r&&(e.url=r)},e.getEffectiveEditingEnabled=function(e){return!!function(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)},e.getEffectiveLayerCapabilities=function(e){return u(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null},e.getLayersWithChartSupport=function(e){const t=new o;for(const r of e.allLayers.concat(e.allTables))"csv"===r.type||i.isLayerFromCatalog(r)||("charts"in r&&t.push(r),"subtype-group"===r.type&&t.push(...r.sublayers));return t},e.getOwningPortalUrl=async function(e,o){const s=t.id?.findServerInfo(e);if(null!=s?.currentVersion)return s.owningSystemUrl||null;const i=e.toLowerCase().indexOf("/rest/services");if(-1===i)return null;const n=`${e.slice(0,i)}/rest/info`,a=null!=o?o.signal:null,{data:l}=await r(n,{query:{f:"json"},responseType:"json",signal:a});return l?.owningSystemUrl||null},e.getPreferredHost=function(e){return null},e.getPreferredUrl=function(e,t){return null},e.getSubtypesFromLayer=function(e){return e?("subtypes"in e?e.subtypes:a(e.parent)?e.parent.subtypes:[])??[]:[]},e.getTileMaxtrixSetFromActiveLayer=function(e){if(e.activeLayer){const t=e.activeLayer.tileMatrixSet;if(t)return t;const r=e.activeLayer.tileMatrixSets;if(r)return r}return null},e.isBaseLayer=function(e){return c(e,"baseLayers")},e.isBasemap3DSupportedLayer=function(e){return l(e)||n(e)},e.isBasemapSupportedTiledLayer=l,e.isFeatureCollectionLayer=function(e){return"feature"===e?.type&&!e.url&&"memory"===e.source?.type},e.isFeatureLayer=function(e){return null!=e&&"object"==typeof e&&"type"in e&&"feature"===e.type},e.isFeatureServiceLayer=function(e){return"feature"===e?.type&&"feature-layer"===e.source?.type},e.isGraphicsLayer=function(e){return null!=e&&"object"==typeof e&&"type"in e&&"graphics"===e.type},e.isGroupLayer=function(e){return null!=e&&"type"in e&&"group"===e.type},e.isImageryTileLayer=function(e){return"imagery-tile"===e?.type},e.isIntegratedMeshLayer=function(e){return"integrated-mesh"===e||"integrated-mesh-3dtiles"===e},e.isIntegratedMeshOperationalLayer=function(e){return"IntegratedMeshLayer"===e||"IntegratedMesh3DTilesLayer"===e},e.isKnowledgeGraphLayer=function(e){return null!=e&&"object"==typeof e&&"type"in e&&"knowledge-graph"===e.type&&"layers"in e},e.isKnowledgeGraphSublayer=function(e){return null!=e&&"object"==typeof e&&"type"in e&&"knowledge-graph-sublayer"===e.type},e.isLayerWithFeatureCapabilities=u,e.isLayerWithFeatureLayerSource=function(e){const t=e?.type;return("feature"===t||"subtype-group"===t||"oriented-imagery"===t)&&"feature-layer"===e?.source?.type},e.isLayerWithFlowRenderer=function(e){return("imagery"===e.type||"imagery-tile"===e.type)&&"flow"===e.renderer?.type},e.isLinkChartLayer=function(e){return null!=e&&"object"==typeof e&&"type"in e&&"link-chart"===e.type&&"layers"in e},e.isMapImageLayer=function(e){return null!=e&&"object"==typeof e&&"type"in e&&"map-image"===e.type},e.isMapNotesLayer=function(e){return null!=e&&"object"==typeof e&&"type"in e&&"map-notes"===e.type&&"sublayers"in e},e.isPreferredUrlApplicable=p,e.isReferenceLayer=function(e){return c(e,"referenceLayers")},e.isSceneLayer=n,e.isSceneServiceLayer=function(e){const t=e?.type;return"building-scene"===t||"integrated-mesh"===t||"point-cloud"===t||"scene"===t},e.isSubtypeGroupLayer=a,e.isSubtypeSublayer=function(e){return"subtype-sublayer"===e?.type},e.isTable=function(e){return null!=e&&"object"==typeof e&&"isTable"in e&&!!e.isTable},e.isTiledLayer=function(e){const t=e?.type;return"base-tile"===t||"tile"===t||"elevation"===t||"imagery-tile"===t||"base-elevation"===t||"open-street-map"===t||"wcs"===t||"web-tile"===t||"wmts"===t||"vector-tile"===t},e.isVoxelLayer=function(e){return"voxel"===e?.type},e.sceneServiceLayerTypeToClassName={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"},e.serializeLayerDefinitions=function(e){const t=/[:;]/,r=[];let o=!1;if(e&&(e.forEach((e,s)=>{r.push([s,e]),!o&&t.test(e)&&(o=!0)}),r.length>0)){let e;if(o){const t={};r.forEach(e=>{t[e[0]]=e[1]}),e=JSON.stringify(t)}else{const t=[];r.forEach(e=>{t.push(e[0]+":"+e[1])}),e=t.join(";")}return e}return null},e.serializeTimeOptions=function(e){if(!e)return;const t=[];return e.forEach((e,r)=>{t.push('"'+r+'":'+JSON.stringify(e))}),t.length?"{"+t.join(",")+"}":void 0},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/catalog/catalogUtils":function(){define(["exports","../../core/handleUtils","../../core/reactiveUtils"],function(e,t,r){"use strict";const o=new WeakMap;e.getCatalogLayerForLayer=function(e){return e.parent&&"type"in e.parent&&"catalog-dynamic-group"===e.parent.type?e.parent.parent:null},e.isCatalogSublayer=function(e,t){const r=e.parent,o=e.layer;if("map-image"!==o?.type||!o.sourceJSON||!r)return!1;const s=o.sourceJSON.layers;if(!s)return!1;const i=s.find(t=>e.id===t.id),n="footprints"===t?"Feature Layer":"Catalog Dynamic Group Layer";return i?.type===n&&"Catalog Layer"===s.find(e=>e.id===r.id)?.type},e.isLayerFromCatalog=function e(s){return!s.destroyed&&(o.has(s)||s.addHandles([r.watch(()=>{const t=s.parent;return!(!t||!("type"in t))&&("catalog-dynamic-group"===t.type||e(t))},e=>o.set(s,e),r.syncAndInitial),t.makeHandle(()=>o.delete(s))]),o.get(s))},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/reactiveUtils":function(){define(["exports","./events","./handleUtils","./maybe","./promiseUtils","./accessorSupport/watch","./accessorSupport/trackingUtils"],function(e,t,r,o,s,i,n){"use strict";function a(e,t,r={}){return l(e,t,r,u)}function l(e,t,r={},s){let n=null;const a=r.once?(e,r)=>{s(e)&&(o.removeMaybe(n),t(e,r))}:(e,r)=>{s(e)&&t(e,r)};if(n=i.watchTracked(e,a,r.sync,r.equals),r.initial){const t=e();a(t,t)}return n}function c(e,t,i){if(s.isAborted(i))return Promise.reject(s.createAbortError());const n=e();if(t?.(n))return Promise.resolve(n);let a=null;function c(){a=o.removeMaybe(a)}return new Promise((o,n)=>{a=r.handlesGroup([s.onAbort(i,()=>{c(),n(s.createAbortError())}),l(e,e=>{c(),o(e)},{sync:!1,once:!0},t??u)])})}function u(e){return!0}function p(e){return!!e}e.autorun=n.autorun,e.initial={initial:!0},e.on=function(e,s,i,n={}){let l=null,c=null,u=null;function p(){l&&c&&(c.remove(),n.onListenerRemove?.(l),l=null,c=null)}function d(e){n.once&&n.once&&o.removeMaybe(u),i(e)}const h=a(e,(e,r)=>{p(),t.isEventedOrEventTarget(e)&&(l=e,c=t.on(e,s,d),n.onListenerAdd?.(e))},{sync:n.sync,initial:!0});return u=r.makeHandle(()=>{h.remove(),p()}),u},e.once=function(e,t){return c(e,null,t)},e.pausable=function(e,t,r={}){let o=!1;const s=a(e,(e,r)=>{o||t(e,r)},r);return{remove(){s.remove()},pause(){o=!0},resume(){o=!1}}},e.sync={sync:!0},e.syncAndInitial={sync:!0,initial:!0},e.watch=a,e.when=function(e,t,r={}){return l(e,t,r,p)},e.whenOnce=function(e,t){return c(e,p,t)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/Ground":function(){define(["require","./chunks/tslib.es6","./Color","./core/Collection","./core/collectionUtils","./core/compilerUtils","./core/Error","./core/JSONSupport","./core/lang","./core/Loadable","./core/loadAll","./core/Logger","./core/maybe","./core/promiseUtils","./core/accessorSupport/decorators/property","./core/accessorSupport/ensureType","./core/accessorSupport/decorators/subclass","./core/accessorSupport/decorators/writer","./ground/NavigationConstraint","./support/groundInstanceUtils","./webdoc/support/opacityUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b,_,S){"use strict";var v,w;let x=w=class extends(a.JSONSupportMixin(c.Loadable)){static{v=_.GroundSymbol}constructor(e){super(e),this[v]=!0,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new o;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"!==e.type&&"base-elevation"!==e.type&&p.getLogger(this).error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)};this.addHandles([this.layers.on("after-add",e=>t(e.item)),this.layers.on("after-remove",e=>{e.item.parent=null})])}initialize(){this.when().catch(e=>{h.isAbortError(e)||p.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)d.destroyMaybe(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}get loaded(){return super.loaded}get layers(){return this._get("layers")}set layers(e){this._set("layers",s.referenceSetter(e,this._get("layers")))}writeLayers(e,t,r,o){const s=[];e?(o={...o,layerContainerType:"ground"},e.forEach(e=>{if("write"in e){const t={};i.typeCast(e)().write(t,o)&&s.push(t)}else o?.messages&&o.messages.push(new n("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted in the ground`,{layer:e}))}),t.layers=s):t.layers=s}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return u.loadAll(this,e=>{e(this.layers)})}async queryElevation(t,r){await this.load({signal:r?.signal});const{ElevationQuery:o}=await new Promise((t,r)=>e(["./layers/support/ElevationQuery"],t,r));h.throwIfAborted(r);const s=new o,i=this.layers.filter(T).toArray();return s.queryAll(i,t,r)}async createElevationSampler(t,r){await this.load({signal:r?.signal});const{ElevationQuery:o}=await new Promise((t,r)=>e(["./layers/support/ElevationQuery"],t,r));h.throwIfAborted(r);const s=new o,i=this.layers.filter(T).toArray();return s.createSamplerAll(i,t,r)}clone(){const e={opacity:this.opacity,surfaceColor:l.clone(this.surfaceColor),navigationConstraint:l.clone(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new w({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(t,r,o){const s=r?.origin||"web-scene",i=r?.portal||null,n=r?.url||null,{populateOperationalLayers:a}=await new Promise((t,r)=>e(["./layers/support/layersCreator"],t,r));h.throwIfAborted(o);const l=[];if(t.layers&&Array.isArray(t.layers)){const e={context:{origin:s,url:n,portal:i,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};l.push(a(this.layers,t.layers,e))}await Promise.allSettled(l)}};function T(e){return"elevation"===e.type||function(e){return e&&"createElevationSampler"in e}(e)}return t.__decorate([y.property({json:{read:!1,write:{isRequired:!0}}})],x.prototype,"layers",null),t.__decorate([g.writer("layers")],x.prototype,"writeLayers",null),t.__decorate([y.property({readOnly:!0})],x.prototype,"resourceInfo",void 0),t.__decorate([y.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:f.Integer,read:{reader:S.transparencyToOpacity,source:"transparency"},write:{writer:(e,t)=>{t.transparency=S.opacityToTransparency(e)},target:"transparency"}}})],x.prototype,"opacity",void 0),t.__decorate([y.property({type:r,json:{type:[f.Integer],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],x.prototype,"surfaceColor",void 0),t.__decorate([y.property({type:b.NavigationConstraint,json:{write:!0}})],x.prototype,"navigationConstraint",void 0),x=w=t.__decorate([m.subclass("esri.Ground")],x),x})},"esri/Color":function(){define(["./colorUtils","./core/mathUtils","./core/accessorSupport/ensureType"],function(e,t,r){"use strict";function o(e){return t.clamp(r.ensureInteger(e),0,255)}function s(e,t){const r=e.toString(16).padStart(2,"0");return t?r.slice(0,1):r}class i{static blendColors(e,t,r,o=new i){return o.r=Math.round(e.r+(t.r-e.r)*r),o.g=Math.round(e.g+(t.g-e.g)*r),o.b=Math.round(e.b+(t.b-e.b)*r),o.a=e.a+(t.a-e.a)*r,o._sanitize()}static fromRgb(t,r){const o=e.cssToRgba(t);return o?i.fromArray(o,r):null}static fromHex(t,r=new i){const o=e.cssHexToRgba(t);return o?i.fromArray(o,r):null}static fromArray(e,t=new i){return t._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(t.a)&&(t.a=1),t._sanitize()}static fromString(t,r){const o=e.parseRgba(t);return o?i.fromArray(o,r):null}static fromJSON(e){return null!=e?new i([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return null!=e?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return null!=e?[e.r/255,e.g/255,e.b/255,null!=e.a?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return.299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return"string"==typeof e?i.fromString(e,this):Array.isArray(e)?i.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof i||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const t=e?.capitalize??!1,r=e?.digits??6,o=3===r||4===r,i=4===r||8===r,n=`#${s(this.r,o)}${s(this.g,o)}${s(this.b,o)}${i?s(Math.round(255*this.a),o):""}`;return t?n.toUpperCase():n}toCss(e=!1){const t=this.r+", "+this.g+", "+this.b;return e?`rgba(${t}, ${this.a})`:`rgb(${t})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=0){const t=o(this.r),r=o(this.g),s=o(this.b);return 0===e||1!==this.a?[t,r,s,o(255*this.a)]:[t,r,s]}clone(){return new i(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return null!=e&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=e.sanitizeRgbComponent(this.r),this.g=e.sanitizeRgbComponent(this.g),this.b=e.sanitizeRgbComponent(this.b),this.a=e.sanitizeAlpha(this.a),this}_set(e,t,r,o){this.r=e,this.g=t,this.b=r,this.a=o}}return i.prototype.declaredClass="esri.Color",i})},"esri/colorUtils":function(){define(["exports"],function(e){"use strict";const t={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function r(e){return!!t[e]||!!t[e.toLowerCase()]}function o(e){return t[e]??t[e.toLowerCase()]}function s(e,t,r){r<0&&++r,r>1&&--r;const o=6*r;return o<1?e+(t-e)*o:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function i(e,t,r,o=1){const i=(e%360+360)%360/360,n=r<=.5?r*(t+1):r+t-r*t,a=2*r-n;return[Math.round(255*s(a,n,i+1/3)),Math.round(255*s(a,n,i)),Math.round(255*s(a,n,i-1/3)),o]}function n(e){if(!e.startsWith("#")||isNaN(Number(`0x${e.slice(1)}`)))return null;switch(e.length){case 4:case 5:{const t=parseInt(e.slice(1,2),16),r=parseInt(e.slice(2,3),16),o=parseInt(e.slice(3,4),16),s=4===e.length?15:parseInt(e.slice(4),16);return[t+16*t,r+16*r,o+16*o,(s+16*s)/255]}case 7:case 9:return[parseInt(e.slice(1,3),16),parseInt(e.slice(3,5),16),parseInt(e.slice(5,7),16),(7===e.length?255:parseInt(e.slice(7),16))/255];default:return null}}function a(e){const t=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(t){const e=t[2].split(/\s*,\s*/),r=t[1];if("rgb"===r&&3===e.length||"rgba"===r&&4===e.length){if(e[0].endsWith("%")){const t=e.map(e=>2.56*parseFloat(e));return 4===e.length&&(t[3]=parseFloat(e[3])),l(t)}return l(e.map(e=>parseFloat(e)))}if("hsl"===r&&3===e.length||"hsla"===r&&4===e.length)return i(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100,parseFloat(e[3]??"1"))}return null}function l(e){return e[0]=p(e[0]),e[1]=p(e[1]),e[2]=p(e[2]),e[3]=4===e.length?u(e[3]):1,e}function c(e){let t=r(e)?o(e):null;return t??=a(e),t??=n(e),t}function u(e){return d(e,0,1)}function p(e){return Math.round(d(e,0,255))}function d(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}e.colorGamma=2.2,e.cssHexToRgba=n,e.cssToRgba=a,e.getNamedColor=o,e.getNamedColorCopy=function(e){return[...o(e)]},e.hexToRgba=function(e){const t=e.length>5,r=t?8:4,o=(1<<r)-1,s=t?1:17,i=t?9===e.length:5===e.length;let n=Number("0x"+e.slice(1));if(isNaN(n))return null;const a=[0,0,0,1];let l;return i&&(l=n&o,n>>=r,a[3]=s*l/255),l=n&o,n>>=r,a[2]=s*l,l=n&o,n>>=r,a[1]=s*l,l=n&o,n>>=r,a[0]=s*l,a},e.hslaToRgba=i,e.isNamedColor=r,e.parseRgba=c,e.parseToUnitRgba=function(e){const t=c(e);return null!=t?[t[0]/255,t[1]/255,t[2]/255,t[3]]:null},e.sanitizeAlpha=u,e.sanitizeRgbComponent=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/mathUtils":function(){define(["exports"],function(e){"use strict";const t=new Float32Array(1);function r(e,t,r){return Math.min(Math.max(e,t),r)}function o(e,t,r){return e+(t-e)*r}function s(e,t,r=1e-6){return e===t||!(!Number.isFinite(e)||!Number.isFinite(t))&&(e>t?e-t:t-e)<=r}const i=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function n(e){return i.setFloat64(0,e),i.getBigInt64(0)}const a=1000000n,l=c(1);function c(e){const t=n(e=Math.abs(e)),r=(o=t<=a?a:t-a,i.setBigInt64(0,o),i.getFloat64(0));var o;return Math.abs(e-r)}function u(e){return t[0]=e,t[0]}const p=u(34028234663852886e22);e.acosClamped=function(e){return Math.acos(r(e,-1,1))},e.asinClamped=function(e){return Math.asin(r(e,-1,1))},e.clamp=r,e.clampFloat32=function(e){return u(Math.max(-p,Math.min(e,p)))},e.decimalAdjust=function(e,t,r){if(void 0===r||0===+r)return Math[e](t);if(t=+t,r=+r,isNaN(t)||"number"!=typeof r||r%1!=0)return NaN;let o=t.toString().split("e");return o=(t=Math[e](+(o[0]+"e"+(o[1]?+o[1]-r:-r)))).toString().split("e"),+(o[0]+"e"+(o[1]?+o[1]+r:r))},e.deg2rad=function(e){return e*Math.PI/180},e.floatEqualAbsolute=s,e.floatEqualRelative=function(e,t,r=1e-6){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;const o=Math.abs(e-t),s=Math.abs(e),i=Math.abs(t);if(0===e||0===t||s<1e-12&&i<1e-12){if(o>.01*r)return!1}else if(o/(s+i)>r)return!1;return!0},e.floatEqualUlp=function(e,t,r=l){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(null!=r&&c(Math.min(Math.abs(e),Math.abs(t)))<r)return Math.abs(e-t)<=r;const o=n(e),s=n(t);return o<0==s<0&&!((o<s?s-o:o-s)>a)},e.floatGreaterThan=function(e,t,r=1e-6){return!s(e,t,r)&&e>t},e.floatGreaterThanOrEqual=function(e,t,r=1e-6){return s(e,t,r)||e>t},e.floatLessThan=function(e,t,r=1e-6){return!s(e,t,r)&&e<t},e.floatLessThanOrEqual=function(e,t,r=1e-6){return s(e,t,r)||e<t},e.gauss=function(e,t){const r=-e*e/(2*t);return 1/Math.sqrt(2*Math.PI*t)*Math.exp(r)},e.hasScaling=function(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],o=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(s(t,1)&&s(r,1)&&s(o,1))},e.isPowerOfTwo=function(e){return!(e&e-1)},e.lerp=o,e.moduloPositive=function(e,t){return(e%t+t)%t},e.nextHighestPowerOfTen=function(e){return 10**Math.ceil(Math.LOG10E*Math.log(e))},e.nextHighestPowerOfTwo=function(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1},e.nextPowerOfTwo=function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e},e.numberMaxFloat32=p,e.rad2deg=function(e){return 180*e/Math.PI},e.reciprocalClamped=function(e,t=1e-6){return(e<0?-1:1)/Math.max(Math.abs(e),t)},e.roundToNearest=function(e,t){return 0===t?0:Math.round(e/t)*t},e.scale=function(e,t,r,s,i){return o(s,i,(e-t)/(r-t))},e.smoothstep=function(e,t,o){const s=r((o-e)/(t-e),0,1);return s*s*(3-2*s)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/ground/NavigationConstraint":function(){define(["exports","../chunks/tslib.es6","../core/JSONSupport","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;e.NavigationConstraint=c=class extends r.JSONSupport{constructor(e){super(e),this.type="none"}clone(){return new c({type:this.type})}},t.__decorate([a.enumeration({none:"none",stayAbove:"stay-above"}),o.property({json:{write:{isRequired:!0}}})],e.NavigationConstraint.prototype,"type",void 0),e.NavigationConstraint=c=t.__decorate([l.subclass("esri.ground.NavigationConstraint")],e.NavigationConstraint),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(e,t,r){"use strict";e.enumeration=function(e,o={}){const s=e instanceof t.JSONMap?e:new t.JSONMap(e,o),{alwaysWriteDefaults:i,default:n,ignoreUnknown:a=!0,name:l,nonNullable:c,readOnly:u=!1}=o;return r.property({type:a?s.apiValues:String,json:{type:s.jsonValues,default:n,name:l,read:!u&&{reader:s.read},write:{writer:s.write,alwaysWriteDefaults:i}},nonNullable:c,readOnly:u})},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/groundInstanceUtils":function(){define(["exports"],function(e){"use strict";const t=Symbol("GroundInstance");e.GroundSymbol=t,e.isGround=function(e){return null!=e&&"object"==typeof e&&t in e},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/opacityUtils":function(){define(["exports","../../core/accessorSupport/ensureType"],function(e,t){"use strict";e.opacityToTransparency=function(e){const r=t.ensureInteger(100*(1-e));return Math.max(0,Math.min(r,100))},e.transparencyToOpacity=function(e){const t=1-e/100;return Math.max(0,Math.min(t,1))},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/CollectionFlattener":function(){define(["exports","../chunks/tslib.es6","./Collection","./reactiveUtils","./accessorSupport/decorators/property","./accessorSupport/decorators/subclass","./accessorSupport/trackingUtils"],function(e,t,r,o,s,i,n){"use strict";return e.default=class extends r{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(n.autorun(()=>this._refresh(),o.sync))}destroy(){this.getCollections=null}_refresh(){const e=null!=this.getCollections?this.getCollections():null;if(null==e)return void this.removeAll();let t=0;for(const r of e)null!=r&&(t=this._processCollection(t,r));this.splice(t)}_createNewInstance(e){return new r(e)}_processCollection(e,t){if(!t)return e;const r=this.itemFilterFunction??(e=>!!e);for(const o of t)if(o){if(r(o)){const t=this.indexOf(o,e);t>=0?t!==e&&this.reorder(o,e):this.add(o,e),++e}if(this.getChildrenFunction){const t=this.getChildrenFunction(o);if(Array.isArray(t))for(const r of t)e=this._processCollection(e,r);else e=this._processCollection(e,t)}}return e}},t.__decorate([s.property()],e.default.prototype,"getCollections",void 0),t.__decorate([s.property()],e.default.prototype,"getChildrenFunction",void 0),t.__decorate([s.property()],e.default.prototype,"itemFilterFunction",void 0),e.default=t.__decorate([i.subclass("esri.core.CollectionFlattener")],e.default),e.default})},"esri/effects/FocusAreas":function(){define(["../chunks/tslib.es6","../core/Clonable","../core/Collection","../core/JSONSupport","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/subclass","./FocusArea"],function(e,t,r,o,s,i,n,a,l,c){"use strict";let u=class extends(o.JSONSupportMixin(t.Clonable)){constructor(e){super(e),this.areas=new r,this.style="bright"}};return e.__decorate([s.property({type:r.ofType(c),nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:e=>new r(e.items.map(e=>e.clone()))})],u.prototype,"areas",void 0),e.__decorate([s.property({type:["bright","dark"],nonNullable:!0,json:{write:!0}})],u.prototype,"style",void 0),u=e.__decorate([l.subclass("esri.effects.FocusAreas")],u),u})},"esri/core/Clonable":function(){define(["exports","../chunks/tslib.es6","./Accessor","./has","./lang","./Logger","./maybe","./accessorSupport/utils","./accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";const c=e=>{const r=e;let o=class extends r{clone(e){const t=a.getProperties(this);n.assertIsSome(t,"unable to clone instance of non-accessor class");const r=t.metadata,o=t.store,i={},l=new Map;for(const t in r){const n=r[t],a=o?.originOf(t),c=n.clonable;if(n.readOnly||!1===c||7!==a&&0!==a&&5!==a&&4!==a)continue;const u=this[t];let p=null;if("function"==typeof c)p=c(u,e);else if("reference"===c)p=u;else if(p=s.tryClone(u,e),null!=u&&null==p)continue;0===a?l.set(t,p):i[t]=p}const c=new(0,Object.getPrototypeOf(this).constructor)(i);if(l.size){const e=a.getProperties(c)?.store;if(e)for(const[t,r]of l)e.set(t,r,0)}return c}};return o=t.__decorate([l.subclass("esri.core.Clonable")],o),o},u=c(r);e.Clonable=u,e.ClonableMixin=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/effects/FocusArea":function(){define(["../chunks/tslib.es6","../request","../core/Clonable","../core/JSONSupport","../core/uuid","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/persistable","./FocusAreaOutline","../layers/support/PolygonCollection","../chunks/persistableUrlUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y){"use strict";let f=class extends(o.JSONSupportMixin(r.Clonable)){constructor(e){super(e),this.id=`focusarea-${s.generateUUID()}`,this.title=null,this.enabled=!0,this.outline=null,this.geometries=new h}readGeometries(e,t,r){Array.isArray(e)?this.geometries=h.fromJSON(e,r):r.hooks?.onAfterLoad?.(()=>this._loadGeometries(y.fromJSON(e,r),r))}async _loadGeometries(e,r){const o=await t(e,{responseType:"json"});this.geometries=h.fromJSON(o.data,r)}};return e.__decorate([i.property({type:String,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),i.property()],f.prototype,"id",void 0),e.__decorate([i.property({type:String,json:{write:!0}})],f.prototype,"title",void 0),e.__decorate([i.property({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],f.prototype,"enabled",void 0),e.__decorate([i.property({type:d,json:{write:!0}})],f.prototype,"outline",void 0),e.__decorate([i.property({type:h,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:e=>new h(e.items.map(e=>e.clone()))}),p.persistable({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],f.prototype,"geometries",void 0),e.__decorate([c.reader(["web-scene","portal-item"],"geometries")],f.prototype,"readGeometries",null),f=e.__decorate([u.subclass("esri.effects.FocusArea")],f),f})},"esri/core/uuid":function(){define(["exports"],function(e){"use strict";const t="randomUUID"in crypto;function r(){if(t)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const r=t=>e[t].toString(16).padStart(4,"0");return r(0)+r(1)+"-"+r(2)+"-"+r(3)+"-"+r(4)+"-"+r(5)+r(6)+r(7)}e.generateBracedUUID=function(){return`{${r().toUpperCase()}}`},e.generateLowercaseBracedUUID=function(){return`{${r()}}`},e.generateUUID=r,e.normalizeGlobalID=function(e){const t=e.toUpperCase();return e.startsWith("{")?t:`{${t}}`},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/decorators/persistable":function(){define(["exports","../../Error","../../MD5","../../multiOriginJSONSupportUtils","../../urlUtils","../../uuid","../metadata","../PropertyOrigin","./property","../../../portal/support/resourceExtension","../../../chunks/persistableUrlUtils"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";function p(e){const{targetUrl:o,params:n,value:a,context:l,dest:p,targetPropertyName:y}=e;if(!l.portalItem)return;const f=u.prefixAndFilenameFromResourceUrl(o),m=h(a,o,l);if(n?.contentAddressed&&"json"!==m.type)return void l.messages?.push(new t("persistable:contentAddressingUnsupported",`Property "${y}" is trying to serializing a resource with content of type ${m.type} with content addressing. Content addressing is only supported for json resources.`,{content:m}));const g=n?.contentAddressed&&"json"===m.type?r.createMD5Hash(m.jsonString):f?.filename??i.generateUUID(),b=n?.prefix??f?.prefix,_=s.join(b,g),S=`${_}.${c.getResourceContentExtension(m)}`;if(n?.contentAddressed&&l.resources&&"json"===m.type){const e=l.resources.toKeep.find(({resource:e})=>e.path===S)??l.resources.toAdd.find(({resource:e})=>e.path===S);if(e)return void(p[y]=e.resource.itemRelativeUrl)}const v=l.portalItem.resourceFromPath(S);s.isBlobProtocol(o)&&l.resources&&l.resources.pendingOperations.push(s.blobUrlToBlob(o).then(e=>{v.path=`${_}.${c.getResourceContentExtension({type:"blob",blob:e})}`,p[y]=v.itemRelativeUrl}).catch(()=>{}));const w=n?.compress??!1;l.resources&&d({...e,resource:v,content:m,compress:w,updates:l.resources.toAdd}),p[y]=v.itemRelativeUrl}function d({object:e,propertyName:t,updates:r,resource:o,content:s,compress:i}){r.push({resource:o,content:s,compress:i,finish:r=>{!function(e,t,r){"string"==typeof e[t]?e[t]=r.url:e[t].url=r.url}(e,t,r)}})}function h(e,t,r){return"string"==typeof e?{type:"url",url:t}:{type:"json",jsonString:JSON.stringify(e.toJSON(r))}}e.persistable=function(e){const t=e?.origins??[void 0];return(r,i)=>{const y=function(e,t,r){if("resource"===e?.type)return function(e,t,r){const i=n.getPropertyMetadata(t,r);return{type:String,read:(e,t,r)=>{const o=u.read(e,t,r);return i.type===String?o:"function"==typeof i.type?new i.type({url:o}):void 0},write:{isRequired:i.json?.write?.isRequired,writer(t,n,l,y){if(!y?.resources)return"string"==typeof t?void(n[l]=u.toJSON(t,y)):void(n[l]=t.write({},y));const f=null==(_=t)?null:"string"==typeof _?_:_.url,m=u.toJSON(f,{...y,verifyItemRelativeUrls:y?.verifyItemRelativeUrls?{writtenUrls:y.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},1),g=i.type!==String&&(!o.isMultiOriginJSONMixin(this)||y?.origin&&this.originIdOf(r)>a.nameToId(y.origin)),b={object:this,propertyName:r,value:t,targetUrl:m,dest:n,targetPropertyName:l,context:y,params:e};var _;y?.portalItem&&m&&!s.isAbsolute(m)?g&&e?.contentAddressed?p(b):g?function(e){const{context:t,targetUrl:r,params:o,value:i,dest:n,targetPropertyName:a}=e;if(!t.portalItem)return;const l=t.portalItem.resourceFromPath(r),u=h(i,r,t),y=c.getResourceContentExtension(u),f=s.getPathExtension(l.path),m=o?.compress??!1;y===f?(t.resources&&d({...e,resource:l,content:u,compress:m,updates:t.resources.toUpdate}),n[a]=r):p(e)}(b):function({context:e,targetUrl:t,dest:r,targetPropertyName:o}){e.portalItem&&e.resources&&(e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(t),compress:!1}),r[o]=t)}(b):y?.portalItem&&(null==m||null!=u.itemIdFromResourceUrl(m)||s.isBlobProtocol(m)||g)?p(b):n[l]=m}}}}(e,t,r);switch(e?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:e,write:t}=u.persistableUrlUtils;return{read:e,write:t}}}}(e,r,i);for(const e of t){const t=l.propertyJSONMeta(r,e,i);for(const e in y)t[e]=y[e]}}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/MD5":function(){define(["exports"],function(e){"use strict";const t={Base64:0,Hex:1,String:2,Raw:3};function r(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function o(e,t,o,s,i,n){return r((a=r(r(t,e),r(s,n)))<<(l=i)|a>>>32-l,o);var a,l}function s(e,t,r,s,i,n,a){return o(t&r|~t&s,e,t,i,n,a)}function i(e,t,r,s,i,n,a){return o(t&s|r&~s,e,t,i,n,a)}function n(e,t,r,s,i,n,a){return o(t^r^s,e,t,i,n,a)}function a(e,t,r,s,i,n,a){return o(r^(t|~s),e,t,i,n,a)}e.createMD5Hash=function(e,o=t.Hex){const l=o||t.Base64,c=function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let o=1732584193,l=-271733879,c=-1732584194,u=271733878;for(let t=0;t<e.length;t+=16){const p=o,d=l,h=c,y=u;o=s(o,l,c,u,e[t],7,-680876936),u=s(u,o,l,c,e[t+1],12,-389564586),c=s(c,u,o,l,e[t+2],17,606105819),l=s(l,c,u,o,e[t+3],22,-1044525330),o=s(o,l,c,u,e[t+4],7,-176418897),u=s(u,o,l,c,e[t+5],12,1200080426),c=s(c,u,o,l,e[t+6],17,-1473231341),l=s(l,c,u,o,e[t+7],22,-45705983),o=s(o,l,c,u,e[t+8],7,1770035416),u=s(u,o,l,c,e[t+9],12,-1958414417),c=s(c,u,o,l,e[t+10],17,-42063),l=s(l,c,u,o,e[t+11],22,-1990404162),o=s(o,l,c,u,e[t+12],7,1804603682),u=s(u,o,l,c,e[t+13],12,-40341101),c=s(c,u,o,l,e[t+14],17,-1502002290),l=s(l,c,u,o,e[t+15],22,1236535329),o=i(o,l,c,u,e[t+1],5,-165796510),u=i(u,o,l,c,e[t+6],9,-1069501632),c=i(c,u,o,l,e[t+11],14,643717713),l=i(l,c,u,o,e[t],20,-373897302),o=i(o,l,c,u,e[t+5],5,-701558691),u=i(u,o,l,c,e[t+10],9,38016083),c=i(c,u,o,l,e[t+15],14,-660478335),l=i(l,c,u,o,e[t+4],20,-405537848),o=i(o,l,c,u,e[t+9],5,568446438),u=i(u,o,l,c,e[t+14],9,-1019803690),c=i(c,u,o,l,e[t+3],14,-187363961),l=i(l,c,u,o,e[t+8],20,1163531501),o=i(o,l,c,u,e[t+13],5,-1444681467),u=i(u,o,l,c,e[t+2],9,-51403784),c=i(c,u,o,l,e[t+7],14,1735328473),l=i(l,c,u,o,e[t+12],20,-1926607734),o=n(o,l,c,u,e[t+5],4,-378558),u=n(u,o,l,c,e[t+8],11,-2022574463),c=n(c,u,o,l,e[t+11],16,1839030562),l=n(l,c,u,o,e[t+14],23,-35309556),o=n(o,l,c,u,e[t+1],4,-1530992060),u=n(u,o,l,c,e[t+4],11,1272893353),c=n(c,u,o,l,e[t+7],16,-155497632),l=n(l,c,u,o,e[t+10],23,-1094730640),o=n(o,l,c,u,e[t+13],4,681279174),u=n(u,o,l,c,e[t],11,-358537222),c=n(c,u,o,l,e[t+3],16,-722521979),l=n(l,c,u,o,e[t+6],23,76029189),o=n(o,l,c,u,e[t+9],4,-640364487),u=n(u,o,l,c,e[t+12],11,-421815835),c=n(c,u,o,l,e[t+15],16,530742520),l=n(l,c,u,o,e[t+2],23,-995338651),o=a(o,l,c,u,e[t],6,-198630844),u=a(u,o,l,c,e[t+7],10,1126891415),c=a(c,u,o,l,e[t+14],15,-1416354905),l=a(l,c,u,o,e[t+5],21,-57434055),o=a(o,l,c,u,e[t+12],6,1700485571),u=a(u,o,l,c,e[t+3],10,-1894986606),c=a(c,u,o,l,e[t+10],15,-1051523),l=a(l,c,u,o,e[t+1],21,-2054922799),o=a(o,l,c,u,e[t+8],6,1873313359),u=a(u,o,l,c,e[t+15],10,-30611744),c=a(c,u,o,l,e[t+6],15,-1560198380),l=a(l,c,u,o,e[t+13],21,1309151649),o=a(o,l,c,u,e[t+4],6,-145523070),u=a(u,o,l,c,e[t+11],10,-1120210379),c=a(c,u,o,l,e[t+2],15,718787259),l=a(l,c,u,o,e[t+9],21,-343485551),o=r(o,p),l=r(l,d),c=r(c,h),u=r(u,y)}return[o,l,c,u]}(function(e){const t=[];for(let r=0,o=8*e.length;r<o;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<r%32;return t}(e),8*e.length);switch(l){case t.Raw:return c;case t.Hex:return function(e){const t="0123456789abcdef",r=[];for(let o=0,s=4*e.length;o<s;o++)r.push(t.charAt(e[o>>2]>>o%4*8+4&15)+t.charAt(e[o>>2]>>o%4*8&15));return r.join("")}(c);case t.String:return function(e){const t=[];for(let r=0,o=32*e.length;r<o;r+=8)t.push(String.fromCharCode(e[r>>5]>>>r%32&255));return t.join("")}(c);case t.Base64:return function(e){const t=[];for(let r=0,o=4*e.length;r<o;r+=3){const o=(e[r>>2]>>r%4*8&255)<<16|(e[r+1>>2]>>(r+1)%4*8&255)<<8|e[r+2>>2]>>(r+2)%4*8&255;for(let s=0;s<4;s++)8*r+6*s>32*e.length?t.push("="):t.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>6*(3-s)&63))}return t.join("")}(c)}},e.outputTypes=t,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/multiOriginJSONSupportUtils":function(){define(["exports"],function(e){"use strict";e.isMultiOriginJSONMixin=function(e){return e&&"getAtOrigin"in e&&"originOf"in e},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/portal/support/resourceExtension":function(){define(["exports","../../core/urlUtils"],function(e,t){"use strict";const r={},o="text/plain",s=r[o],i={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const e in i)r[i[e]]=e;e.getResourceContentExtension=function(e){return r[function(e){return"json"===e.type?"application/json":"blob"===e.type?e.blob.type:function(e){const r=t.getPathExtension(e);return i[r]||o}(e.url)}(e)]||s},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/effects/FocusAreaOutline":function(){define(["../chunks/tslib.es6","../Color","../core/Clonable","../core/JSONSupport","../core/accessorSupport/decorators/property","../core/accessorSupport/ensureType","../core/has","../core/RandomLCG","../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";let c=class extends(r.ClonableMixin(o.JSONSupport)){constructor(e){super(e),this.color=null}};return e.__decorate([s.property({type:t,json:{type:[i.Integer],write:!0}})],c.prototype,"color",void 0),c=e.__decorate([l.subclass("esri.effects.FocusAreaOutline")],c),c})},"esri/layers/support/PolygonCollection":function(){define(["../../chunks/tslib.es6","../../core/Collection","../../core/JSONSupport","../../core/Warning","../../core/Logger","../../core/has","../../core/RandomLCG","../../core/Error","../../core/accessorSupport/decorators/subclass","../../geometry/Polygon","../../geometry/projectionUtils"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";var p;let d=p=class extends(r.JSONSupportMixin(t.ofType(c))){constructor(e){super(e)}clone(){return new p(this.items.map(e=>e.clone()))}write(e,t){return this.toJSON(t)}toJSON(e){const t=e?.layer?.spatialReference;return t?this.toArray().map(r=>{if(!t.equals(r.spatialReference)){if(!u.canProjectWithoutEngine(r.spatialReference,t))return e?.messages?.push(new o("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:e.layer.spatialReference,context:e})),null;const s=new c;u.projectPolygon(r,s,t),r=s}const s=r.toJSON(e);return delete s.spatialReference,s}).filter(e=>null!=e):this.toArray().map(t=>t.toJSON(e))}static fromJSON(e,t){const r=new p;return e.forEach(e=>r.add(c.fromJSON(e,t))),r}};return d=p=e.__decorate([l.subclass("esri.layers.support.PolygonCollection")],d),d})},"esri/geometry/Polygon":function(){define(["exports","../chunks/tslib.es6","../core/arrayUtils","../core/deprecate","../core/lang","../core/Logger","../core/accessorSupport/decorators/property","../core/has","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","./Extent","./Geometry","./Point","./SpatialReference","./support/centroid","./support/contains","./support/coordsUtils","./support/extentUtils","./support/intersectsBase","./support/webMercatorUtils","./support/zmUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b,_,S){"use strict";var v;function w(e){return!Array.isArray(e[0])}return e.default=v=class extends p{static fromExtent(e){const t=e.clone().normalize(),{spatialReference:r}=e;let o=!1,s=!1;for(const e of t)e.hasZ&&(o=!0),e.hasM&&(s=!0);const i={rings:t.map(e=>{const t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(o&&e.hasZ){const r=e.zmin+.5*(e.zmax-e.zmin);for(let e=0;e<t.length;e++)t[e].push(r)}if(s&&e.hasM){const r=e.mmin+.5*(e.mmax-e.mmin);for(let e=0;e<t.length;e++)t[e].push(r)}return t}),spatialReference:r};return o&&(i.hasZ=!0),s&&(i.hasM=!0),new v(i)}constructor(e){super(function(e){if(!e)return;let{rings:t,hasM:r,hasZ:o,spatialReference:s}=e;var i;switch(t??=[],i=t,"number"==typeof i[0]?.[0]&&(t=[t]),t[0]?.[0]?.length){case 4:o??=!0,r??=!0;break;case 3:o??=!0!==r,r??=!o;break;default:o??=!1,r??=!1}return s??=h.WGS84,{...e,hasM:r,hasZ:o,rings:t,spatialReference:s}}(e)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){const e=y.polygonCentroid(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new d;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}writeCurveRings(e,t){t.curveRings=s.clone(e)}get extent(){const e=g.getPolygonExtent(this),{spatialReference:t}=this;return e?new u({...e,spatialReference:t}):null}get isSelfIntersecting(){return o.deprecatedProperty(i.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),b.isSelfIntersecting(this.rings)}writeRings(e,t){t.rings=s.clone(this.rings)}addRing(e){if(!e)return;const t=this.rings,r=t.length;if(w(e)){const o=[];for(let t=0,r=e.length;t<r;t++)o[t]=e[t].toArray();t[r]=o}else t[r]=e.slice();return this.notifyChange("rings"),this}clone(){const e=new v;return e.spatialReference=this.spatialReference,e.rings=s.clone(this.rings),e.curveRings=s.clone(this.curveRings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(null==e)return!1;const t=this.spatialReference,o=e.spatialReference;if(null!=t!=(null!=o))return!1;if(null!=t&&null!=o&&!t.equals(o))return!1;if(this.rings.length!==e.rings.length)return!1;const s=([e,t,r,o],[s,i,n,a])=>e===s&&t===i&&(null==r&&null==n||r===n)&&(null==o&&null==a||o===a);for(let t=0;t<this.rings.length;t++){const o=this.rings[t],i=e.rings[t];if(!r.equals(o,i,s))return!1}return!0}contains(e){if(!e)return!1;const t=_.project(e,this.spatialReference);return f.polygonContainsPoint(this,null!=t?t:e)}isClockwise(e){const t=w(e)?e.map(e=>this.hasZ?this.hasM?[e.x,e.y,e.z,e.m]:[e.x,e.y,e.z]:[e.x,e.y]):e;return m.isClockwise(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.rings[e][t],o=this.hasZ,s=this.hasM;return o&&!s?new d(r[0],r[1],r[2],void 0,this.spatialReference):s&&!o?new d(r[0],r[1],void 0,r[2],this.spatialReference):o&&s?new d(r[0],r[1],r[2],r[3],this.spatialReference):new d(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(S.updateSupportFromPoint(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new d(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],r=this.spatialReference,o=t.map(e=>new d(e,r));return this.notifyChange("rings"),o}setPoint(e,t,r){return this._validateInputs(e,t)?(S.updateSupportFromPoint(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(null==e||e<0||e>=this.rings.length)return!1;if(null!=t){const o=this.rings[e];if(r&&(t<0||t>o.length))return!1;if(!r&&(t<0||t>=o.length))return!1}return!0}toJSON(e){return this.write({},e)}},t.__decorate([n.property({readOnly:!0})],e.default.prototype,"cache",null),t.__decorate([n.property({readOnly:!0})],e.default.prototype,"centroid",null),t.__decorate([n.property({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],e.default.prototype,"curveRings",void 0),t.__decorate([c.writer("curveRings")],e.default.prototype,"writeCurveRings",null),t.__decorate([n.property({readOnly:!0})],e.default.prototype,"extent",null),t.__decorate([n.property({readOnly:!0})],e.default.prototype,"isSelfIntersecting",null),t.__decorate([n.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],e.default.prototype,"rings",void 0),t.__decorate([c.writer("rings")],e.default.prototype,"writeRings",null),e.default=v=t.__decorate([l.subclass("esri.geometry.Polygon")],e.default),e.default.prototype.toJSON.isDefaultToJSON=!0,e.default})},"esri/geometry/support/centroid":function(){define(["exports","../geometryCursorCollectUtils","./coordsUtils"],function(e,t,r){"use strict";function o(e,t){if(!e?.length)return null;const r=[],o=[],n=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let r=0,i=e.length;r<i;r++){const i=s(e[r],t,n);i&&o.push(i)}if(o.sort((e,r)=>{let o=e[2]-r[2];return 0===o&&t&&(o=e[4]-r[4]),o}),o.length&&(r[0]=o[0][0],r[1]=o[0][1],t&&(r[2]=o[0][3]),(r[0]<n[0]||r[0]>n[1]||r[1]<n[2]||r[1]>n[3]||t&&(r[2]<n[4]||r[2]>n[5]))&&(r.length=0)),!r.length){const o=e[0]&&e[0].length?i(e[0],t):null;if(!o)return null;r[0]=o[0],r[1]=o[1],t&&o.length>2&&(r[2]=o[2])}return r}function s(e,t,r){let o=0,s=0,i=0,n=0,a=0;const l=e.length?e[0][0]:0,c=e.length?e[0][1]:0,u=e.length&&t?e[0][2]:0;for(let p=0;p<e.length;p++){const d=e[p],h=e[(p+1)%e.length],[y,f,m]=d,g=y-l,b=f-c,[_,S,v]=h,w=_-l,x=S-c,T=g*x-w*b;if(n+=T,o+=(g+w)*T,s+=(b+x)*T,t&&d.length>2&&h.length>2){const e=m-u,t=v-u,r=g*t-w*e;i+=(e+t)*r,a+=r}y<r[0]&&(r[0]=y),y>r[1]&&(r[1]=y),f<r[2]&&(r[2]=f),f>r[3]&&(r[3]=f),t&&(m<r[4]&&(r[4]=m),m>r[5]&&(r[5]=m))}if(n>0&&(n*=-1),a>0&&(a*=-1),!n)return null;n*=.5,a*=.5;const p=[o/(6*n)+l,s/(6*n)+c,n];return t&&(r[4]===r[5]||0===a?(p[3]=(r[4]+r[5])/2,p[4]=0):(p[3]=i/(6*a)+u,p[4]=a)),p}function i(e,t){const o=t?[0,0,0]:[0,0],s=t?[0,0,0]:[0,0];let i=0,n=0,a=0,l=0;for(let c=0,u=e.length;c<u-1;c++){const u=e[c],p=e[c+1];if(u&&p){o[0]=u[0],o[1]=u[1],s[0]=p[0],s[1]=p[1],t&&u.length>2&&p.length>2&&(o[2]=u[2],s[2]=p[2]);const e=r.getLength(o,s);if(e){i+=e;const o=r.getMidpoint(u,p);n+=e*o[0],a+=e*o[1],t&&o.length>2&&(l+=e*o[2])}}}return i>0?t?[n/i,a/i,l/i]:[n/i,a/i]:e.length?e[0]:null}function n(e){const{hasZ:r,totalSize:o}=e;if(0===o)return null;const i=[],n=[],l=r?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const r=s(t.collectPath(e),e.hasZ,l);r&&n.push(r)}if(n.sort((e,t)=>{let o=e[2]-t[2];return 0===o&&r&&(o=e[4]-t[4]),o}),n.length&&(i[0]=n[0][0],i[1]=n[0][1],r&&(i[2]=n[0][3]),(i[0]<l[0]||i[0]>l[1]||i[1]<l[2]||i[1]>l[3]||r&&(i[2]<l[4]||i[2]>l[5]))&&(i.length=0)),!i.length){e.reset(),e.nextPath();const t=e.pathSize?a(e):null;if(!t)return null;i[0]=t[0],i[1]=t[1],r&&t.length>2&&(i[2]=t[2])}return i}function a(e){const{hasZ:t}=e,o=t?[0,0,0]:[0,0],s=t?[0,0,0]:[0,0];let i=0,n=0,a=0,l=0;if(e.nextPoint()){let c=e.x,u=e.y,p=e.z;for(;e.nextPoint();){const d=e.x,h=e.y,y=e.z;o[0]=c,o[1]=u,s[0]=d,s[1]=h,t&&(o[2]=p,s[2]=y);const f=r.getLength(o,s);if(f){i+=f;const e=r.getMidpoint(o,s);n+=f*e[0],a+=f*e[1],t&&e.length>2&&(l+=f*e[2])}c=d,u=h,p=y}}return i>0?t?[n/i,a/i,l/i]:[n/i,a/i]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const l=1/3;function c(e,t,r){if(!e||!r||r.pathSize<3)return null;r.nextPoint();const o=r.x,s=r.y;r.nextPoint();let i,n=r.x-o,a=r.y-s,c=0,u=0;for(;r.nextPoint();)c=r.x-o,u=r.y-s,i=.5*l*(c*a-u*n),e[0]+=i*(n+c),e[1]+=i*(a+u),n=c,a=u;const p=r.getCurrentRingArea(),d=[o,s];return d[0]-=t[0],d[1]-=t[1],d[0]*=p,d[1]*=p,e[0]+=d[0],e[1]+=d[1],e}e.extentCentroid=function(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null},e.lineCentroid=i,e.lineCentroidCursor=a,e.polygonCentroid=function(e){return e?o(e.rings,e.hasZ??!1):null},e.ringCentroid=s,e.ringCentroidCursorXY=function(e,t){let r=0,o=0,s=0;e.nextPoint();const i=e.pathSize?e.x:0,n=e.pathSize?e.y:0;for(let a=0;a<e.pathSize;a++){e.seekInPath(a);const l=[e.x,e.y];e.seekInPath((a+1)%e.pathSize);const c=[e.x,e.y],[u,p]=l,d=u-i,h=p-n,[y,f]=c,m=y-i,g=f-n,b=d*g-m*h;s+=b,r+=(d+m)*b,o+=(h+g)*b,u<t[0]&&(t[0]=u),u>t[1]&&(t[1]=u),p<t[2]&&(t[2]=p),p>t[3]&&(t[3]=p)}return s>0&&(s*=-1),s?(s*=.5,[r/(6*s)+i,o/(6*s)+n,s]):null},e.ringsCentroid=o,e.ringsCentroidCursor=n,e.weightedAreaCentroid=function(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<1e-6){const t=n(e);return t?[t[0],t[1]]:null}const r=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const o=[e.x,e.y];for(e.reset();e.nextPath();)c(r,o,e);return r[0]*=1/t,r[1]*=1/t,r[0]+=o[0],r[1]+=o[1],r},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryCursorCollectUtils":function(){define(["exports"],function(e){"use strict";e.collectMultipath=function(e){const t=[];for(e.reset();e.nextPath();){const r=[];for(;e.nextPoint();)r.push([e.x,e.y]);t.push(r)}return e.reset(),t},e.collectPath=function(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/coordsUtils":function(){define(["exports","../../core/arrayUtils","./spatialReferenceUtils"],function(e,t,r){"use strict";function o(e,t){const r=t[0]-e[0],o=t[1]-e[1];if(e.length>2&&t.length>2){const s=e[2]-t[2];return Math.sqrt(r*r+o*o+s*s)}return Math.sqrt(r*r+o*o)}function s(e,t,r){const o=e[0]+r*(t[0]-e[0]),s=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[o,s,e[2]+r*(t[2]-e[2])]:[o,s]}function i(e,t,r,o){const[s,i]=t,[n,a]=r,[l,c]=o,u=l-n,p=c-a,d=u*u+p*p,h=(s-n)*u+(i-a)*p,y=Math.min(1,Math.max(0,h/d));return e[0]=n+u*y,e[1]=a+p*y,e}function n(e,t,r,o,s,i){let n=r,a=o,l=s-n,c=i-a;if(0!==l||0!==c){const r=((e-n)*l+(t-a)*c)/(l*l+c*c);r>1?(n=s,a=i):r>0&&(n+=l*r,a+=c*r)}return l=e-n,c=t-a,l*l+c*c}function a(e,t=0,r=1){let o=0;const s=e.length;let i=e[0];for(let n=1;n<s;n++){const s=e[n];o+=(s[t]-i[t])*(s[r]+i[r]),i=s}if(l(e)){const s=e[0];o+=(s[t]-i[t])*(s[r]+i[r])}return o>=0}function l(e){const r=e.length;return r>0&&!t.equals(e[0],e[r-1])}function c(e){if("rings"in e)for(const t of e.rings)l(t)&&t.push(t[0].slice())}function u(e,t){const o=r.getInfo(t);if(!o)return;const s=o.valid[0],i=o.valid[1],n=i-s;for(const t of e){let e=1/0,r=-1/0;for(const o of t){const t=p(o[0],s,i);e=Math.min(e,t),r=Math.max(r,t),o[0]=t}const o=r-e;n-o<o&&t.forEach(e=>{e[0]<0&&(e[0]+=n)})}}function p(e,t,r){const o=r-t;return e<t?r-(t-e)%o:e>r?t+(e-t)%o:e}e.closeRings=c,e.closeRingsAndFixWinding=function(e){"rings"in e&&(c(e),function(e){if(!("rings"in e))return!1;if(0===e.rings.length||a(e.rings[0]))return!1;for(const t of e.rings)t.reverse()}(e))},e.distanceFromPointToPolygon=function(e,t,r){let o,s,i,a,l=!1,c=1/0;for(r.reset();r.nextPath();)if(r.nextPoint())for(o=r.x,s=r.y;r.nextPoint();)i=r.x,a=r.y,s>t!=a>t&&e<(i-o)*(t-s)/(a-s)+o&&(l=!l),c=Math.min(c,n(e,t,o,s,i,a)),o=i,s=a;return 0===c?0:(l?1:-1)*Math.sqrt(c)},e.distanceToSegmentSquared=n,e.geometryToCoordinates=function(e){if(!e)return null;if(Array.isArray(e))return e;const t=e.hasZ,r=e.hasM;if("point"===e.type)return r&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:r?[e.x,e.y,e.m]:[e.x,e.y];if("polygon"===e.type)return e.rings.slice();if("polyline"===e.type)return e.paths.slice();if("multipoint"===e.type)return e.points.slice();if("extent"===e.type){const t=e.clone().normalize();if(!t)return null;let r=!1,o=!1;return t.forEach(e=>{e.hasZ&&(r=!0),e.hasM&&(o=!0)}),t.map(e=>{const t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(r&&e.hasZ){const r=.5*(e.zmax-e.zmin);for(let e=0;e<t.length;e++)t[e].push(r)}if(o&&e.hasM){const r=.5*(e.mmax-e.mmin);for(let e=0;e<t.length;e++)t[e].push(r)}return t})}return null},e.getLength=o,e.getMidpoint=function(e,t){return s(e,t,.5)},e.getPathLength=function(e){const t=e.length;let r=0;for(let s=0;s<t-1;++s)r+=o(e[s],e[s+1]);return r},e.getPointOnPath=function(e,t){if(t<=0)return e[0];const r=e.length;let i=0;for(let n=0;n<r-1;++n){const r=o(e[n],e[n+1]);if(t-i<r){const o=(t-i)/r;return s(e[n],e[n+1],o)}i+=r}return e[r-1]},e.hasCompatibleTopology=function(e,t){if(e===t)return!0;if(e.type!==t.type)return!1;if("point"===e.type||"mesh"===e.type||"extent"===e.type)return!0;if("multipoint"===e.type)return e.points.length===t.points.length;const[r,o]="polyline"===e.type?[e.paths,t.paths]:[e.rings,t.rings];return r.length===o.length&&r.every((e,t)=>e.length===o[t].length)},e.isClockwise=a,e.projectPointOnLine=function(e,t,r,o){return i(e,t,r[o],r[o+1])},e.projectPointOnLineSeg=i,e.unnormalizeGeometryOnDatelineCrossing=function(e){return"polygon"!==e.type&&"polyline"!==e.type||u("polygon"===e.type?e.rings:e.paths,e.spatialReference),e},e.unnormalizeVerticesOnDatelineCrossing=u,e.unnormalizedCoordinate=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/extentUtils":function(){define(["exports","./boundsUtils"],function(e,t){"use strict";const r=[];function o(e,t,r,o){return{xmin:e,ymin:t,xmax:r,ymax:o}}function s(e,t,r,o,s,i){return{xmin:e,ymin:t,zmin:r,xmax:o,ymax:s,zmax:i}}function i(e,t,r,o,s,i){return{xmin:e,ymin:t,mmin:r,xmax:o,ymax:s,mmax:i}}function n(e,t,r,o,s,i,n,a){return{xmin:e,ymin:t,zmin:r,mmin:o,xmax:s,ymax:i,zmax:n,mmax:a}}function a(e,t=!1,r=!1){return t?r?n(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):s(e[0],e[1],e[2],e[3],e[4],e[5]):r?i(e[0],e[1],e[2],e[3],e[4],e[5]):o(e[0],e[1],e[2],e[3])}function l(e){const{hasZ:o,hasM:s,points:i}=e;return a(t.getPointsBounds(r,i,o??!1,s??!1),o,s)}function c(e){const{x:t,y:r,z:a,m:l}=e,c=null!=l;return null!=a?c?n(t,r,a,l,t,r,a,l):s(t,r,a,t,r,a):c?i(t,r,l,t,r,l):o(t,r,t,r)}function u(e){const{hasZ:o,hasM:s,rings:i}=e,n=t.getRingsOrPathsBounds(r,i,o??!1,s??!1);return n?a(n,o,s):null}function p(e){const{hasZ:o,hasM:s,paths:i}=e,n=t.getRingsOrPathsBounds(r,i,o??!1,s??!1);return n?a(n,o,s):null}e.getGeometryExtent=function(e){return e?void 0!==(t=e).xmin&&void 0!==t.ymin&&void 0!==t.xmax&&void 0!==t.ymax?e:function(e){return void 0!==e.x&&void 0!==e.y}(e)?c(e):function(e){return void 0!==e.rings}(e)?u(e):function(e){return void 0!==e.paths}(e)?p(e):function(e){return void 0!==e.points}(e)?l(e):null:null;var t},e.getMultipointExtent=l,e.getPointExtent=c,e.getPolygonExtent=u,e.getPolylineExtent=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/boundsUtils":function(){define(["exports","./aaBoundingRect"],function(e,t){"use strict";function r(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}function o(e){return void 0!==e.points}function s(e){return void 0!==e.x&&void 0!==e.y}function i(e){return void 0!==e.paths}function n(e){return void 0!==e.rings}function a(e){return function(t,r){return null==t?r:null==r?t:e(t,r)}}const l=a(Math.min),c=a(Math.max);function u(e){let r,o,s,i;for(r=s=1/0,o=i=-1/0;e.nextPoint();)r=Math.min(e.x,r),s=Math.min(e.y,s),o=Math.max(e.x,o),i=Math.max(e.y,i);return t.create([r,s,o,i])}function p(e,t,r,o){const s=r?3:2;if(!t.length||!t[0].length)return null;let i,n,a,u,[p,d]=t[0][0],[h,y]=t[0][0];for(let e=0;e<t.length;e++){const f=t[e];for(let e=0;e<f.length;e++){const t=f[e],[m,g]=t;if(p=l(p,m),d=l(d,g),h=c(h,m),y=c(y,g),r&&t.length>2){const e=t[2];i=l(i,e),n=c(n,e)}if(o&&t.length>s){const e=t[s];a=l(i,e),u=c(n,e)}}}return r?o?(e[0]=p,e[1]=d,e[2]=i,e[3]=a,e[4]=h,e[5]=y,e[6]=n,e[7]=u,e.length=8,e):(e[0]=p,e[1]=d,e[2]=i,e[3]=h,e[4]=y,e[5]=n,e.length=6,e):o?(e[0]=p,e[1]=d,e[2]=a,e[3]=h,e[4]=y,e[5]=u,e.length=6,e):(e[0]=p,e[1]=d,e[2]=h,e[3]=y,e.length=4,e)}function d(e,t,r,o,s,i){const n=t.xmin,a=t.xmax,l=t.ymin,c=t.ymax;let u=t.zmin,p=t.zmax,d=t.mmin,h=t.mmax;return s?(u=u||0,p=p||0,i?(d=d||0,h=h||0,e[0]=n,e[1]=l,e[2]=u,e[3]=d,e[4]=a,e[5]=c,e[6]=p,e[7]=h,e):(e[0]=n,e[1]=l,e[2]=u,e[3]=a,e[4]=c,e[5]=p,e)):i?(d=d||0,h=h||0,e[0]=n,e[1]=l,e[2]=d,e[3]=a,e[4]=c,e[5]=h,e):(e[0]=n,e[1]=l,e[2]=a,e[3]=c,e)}function h(e,t,r,o,s,i){const n=r?3:2,a=o&&i,u=r&&s;if(!t.length||!t[0].length)return null;let p,d,h,y,[f,m]=t[0],[g,b]=t[0];for(let e=0;e<t.length;e++){const r=t[e],[o,s]=r;if(f=l(f,o),m=l(m,s),g=c(g,o),b=c(b,s),u&&r.length>2){const e=r[2];p=l(p,e),d=c(d,e)}if(a&&r.length>n){const e=r[n];h=l(p,e),y=c(d,e)}}return s?(p=p||0,d=d||0,i?(h=h||0,y=y||0,e[0]=f,e[1]=m,e[2]=p,e[3]=h,e[4]=g,e[5]=b,e[6]=d,e[7]=y,e):(e[0]=f,e[1]=m,e[2]=p,e[3]=g,e[4]=b,e[5]=d,e)):i?(h=h||0,y=y||0,e[0]=f,e[1]=m,e[2]=h,e[3]=g,e[4]=b,e[5]=y,e):(e[0]=f,e[1]=m,e[2]=g,e[3]=b,e)}e.getBoundsXY=function(e,t){return i(t)?p(e,t.paths,!1,!1):n(t)?p(e,t.rings,!1,!1):o(t)?h(e,t.points,!1,!1,!1,!1):r(t)?d(e,t):(s(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)},e.getBoundsXYZ=function(e,t){return i(t)?p(e,t.paths,!0,!1):n(t)?p(e,t.rings,!0,!1):o(t)?h(e,t.points,!0,!1,!0,!1):r(t)?d(e,t,0,0,!0,!1):(s(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)},e.getCursorBoundsXY=function(e){let r,o,s,i;for(e.reset(),r=s=1/0,o=i=-1/0;e.nextPath();){const t=u(e);r=Math.min(t[0],r),s=Math.min(t[1],s),o=Math.max(t[2],o),i=Math.max(t[3],i)}return t.create([r,s,o,i])},e.getCursorPathBounds=u,e.getExtentBounds=d,e.getPointsBounds=h,e.getRingsOrPathsBounds=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../Extent"],function(e,t,r,o){"use strict";function s(e=p){return[e[0],e[1],e[2],e[3]]}function i(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function n(e){return null==e||e[0]>=e[2]?0:e[2]-e[0]}function a(e){return null==e||e[1]>=e[3]?0:e[3]-e[1]}function l(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function c(e){return null!=e&&4===e.length}const u=[1/0,1/0,-1/0,-1/0],p=[0,0,0,0];e.allFinite=function(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0},e.area=function(e){return n(e)*a(e)},e.center=function(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t},e.clone=function(e){return[e[0],e[1],e[2],e[3]]},e.contains=function(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]},e.containsPoint=function(e,t){return l(e,t[0],t[1])},e.containsPointObject=function(e,t){return l(e,t.x,t.y)},e.containsPointWithMargin=function(e,t,r){return t[0]>=e[0]-r&&t[1]>=e[1]-r&&t[0]<=e[2]+r&&t[1]<=e[3]+r},e.containsXY=l,e.containsXYWithMargin=function(e,t,r,o){return t>=e[0]-o&&r>=e[1]-o&&t<=e[2]+o&&r<=e[3]+o},e.copy=i,e.create=s,e.diagonal=function(e){const t=n(e),r=a(e);return Math.sqrt(t*t+r*r)},e.distance=function(e,t){const r=(e[0]+e[2])/2,o=(e[1]+e[3])/2,s=Math.max(Math.abs(t[0]-r)-n(e)/2,0),i=Math.max(Math.abs(t[1]-o)-a(e)/2,0);return Math.sqrt(s*s+i*i)},e.empty=function(e){return e?i(e,u):s(u)},e.equals=function(e,t){return c(e)&&c(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t},e.expand=function(e,t,r){if(null!=t)if("length"in t)c(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3])):2!==t.length&&3!==t.length||(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[0]),r[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":r[0]=Math.min(e[0],t.xmin),r[1]=Math.min(e[1],t.ymin),r[2]=Math.max(e[2],t.xmax),r[3]=Math.max(e[3],t.ymax);break;case"point":r[0]=Math.min(e[0],t.x),r[1]=Math.min(e[1],t.y),r[2]=Math.max(e[2],t.x),r[3]=Math.max(e[3],t.y)}else i(r,e)},e.expandPointInPlace=function(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])},e.expandWithNestedArray=function(e,t,r=e){const o=t.length;let s=e[0],i=e[1],n=e[2],a=e[3];for(let e=0;e<o;e++){const r=t[e];s=Math.min(s,r[0]),i=Math.min(i,r[1]),n=Math.max(n,r[0]),a=Math.max(a,r[1])}return r[0]=s,r[1]=i,r[2]=n,r[3]=a,r},e.fromExtent=function(e,t=s()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t},e.fromValues=function(e,t,r,o,i=s()){return i[0]=e,i[1]=t,i[2]=r,i[3]=o,i},e.hasArea=function(e){return n(e)>0&&a(e)>0},e.height=a,e.intersection=function(e,t,o){if(null==t)return i(o,e);const s=t[0],n=t[1],a=t[2],l=t[3];return o[0]=r.clamp(e[0],s,a),o[1]=r.clamp(e[1],n,l),o[2]=r.clamp(e[2],s,a),o[3]=r.clamp(e[3],n,l),o},e.intersects=function(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])},e.intersectsSegment=function(e,t,r){const o=e[0],s=e[1],i=e[2],n=e[3],{x:a,y:l}=t,{x:c,y:u}=r,p=(e,t)=>(u-l)*e+(a-c)*t+(c*l-a*u)<0,d=p(o,n),h=p(i,n),y=p(i,s),f=p(o,s);return!(d===h&&h===y&&y===f&&f===d||a<o&&c<o||a>i&&c>i||l>n&&u>n||l<s&&u<s)},e.intersectsSphere=function(e,t){const r=t[3],o=.5*(e[0]+e[2]),s=Math.abs(t[0]-o),i=.5*(e[2]-e[0]);if(s>r+i)return!1;const n=.5*(e[1]+e[3]),a=.5*(e[3]-e[1]),l=Math.abs(t[1]-n);if(l>r+a)return!1;if(s<i||l<a)return!0;const c=s-i,u=l-a;return c*c+u*u<=r*r},e.intersectsWithMargin=function(e,t,r){return Math.max(t[0],e[0])-r<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])-r<=Math.min(t[3],e[3])},e.is=c,e.isPoint=function(e){return!(0!==n(e)&&isFinite(e[0])||0!==a(e)&&isFinite(e[1]))},e.negativeInfinity=u,e.offset=function(e,t,r,o=e){return o[0]=e[0]+t,o[1]=e[1]+r,o[2]=e[2]+t,o[3]=e[3]+r,o},e.pad=function(e,t,r=e){return r[0]=e[0]-t,r[1]=e[1]-t,r[2]=e[2]+t,r[3]=e[3]+t,r},e.positiveInfinity=[-1/0,-1/0,1/0,1/0],e.setMax=function(e,t,r=e){return r[2]=t[0],r[3]=t[1],r!==e&&(r[0]=e[0],r[1]=e[1]),e},e.setMin=function(e,t,r=e){return r[0]=t[0],r[1]=t[1],r!==e&&(r[2]=e[2],r[3]=e[3]),r},e.size=function(e,t){t[0]=e[2]-e[0],t[1]=e[3]-e[1]},e.toExtent=function(e,t,r=new o){return r.xmin=e[0],r.ymin=e[1],r.xmax=e[2],r.ymax=e[3],r.spatialReference=t,r},e.union=function(e,t,r){return null==t?i(r,e):(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3]),r)},e.unit=[0,0,1,1],e.width=n,e.zero=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/zmUtils":function(){define(["exports"],function(e){"use strict";e.updateSupportFromPoint=function(e,t,r=!1){let{hasM:o,hasZ:s}=e;Array.isArray(t)?4!==t.length||o||s?3===t.length&&r&&!o?(s=!0,o=!1):3===t.length&&o&&s&&(o=!1,s=!1):(o=!0,s=!0):(s=!s&&t.hasZ&&(!o||t.hasM),o=!o&&t.hasM&&(!s||t.hasZ)),e.hasZ=s,e.hasM=o},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projectionUtils":function(){define(["require","exports","../core/Error","../core/promiseUtils","../core/accessorSupport/tracking","../core/accessorSupport/tracking/SimpleObservable","../core/libs/gl-matrix-2/factories/vec3f64","./asserts","./ellipsoidUtils","./Extent","./Multipoint","../chunks/pe","./Point","./Polygon","./Polyline","./SpatialReference","./projection/projectBuffer","./projection/projectors","./projection/projectXYZToVector","./support/GeographicTransformation","./support/spatialReferenceUtils","./support/zscale"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b,_,S,v){"use strict";let w=null,x=null,T=null,M={};const I=new i.SimpleObservable;function O(){return!!w&&p.isLoaded()}function P(){return!!O()||(s.trackAccess(I),k(),!1)}function k(t){return null==T&&(T=Promise.all([p.load(),new Promise((t,r)=>e(["../chunks/geometryEngineBase"],t,r)).then(e=>e.geometryEngineBase),new Promise((t,r)=>e(["./geometryAdapters/hydrated"],t,r))])),T.then(([,e,{hydratedAdapter:r}])=>{o.throwIfAborted(t),x=r,w=e.default,w._enableProjection(p.pe),I.notify()})}function C(e,t,r=null,o=null){return Array.isArray(e)?0===e.length?[]:(a.assertNotMeshes(e),L(x,e,e[0].spatialReference,t,r,o)):(a.assertNotMesh(e),L(x,[e],e.spatialReference,t,r,o)[0])}function L(e,t,r,o,s=null,i=null){if(null==r||null==o)return t;if(N(r,o,s))return t.map(e=>U(e,r,o));if(null==s&&l.isSphericalECEF(r))return t.map(e=>U(e,r,f.WGS84)).map(e=>j(e,o));if(null==s&&l.isSphericalECEF(o))return t.map(e=>j(e,f.WGS84)).map(e=>U(e,f.WGS84,o));if(null==s){const e=_.cacheKey(r,o);void 0!==M[e]?s=M[e]:(null==(s=A(r,o,void 0))&&(s=new _),M[e]=s)}if(null==w||null==e)throw new F;return null!=i?w._project(e,t,r,o,s,i):w._project(e,t,r,o,s)}function E(e,t){if(!O())for(const r of e)if(null!=r&&!S.equals(r.spatialReference,t)&&S.isValid(r.spatialReference)&&S.isValid(t)&&!N(r.spatialReference,t))return s.trackAccess(I),{pending:k(),geometries:null};return{pending:null,geometries:e.map(e=>null==e?null:S.equals(e.spatialReference,t)?e:S.isValid(e.spatialReference)&&S.isValid(t)?j(e,t):null)}}function A(e,t,r=null){if(null==e||null==t)return null;if(null==w||null==x)throw new F;const o=w._getTransformation(x,e,t,r,r?.spatialReference);return null!==o?_.fromGE(o):null}class F extends r{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}const R={get loadPromise(){return T}};function j(e,t){try{const r=C(e,t);if(null==r)return null;"xmin"in e&&"xmin"in r&&(r.zmin=e.zmin,r.zmax=e.zmax);const o=v.getGeometryZScaler(r.type,e.spatialReference,t);return null!=o&&o(r),r}catch(e){if(!(e instanceof F))throw e;return null}}function N(e,t,r){return!r&&(!!S.equals(e,t)||S.isValid(e)&&S.isValid(t)&&!!g.getProjector(e,t))}async function D(e,t,r,s){if(O())return o.waitTick(s);if(Array.isArray(e)){for(const{source:t,dest:r,geographicTransformation:o}of e)if(t&&r&&!N(t,r,o))return k(s)}else if(e&&t&&!N(e,t,r))return k(s);return o.waitTick(s)}function U(e,t,r){return e?"x"in e?V(e,t,new d,r,0):"xmin"in e?B(e,t,new c,r,0):"rings"in e?G(e,t,new h,r,0):"paths"in e?z(e,t,new y,r,0):"points"in e?q(e,t,new u,r,0):null:null}function V(e,t,r,o,s){J[0]=e.x,J[1]=e.y;const i=e.z;return J[2]=void 0!==i?i:s,m.projectBuffer(J,t,0,J,o,0)?(r.x=J[0],r.y=J[1],r.spatialReference=o,void 0!==i||l.isSphericalPCPF(o)?(r.z=J[2],r.hasZ=!0):(r.z=void 0,r.hasZ=!1),void 0===e.m?(r.m=void 0,r.hasM=!1):(r.m=e.m,r.hasM=!0),r):null}function q(e,t,r,o,s){const{points:i,hasZ:n,hasM:a}=e,c=[],u=i.length,p=[];for(const e of i)p.push(e[0],e[1],n?e[2]:s);if(!m.projectBuffer(p,t,0,p,o,0,u))return null;const d=n||l.isSphericalPCPF(o);for(let e=0;e<u;++e){const t=3*e,r=p[t],o=p[t+1];d&&a?c.push([r,o,p[t+2],i[e][3]]):d?c.push([r,o,p[t+2]]):a?c.push([r,o,i[e][2]]):c.push([r,o])}return r.points=c,r.spatialReference=o,r.hasZ=n,r.hasM=a,r}function z(e,t,r,o,s){const{paths:i,hasZ:n,hasM:a}=e,c=[];if(!$(i,n??!1,a??!1,t,c,o,s))return null;const u=n||l.isSphericalPCPF(o);return r.paths=c,r.spatialReference=o,r.hasZ=u,r.hasM=a,r}function G(e,t,r,o,s){const{rings:i,hasZ:n,hasM:a}=e,c=[];if(!$(i,n??!1,a??!1,t,c,o,s))return null;const u=n||l.isSphericalPCPF(o);return r.rings=c,r.spatialReference=o,r.hasZ=u,r.hasM=a,r}function B(e,t,r,o,s){const{xmin:i,ymin:n,xmax:a,ymax:c,hasZ:u,hasM:p}=e,d=u?e.zmin:s;if(!b.projectXYZToVector(i,n,d,t,J,o))return null;const h=u||l.isSphericalPCPF(o);r.xmin=J[0],r.ymin=J[1],h&&(r.zmin=J[2]);const y=u?e.zmax:s;return b.projectXYZToVector(a,c,y,t,J,o)?(r.xmax=J[0],r.ymax=J[1],h&&(r.zmax=J[2]),p&&(r.mmin=e.mmin,r.mmax=e.mmax),r.spatialReference=o,r):null}function $(e,t,r,o,s,i,n=0){const a=new Array;for(const r of e)for(const e of r)a.push(e[0],e[1],t?e[2]:n);if(!m.projectBuffer(a,o,0,a,i,0))return!1;let c=0;s.length=0;const u=t||l.isSphericalPCPF(i);for(const t of e){const e=new Array;for(const o of t)u&&r?e.push([a[c++],a[c++],a[c++],o[3]]):u?e.push([a[c++],a[c++],a[c++]]):r?(e.push([a[c++],a[c++],o[2]]),c++):(e.push([a[c++],a[c++]]),c++);s.push(e)}return!0}const J=n.create();t.canProjectWithoutEngine=N,t.getTransformation=A,t.getTransformations=function(e,t,r=null){if(null==w||null==x)throw new F;const o=w._getTransformationBySuitability(x,e,t,r,r?.spatialReference);if(null!==o){const e=[];for(const t of o)e.push(_.fromGE(t));return e}return[]},t.initializeProjection=D,t.isEqualBaseGCS=function(e,t){if(S.equals(e,t))return!0;if(!S.isValid(e)||!S.isValid(t))return!1;const r=S.isWGS84(e)||S.isWebMercator(e)||S.isCGCS2000(e),o=S.isWGS84(t)||S.isWebMercator(t)||S.isCGCS2000(t);return r&&o},t.isLoaded=O,t.isLoadedOrLoad=P,t.isLoadedOrLoadFor=function(e,t){return!e||!t||N(e,t)||P()},t.load=k,t.project=C,t.projectExtent=function(e,t,r=t.spatialReference,o=0){return null!=e.spatialReference&&null!=r&&null!=B(e,e.spatialReference,t,r,o)},t.projectMany=L,t.projectMultipoint=function(e,t,r=t.spatialReference,o=0){return null!=e.spatialReference&&null!=r&&null!=q(e,e.spatialReference,t,r,o)},t.projectOrLoad=function(e,t){const r=E([e],t);return null!=r.pending?{pending:r.pending,geometry:null}:null!=r.geometries?{pending:null,geometry:r.geometries[0]}:{pending:null,geometry:null}},t.projectOrLoadMany=E,t.projectPoint=function(e,t,r=t.spatialReference,o=0){return null!=r&&null!=e.spatialReference&&null!=V(e,e.spatialReference,t,r,o)},t.projectPolygon=function(e,t,r=t.spatialReference,o=0){return null!=e.spatialReference&&null!=r&&null!=G(e,e.spatialReference,t,r,o)},t.projectPolyline=function(e,t,r=t.spatialReference,o=0){return null!=e.spatialReference&&null!=r&&null!=z(e,e.spatialReference,t,r,o)},t.projectWithZConversion=async function(e,t,r){const o=e.spatialReference;return null!=o&&null!=t&&await D(o,t,null,r),j(e,t)},t.projectWithoutEngine=U,t.requiresLoad=function(e,t){return!N(e,t)&&!O()},t.test=R,t.tryProjectWithZConversion=j,t.unload=function(){w=null,x=null,T=null,M={}},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/vec3f64":function(){define(["exports"],function(e){"use strict";function t(){return[0,0,0]}function r(e){return[e[0],e[1],e[2]]}function o(e,t,r){return[e,t,r]}function s(e,t,r){return[e,t,r]}function i(e,t=[0,0,0]){const r=Math.min(3,e.length);for(let o=0;o<r;++o)t[o]=e[o];return t}function n(){return[0,0,0]}function a(){return o(1,1,1)}function l(){return o(1,0,0)}function c(){return o(0,1,0)}function u(){return o(0,0,1)}const p=[0,0,0],d=a(),h=l(),y=c(),f=u(),m=Object.freeze(Object.defineProperty({__proto__:null,ONES:d,UNIT_X:h,UNIT_Y:y,UNIT_Z:f,ZEROS:p,clone:r,create:t,freeze:s,fromArray:i,fromValues:o,ones:a,unitX:l,unitY:c,unitZ:u,zeros:n},Symbol.toStringTag,{value:"Module"}));e.ONES=d,e.UNIT_X=h,e.UNIT_Y=y,e.UNIT_Z=f,e.ZEROS=p,e.clone=r,e.create=t,e.freeze=s,e.fromArray=i,e.fromValues=o,e.ones=a,e.unitX=l,e.unitY=c,e.unitZ=u,e.vec3f64=m,e.zeros=n,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/Multipoint":function(){define(["exports","../chunks/tslib.es6","../core/lang","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","./Extent","./Geometry","./Point","./support/zmUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p){"use strict";var d;function h(e){return(t,r)=>null==t?r:null==r?t:e(t,r)}return e.default=d=class extends c{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return{};const r={};var o;Array.isArray(e)?(r.points=e,r.spatialReference=t):!(o=e)||"esri.geometry.SpatialReference"!==o.declaredClass&&null==o.wkid?(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM)):r.spatialReference=e;const s=r.points?.[0];return s&&(void 0===r.hasZ&&void 0===r.hasM?(r.hasZ=s.length>2,r.hasM=!1):void 0===r.hasZ?r.hasZ=s.length>3:void 0===r.hasM&&(r.hasM=s.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new l,r=this.hasZ,o=this.hasM,s=r?3:2,i=e[0],n=h(Math.min),a=h(Math.max);let c,u,p,d,[y,f]=i,[m,g]=i;for(let t=0,i=e.length;t<i;t++){const i=e[t],[l,h]=i;if(y=n(y,l),f=n(f,h),m=a(m,l),g=a(g,h),r&&i.length>2){const e=i[2];c=n(c,e),p=a(p,e)}if(o&&i.length>s){const e=i[s];u=n(u,e),d=a(d,e)}}return t.xmin=y,t.ymin=f,t.xmax=m,t.ymax=g,t.spatialReference=this.spatialReference,r?(t.zmin=c,t.zmax=p):(t.zmin=void 0,t.zmax=void 0),o?(t.mmin=u,t.mmax=d):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=r.clone(this.points)}addPoint(e){return p.updateSupportFromPoint(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:r.clone(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new d(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference};let o=2;return this.hasZ&&(r.z=t[2],o=3),this.hasM&&(r.m=t[o]),new u(r)}removePoint(e){if(!this._validateInputs(e))return null;const t=new u(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(p.updateSupportFromPoint(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return null!=e&&e>=0&&e<this.points.length}},t.__decorate([o.property({readOnly:!0})],e.default.prototype,"cache",null),t.__decorate([o.property()],e.default.prototype,"extent",null),t.__decorate([o.property({type:[[Number]],json:{write:{isRequired:!0}}})],e.default.prototype,"points",void 0),t.__decorate([a.writer("points")],e.default.prototype,"writePoints",null),e.default=d=t.__decorate([n.subclass("esri.geometry.Multipoint")],e.default),e.default.prototype.toJSON.isDefaultToJSON=!0,e.default})},"esri/geometry/Polyline":function(){define(["exports","../chunks/tslib.es6","../core/lang","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","./Extent","./Geometry","./Point","./SpatialReference","./support/extentUtils","./support/zmUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h){"use strict";var y;return e.default=y=class extends c{constructor(e){super(function(e){if(!e)return;let{paths:t,hasM:r,hasZ:o,spatialReference:s}=e;var i;switch(t??=[],i=t,"number"==typeof i[0]?.[0]&&(t=[t]),t[0]?.[0]?.length){case 4:o??=!0,r??=!0;break;case 3:o??=!0!==r,r??=!o;break;default:o??=!1,r??=!1}return s??=p.WGS84,{...e,hasM:r,hasZ:o,paths:t,spatialReference:s}}(e)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(e,t){t.curvePaths=r.clone(e)}get extent(){const e=d.getPolylineExtent(this),{spatialReference:t}=this;return e?new l({...e,spatialReference:t}):null}writePaths(e,t){t.paths=r.clone(this.paths)}addPath(e){if(!e)return;const t=this.paths,r=t.length;if(function(e){return!Array.isArray(e[0])}(e)){const o=[];for(let t=0,r=e.length;t<r;t++)o[t]=e[t].toArray();t[r]=o}else t[r]=e.slice();return this.notifyChange("paths"),this}clone(){const e=new y;return e.spatialReference=this.spatialReference,e.paths=r.clone(this.paths),e.curvePaths=r.clone(this.curvePaths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.paths[e][t],o=this.hasZ,s=this.hasM;return o&&!s?new u(r[0],r[1],r[2],void 0,this.spatialReference):s&&!o?new u(r[0],r[1],void 0,r[2],this.spatialReference):o&&s?new u(r[0],r[1],r[2],r[3],this.spatialReference):new u(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(h.updateSupportFromPoint(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],r=this.spatialReference,o=t.map(e=>new u(e,r));return this.notifyChange("paths"),o}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new u(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(h.updateSupportFromPoint(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(null==e||e<0||e>=this.paths.length)return!1;if(null!=t){const o=this.paths[e];if(r&&(t<0||t>o.length))return!1;if(!r&&(t<0||t>=o.length))return!1}return!0}toJSON(e){return this.write({},e)}},t.__decorate([o.property({readOnly:!0})],e.default.prototype,"cache",null),t.__decorate([o.property({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],e.default.prototype,"curvePaths",void 0),t.__decorate([a.writer("curvePaths")],e.default.prototype,"writeCurvePaths",null),t.__decorate([o.property({readOnly:!0})],e.default.prototype,"extent",null),t.__decorate([o.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],e.default.prototype,"paths",void 0),t.__decorate([a.writer("paths")],e.default.prototype,"writePaths",null),e.default=y=t.__decorate([n.subclass("esri.geometry.Polyline")],e.default),e.default.prototype.toJSON.isDefaultToJSON=!0,e.default})},"esri/geometry/projection/projectBuffer":function(){define(["exports","./projectors"],function(e,t){"use strict";e.projectBuffer=function(e,r,o,s,i,n,a=Math.floor(e.length/3)){const l=t.getProjector(r,i);if(null==l)return!1;if(l===t.copy3){if(e===s&&o===n)return!0;const t=o+3*a;for(let r=o,i=n;r<t;r++,i++)s[i]=e[r];return!0}const c=o+3*a;for(let t=o,r=n;t<c;t+=3,r+=3)l(e,t,s,r);return!0},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection/projectors":function(){define(["exports","../../core/mathUtils","../../core/unitUtils","../ellipsoidUtils","../support/Ellipsoid","../support/geodesicConstants","../support/spatialReferenceUtils"],function(e,t,r,o,s,i,n){"use strict";const a={2:{5:p,7:null,9:null,10:p,1:x,6:null,8:null,0:null,3:m,11:g,2:p,4:C},5:{5:p,7:null,9:null,10:p,1:x,6:null,8:null,0:null,3:m,11:g,2:p,4:C},7:{5:null,7:p,9:null,10:p,1:null,6:w,8:null,0:null,3:null,11:null,2:null,4:null},9:{5:null,7:null,9:p,10:p,1:null,6:null,8:v,0:null,3:null,11:null,2:null,4:null},3:{5:d,7:null,9:null,10:d,1:h,6:null,8:null,0:null,3:p,11:_,2:d,4:y},4:{5:L,7:null,9:null,10:L,1:E,6:null,8:null,0:null,3:A,11:function(e,t,r,o){L(e,t,r,o),g(r,o,r,o)},2:L,4:p},1:{5:O,7:null,9:null,10:O,1:p,6:null,8:null,0:null,3:P,11:function(e,t,r,o){O(e,t,r,o),g(r,o,r,o)},2:O,4:k},6:{5:null,7:I,9:null,10:I,1:null,6:p,8:null,0:null,3:null,11:null,2:null,4:null},8:{5:null,7:null,9:M,10:M,1:null,6:null,8:p,0:null,3:null,11:null,2:null,4:null},0:{5:null,7:null,9:null,10:null,1:null,6:null,8:null,0:p,3:null,11:null,2:null,4:null},10:{5:p,7:p,9:p,10:p,1:x,6:w,8:v,0:null,3:m,11:g,2:p,4:C},11:{5:b,7:null,9:null,10:b,1:function(e,t,r,o){b(e,t,r,o),x(r,o,r,o)},6:null,8:null,0:null,3:function(e,t,r,o){b(e,t,r,o),m(r,o,r,o)},11:p,2:b,4:function(e,t,r,o){b(e,t,r,o),C(r,o,r,o)}}};function l(e,t){return c(e,t)?.projector}function c(e,t){if(null==e||null==t)return null;if(F.source.spatialReference===e&&F.dest.spatialReference===t)return F;const r=u(e,F.source),o=u(t,F.dest);return 0===r&&0===o?n.equals(e,t)?F.projector=p:F.projector=null:F.projector=a[r][o],F}function u(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=r.getMetersPerUnitForSR(e,1)),o.isSphericalECEF(e)?t.spatialReferenceId=1:n.isWGS84(e)?t.spatialReferenceId=2:n.isWebMercator(e)?t.spatialReferenceId=3:n.isPlateCarree(e)?t.spatialReferenceId=11:e.wkt===o.WGS84ECEFSpatialReferenceLike.wkt?t.spatialReferenceId=4:4490===e.wkid?t.spatialReferenceId=5:e.wkt===o.SphericalPCPFMarsLike.wkt?t.spatialReferenceId=6:e.wkt===o.SphericalPCPFMoonLike.wkt?t.spatialReferenceId=8:n.isMars(e)?t.spatialReferenceId=7:n.isMoon(e)?t.spatialReferenceId=9:t.spatialReferenceId=0):0}function p(e,t,r,o){e!==r&&(r[o++]=e[t++],r[o++]=e[t++],r[o]=e[t])}function d(e,t,r,o){r[o]=j*(e[t]/D),r[o+1]=j*(N-2*Math.atan(Math.exp(-e[t+1]/D))),r[o+2]=e[t+2]}function h(e,t,r,o){const s=e[t]/D,i=N-2*Math.atan(Math.exp(-e[t+1]/D)),n=D+e[t+2],a=Math.cos(i)*n;r[o]=Math.cos(s)*a,r[o+1]=Math.sin(s)*a,r[o+2]=Math.sin(i)*n}function y(e,t,r,o){d(e,t,r,o),C(r,o,r,o)}function f(e,r,o,s,i){const n=.4999999*Math.PI,a=t.clamp(R*e[r+1],-n,n),l=Math.sin(a);o[s++]=R*e[r]*i.radius,o[s++]=i.halfSemiMajorAxis*Math.log((1+l)/(1-l)),o[s]=e[r+2]}function m(e,t,r,o){f(e,t,r,o,s.earth)}function g(e,t,r,o){r[o]=e[t]*U,r[o+1]=e[t+1]*U,r[o+2]=e[t+2]}function b(e,t,r,o){r[o]=e[t]*V,r[o+1]=e[t+1]*V,r[o+2]=e[t+2]}function _(e,t,r,o){d(e,t,r,o),g(r,o,r,o)}function S(e,t,r,o,s){const i=s+e[t+2],n=R*e[t+1],a=R*e[t],l=Math.cos(n)*i;r[o]=Math.cos(a)*l,r[o+1]=Math.sin(a)*l,r[o+2]=Math.sin(n)*i}function v(e,t,r,o){S(e,t,r,o,s.moon.radius)}function w(e,t,r,o){S(e,t,r,o,s.mars.radius)}function x(e,t,r,o){S(e,t,r,o,s.earth.radius)}function T(e,r,o,s,i){const n=e[r],a=e[r+1],l=e[r+2],c=Math.sqrt(n*n+a*a+l*l),u=t.asinClamped(l/(0===c?1:c)),p=Math.atan2(a,n);o[s++]=j*p,o[s++]=j*u,o[s]=c-i}function M(e,t,r,o){T(e,t,r,o,s.moon.radius)}function I(e,t,r,o){T(e,t,r,o,s.mars.radius)}function O(e,t,r,o){T(e,t,r,o,s.earth.radius)}function P(e,t,r,o){O(e,t,r,o),m(r,o,r,o)}function k(e,t,r,o){O(e,t,r,o),C(r,o,r,o)}function C(e,t,r,o){!function(e,t,r,o,s){const i=R*e[t],n=R*e[t+1],a=e[t+2],l=Math.sin(n),c=Math.cos(n),u=s.radius/Math.sqrt(1-s.eccentricitySquared*l*l);r[o++]=(u+a)*c*Math.cos(i),r[o++]=(u+a)*c*Math.sin(i),r[o++]=(u*(1-s.eccentricitySquared)+a)*l}(e,t,r,o,s.earth)}function L(e,t,r,o){const n=i.earthEllipsoidConstants,a=e[t],l=e[t+1],c=e[t+2];let u,p,d,h,y,f,m,g,b,_,S,v,w,x,T,M,I,O,P,k,C;u=Math.abs(c),p=a*a+l*l,d=Math.sqrt(p),h=p+c*c,y=Math.sqrt(h),k=Math.atan2(l,a),f=c*c/h,m=p/h,x=n.a2/y,T=n.a3-n.a4/y,m>.3?(g=u/y*(1+m*(n.a1+x+f*T)/y),P=Math.asin(g),_=g*g,b=Math.sqrt(1-_)):(b=d/y*(1-f*(n.a5-x-m*T)/y),P=Math.acos(b),_=1-b*b,g=Math.sqrt(_)),S=1-s.earth.eccentricitySquared*_,v=s.earth.radius/Math.sqrt(S),w=n.a6*v,x=d-v*b,T=u-w*g,I=b*x+g*T,M=b*T-g*x,O=M/(w/S+I),P+=O,C=I+M*O/2,c<0&&(P=-P),r[o++]=j*k,r[o++]=j*P,r[o]=C}function E(e,t,r,o){L(e,t,r,o),x(r,o,r,o)}function A(e,t,r,o){L(e,t,r,o),m(r,o,r,o)}const F={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:p},R=t.deg2rad(1),j=t.rad2deg(1),N=.5*Math.PI,D=s.earth.radius,U=D*Math.PI/180,V=180/(D*Math.PI);e.copy3=p,e.getProjector=l,e.getProjectorClassification=c,e.getProjectorName=function(e,t){switch(l(e,t)){case p:return"copy3";case x:return"wgs84ToSphericalECEF";case m:return"wgs84ToWebMercator";case g:return"wgs84ToPlateCarree";case C:return"wgs84ToWGS84ECEF";case d:return"webMercatorToWGS84";case h:return"webMercatorToSphericalECEF";case y:return"webMercatorToWGS84ECEF";case _:return"webMercatorToPlateCarree";case L:return"wgs84ECEFToWGS84";case E:return"wgs84ECEFToSphericalECEF";case A:return"wgs84ECEFToWebMercator";case O:return"sphericalECEFToWGS84";case P:return"sphericalECEFToWebMercator";case I:return"sphericalMarsPCPFToMars2000";case M:return"sphericalMoonPCPFToMoon2000";case k:return"sphericalECEFToWGS84ECEF";case w:return"mars2000ToSphericalPCPF";case v:return"moon2000ToSphericalPCPF";default:return null}},e.invPlateCarreeScale=V,e.lonLatToWebMercatorComparable=f,e.projectionTable=a,e.sphericalPCPFtoLonLatElevation=T,e.wgs84ToWebMercator=m,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(e,t){"use strict";const r=Math.PI/180,o=t.earth.radius,s=t.earth.eccentricitySquared,i={a1:o*s,a2:o*s*o*s,a3:o*s*s/2,a4:o*s*o*s*2.5,a5:o*s+o*s*s/2,a6:1-s},n={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:t.earth.radius,f:t.earth.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:t.moon.radius,f:t.moon.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:t.mars.radius,f:t.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:t.mars.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};e.earthEllipsoidConstants=i,e.spheroids=n,e.toRadians=r,e.wktSpheroidRegex=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection/projectXYZToVector":function(){define(["exports","../../core/libs/gl-matrix-2/factories/vec3f64","./projectBuffer"],function(e,t,r){"use strict";const o=t.create();e.projectXYZToVector=function(e,t,s,i,n,a){return o[0]=e,o[1]=t,o[2]=s,r.projectBuffer(o,i,0,n,a,0)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(e){"use strict";class t{static cacheKey(e,t){return[e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??"",t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??""].join()}static fromGE(r){const o=new t;let s="";for(const t of r.steps){const r=e.fromGE(t);o.steps.push(r),s+=r.uid.toString()+","}return o._cachedProjection={},o._gtlistentry=null,o._chain=s,o}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t?.steps)for(const r of t.steps)r instanceof e?this.steps.push(r):this.steps.push(new e({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}getInverse(){const e=new t;e.steps=[];for(let t=this.steps.length-1;t>=0;t--){const r=this.steps[t];e.steps.push(r.getInverse())}return e}getGTListEntry(){let e="";for(const t of this.steps)e+=t.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,r,o){this._cachedProjection[t.cacheKey(e,r)]=o}getCachedGeTransformation(e,r){let o="";for(const e of this.steps)o+=e.uid.toString()+",";o!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=o);const s=this._cachedProjection[t.cacheKey(e,r)];return void 0===s?null:s}}return t})},"esri/geometry/support/GeographicTransformationStep":function(){define(function(){"use strict";let e=0;class t{static fromGE(e){const r=new t;return r._wkt=e.wkt,r._wkid=e.wkid,r._isInverse=e.isInverse,r}constructor(t){this.uid=e++,t?(this._wkt=null!=t.wkt?t.wkt:null,this._wkid=null!=t.wkid?t.wkid:-1,this._isInverse=null!=t.isInverse&&!0===t.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=e++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=e++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=e++}getInverse(){const e=new t;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}}return t})},"esri/geometry/support/zscale":function(){define(["exports","../../core/unitUtils","../ellipsoidUtils","./spatialReferenceUtils"],function(e,t,r,o){"use strict";e.getGeometryZScaler=function(e,s,i){if(null==s||null==i||i.vcsWkid||o.equals(s,i)||r.isSphericalPCPF(s)||r.isSphericalPCPF(i))return null;const n=t.getMetersPerVerticalUnitForSR(s)/t.getMetersPerVerticalUnitForSR(i);if(1===n)return null;switch(e){case"point":case"esriGeometryPoint":return e=>{return t=e,r=n,void(null!=t?.z&&(t.z*=r));var t,r};case"polyline":case"esriGeometryPolyline":return e=>function(e,t){if(e)for(const r of e.paths)for(const e of r)e.length>2&&(e[2]*=t)}(e,n);case"polygon":case"esriGeometryPolygon":return e=>function(e,t){if(e)for(const r of e.rings)for(const e of r)e.length>2&&(e[2]*=t)}(e,n);case"multipoint":case"esriGeometryMultipoint":return e=>function(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}(e,n);case"extent":case"esriGeometryEnvelope":return e=>{return r=n,void((t=e)&&null!=t.zmin&&null!=t.zmax&&(t.zmin*=r,t.zmax*=r));var t,r};default:return null}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/editableLayers":function(){define(["exports","../catalog/catalogUtils","./layerUtils"],function(e,t,r){"use strict";e.isEditableLayer=function(e){return!(!function(e){return"object"==typeof e&&null!=e&&"loaded"in e&&!0===e.loaded&&"type"in e}(e)||!r.getEffectiveLayerCapabilities(e)?.operations?.supportsEditing||"editingEnabled"in e&&!r.getEffectiveEditingEnabled(e)||t.isLayerFromCatalog(e))},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/basemapEnsureType":function(){define(["exports","../Basemap","../core/Collection","../core/Logger","../core/maybe","../core/accessorSupport/ensureType","./apiKeyUtils","./basemapDefinitions","./basemapUtils"],function(e,t,r,o,s,i,n,a,l){"use strict";const c=()=>o.getLogger("esri.support.basemapUtils");function u(e,r){let o;if("string"==typeof e){const s=e in a.esriBasemapDefinitions,i=!s&&e.includes("/");if(!s&&!i){if(n.hasBasemapStylesApiKey())c().warn(`Unable to find basemap definition for: ${e}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const t=Object.entries(a.esriBasemapDefinitions).filter(([e,t])=>t.classic||t.is3d).map(([e])=>`"${e}"`).sort().join(", ");c().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${t}`)}return null}r&&(o=r[e]),o||(o=s?t.fromId(e):new t({style:{id:e}}),r&&(r[e]=o))}else o=i.ensureType(t,e);return o?.destroyed&&(c().warn("The provided basemap is already destroyed",{basemap:o}),o=null),o}function p(e,t){const o=new r;return e.forEach(e=>{const r=t.find(t=>"scene"!==t.type&&l.layerDefinitionEquals(l.layerToDefinition(e),l.layerToDefinition(t)))||e;o.includes(r)?o.push(e):o.push(r)}),o}e.basemapEnsureType=u,e.clonePreservingTiledLayers=function(e,t=null){const r=u(e);if(!r)return null;const o=r.clone();return t&&(o.baseLayers=p(o.baseLayers,t.baseLayers),o.referenceLayers=p(o.referenceLayers,t.referenceLayers)),o},e.createCache=function(){return{}},e.destroyCache=function(e){for(const t in e){const r=e[t];s.destroyMaybe(r),delete e[t]}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/basemapUtils":function(){define(["exports","../core/Collection","../core/maybe","../core/urlUtils","../layers/effects/utils","./basemapDefinitions"],function(e,t,r,o,s,i){"use strict";let n;function a(e){if(n)return n(e);let t=null;const r=p(e),o=!r?.baseLayers.length;for(const e in i.esriBasemapDefinitions){const s=g(r,f(i.esriBasemapDefinitions[e]),{mustMatchReferences:o});if("equal"===s){t=e;break}"base-layers-equal"===s&&(t=e)}return t}function l(e){if(u(e.url))return!0;if("vector-tile"===e.type)for(const t in e.sourceNameToSource){const r=e.sourceNameToSource[t];if(u(r?.sourceUrl))return!0}return!1}const c=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function u(e){if(!e)return!1;const t=new o.Url(o.makeAbsolute(e));return!!t.authority&&c.test(t.authority)}function p(e){return e?!e.loaded&&e.resourceInfo?f(e.resourceInfo.data):{baseLayers:d(e.baseLayers),referenceLayers:d(e.referenceLayers)}:null}function d(e){return(t.isCollection(e)?e.toArray():e).map(h)}function h(e){return{type:e.type,effect:"effect"in e?e.effect:void 0,url:S("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl||""),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible,sublayers:"map-image"!==e.type&&"wms"!==e.type||null==e.sublayers?void 0:e.sublayers?.map(e=>({id:e.id,visible:e.visible})),activeLayerId:"wmts"===e.type?e.activeLayer?.id:void 0}}function y(e){return e.isReference||"ArcGISSceneServiceLayer"===e.layerType}function f(e){return e?{baseLayers:m((e.baseMapLayers??[]).filter(e=>!y(e))),referenceLayers:m((e.baseMapLayers??[]).filter(e=>y(e)))}:null}function m(e){return e.map(e=>function(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;case"ArcGISSceneServiceLayer":t="scene";break;default:t="unknown"}return{type:t,effect:e.effect,url:S(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:e.minScale??0,maxScale:e.maxScale??0,opacity:e.opacity??1,visible:null==e.visibility||!!e.visibility,sublayers:void 0,activeLayerId:void 0}}(e))}function g(e,t,r){return null!=e!=(null!=t)?"not-equal":e&&t?b(e.baseLayers,t.baseLayers)?b(e.referenceLayers,t.referenceLayers)?"equal":r.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function b(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!_(e[r],t[r]))return!1;return!0}function _(e,t){if(e.type!==t.type||e.url!==t.url||e.minScale!==t.minScale||e.maxScale!==t.maxScale||e.visible!==t.visible||e.opacity!==t.opacity)return!1;if(!s.effectEquals(e.effect,t.effect))return!1;if(null!=e.activeLayerId||null!=t.activeLayerId)return e.activeLayerId===t.activeLayerId;if(null!=e.sublayers||null!=t.sublayers){if(null==e.sublayers||null==t.sublayers||e.sublayers.length!==t.sublayers.length)return!1;for(let r=0;r<e.sublayers.length;r++){const o=e.sublayers.at(r),s=t.sublayers.at(r);if(o?.id!==s?.id||o?.visible!==s?.visible)return!1}}return!0}function S(e){return e?o.normalize(e).replace(/^\s*https?:/i,"").toLowerCase():""}function v(e){return"portalItem"in e?e.portalItem?.thumbnailUrl:void 0}e.contentEquals=function(e,t){return e===t||null!=e?.portalItem?.id&&e.portalItem.id===t?.portalItem?.id||"equal"===g(p(e),p(t),{mustMatchReferences:!0})},e.findSpatialReference=function(e,t){if(null==t||null==e)return{spatialReference:null,updating:!1};if("not-loaded"===t.loadStatus)return t.load(),{spatialReference:null,updating:!0};if(t.spatialReference)return{spatialReference:t.spatialReference,updating:!1};if(0===t.baseLayers.length)return{spatialReference:null,updating:!1};const r=t.baseLayers.at(0);switch(r.loadStatus){case"not-loaded":r.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const o=(("supportedSpatialReferences"in r?r.supportedSpatialReferences:null)||["tileInfo"in r?r.tileInfo?.spatialReference:r.spatialReference]).filter(Boolean),s=e.spatialReference;return s?{spatialReference:o.find(e=>s.equals(e))??o[0]??null,updating:!1}:{spatialReference:o[0],updating:!1}},e.getBasemapThumbnailUrl=function(e){if(!e)return null;const{thumbnailUrl:t}=e;if(t)return t;const o=a(e);return o?i.esriBasemapDefinitions[o].thumbnailUrl:r.mappedFind(e.baseLayers,v)},e.getWellKnownBasemapId=a,e.hasDeveloperBasemapLayer=function(e){return!!e?.baseLayers.concat(e.referenceLayers).some(l)},e.isBasemap3D=function(e){return"Web Scene"===e.portalItem?.type||e.referenceLayers.some(e=>"scene"===e.type)},e.isBasemapInBeta=function(e){return!!e?.portalItem?.tags?.some(e=>"beta"===e.toLowerCase())},e.isBasemapLayerView=function(e,t){const r=e.allLayerViews.find(e=>e.uid===t);return r?.layer.parent===e.map?.basemap},e.isDeveloperBasemapLayer=l,e.layerDefinitionEquals=_,e.layerToDefinition=h,e.overrideGetWellKnownBasemapId=function(e){n=e},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/utils":function(){define(["exports","./effects"],function(e,t){"use strict";e.canInterpolateEffects=function(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every((e,t)=>e.type===r[t].type)},e.effectEquals=function(e,t){return JSON.stringify(e??null)===JSON.stringify(t??null)},e.isEffectFunctions=function(e){const t=e[0];return!!t&&"type"in t},e.normalizeEffects=function(e,r){const o=e.length>r.length?e:r,s=e.length>r.length?r:e;for(let e=s.length;e<o.length;e++)s.push(t.createEffectWithInitialValues(o[e]))},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/effects":function(){define(["exports","../../colorUtils","../../core/screenUtils","../../core/libs/gl-matrix-2/factories/mat4f32","./colorMatrixFunctions"],function(e,t,r,o,s){"use strict";class i{constructor(e,t,r){this.strength=e,this.radius=t,this.threshold=r,this.type="bloom"}interpolate(e,t,r){this.strength=p(e.strength,t.strength,r),this.radius=p(e.radius,t.radius,r),this.threshold=p(e.threshold,t.threshold,r)}clone(){return new i(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:d(this.radius),strength:this.strength,threshold:this.threshold}}}class n{constructor(e){this.radius=e,this.type="blur"}interpolate(e,t,r){this.radius=Math.round(p(e.radius,t.radius,r))}clone(){return new n(this.radius)}toJSON(){return{type:"blur",radius:d(this.radius)}}}class a{constructor(e,t){this.type=e,this.amount=t,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,t,r){this.amount=p(e.amount,t.amount,r),this._updateMatrix()}clone(){return new a(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||o.create();switch(this.type){case"brightness":this._colorMatrix=s.brightness(e,this.amount);break;case"contrast":this._colorMatrix=s.contrast(e,this.amount);break;case"grayscale":this._colorMatrix=s.grayscale(e,this.amount);break;case"invert":this._colorMatrix=s.invert(e,this.amount);break;case"saturate":this._colorMatrix=s.saturate(e,this.amount);break;case"sepia":this._colorMatrix=s.sepia(e,this.amount)}}}class l{constructor(e,t,r,o){this.offsetX=e,this.offsetY=t,this.blurRadius=r,this.color=o,this.type="drop-shadow"}interpolate(e,t,r){this.offsetX=p(e.offsetX,t.offsetX,r),this.offsetY=p(e.offsetY,t.offsetY,r),this.blurRadius=p(e.blurRadius,t.blurRadius,r),this.color[0]=Math.round(p(e.color[0],t.color[0],r)),this.color[1]=Math.round(p(e.color[1],t.color[1],r)),this.color[2]=Math.round(p(e.color[2],t.color[2],r)),this.color[3]=p(e.color[3],t.color[3],r)}clone(){return new l(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:d(this.offsetX),yoffset:d(this.offsetY),blurRadius:d(this.blurRadius),color:e}}}class c{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,t,r){this.angle=p(e.angle,t.angle,r),this._updateMatrix()}clone(){return new c(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||o.create();this._colorMatrix=s.rotateHue(e,this.angle)}}class u{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,t,r){this.amount=p(e.amount,t.amount,r)}clone(){return new u(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function p(e,t,r){return e+(t-e)*r}function d(e){return Math.round(1e3*r.px2pt(e))/1e3}e.BloomEffect=i,e.BlurEffect=n,e.ColorMatrixEffect=a,e.DropShadowEffect=l,e.HueRotateEffect=c,e.OpacityEffect=u,e.createEffectWithInitialValues=function(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new a(e.type,0);case"saturate":case"brightness":case"contrast":return new a(e.type,1);case"opacity":return new u(1);case"hue-rotate":return new c(0);case"blur":return new n(0);case"drop-shadow":return new l(0,0,0,[...t.getNamedColor("transparent")]);case"bloom":return new i(0,0,1)}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/screenUtils":function(){define(["exports"],function(e){"use strict";const t=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;function r(e){return e?72*e/96:0}function o(e=0,t=0){return{x:e,y:t}}e.castRenderScreenPointArray=function(e){return e},e.castRenderScreenPointArray3=function(e){return e},e.castScreenPointArray=function(e){return e},e.cloneScreenPoint=function(e){return e?o(e.x,e.y):null},e.createRenderScreenPoint=function(e=0,t=0){return{x:e,y:t}},e.createRenderScreenPointArray=function(e=0,t=0){return[e,t]},e.createRenderScreenPointArray3=function(e=0,t=0,r=0){return[e,t,r]},e.createScreenPoint=o,e.createScreenPointArray=function(e=0,t=0){return[e,t]},e.pt2px=function(e){return e?e/72*96:0},e.px2pt=r,e.screenPointArrayToObject=function(e,t){return t?(t.x=e[0],t.y=e[1],t):{x:e[0],y:e[1]}},e.screenPointObjectToArray=function(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]},e.toPt=function(e){if("string"==typeof e){const o=e.match(t);if(o){const t=Number(o[1]),s=o[3]&&o[3].toLowerCase(),i=e.startsWith("-"),n="px"===s?r(t):t;return i?-n:n}return console.warn("screenUtils.toPt: input not recognized!"),null}return e},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["exports"],function(e){"use strict";function t(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function r(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function o(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f){const m=new Float32Array(16);return m[0]=e,m[1]=t,m[2]=r,m[3]=o,m[4]=s,m[5]=i,m[6]=n,m[7]=a,m[8]=l,m[9]=c,m[10]=u,m[11]=p,m[12]=d,m[13]=h,m[14]=y,m[15]=f,m}const s=t(),i=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:r,create:t,fromValues:o},Symbol.toStringTag,{value:"Module"}));e.IDENTITY=s,e.clone=r,e.create=t,e.fromValues=o,e.mat4f32=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/colorMatrixFunctions":function(){define(["exports","../../core/libs/gl-matrix-2/math/mat4"],function(e,t){"use strict";e.brightness=(e,r)=>{const o=t.set(e,r,0,0,0,0,r,0,0,0,0,r,0,0,0,0,1);return t.transpose(o,o)},e.contrast=(e,r)=>{const o=t.set(e,r,0,0,.5-.5*r,0,r,0,.5-.5*r,0,0,r,.5-.5*r,0,0,0,1);return t.transpose(o,o)},e.grayscale=(e,r)=>{const o=1-r,s=t.set(e,.2126+.7874*o,.7152-.7152*o,.0722-.0722*o,0,.2126-.2126*o,.7152+.2848*o,.0722-.0722*o,0,.2126-.2126*o,.7152-.7152*o,.0722+.9278*o,0,0,0,0,1);return t.transpose(s,s)},e.invert=(e,r)=>{const o=1-2*r,s=r,i=t.set(e,o,0,0,s,0,o,0,s,0,0,o,s,0,0,0,1);return t.transpose(i,i)},e.rotateHue=(e,r)=>{const o=Math.sin(r*Math.PI/180),s=Math.cos(r*Math.PI/180),i=t.set(e,.213+.787*s-.213*o,.715-.715*s-.715*o,.072-.072*s+.928*o,0,.213-.213*s+.143*o,.715+.285*s+.14*o,.072-.072*s-.283*o,0,.213-.213*s-.787*o,.715-.715*s+.715*o,.072+.928*s+.072*o,0,0,0,0,1);return t.transpose(i,i)},e.saturate=(e,r)=>{const o=r,s=t.set(e,.213+.787*o,.715-.715*o,.072-.072*o,0,.213-.213*o,.715+.285*o,.072-.072*o,0,.213-.213*o,.715-.715*o,.072+.928*o,0,0,0,0,1);return t.transpose(s,s)},e.sepia=(e,r)=>{const o=1-r,s=t.set(e,.393+.607*o,.769-.769*o,.189-.189*o,0,.349-.349*o,.686+.314*o,.168-.168*o,0,.272-.272*o,.534-.534*o,.131+.869*o,0,0,0,0,1);return t.transpose(s,s)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["exports","../factories/vec3f64","./common"],function(e,t,r){"use strict";function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function s(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m){return e[0]=t,e[1]=r,e[2]=o,e[3]=s,e[4]=i,e[5]=n,e[6]=a,e[7]=l,e[8]=c,e[9]=u,e[10]=p,e[11]=d,e[12]=h,e[13]=y,e[14]=f,e[15]=m,e}function i(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function n(e,t){if(e===t){const r=t[1],o=t[2],s=t[3],i=t[6],n=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=o,e[9]=i,e[11]=t[14],e[12]=s,e[13]=n,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function a(e,t){return l(e,t)||i(e),e}function l(e,t){const r=t[0],o=t[1],s=t[2],i=t[3],n=t[4],a=t[5],l=t[6],c=t[7],u=t[8],p=t[9],d=t[10],h=t[11],y=t[12],f=t[13],m=t[14],g=t[15],b=r*a-o*n,_=r*l-s*n,S=r*c-i*n,v=o*l-s*a,w=o*c-i*a,x=s*c-i*l,T=u*f-p*y,M=u*m-d*y,I=u*g-h*y,O=p*m-d*f,P=p*g-h*f,k=d*g-h*m;let C=b*k-_*P+S*O+v*I-w*M+x*T;return C?(C=1/C,e[0]=(a*k-l*P+c*O)*C,e[1]=(s*P-o*k-i*O)*C,e[2]=(f*x-m*w+g*v)*C,e[3]=(d*w-p*x-h*v)*C,e[4]=(l*I-n*k-c*M)*C,e[5]=(r*k-s*I+i*M)*C,e[6]=(m*S-y*x-g*_)*C,e[7]=(u*x-d*S+h*_)*C,e[8]=(n*P-a*I+c*T)*C,e[9]=(o*I-r*P-i*T)*C,e[10]=(y*w-f*S+g*b)*C,e[11]=(p*S-u*w-h*b)*C,e[12]=(a*M-n*O-l*T)*C,e[13]=(r*O-o*M+s*T)*C,e[14]=(f*_-y*v-m*b)*C,e[15]=(u*v-p*_+d*b)*C,e):null}function c(e,t){const r=t[0],o=t[1],s=t[2],i=t[3],n=t[4],a=t[5],l=t[6],c=t[7],u=t[8],p=t[9],d=t[10],h=t[11],y=t[12],f=t[13],m=t[14],g=t[15];return e[0]=a*(d*g-h*m)-p*(l*g-c*m)+f*(l*h-c*d),e[1]=-(o*(d*g-h*m)-p*(s*g-i*m)+f*(s*h-i*d)),e[2]=o*(l*g-c*m)-a*(s*g-i*m)+f*(s*c-i*l),e[3]=-(o*(l*h-c*d)-a*(s*h-i*d)+p*(s*c-i*l)),e[4]=-(n*(d*g-h*m)-u*(l*g-c*m)+y*(l*h-c*d)),e[5]=r*(d*g-h*m)-u*(s*g-i*m)+y*(s*h-i*d),e[6]=-(r*(l*g-c*m)-n*(s*g-i*m)+y*(s*c-i*l)),e[7]=r*(l*h-c*d)-n*(s*h-i*d)+u*(s*c-i*l),e[8]=n*(p*g-h*f)-u*(a*g-c*f)+y*(a*h-c*p),e[9]=-(r*(p*g-h*f)-u*(o*g-i*f)+y*(o*h-i*p)),e[10]=r*(a*g-c*f)-n*(o*g-i*f)+y*(o*c-i*a),e[11]=-(r*(a*h-c*p)-n*(o*h-i*p)+u*(o*c-i*a)),e[12]=-(n*(p*m-d*f)-u*(a*m-l*f)+y*(a*d-l*p)),e[13]=r*(p*m-d*f)-u*(o*m-s*f)+y*(o*d-s*p),e[14]=-(r*(a*m-l*f)-n*(o*m-s*f)+y*(o*l-s*a)),e[15]=r*(a*d-l*p)-n*(o*d-s*p)+u*(o*l-s*a),e}function u(e){const t=e[0],r=e[1],o=e[2],s=e[3],i=e[4],n=e[5],a=e[6],l=e[7],c=e[8],u=e[9],p=e[10],d=e[11],h=e[12],y=e[13],f=e[14],m=e[15];return(t*n-r*i)*(p*m-d*f)-(t*a-o*i)*(u*m-d*y)+(t*l-s*i)*(u*f-p*y)+(r*a-o*n)*(c*m-d*h)-(r*l-s*n)*(c*f-p*h)+(o*l-s*a)*(c*y-u*h)}function p(e,t,r){const o=t[0],s=t[1],i=t[2],n=t[3],a=t[4],l=t[5],c=t[6],u=t[7],p=t[8],d=t[9],h=t[10],y=t[11],f=t[12],m=t[13],g=t[14],b=t[15];let _=r[0],S=r[1],v=r[2],w=r[3];return e[0]=_*o+S*a+v*p+w*f,e[1]=_*s+S*l+v*d+w*m,e[2]=_*i+S*c+v*h+w*g,e[3]=_*n+S*u+v*y+w*b,_=r[4],S=r[5],v=r[6],w=r[7],e[4]=_*o+S*a+v*p+w*f,e[5]=_*s+S*l+v*d+w*m,e[6]=_*i+S*c+v*h+w*g,e[7]=_*n+S*u+v*y+w*b,_=r[8],S=r[9],v=r[10],w=r[11],e[8]=_*o+S*a+v*p+w*f,e[9]=_*s+S*l+v*d+w*m,e[10]=_*i+S*c+v*h+w*g,e[11]=_*n+S*u+v*y+w*b,_=r[12],S=r[13],v=r[14],w=r[15],e[12]=_*o+S*a+v*p+w*f,e[13]=_*s+S*l+v*d+w*m,e[14]=_*i+S*c+v*h+w*g,e[15]=_*n+S*u+v*y+w*b,e}function d(e,t,r){const o=r[0],s=r[1],i=r[2];if(t===e)e[12]=t[0]*o+t[4]*s+t[8]*i+t[12],e[13]=t[1]*o+t[5]*s+t[9]*i+t[13],e[14]=t[2]*o+t[6]*s+t[10]*i+t[14],e[15]=t[3]*o+t[7]*s+t[11]*i+t[15];else{const r=t[0],n=t[1],a=t[2],l=t[3],c=t[4],u=t[5],p=t[6],d=t[7],h=t[8],y=t[9],f=t[10],m=t[11];e[0]=r,e[1]=n,e[2]=a,e[3]=l,e[4]=c,e[5]=u,e[6]=p,e[7]=d,e[8]=h,e[9]=y,e[10]=f,e[11]=m,e[12]=r*o+c*s+h*i+t[12],e[13]=n*o+u*s+y*i+t[13],e[14]=a*o+p*s+f*i+t[14],e[15]=l*o+d*s+m*i+t[15]}return e}function h(e,t,r){const o=r[0],s=r[1],i=r[2];return e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e[3]=t[3]*o,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function y(e,t,s,i){let n=i[0],a=i[1],l=i[2],c=Math.sqrt(n*n+a*a+l*l);if(c<=r.getEpsilon())return void o(e,t);c=1/c,n*=c,a*=c,l*=c;const u=Math.sin(s),p=Math.cos(s),d=1-p,h=t[0],y=t[1],f=t[2],m=t[3],g=t[4],b=t[5],_=t[6],S=t[7],v=t[8],w=t[9],x=t[10],T=t[11],M=n*n*d+p,I=a*n*d+l*u,O=l*n*d-a*u,P=n*a*d-l*u,k=a*a*d+p,C=l*a*d+n*u,L=n*l*d+a*u,E=a*l*d-n*u,A=l*l*d+p;e[0]=h*M+g*I+v*O,e[1]=y*M+b*I+w*O,e[2]=f*M+_*I+x*O,e[3]=m*M+S*I+T*O,e[4]=h*P+g*k+v*C,e[5]=y*P+b*k+w*C,e[6]=f*P+_*k+x*C,e[7]=m*P+S*k+T*C,e[8]=h*L+g*E+v*A,e[9]=y*L+b*E+w*A,e[10]=f*L+_*E+x*A,e[11]=m*L+S*E+T*A,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function f(e,t,r){const o=Math.sin(r),s=Math.cos(r),i=t[4],n=t[5],a=t[6],l=t[7],c=t[8],u=t[9],p=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*s+c*o,e[5]=n*s+u*o,e[6]=a*s+p*o,e[7]=l*s+d*o,e[8]=c*s-i*o,e[9]=u*s-n*o,e[10]=p*s-a*o,e[11]=d*s-l*o,e}function m(e,t,r){const o=Math.sin(r),s=Math.cos(r),i=t[0],n=t[1],a=t[2],l=t[3],c=t[8],u=t[9],p=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*s-c*o,e[1]=n*s-u*o,e[2]=a*s-p*o,e[3]=l*s-d*o,e[8]=i*o+c*s,e[9]=n*o+u*s,e[10]=a*o+p*s,e[11]=l*o+d*s,e}function g(e,t,r){const o=Math.sin(r),s=Math.cos(r),i=t[0],n=t[1],a=t[2],l=t[3],c=t[4],u=t[5],p=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*s+c*o,e[1]=n*s+u*o,e[2]=a*s+p*o,e[3]=l*s+d*o,e[4]=c*s-i*o,e[5]=u*s-n*o,e[6]=p*s-a*o,e[7]=d*s-l*o,e}function b(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function _(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function S(e,t,o){if(0===t)return i(e);let s=o[0],n=o[1],a=o[2],l=Math.sqrt(s*s+n*n+a*a);if(l<=r.getEpsilon())return null;l=1/l,s*=l,n*=l,a*=l;const c=Math.sin(t),u=Math.cos(t),p=1-u;return e[0]=s*s*p+u,e[1]=n*s*p+a*c,e[2]=a*s*p-n*c,e[3]=0,e[4]=s*n*p-a*c,e[5]=n*n*p+u,e[6]=a*n*p+s*c,e[7]=0,e[8]=s*a*p+n*c,e[9]=n*a*p-s*c,e[10]=a*a*p+u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function v(e,t){const r=Math.sin(t),o=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function w(e,t){const r=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function x(e,t){const r=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function T(e,t,r){const o=t[0],s=t[1],i=t[2],n=t[3],a=o+o,l=s+s,c=i+i,u=o*a,p=o*l,d=o*c,h=s*l,y=s*c,f=i*c,m=n*a,g=n*l,b=n*c;return e[0]=1-(h+f),e[1]=p+b,e[2]=d-g,e[3]=0,e[4]=p-b,e[5]=1-(u+f),e[6]=y+m,e[7]=0,e[8]=d+g,e[9]=y-m,e[10]=1-(u+h),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function M(e,t){const r=I,o=-t[0],s=-t[1],i=-t[2],n=t[3],a=t[4],l=t[5],c=t[6],u=t[7],p=o*o+s*s+i*i+n*n;return p>0?(r[0]=2*(a*n+u*o+l*i-c*s)/p,r[1]=2*(l*n+u*s+c*o-a*i)/p,r[2]=2*(c*n+u*i+a*s-l*o)/p):(r[0]=2*(a*n+u*o+l*i-c*s),r[1]=2*(l*n+u*s+c*o-a*i),r[2]=2*(c*n+u*i+a*s-l*o)),T(e,t,r),e}const I=t.create();function O(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function P(e,t){const r=t[0],o=t[1],s=t[2],i=t[4],n=t[5],a=t[6],l=t[8],c=t[9],u=t[10];return e[0]=Math.sqrt(r*r+o*o+s*s),e[1]=Math.sqrt(i*i+n*n+a*a),e[2]=Math.sqrt(l*l+c*c+u*u),e}function k(e,t){const r=t[0]+t[5]+t[10];let o=0;return r>0?(o=2*Math.sqrt(r+1),e[3]=.25*o,e[0]=(t[6]-t[9])/o,e[1]=(t[8]-t[2])/o,e[2]=(t[1]-t[4])/o):t[0]>t[5]&&t[0]>t[10]?(o=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/o,e[0]=.25*o,e[1]=(t[1]+t[4])/o,e[2]=(t[8]+t[2])/o):t[5]>t[10]?(o=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/o,e[0]=(t[1]+t[4])/o,e[1]=.25*o,e[2]=(t[6]+t[9])/o):(o=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/o,e[0]=(t[8]+t[2])/o,e[1]=(t[6]+t[9])/o,e[2]=.25*o),e}function C(e,t,r,o){const s=t[0],i=t[1],n=t[2],a=t[3],l=s+s,c=i+i,u=n+n,p=s*l,d=s*c,h=s*u,y=i*c,f=i*u,m=n*u,g=a*l,b=a*c,_=a*u,S=o[0],v=o[1],w=o[2];return e[0]=(1-(y+m))*S,e[1]=(d+_)*S,e[2]=(h-b)*S,e[3]=0,e[4]=(d-_)*v,e[5]=(1-(p+m))*v,e[6]=(f+g)*v,e[7]=0,e[8]=(h+b)*w,e[9]=(f-g)*w,e[10]=(1-(p+y))*w,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function L(e,t,r,o,s){const i=t[0],n=t[1],a=t[2],l=t[3],c=i+i,u=n+n,p=a+a,d=i*c,h=i*u,y=i*p,f=n*u,m=n*p,g=a*p,b=l*c,_=l*u,S=l*p,v=o[0],w=o[1],x=o[2],T=s[0],M=s[1],I=s[2],O=(1-(f+g))*v,P=(h+S)*v,k=(y-_)*v,C=(h-S)*w,L=(1-(d+g))*w,E=(m+b)*w,A=(y+_)*x,F=(m-b)*x,R=(1-(d+f))*x;return e[0]=O,e[1]=P,e[2]=k,e[3]=0,e[4]=C,e[5]=L,e[6]=E,e[7]=0,e[8]=A,e[9]=F,e[10]=R,e[11]=0,e[12]=r[0]+T-(O*T+C*M+A*I),e[13]=r[1]+M-(P*T+L*M+F*I),e[14]=r[2]+I-(k*T+E*M+R*I),e[15]=1,e}function E(e,t){const r=t[0],o=t[1],s=t[2],i=t[3],n=r+r,a=o+o,l=s+s,c=r*n,u=o*n,p=o*a,d=s*n,h=s*a,y=s*l,f=i*n,m=i*a,g=i*l;return e[0]=1-p-y,e[1]=u+g,e[2]=d-m,e[3]=0,e[4]=u-g,e[5]=1-c-y,e[6]=h+f,e[7]=0,e[8]=d+m,e[9]=h-f,e[10]=1-c-p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function A(e,t,r,o,s,i,n){const a=1/(r-t),l=1/(s-o),c=1/(i-n);return e[0]=2*i*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*l,e[6]=0,e[7]=0,e[8]=(r+t)*a,e[9]=(s+o)*l,e[10]=(n+i)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=n*i*2*c,e[15]=0,e}function F(e,t,r,o,s){const i=1/Math.tan(t/2);let n;return e[0]=i/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=s&&s!==1/0?(n=1/(o-s),e[10]=(s+o)*n,e[14]=2*s*o*n):(e[10]=-1,e[14]=-2*o),e}function R(e,t,r,o){const s=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),n=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(n+a),c=2/(s+i);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(n-a)*l*.5,e[9]=(s-i)*c*.5,e[10]=o/(r-o),e[11]=-1,e[12]=0,e[13]=0,e[14]=o*r/(r-o),e[15]=0,e}function j(e,t,r,o,s,i,n){const a=1/(t-r),l=1/(o-s),c=1/(i-n);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*a,e[13]=(s+o)*l,e[14]=(n+i)*c,e[15]=1,e}function N(e,t,o,s){const n=t[0],a=t[1],l=t[2];let c=n-o[0],u=a-o[1],p=l-o[2];const d=r.getEpsilon();if(Math.abs(c)<d&&Math.abs(u)<d&&Math.abs(p)<d)return void i(e);let h=1/Math.sqrt(c*c+u*u+p*p);c*=h,u*=h,p*=h;const y=s[0],f=s[1],m=s[2];let g=f*p-m*u,b=m*c-y*p,_=y*u-f*c;h=Math.sqrt(g*g+b*b+_*_),h?(h=1/h,g*=h,b*=h,_*=h):(g=0,b=0,_=0);let S=u*_-p*b,v=p*g-c*_,w=c*b-u*g;h=Math.sqrt(S*S+v*v+w*w),h?(h=1/h,S*=h,v*=h,w*=h):(S=0,v=0,w=0),e[0]=g,e[1]=S,e[2]=c,e[3]=0,e[4]=b,e[5]=v,e[6]=u,e[7]=0,e[8]=_,e[9]=w,e[10]=p,e[11]=0,e[12]=-(g*n+b*a+_*l),e[13]=-(S*n+v*a+w*l),e[14]=-(c*n+u*a+p*l),e[15]=1}function D(e,t,r,o){const s=t[0],i=t[1],n=t[2],a=o[0],l=o[1],c=o[2];let u=s-r[0],p=i-r[1],d=n-r[2],h=u*u+p*p+d*d;h>0&&(h=1/Math.sqrt(h),u*=h,p*=h,d*=h);let y=l*d-c*p,f=c*u-a*d,m=a*p-l*u;return h=y*y+f*f+m*m,h>0&&(h=1/Math.sqrt(h),y*=h,f*=h,m*=h),e[0]=y,e[1]=f,e[2]=m,e[3]=0,e[4]=p*m-d*f,e[5]=d*y-u*m,e[6]=u*f-p*y,e[7]=0,e[8]=u,e[9]=p,e[10]=d,e[11]=0,e[12]=s,e[13]=i,e[14]=n,e[15]=1,e}function U(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function V(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function q(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function z(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function G(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function B(e,t,r,o){return e[0]=t[0]+r[0]*o,e[1]=t[1]+r[1]*o,e[2]=t[2]+r[2]*o,e[3]=t[3]+r[3]*o,e[4]=t[4]+r[4]*o,e[5]=t[5]+r[5]*o,e[6]=t[6]+r[6]*o,e[7]=t[7]+r[7]*o,e[8]=t[8]+r[8]*o,e[9]=t[9]+r[9]*o,e[10]=t[10]+r[10]*o,e[11]=t[11]+r[11]*o,e[12]=t[12]+r[12]*o,e[13]=t[13]+r[13]*o,e[14]=t[14]+r[14]*o,e[15]=t[15]+r[15]*o,e}function $(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function J(e,t){if(e===t)return!0;const o=e[0],s=e[1],i=e[2],n=e[3],a=e[4],l=e[5],c=e[6],u=e[7],p=e[8],d=e[9],h=e[10],y=e[11],f=e[12],m=e[13],g=e[14],b=e[15],_=t[0],S=t[1],v=t[2],w=t[3],x=t[4],T=t[5],M=t[6],I=t[7],O=t[8],P=t[9],k=t[10],C=t[11],L=t[12],E=t[13],A=t[14],F=t[15],R=r.getEpsilon();return Math.abs(o-_)<=R*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(s-S)<=R*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(i-v)<=R*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(n-w)<=R*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(a-x)<=R*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(l-T)<=R*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(c-M)<=R*Math.max(1,Math.abs(c),Math.abs(M))&&Math.abs(u-I)<=R*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(p-O)<=R*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(d-P)<=R*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(h-k)<=R*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(y-C)<=R*Math.max(1,Math.abs(y),Math.abs(C))&&Math.abs(f-L)<=R*Math.max(1,Math.abs(f),Math.abs(L))&&Math.abs(m-E)<=R*Math.max(1,Math.abs(m),Math.abs(E))&&Math.abs(g-A)<=R*Math.max(1,Math.abs(g),Math.abs(A))&&Math.abs(b-F)<=R*Math.max(1,Math.abs(b),Math.abs(F))}function W(e){const t=r.getEpsilon(),o=e[0],s=e[1],i=e[2],n=e[4],a=e[5],l=e[6],c=e[8],u=e[9],p=e[10];return Math.abs(1-(o*o+n*n+c*c))<=t&&Math.abs(1-(s*s+a*a+u*u))<=t&&Math.abs(1-(i*i+l*l+p*p))<=t}function H(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[8]&&0===e[9]&&1===e[10]}const Z=p,Q=z,K=Object.freeze(Object.defineProperty({__proto__:null,add:q,adjoint:c,copy:o,determinant:u,equals:J,exactEquals:$,frob:V,fromQuat:E,fromQuat2:M,fromRotation:S,fromRotationTranslation:T,fromRotationTranslationScale:C,fromRotationTranslationScaleOrigin:L,fromScaling:_,fromTranslation:b,fromXRotation:v,fromYRotation:w,fromZRotation:x,frustum:A,getRotation:k,getScale:P,getTranslation:O,hasIdentityRotation:H,identity:i,invert:l,invertOrIdentity:a,isOrthoNormal:W,lookAt:N,mul:Z,multiply:p,multiplyScalar:G,multiplyScalarAndAdd:B,ortho:j,perspective:F,perspectiveFromFieldOfView:R,rotate:y,rotateX:f,rotateY:m,rotateZ:g,scale:h,set:s,str:U,sub:Q,subtract:z,targetTo:D,translate:d,transpose:n},Symbol.toStringTag,{value:"Module"}));e.add=q,e.adjoint=c,e.copy=o,e.determinant=u,e.equals=J,e.exactEquals=$,e.frob=V,e.fromQuat=E,e.fromQuat2=M,e.fromRotation=S,e.fromRotationTranslation=T,e.fromRotationTranslationScale=C,e.fromRotationTranslationScaleOrigin=L,e.fromScaling=_,e.fromTranslation=b,e.fromXRotation=v,e.fromYRotation=w,e.fromZRotation=x,e.frustum=A,e.getRotation=k,e.getScale=P,e.getTranslation=O,e.hasIdentityRotation=H,e.identity=i,e.invert=l,e.invertOrIdentity=a,e.isOrthoNormal=W,e.lookAt=N,e.mat4=K,e.mul=Z,e.multiply=p,e.multiplyScalar=G,e.multiplyScalarAndAdd=B,e.ortho=j,e.perspective=F,e.perspectiveFromFieldOfView=R,e.rotate=y,e.rotateX=f,e.rotateY=m,e.rotateZ=g,e.scale=h,e.set=s,e.str=U,e.sub=Q,e.subtract=z,e.targetTo=D,e.translate=d,e.transpose=n,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/common":function(){define(["exports"],function(e){"use strict";let t=1e-6;function r(){return t}function o(e){t=e}const s=Math.random,i=Math.PI/180,n=180/Math.PI;function a(e){return e*i}function l(e){return e*n}function c(e,r){return Math.abs(e-r)<=t*Math.max(1,Math.abs(e),Math.abs(r))}const u=Object.freeze(Object.defineProperty({__proto__:null,RANDOM:s,equals:c,getEpsilon:r,setEpsilon:o,toDegree:l,toRadian:a},Symbol.toStringTag,{value:"Module"}));e.RANDOM=s,e.common=u,e.equals=c,e.getEpsilon=r,e.setEpsilon=o,e.toDegree=l,e.toRadian=a,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/collectionUtils":function(){define(["exports","../core/CollectionFlattener"],function(e,t){"use strict";e.createFlattenedTablesCollection=function(e){return new t({getCollections:()=>[e.tables,e.layers],getChildrenFunction:e=>{const t=[];return"tables"in e&&t.push(e.tables),"layers"in e&&t.push(e.layers),t},itemFilterFunction:e=>{const t=e.parent;return!!t&&"tables"in t&&t.tables.includes(e)}})},e.destroyMap=function(e){for(const t of e.values())t?.destroy();e.clear()},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/groundUtils":function(){define(["exports","../Ground","../core/Logger","../core/accessorSupport/ensureType"],function(e,t,r,o){"use strict";const s={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};e.ensureType=function(e){let i=null;return"string"==typeof e?e in s?i=new t({resourceInfo:{data:{layers:[s[e]]}}}):r.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`):i=o.ensureType(t,e),i},e.groundElevationLayers=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/LayersMixin":function(){define(["exports","../chunks/tslib.es6","../core/Collection","../core/collectionUtils","../core/Logger","../core/promiseUtils","../core/accessorSupport/decorators/property","../core/has","../core/RandomLCG","../core/accessorSupport/decorators/subclass","../layers/Layer"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";function p(e,t,r){let o,s;if(e)for(let i=0,n=e.length;i<n;i++){if(o=e.at(i),o?.[t]===r)return o;if("group"===o?.type&&(s=p(o.layers,t,r),s))return s}}e.LayersMixin=e=>{const a=e;let l=class extends a{constructor(...e){super(...e),this.layers=new r;const t=e=>{e.parent=this,this.layerAdded(e),"elevation"!==e.type&&"base-elevation"!==e.type||s.getLogger(this).error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},o=e=>{e.parent=null,this.layerRemoved(e)};this.addHandles([this.layers.on("before-add",e=>{if(e.item===this)return e.preventDefault(),void s.getLogger(this).error("#add()","Cannot add layer to itself.");var t;(t=e.item).parent&&"remove"in t.parent&&t.parent.remove(t)}),this.layers.on("after-add",e=>t(e.item)),this.layers.on("after-remove",e=>o(e.item))])}destroy(){const e=this.layers.toArray();for(const t of e)t.destroy();this.layers.destroy()}set layers(e){this._set("layers",o.referenceSetter(e,this._get("layers")))}add(e,t){const r=this.layers;if(t=r.getNextIndex(t),e instanceof u){const o=e;o.parent===this?this.reorder(o,t):r.add(o,t)}else i.isPromiseLike(e)?e.then(e=>{this.destroyed||this.add(e,t)}):s.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(e,t){const r=this.layers;let o=r.getNextIndex(t);e.slice().forEach(e=>{e.parent!==this?(r.add(e,o),o+=1):this.reorder(e,o)})}findLayerById(e){return p(this.layers,"id",e)}findLayerByUid(e){return p(this.layers,"uid",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,t){return this.layers.reorder(e,t)}layerAdded(e){}layerRemoved(e){}};return t.__decorate([n.property()],l.prototype,"layers",null),l=t.__decorate([c.subclass("esri.support.LayersMixin")],l),l},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/Layer":function(){define(["require","exports","../chunks/tslib.es6","../request","../core/Error","../core/Evented","../core/Identifiable","../core/Loadable","../core/Logger","../core/promiseUtils","../core/urlUtils","../core/accessorSupport/decorators/property","../core/has","../core/RandomLCG","../core/accessorSupport/decorators/subclass","../geometry/Extent","../geometry/SpatialReference","./support/fromPortalItem","../chunks/TimeExtent"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b){"use strict";let _=0;return t.default=class extends(i.EventedMixin(n.IdentifiableMixin(a.Loadable))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new f(-180,-90,180,90,m.WGS84),this.id=Date.now().toString(16)+"-layer-"+_++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=m.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const r="string"==typeof t?{url:t}:t;return(await new Promise((t,r)=>e(["./support/arcgisLayers"],t,r))).fromUrl(r)}static fromPortalItem(e){return g.fromPortalItem(e)}initialize(){this.when().catch(e=>{c.isAbortError(e)||l.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const e=this.parent;if(e){const t=this;"layers"in e&&e.layers.includes(t)?e.layers.remove(t):"tables"in e&&e.tables.includes(t)?e.tables.remove(t):"baseLayers"in e&&e.baseLayers.includes(t)?e.baseLayers.remove(t):"referenceLayers"in e&&e.referenceLayers.includes(t)&&e.referenceLayers.remove(t),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const t=this.parent;return e&&t&&"effectiveVisible"in t&&(e&&=t.effectiveVisible),e}get hasAttributionData(){return null!=this.attributionDataUrl}get loaded(){return super.loaded}get parsedUrl(){return u.urlToObject(this.url)}createLayerView(e,t){return Promise.reject(new s("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await o(e,{query:{f:"json"},responseType:"json"})).data;throw new s("layer:no-attribution-data","Layer does not have attribution data")}},r.__decorate([p.property({type:String})],t.default.prototype,"attributionDataUrl",void 0),r.__decorate([p.property({readOnly:!0})],t.default.prototype,"effectiveVisible",null),r.__decorate([p.property({type:f})],t.default.prototype,"fullExtent",void 0),r.__decorate([p.property({readOnly:!0})],t.default.prototype,"hasAttributionData",null),r.__decorate([p.property({type:String,clonable:!1})],t.default.prototype,"id",void 0),r.__decorate([p.property({type:Boolean,nonNullable:!0})],t.default.prototype,"legendEnabled",void 0),r.__decorate([p.property({type:["show","hide","hide-children"]})],t.default.prototype,"listMode",void 0),r.__decorate([p.property({type:Number,range:{min:0,max:1},nonNullable:!0})],t.default.prototype,"opacity",void 0),r.__decorate([p.property({clonable:!1})],t.default.prototype,"parent",void 0),r.__decorate([p.property({readOnly:!0})],t.default.prototype,"parsedUrl",null),r.__decorate([p.property({type:Boolean,readOnly:!0})],t.default.prototype,"persistenceEnabled",void 0),r.__decorate([p.property({type:Boolean})],t.default.prototype,"popupEnabled",void 0),r.__decorate([p.property({type:Boolean})],t.default.prototype,"attributionVisible",void 0),r.__decorate([p.property({type:m})],t.default.prototype,"spatialReference",void 0),r.__decorate([p.property({type:String})],t.default.prototype,"title",void 0),r.__decorate([p.property({readOnly:!0,json:{read:!1}})],t.default.prototype,"type",void 0),r.__decorate([p.property()],t.default.prototype,"url",void 0),r.__decorate([p.property({type:b.TimeExtent})],t.default.prototype,"visibilityTimeExtent",void 0),r.__decorate([p.property({type:Boolean,nonNullable:!0})],t.default.prototype,"visible",void 0),t.default=r.__decorate([y.subclass("esri.layers.Layer")],t.default),t.default})},"esri/core/Identifiable":function(){define(["exports","../chunks/tslib.es6","./accessorSupport/decorators/subclass"],function(e,t,r){"use strict";let o=0;const s=e=>{const s=e;let i=class extends s{constructor(...e){super(...e),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+o++})}};return i=t.__decorate([r.subclass("esri.core.Identifiable")],i),i},i=s(class{});e.Identifiable=i,e.IdentifiableMixin=s,e.NumericIdentifiableMixin=e=>{const s=e;let i=class extends s{constructor(...e){super(...e),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:o++})}};return i=t.__decorate([r.subclass("esri.core.Identifiable.NumericIdentifiable")],i),i},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fromPortalItem":function(){define(["require","exports","../../config","../../core/Logger"],function(e,t,r,o){"use strict";t.fromPortalItem=async function(t){const s="portalItem"in t?t:{portalItem:t},{fromItem:i}=await new Promise((t,r)=>e(["../../portal/support/portalLayers"],t,r));try{return await i(s)}catch(e){const t=s?.portalItem,i=t?.id||"unset",n=t?.portal?.url||r.portalUrl;throw o.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+n+"', id: '"+i+"')",e),e}},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/TimeExtent":function(){define(["exports","./tslib.es6","../core/JSONSupport","../core/timeUtils","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","../time/constants"],function(e,t,r,o,s,i,n,a,l,c,u,p){"use strict";var d;e.TimeExtent=class extends r.JSONSupport{static{d=this}static get allTime(){return h}static get empty(){return y}static fromArray(e){return new d({start:null!=e[0]?new Date(e[0]):e[0],end:null!=e[1]?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?.getTime()??null}get isAllTime(){return this.equals(d.allTime)}get isEmpty(){return this.equals(d.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?.getTime()??null}clone(){return new d({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=this.start?.getTime()??this.start,r=this.end?.getTime()??this.end,o=e.start?.getTime()??e.start,s=e.end?.getTime()??e.end;return t===o&&r===s}expandTo(e,t=p.system){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=o.truncateDate(r,e,t));let s=this.end;if(s){const r=o.truncateDate(s,e,t);s=s.getTime()===r.getTime()?r:o.offsetDate(r,1,e,t)}return new d({start:r,end:s})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return d.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=this.start?.getTime()??-1/0,r=this.end?.getTime()??1/0,o=e.start?.getTime()??-1/0,s=e.end?.getTime()??1/0;let i,n;return o>=t&&o<=r?i=o:t>=o&&t<=s&&(i=t),r>=o&&r<=s?n=r:s>=t&&s<=r&&(n=s),null==i||null==n||isNaN(i)||isNaN(n)?d.empty:new d({start:i===-1/0?null:new Date(i),end:n===1/0?null:new Date(n)})}offset(e,t,r=p.system){if(this.isEmpty||this.isAllTime)return this.clone();const s=new d,{start:i,end:n}=this;return null!=i&&(s.start=o.offsetDate(i,e,t,r)),null!=n&&(s.end=o.offsetDate(n,e,t,r)),s}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return h.clone();const t=null!=this.start&&null!=e.start?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=null!=this.end&&null!=e.end?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new d({start:t,end:r})}},t.__decorate([s.property({type:Date,json:{write:{allowNull:!0}}})],e.TimeExtent.prototype,"end",void 0),t.__decorate([l.reader("end")],e.TimeExtent.prototype,"readEnd",null),t.__decorate([u.writer("end")],e.TimeExtent.prototype,"writeEnd",null),t.__decorate([s.property({readOnly:!0,json:{read:!1}})],e.TimeExtent.prototype,"isAllTime",null),t.__decorate([s.property({readOnly:!0,json:{read:!1}})],e.TimeExtent.prototype,"isEmpty",null),t.__decorate([s.property({type:Date,json:{write:{allowNull:!0}}})],e.TimeExtent.prototype,"start",void 0),t.__decorate([l.reader("start")],e.TimeExtent.prototype,"readStart",null),t.__decorate([u.writer("start")],e.TimeExtent.prototype,"writeStart",null),e.TimeExtent=d=t.__decorate([c.subclass("esri.time.TimeExtent")],e.TimeExtent);const h=new e.TimeExtent,y=new e.TimeExtent({start:void 0,end:void 0});e.TimeExtent$1=e.TimeExtent})},"esri/core/timeUtils":function(){define(["exports","../intl/date","../time/constants","../chunks/datetime"],function(e,t,r,o){"use strict";const s={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function i(e,t,r){return 0===e?0:e*s[t]/s[r]}function n(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}e.convertTime=i,e.isValidDate=function(e){return e instanceof Date&&!isNaN(e.getTime())},e.makeUTCTime=function(e,t,r="milliseconds"){const o=new Date(i(t,r,"milliseconds"));return o.setUTCFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),o},e.mergeTimeExtents=function(e,t){return e&&t?e.intersection(t):e||t},e.millisecondsPerTimeUnit=s,e.offsetDate=function(e,s,i,a=r.system){const l=new o.IANAZone(t.resolveTimeZone(a)),c=o.DateTime.fromJSDate(e,{zone:l}),u="decades"===i||"centuries"===i?"year":n(i);return"decades"===i&&(s*=10),"centuries"===i&&(s*=100),c.plus({[u]:s}).toJSDate()},e.offsetDateUTC=function(e,t,r="milliseconds"){const o=e.getTime(),s=i(t,r,"milliseconds");return new Date(o+s)},e.resetUTCDate=function(e,t){const r=new Date(e.getTime());return r.setUTCFullYear(t.getFullYear(),t.getMonth(),t.getDate()),r},e.timeSinceUTCMidnight=function(e,t="milliseconds"){const r=i(e.getUTCHours(),"hours","milliseconds"),o=i(e.getUTCMinutes(),"minutes","milliseconds"),s=i(e.getUTCSeconds(),"seconds","milliseconds");return i(r+o+s+e.getUTCMilliseconds(),"milliseconds",t)},e.truncateDate=function(e,s,i=r.system){const a=new o.IANAZone(t.resolveTimeZone(i)),l=o.DateTime.fromJSDate(e,{zone:a});if("decades"===s||"centuries"===s){const e=l.startOf("year"),{year:t}=e,r=t-t%("decades"===s?10:100);return e.set({year:r}).toJSDate()}const c=n(s);return l.startOf(c).toJSDate()},e.truncateLocalTime=function(e){const t=new Date(0);return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/TablesMixin":function(){define(["exports","../chunks/tslib.es6","../core/Collection","../core/collectionUtils","../core/Logger","../core/accessorSupport/decorators/property","../core/has","../core/RandomLCG","../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";const c=new Set(["feature","subtype-group"]);function u(e,t,r){if(e)for(let o=0,s=e.length;o<s;o++){const s=e.at(o);if(s[t]===r)return s;if("group"===s?.type){const e=u(s.tables,t,r);if(e)return e}}}e.TablesMixin=e=>{const n=e;let a=class extends n{constructor(...e){super(...e),this.tables=new r,this.addHandles([this.tables.on("after-add",e=>{const t=e.item;t.parent&&t.parent!==this&&"tables"in t.parent&&t.parent.tables.remove(t),t.parent=this,c.has(t.type)||s.getLogger(this).error(`Layer 'title:${t.title}, id:${t.id}' of type '${t.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",e=>{e.item.parent=null})])}destroy(){const e=this.tables.toArray();for(const t of e)t.destroy();this.tables.destroy()}set tables(e){this._set("tables",o.referenceSetter(e,this._get("tables")))}findTableById(e){return u(this.tables,"id",e)}findTableByUid(e){return u(this.tables,"uid",e)}};return t.__decorate([i.property()],a.prototype,"tables",null),a=t.__decorate([l.subclass("esri.support.TablesMixin")],a),a},e.allowedTableTypes=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry":function(){define(["exports","./core/deprecate","./core/Logger","./geometry/Extent","./geometry/Multipoint","./geometry/Point","./geometry/Polygon","./geometry/Polyline","./geometry/SpatialReference"],function(e,t,r,o,s,i,n,a,l){"use strict";const c=l,u=o,p=s,d=i,h=n,y=a;t.deprecatedModule(r.getLogger("esri.geometry"),"esri.geometry",{replacement:"Individual geometry module imports",version:"4.32",warnOnce:!0}),e.Extent=u,e.Multipoint=p,e.Point=d,e.Polygon=h,e.Polyline=y,e.SpatialReference=c,e.__exported__=function(){},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/Viewpoint":function(){define(["./chunks/tslib.es6","./Camera","./core/JSONSupport","./core/accessorSupport/decorators/property","./core/accessorSupport/decorators/cast","./core/has","./core/RandomLCG","./core/accessorSupport/decorators/subclass","./geometry/support/jsonUtils","./geometry/support/typeUtils"],function(e,t,r,o,s,i,n,a,l,c){"use strict";var u;let p=u=class extends r.JSONSupport{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new u({rotation:this.rotation,scale:this.scale,targetGeometry:null!=this.targetGeometry?this.targetGeometry.clone():null,camera:null!=this.camera?this.camera.clone():null})}};function d(){return{enabled:!this.camera}}return e.__decorate([o.property({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:d}}}}})],p.prototype,"rotation",void 0),e.__decorate([s.cast("rotation")],p.prototype,"castRotation",null),e.__decorate([o.property({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:d}}}}})],p.prototype,"scale",void 0),e.__decorate([o.property({types:c.geometryTypes,json:{read:l.fromJSON,write:!0,origins:{"web-scene":{read:l.fromJSON,write:{overridePolicy:d}}}}})],p.prototype,"targetGeometry",void 0),e.__decorate([o.property({type:t,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],p.prototype,"camera",void 0),p=u=e.__decorate([a.subclass("esri.Viewpoint")],p),p})},"esri/Camera":function(){define(["./chunks/tslib.es6","./CameraLayout","./core/Clonable","./core/Cyclical","./core/JSONSupport","./core/mathUtils","./core/accessorSupport/decorators/property","./core/accessorSupport/decorators/cast","./core/has","./core/RandomLCG","./core/accessorSupport/decorators/reader","./core/accessorSupport/decorators/subclass","./core/accessorSupport/decorators/writer","./core/accessorSupport/ensureType","./geometry/Point"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y){"use strict";let f=class extends(r.ClonableMixin(s.JSONSupport)){constructor(...e){super(...e),this.position=new y([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new t}normalizeCtorArgs(e,t,r,o){if(e&&"object"==typeof e&&("x"in e||Array.isArray(e))){const s={position:e};return null!=t&&(s.heading=t),null!=r&&(s.tilt=r),null!=o&&(s.fov=o),s}return e}writePosition(e,t,r,o){const s=e.clone();s.x=h.ensureNumber(e.x||0),s.y=h.ensureNumber(e.y||0),s.z=e.hasZ?h.ensureNumber(e.z||0):e.z,t[r]=s.write({},o)}readPosition(e,t){const r=new y;return r.read(e,t),r.x=h.ensureNumber(r.x||0),r.y=h.ensureNumber(r.y||0),r.z=r.hasZ?h.ensureNumber(r.z||0):r.z,r}equals(e){return null!=e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};return e.__decorate([n.property({type:y,json:{write:{isRequired:!0}}})],f.prototype,"position",void 0),e.__decorate([d.writer("position")],f.prototype,"writePosition",null),e.__decorate([u.reader("position")],f.prototype,"readPosition",null),e.__decorate([n.property({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),a.cast(e=>o.cyclicalDegrees.normalize(h.ensureNumber(e)))],f.prototype,"heading",void 0),e.__decorate([n.property({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),a.cast(e=>i.clamp(h.ensureNumber(e),-180,180))],f.prototype,"tilt",void 0),e.__decorate([n.property({type:Number,nonNullable:!0,json:{default:55,write:!0}}),a.cast(e=>i.clamp(h.ensureNumber(e,55),1,170))],f.prototype,"fov",void 0),e.__decorate([n.property({type:t,nonNullable:!0,json:{read:!1,write:!1}})],f.prototype,"layout",void 0),f=e.__decorate([p.subclass("esri.Camera")],f),f})},"esri/CameraLayout":function(){define(["./chunks/tslib.es6","./core/Clonable","./core/accessorSupport/decorators/property","./core/has","./core/Logger","./core/RandomLCG","./core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n){"use strict";let a=class extends t.Clonable{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return null!=e&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};return e.__decorate([r.property({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],a.prototype,"row",void 0),e.__decorate([r.property({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],a.prototype,"column",void 0),e.__decorate([r.property({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],a.prototype,"rows",void 0),e.__decorate([r.property({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],a.prototype,"columns",void 0),a=e.__decorate([n.subclass("esri.CameraLayout")],a),a})},"esri/core/Cyclical":function(){define(["exports","./mathUtils"],function(e,t){"use strict";class r{constructor(e,t){this.min=e,this.max=t,this.range=t-e}normalize(e,t=0,r=!1){return o(this.range,this.min,this.max,e,t,r)}clamp(e,r=0){return t.clamp(e-r,this.min,this.max)+r}monotonic(e,t,r){return e<t?t:t+s(this.range,e-t,r)}minimalMonotonic(e,t,r){return o(this.range,e,e+this.range,t,r)}center(e,t,r){return t=this.monotonic(e,t,r),this.normalize((e+t)/2,r)}diff(e,t,r){return this.monotonic(e,t,r)-e}shortestSignedDiff(e,t){e=this.normalize(e);const r=(t=this.normalize(t))-e,o=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(r)<Math.abs(o)?r:o}contains(e,t,r){return t=this.minimalMonotonic(e,t),(r=this.minimalMonotonic(e,r))>e&&r<t}}function o(e,t,r,o,i=0,n=!1){return(o-=i)<t?o+=s(e,t-o):o>r&&(o-=s(e,o-r)),n&&o===r&&(o=t),o+i}function s(e,t,r=0){return Math.ceil((t-r)/e)*e+r}const i=new r(0,2*Math.PI),n=new r(-Math.PI,Math.PI),a=new r(0,360);e.Cyclical=r,e.cyclical2PI=i,e.cyclicalDegrees=a,e.cyclicalPI=n,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/jsonUtils":function(){define(["exports","../Extent","../Geometry","../Multipoint","../Point","../Polygon","../Polyline"],function(e,t,r,o,s,i,n){"use strict";function a(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}function l(e){return void 0!==e.points}function c(e){return void 0!==e.x&&void 0!==e.y}function u(e){return void 0!==e.paths||void 0!==e.curvePaths}function p(e){return void 0!==e.rings||void 0!==e.curveRings}const d={esriGeometryPoint:s,esriGeometryPolyline:n,esriGeometryPolygon:i,esriGeometryEnvelope:t,esriGeometryMultipoint:o,esriGeometryMultiPatch:i};e.fromJSON=function(e){return null==e?null:e instanceof r?e:c(e)?s.fromJSON(e):u(e)?n.fromJSON(e):p(e)?i.fromJSON(e):l(e)?o.fromJSON(e):a(e)?t.fromJSON(e):null},e.getGeometryType=function(e){return e&&d[e]||null},e.getJsonType=function(e){return e?c(e)?"esriGeometryPoint":u(e)?"esriGeometryPolyline":p(e)?"esriGeometryPolygon":a(e)?"esriGeometryEnvelope":l(e)?"esriGeometryMultipoint":null:null},e.isExtent=a,e.isMultipoint=l,e.isPoint=c,e.isPolygon=p,e.isPolyline=u,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/typeUtils":function(){define(["exports","../../core/jsonMap","../Extent","../Geometry","../Multipoint","../Point","../Polygon","../Polyline"],function(e,t,r,o,s,i,n,a){"use strict";const l=t.strict()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),c=t.strict()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),u={base:o,key:"type",typeMap:{extent:r,multipoint:s,point:i,polyline:a,polygon:n}};e.featureGeometryTypeKebabDictionary=l,e.geometryTypes=u,e.isMultipoint=function(e){return"multipoint"===e.type},e.isPoint=function(e){return"point"===e.type},e.isPolygon=function(e){return"polygon"===e.type},e.isPolyline=function(e){return"polyline"===e.type},e.typeKebabDictionary=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/mixins/OperationalLayer":function(){define(["exports","../../chunks/tslib.es6","../../core/Error","../../core/urlUtils","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","../../core/accessorSupport/layerContainerType","../../core/accessorSupport/read","../../core/accessorSupport/write","./operationalLayers","../support/commonProperties","../../chunks/TimeExtent"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m){"use strict";e.OperationalLayer=e=>{const n=e;let a=class extends n{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(e,t,r){return"Group Layer"===r?.portalItem?.type?void 0:e}writeListMode(e,t,r,o){(o&&"ground"===o.layerContainerType||e&&h.willPropertyWrite(this,r,{},o))&&(t[r]=e)}writeOperationalLayerType(e,t,r){e&&(t[r]=e)}writeTitle(e,t){t.title=e??"Layer"}readVisibilityTimeExtent(e){return e?m.TimeExtent.fromArray(e):null}writeVisibilityTimeExtent(e,t,o,s){e&&"tables"!==s.layerContainerType&&(e.isEmpty?s?.messages&&s.messages.push(new r("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):t[o]=e.toArray())}read(e,t){t&&(t.layer=this),d.readLoadable(this,e,t=>super.read(e,t),t)}write(e,t){if(!this.persistenceEnabled&&!t?.ignorePersistenceEnabled)return null;if(t?.origin){const e=`${t.origin}/${t.layerContainerType||"operational-layers"}`,o=y.supportedTypes[e];let s=!!o?.[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===e&&(s=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===e&&(s=!1),!s)return t.messages?.push(new r("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}const s=super.write(e,{...t,layer:this}),i=!!t&&!!t.messages&&!!t.messages.filter(e=>e instanceof r&&"web-document-write:property-required"===e.name).length;return o.isBlobProtocol(s?.url)?(t?.messages?.push(new r("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&i?null:s}beforeSave(){}};return t.__decorate([s.property({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],a.prototype,"id",void 0),t.__decorate([l.reader("id",["id"])],a.prototype,"readId",null),t.__decorate([s.property(f.listMode)],a.prototype,"listMode",void 0),t.__decorate([u.writer("listMode")],a.prototype,"writeListMode",null),t.__decorate([s.property({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:p.excludeTables,isRequired:!0}}}}})],a.prototype,"operationalLayerType",void 0),t.__decorate([u.writer("operationalLayerType")],a.prototype,"writeOperationalLayerType",null),t.__decorate([s.property(f.opacity)],a.prototype,"opacity",void 0),t.__decorate([s.property({type:Boolean,readOnly:!1})],a.prototype,"persistenceEnabled",void 0),t.__decorate([s.property({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],a.prototype,"title",void 0),t.__decorate([u.writer("title"),u.writer(["web-scene"],"title")],a.prototype,"writeTitle",null),t.__decorate([s.property({type:m.TimeExtent,json:{origins:{"web-scene":{write:{layerContainerTypes:p.excludeTables}}}}})],a.prototype,"visibilityTimeExtent",void 0),t.__decorate([l.reader("visibilityTimeExtent")],a.prototype,"readVisibilityTimeExtent",null),t.__decorate([u.writer(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[i.Integer,i.Null]]}})],a.prototype,"writeVisibilityTimeExtent",null),t.__decorate([s.property({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:p.excludeTables}}})],a.prototype,"visible",void 0),a=t.__decorate([c.subclass("esri.layers.mixins.OperationalLayer")],a),a},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/layerContainerType":function(){define(["exports"],function(e){"use strict";e.excludeTables=["operational-layers","basemap","ground"],Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/mixins/operationalLayers":function(){define(["exports"],function(e){"use strict";const t={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},r={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},o={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},s={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":t,"web-map/basemap":r,"web-map/tables":o,"link-chart/operational-layers":{...t,LinkChartLayer:!0},"link-chart/basemap":r,"link-chart/tables":o,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}};e.supportedTypes=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/commonProperties":function(){define(["exports","../../core/accessorSupport/layerContainerType","../../geometry/Extent","../../geometry/SpatialReference","../../chunks/persistableUrlUtils","../../symbols/support/ElevationInfo","../../tables/AttributeTableTemplate","../../webdoc/support/opacityUtils"],function(e,t,r,o,s,i,n,a){"use strict";const l={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:t.excludeTables}}},c={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},u={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:t.excludeTables}}},p={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:s.write}}},d={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:t.excludeTables}}},h={value:null,type:i,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:t.excludeTables}}},y={write:{enabled:!0,layerContainerTypes:t.excludeTables},read:!0},f={type:Number,json:{origins:{"web-document":y,"portal-item":{write:{layerContainerTypes:t.excludeTables}}}}},m={...f,json:{...f.json,origins:{"web-document":{...y,write:{enabled:!0,layerContainerTypes:t.excludeTables,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>r&&"service"!==r.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition?.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?a.transparencyToOpacity(t.layerDefinition.drawingInfo.transparency):void 0:a.transparencyToOpacity(t.drawingInfo.transparency)}}},g={type:r,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const s=r.fromJSON(e);return null!=t.spatialReference&&"object"==typeof t.spatialReference&&(s.spatialReference=o.fromJSON(t.spatialReference)),s}}}},read:!1}},b={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},_={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:t.excludeTables}}},S={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:t.excludeTables}}},v={json:{write:{ignoreOrigin:!0,layerContainerTypes:t.excludeTables},origins:{"web-map":{read:!1,write:!1}}}},w={type:n,json:{name:"attributeTableInfo",write:!0}};e.attributeTableTemplate=w,e.elevationInfo=h,e.id=b,e.labelsVisible=u,e.legendEnabled=d,e.listMode=v,e.maxScale=S,e.minScale=_,e.opacity=f,e.opacityDrawingInfo=m,e.popupEnabled=c,e.readOnlyService=function(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}},e.sceneLayerFullExtent=g,e.screenSizePerspectiveEnabled=l,e.url=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/ElevationInfo":function(){define(["exports","../../chunks/tslib.es6","../../core/Clonable","../../core/jsonMap","../../core/JSONSupport","../../core/maybe","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","./FeatureExpressionInfo","./unitConversionUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y){"use strict";const f=o.strict()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),m=new o.JSONMap({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});return e.default=class extends(r.ClonableMixin(s.JSONSupport)){constructor(e){super(e),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(e,t){return null!=e?e.expression?e:void 0:t.featureExpression&&0===t.featureExpression.value?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,r,o){t[r]=e.write({},o),"0"===e.expression&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):null!=e||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&i.equalsMaybe(this.featureExpressionInfo,e.featureExpressionInfo)}},t.__decorate([n.property({type:h,json:{write:!0}})],e.default.prototype,"featureExpressionInfo",void 0),t.__decorate([u.reader("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],e.default.prototype,"readFeatureExpressionInfo",null),t.__decorate([d.writer("featureExpressionInfo",{featureExpressionInfo:{type:h},"featureExpression.value":{type:[0]}})],e.default.prototype,"writeFeatureExpressionInfo",null),t.__decorate([n.property({type:f.apiValues,nonNullable:!0,json:{type:f.jsonValues,read:f.read,write:{writer:f.write,isRequired:!0}}})],e.default.prototype,"mode",null),t.__decorate([n.property({type:Number,json:{write:!0}})],e.default.prototype,"offset",void 0),t.__decorate([n.property({type:y.supportedUnits,json:{type:String,read:m.read,write:m.write}})],e.default.prototype,"unit",null),e.default=t.__decorate([p.subclass("esri.symbols.support.ElevationInfo")],e.default),e.default})},"esri/symbols/support/FeatureExpressionInfo":function(){define(["../../chunks/tslib.es6","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../layers/support/fieldUtils"],function(e,t,r,o,s,i,n,a){"use strict";var l;let c=l=class extends t.JSONSupport{constructor(e){super(e),this.expression=void 0,this.title=void 0}async collectRequiredFields(e,t){return a.collectArcadeFieldNames(e,t,this.expression)}clone(){return new l({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};return e.__decorate([r.property({type:String,json:{write:{isRequired:!0}}})],c.prototype,"expression",void 0),e.__decorate([r.property({type:String,json:{write:!0}})],c.prototype,"title",void 0),c=l=e.__decorate([n.subclass("esri.symbols.support.FeatureExpressionInfo")],c),c})},"esri/layers/support/fieldUtils":function(){define(["exports","../../core/Error","../../core/object","../../core/SetUtils","../../core/sql","./domainUtils","../../support/arcadeExpressionUtils","../../support/guards","../../support/loadArcade"],function(e,t,r,o,s,i,n,a,l){"use strict";const c=/^([0-9_])/,u=/[^a-z0-9_\u0080-\uffff]+/gi,p=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],d=["field","normalizationField"];function h(e,t,o){if(e)for(const s of e){const e=r.getDeepValue(s,t),i=e&&"function"!=typeof e&&o.get(e);i&&r.setDeepValue(s,i.name,t)}}const y=new Set;function f(e,t){return e&&t?(y.clear(),m(y,e,t),Array.from(y).sort()):[]}function m(e,t,r){if(r)if(t?.fields?.length)if(r.includes("*"))for(const{name:r}of t.fields)e.add(r);else for(const o of r)g(e,t,o);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const t of r)null!=t&&e.add(t)}}function g(e,t,r){if("string"==typeof r)if(t){const o=t.get(r);o&&e.add(o.name)}else e.add(r)}async function b(e,t,r){if(!r)return;let o;const s=n.getFieldNameFromSimpleExpression(r);if(s)o=[s];else{const{arcadeUtils:e}=await l.loadArcade();o=e.extractFieldNames(r,t?.fields?.map(e=>e.name))}for(const r of o)g(e,t,r)}async function _(e,r,o){if(o&&"1=1"!==o){const i=await s.parseWhereClause(o,r);if(!i.isStandardized)throw new t("fieldUtils:collectFilterFields","Where clause is not standardized",{where:o});m(e,r,i.fieldNames)}}function S(e,t){for(const r of e)if(r?.valueType&&r.valueType===t)return r.name;return null}async function v(e,t){if(!t)return;const r=t.elevationInfo?.featureExpressionInfo;return r?r.collectRequiredFields(e,t.fieldsIndex):void 0}async function w(e,t,r){const o=[];r?.expressionInfos&&o.push(...r.expressionInfos.map(r=>b(e,t.fieldsIndex,r.expression)));const s=r?.content;if(Array.isArray(s))for(const r of s)"expression"===r.type&&r.expressionInfo&&o.push(b(e,t.fieldsIndex,r.expressionInfo.expression));await Promise.all(o)}function x(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?f(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}const T=new Set(["oid","global-id","guid"]),M=new Set(["oid","global-id"]),I=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function O(e){const t=new Set;k(e).forEach(e=>t.add(e)),x(e).forEach(e=>t.add(e.toLowerCase()));const r=e&&"infoFor3D"in e?e.infoFor3D:void 0;return r&&(Object.values(r.assetMapFieldRoles).forEach(e=>t.add(e.toLowerCase())),Object.values(r.transformFieldRoles).forEach(e=>t.add(e.toLowerCase()))),Array.from(t)}function P(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:r,creatorField:o,editDateField:s,editorField:i}=t;return[r,o,s,i].filter(Boolean)}function k(e){return P(e).map(e=>e.toLowerCase())}async function C(e,t){const{labelingInfo:r,fieldsIndex:o}=t;r?.length&&await Promise.all(r.map(t=>L(e,o,t)))}async function L(e,t,r){if(!r)return;const o=r.getLabelExpression(),s=r.where;if("arcade"===o.type)await b(e,t,o.expression);else{const r=o.expression.match(/{[^}]*}/g);r&&r.forEach(r=>{g(e,t,r.slice(1,-1))})}await _(e,t,s)}function E(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function A(e){return null===e||E(e)}function F(e){return null===e||Number.isInteger(e)}function R(){return!0}function j(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":r=e.nullable?F:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?A:E;break;case"string":case"esriFieldTypeString":r=e.nullable?a.isStringOrNull:a.isString;break;default:r=R}return 1===arguments.length?r:r(t)}const N=["integer","small-integer","big-integer","long"],D=["single","double"],U=[...N,...D],V=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],q=["esriFieldTypeSingle","esriFieldTypeDouble"],z=new Set([...N,...V]),G=new Set([...D,...q]),B=o.union(z,G);function $(e){return null!=e&&B.has(e.type)}function J(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function W(e,t){return null==e||e.nullable&&null===t?null:j(e,t)?$(e)&&!H(e.type,Number(t))?"numeric-range-validation-error::out-of-range":null:"type-validation-error::invalid-type"}function H(e,t){const r="string"==typeof e?Z(e):e;if(!r)return!1;const o=r.min,s=r.max;return r.isInteger?Number.isInteger(t)&&t>=o&&t<=s:t>=o&&t<=s}function Z(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return Q;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return K;case"esriFieldTypeBigInteger":case"big-integer":return Y;case"esriFieldTypeSingle":case"single":return X;case"esriFieldTypeDouble":case"double":return ee}}const Q={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},K={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},Y={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},X={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},ee={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function te(e,t,r){if(!e?.attributes||!t){if(null!=r)for(const e of t??[])r.add(e);return!0}const o=new Set(Object.keys(e.attributes));let s=!1;for(const e of t)if(!o.has(e)){if(s=!0,null==r)break;r.add(e)}return s}e.bigIntegerRange=Y,e.collectArcadeFieldNames=b,e.collectDisplayFilterFields=async function(e,t,r){if(!t||!r)return;const o=t.fieldsIndex;await Promise.all(r.filters.map(t=>_(e,o,t.where)))},e.collectElevationFields=v,e.collectFeatureReductionFields=async function(e,t,r){if(!t||!r||!("fields"in r))return;const o=[],s=r.popupTemplate;o.push(w(e,t,s)),r.fields&&o.push(...r.fields.map(async r=>function(e,t,r){r.onStatisticExpression?b(e,t,r.onStatisticExpression.expression):e.add(r.onStatisticField)}(e,t.fieldsIndex,r))),await Promise.all(o)},e.collectField=g,e.collectFields=m,e.collectFilterFields=async function(e,t,r){t&&(t.timeInfo&&r?.timeExtent&&m(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&m(e,t.fieldsIndex,[t.floorInfo.floorField]),null!=r?.where&&await _(e,t.fieldsIndex,r.where))},e.collectLabelingFields=C,e.collectOrderByInfos=async function(e,t,r){t&&r&&await Promise.all(r.map(r=>async function(e,t,r){t&&r&&(r.valueExpression?await b(e,t.fieldsIndex,r.valueExpression):r.field&&g(e,t.fieldsIndex,r.field))}(e,t,r)))},e.collectPopupTemplateFields=w,e.collectSQLFieldNames=_,e.collectTrackInfoFields=async function(e,t){const{fieldsIndex:r,trackInfo:o}=t;if(!t||!o||!r)return;const s=[o.latestObservations.renderer?.collectRequiredFields(e,r),o.previousObservations.renderer?.collectRequiredFields(e,r),o.trackLines.renderer?.collectRequiredFields(e,r)];o.popupTemplate&&s.push(w(e,t,o.popupTemplate));for(const t of[o.latestObservations.labelingInfo,o.previousObservations.labelingInfo,o.trackLines.labelingInfo])if(t)for(const o of t)s.push(L(e,r,o));await Promise.all(s)},e.doubleRange=ee,e.extractSubstitutionTemplatesFromString=function(e){const t=e?.match(/{[^}]+}/g);return t?t.map(e=>e.slice(1,-1).split(":")[0].trim()):[]},e.featureHasFields=function(e,t){return!te(e,t,null)},e.fixFields=f,e.fixRendererFields=function(e,t){if(null!=e&&null!=t)for(const r of Array.isArray(e)?e:[e])if(h(p,r,t),"visualVariables"in r&&r.visualVariables)for(const e of r.visualVariables)h(d,e,t)},e.fixTimeInfoFields=function(e,t){if(null!=e&&t?.fields?.length)if("startField"in e){const r=t.get(e.startField),o=t.get(e.endField);e.startField=r?.name??null,e.endField=o?.name??null}else{const r=t.get(e.startTimeField),o=t.get(e.endTimeField);e.startTimeField=r?.name??null,e.endTimeField=o?.name??null}},e.floatJSONTypes=q,e.floatTypes=D,e.getDisplayFieldName=function({displayField:e,fields:t}){return e||(t?.length?S(t,"name-or-title")||S(t,"unique-identifier")||S(t,"type-or-category")||function(e){for(const t of e){if(!t?.name)continue;const e=t.name.toLowerCase();if(e.includes("name")||e.includes("title"))return t.name}return null}(t):null)},e.getEditTrackingFields=P,e.getElevationFields=async function(e){if(!e)return[];const t=new Set;return await v(t,e),Array.from(t).sort()},e.getExpressionFields=async function(e,t){const r=new Set;for(const o of t)await b(r,e.fieldsIndex,o);return Array.from(r).sort()},e.getFeatureEditFields=function(e){return e?f(e.fieldsIndex,P(e)):[]},e.getFeatureGeometryFields=x,e.getFieldDefaultLength=function(e){const t="string"==typeof e?{type:e}:e;return J(t)?255:"esriFieldTypeDate"===t.type||"date"===t.type?8:void 0},e.getFieldDefaultValue=function(e){const t=e.defaultValue;return void 0!==t&&j(e,t)?t:e.nullable?null:void 0},e.getFieldRange=function(e,t){return i.getDomainRange(e,t)||($(e)?Z(e.type):void 0)},e.getLabelingFields=async function(e){if(!e)return[];const t=new Set;return await C(t,e),Array.from(t).sort()},e.getLowerCaseDefaultHiddenFields=O,e.getLowerCaseEditTrackingFields=k,e.getNumericTypeForValue=function(e){if(!E(e))return null;if(Number.isInteger(e)){if(e>=Q.min&&e<=Q.max)return"esriFieldTypeSmallInteger";if(e>=K.min&&e<=K.max)return"esriFieldTypeInteger";if(e>=Y.min&&e<=Y.max)return"esriFieldTypeBigInteger"}return e>=X.min&&e<=X.max?"esriFieldTypeSingle":"esriFieldTypeDouble"},e.getRendererFields=async function(e,t){const r=new Set;return e?.collectRequiredFields&&await e.collectRequiredFields(r,t),Array.from(r).sort()},e.getTimeFields=async function(e){if(!e)return[];const t="timeInfo"in e&&e.timeInfo;return t?f(e.fieldsIndex,[e.trackIdField,t.startField,t.endField]):[]},e.integerJSONTypes=V,e.integerRange=K,e.integerTypes=N,e.isDateField=function(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)},e.isDateOnlyField=function(e){return null!=e&&("date-only"===e.type||"esriFieldTypeDateOnly"===e.type)},e.isFieldEditable=function(e,t){return e.editable&&!T.has(e.type)&&!k(t).includes(e.name?.toLowerCase()??"")},e.isFieldVisibleByDefault=function(e,t){const r=e.name?.toLowerCase()??"";return!(null!=t?.objectIdField&&r===t.objectIdField.toLowerCase()||null!=t?.globalIdField&&r===t.globalIdField.toLowerCase()||O(t).includes(r)||M.has(e.type)||I.some(e=>e.test(r)))},e.isGlobalIDField=function(e){return null!=e&&("global-id"===e.type||"esriFieldTypeGlobalID"===e.type)},e.isIntegerField=function(e){return null!=e&&z.has(e.type)},e.isNumberInRange=H,e.isNumericField=$,e.isObjectIDField=function(e){return null!=e&&("oid"===e.type||"esriFieldTypeOID"===e.type)},e.isRasterPixelValueField=function(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))},e.isStringField=J,e.isTimeOnlyField=function(e){return null!=e&&("time-only"===e.type||"esriFieldTypeTimeOnly"===e.type)},e.isTimestampOffsetField=function(e){return null!=e&&("timestamp-offset"===e.type||"esriFieldTypeTimestampOffset"===e.type)},e.isValidFieldValue=function(e,t){return null===W(e,t)},e.isValueMatchingFieldType=j,e.normalizeFieldName=function(e){return null==e?null:e.trim().replaceAll(u,"_").replace(c,"F$1")||null},e.numericTypes=U,e.packFields=function(e,t,r=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const o=f(e,t);return o.length/e.fields.length>=r?["*"]:o},e.populateMissingFields=te,e.rendererFields=p,e.sanitizeNullFieldValue=function(e){return null==e||"number"==typeof e&&isNaN(e)?null:e},e.singleRange=X,e.smallIntegerRange=Q,e.unpackFieldNames=function(e,t){return null==t||null==e?[]:t.includes("*")?(e.fields??[]).map(e=>e.name):t},e.validateFieldValue=W,e.validationErrorToString=function(e,t,r){switch(e){case"domain-validation-error::invalid-coded-value":return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case"domain-validation-error::value-out-of-range":return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case"type-validation-error::invalid-type":return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case"numeric-range-validation-error::out-of-range":{const{min:e,max:o}=Z(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${e} to ${o}`}}},e.visualVariableFields=d,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql":function(){define(["require","exports"],function(e,t){"use strict";let r;async function o(){return null==r&&(r=new Promise((t,r)=>e(["./sql/WhereClauseCache"],t,r)).then(e=>new e.WhereClauseCache(500,500))),r}t.cleanupWhereClauseCache=function(){r=null},t.parseWhereClause=async function(e,t){const r=await o(),s=r.get(e,t);if(null==s)throw r.getError(e,t);return s},t.sqlAnd=function(e,t){return e||=null,t||=null,"1=1"===e?t??e:"1=1"===t?e??t:e&&t?`(${e}) AND (${t})`:e??t},t.sqlIn=function(e,t){return 0===t.length?null:`${e} IN (${function(e){return e.map(e=>"string"==typeof e?function(e){return`'${e.replaceAll("'","''")}'`}(e):e).join(",")}(t)})`},t.sqlOr=function(e,t){return e||=null,t||=null,"1=1"===e||"1=1"===t||e===t?"1=1"===e?e:t:e&&t?`(${e}) OR (${t})`:e??t},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/domainUtils":function(){define(["exports","../../core/SetUtils","../../support/dateUtils"],function(e,t,r){"use strict";const o=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function s(e){return null!=e&&("date-only"===e.type||"esriFieldTypeDateOnly"===e.type)}function i(e){return null!=e&&("timestamp-offset"===e.type||"esriFieldTypeTimestampOffset"===e.type)}function n(e){return null!=e&&("time-only"===e.type||"esriFieldTypeTimeOnly"===e.type)}const a=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]),l=t.union(o,a);function c(e,t){const r=t??e?.domain;if(!r||"range"!==r.type)return;const a="range"in r?r.range[0]:r.minValue,l="range"in r?r.range[1]:r.maxValue,c=function(e){return null!=e&&o.has(e.type)}(e);return s(e)||n(e)||i(e)?{...u(e,l,a),isInteger:c}:{min:null!=a&&"number"==typeof a?a:null,max:null!=l&&"number"==typeof l?l:null,rawMin:a,rawMax:l,isInteger:c}}function u(e,t,o){return s(e)?{min:r.dateOnlyToDateTime(o)?.toMillis(),max:r.dateOnlyToDateTime(t)?.toMillis(),rawMin:o,rawMax:t}:n(e)?{min:r.timeOnlyToDateTime(o)?.toMillis(),max:r.timeOnlyToDateTime(t)?.toMillis(),rawMin:o,rawMax:t}:i(e)?{min:r.timestampOffsetToDateTime(o)?.toMillis(),max:r.timestampOffsetToDateTime(t)?.toMillis(),rawMin:o,rawMax:t}:{max:null,min:null}}e.dateTimeFieldValuesToNumericRange=u,e.getDomainRange=c,e.isDomainValidForField=function(e,t){switch(t.type){case"range":{const{min:r,max:o}=c(e,t);return s(e)||n(e)||i(e)?!!r&&!!o:"number"==typeof r&&Number.isFinite(r)&&"number"==typeof o&&Number.isFinite(o)}case"codedValue":case"coded-value":{const r=typeof t.codedValues[0].code;if("string"===r&&function(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}(e)||"number"===r&&function(e){return null!=e&&l.has(e.type)}(e))return!0}}return!1},e.validateDomainValue=function(e,t,r){const o=r??e?.domain;if(!o)return null;switch(o.type){case"range":{const{min:r,max:s}=c(e,o);if(null!=r&&+t<r||null!=s&&+t>s)return"domain-validation-error::value-out-of-range";break}case"coded-value":case"codedValue":if(null==o.codedValues||o.codedValues.every(e=>null==e||e.code!==t))return"domain-validation-error::invalid-coded-value"}return null},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/dateUtils":function(){define(["exports","../core/maybe","./guards","../chunks/datetime"],function(e,t,r,o){"use strict";const s="HH:mm",i="HH:mm:ss",n="HH:mm:ss.SSS",a={HM:s,HMS:i,HMS_MS:n},l=[n,i,s,"TT"],c="yyyy-MM-dd",u=i;e.TimeStampOffsetPattern=a,e.dateOnlyToDateTime=function(e){if(!e||!r.isString(e))return null;const t=o.DateTime.fromFormat(e,c);return t.isValid?t:null},e.defaultDatePattern=c,e.defaultTimePattern=u,e.timeOnlyToDateTime=function(e){return e&&r.isString(e)?t.mappedFind(l,t=>{const r=o.DateTime.fromFormat(e,t);return r.isValid?r:null})??null:null},e.timestampOffsetToDateTime=function(e){if(!e||!r.isString(e))return null;const t=o.DateTime.fromISO(e);return t.isValid?t:null},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/guards":function(){define(["exports"],function(e){"use strict";function t(e){return"string"==typeof e||e instanceof String}e.isArray=function(e){return Array.isArray(e)},e.isBoolean=function(e){return"boolean"==typeof e},e.isDate=function(e){return e instanceof Date},e.isGraphic=function(e){return"esri.Graphic"===e?.declaredClass},e.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},e.isNumber=function(e){return"number"==typeof e},e.isQuery=function(e){return"esri.rest.support.Query"===e?.declaredClass},e.isString=t,e.isStringOrNull=function(e){return null==e||t(e)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/arcadeExpressionUtils":function(){define(["exports"],function(e){"use strict";const t=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-z_][a-z0-9_]*))$/i,r=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;e.getFieldNameFromSimpleExpression=function(e){if(!e)return;const r=e.match(t);return r?.groups?r.groups.doubleQuoted??r.groups.singleQuoted??r.groups.dotNotation:void 0},e.matchRandomRotationExpression=function(e){return e.match(r)?.[1]?.replace(/\\'/g,"'")??null},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/loadArcade":function(){define(["require","exports"],function(e,t){"use strict";let r;t.loadArcade=function(){return r||(r=(async()=>{const[t,r,o]=await Promise.all([new Promise((t,r)=>e(["./arcadeUtils"],t,r)),new Promise((t,r)=>e(["../arcade/batchExec"],t,r)),new Promise((t,r)=>e(["../arcade/functions/aiServices"],t,r))]);return{arcade:t.arcade,arcadeUtils:t,batchExec:r,aiServices:o,Dictionary:t.Dictionary,Feature:t.arcadeFeature,Voxel:t.Voxel}})()),r},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/unitConversionUtils":function(){define(["exports","../../core/arrayUtils","../../renderers/support/lengthUtils"],function(e,t,r){"use strict";const o=function(){const e=Object.keys(r.meterIn);return t.remove(e,"decimal-degrees"),e.sort(),e}();e.getMetersPerUnit=function(e){return 1/(r.meterIn[e]||1)},e.supportedUnits=o,e.supportsUnit=function(e){return!!e&&null!=r.meterIn[e]},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/lengthUtils":function(){define(["exports","../../core/unitUtils","../../geometry/support/Ellipsoid"],function(e,t,r){"use strict";const o={unknown:1,inches:t.convertUnit(1,"meters","inches"),feet:t.convertUnit(1,"meters","feet"),"us-feet":t.convertUnit(1,"meters","us-feet"),yards:t.convertUnit(1,"meters","yards"),miles:t.convertUnit(1,"meters","miles"),"nautical-miles":t.convertUnit(1,"meters","nautical-miles"),millimeters:t.convertUnit(1,"meters","millimeters"),centimeters:t.convertUnit(1,"meters","centimeters"),decimeters:t.convertUnit(1,"meters","decimeters"),meters:t.convertUnit(1,"meters","meters"),kilometers:t.convertUnit(1,"meters","kilometers"),"decimal-degrees":1/t.lengthToDegrees(1,"meters",r.earth.radius)};e.meterIn=o,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/tables/AttributeTableTemplate":function(){define(["../chunks/tslib.es6","../core/JSONSupport","../core/lang","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/subclass","./elements/AttributeTableGroupElement","./support/FieldOrder","./support/tablesUtils"],function(e,t,r,o,s,i,n,a,l,c){"use strict";var u;const p=c.buildTypeMaps(a);let d=u=class extends t.JSONSupport{constructor(e){super(e),this.elements=null,this.orderByFields=null}clone(){return new u({elements:r.clone(this.elements),orderByFields:r.clone(this.orderByFields)})}};return e.__decorate([o.property({types:[p.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],d.prototype,"elements",void 0),e.__decorate([o.property({type:[l],json:{write:!0}})],d.prototype,"orderByFields",void 0),d=u=e.__decorate([n.subclass("esri.tables.AttributeTableTemplate")],d),d})},"esri/tables/elements/AttributeTableGroupElement":function(){define(["./AttributeTableAttachmentElement","./AttributeTableFieldElement","../../chunks/tslib.es6","../../core/Clonable","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./AttributeTableElement","../support/tablesUtils","./AttributeTableRelationshipElement"],function(e,t,r,o,s,i,n,a,l,c,u,p){"use strict";let d=class extends(o.ClonableMixin(c)){constructor(e){super(e),this.elements=null,this.type="group"}clone(){return super.clone()}};return r.__decorate([s.property({types:[u.typesWithoutGroup],json:{name:"attributeTableElements",write:!0}})],d.prototype,"elements",void 0),r.__decorate([s.property({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],d.prototype,"type",void 0),d=r.__decorate([l.subclass("esri.tables.elements.AttributeTableGroupElement")],d),d})},"esri/tables/elements/AttributeTableAttachmentElement":function(){define(["../../chunks/tslib.es6","../../core/Clonable","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./AttributeTableElement"],function(e,t,r,o,s,i,n,a){"use strict";let l=class extends(t.ClonableMixin(a)){constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};return e.__decorate([r.property({type:["auto"],json:{write:!0}})],l.prototype,"displayType",void 0),e.__decorate([r.property({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],l.prototype,"type",void 0),l=e.__decorate([n.subclass("esri.tables.elements.AttributeTableAttachmentElement")],l),l})},"esri/tables/elements/AttributeTableElement":function(){define(["../../chunks/tslib.es6","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o){"use strict";let s=class extends t.JSONSupport{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};return e.__decorate([r.property({type:String,json:{write:!0}})],s.prototype,"description",void 0),e.__decorate([r.property({type:String,json:{write:!0}})],s.prototype,"label",void 0),e.__decorate([r.property()],s.prototype,"type",void 0),s=e.__decorate([o.subclass("esri.tables.elements.AttributeTableElement")],s),s})},"esri/tables/elements/AttributeTableFieldElement":function(){define(["../../chunks/tslib.es6","../../core/Clonable","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./AttributeTableElement"],function(e,t,r,o,s,i,n,a){"use strict";let l=class extends(t.ClonableMixin(a)){constructor(e){super(e),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};return e.__decorate([r.property({type:String,json:{read:!1,write:!1}})],l.prototype,"description",void 0),e.__decorate([r.property({type:String,json:{write:{enabled:!0,isRequired:!0}}})],l.prototype,"fieldName",void 0),e.__decorate([r.property({type:String,json:{read:!1,write:!1}})],l.prototype,"label",void 0),e.__decorate([r.property({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],l.prototype,"type",void 0),l=e.__decorate([n.subclass("esri.tables.elements.AttributeTableFieldElement")],l),l})},"esri/tables/support/tablesUtils":function(){define(["exports","../../core/accessorSupport/ensureType","../elements/AttributeTableAttachmentElement","../elements/AttributeTableElement","../elements/AttributeTableFieldElement","../elements/AttributeTableRelationshipElement"],function(e,t,r,o,s,i){"use strict";const n={base:o,key:"type",typeMap:{attachment:r,field:s,relationship:i}};e.buildTypeMaps=function(e){return{typesWithGroup:{base:o,key:"type",typeMap:{attachment:r,field:s,group:e,relationship:i}},typesWithoutGroup:n}},e.ensureType=function(e,r,o=!0){return e?e.map(e=>t.ensureOneOfType(o?r.typesWithGroup:r.typesWithoutGroup,e)):null},e.fromJSON=function(e,t,r=!0){if(!e)return null;const o=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(e=>o[e.type]).map(e=>o[e.type].fromJSON(e))},e.toJSON=function(e,t,r=!0){if(!e)return null;const o=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(e=>o[e.type]).map(e=>e.toJSON())},e.typesWithoutGroup=n,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/tables/elements/AttributeTableRelationshipElement":function(){define(["../../chunks/tslib.es6","../../core/Clonable","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./AttributeTableElement"],function(e,t,r,o,s,i,n,a){"use strict";let l=class extends(t.ClonableMixin(a)){constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};return e.__decorate([r.property({type:Number,json:{type:o.Integer,write:{enabled:!0,isRequired:!0}}})],l.prototype,"relationshipId",void 0),e.__decorate([r.property({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],l.prototype,"type",void 0),l=e.__decorate([n.subclass("esri.tables.elements.AttributeTableRelationshipElement")],l),l})},"esri/tables/support/FieldOrder":function(){define(["../../chunks/tslib.es6","../../core/Clonable","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a){"use strict";let l=class extends(t.ClonableMixin(r.JSONSupport)){constructor(e){super(e),this.field=null,this.order=null}};return e.__decorate([o.property({type:String,json:{write:!0}})],l.prototype,"field",void 0),e.__decorate([o.property({type:["asc","desc"],json:{write:!0}})],l.prototype,"order",void 0),l=e.__decorate([a.subclass("esri.tables.support.FieldOrder")],l),l})},"esri/layers/mixins/PortalLayer":function(){define(["require","exports","../../chunks/tslib.es6","../../config","../../kernel","../../request","../../core/asyncUtils","../../core/Error","../../core/Logger","../../core/maybe","../../core/promiseUtils","../../core/urlUtils","../../core/accessorSupport/decorators/property","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","../support/layerUtils","../../portal/Portal","../../portal/PortalItem","../../portal/PortalUser","../../portal/support/portalItemUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b,_,S,v,w){"use strict";const x={credential:null,user:null};t.PortalLayer=t=>{const h=t;let y=class extends h{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=c.destroyMaybe(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,r){if(t.itemId)return new S({id:t.itemId,portal:r?.portal})}writePortalItem(e,t){e?.id&&(t.itemId=e.id)}async loadFromPortal(t,r){if(this.portalItem?.id)try{const{load:o}=await new Promise((t,r)=>e(["../../portal/support/layersLoader"],t,r));return u.throwIfAborted(r),await o({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData,layerModuleTypeMap:t.layerModuleTypeMap,populateGroupLayer:t.populateGroupLayer},r)}catch(e){throw u.isAbortError(e)||l.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${e}`),e}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch(e=>(u.throwIfAbortError(e),!0)))}async setUserPrivileges(e,t){if(!o.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(t);if(this.url)try{const{features:{edit:r,fullEdit:o},content:{updateItem:s}}=await this._fetchUserPrivileges(e,t);this._set("userHasEditingPrivileges",r),this._set("userHasFullEditingPrivileges",o),this._set("userHasUpdateItemPrivileges",s)}catch(e){u.throwIfAbortError(e)}}async _fetchUserPrivileges(e,t){let r=this.portalItem;if(!e||!r||!r.loaded||r.sourceUrl)return this._fetchFallbackUserPrivileges(t);const o=!s.id?.findCredential(this.url),i=e===r.id;if(i&&r.portal.user)return this._getUserPrivileges(r,o);let n,a;if(i)n=r.portal.url;else try{n=await b.getOwningPortalUrl(this.url,t)}catch(e){u.throwIfAbortError(e)}if(!n||!p.hasSameCanonicalPortal(n,r.portal.url))return this._fetchFallbackUserPrivileges(t);try{const e=null!=t?t.signal:null;a=await(s.id?.getCredential(`${n}/sharing`,{prompt:!1,signal:e}))}catch(e){u.throwIfAbortError(e)}const l=!0,c=!1,d=!1;if(!a)return{features:{edit:l,fullEdit:c},content:{updateItem:d}};try{if(i?await r.reload():(r=new S({id:e,portal:{url:n}}),await r.load(t)),r.portal.user)return this._getUserPrivileges(r,o)}catch(e){u.throwIfAbortError(e)}return{features:{edit:l,fullEdit:c},content:{updateItem:d}}}_getUserPrivileges(e,t){const r=w.getUserPrivileges(e);return t&&(r.features.edit=!0),r}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(e){u.throwIfAbortError(e)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){const t=this.url?s.id?.findCredential(this.url):null;if(!t)return!0;const r=x.credential===t?x.user:await this._fetchEditingUser(e);return x.credential=t,x.user=r,null==r?.privileges||r.privileges.includes("features:user:edit")}async _fetchEditingUser(e){const t=this.portalItem?.portal?.user;if(t)return t;const r=s.id?.findServerInfo(this.url??"");if(!r?.owningSystemUrl)return null;const o=`${r.owningSystemUrl}/sharing/rest`,a=_.getDefault();if(a&&a.loaded&&p.normalize(a.restUrl)===p.normalize(o))return a.user;const l=`${o}/community/self`,c=null!=e?e.signal:null,u=await n.result(i(l,{authMode:"no-prompt",query:{f:"json"},signal:c}));return u.ok?v.fromJSON(u.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const r=t?.portal,o=this.portalItem?.id&&(this.portalItem.portal||_.getDefault());return r&&o&&!p.hasSamePortal(o.restUrl,r.restUrl)?(t.messages&&t.messages.push(new a("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return r.__decorate([d.property({type:S})],y.prototype,"portalItem",null),r.__decorate([f.reader("web-document","portalItem",["itemId"])],y.prototype,"readPortalItem",null),r.__decorate([g.writer("web-document","portalItem",{itemId:{type:String}})],y.prototype,"writePortalItem",null),r.__decorate([d.property({clonable:!1})],y.prototype,"resourceReferences",void 0),r.__decorate([d.property({type:Boolean,readOnly:!0})],y.prototype,"userHasEditingPrivileges",void 0),r.__decorate([d.property({type:Boolean,readOnly:!0})],y.prototype,"userHasFullEditingPrivileges",void 0),r.__decorate([d.property({type:Boolean,readOnly:!0})],y.prototype,"userHasUpdateItemPrivileges",void 0),y=r.__decorate([m.subclass("esri.layers.mixins.PortalLayer")],y),y},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/portal/support/portalItemUtils":function(){define(["exports","../../geometry/projectionUtils","../../geometry/SpatialReference","../../geometry/support/webMercatorUtils"],function(e,t,r,o){"use strict";function s(e,t){if(!i(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function i(e,t){return!!e.typeKeywords?.includes(t)}function n(e,t){const r=e.typeKeywords;if(r){const e=r.indexOf(t);e>-1&&r.splice(e,1)}}const a={CHARTS:"Charts",DYNAMIC:"Dynamic",DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",LOCAL_SCENE:"ViewingMode-Local",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};e.addTypeKeyword=s,e.getUserPrivileges=function(e){const{portal:t,isOrgItem:r,itemControl:o}=e,s=t.user?.privileges;let i=!s||s.includes("features:user:edit"),n=!!r&&!!s?.includes("features:user:fullEdit");const a="update"===o||"admin"===o;return a?n=i=!0:n&&(i=!0),{features:{edit:i,fullEdit:n},content:{updateItem:a}}},e.getWGS84ExtentForItem=async function(e){const s=e.clone().normalize();let i;if(s.length>1)for(const e of s)i?e.width>i.width&&(i=e):i=e;else i=s[0];return async function(e){const s=e.spatialReference;if(s.isWGS84)return e.clone();if(s.isWebMercator)return o.webMercatorToGeographic(e);const i=r.WGS84;return await t.initializeProjection(s,i),t.project(e,i)}(i)},e.hasTypeKeyword=i,e.isHostedLayer=function(e){return i(e,a.HOSTED_SERVICE)},e.removeTypeKeyword=n,e.toggleTypeKeyword=function(e,t,r){r?s(e,t):n(e,t)},e.typeKeyword=a,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/mixins/ScaleRangeLayer":function(){define(["exports","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n){"use strict";e.ScaleRangeLayer=e=>{const o=e;let s=class extends o{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const e={minScale:this.minScale,maxScale:this.maxScale},t=this.parent;var r,o;t&&"effectiveScaleRange"in t&&(r=e,o=t.effectiveScaleRange,r.minScale=r.minScale>0?o.minScale>0?Math.min(r.minScale,o.minScale):r.minScale:o.minScale,r.maxScale=r.maxScale>0?o.maxScale>0?Math.max(r.maxScale,o.maxScale):r.maxScale:o.maxScale);const s=this._get("effectiveScaleRange");return s&&s.minScale===e.minScale&&s.maxScale===e.maxScale?s:e}};return t.__decorate([r.property({type:Number,nonNullable:!0,json:{write:!0}})],s.prototype,"minScale",void 0),t.__decorate([r.property({type:Number,nonNullable:!0,json:{write:!0}})],s.prototype,"maxScale",void 0),t.__decorate([r.property({readOnly:!0})],s.prototype,"effectiveScaleRange",null),s=t.__decorate([n.subclass("esri.layers.mixins.ScaleRangeLayer")],s),s},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/mixins/RefreshableLayer":function(){define(["exports","../../chunks/tslib.es6","../../core/has","../../core/Logger","../../core/promiseUtils","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/cast","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/layerContainerType","./refresh"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";e.RefreshableLayer=e=>{const r=e;let a=class extends r{constructor(...e){super(...e),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=s.debounce(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||u.registerLayer(this)},()=>{})}destroy(){u.unregisterLayer(this)}castRefreshInterval(e){return e>=.1?e:e<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(e=Date.now()){s.ignoreAbortErrors(this._debounceHasDataChanged()).then(t=>{t&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:t})},e=>{o.getLogger(this).error(e),this.emit("refresh",{dataChanged:!1,error:e})})}async hasDataChanged(){return!0}get test(){}};return t.__decorate([i.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:c.excludeTables}}}}})],a.prototype,"refreshInterval",void 0),t.__decorate([n.cast("refreshInterval")],a.prototype,"castRefreshInterval",null),t.__decorate([i.property({readOnly:!0})],a.prototype,"refreshTimestamp",void 0),t.__decorate([i.property({readOnly:!0})],a.prototype,"refreshParameters",null),a=t.__decorate([l.subclass("esri.layers.mixins.RefreshableLayer")],a),a},e.isRefreshableLayer=function(e){return null!=e&&"object"==typeof e&&"refreshTimestamp"in e&&"refresh"in e},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/mixins/refresh":function(){define(["exports","../../core/Collection","../../core/reactiveUtils","../../core/accessorSupport/trackingUtils"],function(e,t,r,o){"use strict";const s=new t,i=new WeakMap;function n(e){return null!=e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function a(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:a(t,e%t):0}let l=0,c=0;function u(){const e=Date.now();let t=!1;for(const r of s){const o=r.deref();o?o.refreshInterval&&e-(i.get(o)??0)+5>=6e4*o.refreshInterval&&(i.set(o,e),o.refresh(e)):t=!0}if(t)for(let e=s.length-1;e>=0;e--)s.at(e).deref()||s.removeAt(e)}o.autorun(()=>{const e=Date.now();let t=0;for(const r of s){const o=r.deref();o&&(t=a(Math.round(6e4*o.refreshInterval),t),o.refreshInterval?i.get(o)||i.set(o,e):i.delete(o))}if(t!==c){if(c=t,clearInterval(l),0===c)return void(l=0);l=setInterval(u,c)}},r.sync);const p={get hasRefreshTimer(){return l>0},get tickInterval(){return c},forceRefresh(){u()},hasLayer:e=>n(e)&&s.some(t=>t.deref()===e),clear(){for(const e of s){const t=e.deref();t&&i.delete(t)}s.removeAll()}};e.registerLayer=function(e){n(e)&&s.push(new WeakRef(e))},e.test=p,e.unregisterLayer=function(e){const t=s.find(t=>t.deref()===e);t&&s.remove(t)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/layersCreator":function(){define(["exports","../../core/Collection","../../core/has","./LayerLoadContext","./lazyLayerLoader","../../portal/PortalItem","../../portal/support/featureCollectionUtils","../../portal/support/portalLayers","../../renderers/support/styleUtils"],function(e,t,r,o,s,i,n,a,l){"use strict";async function c(e,t,r){if(!t)return;const c=t.map(e=>async function(e,t){const r=await async function(e,t){const r=t.context,l=function(e){let t;switch(e.origin){case"web-scene":switch(e.layerContainerType){case"basemap":t=h;break;case"ground":t=p;break;case"tables":t=d;break;default:t=u}break;case"link-chart":switch(e.layerContainerType){case"basemap":t=_;break;case"tables":t=b;break;default:t=g}break;default:switch(e.layerContainerType){case"basemap":t=m;break;case"tables":t=f;break;default:t=y}}return t}(r);let c=e.layerType||e.type;!c&&t?.defaultLayerType&&(c=t.defaultLayerType);const w=l[c];let x=w?s.layerLookupMap[w]:s.layerLookupMap.UnknownLayer;if(v(e)){const t=r?.portal;if(e.itemId){const r=new i({id:e.itemId,portal:t});await r.load();const n=(await a.selectLayerClassPath(r,new o.LayerLoadContext)).className||"UnknownLayer";x=s.layerLookupMap[n]}}else"ArcGISFeatureLayer"===c?n.isMapNotesLayer(e)||n.isMarkupLayer(e)?x=s.layerLookupMap.MapNotesLayer:n.isRouteLayer(e)?x=s.layerLookupMap.RouteLayer:S(e)&&(x=s.layerLookupMap.GroupLayer):e.wmtsInfo?.url&&e.wmtsInfo.layerIdentifier?x=s.layerLookupMap.WMTSLayer:"WFS"===c&&"2.0.0"!==e.wfsInfo?.version&&(x=s.layerLookupMap.UnsupportedLayer);return x()}(e,t);return async function(e,t,r){const o=new e;return o.read(t,r.context),"group"===o.type&&("GroupLayer"===t.layerType?await w(o,t,r):v(t)?function(e,t,r){t.itemId&&(e.portalItem=new i({id:t.itemId,portal:r?.portal}),e.when(()=>{const o=o=>{const s=o.layerId;x(o,e,t,s,r);const i=t.featureCollection?.layers?.[s];i&&o.read(i,r)};e.layers?.forEach(o),e.tables?.forEach(o)}))}(o,t,r.context):S(t)&&await async function(e,t,r){const o=s.layerLookupMap.FeatureLayer,i=await o(),n=t.featureCollection,a=n?.showLegend,l=n?.layers?.map((o,s)=>{const n=new i;n.read(o,r);const l={...r,ignoreDefaults:!0};return x(n,e,t,s,l),null!=a&&n.read({showLegend:a},l),n});e.layers.addMany(l??[])}(o,t,r.context)),await l.loadStyleRenderer(o,r.context),o}(r,e,t)}(e,r)),T=await Promise.allSettled(c);for(const t of T)"rejected"===t.status||t.value&&e.add(t.value)}const u={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISSceneServiceLayer:"SceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BuildingSceneLayer:"BuildingSceneLayer",CatalogLayer:"CatalogLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",IntegratedMesh3DTilesLayer:"IntegratedMesh3DTilesLayer",Object3DTilesLayer:"UnsupportedLayer",IntegratedMeshLayer:"IntegratedMeshLayer",KML:"KMLLayer",LineOfSightLayer:"LineOfSightLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",PointCloudLayer:"PointCloudLayer",RasterDataLayer:"UnsupportedLayer",VectorTileLayer:"VectorTileLayer",ViewshedLayer:"ViewshedLayer",Voxel:"VoxelLayer",WCS:"WCSLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},p={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},d={ArcGISFeatureLayer:"FeatureLayer"},h={ArcGISImageServiceLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",ArcGISSceneServiceLayer:"SceneLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",DefaultTileLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WCS:"UnsupportedLayer",WMS:"UnsupportedLayer",WebTiledLayer:"WebTileLayer"},y={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",ArcGISVideoLayer:"VideoLayer",BingMapsAerial:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",CatalogLayer:"CatalogLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoJSON:"GeoJSONLayer",GeoRSS:"GeoRSSLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",KnowledgeGraphLayer:"KnowledgeGraphLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WCS:"WCSLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},f={ArcGISFeatureLayer:"FeatureLayer",SubtypeGroupTable:"SubtypeGroupLayer"},m={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",DefaultTileLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WCS:"WCSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},g={...y,LinkChartLayer:"LinkChartLayer"},b={...f},_={...m};function S(e){return"ArcGISFeatureLayer"===e.layerType&&!v(e)&&(e.featureCollection?.layers?.length??0)>1}function v(e){return"Feature Collection"===e.type}async function w(e,r,o){const s=new t,i=c(s,Array.isArray(r.layers)?r.layers:[],o);try{try{if(await i,"group"===e.type)return e.layers.addMany(s),e}catch(t){e.destroy();for(const e of s)e.destroy();throw t}}catch(e){throw e}}function x(e,t,r,o,s){e.read({id:`${t.id}-sublayer-${o}`,visibility:r.visibleLayers?.includes(o)??!0},s)}e.populateGroupLayer=w,e.populateOperationalLayers=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/LayerLoadContext":function(){define(["exports","../../support/requestPresets"],function(e,t){"use strict";e.LayerLoadContext=class{constructor(){this._serviceMetadatas=new Map,this._itemDatas=new Map}async fetchServiceMetadata(e,r){const o=this._serviceMetadatas.get(e);if(o)return o;const s=await t.fetchArcGISServiceJSON(e,r);return this._serviceMetadatas.set(e,s),s}async fetchItemData(e){const{id:t}=e;if(!t)return null;const{_itemDatas:r}=this;if(r.has(t))return r.get(t);const o=await e.fetchData();return r.set(t,o),o}async fetchCustomParameters(e,t){const r=await this.fetchItemData(e);return r&&"object"==typeof r&&(t?t(r):r.customParameters)||null}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/requestPresets":function(){define(["exports","../request"],function(e,t){"use strict";e.fetchArcGISServiceJSON=async function(e,r){const{data:o}=await t(e,{responseType:"json",query:{f:"json",...r?.customParameters,token:r?.apiKey}});return o},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/lazyLayerLoader":function(){define(["require","exports"],function(e,t){"use strict";const r=e=>Object.freeze(Object.defineProperty({__proto__:null,default:e},Symbol.toStringTag,{value:"Module"})),o={BingMapsLayer:async()=>(await new Promise((t,o)=>e(["../BingMapsLayer"],e=>t(r(e)),o))).default,BuildingSceneLayer:async()=>(await new Promise((t,o)=>e(["../BuildingSceneLayer"],e=>t(r(e)),o))).default,CSVLayer:async()=>(await new Promise((t,o)=>e(["../CSVLayer"],e=>t(r(e)),o))).default,CatalogLayer:async()=>(await new Promise((t,o)=>e(["../CatalogLayer"],e=>t(r(e)),o))).default,DimensionLayer:async()=>(await new Promise((t,o)=>e(["../DimensionLayer"],e=>t(r(e)),o))).default,ElevationLayer:async()=>(await new Promise((t,o)=>e(["../ElevationLayer"],e=>t(r(e)),o))).default,FeatureLayer:async()=>(await new Promise((t,o)=>e(["../FeatureLayer"],e=>t(r(e)),o))).default,GaussianSplatLayer:async()=>(await new Promise((t,o)=>e(["../GaussianSplatLayer"],e=>t(r(e)),o))).default,GeoJSONLayer:async()=>(await new Promise((t,o)=>e(["../GeoJSONLayer"],e=>t(r(e)),o))).default,GeoRSSLayer:async()=>(await new Promise((t,o)=>e(["../GeoRSSLayer"],e=>t(r(e)),o))).default,GroupLayer:async()=>(await new Promise((t,o)=>e(["../GroupLayer"],e=>t(r(e)),o))).default,ImageryLayer:async()=>(await new Promise((t,o)=>e(["../ImageryLayer"],e=>t(r(e)),o))).default,ImageryTileLayer:async()=>(await new Promise((t,o)=>e(["../ImageryTileLayer"],e=>t(r(e)),o))).default,IntegratedMesh3DTilesLayer:async()=>(await new Promise((t,o)=>e(["../IntegratedMesh3DTilesLayer"],e=>t(r(e)),o))).default,IntegratedMeshLayer:async()=>(await new Promise((t,o)=>e(["../IntegratedMeshLayer"],e=>t(r(e)),o))).default,KMLLayer:async()=>(await new Promise((t,o)=>e(["../KMLLayer"],e=>t(r(e)),o))).default,KnowledgeGraphLayer:async()=>(await new Promise((t,o)=>e(["../KnowledgeGraphLayer"],e=>t(r(e)),o))).default,LineOfSightLayer:async()=>(await new Promise((t,o)=>e(["../LineOfSightLayer"],e=>t(r(e)),o))).default,LinkChartLayer:async()=>(await new Promise((t,o)=>e(["../LinkChartLayer"],e=>t(r(e)),o))).default,MapImageLayer:async()=>(await new Promise((t,o)=>e(["../MapImageLayer"],e=>t(r(e)),o))).default,MapNotesLayer:async()=>(await new Promise((t,o)=>e(["../MapNotesLayer"],e=>t(r(e)),o))).default,MediaLayer:async()=>(await new Promise((t,o)=>e(["../MediaLayer"],e=>t(r(e)),o))).default,OGCFeatureLayer:async()=>(await new Promise((t,o)=>e(["../OGCFeatureLayer"],e=>t(r(e)),o))).default,OpenStreetMapLayer:async()=>(await new Promise((t,o)=>e(["../OpenStreetMapLayer"],e=>t(r(e)),o))).default,OrientedImageryLayer:async()=>(await new Promise((t,o)=>e(["../OrientedImageryLayer"],e=>t(r(e)),o))).default,PointCloudLayer:async()=>(await new Promise((t,o)=>e(["../PointCloudLayer"],e=>t(r(e)),o))).default,RouteLayer:async()=>(await new Promise((t,o)=>e(["../RouteLayer"],e=>t(r(e)),o))).default,SceneLayer:async()=>(await new Promise((t,o)=>e(["../SceneLayer"],e=>t(r(e)),o))).default,StreamLayer:async()=>(await new Promise((t,o)=>e(["../StreamLayer"],e=>t(r(e)),o))).default,SubtypeGroupLayer:async()=>(await new Promise((t,o)=>e(["../SubtypeGroupLayer"],e=>t(r(e)),o))).default,TileLayer:async()=>(await new Promise((t,o)=>e(["../TileLayer"],e=>t(r(e)),o))).default,UnknownLayer:async()=>(await new Promise((t,o)=>e(["../UnknownLayer"],e=>t(r(e)),o))).default,UnsupportedLayer:async()=>(await new Promise((t,o)=>e(["../UnsupportedLayer"],e=>t(r(e)),o))).default,VectorTileLayer:async()=>(await new Promise((t,o)=>e(["../VectorTileLayer"],e=>t(r(e)),o))).default,VideoLayer:async()=>(await new Promise((t,o)=>e(["../VideoLayer"],e=>t(r(e)),o))).default,ViewshedLayer:async()=>(await new Promise((t,o)=>e(["../ViewshedLayer"],e=>t(r(e)),o))).default,VoxelLayer:async()=>(await new Promise((t,o)=>e(["../VoxelLayer"],e=>t(r(e)),o))).default,WCSLayer:async()=>(await new Promise((t,o)=>e(["../WCSLayer"],e=>t(r(e)),o))).default,WFSLayer:async()=>(await new Promise((t,o)=>e(["../WFSLayer"],e=>t(r(e)),o))).default,WMSLayer:async()=>(await new Promise((t,o)=>e(["../WMSLayer"],e=>t(r(e)),o))).default,WMTSLayer:async()=>(await new Promise((t,o)=>e(["../WMTSLayer"],e=>t(r(e)),o))).default,WebTileLayer:async()=>(await new Promise((t,o)=>e(["../WebTileLayer"],e=>t(r(e)),o))).default};t.layerLookupMap=o,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/portal/support/featureCollectionUtils":function(){define(["exports"],function(e){"use strict";function t(e,t){return!(!e.layerType||"ArcGISFeatureLayer"!==e.layerType)&&e.featureCollectionType===t}e.isMapNotesLayer=function(e){return t(e,"notes")},e.isMarkupLayer=function(e){return t(e,"markup")},e.isRouteLayer=function(e){return t(e,"route")},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/portal/support/portalLayers":function(){define(["exports","../../core/Error","../../layers/support/associatedFeatureServiceUtils","../../layers/support/fetchService","../../layers/support/LayerLoadContext","../../layers/support/layerUtils","../../layers/support/lazyLayerLoader","../PortalItem","./loadUtils","./portalItemUtils"],function(e,t,r,o,s,i,n,a,l,c){"use strict";async function u(e,o){switch(e.type){case"3DTiles Service":return e.typeKeywords.includes("3DObject")?{className:"UnsupportedLayer"}:{className:"IntegratedMesh3DTilesLayer"};case"CSV":return{className:"CSVLayer"};case"Feature Collection":return async function(e){await e.load();const t=c.hasTypeKeyword(e,"Map Notes"),r=c.hasTypeKeyword(e,"Markup");if(t||r)return{className:"MapNotesLayer"};if(c.hasTypeKeyword(e,"Route Layer"))return{className:"RouteLayer"};const o=await e.fetchData();return 1===l.getNumLayersAndTables(o)?{className:"FeatureLayer"}:{className:"GroupLayer"}}(e);case"Feature Service":return async function(e,t){const r=await p(e,t);if("object"==typeof r){const{sourceJSON:e,className:t}=r,o={sourceJSON:e};return null!=r.id&&(o.layerId=r.id),{className:t||"FeatureLayer",properties:o}}return{className:"GroupLayer"}}(e,o);case"Feed":case"Stream Service":return{className:"StreamLayer"};case"GeoJson":return{className:"GeoJSONLayer"};case"Group Layer":return{className:"GroupLayer"};case"Image Service":return async function(e,t){await e.load();const r=e.typeKeywords?.map(e=>e.toLowerCase())??[];if(r.includes("elevation 3d layer"))return{className:"ElevationLayer"};if(r.includes("tiled imagery"))return{className:"ImageryTileLayer"};const o=await t.fetchItemData(e),s=o?.layerType;if("ArcGISTiledImageServiceLayer"===s)return{className:"ImageryTileLayer"};if("ArcGISImageServiceLayer"===s)return{className:"ImageryLayer"};const i=await t.fetchServiceMetadata(e.url,{customParameters:await t.fetchCustomParameters(e)}),n=i.cacheType?.toLowerCase(),a=i.capabilities?.toLowerCase().includes("tilesonly"),l=i.tileInfo?.format?.toLowerCase()??"",c=null==n&&["jpg","jpeg","png","png8","png24","png32","mixed"].includes(l);return"map"===n||c||a?{className:"ImageryTileLayer"}:{className:"ImageryLayer"}}(e,o);case"KML":return{className:"KMLLayer"};case"Knowledge Graph Layer":return{className:"KnowledgeGraphLayer"};case"Map Service":return async function(e,t){const r=await async function(e,t){const{tileInfo:r}=await t.fetchServiceMetadata(e.url,{customParameters:await t.fetchCustomParameters(e)});return r}(e,t);return r?{className:"TileLayer"}:{className:"MapImageLayer"}}(e,o);case"Media Layer":return{className:"MediaLayer"};case"Scene Service":return async function(e,t){const o=await p(e,t,async()=>{try{if(!e.url)return[];const{serverUrl:o}=await r.findAssociatedFeatureService(e.url,{sceneLayerItem:e}),s=await t.fetchServiceMetadata(o);return s?.tables??[]}catch{return[]}});if("object"==typeof o){const r={};let s;if(null!=o.id?(r.layerId=o.id,s=`${e.url}/layers/${o.id}`):s=e.url,e.typeKeywords?.length)for(const t of Object.keys(i.sceneServiceLayerTypeToClassName))if(e.typeKeywords.includes(t))return{className:i.sceneServiceLayerTypeToClassName[t]};const n=await t.fetchServiceMetadata(s,{customParameters:await t.fetchCustomParameters(e,e=>l.getFirstLayerOrTable(e)?.customParameters)});return{className:i.sceneServiceLayerTypeToClassName[n?.layerType]||"SceneLayer",properties:r}}if(!1===o){const r=await t.fetchServiceMetadata(e.url);if("Voxel"===r?.layerType)return{className:"VoxelLayer"}}return{className:"GroupLayer"}}(e,o);case"Video Service":return async function(e,t){return"object"==typeof await p(e,t)?{className:"VideoLayer"}:{className:"GroupLayer"}}(e,o);case"Vector Tile Service":return{className:"VectorTileLayer"};case"WCS":return{className:"WCSLayer"};case"WFS":return{className:"WFSLayer"};case"WMS":return{className:"WMSLayer"};case"WMTS":return{className:"WMTSLayer"};default:throw new t("portal:unknown-item-type","Unknown item type '${type}'",{type:e.type})}}async function p(e,t,r){const{url:s,type:n}=e,a="Feature Service"===n;if(!s)return{};if(/\/\d+$/.test(s)){if(a){const r=await t.fetchServiceMetadata(s,{customParameters:await t.fetchCustomParameters(e,e=>l.getFirstLayerOrTable(e)?.customParameters)});return i.applyPreferredHostToPortalItem(e,i.getPreferredHost()),{id:r.id,className:o.getLayerModuleType(r.type),sourceJSON:r}}return{}}if("Video Service"===n){const e=await t.fetchServiceMetadata(s);return!((e.layers?.length??0)>1)&&{}}await e.load();let c=await t.fetchItemData(e);if(a){const{data:r,preferredHost:o}=await l.preprocessFSItemData(c,s,t);i.applyPreferredHostToPortalItem(e,o);const n=d(r);if("object"==typeof n){const e=l.getLayerOrTable(r,n.id);n.className=l.layerTypeToLayerModuleType(e?.layerType)}return n}if("Scene Service"===n&&(c=await l.populateSceneServiceItemData(e,c,t)),l.getNumLayersAndTables(c)>0)return d(c);const u=await t.fetchServiceMetadata(s);return r&&(u.tables=await r()),d(u)}function d(e){return 1===l.getNumLayersAndTables(e)&&{id:l.getFirstLayerOrTable(e)?.id}}e.fromItem=async function(e){let{portalItem:t}=e;!t||t instanceof a||(t=new a(t));const r=await async function(e){await e.load();const t=new s.LayerLoadContext;return async function(e){const t=e.className,r=n.layerLookupMap[t];return{constructor:await r(),properties:e.properties}}(await u(e,t))}(t);return new(0,r.constructor)({portalItem:t,...r.properties})},e.selectLayerClassPath=u,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/associatedFeatureServiceUtils":function(){define(["exports","../../kernel","../../request","../../core/Error","../../core/promiseUtils","./arcgisLayerUrl","../../portal/Portal","../../portal/PortalItem"],function(e,t,r,o,s,i,n,a){"use strict";async function l(e){if(e.rootDocument)return e.rootDocument;const t={query:{f:"json",...e.customParameters,token:e.apiKey},responseType:"json",signal:e.signal};try{const o=await r(e.sceneServerUrl,t);e.rootDocument=o.data}catch{e.rootDocument={}}return e.rootDocument}async function c(e,t){const s=i.parse(e);if(!s)throw new o("invalid-feature-service-url","Invalid feature service url");const n=s.url.path,a=t.layerId;if(null==a)return{serverUrl:n};const c=l(t),u=t.featureServiceItem?await t.featureServiceItem.fetchData("json"):null,p=(u?.layers?.[0]||u?.tables?.[0])?.customParameters,d=e=>{const o={query:{f:"json",...p},responseType:"json",authMode:e,signal:t.signal};return r(n,o)},h=d("anonymous").catch(()=>d("no-prompt")),[y,f]=await Promise.all([h,c]),m=f?.layers,g=y.data&&y.data.layers;if(!Array.isArray(g))throw new Error("expected layers array");if(Array.isArray(m)){for(let e=0;e<Math.min(m.length,g.length);e++)if(m[e].id===a)return{serverUrl:n,layerId:g[e].id}}else if(null!=a&&a<g.length)return{serverUrl:n,layerId:g[a].id};throw new Error("could not find matching associated sublayer")}e.findAssociatedFeatureService=async function(e,u){const p=i.parse(e);if(!p)throw new o("invalid-url","Invalid scene service url");const d={...u,sceneServerUrl:p.url.path,layerId:p.sublayer??void 0};if(d.sceneLayerItem??=await async function(e){const o=(await l(e)).serviceItemId;if(!o)return null;const i=new a({id:o,apiKey:e.apiKey}),c=await async function(e){const o=t.id?.findServerInfo(e.sceneServerUrl);if(o?.owningSystemUrl)return o.owningSystemUrl;const i=e.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const t=(await r(i,{query:{f:"json"},responseType:"json",signal:e.signal})).data.owningSystemUrl;if(t)return t}catch(e){s.throwIfAbortError(e)}return null}(e);null!=c&&(i.portal=new n({url:c}));try{return await i.load({signal:e.signal})}catch(e){return s.throwIfAbortError(e),null}}(d),null==d.sceneLayerItem)return c(d.sceneServerUrl.replace("/SceneServer","/FeatureServer"),d);const h=await async function({sceneLayerItem:e,signal:t}){if(!e)return null;try{const r=(await e.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:t})).find(e=>"Feature Service"===e.type)||null;if(!r)return null;const o=new a({portal:r.portal,id:r.id});return await o.load(),o}catch(e){return s.throwIfAbortError(e),null}}(d);if(!h?.url)throw new o("related-service-not-found","Could not find feature service through portal item relationship");d.featureServiceItem=h;const y=await c(h.url,d);return y.portalItem=h,y},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fetchService":function(){define(["exports","./layerUtils","../../support/requestPresets"],function(e,t,r){"use strict";const o=new Set(["Catalog Layer","Feature Layer","Oriented Imagery Layer"]);function s(e){const{type:t}=e;return!!t&&o.has(t)}function i(e){return"Table"===e.type}function n(e){e.layers=e.layers?.filter(s),e.tables=e.tables?.filter(i)}function a(e){e.type||="Feature Layer"}function l(e){e.type||="Table"}function c(e){e.layers?.forEach(a),e.tables?.forEach(l)}e.fetchFeatureService=async function(e,o){const{loadContext:s,...i}=o||{},a=s?await s.fetchServiceMetadata(e,i):await r.fetchArcGISServiceJSON(e,i),l=t.getPreferredHost();c(a),n(a);const u={serviceJSON:a,preferredHost:l};if((a.currentVersion??0)<10.5)return u;const p=`${t.getPreferredUrl()??e}/layers`,d=s?await s.fetchServiceMetadata(p,i):await r.fetchArcGISServiceJSON(p,i);return c(d),n(d),u.layersJSON={layers:d.layers,tables:d.tables},u},e.getLayerModuleType=function(e){switch(e){case"Feature Layer":case"Table":return"FeatureLayer";case"Oriented Imagery Layer":return"OrientedImageryLayer";case"Catalog Layer":return"CatalogLayer"}return"FeatureLayer"},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/portal/support/loadUtils":function(){define(["exports","../../layers/support/associatedFeatureServiceUtils","../../layers/support/fetchService","../../layers/support/layerUtils"],function(e,t,r,o){"use strict";function s(e){const t={id:e.id,name:e.name},o=r.getLayerModuleType(e.type);return"FeatureLayer"!==o&&(t.layerType=o),t}function i(e){if(!e)return null;const{layers:t,tables:r}=e;return t?.length?t[0]:r?.length?r[0]:null}e.createSublayerData=s,e.getFirstLayerOrTable=i,e.getLayerOrTable=function(e,t){return null==t?null:[...e.layers||[],...e.tables||[]].find(e=>e.id===t)},e.getNumLayersAndTables=function(e){return(e?.layers?.length??0)+(e?.tables?.length??0)},e.getSublayersByLayerType=function(e,t){return[...e.layers||[],...e.tables||[]].filter(({layerType:e})=>e?t.includes(e):t.includes("ArcGISFeatureLayer"))},e.instanceTypeToLayerTypes=function(e){switch(e){case"catalog":return["CatalogLayer"];case"feature":return["ArcGISFeatureLayer"];case"oriented-imagery":return["OrientedImageryLayer"];case"subtype-group":return["SubtypeGroupLayer","SubtypeGroupTable"]}return null},e.layerTypeToLayerModuleType=function(e){switch(e){case"CatalogLayer":return"CatalogLayer";case"OrientedImageryLayer":return"OrientedImageryLayer";case"SubtypeGroupLayer":case"SubtypeGroupTable":return"SubtypeGroupLayer"}return"FeatureLayer"},e.populateSceneServiceItemData=async function(e,r,o){if(!e?.url)return r??{};if(r??={},!r.layers){const t=await o.fetchServiceMetadata(e.url);r.layers=t.layers?.map(s)}const{serverUrl:n,portalItem:a}=await t.findAssociatedFeatureService(e.url,{sceneLayerItem:e,customParameters:i(r)?.customParameters}).catch(()=>({serverUrl:null,portalItem:null}));if(null==n)return r.tables=[],r;if(!r.tables&&a){const e=await a.fetchData().catch(()=>null);if(e?.tables)r.tables=e.tables.map(s);else{const t=await o.fetchServiceMetadata(n,{customParameters:i(e)?.customParameters}).catch(()=>null);r.tables=t?.tables?.map(s)}}if(r.tables)for(const e of r.tables)e.url=`${n}/${e.id}`;return r},e.preprocessFSItemData=async function(e,t,r){let n;if(null==e?.layers||null==e?.tables){const a=await r.fetchServiceMetadata(t,{customParameters:i(e)?.customParameters});n=o.getPreferredHost(),(e=e||{}).layers=e.layers||a?.layers?.map(s),e.tables=e.tables||a?.tables?.map(s)}return{data:e,preferredHost:n}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/styleUtils":function(){define(["exports","../../core/asyncUtils","../../core/promiseUtils","../../core/Warning"],function(e,t,r,o){"use strict";e.loadStyleRenderer=async function(e,s,i){const n=e&&e.getAtOrigin&&e.getAtOrigin("renderer",s.origin);if(n&&"unique-value"===n.type&&n.styleOrigin){const a=await t.result(n.populateFromStyle());if(r.throwIfAborted(i),!1===a.ok){const t=a.error;s?.messages&&s.messages.push(new o("renderer:style-reference",`Failed to create unique value renderer from style reference: ${t.message}`,{error:t,context:s})),e.clear("renderer",s?.origin)}}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/FeatureLayer":function(){define(["require","exports","../chunks/tslib.es6","../PopupTemplate","../request","../core/Clonable","../core/Collection","../core/Error","../core/lang","../core/Logger","../core/maybe","../core/MultiOriginJSONSupport","../core/object","../core/promiseUtils","../core/sql","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/cast","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","../core/accessorSupport/layerContainerType","../form/FormTemplate","../geometry/SpatialReference","../graphic/FeatureGraphicOrigin","./Layer","./graphics/sources/MemorySource","./mixins/APIKeyMixin","./mixins/ArcGISService","./mixins/BlendLayer","./mixins/CustomParametersMixin","./mixins/DisplayFilteredLayer","./mixins/EditBusLayer","./mixins/FeatureEffectLayer","./mixins/FeatureLayerBase","./mixins/FeatureReductionLayer","./mixins/OperationalLayer","./mixins/OrderedLayer","./mixins/PortalLayer","./mixins/PublishableLayer","./mixins/RefreshableLayer","./mixins/ScaleRangeLayer","./mixins/TemporalLayer","./mixins/TrackableLayer","./support/arcgisLayerUrl","./support/commonProperties","./support/featureLayerUtils","./support/FeatureTemplate","./support/FeatureType","./support/fieldProperties","./support/fieldUtils","./support/LabelClass","./support/labelingInfo","./support/serviceCapabilitiesUtils","./support/TimeInfo","./support/TitleCreator","./support/versionUtils","./support/source/DataLayerSource","../renderers/support/jsonUtils","../renderers/support/styleUtils","../renderers/support/typeUtils","../rest/support/FeatureSet","../rest/support/Query","../support/guards","../support/popupUtils","../symbols/support/typeUtils","../webdoc/support/opacityUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b,_,S,v,w,x,T,M,I,O,P,k,C,L,E,A,F,R,j,N,D,U,V,q,z,G,B,$,J,W,H,Z,Q,K,Y,X,ee,te,re,oe,se,ie,ne,ae,le,ce,ue,pe){"use strict";const de=e=>Object.freeze(Object.defineProperty({__proto__:null,default:e},Symbol.toStringTag,{value:"Module"})),he="FeatureLayer";function ye(e,t){return new a("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function fe(e){return e&&e instanceof n}const me=H.defineFieldProperties();function ge(e,t,r){const o=!!r?.writeLayerSchema;return{enabled:o,ignoreOrigin:o}}return t.default=class extends(A.FeatureLayerBase(F.FeatureReductionLayer(E.FeatureEffectLayer(D.PublishableLayer(L.EditBusLayer(C.DisplayFilteredLayer(P.BlendLayer(j.OrderedLayer(q.TemporalLayer(z.TrackableLayer(V.ScaleRangeLayer(U.RefreshableLayer(O.ArcGISService(R.OperationalLayer(N.PortalLayer(p.MultiOriginJSONMixin(k.CustomParametersMixin(I.APIKeyMixin(i.ClonableMixin(T)))))))))))))))))))){constructor(...t){super(...t),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.graphicOrigin=new x(this),this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=w.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=h.debounce(async(t,r,o)=>{const{save:s,saveAs:i}=await new Promise((t,r)=>e(["./save/featureLayerUtils"],t,r));switch(t){case 0:return s(this,r);case 1:return i(this,o,r)}})}destroy(){this.source?.destroy()}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){const t=null!=e?e.signal:null;if(this.portalItem?.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then(e=>this.initLayerProperties(e))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(h.throwIfAbortError).then(async()=>{if(this.url&&null==this.layerId&&/FeatureServer|MapServer\/*$/i.test(this.url)){const e=await this._fetchFirstValidLayerId(t);null!=e&&(this.layerId=e)}if(!this.url&&!this._hasMemorySource())throw new a("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(t))}).then(()=>$.ensureLayerCredential(this,"load",e));return this.addResolvingPromise(r),Promise.resolve(this)}get _titleCreator(){const e=this._get("_titleCreator");return u.destroyMaybe(e),new ee({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(e,t){return t=t.layerDefinition||t,Y.getFeatureLayerCapabilities(t,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities?.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,r){return this._readEditingEnabled(t,!0,r)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,r,o){this._writeEditingEnabled(e,t,!0,o)}get effectiveEditingEnabled(){return $.computeEffectiveEditingEnabled(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}readIsTable(e,t){return"Table"===(t=t?.layerDefinition??t).type||!t.geometryType}writeIsTable(e,t,r,o){o?.writeLayerSchema&&d.setDeepValue(r,e?"Table":"Feature Layer",t)}readGlobalIdField(e,t){return $.readGlobalIdField(t.layerDefinition||t)}readObjectIdField(e,t){return $.readObjectIdField(t.layerDefinition||t)}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){Z.fixRendererFields(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,r){t=t.layerDefinition||t;const o=t.drawingInfo?.renderer;if(o){const e=oe.read(o,t,r)??void 0;return e||c.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),e}return $.createDefaultRenderer(t,r)}set source(e){const t=this._get("source");t!==e&&(fe(t)&&this._resetMemorySource(t),fe(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof n?new M.MemorySource({layer:this,items:e}):e:null}readSource(e,t){const r=ne.fromJSON(t.featureSet);return new M.MemorySource({layer:this,items:r?.features??[]})}readTemplates(e,t){const r=t.editFieldsInfo,o=r?.creatorField,s=r?.editorField;return e=e?.map(e=>J.fromJSON(e)),this._fixTemplates(e,o),this._fixTemplates(e,s),e}readTitle(e,t){const r=t.layerDefinition?.name??t.name,o=t.title||t.layerDefinition?.title;if(r){const e=this.portalItem?.title;if("item-title"===this.sublayerTitleMode)return this.url?G.titleFromUrlAndName(this.url,r):r;let t=r;if(!t&&this.url){const e=G.parse(this.url);null!=e&&(t=e.title)}if(!t)return;return"item-title-and-service-name"===this.sublayerTitleMode&&e&&e!==t&&(t=e+" - "+t),G.cleanTitle(t)}if("item-title"===this.sublayerTitleMode&&o)return o}readTitleFromWebMap(e,t){return t.title||t.layerDefinition?.name}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const e=t.fields.find(e=>e.name.toLowerCase()===r);e&&(r=e.name)}return r}readTypes(e,t){e=(t=t.layerDefinition||t).types;const r=t.editFieldsInfo,o=r?.creatorField,s=r?.editorField;return e?.map(e=>(e=W.fromJSON(e),this._fixTemplates(e.templates,o),this._fixTemplates(e.templates,s),e))}readVisible(e,t){return null!=t.layerDefinition?.defaultVisibility?!!t.layerDefinition.defaultVisibility:null!=t.visibility?!!t.visibility:void 0}async addAttachment(e,t){const r=await $.addAttachment(this,e,t,he);return this.lastEditsEventDate=new Date,r}async updateAttachment(e,t,r){const o=await $.updateAttachment(this,e,t,r,he);return this.lastEditsEventDate=new Date,o}async applyEdits(e,t){return $.applyEdits(this,e,t)}async uploadAssets(e,t){return $.uploadAssets(this,e,t)}createPopupTemplate(e){return ce.createPopupTemplate(this,e)}async createGraphicsSource(t){if(this._hasMemorySource()&&this.source)return this.source.load({signal:t});const{default:r}=await h.whenOrAbort(new Promise((t,r)=>e(["./graphics/sources/FeatureLayerSource"],e=>t(de(e)),r)),t);return new r({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:t})}createQuery(){const e=$.createQuery(this);e.dynamicDataSource=this.dynamicDataSource;const t=null!=this.subtypeCode?`${this.subtypeField} = ${this.subtypeCode}`:null,r=y.sqlAnd(this.definitionExpression,t);return e.where=r||"1=1",e}async deleteAttachments(e,t){const r=await $.deleteAttachments(this,e,t,he);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(e){return $.fetchRecomputedExtents(this,e,he)}async getFeatureTitle(e,t){return this._titleCreator.getTitle(this,e,t)}async getFeatureTitles(e,t){return this._titleCreator.getTitles(this,e,t)}getFeatureType(e){return $.getFeatureType(this.types,this.typeIdField,e)}getFieldDomain(e,t){return $.getFieldDomain(this,e,t,this.getField(e)?.domain??null)}async queryAttachments(e,t){return $.queryAttachments(this,e,t,he)}async queryFeatures(e,t){const r=await this.load(),o=await r.source.queryFeatures(ae.from(e)??r.createQuery(),t);if(o?.features)for(const e of o.features)e.layer=e.sourceLayer=r;return o}async queryObjectIds(e,t){return await $.queryObjectIds(this,e,t,he)}async queryFeatureCount(e,t){return $.queryFeatureCount(this,e,t,he)}async queryExtent(e,t){return $.queryExtent(this,e,t,he)}async queryRelatedFeatures(e,t){return $.queryRelatedFeatures(this,e,t,he)}async queryRelatedFeaturesCount(e,t){return $.queryRelatedFeaturesCount(this,e,t,he)}async queryTopFeatures(t,r){const{source:o,capabilities:s}=await this.load();if(!o.queryTopFeatures||!s?.query?.supportsTopFeaturesQuery)throw new a(he,"Layer source does not support queryTopFeatures capability");const i=await new Promise((t,r)=>e(["../rest/support/TopFeaturesQuery"],e=>t(de(e)),r)),n=await o.queryTopFeatures(i.default.from(t),r);if(n?.features)for(const e of n.features)e.layer=e.sourceLayer=this;return n}async queryAttributeBins(t,r){const{source:o,capabilities:s}=await this.load();if(!o.queryAttributeBins)throw new a(he,"Layer source does not support queryAttributeBins capability");$.validateBinsQuery(t,s,he);const i=await new Promise((t,r)=>e(["../rest/support/AttributeBinsQuery"],e=>t(de(e)),r)),n=await o.queryAttributeBins(i.default.from(t),r);if(n.features)for(const e of n.features)e.layer=e.sourceLayer=this;return n}async queryTopObjectIds(t,r){const{source:o,capabilities:s}=await this.load();if(!o.queryTopObjectIds||!s?.query.supportsTopFeaturesQuery)throw new a(he,"Layer source does not support queryTopObjectIds capability");const i=await new Promise((t,r)=>e(["../rest/support/TopFeaturesQuery"],e=>t(de(e)),r));return(await o.queryTopObjectIds(i.default.from(t),r)).filter(le.isNumber)}async queryTopFeaturesExtent(t,r){const{source:o,capabilities:s}=await this.load();if(!o.queryTopExtents||!s?.query?.supportsTopFeaturesQuery)throw new a(he,"Layer source does not support queryTopExtents capability");const i=await new Promise((t,r)=>e(["../rest/support/TopFeaturesQuery"],e=>t(de(e)),r));return o.queryTopExtents(i.default.from(t),r)}async queryTopFeatureCount(t,r){const{source:o,capabilities:s}=await this.load();if(!o.queryTopCount||!s?.query?.supportsTopFeaturesQuery)throw new a(he,"Layer source does not support queryFeatureCount capability");const i=await new Promise((t,r)=>e(["../rest/support/TopFeaturesQuery"],e=>t(de(e)),r));return o.queryTopCount(i.default.from(t),r)}read(e,t){const r=e.featureCollection;if((r||"Feature Collection"===e.type)&&(this.resourceInfo=e),r){const{layers:e,showLegend:o}=r;1===e?.length&&(super.read(e[0],t),null!=o&&super.read({showLegend:o},t))}super.read(e,t),t&&"service"===t.origin&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,t){t={...t,origin:t?.origin??void 0,writeLayerSchema:t?.writeLayerSchema??this._hasMemorySource()};const{origin:r,layerContainerType:o,messages:s}=t;if(this.dynamicDataSource)return s?.push(ye(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(("web-map"===r||"web-scene"===r)&&"tables"!==o)return s?.push(ye(this,`a table source can only be written to tables, not ${o}`)),null;if(this._hasMemorySource())return s?.push(ye(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&("web-map"===r||"web-scene"===r)&&"tables"===o)return s?.push(ye(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new a(he,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&("memory"===this.source?.type||te.serviceSupportsSpatialReference(this,e))}async save(e){return this._debouncedSaveOperations(0,e)}async saveAs(e,t){return this._debouncedSaveOperations(1,t,e)}_readEditingEnabled(e,t,r){let o=e.layerDefinition?.capabilities;return o?this._hasEditingCapability(o):(o=e.capabilities,t&&"web-map"===r?.origin&&!this._hasMemorySource()&&o?this._hasEditingCapability(o):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(e=>e.trim()).includes("editing")}_writeEditingEnabled(e,t,r,o){if(!e){const e=this.capabilities?.operations?.supportsSync?"Query,Sync":"Query";d.setDeepValue("layerDefinition.capabilities",e,t),r&&!o?.writeLayerSchema&&(t.capabilities=e)}}_fetchFirstValidLayerId(e){return s(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(e=>{const t=e.data;if(t)return this.applyPreferredHost(t),this.findFirstValidLayerId(t)})}async initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),Z.fixRendererFields(this.renderer,this.fieldsIndex),Z.fixTimeInfoFields(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&"mesh"===this.geometryType&&(this.capabilities.query.supportsReturnMesh=!0),se.loadStyleRenderer(this,{origin:"service"})}async hasDataChanged(){return $.hasDataChanged(this)}async fetchPublishingStatus(){const e=this.source;return e?.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){const e=this.parsedUrl?.path??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||-1!==e.search(/\/FeatureServer\//i)||this.fields?.some(e=>"geometry"===e.type)||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(e=>{const r=e.prototype?.attributes;r&&t&&delete r[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new a("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new a("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(e=>{e.layer=this,e.sourceLayer=this}),this.addHandles([e.on("after-add",e=>{e.item.layer=this,e.item.sourceLayer=this}),e.on("after-remove",e=>{e.item.layer=null,e.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(e=>{e.layer=null,e.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}},r.__decorate([f.property({clonable:!1,readOnly:!0})],t.default.prototype,"_titleCreator",null),r.__decorate([f.property(B.attributeTableTemplate)],t.default.prototype,"attributeTableTemplate",void 0),r.__decorate([g.reader("service","capabilities")],t.default.prototype,"readCapabilities",null),r.__decorate([f.property({json:{origins:{"web-scene":{write:!1}},write:!0}})],t.default.prototype,"charts",void 0),r.__decorate([f.property({readOnly:!0})],t.default.prototype,"createQueryVersion",null),r.__decorate([f.property({json:{read:{source:"layerDefinition.copyrightText"}}})],t.default.prototype,"copyright",void 0),r.__decorate([f.property({json:{read:{source:"layerDefinition.displayField"}}})],t.default.prototype,"displayField",void 0),r.__decorate([f.property({types:ue.symbolTypes,readOnly:!0})],t.default.prototype,"defaultSymbol",void 0),r.__decorate([f.property({type:re.DataLayerSource})],t.default.prototype,"dynamicDataSource",void 0),r.__decorate([f.property({type:Boolean})],t.default.prototype,"editingEnabled",null),r.__decorate([g.reader(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],t.default.prototype,"readEditingEnabled",null),r.__decorate([g.reader("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],t.default.prototype,"readEditingEnabledFromWebMap",null),r.__decorate([_.writer(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],t.default.prototype,"writeEditingEnabled",null),r.__decorate([_.writer("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],t.default.prototype,"writeEditingEnabledToWebMap",null),r.__decorate([f.property({readOnly:!0})],t.default.prototype,"effectiveEditingEnabled",null),r.__decorate([f.property({clonable:!1,readOnly:!0})],t.default.prototype,"featureTitleFields",null),r.__decorate([f.property({...me.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:ge}}}}})],t.default.prototype,"fields",void 0),r.__decorate([f.property(me.fieldsIndex)],t.default.prototype,"fieldsIndex",void 0),r.__decorate([f.property({type:v,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],t.default.prototype,"formTemplate",void 0),r.__decorate([f.property({json:{read:{source:"layerDefinition.extent"}}})],t.default.prototype,"fullExtent",void 0),r.__decorate([f.property({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:ge,writer(e,t,r){const o=e?$.geometryTypeKebabDict.toJSON(e):null;o&&d.setDeepValue(r,o,t)}}}},read:{source:"layerDefinition.geometryType",reader:$.geometryTypeKebabDict.read}}})],t.default.prototype,"geometryType",void 0),r.__decorate([f.property({readOnly:!0,clonable:!1})],t.default.prototype,"graphicOrigin",void 0),r.__decorate([f.property({json:{read:{source:"layerDefinition.hasM"}}})],t.default.prototype,"hasM",void 0),r.__decorate([f.property({json:{read:{source:"layerDefinition.hasZ"}}})],t.default.prototype,"hasZ",void 0),r.__decorate([f.property(B.id)],t.default.prototype,"id",void 0),r.__decorate([f.property({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],t.default.prototype,"infoFor3D",void 0),r.__decorate([f.property({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],t.default.prototype,"isTable",void 0),r.__decorate([g.reader("service","isTable",["type","geometryType"]),g.reader("isTable",["layerDefinition.type","layerDefinition.geometryType"])],t.default.prototype,"readIsTable",null),r.__decorate([_.writer("web-map","isTable")],t.default.prototype,"writeIsTable",null),r.__decorate([f.property(B.labelsVisible)],t.default.prototype,"labelsVisible",void 0),r.__decorate([f.property({type:[Q],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:K.reader,write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:K.reader,write:{layerContainerTypes:S.excludeTables}}})],t.default.prototype,"labelingInfo",void 0),r.__decorate([f.property((()=>{const e=l.clone(B.opacityDrawingInfo);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,t,r){d.setDeepValue(r,pe.opacityToTransparency(e),t)}}},e})())],t.default.prototype,"opacity",void 0),r.__decorate([f.property(B.legendEnabled)],t.default.prototype,"legendEnabled",void 0),r.__decorate([f.property({type:["show","hide"],json:(()=>{const e=l.clone(B.listMode.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],t.default.prototype,"listMode",void 0),r.__decorate([g.reader("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],t.default.prototype,"readGlobalIdField",null),r.__decorate([f.property({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:ge}}}}})],t.default.prototype,"objectIdField",void 0),r.__decorate([g.reader("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],t.default.prototype,"readObjectIdField",null),r.__decorate([f.property({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:S.excludeTables}}})],t.default.prototype,"operationalLayerType",void 0),r.__decorate([f.property(me.outFields)],t.default.prototype,"outFields",void 0),r.__decorate([f.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],t.default.prototype,"path",void 0),r.__decorate([f.property(B.popupEnabled)],t.default.prototype,"popupEnabled",void 0),r.__decorate([f.property({type:o,json:{name:"popupInfo",write:!0}})],t.default.prototype,"popupTemplate",void 0),r.__decorate([f.property({readOnly:!0})],t.default.prototype,"defaultPopupTemplate",null),r.__decorate([f.property({types:ie.rendererTypes,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:ie.webSceneRendererTypes,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:S.excludeTables,overridePolicy:(e,t,r)=>({ignoreOrigin:r?.writeLayerSchema,layerContainerTypes:S.excludeTables})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,r)=>({ignoreOrigin:r?.writeLayerSchema,layerContainerTypes:S.excludeTables})}}})],t.default.prototype,"renderer",null),r.__decorate([g.reader("service","renderer",["drawingInfo.renderer","defaultSymbol"]),g.reader("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],t.default.prototype,"readRenderer",null),r.__decorate([f.property()],t.default.prototype,"resourceInfo",void 0),r.__decorate([f.property((()=>{const e=l.clone(B.screenSizePerspectiveEnabled);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],t.default.prototype,"screenSizePerspectiveEnabled",void 0),r.__decorate([f.property({clonable:!1})],t.default.prototype,"source",null),r.__decorate([m.cast("source")],t.default.prototype,"castSource",null),r.__decorate([g.reader("portal-item","source",["featureSet"]),g.reader("web-map","source",["featureSet"])],t.default.prototype,"readSource",null),r.__decorate([f.property({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],t.default.prototype,"spatialReference",void 0),r.__decorate([f.property({type:Number})],t.default.prototype,"subtypeCode",void 0),r.__decorate([f.property({type:[J]})],t.default.prototype,"templates",void 0),r.__decorate([g.reader("templates",["editFieldsInfo","creatorField","editorField","templates"])],t.default.prototype,"readTemplates",null),r.__decorate([f.property({type:X})],t.default.prototype,"timeInfo",void 0),r.__decorate([f.property()],t.default.prototype,"title",void 0),r.__decorate([g.reader("service","title",["name"]),g.reader("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],t.default.prototype,"readTitle",null),r.__decorate([g.reader("web-map","title",["layerDefinition.name","title"])],t.default.prototype,"readTitleFromWebMap",null),r.__decorate([f.property({type:String})],t.default.prototype,"sublayerTitleMode",void 0),r.__decorate([f.property({json:{read:!1}})],t.default.prototype,"type",void 0),r.__decorate([f.property({type:String})],t.default.prototype,"typeIdField",void 0),r.__decorate([g.reader("service","typeIdField"),g.reader("typeIdField",["layerDefinition.typeIdField"])],t.default.prototype,"readTypeIdField",null),r.__decorate([f.property({type:[W]})],t.default.prototype,"types",void 0),r.__decorate([g.reader("service","types",["types"]),g.reader("types",["layerDefinition.types"])],t.default.prototype,"readTypes",null),r.__decorate([f.property({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility",layerContainerTypes:S.excludeTables}}}}})],t.default.prototype,"visible",void 0),r.__decorate([g.reader("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],t.default.prototype,"readVisible",null),t.default=r.__decorate([b.subclass("esri.layers.FeatureLayer")],t.default),t.default})},"esri/PopupTemplate":function(){define(["./chunks/tslib.es6","./core/Clonable","./core/Collection","./core/JSONSupport","./core/lang","./core/Logger","./core/promiseUtils","./core/accessorSupport/decorators/property","./core/accessorSupport/decorators/cast","./core/accessorSupport/decorators/reader","./core/accessorSupport/decorators/subclass","./core/accessorSupport/decorators/writer","./core/accessorSupport/ensureType","./layers/support/fieldUtils","./popup/content","./popup/ExpressionInfo","./popup/FieldInfo","./popup/LayerOptions","./popup/RelatedRecordsInfo","./popup/content/support/mediaInfoTypes","./support/actions/ActionBase","./support/actions/ActionButton","./support/actions/ActionToggle","./popup/content/UtilityNetworkAssociationsContent","./popup/content/RelationshipContent","./popup/content/ExpressionContent","./popup/content/FieldsContent","./popup/content/AttachmentsContent","./popup/content/TextContent","./popup/content/CustomContent","./popup/content/MediaContent","./popup/content/Content"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b,_,S,v,w,x,T,M,I,O,P,k,C,L){"use strict";const E="relationships/",A="expression/",F=r.ofType({key:"type",defaultKeyValue:"button",base:S,typeMap:{button:v,toggle:w}}),R={base:L,key:"type",typeMap:{media:C,custom:k,text:P,attachments:O,fields:I,expression:M,relationship:T,utilityNetworkAssociations:x}},j=new Set(["attachments","fields","media","text","expression","relationship"]),N=new Set([...j,"utility-network-associations"]);let D=class extends(t.ClonableMixin(o.JSONSupport)){constructor(e){super(e),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(e=>d.ensureOneOfType(R,e)):"string"==typeof e||"function"==typeof e||e instanceof HTMLElement||n.isPromiseLike(e)?e:(i.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:r}=t;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(t.description,t.mediaInfos,r):this._readPopupInfo(t)}writeWebSceneContent(e,t,r,o){this._writePopupTemplateContent(e,t,o)}writeWebMapContent(e,t,r,o){this._writePopupTemplateContent(e,t,o)}writeFieldInfos(e,t,r,o){const{content:s}=this,i=Array.isArray(s)?s:null;if(e){const r=i?i.filter(e=>"fields"===e.type):[],s=r.length&&r.every(e=>e.fieldInfos?.length);t.fieldInfos=e.filter(Boolean).map(e=>{const t=e.toJSON(o);return s&&(t.visible=!1),t})}if(i)for(const e of i)"fields"===e.type&&this._writeFieldsContent(e,t)}writeLayerOptions(e,t,r,o){t[r]=!e||null===e.showNoDataRecords&&null===e.returnTopmostRaster?null:e.toJSON(o)}writeTitle(e,t){t.title=e||""}async collectRequiredFields(e,t){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,[...r,...this._getContentExpressionInfos(this.content,r)]),h.collectFields(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writePopupTemplateContent(e,t,r){"string"!=typeof e?Array.isArray(e)&&(t.popupElements=e.filter(e=>"web-scene"===r?.origin?j.has(e.type):N.has(e.type)).map(e=>e?.toJSON(r)),t.popupElements.forEach(e=>{"attachments"===e.type?this._writeAttachmentContent(t):"media"===e.type?this._writeMediaContent(e,t):"text"===e.type?this._writeTextContent(e,t):"relationship"===e.type&&this._writeRelationshipContent(e,t)})):t.description=e}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const r=s.clone(e.fieldInfos);Array.isArray(t.fieldInfos)?r.forEach(e=>{const r=t.fieldInfos.find(t=>t.fieldName?.toLowerCase()===e.fieldName?.toLowerCase());r?r.visible=!0:t.fieldInfos.push(e)}):t.fieldInfos=r}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,t){const r=e.orderByFields?.map(t=>this._toFieldOrderJSON(t,e.relationshipId))||[],o=[...t.relatedRecordsInfo?.orderByFields||[],...r];t.relatedRecordsInfo={showRelatedRecords:!0,...o?.length&&{orderByFields:o}}}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=s.clone(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...r]:t.mediaInfos=r}_readPopupInfoElements(e,t,r){const o={description:!1,mediaInfos:!1};return r.map(r=>"media"===r.type?(r.mediaInfos||!t||o.mediaInfos||(r.mediaInfos=t,o.mediaInfos=!0),C.fromJSON(r)):"text"===r.type?(r.text||!e||o.description||(r.text=e,o.description=!0),P.fromJSON(r)):"attachments"===r.type?O.fromJSON(r):"fields"===r.type?I.fromJSON(r):"expression"===r.type?M.fromJSON(r):"relationship"===r.type?T.fromJSON(r):"utilityNetworkAssociations"===r.type?x.fromJSON(r):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:t,order:r}=e;if(!t?.startsWith(E))return null;const o=t.replace(E,"").split("/");if(2!==o.length)return null;const s=parseInt(o[0],10),i=o[1];return!Number.isNaN(s)&&i?T.fromJSON({relationshipId:s,orderByFields:[{field:i,order:r}]}):null}_toFieldOrderJSON(e,t){const{order:r,field:o}=e;return{field:`${E}${t}/${o}`,order:r}}_readPopupInfo({description:e,mediaInfos:t,showAttachments:r,relatedRecordsInfo:o={showRelatedRecords:!1}}){const s=[];e?s.push(new P({text:e})):s.push(new I),Array.isArray(t)&&t.length&&s.push(C.fromJSON({mediaInfos:t})),r&&s.push(O.fromJSON({displayType:"auto"}));const{showRelatedRecords:i,orderByFields:n}=o;return i&&n?.length&&n.forEach(e=>{const t=this._toRelationshipContent(e);t&&s.push(t)}),s.length?s:e}_getContentElementFields(e){const t=e?.type;if("attachments"===t)return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if("custom"===t)return e.outFields||[];if("fields"===t)return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if("media"===t){const t=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...t.reduce((e,t)=>[...e,...this._getMediaInfoFields(t)],[])]}return"text"===t?this._extractFieldNames(e.text):"relationship"===t||"utility-network-associations"===t?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:t,title:r,value:o}=e,s=o||{},{fields:i,normalizeField:n,tooltipField:a,sourceURL:l,linkURL:c}=s,u=[...this._extractFieldNames(r),...this._extractFieldNames(t),...this._extractFieldNames(l),...this._extractFieldNames(c),...i??[]];return n&&u.push(n),a&&u.push(a),u}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((e,t)=>[...e,..."expression"===t.type&&t.expressionInfo?[t.expressionInfo]:[]],t):[]}_getContentFields(e){return"string"==typeof e?this._extractFieldNames(e):Array.isArray(e)?e.reduce((e,t)=>[...e,...this._getContentElementFields(t)],[]):[]}async _collectExpressionInfoFields(e,t,r){r&&await Promise.all(r.map(r=>h.collectArcadeFieldNames(e,t,r.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:e,visible:t})=>!(void 0!==t&&!t||!e||e.startsWith(E)||e.startsWith(A))).map(e=>e.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((e,t)=>[...e,...this._getActionFields(t)],[]):[]}_getActionFields(e){const{className:t,title:r,type:o}=e,s="button"===o||"toggle"===o?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(t),...this._extractFieldNames(s)]}_getTitleFields(e){return"string"==typeof e?this._extractFieldNames(e):[]}_extractFieldNames(e){return h.extractSubstitutionTemplatesFromString(e).filter(e=>!(e.startsWith(E)||e.startsWith(A)))}};return e.__decorate([a.property({type:F})],D.prototype,"actions",void 0),e.__decorate([a.property()],D.prototype,"content",void 0),e.__decorate([l.cast("content")],D.prototype,"castContent",null),e.__decorate([c.reader("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],D.prototype,"readContent",null),e.__decorate([p.writer("web-scene","content",{popupElements:{type:r.ofType(y.persistableWebSceneTypes)},showAttachments:{type:Boolean},mediaInfos:{type:r.ofType(_.types)},description:{type:String},relatedRecordsInfo:{type:b}})],D.prototype,"writeWebSceneContent",null),e.__decorate([p.writer("content",{popupElements:{type:r.ofType(y.persistableTypes)},showAttachments:{type:Boolean},mediaInfos:{type:r.ofType(_.types)},description:{type:String},relatedRecordsInfo:{type:b}})],D.prototype,"writeWebMapContent",null),e.__decorate([a.property({type:[f],json:{write:!0}})],D.prototype,"expressionInfos",void 0),e.__decorate([a.property({type:[m]})],D.prototype,"fieldInfos",void 0),e.__decorate([p.writer("fieldInfos")],D.prototype,"writeFieldInfos",null),e.__decorate([a.property({type:g})],D.prototype,"layerOptions",void 0),e.__decorate([p.writer("layerOptions")],D.prototype,"writeLayerOptions",null),e.__decorate([a.property({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],D.prototype,"lastEditInfoEnabled",void 0),e.__decorate([a.property()],D.prototype,"outFields",void 0),e.__decorate([a.property()],D.prototype,"overwriteActions",void 0),e.__decorate([a.property()],D.prototype,"returnGeometry",void 0),e.__decorate([a.property({json:{type:String}})],D.prototype,"title",void 0),e.__decorate([p.writer("title")],D.prototype,"writeTitle",null),D=e.__decorate([u.subclass("esri.PopupTemplate")],D),D})},"esri/popup/content":function(){define(["exports","./content/AttachmentsContent","./content/Content","./content/CustomContent","./content/ExpressionContent","./content/FieldsContent","./content/MediaContent","./content/RelationshipContent","./content/TextContent","./content/UtilityNetworkAssociationsContent"],function(e,t,r,o,s,i,n,a,l,c){"use strict";const u={base:null,key:"type",typeMap:{attachment:t,media:n,text:l,expression:s,field:i,relationship:a,utilityNetworkAssociations:c}},p={base:null,key:"type",typeMap:{attachment:t,media:n,text:l,expression:s,field:i,relationship:a}};e.AttachmentsContent=t,e.BaseContent=r,e.CustomContent=o,e.ExpressionContent=s,e.FieldsContent=i,e.MediaContent=n,e.RelationshipContent=a,e.TextContent=l,e.UtilityNetworkAssociationsContent=c,e.isContent=function(e){return e instanceof r},e.persistableTypes=u,e.persistableWebSceneTypes=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/popup/content/AttachmentsContent":function(){define(["../../chunks/tslib.es6","../../core/Clonable","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./Content","../support/AttachmentsOrderByInfo"],function(e,t,r,o,s,i,n,a,l){"use strict";let c=class extends(t.ClonableMixin(a)){constructor(e){super(e),this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};return e.__decorate([r.property({type:String,json:{write:!0}})],c.prototype,"description",void 0),e.__decorate([r.property({type:["auto","preview","list"],json:{write:!0}})],c.prototype,"displayType",void 0),e.__decorate([r.property({type:[l],json:{write:!0}})],c.prototype,"orderByFields",void 0),e.__decorate([r.property({type:String,json:{write:!0}})],c.prototype,"title",void 0),e.__decorate([r.property({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],c.prototype,"type",void 0),c=e.__decorate([n.subclass("esri.popup.content.AttachmentsContent")],c),c})},"esri/popup/content/Content":function(){define(["../../chunks/tslib.es6","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n){"use strict";let a=class extends t.JSONSupport{constructor(e){super(e),this.type=null}};return e.__decorate([r.property({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],a.prototype,"type",void 0),a=e.__decorate([n.subclass("esri.popup.content.Content")],a),a})},"esri/popup/support/AttachmentsOrderByInfo":function(){define(["../../chunks/tslib.es6","../../core/Clonable","../../core/jsonMap","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";const c=new r.JSONMap({asc:"ascending",desc:"descending"});let u=class extends(t.ClonableMixin(o.JSONSupport)){constructor(e){super(e),this.field=null,this.order="ascending"}};return e.__decorate([s.property({type:String,json:{write:!0}})],u.prototype,"field",void 0),e.__decorate([s.property({type:c.apiValues,json:{type:c.jsonValues,read:c.read,write:c.write}})],u.prototype,"order",void 0),u=e.__decorate([l.subclass("esri.popup.support.AttachmentsOrderByInfo")],u),u})},"esri/popup/content/CustomContent":function(){define(["../../chunks/tslib.es6","../../core/lang","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/subclass","./Content"],function(e,t,r,o,s,i,n){"use strict";var a;let l=a=class extends n{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new a({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?t.clone(this.outFields):null})}};return e.__decorate([r.property()],l.prototype,"creator",void 0),e.__decorate([r.property()],l.prototype,"destroyer",void 0),e.__decorate([r.property()],l.prototype,"outFields",void 0),e.__decorate([r.property({type:["custom"],readOnly:!0})],l.prototype,"type",void 0),l=a=e.__decorate([i.subclass("esri.popup.content.CustomContent")],l),l})},"esri/popup/content/ExpressionContent":function(){define(["../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../ElementExpressionInfo","./Content"],function(e,t,r,o,s,i,n,a){"use strict";var l;let c=l=class extends a{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){return new l({expressionInfo:this.expressionInfo?.clone()})}};return e.__decorate([t.property({type:n,json:{write:!0}})],c.prototype,"expressionInfo",void 0),e.__decorate([t.property({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0),c=l=e.__decorate([i.subclass("esri.popup.content.ExpressionContent")],c),c})},"esri/popup/ElementExpressionInfo":function(){define(["../chunks/tslib.es6","../core/JSONSupport","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n){"use strict";var a;let l=a=class extends t.JSONSupport{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new a({title:this.title,expression:this.expression})}};return e.__decorate([r.property({type:String,json:{write:!0}})],l.prototype,"title",void 0),e.__decorate([r.property({type:String,json:{write:!0}})],l.prototype,"expression",void 0),e.__decorate([r.property({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],l.prototype,"returnType",void 0),l=a=e.__decorate([n.subclass("esri.popup.ElementExpressionInfo")],l),l})},"esri/popup/content/FieldsContent":function(){define(["../../chunks/tslib.es6","../../core/lang","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","../FieldInfo","./Content"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;let u=c=class extends l{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(e=>e.toJSON())}clone(){return new c(t.clone({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};return e.__decorate([r.property({type:Object,json:{write:!0}})],u.prototype,"attributes",void 0),e.__decorate([r.property({type:String,json:{write:!0}})],u.prototype,"description",void 0),e.__decorate([r.property({type:[a]})],u.prototype,"fieldInfos",void 0),e.__decorate([n.writer("fieldInfos")],u.prototype,"writeFieldInfos",null),e.__decorate([r.property({type:String,json:{write:!0}})],u.prototype,"title",void 0),e.__decorate([r.property({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],u.prototype,"type",void 0),u=c=e.__decorate([i.subclass("esri.popup.content.FieldsContent")],u),u})},"esri/popup/FieldInfo":function(){define(["../chunks/tslib.es6","../core/jsonMap","../core/JSONSupport","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","./support/FieldInfoFormat"],function(e,t,r,o,s,i,n,a,l,c){"use strict";var u;let p=u=class extends r.JSONSupport{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new u({fieldName:this.fieldName,format:this.format?.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};return e.__decorate([o.property({type:String,json:{write:!0}})],p.prototype,"fieldName",void 0),e.__decorate([o.property({type:c,json:{write:!0}})],p.prototype,"format",void 0),e.__decorate([o.property({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],p.prototype,"isEditable",void 0),e.__decorate([o.property({type:String,json:{write:!0}})],p.prototype,"label",void 0),e.__decorate([a.enumeration(new t.JSONMap({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],p.prototype,"stringFieldOption",void 0),e.__decorate([o.property({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],p.prototype,"statisticType",void 0),e.__decorate([o.property({type:String,json:{write:!0}})],p.prototype,"tooltip",void 0),e.__decorate([o.property({type:Boolean,json:{write:!0}})],p.prototype,"visible",void 0),p=u=e.__decorate([l.subclass("esri.popup.FieldInfo")],p),p})},"esri/popup/support/FieldInfoFormat":function(){define(["../../chunks/tslib.es6","../../core/Clonable","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/subclass","../../intl/date"],function(e,t,r,o,s,i,n,a,l,c){"use strict";let u=class extends(t.ClonableMixin(r.JSONSupport)){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};return e.__decorate([a.enumeration(c.dateFormatJSONMap)],u.prototype,"dateFormat",void 0),e.__decorate([o.property({type:Boolean,json:{write:!0}})],u.prototype,"digitSeparator",void 0),e.__decorate([o.property({type:s.Integer,json:{write:!0}})],u.prototype,"places",void 0),u=e.__decorate([l.subclass("esri.popup.support.FieldInfoFormat")],u),u})},"esri/popup/content/MediaContent":function(){define(["../../chunks/tslib.es6","../../core/lang","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","./BarChartMediaInfo","./ColumnChartMediaInfo","./Content","./ImageMediaInfo","./LineChartMediaInfo","./PieChartMediaInfo","./support/mediaInfoTypes"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y){"use strict";var f;let m=f=class extends u{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(e=>"image"===e.type?p.fromJSON(e):"barchart"===e.type?l.fromJSON(e):"columnchart"===e.type?c.fromJSON(e):"linechart"===e.type?d.fromJSON(e):"piechart"===e.type?h.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(e=>e.toJSON())}clone(){return new f(t.clone({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};return e.__decorate([r.property()],m.prototype,"activeMediaInfoIndex",void 0),e.__decorate([r.property({type:Object,json:{write:!0}})],m.prototype,"attributes",void 0),e.__decorate([r.property({type:String,json:{write:!0}})],m.prototype,"description",void 0),e.__decorate([r.property({types:[y.types]})],m.prototype,"mediaInfos",void 0),e.__decorate([i.reader("mediaInfos")],m.prototype,"readMediaInfos",null),e.__decorate([a.writer("mediaInfos")],m.prototype,"writeMediaInfos",null),e.__decorate([r.property({type:String,json:{write:!0}})],m.prototype,"title",void 0),e.__decorate([r.property({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],m.prototype,"type",void 0),m=f=e.__decorate([n.subclass("esri.popup.content.MediaContent")],m),m})},"esri/popup/content/BarChartMediaInfo":function(){define(["../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./mixins/ChartMediaInfo","./support/chartMediaInfoUtils"],function(e,t,r,o,s,i,n,a){"use strict";var l;let c=l=class extends n{constructor(e){super(e),this.type="bar-chart"}clone(){return new l({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};return e.__decorate([t.property({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:a.chartTypeKebabDict.write,isRequired:!0}}})],c.prototype,"type",void 0),c=l=e.__decorate([i.subclass("esri.popup.content.BarChartMediaInfo")],c),c})},"esri/popup/content/mixins/ChartMediaInfo":function(){define(["../../../chunks/tslib.es6","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","./MediaInfo","../support/ChartMediaInfoValue"],function(e,t,r,o,s,i,n,a){"use strict";let l=class extends n{constructor(e){super(e),this.type=null,this.value=void 0}};return e.__decorate([t.property({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],l.prototype,"type",void 0),e.__decorate([t.property({type:a,json:{write:{isRequired:!0}}})],l.prototype,"value",void 0),l=e.__decorate([i.subclass("esri.popup.content.mixins.ChartMediaInfo")],l),l})},"esri/popup/content/mixins/MediaInfo":function(){define(["../../../chunks/tslib.es6","../../../core/JSONSupport","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n){"use strict";let a=class extends t.JSONSupport{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};return e.__decorate([r.property({type:String,json:{write:!0}})],a.prototype,"altText",void 0),e.__decorate([r.property({type:String,json:{write:!0}})],a.prototype,"caption",void 0),e.__decorate([r.property({type:String,json:{write:!0}})],a.prototype,"title",void 0),e.__decorate([r.property({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],a.prototype,"type",void 0),a=e.__decorate([n.subclass("esri.popup.content.mixins.MediaInfo")],a),a})},"esri/popup/content/support/ChartMediaInfoValue":function(){define(["../../../chunks/tslib.es6","../../../Color","../../../core/JSONSupport","../../../core/lang","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/ensureType","../../../core/accessorSupport/decorators/subclass","./ChartMediaInfoValueSeries"],function(e,t,r,o,s,i,n,a){"use strict";var l;let c=l=class extends r.JSONSupport{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new l({colors:o.clone(this.colors),fields:o.clone(this.fields),normalizeField:this.normalizeField,series:o.clone(this.series),tooltipField:this.tooltipField})}};return e.__decorate([s.property({type:[t],json:{type:[[i.Integer]],write:!0}})],c.prototype,"colors",void 0),e.__decorate([s.property({type:[String],json:{write:{isRequired:!0}}})],c.prototype,"fields",void 0),e.__decorate([s.property({type:String,json:{write:!0}})],c.prototype,"normalizeField",void 0),e.__decorate([s.property({type:[a],json:{read:!1}})],c.prototype,"series",void 0),e.__decorate([s.property({type:String,json:{write:!0}})],c.prototype,"tooltipField",void 0),c=l=e.__decorate([n.subclass("esri.popup.content.support.ChartMediaInfoValue")],c),c})},"esri/popup/content/support/ChartMediaInfoValueSeries":function(){define(["../../../chunks/tslib.es6","../../../core/Accessor","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n){"use strict";var a;let l=a=class extends t{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new a({color:this.color?.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};return e.__decorate([r.property()],l.prototype,"color",void 0),e.__decorate([r.property()],l.prototype,"fieldName",void 0),e.__decorate([r.property()],l.prototype,"tooltip",void 0),e.__decorate([r.property()],l.prototype,"value",void 0),l=a=e.__decorate([n.subclass("esri.popup.content.support.ChartMediaInfoValueSeries")],l),l})},"esri/popup/content/support/chartMediaInfoUtils":function(){define(["exports","../../../core/jsonMap"],function(e,t){"use strict";const r=t.strict()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});e.chartTypeKebabDict=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/popup/content/ColumnChartMediaInfo":function(){define(["../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./mixins/ChartMediaInfo","./support/chartMediaInfoUtils"],function(e,t,r,o,s,i,n,a){"use strict";var l;let c=l=class extends n{constructor(e){super(e),this.type="column-chart"}clone(){return new l({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};return e.__decorate([t.property({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:a.chartTypeKebabDict.write,isRequired:!0}}})],c.prototype,"type",void 0),c=l=e.__decorate([i.subclass("esri.popup.content.ColumnChartMediaInfo")],c),c})},"esri/popup/content/ImageMediaInfo":function(){define(["../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./mixins/MediaInfo","./support/ImageMediaInfoValue"],function(e,t,r,o,s,i,n,a){"use strict";var l;let c=l=class extends n{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){return new l({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?.clone()})}};return e.__decorate([t.property({type:Number,json:{write:!0}})],c.prototype,"refreshInterval",void 0),e.__decorate([t.property({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],c.prototype,"type",void 0),e.__decorate([t.property({type:a,json:{write:{isRequired:!0}}})],c.prototype,"value",void 0),c=l=e.__decorate([i.subclass("esri.popup.content.ImageMediaInfo")],c),c})},"esri/popup/content/support/ImageMediaInfoValue":function(){define(["../../../chunks/tslib.es6","../../../core/JSONSupport","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n){"use strict";var a;let l=a=class extends t.JSONSupport{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new a({linkURL:this.linkURL,sourceURL:this.sourceURL})}};return e.__decorate([r.property({type:String,json:{write:!0}})],l.prototype,"linkURL",void 0),e.__decorate([r.property({type:String,json:{write:{isRequired:!0}}})],l.prototype,"sourceURL",void 0),l=a=e.__decorate([n.subclass("esri.popup.content.support.ImageMediaInfoValue")],l),l})},"esri/popup/content/LineChartMediaInfo":function(){define(["../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./mixins/ChartMediaInfo","./support/chartMediaInfoUtils"],function(e,t,r,o,s,i,n,a){"use strict";var l;let c=l=class extends n{constructor(e){super(e),this.type="line-chart"}clone(){return new l({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};return e.__decorate([t.property({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:a.chartTypeKebabDict.write,isRequired:!0}}})],c.prototype,"type",void 0),c=l=e.__decorate([i.subclass("esri.popup.content.LineChartMediaInfo")],c),c})},"esri/popup/content/PieChartMediaInfo":function(){define(["../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./mixins/ChartMediaInfo","./support/chartMediaInfoUtils"],function(e,t,r,o,s,i,n,a){"use strict";var l;let c=l=class extends n{constructor(e){super(e),this.type="pie-chart"}clone(){return new l({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};return e.__decorate([t.property({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:a.chartTypeKebabDict.write,isRequired:!0}}})],c.prototype,"type",void 0),c=l=e.__decorate([i.subclass("esri.popup.content.PieChartMediaInfo")],c),c})},"esri/popup/content/support/mediaInfoTypes":function(){define(["exports","../BarChartMediaInfo","../ColumnChartMediaInfo","../ImageMediaInfo","../LineChartMediaInfo","../PieChartMediaInfo","../mixins/MediaInfo"],function(e,t,r,o,s,i,n){"use strict";const a={base:n,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":t,"column-chart":r,"line-chart":s,"pie-chart":i,image:o}};e.types=a,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/popup/content/RelationshipContent":function(){define(["../../chunks/tslib.es6","../../core/Clonable","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./Content","../support/RelatedRecordsInfoFieldOrder"],function(e,t,r,o,s,i,n,a,l){"use strict";let c=class extends(t.ClonableMixin(a)){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};return e.__decorate([r.property({type:String,json:{write:!0}})],c.prototype,"description",void 0),e.__decorate([r.property({type:Number,json:{type:o.Integer,write:!0}})],c.prototype,"displayCount",void 0),e.__decorate([r.property({type:["list"],json:{write:{isRequired:!0}}})],c.prototype,"displayType",void 0),e.__decorate([r.property({type:[l],json:{write:!0}})],c.prototype,"orderByFields",void 0),e.__decorate([r.property({type:Number,json:{type:o.Integer,write:{isRequired:!0}}})],c.prototype,"relationshipId",void 0),e.__decorate([r.property({type:String,json:{write:!0}})],c.prototype,"title",void 0),e.__decorate([r.property({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],c.prototype,"type",void 0),c=e.__decorate([n.subclass("esri.popup.content.RelationshipContent")],c),c})},"esri/popup/support/RelatedRecordsInfoFieldOrder":function(){define(["../../chunks/tslib.es6","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n){"use strict";var a;let l=a=class extends t.JSONSupport{constructor(e){super(e),this.field=null,this.order=null}clone(){return new a({field:this.field,order:this.order})}};return e.__decorate([r.property({type:String,json:{write:!0}})],l.prototype,"field",void 0),e.__decorate([r.property({type:["asc","desc"],json:{write:!0}})],l.prototype,"order",void 0),l=a=e.__decorate([n.subclass("esri.popup.support.RelatedRecordsInfoFieldOrder")],l),l})},"esri/popup/content/TextContent":function(){define(["../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./Content"],function(e,t,r,o,s,i,n){"use strict";var a;let l=a=class extends n{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new a({text:this.text})}};return e.__decorate([t.property({type:String,json:{write:!0}})],l.prototype,"text",void 0),e.__decorate([t.property({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],l.prototype,"type",void 0),l=a=e.__decorate([i.subclass("esri.popup.content.TextContent")],l),l})},"esri/popup/content/UtilityNetworkAssociationsContent":function(){define(["../../chunks/tslib.es6","../../core/Clonable","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/subclass","./Content","../support/UtilityNetworkAssociationType"],function(e,t,r,o,s,i,n,a,l,c){"use strict";let u=class extends(t.ClonableMixin(l)){constructor(e){super(e),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};return e.__decorate([r.property({type:String,json:{write:!0}})],u.prototype,"description",void 0),e.__decorate([r.property({type:Number,json:{type:o.Integer,write:!0}})],u.prototype,"displayCount",void 0),e.__decorate([r.property({type:String,json:{write:!0}})],u.prototype,"title",void 0),e.__decorate([r.property({type:[c],json:{write:!0}})],u.prototype,"associationTypes",void 0),e.__decorate([n.enumeration({utilityNetworkAssociations:"utility-network-associations"})],u.prototype,"type",void 0),u=e.__decorate([a.subclass("esri.popup.content.UtilityNetworkAssociationsContent")],u),u})},"esri/popup/support/UtilityNetworkAssociationType":function(){define(["../../chunks/tslib.es6","../../core/Clonable","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a){"use strict";let l=class extends(t.ClonableMixin(r.JSONSupport)){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};return e.__decorate([o.property({type:String,json:{write:!0}})],l.prototype,"title",void 0),e.__decorate([o.property({type:String,json:{write:!0}})],l.prototype,"description",void 0),e.__decorate([o.property({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],l.prototype,"type",void 0),e.__decorate([o.property({type:Number,json:{type:s.Integer,write:!0}})],l.prototype,"associatedNetworkSourceId",void 0),e.__decorate([o.property({type:Number,json:{type:s.Integer,write:!0}})],l.prototype,"associatedAssetGroup",void 0),e.__decorate([o.property({type:Number,json:{type:s.Integer,write:!0}})],l.prototype,"associatedAssetType",void 0),l=e.__decorate([a.subclass("esri.popup.support.UtilityNetworkAssociationType")],l),l})},"esri/popup/ExpressionInfo":function(){define(["../chunks/tslib.es6","../core/JSONSupport","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n){"use strict";var a;let l=a=class extends t.JSONSupport{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new a({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};return e.__decorate([r.property({type:String,json:{write:!0}})],l.prototype,"name",void 0),e.__decorate([r.property({type:String,json:{write:!0}})],l.prototype,"title",void 0),e.__decorate([r.property({type:String,json:{write:!0}})],l.prototype,"expression",void 0),e.__decorate([r.property({type:["string","number"],json:{write:!0}})],l.prototype,"returnType",void 0),l=a=e.__decorate([n.subclass("esri.popup.ExpressionInfo")],l),l})},"esri/popup/LayerOptions":function(){define(["../chunks/tslib.es6","../core/JSONSupport","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n){"use strict";var a;let l=a=class extends t.JSONSupport{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new a({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};return e.__decorate([r.property({type:Boolean,json:{write:!0}})],l.prototype,"returnTopmostRaster",void 0),e.__decorate([r.property({type:Boolean,json:{write:!0}})],l.prototype,"showNoDataRecords",void 0),l=a=e.__decorate([n.subclass("esri.popup.LayerOptions")],l),l})},"esri/popup/RelatedRecordsInfo":function(){define(["../chunks/tslib.es6","../core/JSONSupport","../core/lang","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/subclass","./support/RelatedRecordsInfoFieldOrder"],function(e,t,r,o,s,i,n,a){"use strict";var l;let c=l=class extends t.JSONSupport{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new l({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?r.clone(this.orderByFields):null})}};return e.__decorate([o.property({type:Boolean,json:{write:!0}})],c.prototype,"showRelatedRecords",void 0),e.__decorate([o.property({type:[a],json:{write:!0}})],c.prototype,"orderByFields",void 0),c=l=e.__decorate([n.subclass("esri.popup.RelatedRecordsInfo")],c),c})},"esri/support/actions/ActionBase":function(){define(["../../chunks/tslib.es6","../../core/Accessor","../../core/Identifiable","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a){"use strict";var l;let c=l=class extends(r.IdentifiableMixin(t)){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new l({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};return e.__decorate([o.property()],c.prototype,"active",void 0),e.__decorate([o.property()],c.prototype,"className",void 0),e.__decorate([o.property()],c.prototype,"disabled",void 0),e.__decorate([o.property()],c.prototype,"icon",void 0),e.__decorate([o.property()],c.prototype,"id",void 0),e.__decorate([o.property()],c.prototype,"indicator",void 0),e.__decorate([o.property()],c.prototype,"title",void 0),e.__decorate([o.property()],c.prototype,"type",void 0),e.__decorate([o.property()],c.prototype,"visible",void 0),c=l=e.__decorate([a.subclass("esri.support.actions.ActionBase")],c),c})},"esri/support/actions/ActionButton":function(){define(["../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./ActionBase"],function(e,t,r,o,s,i,n){"use strict";var a;let l=a=class extends n{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new a({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};return e.__decorate([t.property()],l.prototype,"image",void 0),l=a=e.__decorate([i.subclass("esri.support.actions.ActionButton")],l),l})},"esri/support/actions/ActionToggle":function(){define(["../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./ActionBase"],function(e,t,r,o,s,i,n){"use strict";var a;let l=a=class extends n{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new a({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};return e.__decorate([t.property()],l.prototype,"image",void 0),e.__decorate([t.property()],l.prototype,"value",void 0),l=a=e.__decorate([i.subclass("esri.support.actions.ActionToggle")],l),l})},"esri/core/MultiOriginJSONSupport":function(){define(["exports","../chunks/tslib.es6","./Accessor","./ReadOnlyMultiOriginJSONSupport","./accessorSupport/get","./accessorSupport/PropertyOrigin","./accessorSupport/utils","./accessorSupport/write","./accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";const c=e=>{const r=e;let o=class extends r{constructor(...e){super(...e)}clear(e,t="user"){n.getProperties(this).clearOrigin(e,i.nameToId(t))}write(e,t){return e=e||{},a.write(this,e,t),e}setAtOrigin(e,t,r){n.getProperties(this).setAtOrigin(e,t,i.nameToId(r))}removeOrigin(e){const t=u(this),r=i.nameToId(e),o=t.keys(r);for(const e of o)t.originOf(e)===r&&t.set(e,t.get(e,r),7)}updateOrigin(e,t){const r=u(this),o=i.nameToId(t),n=s.get(this,e);for(let t=o+1;t<i.originIdNum;++t)r.delete(e,t);r.set(e,n,o)}toJSON(e){return this.write({},e)}};return o=t.__decorate([l.subclass("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],o),o.prototype.toJSON.isDefaultToJSON=!0,o};function u(e){return n.getProperties(e).store}const p=e=>{const r=c(o.ReadOnlyMultiOriginJSONMixin(e));let s=class extends r{constructor(...e){super(...e)}};return s=t.__decorate([l.subclass("esri.core.MultiOriginJSONSupport")],s),s},d=p(r);e.MultiOriginJSONMixin=p,e.MultiOriginJSONSupport=d,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/ReadOnlyMultiOriginJSONSupport":function(){define(["exports","../chunks/tslib.es6","./Accessor","./accessorSupport/defaultsStoreUtils","./accessorSupport/MultiOriginStore","./accessorSupport/PropertyOrigin","./accessorSupport/read","./accessorSupport/utils","./accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";const c=e=>{const r=e;let c=class extends r{constructor(...e){super(...e);const t=a.getProperties(this),r=t.store,i=new s;t.store=i,o.setupConstructedDefaults(t,r,i)}read(e,t){n.read(this,e,t)}getAtOrigin(e,t){const r=u(this),o=i.nameToId(t);if("string"==typeof e)return r.get(e,o);const s={};return e.forEach(e=>{s[e]=r.get(e,o)}),s}originOf(e){return i.idToName(this.originIdOf(e))}originIdOf(e){return u(this).originOf(e)}revert(e,t){const r=u(this),o=i.nameToId(t),s=a.getProperties(this);let n;n="string"==typeof e?"*"===e?r.keys(o):[e]:e,n.forEach(e=>{s.invalidate(e),r.revert(e,o),s.commit(e)})}};return c=t.__decorate([l.subclass("esri.core.ReadOnlyMultiOriginJSONSupport")],c),c};function u(e){return a.getProperties(e).store}const p=c(r);e.ReadOnlyMultiOriginJSONMixin=c,e.ReadOnlyMultiOriginJSONSupport=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/MultiOriginStore":function(){define(["../lang","./PropertyOrigin"],function(e,t){"use strict";class r{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(t.originIdNum),this._values=new Map,this.multipleOriginsSupported=!0}clone(o){const s=new r,i=this._originStores[0];i&&i.forEach((t,r)=>{s.set(r,e.clone(t),0)});for(let r=2;r<t.originIdNum;r++){const t=this._originStores[r];t&&t.forEach((t,i)=>{o&&o.has(i)||s.set(i,e.clone(t),r)})}return s}get(e,t){const r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}keys(e){const t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,r=7){let o=this._originStores[r];if(o||(o=new Map,this._originStores[r]=o),o.set(e,t),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const o=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),o!==t}return!1}delete(e,t=7){const r=this._originStores[t];if(!r)return;const o=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let r=t-1;r>=0;r--){const t=this._originStores[r];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,r);break}}}return o}has(e,t){const r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;const r=this._originStores[t],o=r?.get(e),s=this._values.get(e);return this._values.set(e,o),this._propertyOriginMap.set(e,t),s!==o}originOf(e){return this._propertyOriginMap.get(e)||0}isAtOrigin(e,t){return this.has(e,t)&&this.originOf(e)===t}isBelowOrigin(e,t){return!this.has(e)||this.originOf(e)<t}forEach(e){this._values.forEach(e)}}return r})},"esri/form/FormTemplate":function(){define(["../chunks/tslib.es6","../core/JSONSupport","../core/lang","../core/SetUtils","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/cast","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","./ExpressionInfo","./elements/GroupElement","./support/formUtils","../layers/support/fieldUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d){"use strict";var h;const y=p.buildTypeMaps(u);let f=h=class extends t.JSONSupport{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return p.ensureType(e,y)}readElements(e,t){return p.fromJSON(t.formElements,y)}writeElements(e,t){t.formElements=p.toJSON(e,y)}clone(){return new h({description:this.description,expressionInfos:r.clone(this.expressionInfos),elements:r.clone(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(e,t){const r=new Set,{description:o,elements:s,expressionInfos:i,title:n}=this;if(b(r,e,o),b(r,e,n),!s)return[];const a=function(e,t){if(!t||0===t.length)return[];const r=g(e),o=[];for(const e of t)r.has(e.name)&&o.push(e.expression);return o}(s,i).map(t=>d.collectArcadeFieldNames(r,e,t));await Promise.all(a);for(const o of s)m(r,{fieldsIndex:e,relationships:t},o);return Array.from(r).sort()}};function m(e,t,r){const{fieldsIndex:o}=t;if(!o||o.fields.length!==e.size)switch(b(e,o,r.label),b(e,o,r.description),r.type){case"field":d.collectField(e,o,r.fieldName);break;case"group":r.elements.forEach(r=>m(e,t,r));break;case"relationship":if(t.relationships){const s=t.relationships.find(e=>e.id===r.relationshipId);s&&d.collectField(e,o,s.keyField)}d.collectFields(e,o,r.orderByFields?.map(e=>e.field));break;case"text":b(e,o,r.text)}}function g(e){const t=new Set;for(const r of e)if(o.addMaybe(t,r.visibilityExpression),!p.isTextElement(r))if(p.isGroupElement(r))o.addMany(t,g(r.elements));else if(o.addMaybe(t,r.editableExpression),p.isFieldElement(r)){const{requiredExpression:e,valueExpression:s}=r;o.addMany(t,[e,s])}return t}function b(e,t,r){d.collectFields(e,t,d.extractSubstitutionTemplatesFromString(r))}return e.__decorate([s.property({type:String,json:{write:!0}})],f.prototype,"description",void 0),e.__decorate([s.property({json:{write:!0}})],f.prototype,"elements",void 0),e.__decorate([i.cast("elements")],f.prototype,"castElements",null),e.__decorate([n.reader("elements",["formElements"])],f.prototype,"readElements",null),e.__decorate([l.writer("elements")],f.prototype,"writeElements",null),e.__decorate([s.property({type:[c],json:{write:!0}})],f.prototype,"expressionInfos",void 0),e.__decorate([s.property({type:Boolean,json:{default:!1,write:!0}})],f.prototype,"preserveFieldValuesWhenHidden",void 0),e.__decorate([s.property({type:String,json:{write:!0}})],f.prototype,"title",void 0),f=h=e.__decorate([a.subclass("esri.form.FormTemplate")],f),f})},"esri/form/ExpressionInfo":function(){define(["../chunks/tslib.es6","../core/JSONSupport","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n){"use strict";var a;let l=a=class extends t.JSONSupport{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new a({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};return e.__decorate([r.property({type:String,json:{write:!0}})],l.prototype,"expression",void 0),e.__decorate([r.property({type:String,json:{write:!0}})],l.prototype,"name",void 0),e.__decorate([r.property({type:["boolean","date","number","string"],json:{write:!0}})],l.prototype,"returnType",void 0),e.__decorate([r.property({type:String,json:{write:!0}})],l.prototype,"title",void 0),l=a=e.__decorate([n.subclass("esri.form.ExpressionInfo")],l),l})},"esri/form/elements/GroupElement":function(){define(["../../chunks/tslib.es6","../../core/lang","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/cast","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","./Element","../support/formUtils"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;let u=c=class extends a{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return l.ensureType(e,p,!1)}readElements(e,t){return l.fromJSON(t.formElements,p,!1)}writeElements(e,t){t.formElements=l.toJSON(e,p,!1)}clone(){return new c({description:this.description,elements:t.clone(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};e.__decorate([r.property({json:{write:!0}})],u.prototype,"elements",void 0),e.__decorate([o.cast("elements")],u.prototype,"castElements",null),e.__decorate([s.reader("elements",["formElements"])],u.prototype,"readElements",null),e.__decorate([n.writer("elements")],u.prototype,"writeElements",null),e.__decorate([r.property({type:["collapsed","expanded"],json:{write:!0}})],u.prototype,"initialState",void 0),e.__decorate([r.property({type:String,json:{read:!1,write:!0}})],u.prototype,"type",void 0),u=c=e.__decorate([i.subclass("esri.form.elements.GroupElement")],u);const p=l.buildTypeMaps(u);return u})},"esri/form/elements/Element":function(){define(["../../chunks/tslib.es6","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o){"use strict";let s=class extends t.JSONSupport{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};return e.__decorate([r.property({type:String,json:{write:!0}})],s.prototype,"description",void 0),e.__decorate([r.property({type:String,json:{write:!0}})],s.prototype,"label",void 0),e.__decorate([r.property()],s.prototype,"type",void 0),e.__decorate([r.property({type:String,json:{write:!0}})],s.prototype,"visibilityExpression",void 0),s=e.__decorate([o.subclass("esri.form.elements.Element")],s),s})},"esri/form/support/formUtils":function(){define(["exports","../../core/accessorSupport/ensureType","../elements/AttachmentElement","../elements/Element","../elements/FieldElement","../elements/RelationshipElement","../elements/TextElement","../elements/UtilityNetworkAssociationsElement"],function(e,t,r,o,s,i,n,a){"use strict";function l(e){return"text-area"===e.type}function c(e){return"text-box"===e.type}e.buildTypeMaps=function(e){return{typesWithGroup:{base:o,key:"type",typeMap:{attachment:r,field:s,group:e,relationship:i,text:n,utilityNetworkAssociations:a}},typesWithoutGroup:{base:o,key:"type",typeMap:{attachment:r,field:s,relationship:i,text:n,utilityNetworkAssociations:a}}}},e.ensureType=function(e,r,o=!0){return e?e.map(e=>t.ensureOneOfType(o?r.typesWithGroup:r.typesWithoutGroup,e)):null},e.fromJSON=function(e,t,r=!0){if(!e)return null;const o=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(e=>o[e.type]).map(e=>o[e.type].fromJSON(e))},e.isFieldElement=e=>"field"===e.type,e.isGroupElement=e=>"group"===e.type,e.isRelationshipElement=e=>"relationship"===e.type,e.isTextAreaInput=l,e.isTextBoxInput=c,e.isTextElement=e=>"text"===e.type,e.isTextInput=function(e){return l(e)||c(e)},e.isUtilityNetworkAssociationsElement=e=>"utilityNetworkAssociations"===e.type,e.toJSON=function(e,t,r=!0){if(!e)return null;const o=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(e=>o[e.type]).map(e=>e.toJSON())},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/form/elements/AttachmentElement":function(){define(["../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./Element","./inputs/attachments/AttachmentInput","./inputs/attachments/support/inputs"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;const u=l.buildTypeMaps(a);let p=c=class extends n{constructor(e){super(e),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){return new c({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:this.input?.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};return e.__decorate([t.property({type:Boolean,json:{write:!0}})],p.prototype,"allowUserRename",void 0),e.__decorate([t.property({type:String,json:{write:{isRequired:!0}}})],p.prototype,"attachmentKeyword",void 0),e.__decorate([t.property({type:Boolean,json:{write:!0}})],p.prototype,"displayFilename",void 0),e.__decorate([t.property({type:String,json:{write:!0}})],p.prototype,"editableExpression",void 0),e.__decorate([t.property({type:String,json:{write:!0}})],p.prototype,"filenameExpression",void 0),e.__decorate([t.property({types:u.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],p.prototype,"input",void 0),e.__decorate([t.property({type:Number,json:{write:!0}})],p.prototype,"maxAttachmentCount",void 0),e.__decorate([t.property({type:Number,json:{write:!0}})],p.prototype,"minAttachmentCount",void 0),e.__decorate([t.property({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],p.prototype,"type",void 0),e.__decorate([t.property({type:Boolean,json:{write:!0}})],p.prototype,"useOriginalFilename",void 0),p=c=e.__decorate([i.subclass("esri.form.elements.AttachmentElement")],p),p})},"esri/form/elements/inputs/attachments/AttachmentInput":function(){define(["../../../../chunks/tslib.es6","../../../../core/accessorSupport/decorators/property","../../../../core/accessorSupport/decorators/cast","../../../../core/has","../../../../core/RandomLCG","../../../../core/accessorSupport/decorators/reader","../../../../core/accessorSupport/decorators/subclass","../../../../core/accessorSupport/decorators/writer","./Input","./support/inputs"],function(e,t,r,o,s,i,n,a,l,c){"use strict";let u=class extends l{constructor(e){super(e),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(e){return c.ensureType(e,p,!0)}readInputs(e,t){return c.fromJSON(t.inputTypes,p,!0)}writeInputs(e,t){t.inputTypes=c.toJSON(e,p,!0)}};e.__decorate([t.property({type:["attachment"],readOnly:!0,json:{write:!0}})],u.prototype,"type",void 0),e.__decorate([t.property({type:["any","exact","exactOrNone"],json:{write:!0}})],u.prototype,"attachmentAssociationType",void 0),e.__decorate([t.property({json:{write:{isRequired:!0}}})],u.prototype,"inputTypes",void 0),e.__decorate([r.cast("inputTypes")],u.prototype,"castInputs",null),e.__decorate([i.reader("inputTypes")],u.prototype,"readInputs",null),e.__decorate([a.writer("inputTypes")],u.prototype,"writeInputs",null),u=e.__decorate([n.subclass("esri.form.elements.inputs.attachments.AttachmentInput")],u);const p=c.buildTypeMaps(u);return u})},"esri/form/elements/inputs/attachments/Input":function(){define(["../../../../chunks/tslib.es6","../../../../core/Clonable","../../../../core/JSONSupport","../../../../core/accessorSupport/decorators/property","../../../../core/has","../../../../core/Logger","../../../../core/RandomLCG","../../../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a){"use strict";let l=class extends(t.ClonableMixin(r.JSONSupport)){constructor(e){super(e),this.type=null}};return e.__decorate([o.property()],l.prototype,"type",void 0),l=e.__decorate([a.subclass("esri.form.elements.inputs.attachments.Input")],l),l})},"esri/form/elements/inputs/attachments/support/inputs":function(){define(["exports","../../../../../core/accessorSupport/ensureType","../AudioInput","../DocumentInput","../ImageInput","../Input","../SignatureInput","../VideoInput"],function(e,t,r,o,s,i,n,a){"use strict";e.buildTypeMaps=function(e){return{nestableTypes:{base:i,key:"type",typeMap:{audio:r,document:o,image:s,signature:n,video:a}},allTypes:{base:i,key:"type",typeMap:{attachment:e,audio:r,document:o,image:s,signature:n,video:a}}}},e.ensureType=function(e,r,o){return e?e.map(e=>t.ensureOneOfType(o?r.nestableTypes:r.allTypes,e)):null},e.fromJSON=function(e,t,r){if(!e)return null;const o=r?t.nestableTypes.typeMap:t.allTypes.typeMap;return e.filter(e=>o[e.type]).map(e=>o[e.type].fromJSON(e))},e.toJSON=function(e,t,r){if(!e)return null;const o=r?t.nestableTypes.typeMap:t.allTypes.typeMap;return e.filter(e=>o[e.type]).map(e=>e.toJSON())},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/form/elements/inputs/attachments/AudioInput":function(){define(["../../../../chunks/tslib.es6","../../../../core/accessorSupport/decorators/property","../../../../core/has","../../../../core/Logger","../../../../core/RandomLCG","../../../../core/accessorSupport/decorators/subclass","./Input","./support/utils"],function(e,t,r,o,s,i,n,a){"use strict";let l=class extends n{constructor(e){super(e),this.type="audio",this.inputMethod="any",this.maxDuration=null}};return e.__decorate([t.property({type:["audio"],readOnly:!0,json:{write:!0}})],l.prototype,"type",void 0),e.__decorate([t.property({type:a.mediaInputArray,json:{write:!0}})],l.prototype,"inputMethod",void 0),e.__decorate([t.property({type:Number,json:{write:!0}})],l.prototype,"maxDuration",void 0),l=e.__decorate([i.subclass("esri.form.elements.inputs.attachments.AudioInput")],l),l})},"esri/form/elements/inputs/attachments/support/utils":function(){define(["exports"],function(e){"use strict";e.mediaInputArray=["any","capture","upload"],Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/form/elements/inputs/attachments/DocumentInput":function(){define(["../../../../chunks/tslib.es6","../../../../core/accessorSupport/decorators/property","../../../../core/has","../../../../core/Logger","../../../../core/RandomLCG","../../../../core/accessorSupport/decorators/subclass","./Input"],function(e,t,r,o,s,i,n){"use strict";let a=class extends n{constructor(e){super(e),this.type="document",this.maxFileSize=null}};return e.__decorate([t.property({type:["document"],readOnly:!0,json:{write:!0}})],a.prototype,"type",void 0),e.__decorate([t.property({type:Number,json:{write:!0}})],a.prototype,"maxFileSize",void 0),a=e.__decorate([i.subclass("esri.form.elements.inputs.attachments.DocumentInput")],a),a})},"esri/form/elements/inputs/attachments/ImageInput":function(){define(["../../../../chunks/tslib.es6","../../../../core/accessorSupport/decorators/property","../../../../core/has","../../../../core/Logger","../../../../core/RandomLCG","../../../../core/accessorSupport/decorators/subclass","./Input","./support/utils"],function(e,t,r,o,s,i,n,a){"use strict";let l=class extends n{constructor(e){super(e),this.type="image",this.inputMethod="any",this.maxImageSize=null}};return e.__decorate([t.property({type:["image"],readOnly:!0,json:{write:!0}})],l.prototype,"type",void 0),e.__decorate([t.property({type:a.mediaInputArray,json:{write:!0}})],l.prototype,"inputMethod",void 0),e.__decorate([t.property({type:Number,json:{write:!0}})],l.prototype,"maxImageSize",void 0),l=e.__decorate([i.subclass("esri.form.elements.inputs.attachments.ImageInput")],l),l})},"esri/form/elements/inputs/attachments/SignatureInput":function(){define(["../../../../chunks/tslib.es6","../../../../core/accessorSupport/decorators/property","../../../../core/has","../../../../core/Logger","../../../../core/RandomLCG","../../../../core/accessorSupport/decorators/subclass","./Input","./support/utils"],function(e,t,r,o,s,i,n,a){"use strict";let l=class extends n{constructor(e){super(e),this.type="signature",this.inputMethod="any"}};return e.__decorate([t.property({type:["signature"],readOnly:!0,json:{write:!0}})],l.prototype,"type",void 0),e.__decorate([t.property({type:a.mediaInputArray,json:{write:!0}})],l.prototype,"inputMethod",void 0),l=e.__decorate([i.subclass("esri.form.elements.inputs.attachments.SignatureInput")],l),l})},"esri/form/elements/inputs/attachments/VideoInput":function(){define(["../../../../chunks/tslib.es6","../../../../core/accessorSupport/decorators/property","../../../../core/has","../../../../core/Logger","../../../../core/RandomLCG","../../../../core/accessorSupport/decorators/subclass","./Input","./support/utils"],function(e,t,r,o,s,i,n,a){"use strict";let l=class extends n{constructor(e){super(e),this.type="video",this.inputMethod="any",this.maxDuration=null}};return e.__decorate([t.property({type:["video"],readOnly:!0,json:{write:!0}})],l.prototype,"type",void 0),e.__decorate([t.property({type:a.mediaInputArray,json:{write:!0}})],l.prototype,"inputMethod",void 0),e.__decorate([t.property({type:Number,json:{write:!0}})],l.prototype,"maxDuration",void 0),l=e.__decorate([i.subclass("esri.form.elements.inputs.attachments.VideoInput")],l),l})},"esri/form/elements/FieldElement":function(){define(["../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./Element","./inputs","../../layers/support/domains"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;let u=c=class extends n{constructor(e){super(e),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new c({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};return e.__decorate([t.property({types:l.types,json:{read:{reader:l.fromJSON},write:!0}})],u.prototype,"domain",void 0),e.__decorate([t.property({type:Boolean,json:{write:!0}})],u.prototype,"editable",void 0),e.__decorate([t.property({type:String,json:{write:!0}})],u.prototype,"editableExpression",void 0),e.__decorate([t.property({type:String,json:{write:!0}})],u.prototype,"fieldName",void 0),e.__decorate([t.property({type:String,json:{write:!0}})],u.prototype,"hint",void 0),e.__decorate([t.property({types:a.types,json:{read:{source:"inputType"},write:{target:"inputType"}}})],u.prototype,"input",void 0),e.__decorate([t.property({type:String,json:{write:!0}})],u.prototype,"requiredExpression",void 0),e.__decorate([t.property({type:String,json:{read:!1,write:!0}})],u.prototype,"type",void 0),e.__decorate([t.property({type:String,json:{write:!0}})],u.prototype,"valueExpression",void 0),u=c=e.__decorate([i.subclass("esri.form.elements.FieldElement")],u),u})},"esri/form/elements/inputs":function(){define(["exports","./inputs/BarcodeScannerInput","./inputs/ComboBoxInput","./inputs/DatePickerInput","./inputs/DateTimeOffsetPickerInput","./inputs/DateTimePickerInput","./inputs/Input","./inputs/RadioButtonsInput","./inputs/SwitchInput","./inputs/TextAreaInput","./inputs/TextBoxInput","./inputs/TimePickerInput"],function(e,t,r,o,s,i,n,a,l,c,u,p){"use strict";const d=t,h=r,y=o,f=s,m=i,g=a,b=l,_=c,S=u,v=p,w={base:n,key:"type",typeMap:{"barcode-scanner":d,"combo-box":h,"date-picker":y,"datetime-picker":m,"datetimeoffset-picker":f,"radio-buttons":g,switch:b,"text-area":_,"text-box":S,"time-picker":v}};e.BarcodeScannerInput=d,e.ComboBoxInput=h,e.DatePickerInput=y,e.DateTimeOffsetPickerInput=f,e.DateTimePickerInput=m,e.RadioButtonsInput=g,e.SwitchInput=b,e.TextAreaInput=_,e.TextBoxInput=S,e.TimePickerInput=v,e.types=w,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/form/elements/inputs/BarcodeScannerInput":function(){define(["../../../chunks/tslib.es6","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","./TextInput"],function(e,t,r,o,s,i,n){"use strict";var a;let l=a=class extends n{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new a({maxLength:this.maxLength,minLength:this.minLength})}};return e.__decorate([t.property({type:["barcode-scanner"],json:{read:!1,write:!0}})],l.prototype,"type",void 0),l=a=e.__decorate([i.subclass("esri.form.elements.inputs.BarcodeScannerInput")],l),l})},"esri/form/elements/inputs/TextInput":function(){define(["../../../chunks/tslib.es6","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","./Input"],function(e,t,r,o,s,i,n){"use strict";let a=class extends n{constructor(e){super(e),this.maxLength=null,this.minLength=0}};return e.__decorate([t.property({type:Number,json:{write:!0}})],a.prototype,"maxLength",void 0),e.__decorate([t.property({type:Number,json:{write:!0}})],a.prototype,"minLength",void 0),a=e.__decorate([i.subclass("esri.form.elements.inputs.TextInput")],a),a})},"esri/form/elements/inputs/Input":function(){define(["../../../chunks/tslib.es6","../../../core/JSONSupport","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n){"use strict";let a=class extends t.JSONSupport{constructor(e){super(e),this.type=null}};return e.__decorate([r.property()],a.prototype,"type",void 0),a=e.__decorate([n.subclass("esri.form.elements.inputs.Input")],a),a})},"esri/form/elements/inputs/ComboBoxInput":function(){define(["../../../chunks/tslib.es6","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","./Input"],function(e,t,r,o,s,i,n){"use strict";var a;let l=a=class extends n{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new a({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};return e.__decorate([t.property({type:String,json:{write:!0}})],l.prototype,"noValueOptionLabel",void 0),e.__decorate([t.property({type:Boolean,json:{write:!0}})],l.prototype,"showNoValueOption",void 0),e.__decorate([t.property({type:["combo-box"],json:{read:!1,write:!0}})],l.prototype,"type",void 0),l=a=e.__decorate([i.subclass("esri.form.elements.inputs.ComboBoxInput")],l),l})},"esri/form/elements/inputs/DatePickerInput":function(){define(["../../../chunks/tslib.es6","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/reader","../../../core/accessorSupport/decorators/subclass","../../../core/accessorSupport/decorators/writer","./Input"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;function u(e){return null!=e?e:null}function p(e){return null!=e?e:null}let d=c=class extends l{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,t){return u(t.max)}writeMax(e,t){t.max=p(e)}readMin(e,t){return u(t.min)}writeMin(e,t){t.min=p(e)}clone(){return new c({max:this.max,min:this.min})}};return e.__decorate([t.property({type:String,json:{type:String,write:!0}})],d.prototype,"max",void 0),e.__decorate([i.reader("max")],d.prototype,"readMax",null),e.__decorate([a.writer("max")],d.prototype,"writeMax",null),e.__decorate([t.property({type:String,json:{type:String,write:!0}})],d.prototype,"min",void 0),e.__decorate([i.reader("min")],d.prototype,"readMin",null),e.__decorate([a.writer("min")],d.prototype,"writeMin",null),e.__decorate([t.property({type:["date-picker"],json:{read:!1,write:!0}})],d.prototype,"type",void 0),d=c=e.__decorate([n.subclass("esri.form.elements.inputs.DatePickerInput")],d),d})},"esri/form/elements/inputs/DateTimeOffsetPickerInput":function(){define(["../../../chunks/tslib.es6","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/reader","../../../core/accessorSupport/decorators/subclass","../../../core/accessorSupport/decorators/writer","./Input"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;function u(e){return null!=e?e:null}function p(e){return null!=e?e:null}let d=c=class extends l{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,t){return u(t.max)}writeMax(e,t){t.max=p(e)}readMin(e,t){return u(t.min)}writeMin(e,t){t.min=p(e)}readTimeResolution(e,t){return u(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=p(e)}clone(){return new c({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};return e.__decorate([t.property({type:Boolean,json:{write:!0}})],d.prototype,"includeTimeOffset",void 0),e.__decorate([t.property({type:String,json:{type:String,write:!0}})],d.prototype,"max",void 0),e.__decorate([i.reader("max")],d.prototype,"readMax",null),e.__decorate([a.writer("max")],d.prototype,"writeMax",null),e.__decorate([t.property({type:String,json:{type:String,write:!0}})],d.prototype,"min",void 0),e.__decorate([i.reader("min")],d.prototype,"readMin",null),e.__decorate([a.writer("min")],d.prototype,"writeMin",null),e.__decorate([t.property({type:String,json:{type:String,write:!0}})],d.prototype,"timeResolution",void 0),e.__decorate([i.reader("timeResolution")],d.prototype,"readTimeResolution",null),e.__decorate([a.writer("timeResolution")],d.prototype,"writeTimeResolution",null),e.__decorate([t.property({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],d.prototype,"type",void 0),d=c=e.__decorate([n.subclass("esri.form.elements.inputs.DateTimeOffsetPickerInput")],d),d})},"esri/form/elements/inputs/DateTimePickerInput":function(){define(["../../../chunks/tslib.es6","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/reader","../../../core/accessorSupport/decorators/subclass","../../../core/accessorSupport/decorators/writer","./Input"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;function u(e){return null!=e?new Date(e):null}function p(e){return e?e.getTime():null}let d=c=class extends l{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return u(t.max)}writeMax(e,t){t.max=p(e)}readMin(e,t){return u(t.min)}writeMin(e,t){t.min=p(e)}clone(){return new c({includeTime:this.includeTime,max:this.max,min:this.min})}};return e.__decorate([t.property({type:Boolean,json:{write:!0}})],d.prototype,"includeTime",void 0),e.__decorate([t.property({type:Date,json:{type:Number,write:!0}})],d.prototype,"max",void 0),e.__decorate([i.reader("max")],d.prototype,"readMax",null),e.__decorate([a.writer("max")],d.prototype,"writeMax",null),e.__decorate([t.property({type:Date,json:{type:Number,write:!0}})],d.prototype,"min",void 0),e.__decorate([i.reader("min")],d.prototype,"readMin",null),e.__decorate([a.writer("min")],d.prototype,"writeMin",null),e.__decorate([t.property({type:["datetime-picker"],json:{read:!1,write:!0}})],d.prototype,"type",void 0),d=c=e.__decorate([n.subclass("esri.form.elements.inputs.DateTimePickerInput")],d),d})},"esri/form/elements/inputs/RadioButtonsInput":function(){define(["../../../chunks/tslib.es6","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","./Input"],function(e,t,r,o,s,i,n){"use strict";var a;let l=a=class extends n{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new a({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};return e.__decorate([t.property({type:String,json:{write:!0}})],l.prototype,"noValueOptionLabel",void 0),e.__decorate([t.property({type:Boolean,json:{write:!0}})],l.prototype,"showNoValueOption",void 0),e.__decorate([t.property({type:["radio-buttons"],json:{read:!1,write:!0}})],l.prototype,"type",void 0),l=a=e.__decorate([i.subclass("esri.form.elements.inputs.RadioButtonsInput")],l),l})},"esri/form/elements/inputs/SwitchInput":function(){define(["../../../chunks/tslib.es6","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","./Input"],function(e,t,r,o,s,i,n){"use strict";var a;let l=a=class extends n{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new a({offValue:this.offValue,onValue:this.onValue})}};return e.__decorate([t.property({type:[String,Number],json:{write:!0}})],l.prototype,"offValue",void 0),e.__decorate([t.property({type:[String,Number],json:{write:!0}})],l.prototype,"onValue",void 0),e.__decorate([t.property({type:["switch"],json:{read:!1,write:!0}})],l.prototype,"type",void 0),l=a=e.__decorate([i.subclass("esri.form.elements.inputs.SwitchInput")],l),l})},"esri/form/elements/inputs/TextAreaInput":function(){define(["../../../chunks/tslib.es6","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","./TextInput"],function(e,t,r,o,s,i,n){"use strict";var a;let l=a=class extends n{constructor(e){super(e),this.type="text-area"}clone(){return new a({maxLength:this.maxLength,minLength:this.minLength})}};return e.__decorate([t.property({type:["text-area"],json:{read:!1,write:!0}})],l.prototype,"type",void 0),l=a=e.__decorate([i.subclass("esri.form.elements.inputs.TextAreaInput")],l),l})},"esri/form/elements/inputs/TextBoxInput":function(){define(["../../../chunks/tslib.es6","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","./TextInput"],function(e,t,r,o,s,i,n){"use strict";var a;let l=a=class extends n{constructor(e){super(e),this.type="text-box"}clone(){return new a({maxLength:this.maxLength,minLength:this.minLength})}};return e.__decorate([t.property({type:["text-box"],json:{read:!1,write:!0}})],l.prototype,"type",void 0),l=a=e.__decorate([i.subclass("esri.form.elements.inputs.TextBoxInput")],l),l})},"esri/form/elements/inputs/TimePickerInput":function(){define(["../../../chunks/tslib.es6","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/reader","../../../core/accessorSupport/decorators/subclass","../../../core/accessorSupport/decorators/writer","./Input"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;function u(e){return null!=e?e:null}function p(e){return null!=e?e:null}let d=c=class extends l{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,t){return u(t.max)}writeMax(e,t){t.max=p(e)}readMin(e,t){return u(t.min)}writeMin(e,t){t.min=p(e)}readTimeResolution(e,t){return u(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=p(e)}clone(){return new c({max:this.max,min:this.min,timeResolution:this.timeResolution})}};return e.__decorate([t.property({type:String,json:{type:String,write:!0}})],d.prototype,"max",void 0),e.__decorate([i.reader("max")],d.prototype,"readMax",null),e.__decorate([a.writer("max")],d.prototype,"writeMax",null),e.__decorate([t.property({type:String,json:{type:String,write:!0}})],d.prototype,"min",void 0),e.__decorate([i.reader("min")],d.prototype,"readMin",null),e.__decorate([a.writer("min")],d.prototype,"writeMin",null),e.__decorate([t.property({type:String,json:{type:String,write:!0}})],d.prototype,"timeResolution",void 0),e.__decorate([i.reader("timeResolution")],d.prototype,"readTimeResolution",null),e.__decorate([a.writer("timeResolution")],d.prototype,"writeTimeResolution",null),e.__decorate([t.property({type:["time-picker"],json:{read:!1,write:!0}})],d.prototype,"type",void 0),d=c=e.__decorate([n.subclass("esri.form.elements.inputs.TimePickerInput")],d),d})},"esri/layers/support/domains":function(){define(["exports","../../core/has","./CodedValueDomain","./Domain","./InheritedDomain","./RangeDomain"],function(e,t,r,o,s,i){"use strict";const n={key:"type",base:o,typeMap:{range:i,"coded-value":r,inherited:s}};Object.defineProperty(e,"CodedValueDomain",{enumerable:!0,get:()=>r}),Object.defineProperty(e,"DomainBase",{enumerable:!0,get:()=>o}),Object.defineProperty(e,"InheritedDomain",{enumerable:!0,get:()=>s}),Object.defineProperty(e,"RangeDomain",{enumerable:!0,get:()=>i}),e.fromJSON=function(e){if(!e?.type)return null;switch(e.type){case"range":return i.fromJSON(e);case"codedValue":return r.fromJSON(e);case"inherited":return s.fromJSON(e)}return null},e.types=n,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/CodedValueDomain":function(){define(["exports","../../chunks/tslib.es6","../../core/lang","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/subclass","./CodedValue","./Domain"],function(e,t,r,o,s,i,n,a,l,c){"use strict";var u;return e.default=class extends c{static{u=this}constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some(e=>(String(e.code)===r&&(t=e.name),!!t))}return t}clone(){return new u({codedValues:r.clone(this.codedValues),name:this.name})}},t.__decorate([o.property({type:[l.CodedValue],json:{write:{isRequired:!0}}})],e.default.prototype,"codedValues",void 0),t.__decorate([n.enumeration({codedValue:"coded-value"})],e.default.prototype,"type",void 0),e.default=u=t.__decorate([a.subclass("esri.layers.support.CodedValueDomain")],e.default),e.default})},"esri/layers/support/CodedValue":function(){define(["exports","../../chunks/tslib.es6","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a){"use strict";var l;e.CodedValue=l=class extends r.JSONSupport{constructor(e){super(e),this.name=null,this.code=null}clone(){return new l({name:this.name,code:this.code})}},t.__decorate([o.property({type:String,json:{write:{isRequired:!0}}})],e.CodedValue.prototype,"name",void 0),t.__decorate([o.property({type:[String,Number],json:{write:{isRequired:!0}}})],e.CodedValue.prototype,"code",void 0),e.CodedValue=l=t.__decorate([a.subclass("esri.layers.support.CodedValue")],e.CodedValue),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Domain":function(){define(["exports","../../chunks/tslib.es6","../../core/jsonMap","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l,c){"use strict";const u=new r.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});return e.default=class extends o.JSONSupport{constructor(e){super(e),this.name=null,this.type=null}},t.__decorate([s.property({type:String,json:{write:!0}})],e.default.prototype,"name",void 0),t.__decorate([l.enumeration(u),s.property({json:{write:{isRequired:!0}}})],e.default.prototype,"type",void 0),e.default=t.__decorate([c.subclass("esri.layers.support.Domain")],e.default),e.default})},"esri/layers/support/InheritedDomain":function(){define(["exports","../../chunks/tslib.es6","../../core/Logger","../../core/has","../../core/RandomLCG","../../core/Error","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/subclass","./Domain"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;return e.default=class extends l{static{c=this}constructor(e){super(e),this.type="inherited"}clone(){return new c}},t.__decorate([n.enumeration({inherited:"inherited"})],e.default.prototype,"type",void 0),e.default=c=t.__decorate([a.subclass("esri.layers.support.InheritedDomain")],e.default),e.default})},"esri/layers/support/RangeDomain":function(){define(["exports","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/subclass","./Domain"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;return e.default=class extends l{static{c=this}constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new c({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}},t.__decorate([r.property({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]},isRequired:!0}}})],e.default.prototype,"maxValue",void 0),t.__decorate([r.property({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]},isRequired:!0}}})],e.default.prototype,"minValue",void 0),t.__decorate([n.enumeration({range:"range"})],e.default.prototype,"type",void 0),e.default=c=t.__decorate([a.subclass("esri.layers.support.RangeDomain")],e.default),e.default})},"esri/form/elements/RelationshipElement":function(){define(["../../chunks/tslib.es6","../../core/lang","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/subclass","./Element","../../popup/support/RelatedRecordsInfoFieldOrder"],function(e,t,r,o,s,i,n,a){"use strict";var l;let c=l=class extends n{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new l({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:t.clone(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};return e.__decorate([r.property({type:Number,json:{write:!0}})],c.prototype,"displayCount",void 0),e.__decorate([r.property({type:["list"],json:{write:!0}})],c.prototype,"displayType",void 0),e.__decorate([r.property({type:String,json:{write:!0}})],c.prototype,"editableExpression",void 0),e.__decorate([r.property({type:[a],json:{write:!0}})],c.prototype,"orderByFields",void 0),e.__decorate([r.property({type:Number,json:{write:!0}})],c.prototype,"relationshipId",void 0),e.__decorate([r.property({type:["relationship"],json:{read:!1,write:!0}})],c.prototype,"type",void 0),c=l=e.__decorate([i.subclass("esri.form.elements.RelationshipElement")],c),c})},"esri/form/elements/TextElement":function(){define(["../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./Element"],function(e,t,r,o,s,i,n){"use strict";var a;let l=a=class extends n{constructor(e){super(e),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new a({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};return e.__decorate([t.property({type:String,json:{write:!0}})],l.prototype,"text",void 0),e.__decorate([t.property({type:String,json:{write:!0}})],l.prototype,"textFormat",void 0),e.__decorate([t.property({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],l.prototype,"type",void 0),l=a=e.__decorate([i.subclass("esri.form.elements.TextElement")],l),l})},"esri/form/elements/UtilityNetworkAssociationsElement":function(){define(["../../chunks/tslib.es6","../../core/Clonable","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./Element","../../popup/support/UtilityNetworkAssociationType"],function(e,t,r,o,s,i,n,a,l){"use strict";let c=class extends(t.ClonableMixin(a)){constructor(e){super(e),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};return e.__decorate([r.property({type:[l],json:{write:{isRequired:!0}}})],c.prototype,"associationTypes",void 0),e.__decorate([r.property({type:String,json:{write:!0}})],c.prototype,"editableExpression",void 0),e.__decorate([r.property({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],c.prototype,"type",void 0),c=e.__decorate([n.subclass("esri.form.elements.UtilityNetworkAssociationsElement")],c),c})},"esri/graphic/FeatureGraphicOrigin":function(){define(["./GraphicOrigin","./isFeatureGraphicOrigin"],function(e,t){"use strict";var r;class o extends e{static{r=t.isFeatureGraphicOriginSymbol}constructor(e){super(),this[r]=!0,this.type="feature",this.layer=e}}return o})},"esri/graphic/GraphicOrigin":function(){define(["exports","../chunks/tslib.es6","../core/Logger","../core/has","../core/RandomLCG","../core/Error","../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n){"use strict";return e.default=class{},e.default=t.__decorate([n.subclass("esri.graphic.GraphicOrigin")],e.default),e.default})},"esri/graphic/isFeatureGraphicOrigin":function(){define(["exports"],function(e){"use strict";const t=Symbol("isFeatureGraphicOrigin");e.isFeatureGraphicOrigin=function(e){return!!e&&t in e},e.isFeatureGraphicOriginSymbol=t,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/MemorySource":function(){define(["exports","../../../chunks/tslib.es6","../../../Graphic","../../../core/Collection","../../../core/Error","../../../core/has","../../../core/Loadable","../../../core/Logger","../../../core/Promise","../../../core/workers/workers","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/ensureType","../../../core/RandomLCG","../../../core/accessorSupport/decorators/shared","../../../core/accessorSupport/decorators/subclass","../../../geometry/Extent","../../../geometry/Polygon","../../../geometry/support/typeUtils","../../../rest/query/operations/editsZScale","../../../rest/query/operations/queryZScale","../../../rest/support/FeatureSet"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b,_,S){"use strict";let v=0;e.MemorySource=class extends(n.LoadableMixin(l.EsriPromiseMixin(o))){constructor(e){super(e),this._idToClientGeometry=null,this.type="memory"}load(e){const t=null!=e?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}get _workerGeometryType(){const e=this.layer?.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,t={}){await this.load(t);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);_.applyFeatureSetZUnitScaling(e,this.layer.spatialReference,r);const o=S.fromJSON(r);if(!this._requiresClientGraphicMapping()||!this._idToClientGeometry)return o;const s=this.layer.objectIdField;for(const e of o.features){const t=e.attributes[s],r=this._idToClientGeometry.get(t);void 0!==r&&(e.geometry=r)}return o.geometryType=this.layer.geometryType,o}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new s("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return _.applyFeatureSetZUnitScaling(e,this.layer.spatialReference,r),r}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(e=>({count:e.count,extent:f.fromJSON(e.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}async queryAttributeBins(e,t={}){return await this.load(),this._connection.invoke("queryAttributeBins",e?.toJSON(),t)}async _applyEdits(e){if(!this._connection)throw new s("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let r=null;const o=[],i=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const n=e=>"objectId"in e&&null!=e.objectId?e.objectId:"attributes"in e&&null!=e.attributes[t]?e.attributes[t]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const t of e.deleteFeatures){const e=n(t);null!=e&&o.push(e)}const a=e.updateFeatures&&this._idToClientGeometry?new Map:null;if(e.updateFeatures)for(const t of e.updateFeatures)if(i.push(this._serializeFeature(t)),a&&null!=t.geometry){const e=n(t);null!=e&&a.set(e,t)}b.unapplyEditsZUnitScaling(r?r.features:null,i,this.layer.spatialReference);const{fullExtent:l,featureEditResults:c}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:i,deletes:o});return this.fullExtent=l,r&&r.finish(c.uidToObjectId),this._updateIdToClientGeometries(a,c),this._createEditsResult(c)}async _prepareClientMapping(e,t){if("mesh"!==this._layerOrSourceGeometryType||null==e)return;const r=[];for(const{geometry:o}of e)null==o||"mesh"!==o.type||o.hasExtent||o.loaded||r.push(o.load({signal:t}));r.length&&await Promise.all(r)}_updateIdToClientGeometries(e,t){if(this._idToClientGeometry){if(e)for(const r of t.updateResults){if(!r.success)continue;const t=e.get(r.objectId);null!=t&&this._addIdToClientGeometry(t)}for(const e of t.deleteResults)e.success&&this._idToClientGeometry.delete(e.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=!0===e.success?null:e.error||{code:void 0,description:""};return{objectId:e.objectId,globalId:e.globalId,error:t?new s("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,r=new Array(e.length);let o=null;for(let s=0;s<e.length;s++){const i=e[s],n=this._serializeFeature(i);o||null==i.geometry||(o=i.geometry.type),r[s]=n,t.set(`${n.uid}`,i)}const s=this;return{features:r,inferredGeometryType:o,finish(e){const r=s.sourceJSON.objectIdField;for(const o in e){const i=e[o],n=t.get(o);n&&(n.attributes||(n.attributes={}),-1===i?delete n.attributes[r]:n.attributes[r]=i,s._addIdToClientGeometry(n))}}}}_addIdToClientGeometry(e){if(!this._idToClientGeometry)return;const t=this.sourceJSON.objectIdField,r=e.attributes?.[t];null!=r&&this._idToClientGeometry.set(r,e.geometry??null)}get _layerOrSourceGeometryType(){return this.layer?.geometryType??this.sourceJSON?.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return"mesh"===e||"multipatch"===e||"extent"===e}_serializeFeature(e){const{attributes:t}=e,r=this._geometryForSerialization(e),o=(v++).toString();return r?{uid:o,geometry:r.toJSON(),attributes:t}:{uid:o,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return null==t?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?m.fromExtent(t.extent):null:t}async _startWorker(e){this._connection=await c.open("MemorySourceWorker",{strategy:i("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{fields:t,spatialReference:r,objectIdField:o,hasM:s,hasZ:n,timeInfo:l,dateFieldsTimeZone:u}=this.layer,p="defaults"===this.layer.originOf("spatialReference");await this._prepareClientMapping(this.items,e);const d=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",e=>{a.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),e.preventDefault()}));const h={features:d.features,fields:t?.map(e=>e.toJSON()),geometryType:g.typeKebabDictionary.toJSON(this._workerGeometryType),hasM:"mesh"!==this._layerOrSourceGeometryType&&s,hasZ:"mesh"===this._layerOrSourceGeometryType||n,objectIdField:o,spatialReference:p?null:r&&r.toJSON(),timeInfo:l?.toJSON()??null,dateFieldsTimeZone:u},y=await this._connection.invoke("load",h,{signal:e});for(const e of y.warnings)a.getLogger(this.layer).warn("#load()",`${e.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:e});y.featureErrors.length&&a.getLogger(this.layer).warn("#load()",`Encountered ${y.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:y.featureErrors});const f=y.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(d.inferredGeometryType)&&(f.geometryType=g.typeKebabDictionary.toJSON(d.inferredGeometryType)),this.sourceJSON=f,this._requiresClientGraphicMapping()&&(this._idToClientGeometry=new Map),d.finish(y.assignedObjectIds)}},t.__decorate([h.shared({Type:r,ensureType:p.ensureType(r)})],e.MemorySource.prototype,"itemType",void 0),t.__decorate([u.property()],e.MemorySource.prototype,"type",void 0),t.__decorate([u.property({constructOnly:!0})],e.MemorySource.prototype,"layer",void 0),t.__decorate([u.property({readOnly:!0})],e.MemorySource.prototype,"_workerGeometryType",null),t.__decorate([u.property()],e.MemorySource.prototype,"sourceJSON",void 0),e.MemorySource=t.__decorate([y.subclass("esri.layers.graphics.sources.MemorySource")],e.MemorySource),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/Graphic":function(){define(["exports","./chunks/tslib.es6","./PopupTemplate","./core/Clonable","./core/deprecate","./core/JSONSupport","./core/Logger","./core/reactiveUtils","./core/uid","./core/accessorSupport/decorators/property","./core/has","./core/RandomLCG","./core/accessorSupport/decorators/subclass","./core/support/jsonUtils","./geometry/support/jsonUtils","./geometry/support/typeUtils","./layers/graphics/data/createFeatureId","./symbols/support/typeUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g){"use strict";var b;function _(e){if(null==e)return null;const t={};for(const r in e){const o=e[r];o&&(t[r]=o.toJSON())}return 0!==Object.keys(t).length?t:null}return e.default=class extends(o.ClonableMixin(i.JSONSupport)){static{b=this}constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:l.generateUID(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&s.deprecatedConstructorSignature(n.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),"mesh"!==e?.type&&this._notifyLayer("geometry",t,e))}set popupTemplate(e){const t=this._get("popupTemplate");t!==e&&(this._set("popupTemplate",e),this._notifyLayer("popupTemplate",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}get version(){return this._version}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new b({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const r of[t,this.sourceLayer,this.layer])if(r&&"object"==typeof r){if("popupTemplate"in r&&r.popupTemplate)return r.popupTemplate;if(e&&"defaultPopupTemplate"in r&&null!=r.defaultPopupTemplate)return r.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t}}getObjectId(){const e=this.sourceLayer??this.layer;return e?m.createFeatureIdFromLayer(this,e):null}getGlobalId(){const e=this.sourceLayer??this.layer;return e&&"globalIdField"in e&&e.globalIdField?this.getAttribute(e.globalIdField):null}toJSON(){return{aggregateGeometries:_(this.aggregateGeometries),geometry:null!=this.geometry?this.geometry.toJSON():null,symbol:null!=this.symbol?this.symbol.toJSON():null,attributes:h.isSerializable(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if("mesh"===t?.type){const r={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,t,r,o){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:t,newValue:r};"origin-transform"===e&&(s.action=o),"attributes"===e&&(s.attributeName=o),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([a.when(()=>"mesh"===this.geometry?.type&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0,({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),a.when(()=>"mesh"===this.geometry?.type?{vertexAttributes:this.geometry.vertexAttributes}:void 0,()=>{const e=this.geometry;"mesh"===e?.type&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=e.transform?.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}},t.__decorate([c.property({value:null,json:{read:function(e){if(!e)return null;const t={};for(const r in e){const o=y.fromJSON(e[r]);o&&(t[r]=o)}return 0!==Object.keys(t).length?t:null}}})],e.default.prototype,"aggregateGeometries",null),t.__decorate([c.property({value:null})],e.default.prototype,"attributes",null),t.__decorate([c.property({value:null,types:f.geometryTypes,json:{read:y.fromJSON}})],e.default.prototype,"geometry",null),t.__decorate([c.property({type:Boolean})],e.default.prototype,"isAggregate",void 0),t.__decorate([c.property({clonable:!1})],e.default.prototype,"layer",void 0),t.__decorate([c.property({clonable:"reference"})],e.default.prototype,"origin",void 0),t.__decorate([c.property({type:r,value:null})],e.default.prototype,"popupTemplate",null),t.__decorate([c.property({clonable:"reference"})],e.default.prototype,"sourceLayer",void 0),t.__decorate([c.property({value:null,types:g.symbolTypes})],e.default.prototype,"symbol",null),t.__decorate([c.property({clonable:!1,json:{read:!1,write:!1}})],e.default.prototype,"_version",void 0),t.__decorate([c.property({type:Boolean,value:!0})],e.default.prototype,"visible",null),e.default=b=t.__decorate([d.subclass("esri.Graphic")],e.default),e.default})},"esri/layers/graphics/data/createFeatureId":function(){define(["exports"],function(e){"use strict";e.createFeatureId=function(e,t){switch(t.type){case"object-id":case"unique-id-simple":return e.attributes[t.fieldName];case"unique-id-composite":{const r=[];for(const o of t.fieldNames)r.push(e.attributes[o]??null);return JSON.stringify(r)}}},e.createFeatureIdFromLayer=function(e,t){if("uniqueIdFields"in t&&t.uniqueIdFields?.length){if(1===t.uniqueIdFields.length)return e.attributes?.[t.uniqueIdFields[0]];const r=t.uniqueIdFields.map(t=>e.attributes?.[t]);return JSON.stringify(r)}return"objectIdField"in t&&t.objectIdField?e.attributes?.[t.objectIdField]:null},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/typeUtils":function(){define(["exports","../../core/accessorSupport/ensureType","../../core/accessorSupport/extensions/serializableProperty/reader","../CIMSymbol","../LabelSymbol3D","../LineSymbol3D","../MeshSymbol3D","../PictureFillSymbol","../PictureMarkerSymbol","../PointSymbol3D","../PolygonSymbol3D","../SimpleFillSymbol","../SimpleLineSymbol","../SimpleMarkerSymbol","../Symbol","../TextSymbol","../WebStyleSymbol"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m){"use strict";const g={base:y,key:"type",typeMap:{"simple-fill":p,"picture-fill":a,"picture-marker":l,"simple-line":d,"simple-marker":h,text:f,"label-3d":s,"line-3d":i,"mesh-3d":n,"point-3d":c,"polygon-3d":u,"web-style":m,cim:o},errorContext:"symbol"},b={base:y,key:"type",typeMap:{"simple-fill":p,cim:o},errorContext:"symbol"},_={base:y,key:"type",typeMap:{"picture-marker":l,"simple-marker":h,"point-3d":c,cim:o},errorContext:"symbol"},S={base:y,key:"type",typeMap:{"simple-line":d,"line-3d":i,cim:o},errorContext:"symbol"},v={base:y,key:"type",typeMap:{"simple-fill":p,"picture-fill":a,"polygon-3d":u,cim:o},errorContext:"symbol"},w={base:y,key:"type",typeMap:{"picture-marker":l,"simple-marker":h,text:f,"web-style":m,cim:o},errorContext:"symbol"},x=r.createTypeReader({types:g}),T={base:y,key:"type",typeMap:{"simple-fill":p,"picture-fill":a,"picture-marker":l,"simple-line":d,"simple-marker":h,text:f,"line-3d":i,"mesh-3d":n,"point-3d":c,"polygon-3d":u,"web-style":m,cim:o},errorContext:"symbol"},M={base:y,key:"type",typeMap:{text:f,"label-3d":s},errorContext:"symbol"},I={base:y,key:"type",typeMap:{"label-3d":s,"line-3d":i,"mesh-3d":n,"point-3d":c,"polygon-3d":u,"web-style":m},errorContext:"symbol"},O={base:y,key:"type",typeMap:{"line-3d":i,"mesh-3d":n,"point-3d":c,"polygon-3d":u,"web-style":m,cim:o},errorContext:"symbol"},P={base:y,key:"type",typeMap:{"label-3d":s},errorContext:"symbol"},k=t.ensureOneOfType(g);e.ensureType=k,e.isSymbol=function(e){return e instanceof y},e.isSymbol2D=function(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}},e.isSymbol3D=function(e){switch(e?.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}},e.lineSymbolTypes=S,e.pointSymbolTypes=_,e.polygonSymbolTypes=v,e.readSymbol=x,e.simpleFillAndCIMSymbolTypes=b,e.symbolTypes=g,e.symbolTypes3D=I,e.symbolTypesCluster=w,e.symbolTypesLabel=M,e.symbolTypesLabel3D=P,e.symbolTypesRenderer=T,e.symbolTypesRenderer3D=O,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/CIMSymbol":function(){define(["exports","../chunks/tslib.es6","../core/lang","../core/string","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","../layers/support/fieldUtils","./Symbol"],function(e,t,r,o,s,i,n,a,l,c,u,p,d){"use strict";var h;return e.default=h=class extends d{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){if("CIMSymbolReference"===this.data?.type){const r=this.data.primitiveOverrides;if(r){const o=r.map(r=>{const o=r.valueExpressionInfo;return o?p.collectArcadeFieldNames(e,t,o.expression):null});await Promise.all(o)}}}clone(){return new h({data:r.clone(this.data)})}hash(){return o.numericHash(JSON.stringify(this.data)).toString()}},t.__decorate([s.property({json:{write:!1}})],e.default.prototype,"color",void 0),t.__decorate([s.property({json:{write:!0}})],e.default.prototype,"data",void 0),t.__decorate([l.reader("data",["symbol"])],e.default.prototype,"readData",null),t.__decorate([u.writer("data",{})],e.default.prototype,"writeData",null),t.__decorate([a.enumeration({CIMSymbolReference:"cim"},{readOnly:!0})],e.default.prototype,"type",void 0),e.default=h=t.__decorate([c.subclass("esri.symbols.CIMSymbol")],e.default),e.default})},"esri/symbols/Symbol":function(){define(["exports","../chunks/tslib.es6","../Color","../core/jsonMap","../core/JSONSupport","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";const p=new o.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let d=0;return e.default=class extends s.JSONSupport{constructor(e){super(e),this.id="sym"+d++,this.type=null,this.color=new r([0,0,0,1])}readColor(e){return null!=e?.[0]?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}},t.__decorate([i.property({type:p.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:p.write,isRequired:!0}}})],e.default.prototype,"type",void 0),t.__decorate([i.property({type:r,json:{write:{allowNull:!0}}})],e.default.prototype,"color",void 0),t.__decorate([c.reader("color")],e.default.prototype,"readColor",null),e.default=t.__decorate([u.subclass("esri.symbols.Symbol")],e.default),e.default})},"esri/symbols/LabelSymbol3D":function(){define(["exports","../chunks/tslib.es6","../core/Collection","../core/lang","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","./Symbol3D","./TextSymbol3DLayer","./callouts/calloutUtils","./support/Symbol3DVerticalOffset"],function(e,t,r,o,s,i,n,a,l,c,u,p,d){"use strict";var h;const y=r.ofType({base:null,key:"type",typeMap:{text:u}});return e.default=h=class extends c{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new y,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return p.hasVisibleCallout(this)}hasVisibleVerticalOffset(){return p.hasVisibleVerticalOffset(this)}clone(){return new h({styleOrigin:o.clone(this.styleOrigin),symbolLayers:o.clone(this.symbolLayers),thumbnail:o.clone(this.thumbnail),callout:o.clone(this.callout),verticalOffset:o.clone(this.verticalOffset)})}static fromTextSymbol(e){return new h({symbolLayers:new r([u.fromTextSymbol(e)])})}},t.__decorate([s.property({type:d,json:{write:!0}})],e.default.prototype,"verticalOffset",void 0),t.__decorate([s.property(p.calloutProperty)],e.default.prototype,"callout",void 0),t.__decorate([s.property({json:{read:!1,write:!1}})],e.default.prototype,"styleOrigin",void 0),t.__decorate([s.property({type:y})],e.default.prototype,"symbolLayers",void 0),t.__decorate([a.enumeration({LabelSymbol3D:"label-3d"},{readOnly:!0})],e.default.prototype,"type",void 0),e.default=h=t.__decorate([l.subclass("esri.symbols.LabelSymbol3D")],e.default),e.default})},"esri/symbols/Symbol3D":function(){define(["exports","../chunks/tslib.es6","../core/Collection","../core/collectionUtils","../core/Logger","../core/urlUtils","../core/Warning","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/cast","../core/has","../core/RandomLCG","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","../portal/Portal","../chunks/persistableUrlUtils","./ExtrudeSymbol3DLayer","./FillSymbol3DLayer","./IconSymbol3DLayer","./LineSymbol3DLayer","./ObjectSymbol3DLayer","./PathSymbol3DLayer","./Symbol","./Symbol3DLayer","./TextSymbol3DLayer","./WaterSymbol3DLayer","./support/StyleOrigin","./support/Thumbnail"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b,_,S,v,w,x,T,M,I,O){"use strict";const P={icon:b,object:S,line:_,path:v,fill:g,extrude:m,text:T,water:M},k=r.ofType({base:x,key:"type",typeMap:P,errorContext:"symbol-layer"});return e.default=class extends w{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,o=t?.type,s=o||r;this._set("symbolLayers",new s)}get color(){return null}set color(e){this.constructed&&s.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){o.referenceSetter(e,this._get("symbolLayers"))}readStyleOrigin(e,t,r){if(e.styleUrl&&e.name){const t=f.fromJSON(e.styleUrl,r);return new I({styleUrl:t,name:e.name})}if(e.styleName&&e.name)return new I({portal:r?.portal||y.getDefault(),styleName:e.styleName,name:e.name});r?.messages&&r.messages.push(new n("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,t,r,o){if(e.styleUrl&&e.name){let r=f.toJSON(e.styleUrl,o);i.isAbsolute(r)&&(r=i.normalize(r)),t.styleOrigin={styleUrl:r,name:e.name}}else e.styleName&&e.name&&(e.portal&&o?.portal&&!i.hasSamePortal(e.portal.restUrl,o.portal.restUrl)?o?.messages&&o.messages.push(new n("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof x||e&&P[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}},t.__decorate([a.property({json:{read:!1,write:!1}})],e.default.prototype,"color",null),t.__decorate([a.property({type:k,nonNullable:!0,json:{write:!0}}),l.cast(o.castForReferenceSetter)],e.default.prototype,"symbolLayers",null),t.__decorate([a.property({type:I})],e.default.prototype,"styleOrigin",void 0),t.__decorate([p.reader("styleOrigin")],e.default.prototype,"readStyleOrigin",null),t.__decorate([h.writer("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],e.default.prototype,"writeStyleOrigin",null),t.__decorate([a.property({type:O.Thumbnail,json:{read:!1}})],e.default.prototype,"thumbnail",void 0),t.__decorate([a.property({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],e.default.prototype,"type",void 0),e.default=t.__decorate([d.subclass("esri.symbols.Symbol3D")],e.default),e.default})},"esri/symbols/ExtrudeSymbol3DLayer":function(){define(["exports","../chunks/tslib.es6","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","./Symbol3DLayer","./edges/utils","./support/Symbol3DMaterial"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";var p;return e.default=class extends l{static{p=this}constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new p({edges:this.edges?.clone(),enabled:this.enabled,material:this.material?.clone(),castShadows:this.castShadows,size:this.size})}},t.__decorate([n.enumeration({Extrude:"extrude"},{readOnly:!0})],e.default.prototype,"type",void 0),t.__decorate([r.property({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],e.default.prototype,"size",void 0),t.__decorate([r.property({type:u.Symbol3DMaterial,json:{write:!0}})],e.default.prototype,"material",void 0),t.__decorate([r.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],e.default.prototype,"castShadows",void 0),t.__decorate([r.property(c.symbol3dEdgesProperty)],e.default.prototype,"edges",void 0),e.default=p=t.__decorate([a.subclass("esri.symbols.ExtrudeSymbol3DLayer")],e.default),e.default})},"esri/symbols/Symbol3DLayer":function(){define(["exports","../chunks/tslib.es6","../core/JSONSupport","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer"],function(e,t,r,o,s,i,n,a,l){"use strict";return e.default=class extends r.JSONSupport{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,t,r){e||(t[r]=e)}},t.__decorate([o.property({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],e.default.prototype,"enabled",void 0),t.__decorate([l.writer("enabled")],e.default.prototype,"writeEnabled",null),t.__decorate([o.property({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],e.default.prototype,"type",void 0),e.default=t.__decorate([a.subclass("esri.symbols.Symbol3DLayer")],e.default),e.default})},"esri/symbols/edges/utils":function(){define(["exports","./Edges3D","./SketchEdges3D","./SolidEdges3D"],function(e,t,r,o){"use strict";const s={types:{key:"type",base:t,typeMap:{solid:o,sketch:r}},json:{write:!0}};e.symbol3dEdgesProperty=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/edges/Edges3D":function(){define(["../../chunks/tslib.es6","../../Color","../../core/JSONSupport","../../core/lang","../../core/screenUtils","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/subclass","../support/materialUtils"],function(e,t,r,o,s,i,n,a,l,c){"use strict";let u=class extends r.JSONSupport{constructor(e){super(e),this.color=new t([0,0,0,1]),this.extensionLength=0,this.size=s.px2pt(1)}clone(){}cloneProperties(){return{color:o.clone(this.color),size:this.size,extensionLength:this.extensionLength}}};return e.__decorate([i.property({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],u.prototype,"type",void 0),e.__decorate([i.property(c.colorAndTransparencyProperty({colorRequiredOnWrite:!0}))],u.prototype,"color",void 0),e.__decorate([i.property({...c.screenSizeProperty,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],u.prototype,"extensionLength",void 0),e.__decorate([i.property(c.screenSizeProperty)],u.prototype,"size",void 0),u=e.__decorate([l.subclass("esri.symbols.edges.Edges3D")],u),u})},"esri/symbols/support/materialUtils":function(){define(["exports","../../Color","../../core/screenUtils","../../core/accessorSupport/ensureType","../../webdoc/support/opacityUtils"],function(e,t,r,o,s){"use strict";function i(e,r){const o=null!=r.transparency?s.transparencyToOpacity(r.transparency):1,i=r.color;return i&&Array.isArray(i)?new t([i[0]||0,i[1]||0,i[2]||0,o]):null}function n(e,t){t.color=e.toJSON().slice(0,3);const r=s.opacityToTransparency(e.a);0!==r&&(t.transparency=r)}const a={type:Number,cast:r.toPt,json:{write:!0}};e.colorAndTransparencyProperty=function(e){return{type:t,nonNullable:e?.nonNullable,json:{type:[o.Integer],default:null,read:{source:["color","transparency"],reader:i},write:{target:{color:{type:[o.Integer],isRequired:e?.colorRequiredOnWrite},transparency:{type:o.Integer}},writer:n}}}},e.getEmissiveMode=function(e){return"emissive"===e?0:1},e.screenSizeProperty=a,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/edges/SketchEdges3D":function(){define(["../../chunks/tslib.es6","../../core/Logger","../../core/has","../../core/RandomLCG","../../core/Error","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/subclass","./Edges3D"],function(e,t,r,o,s,i,n,a){"use strict";var l;let c=l=class extends a{constructor(e){super(e),this.type="sketch"}clone(){return new l(this.cloneProperties())}};return e.__decorate([i.enumeration({sketch:"sketch"},{readOnly:!0})],c.prototype,"type",void 0),c=l=e.__decorate([n.subclass("esri.symbols.edges.SketchEdges3D")],c),c})},"esri/symbols/edges/SolidEdges3D":function(){define(["../../chunks/tslib.es6","../../core/Logger","../../core/has","../../core/RandomLCG","../../core/Error","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/subclass","./Edges3D"],function(e,t,r,o,s,i,n,a){"use strict";var l;let c=l=class extends a{constructor(e){super(e),this.type="solid"}clone(){return new l(this.cloneProperties())}};return e.__decorate([i.enumeration({solid:"solid"},{readOnly:!0})],c.prototype,"type",void 0),c=l=e.__decorate([n.subclass("esri.symbols.edges.SolidEdges3D")],c),c})},"esri/symbols/support/Symbol3DMaterial":function(){define(["exports","../../chunks/tslib.es6","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./materialUtils","./Symbol3DEmissive"],function(e,t,r,o,s,i,n,a,l,c){"use strict";var u;e.Symbol3DMaterial=u=class extends r.JSONSupport{constructor(e){super(e),this.color=null,this.emissive=new c.Symbol3DEmissive({source:"emissive"})}clone(){const e={color:this.color?.clone()??null,emissive:this.emissive?.clone()??null};return new u(e)}},t.__decorate([o.property(l.colorAndTransparencyProperty())],e.Symbol3DMaterial.prototype,"color",void 0),t.__decorate([o.property({type:c.Symbol3DEmissive,json:{write:!1}})],e.Symbol3DMaterial.prototype,"emissive",void 0),e.Symbol3DMaterial=u=t.__decorate([a.subclass("esri.symbols.support.Symbol3DMaterial")],e.Symbol3DMaterial),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/Symbol3DEmissive":function(){define(["exports","../../chunks/tslib.es6","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a){"use strict";var l;e.Symbol3DEmissive=l=class extends r.JSONSupport{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const e={strength:this.strength,source:this.source};return new l(e)}},t.__decorate([o.property({json:{write:!1}})],e.Symbol3DEmissive.prototype,"strength",void 0),t.__decorate([o.property({json:{write:!1}})],e.Symbol3DEmissive.prototype,"source",void 0),e.Symbol3DEmissive=l=t.__decorate([a.subclass("esri.symbols.support.Symbol3DEmissive")],e.Symbol3DEmissive),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/FillSymbol3DLayer":function(){define(["exports","../chunks/tslib.es6","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","./Symbol3DLayer","./edges/utils","./patterns/LineStylePattern3D","./patterns/StylePattern3D","./patterns/utils","./support/colors","./support/Symbol3DFillMaterial","./support/Symbol3DOutline"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f){"use strict";var m;return e.default=class extends l{static{m=this}constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:null!=this.edges?this.edges.clone():null,enabled:this.enabled,material:null!=this.material?this.material.clone():null,pattern:null!=this.pattern?this.pattern.clone():null,castShadows:this.castShadows,outline:null!=this.outline?this.outline.clone():null};return new m(e)}static fromSimpleFillSymbol(e){const t=e.outline&&e.outline.style&&"solid"!==e.outline.style?new u({style:e.outline.style}):null,r={size:e.outline?.width??0,color:(e.outline?.color??h.white).clone(),pattern:t};return t&&e.outline?.cap&&(r.patternCap=e.outline.cap),new m({material:new y.Symbol3DFillMaterial({color:(e.color??h.transparentWhite).clone()}),pattern:e.style&&"solid"!==e.style?new p({style:e.style}):null,outline:r})}},t.__decorate([n.enumeration({Fill:"fill"},{readOnly:!0})],e.default.prototype,"type",void 0),t.__decorate([r.property({type:y.Symbol3DFillMaterial,json:{write:!0}})],e.default.prototype,"material",void 0),t.__decorate([r.property(d.symbol3dPatternProperty)],e.default.prototype,"pattern",void 0),t.__decorate([r.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],e.default.prototype,"castShadows",void 0),t.__decorate([r.property({type:f.Symbol3DOutline,json:{write:!0}})],e.default.prototype,"outline",void 0),t.__decorate([r.property(c.symbol3dEdgesProperty)],e.default.prototype,"edges",void 0),e.default=m=t.__decorate([a.subclass("esri.symbols.FillSymbol3DLayer")],e.default),e.default})},"esri/symbols/patterns/LineStylePattern3D":function(){define(["exports","../../chunks/tslib.es6","../../core/jsonMap","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/subclass","./LinePattern3D","./lineStyles"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";var p;const d=r.strict()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});return e.default=p=class extends c{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new p(e)}},t.__decorate([o.property({type:["style"],json:{write:{isRequired:!0}}})],e.default.prototype,"type",void 0),t.__decorate([a.enumeration(d),o.property({type:u.lineStyles,json:{write:{isRequired:!0}}})],e.default.prototype,"style",void 0),e.default=p=t.__decorate([l.subclass("esri.symbols.patterns.LineStylePattern3D")],e.default),e.default})},"esri/symbols/patterns/LinePattern3D":function(){define(["exports","../../chunks/tslib.es6","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a){"use strict";return e.default=class extends r.JSONSupport{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}},t.__decorate([o.property({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],e.default.prototype,"type",void 0),e.default=t.__decorate([a.subclass("esri.symbols.patterns.LinePattern3D")],e.default),e.default})},"esri/symbols/patterns/lineStyles":function(){define(["exports"],function(e){"use strict";e.lineStyles=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"],Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/patterns/StylePattern3D":function(){define(["exports","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./Pattern3D","./styles"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;return e.default=c=class extends a{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new c({style:this.style})}},t.__decorate([r.property({type:["style"],json:{write:{isRequired:!0}}})],e.default.prototype,"type",void 0),t.__decorate([r.property({type:l,json:{read:!0,write:{isRequired:!0}}})],e.default.prototype,"style",void 0),e.default=c=t.__decorate([n.subclass("esri.symbols.patterns.StylePattern3D")],e.default),e.default})},"esri/symbols/patterns/Pattern3D":function(){define(["exports","../../chunks/tslib.es6","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a){"use strict";return e.default=class extends r.JSONSupport{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}},t.__decorate([o.property({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],e.default.prototype,"type",void 0),e.default=t.__decorate([a.subclass("esri.symbols.patterns.Pattern3D")],e.default),e.default})},"esri/symbols/patterns/styles":function(){define(function(){"use strict";return["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"]})},"esri/symbols/patterns/utils":function(){define(["exports","./LinePattern3D","./LineStylePattern3D","./Pattern3D","./StylePattern3D"],function(e,t,r,o,s){"use strict";const i={types:{key:"type",base:o,typeMap:{style:s}},json:{write:!0}},n={types:{key:"type",base:t,typeMap:{style:r}},json:{write:!0}};e.symbol3dLinePatternProperty=n,e.symbol3dPatternProperty=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/colors":function(){define(["exports","../../Color"],function(e,t){"use strict";const r=new t("white"),o=new t([255,255,255,0]);e.isBlack=function(e){return 0===e.r&&0===e.g&&0===e.b},e.transparentWhite=o,e.white=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/Symbol3DFillMaterial":function(){define(["exports","../../chunks/tslib.es6","../../core/Logger","../../core/has","../../core/RandomLCG","../../core/Error","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/subclass","./Symbol3DMaterial"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;e.Symbol3DFillMaterial=c=class extends l.Symbol3DMaterial{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:this.color?.clone()??null,colorMixMode:this.colorMixMode,emissive:this.emissive?.clone()??null};return new c(e)}},t.__decorate([n.enumeration({multiply:"multiply",replace:"replace",tint:"tint"})],e.Symbol3DFillMaterial.prototype,"colorMixMode",void 0),e.Symbol3DFillMaterial=c=t.__decorate([a.subclass("esri.symbols.support.Symbol3DFillMaterial")],e.Symbol3DFillMaterial),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/Symbol3DOutline":function(){define(["exports","../../chunks/tslib.es6","../../Color","../../core/JSONSupport","../../core/screenUtils","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../patterns/utils","./materialUtils","./symbolLayerUtils3D"],function(e,t,r,o,s,i,n,a,l,c,u,p,d){"use strict";var h;e.Symbol3DOutline=h=class extends o.JSONSupport{constructor(e){super(e),this.color=new r([0,0,0,1]),this.size=s.px2pt(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:null!=this.color?this.color.clone():null,size:this.size,pattern:null!=this.pattern?this.pattern.clone():null,patternCap:this.patternCap};return new h(e)}},t.__decorate([i.property(p.colorAndTransparencyProperty({colorRequiredOnWrite:!0}))],e.Symbol3DOutline.prototype,"color",void 0),t.__decorate([i.property({...p.screenSizeProperty,json:{write:{isRequired:!0}}})],e.Symbol3DOutline.prototype,"size",void 0),t.__decorate([i.property(u.symbol3dLinePatternProperty)],e.Symbol3DOutline.prototype,"pattern",void 0),t.__decorate([i.property({type:d.lineCaps,json:{default:"butt",write:{overridePolicy(){return{enabled:null!=this.pattern}}}}})],e.Symbol3DOutline.prototype,"patternCap",void 0),e.Symbol3DOutline=h=t.__decorate([c.subclass("esri.symbols.support.Symbol3DOutline")],e.Symbol3DOutline),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/symbolLayerUtils3D":function(){define(["exports","../../core/has","../../core/libs/gl-matrix-2/factories/vec3f64","../../geometry/support/aaBoundingBox"],function(e,t,r,o){"use strict";const s=o.fromValues(-.5,-.5,-.5,.5,.5,.5),i=o.fromValues(-.5,-.5,0,.5,.5,1),n=o.fromValues(-.5,-.5,0,.5,.5,.5),a=["butt","square","round"],l=[...a,"none"];e.lineCaps=a,e.lineJoins=["miter","bevel","round"],e.objectSymbolLayerBoundingBoxTetrahedron=n,e.objectSymbolLayerBoundingBoxUnitCube=s,e.objectSymbolLayerBoundingBoxUnitCylinder=i,e.objectSymbolLayerPrimitiveBoundingBox=function(e){switch(e){case"sphere":case"cube":case"diamond":return s;case"cylinder":case"cone":case"inverted-cone":return i;case"tetrahedron":return n;default:return}},e.objectSymbolLayerSizeWithResourceSize=function(e,{isPrimitive:t,width:o,depth:s,height:i}){const n=t?10:1;if(null==o&&null==i&&null==s)return[n*e[0],n*e[1],n*e[2]];const a=r.fromValues(o,s,i);let l;for(let t=0;t<3;t++){const r=a[t];if(null!=r){l=r/e[t];break}}for(let t=0;t<3;t++)null==a[t]&&(a[t]=e[t]*l);return a},e.pathCaps=l,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../Extent","./aaBoundingRect","./DoubleArray"],function(e,t,r,o){"use strict";function s(e=f){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function i(e,t,r,o,i,n,a=s()){return a[0]=e,a[1]=t,a[2]=r,a[3]=o,a[4]=i,a[5]=n,a}function n(e,t,r,o=s()){return d(o,y),a(o,e,t,r),o}function a(e,t,r=0,o=t.length/3){let s=e[0],i=e[1],n=e[2],a=e[3],l=e[4],c=e[5];for(let e=0;e<o;e++)s=Math.min(s,t[r+3*e]),i=Math.min(i,t[r+3*e+1]),n=Math.min(n,t[r+3*e+2]),a=Math.max(a,t[r+3*e]),l=Math.max(l,t[r+3*e+1]),c=Math.max(c,t[r+3*e+2]);e[0]=s,e[1]=i,e[2]=n,e[3]=a,e[4]=l,e[5]=c}function l(e){return e[0]>=e[3]?0:e[3]-e[0]}function c(e){return e[1]>=e[4]?0:e[4]-e[1]}function u(e){return e[2]>=e[5]?0:e[5]-e[2]}function p(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function d(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function h(e){return 6===e.length}const y=[1/0,1/0,1/0,-1/0,-1/0,-1/0],f=[0,0,0,0,0,0],m=s();e.allFinite=function(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0},e.center=function(e,t=[0,0,0]){return t[0]=e[0]+l(e)/2,t[1]=e[1]+c(e)/2,t[2]=e[2]+u(e)/2,t},e.contains=function(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[3]<=e[3]&&t[4]<=e[4]&&t[5]<=e[5]},e.containsPoint=function(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]},e.containsPointWithMargin=function(e,t,r){return t[0]>=e[0]-r&&t[1]>=e[1]-r&&t[2]>=e[2]-r&&t[0]<=e[3]+r&&t[1]<=e[4]+r&&t[2]<=e[5]+r},e.create=s,e.depth=c,e.diameter=function(e){const t=l(e),r=u(e),o=c(e);return Math.sqrt(t*t+r*r+o*o)},e.empty=function(e){return e?d(e,y):s(y)},e.equals=function(e,t,r){if(null==e||null==t)return e===t;if(!h(e)||!h(t))return!1;if(r){for(let o=0;o<e.length;o++)if(!r(e[o],t[o]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},e.expandWithAABB=function(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])},e.expandWithBuffer=a,e.expandWithNestedArray=function(e,t,r){const o=t.length;let s=e[0],i=e[1],n=e[2],a=e[3],l=e[4],c=e[5];if(r)for(let e=0;e<o;e++){const r=t[e];s=Math.min(s,r[0]),i=Math.min(i,r[1]),n=Math.min(n,r[2]),a=Math.max(a,r[0]),l=Math.max(l,r[1]),c=Math.max(c,r[2])}else for(let e=0;e<o;e++){const r=t[e];s=Math.min(s,r[0]),i=Math.min(i,r[1]),a=Math.max(a,r[0]),l=Math.max(l,r[1])}e[0]=s,e[1]=i,e[2]=n,e[3]=a,e[4]=l,e[5]=c},e.expandWithOffset=function(e,t,r,o){e[0]=Math.min(e[0],e[0]+t),e[3]=Math.max(e[3],e[3]+t),e[1]=Math.min(e[1],e[1]+r),e[4]=Math.max(e[4],e[4]+r),e[2]=Math.min(e[2],e[2]+o),e[5]=Math.max(e[5],e[5]+o)},e.expandWithRect=function(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])},e.expandWithVec3=function(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])},e.fromBuffer=function(e,t=s()){return n(e,0,e.length/3,t)},e.fromExtent=function(e,t=s()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.hasZ?e.zmin:-1/0,t[3]=e.xmax,t[4]=e.ymax,t[5]=e.hasZ?e.zmax:1/0,t},e.fromMinMax=function(e,t,r=s()){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=t[0],r[4]=t[1],r[5]=t[2],r},e.fromRect=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e},e.fromRectValues=function(e,t,r,o,s){return e[0]=t,e[1]=r,e[2]=Number.NEGATIVE_INFINITY,e[3]=o,e[4]=s,e[5]=Number.POSITIVE_INFINITY,e},e.fromSubBuffer=n,e.fromValues=i,e.getMax=function(e,t){return t[0]=e[3],t[1]=e[4],t[2]=e[5],t},e.getMin=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.height=u,e.intersects=p,e.intersectsClippingArea=function(e,t){return null==t||p(e,t)},e.intersectsSegment=function(e,t,r){let o=0,s=1;for(let i=0;i<3;++i){const n=e[i],a=e[i+3],l=t[i],c=r[i],u=c<l,p=u?c:l,d=u?l:c,h=Math.max(n,p),y=Math.min(a,d);if(h>y)return!1;if(d===p)break;const f=d-p,m=(h-p)/f,g=(y-p)/f;if(o=Math.max(o,u?1-g:m),s=Math.min(s,u?1-m:g),o>s)return!1}return!0},e.is=h,e.isPoint=function(e){return 0===l(e)&&0===c(e)&&0===u(e)},e.maximumDimension=function(e){return Math.max(l(e),u(e),c(e))},e.negativeInfinity=y,e.offset=function(e,t,r,o,s=e){return s[0]=e[0]+t,s[1]=e[1]+r,s[2]=e[2]+o,s[3]=e[3]+t,s[4]=e[4]+r,s[5]=e[5]+o,s},e.positiveInfinity=[-1/0,-1/0,-1/0,1/0,1/0,1/0],e.scale=function(e,t,r=e){const o=e[0]+l(e)/2,s=e[1]+c(e)/2,i=e[2]+u(e)/2;return r[0]=o+(e[0]-o)*t,r[1]=s+(e[1]-s)*t,r[2]=i+(e[2]-i)*t,r[3]=o+(e[3]-o)*t,r[4]=s+(e[4]-s)*t,r[5]=i+(e[5]-i)*t,r},e.set=d,e.setMax=function(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e},e.setMin=function(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r},e.size=function(e,t=[0,0,0]){return t[0]=l(e),t[1]=c(e),t[2]=u(e),t},e.toCorners=function(e,t=o.newDoubleArray(24)){const[r,s,i,n,a,l]=e;return t[0]=r,t[1]=s,t[2]=i,t[3]=r,t[4]=s,t[5]=l,t[6]=r,t[7]=a,t[8]=i,t[9]=r,t[10]=a,t[11]=l,t[12]=n,t[13]=s,t[14]=i,t[15]=n,t[16]=s,t[17]=l,t[18]=n,t[19]=a,t[20]=i,t[21]=n,t[22]=a,t[23]=l,t},e.toExtent=function(e,r){const o=isFinite(e[2])||isFinite(e[5]);return new t(o?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:r}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:r})},e.toRect=function(e,t){return t||(t=r.create()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t},e.width=l,e.wrap=function(e,t,r,o,s,n){return i(e,t,r,o,s,n,m)},e.zero=f,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/DoubleArray":function(){define(["exports","../../core/typedArrayUtil"],function(e,t){"use strict";e.copyInto=function(e,t){for(let r=0;r<t.length;++r)e[r]=t[r];return e},e.doubleArrayFrom=function(e){return(t.isTypedArray(e)?e.byteLength/8:e.length)<=t.nativeArrayMaxSize?Array.from(e):new Float64Array(e)},e.doubleSubArray=function(e,t,r){return Array.isArray(e)?e.slice(t,t+r):e.subarray(t,t+r)},e.ensurePackedArray=function(e){return[...e]},e.newDoubleArray=function(e,r=!1){return e<=t.nativeArrayMaxSize?r?new Array(e).fill(0):new Array(e):new Float64Array(e)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/IconSymbol3DLayer":function(){define(["exports","../chunks/tslib.es6","../core/lang","../core/Logger","../core/urlUtils","../core/accessorSupport/decorators/property","../core/has","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","./Symbol3DLayer","./support/colors","./support/IconSymbol3DLayerResource","./support/materialUtils","./support/Symbol3DAnchorPosition2D","./support/Symbol3DIconOutline","./support/Symbol3DMaterial"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f){"use strict";var m;function g(e){const t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,o=b(e.xoffset),s=b(e.yoffset);return(o||s)&&t&&r?{x:-o/t,y:s/r}:null}function b(e){return isFinite(e)?e:0}e.default=class extends c{static{m=this}constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new m({anchor:this.anchor,anchorPosition:r.clone(this.anchorPosition),enabled:this.enabled,material:r.clone(this.material),outline:r.clone(this.outline),resource:r.clone(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||u.white,r=g(e),s=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||u.white).clone()}:null;return new m({size:e.size,angle:e.angle,resource:{primitive:(i=()=>o.getLogger(this.prototype),n=e.style,_[n]||(i().warn(`${n} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle"))},material:{color:t},outline:s,anchor:r?"relative":void 0,anchorPosition:r});var i,n}static fromPictureMarkerSymbol(e){const t=!e.color||u.isBlack(e.color)?u.white:e.color,r=g(e);return new m({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new m({resource:{href:s.makeData({mediaType:"application/json",data:JSON.stringify(e.data)})}})}},t.__decorate([i.property({type:f.Symbol3DMaterial,json:{write:!0}})],e.default.prototype,"material",void 0),t.__decorate([i.property({type:p.IconSymbol3DLayerResource,json:{write:!0}})],e.default.prototype,"resource",void 0),t.__decorate([a.enumeration({Icon:"icon"},{readOnly:!0})],e.default.prototype,"type",void 0),t.__decorate([i.property({...d.screenSizeProperty,json:{write:{isRequired:!0}}})],e.default.prototype,"size",void 0),t.__decorate([a.enumeration({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],e.default.prototype,"anchor",void 0),t.__decorate([i.property({type:h.Symbol3DAnchorPosition2D,json:{type:[Number],read:{reader:e=>new h.Symbol3DAnchorPosition2D({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],e.default.prototype,"anchorPosition",void 0),t.__decorate([i.property({type:y.Symbol3DIconOutline,json:{write:!0}})],e.default.prototype,"outline",void 0),t.__decorate([i.property({type:Number,json:{write:!0,default:0}})],e.default.prototype,"angle",void 0),e.default=m=t.__decorate([l.subclass("esri.symbols.IconSymbol3DLayer")],e.default);const _={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};return e.default})},"esri/symbols/support/IconSymbol3DLayerResource":function(){define(["exports","../../chunks/tslib.es6","../../core/jsonMap","../../core/JSONSupport","../../core/urlUtils","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","../../chunks/persistableUrlUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h){"use strict";var y;const f=r.strict()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});e.IconSymbol3DLayerResource=y=class extends o.JSONSupport{constructor(e){super(e)}readHref(e,t,r){return e?h.fromJSON(e,r):t.dataURI}writeHref(e,t,r,o){e&&(s.isDataProtocol(e)?t.dataURI=e:(t.href=h.toJSON(e,o),s.isAbsolute(t.href)&&(t.href=s.normalize(t.href))))}clone(){return new y({href:this.href,primitive:this.primitive})}},t.__decorate([i.property({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],e.IconSymbol3DLayerResource.prototype,"href",void 0),t.__decorate([u.reader("href")],e.IconSymbol3DLayerResource.prototype,"readHref",null),t.__decorate([d.writer("href",{href:{type:String},dataURI:{type:String}})],e.IconSymbol3DLayerResource.prototype,"writeHref",null),t.__decorate([c.enumeration(f)],e.IconSymbol3DLayerResource.prototype,"primitive",void 0),e.IconSymbol3DLayerResource=y=t.__decorate([p.subclass("esri.symbols.support.IconSymbol3DLayerResource")],e.IconSymbol3DLayerResource),e.defaultPrimitive="circle",Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/Symbol3DAnchorPosition2D":function(){define(["exports","../../chunks/tslib.es6","../../core/Accessor","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a){"use strict";var l;e.Symbol3DAnchorPosition2D=l=class extends r{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new l({x:this.x,y:this.y})}},t.__decorate([o.property({type:Number})],e.Symbol3DAnchorPosition2D.prototype,"x",void 0),t.__decorate([o.property({type:Number})],e.Symbol3DAnchorPosition2D.prototype,"y",void 0),e.Symbol3DAnchorPosition2D=l=t.__decorate([a.subclass("esri.symbols.support.Symbol3DAnchorPosition2D")],e.Symbol3DAnchorPosition2D),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/Symbol3DIconOutline":function(){define(["exports","../../chunks/tslib.es6","../../Color","../../core/JSONSupport","../../core/screenUtils","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./materialUtils"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";var p;e.Symbol3DIconOutline=p=class extends o.JSONSupport{constructor(e){super(e),this.color=new r([0,0,0,1]),this.size=s.px2pt(1)}clone(){const e={color:null!=this.color?this.color.clone():null,size:this.size};return new p(e)}},t.__decorate([i.property(u.colorAndTransparencyProperty({colorRequiredOnWrite:!0}))],e.Symbol3DIconOutline.prototype,"color",void 0),t.__decorate([i.property({...u.screenSizeProperty,json:{write:{isRequired:!0}}})],e.Symbol3DIconOutline.prototype,"size",void 0),e.Symbol3DIconOutline=p=t.__decorate([c.subclass("esri.symbols.support.Symbol3DIconOutline")],e.Symbol3DIconOutline),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/LineSymbol3DLayer":function(){define(["exports","../chunks/tslib.es6","../core/screenUtils","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","./LineStyleMarker3D","./Symbol3DLayer","./patterns/LineStylePattern3D","./patterns/utils","./support/colors","./support/materialUtils","./support/Symbol3DMaterial","./support/symbolLayerUtils3D"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m){"use strict";var g;return e.default=class extends u{static{g=this}constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=r.px2pt(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:null!=this.material?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:null!=this.pattern?this.pattern.clone():null,marker:null!=this.marker?this.marker.clone():null};return new g(e)}static fromSimpleLineSymbol(e){const t={enabled:!0,size:e.width??r.px2pt(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new p({style:e.style}):null,material:new f.Symbol3DMaterial({color:(e.color||h.white).clone()}),marker:e.marker?new c({placement:e.marker.placement,style:e.marker.style,color:e.marker.color?.clone()??null}):null};return new g(t)}},t.__decorate([o.property({type:f.Symbol3DMaterial,json:{write:!0}})],e.default.prototype,"material",void 0),t.__decorate([a.enumeration({Line:"line"},{readOnly:!0})],e.default.prototype,"type",void 0),t.__decorate([o.property({type:m.lineJoins,json:{write:!0,default:"miter"}})],e.default.prototype,"join",void 0),t.__decorate([o.property({type:m.lineCaps,json:{write:!0,default:"butt"}})],e.default.prototype,"cap",void 0),t.__decorate([o.property({...y.screenSizeProperty,json:{write:{isRequired:!0}}})],e.default.prototype,"size",void 0),t.__decorate([o.property(d.symbol3dLinePatternProperty)],e.default.prototype,"pattern",void 0),t.__decorate([o.property({types:{key:"type",base:c,typeMap:{style:c}},json:{write:!0}})],e.default.prototype,"marker",void 0),e.default=g=t.__decorate([l.subclass("esri.symbols.LineSymbol3DLayer")],e.default),e.default})},"esri/symbols/LineStyleMarker3D":function(){define(["exports","../chunks/tslib.es6","../Color","../core/Clonable","../core/JSONSupport","../core/accessorSupport/decorators/property","../core/accessorSupport/ensureType","../core/has","../core/RandomLCG","../core/accessorSupport/decorators/subclass","./support/lineMarkers"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";return e.default=class extends(o.ClonableMixin(s.JSONSupport)){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return null!=e&&e.placement===this.placement&&e.style===this.style&&(null==this.color&&null==e.color||null!=this.color&&null!=e.color&&this.color.toJSON()===e.color.toJSON())}},t.__decorate([i.property({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],e.default.prototype,"type",void 0),t.__decorate([i.property({type:u.lineMarkerPlacements,json:{default:"begin-end",write:!0}})],e.default.prototype,"placement",void 0),t.__decorate([i.property({type:u.lineMarkerStyles,json:{default:"arrow",write:!0}})],e.default.prototype,"style",void 0),t.__decorate([i.property({type:r,json:{type:[n.Integer],default:null,write:!0}})],e.default.prototype,"color",void 0),e.default=t.__decorate([c.subclass("esri.symbols.LineStyleMarker3D")],e.default),e.default})},"esri/symbols/support/lineMarkers":function(){define(["exports"],function(e){"use strict";e.lineMarkerPlacements=["begin","end","begin-end"],e.lineMarkerStyles=["arrow","circle","square","diamond","cross","x"],Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/ObjectSymbol3DLayer":function(){define(["exports","../chunks/tslib.es6","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","./Symbol3DLayer","./support/ObjectSymbol3DLayerResource","./support/Symbol3DAnchorPosition3D","./support/Symbol3DMaterial"],function(e,t,r,o,s,i,n,a,l,c,u,p){"use strict";var d;return e.default=class extends l{static{d=this}constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new d({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition?.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material?.clone()??null,castShadows:this.castShadows,resource:this.resource?.clone(),width:this.width})}get isPrimitive(){return!this.resource||"string"!=typeof this.resource.href}},t.__decorate([r.property({type:p.Symbol3DMaterial,json:{write:!0}})],e.default.prototype,"material",void 0),t.__decorate([r.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],e.default.prototype,"castShadows",void 0),t.__decorate([r.property({type:c.ObjectSymbol3DLayerResource,json:{write:!0}})],e.default.prototype,"resource",void 0),t.__decorate([n.enumeration({Object:"object"},{readOnly:!0})],e.default.prototype,"type",void 0),t.__decorate([r.property({type:Number,json:{write:!0}})],e.default.prototype,"width",void 0),t.__decorate([r.property({type:Number,json:{write:!0}})],e.default.prototype,"height",void 0),t.__decorate([r.property({type:Number,json:{write:!0}})],e.default.prototype,"depth",void 0),t.__decorate([n.enumeration({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],e.default.prototype,"anchor",void 0),t.__decorate([r.property({type:u.Symbol3DAnchorPosition3D,json:{type:[Number],read:{reader:e=>new u.Symbol3DAnchorPosition3D({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],e.default.prototype,"anchorPosition",void 0),t.__decorate([r.property({type:Number,json:{write:!0}})],e.default.prototype,"heading",void 0),t.__decorate([r.property({type:Number,json:{write:!0}})],e.default.prototype,"tilt",void 0),t.__decorate([r.property({type:Number,json:{write:!0}})],e.default.prototype,"roll",void 0),t.__decorate([r.property({readOnly:!0})],e.default.prototype,"isPrimitive",null),e.default=d=t.__decorate([a.subclass("esri.symbols.ObjectSymbol3DLayer")],e.default),e.default})},"esri/symbols/support/ObjectSymbol3DLayerResource":function(){define(["exports","../../chunks/tslib.es6","../../core/jsonMap","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/subclass","../../chunks/persistableUrlUtils"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";var p;const d=r.strict()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});e.ObjectSymbol3DLayerResource=p=class extends o.JSONSupport{clone(){return new p({href:this.href,primitive:this.primitive})}},t.__decorate([s.property({type:String,json:{read:u.read,write:u.write}})],e.ObjectSymbol3DLayerResource.prototype,"href",void 0),t.__decorate([l.enumeration(d)],e.ObjectSymbol3DLayerResource.prototype,"primitive",void 0),e.ObjectSymbol3DLayerResource=p=t.__decorate([c.subclass("esri.symbols.support.ObjectSymbol3DLayerResource")],e.ObjectSymbol3DLayerResource),e.defaultPrimitive="sphere",Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/Symbol3DAnchorPosition3D":function(){define(["exports","../../chunks/tslib.es6","../../core/Accessor","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a){"use strict";var l;e.Symbol3DAnchorPosition3D=l=class extends r{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new l({x:this.x,y:this.y,z:this.z})}},t.__decorate([o.property({type:Number})],e.Symbol3DAnchorPosition3D.prototype,"x",void 0),t.__decorate([o.property({type:Number})],e.Symbol3DAnchorPosition3D.prototype,"y",void 0),t.__decorate([o.property({type:Number})],e.Symbol3DAnchorPosition3D.prototype,"z",void 0),e.Symbol3DAnchorPosition3D=l=t.__decorate([a.subclass("esri.symbols.support.Symbol3DAnchorPosition3D")],e.Symbol3DAnchorPosition3D),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/PathSymbol3DLayer":function(){define(["exports","../chunks/tslib.es6","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass","./Symbol3DLayer","./support/Symbol3DMaterial","./support/symbolLayerUtils3D"],function(e,t,r,o,s,i,n,a,l,c,u,p){"use strict";var d;return e.default=class extends c{static{d=this}constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return null!=e?e:null==t.height&&null!=t.size?t.size:void 0}readHeight(e,t){return null!=e?e:null==t.width&&null!=t.size?t.size:void 0}clone(){return new d({enabled:this.enabled,material:null!=this.material?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},t.__decorate([r.property({type:u.Symbol3DMaterial,json:{write:!0}})],e.default.prototype,"material",void 0),t.__decorate([r.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],e.default.prototype,"castShadows",void 0),t.__decorate([n.enumeration({Path:"path"},{readOnly:!0})],e.default.prototype,"type",void 0),t.__decorate([r.property({type:["circle","quad"],nonNullable:!0,json:{write:!0,default:"circle"}})],e.default.prototype,"profile",void 0),t.__decorate([r.property({type:p.lineJoins,nonNullable:!0,json:{write:!0,default:"miter"}})],e.default.prototype,"join",void 0),t.__decorate([r.property({type:p.pathCaps,nonNullable:!0,json:{write:!0,default:"butt"}})],e.default.prototype,"cap",void 0),t.__decorate([r.property({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],e.default.prototype,"width",void 0),t.__decorate([a.reader("width",["width","size","height"])],e.default.prototype,"readWidth",null),t.__decorate([r.property({type:Number,json:{write:!0}})],e.default.prototype,"height",void 0),t.__decorate([a.reader("height",["height","size","width"])],e.default.prototype,"readHeight",null),t.__decorate([r.property({type:["center","bottom","top"],nonNullable:!0,json:{write:!0,default:"center"}})],e.default.prototype,"anchor",void 0),t.__decorate([r.property({type:["heading","all"],nonNullable:!0,json:{write:!0,default:"all"}})],e.default.prototype,"profileRotation",void 0),e.default=d=t.__decorate([l.subclass("esri.symbols.PathSymbol3DLayer")],e.default),e.default})},"esri/symbols/TextSymbol3DLayer":function(){define(["exports","../chunks/tslib.es6","../core/lang","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","./Font","./Symbol3DLayer","./support/materialUtils","./support/Symbol3DHalo","./support/Symbol3DMaterial","./support/Symbol3DTextBackground","./support/textUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f){"use strict";var m;return e.default=class extends u{static{m=this}constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){null!=e&&null!=this._userSize&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,r,o){const s={...o,textSymbol3D:!0};t.font=e.write({},s),delete t.font.size}get size(){return null!=this._userSize?this._userSize:null!=this.font?.size?this.font.size:9}set size(e){this._userSize=e,null!=this.font&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new m({enabled:this.enabled,font:this.font&&r.clone(this.font),halo:this.halo&&r.clone(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:null!=this.material?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:r.clone(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new m({font:null!=e.font?e.font.clone():new c,halo:(t=e.haloColor,o=e.haloSize,t&&null!=o&&o>0?new d.Symbol3DHalo({color:r.clone(t),size:o}):null),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new h.Symbol3DMaterial({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new y.Symbol3DTextBackground({color:e.backgroundColor.clone()}):null});var t,o}},t.__decorate([o.property({type:c,json:{write:!0}})],e.default.prototype,"font",null),t.__decorate([l.writer("font")],e.default.prototype,"writeFont",null),t.__decorate([o.property({type:d.Symbol3DHalo,json:{write:!0}})],e.default.prototype,"halo",void 0),t.__decorate([o.property({...f.horizontalAlignmentProperty,json:{default:"center",write:!0}})],e.default.prototype,"horizontalAlignment",void 0),t.__decorate([o.property({...f.lineHeightProperty,json:{default:1,write:!0}})],e.default.prototype,"lineHeight",void 0),t.__decorate([o.property({type:h.Symbol3DMaterial,json:{write:!0}})],e.default.prototype,"material",void 0),t.__decorate([o.property({type:y.Symbol3DTextBackground,json:{write:!0}})],e.default.prototype,"background",void 0),t.__decorate([o.property(p.screenSizeProperty)],e.default.prototype,"size",null),t.__decorate([o.property({type:String,json:{write:!0}})],e.default.prototype,"text",void 0),t.__decorate([n.enumeration({Text:"text"},{readOnly:!0})],e.default.prototype,"type",void 0),t.__decorate([o.property({...f.verticalAlignmentProperty,json:{default:"baseline",write:!0}})],e.default.prototype,"verticalAlignment",void 0),e.default=m=t.__decorate([a.subclass("esri.symbols.TextSymbol3DLayer")],e.default),e.default})},"esri/symbols/Font":function(){define(["exports","../chunks/tslib.es6","../core/JSONSupport","../core/screenUtils","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/cast","../core/has","../core/RandomLCG","../core/accessorSupport/decorators/subclass","./support/textUtils"],function(e,t,r,o,s,i,n,a,l,c){"use strict";var u;return e.default=u=class extends r.JSONSupport{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return o.toPt(e)}clone(){return new u({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}},t.__decorate([s.property({type:c.fontDecorations,json:{default:"none",write:!0}})],e.default.prototype,"decoration",void 0),t.__decorate([s.property({type:String,json:{write:!0}})],e.default.prototype,"family",void 0),t.__decorate([s.property({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],e.default.prototype,"size",void 0),t.__decorate([i.cast("size")],e.default.prototype,"castSize",null),t.__decorate([s.property({type:c.fontStyles,json:{default:"normal",write:!0}})],e.default.prototype,"style",void 0),t.__decorate([s.property({type:c.fontWeights,json:{default:"normal",write:!0}})],e.default.prototype,"weight",void 0),e.default=u=t.__decorate([l.subclass("esri.symbols.Font")],e.default),e.default})},"esri/symbols/support/textUtils":function(){define(["exports","../../core/mathUtils","../../core/accessorSupport/ensureType"],function(e,t,r){"use strict";const o={type:Number,cast:e=>{const o=r.ensureNumber(e);return 0===o?1:t.clamp(o,.1,4)},nonNullable:!0},s=["left","right","center"],i=["baseline","top","middle","bottom"],n={type:s,nonNullable:!0},a={type:i,nonNullable:!0};e.backgroundPadding=8,e.fontDecorations=["none","underline","line-through"],e.fontStyles=["normal","italic","oblique"],e.fontWeights=["normal","lighter","bold","bolder"],e.horizontalAlignmentProperty=n,e.horizontalAlignments=s,e.lineHeightProperty=o,e.verticalAlignmentProperty=a,e.verticalAlignments=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/Symbol3DHalo":function(){define(["exports","../../chunks/tslib.es6","../../Color","../../core/JSONSupport","../../core/lang","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/subclass","./materialUtils"],function(e,t,r,o,s,i,n,a,l,c){"use strict";var u;e.Symbol3DHalo=u=class extends o.JSONSupport{constructor(){super(...arguments),this.color=new r([0,0,0,1]),this.size=0}clone(){const e={color:s.clone(this.color),size:this.size};return new u(e)}},t.__decorate([i.property(c.colorAndTransparencyProperty())],e.Symbol3DHalo.prototype,"color",void 0),t.__decorate([i.property(c.screenSizeProperty)],e.Symbol3DHalo.prototype,"size",void 0),e.Symbol3DHalo=u=t.__decorate([l.subclass("esri.symbols.support.Symbol3DHalo")],e.Symbol3DHalo),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/Symbol3DTextBackground":function(){define(["exports","../../chunks/tslib.es6","../../core/Clonable","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./materialUtils"],function(e,t,r,o,s,i,n,a,l,c){"use strict";e.Symbol3DTextBackground=class extends(r.ClonableMixin(o.JSONSupport)){constructor(e){super(e),this.color=null}},t.__decorate([s.property(c.colorAndTransparencyProperty())],e.Symbol3DTextBackground.prototype,"color",void 0),e.Symbol3DTextBackground=t.__decorate([l.subclass("esri.symbols.support.Symbol3DTextBackground")],e.Symbol3DTextBackground),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/WaterSymbol3DLayer":function(){define(["exports","../chunks/tslib.es6","../Color","../core/accessorSupport/decorators/property","../core/accessorSupport/ensureType","../core/has","../core/RandomLCG","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","./Symbol3DLayer"],function(e,t,r,o,s,i,n,a,l,c){"use strict";var u;e.default=class extends c{static{u=this}constructor(e){super(e),this.color=p.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new u({color:this.color.clone(),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},t.__decorate([o.property({type:r,nonNullable:!0,json:{type:[s.Integer],write:(e,t,r)=>t[r]=e.toArray(1),default:()=>p.clone(),defaultEquals:e=>e.toCss(!0)===p.toCss(!0)}})],e.default.prototype,"color",void 0),t.__decorate([a.enumeration({Water:"water"},{readOnly:!0})],e.default.prototype,"type",void 0),t.__decorate([o.property({type:["small","medium","large"],json:{write:!0,default:"medium"}})],e.default.prototype,"waterbodySize",void 0),t.__decorate([o.property({type:Number,json:{write:!0,default:null}})],e.default.prototype,"waveDirection",void 0),t.__decorate([o.property({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],e.default.prototype,"waveStrength",void 0),e.default=u=t.__decorate([l.subclass("esri.symbols.WaterSymbol3DLayer")],e.default);const p=new r([0,119,190]);return e.default})},"esri/symbols/support/StyleOrigin":function(){define(["exports","../../chunks/tslib.es6","../../core/Accessor","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../portal/Portal"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;return e.default=c=class extends r{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new c({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}},t.__decorate([o.property({type:String})],e.default.prototype,"name",void 0),t.__decorate([o.property({type:String})],e.default.prototype,"styleUrl",void 0),t.__decorate([o.property({type:String})],e.default.prototype,"styleName",void 0),t.__decorate([o.property({type:l})],e.default.prototype,"portal",void 0),e.default=c=t.__decorate([a.subclass("esri.symbols.support.StyleOrigin")],e.default),e.default})},"esri/symbols/support/Thumbnail":function(){define(["exports","../../chunks/tslib.es6","../../core/Accessor","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a){"use strict";var l;e.Thumbnail=l=class extends r{constructor(){super(...arguments),this.url=""}clone(){return new l({url:this.url})}},t.__decorate([o.property({type:String})],e.Thumbnail.prototype,"url",void 0),e.Thumbnail=l=t.__decorate([a.subclass("esri.symbols.support.Thumbnail")],e.Thumbnail),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/callouts/calloutUtils":function(){define(["exports","./Callout3D","./LineCallout3D"],function(e,t,r){"use strict";function o(e){if(!e)return!1;const t=e.verticalOffset;return!(!t||t.screenLength<=0||null!=t.maxWorldLength&&t.maxWorldLength<=0)}const s={types:{key:"type",base:t,typeMap:{line:r}},json:{write:!0}};e.calloutProperty=s,e.hasCalloutSupport=function(e){return"point-3d"===e.type||"label-3d"===e.type},e.hasVisibleCallout=function(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t?.visible&&!!o(e)},e.hasVisibleVerticalOffset=o,e.textSymbolLayerSupportsVerticalOffset=function(e){return"center"===e.horizontalAlignment},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/callouts/Callout3D":function(){define(["exports","../../chunks/tslib.es6","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a){"use strict";return e.default=class extends r.JSONSupport{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}},t.__decorate([o.property({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],e.default.prototype,"type",void 0),t.__decorate([o.property({readOnly:!0})],e.default.prototype,"visible",void 0),e.default=t.__decorate([a.subclass("esri.symbols.callouts.Callout3D")],e.default),e.default})},"esri/symbols/callouts/LineCallout3D":function(){define(["exports","../../chunks/tslib.es6","../../Color","../../core/lang","../../core/screenUtils","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/subclass","./Callout3D","./LineCallout3DBorder","../support/materialUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d){"use strict";var h;return e.default=h=class extends u{constructor(e){super(e),this.type="line",this.color=new r([0,0,0,1]),this.size=s.px2pt(1),this.border=null}get visible(){return this.size>0&&null!=this.color&&this.color.a>0}clone(){return new h({color:o.clone(this.color),size:this.size,border:o.clone(this.border)})}},t.__decorate([l.enumeration({line:"line"})],e.default.prototype,"type",void 0),t.__decorate([i.property(d.colorAndTransparencyProperty({colorRequiredOnWrite:!0}))],e.default.prototype,"color",void 0),t.__decorate([i.property({...d.screenSizeProperty,json:{write:{isRequired:!0}}})],e.default.prototype,"size",void 0),t.__decorate([i.property({type:p,json:{write:!0}})],e.default.prototype,"border",void 0),t.__decorate([i.property({readOnly:!0})],e.default.prototype,"visible",null),e.default=h=t.__decorate([c.subclass("esri.symbols.callouts.LineCallout3D")],e.default),e.default})},"esri/symbols/callouts/LineCallout3DBorder":function(){define(["../../chunks/tslib.es6","../../Color","../../core/JSONSupport","../../core/lang","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/subclass","../support/materialUtils"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;let u=c=class extends r.JSONSupport{constructor(e){super(e),this.color=new t("white")}clone(){return new c({color:o.clone(this.color)})}};return e.__decorate([s.property(l.colorAndTransparencyProperty({colorRequiredOnWrite:!0}))],u.prototype,"color",void 0),u=c=e.__decorate([a.subclass("esri.symbols.callouts.LineCallout3DBorder")],u),u})},"esri/symbols/support/Symbol3DVerticalOffset":function(){define(["exports","../../chunks/tslib.es6","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./materialUtils"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;return e.default=c=class extends r.JSONSupport{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new c({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}},t.__decorate([o.property({...l.screenSizeProperty,json:{write:{isRequired:!0}}})],e.default.prototype,"screenLength",void 0),t.__decorate([o.property({type:Number,nonNullable:!0,json:{write:!0,default:0}})],e.default.prototype,"minWorldLength",void 0),t.__decorate([o.property({type:Number,json:{write:!0}})],e.default.prototype,"maxWorldLength",void 0),e.default=c=t.__decorate([a.subclass("esri.symbols.support.Symbol3DVerticalOffset")],e.default),e.default})},"esri/symbols/LineSymbol3D":function(){define(["exports","../chunks/tslib.es6","../core/Collection","../core/lang","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","./LineSymbol3DLayer","./PathSymbol3DLayer","./Symbol3D"],function(e,t,r,o,s,i,n,a,l,c,u,p){"use strict";var d;const h=r.ofType({base:null,key:"type",typeMap:{line:c,path:u}}),y=r.ofType({base:null,key:"type",typeMap:{line:c,path:u}});return e.default=d=class extends p{constructor(e){super(e),this.symbolLayers=new h,this.type="line-3d"}clone(){return new d({styleOrigin:o.clone(this.styleOrigin),symbolLayers:o.clone(this.symbolLayers),thumbnail:o.clone(this.thumbnail)})}static fromSimpleLineSymbol(e){return new d({symbolLayers:new r([c.fromSimpleLineSymbol(e)])})}},t.__decorate([s.property({type:h,json:{type:y}})],e.default.prototype,"symbolLayers",void 0),t.__decorate([a.enumeration({LineSymbol3D:"line-3d"},{readOnly:!0})],e.default.prototype,"type",void 0),e.default=d=t.__decorate([l.subclass("esri.symbols.LineSymbol3D")],e.default),e.default})},"esri/symbols/MeshSymbol3D":function(){define(["exports","../chunks/tslib.es6","../core/Collection","../core/lang","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","./FillSymbol3DLayer","./Symbol3D"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";var p;const d=r.ofType({base:null,key:"type",typeMap:{fill:c}});return e.default=p=class extends u{constructor(e){super(e),this.symbolLayers=new d,this.type="mesh-3d"}clone(){return new p({styleOrigin:o.clone(this.styleOrigin),symbolLayers:o.clone(this.symbolLayers),thumbnail:o.clone(this.thumbnail)})}static fromSimpleFillSymbol(e){return new p({symbolLayers:new r([c.fromSimpleFillSymbol(e)])})}},t.__decorate([s.property({type:d})],e.default.prototype,"symbolLayers",void 0),t.__decorate([a.enumeration({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],e.default.prototype,"type",void 0),e.default=p=t.__decorate([l.subclass("esri.symbols.MeshSymbol3D")],e.default),e.default})},"esri/symbols/PictureFillSymbol":function(){define(["exports","../chunks/tslib.es6","../core/lang","../core/screenUtils","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","./FillSymbol","./support/urlUtils"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";var p;return e.default=p=class extends c{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,r,s){if(e&&"string"!=typeof e&&null==e.imageData)return e;const i={};return e&&(i.url=e),t&&(i.outline=t),null!=r&&(i.width=o.toPt(r)),null!=s&&(i.height=o.toPt(s)),i}clone(){const e=new p({color:r.clone(this.color),height:this.height,outline:r.clone(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",r.clone(this.source)),e}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}},t.__decorate([a.enumeration({esriPFS:"picture-fill"},{readOnly:!0})],e.default.prototype,"type",void 0),t.__decorate([s.property(u.urlPropertyDefinition)],e.default.prototype,"url",void 0),t.__decorate([s.property({type:Number,json:{write:!0}})],e.default.prototype,"xscale",void 0),t.__decorate([s.property({type:Number,json:{write:!0}})],e.default.prototype,"yscale",void 0),t.__decorate([s.property({type:Number,cast:o.toPt,json:{write:!0}})],e.default.prototype,"width",void 0),t.__decorate([s.property({type:Number,cast:o.toPt,json:{write:!0}})],e.default.prototype,"height",void 0),t.__decorate([s.property({type:Number,cast:o.toPt,json:{write:!0}})],e.default.prototype,"xoffset",void 0),t.__decorate([s.property({type:Number,cast:o.toPt,json:{write:!0}})],e.default.prototype,"yoffset",void 0),t.__decorate([s.property(u.sourcePropertyDefinition)],e.default.prototype,"source",void 0),e.default=p=t.__decorate([l.subclass("esri.symbols.PictureFillSymbol")],e.default),e.default})},"esri/symbols/FillSymbol":function(){define(["exports","../chunks/tslib.es6","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/subclass","./SimpleLineSymbol","./Symbol"],function(e,t,r,o,s,i,n,a,l){"use strict";return e.default=class extends l{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline?.hash()}`}},t.__decorate([r.property({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":a}},json:{default:null,write:!0}})],e.default.prototype,"outline",void 0),t.__decorate([r.property({type:["simple-fill","picture-fill"],readOnly:!0})],e.default.prototype,"type",void 0),e.default=t.__decorate([n.subclass("esri.symbols.FillSymbol")],e.default),e.default})},"esri/symbols/SimpleLineSymbol":function(){define(["exports","../chunks/tslib.es6","../core/jsonMap","../core/lang","../core/screenUtils","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","./LineSymbol","./LineSymbolMarker"],function(e,t,r,o,s,i,n,a,l,c,u,p){"use strict";var d;const h=new r.JSONMap({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});return e.default=d=class extends u{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,r,o,i,n){if(e&&"string"!=typeof e)return e;const a={};return null!=e&&(a.style=e),null!=t&&(a.color=t),null!=r&&(a.width=s.toPt(r)),null!=o&&(a.cap=o),null!=i&&(a.join=i),null!=n&&(a.miterLimit=s.toPt(n)),a}clone(){return new d({color:o.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}},t.__decorate([l.enumeration({esriSLS:"simple-line"},{readOnly:!0})],e.default.prototype,"type",void 0),t.__decorate([i.property({type:h.apiValues,json:{read:h.read,write:h.write}})],e.default.prototype,"style",void 0),t.__decorate([i.property({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,r)=>({enabled:"round"!==e&&null==r?.origin})}}})],e.default.prototype,"cap",void 0),t.__decorate([i.property({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,r)=>({enabled:"round"!==e&&null==r?.origin})}}})],e.default.prototype,"join",void 0),t.__decorate([i.property({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":p}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],e.default.prototype,"marker",void 0),t.__decorate([i.property({type:Number,json:{read:!1,write:!1}})],e.default.prototype,"miterLimit",void 0),e.default=d=t.__decorate([c.subclass("esri.symbols.SimpleLineSymbol")],e.default),e.default})},"esri/symbols/LineSymbol":function(){define(["exports","../chunks/tslib.es6","../core/screenUtils","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","./Symbol"],function(e,t,r,o,s,i,n,a,l,c){"use strict";return e.default=class extends c{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}},t.__decorate([a.enumeration({esriSLS:"simple-line"},{readOnly:!0})],e.default.prototype,"type",void 0),t.__decorate([o.property({type:Number,cast:r.toPt,json:{write:!0}})],e.default.prototype,"width",void 0),e.default=t.__decorate([l.subclass("esri.symbols.LineSymbol")],e.default),e.default})},"esri/symbols/LineSymbolMarker":function(){define(["../chunks/tslib.es6","../Color","../core/JSONSupport","../core/lang","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","./support/lineMarkers"],function(e,t,r,o,s,i,n,a,l,c,u,p){"use strict";var d;let h=d=class extends r.JSONSupport{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,r,o){t[r]="web-map"===o?.origin?"arrow":e}set color(e){this._set("color",e)}readColor(e){return null!=e?.[0]?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,r,o){"web-map"===o?.origin||(t[r]=e)}clone(){return new d({color:o.clone(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};return e.__decorate([s.property({type:["begin","end","begin-end"],json:{write:!0}})],h.prototype,"placement",void 0),e.__decorate([a.enumeration({"line-marker":"line-marker"},{readOnly:!0}),s.property({json:{origins:{"web-map":{write:!1}}}})],h.prototype,"type",void 0),e.__decorate([s.property({type:p.lineMarkerStyles})],h.prototype,"style",void 0),e.__decorate([u.writer("style")],h.prototype,"writeStyle",null),e.__decorate([s.property({type:t,value:null,json:{write:{allowNull:!0}}})],h.prototype,"color",null),e.__decorate([l.reader("color")],h.prototype,"readColor",null),e.__decorate([u.writer("color")],h.prototype,"writeColor",null),h=d=e.__decorate([c.subclass("esri.symbols.LineSymbolMarker")],h),h})},"esri/symbols/support/urlUtils":function(){define(["exports","../../core/urlUtils","../../chunks/persistableUrlUtils"],function(e,t,r){"use strict";function o(e,r,o){return r.imageData?t.makeData({mediaType:r.contentType||"image/png",isBase64:!0,data:r.imageData}):s(r.url,o)}function s(e,o){if(!t.isAbsolute(e)){const r=function(e){if(!e)return null;const{origin:t,layer:r}=e;if("service"!==t&&"portal-item"!==t)return null;const o=r?.type;return"feature"===o||"stream"===o?r.parsedUrl?.path:"map-image"===o||"tile"===o?e.url?.path:null}(o);if(r)return t.join(r,"images",e)}return r.fromJSON(e,o)}function i(e,o,s,i){if(t.isDataProtocol(e)){const n=t.dataComponents(e);if(!n)return;o.contentType=n.mediaType,o.imageData=n.data,s&&s.imageData===o.imageData&&s.url&&r.write(s.url,o,"url",i)}else r.write(e,o,"url",i)}const n={json:{read:{source:["imageData","url"],reader:o},write:{writer(e,t,r,o){i(e,t,this.source,o)}}}},a={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const o={};return t.imageData&&(o.imageData=t.imageData),t.contentType&&(o.contentType=t.contentType),t.url&&(o.url=s(t.url,r)),o}}}};e.read=s,e.readImageDataOrUrl=o,e.sourcePropertyDefinition=a,e.urlPropertyDefinition=n,e.writeImageDataAndUrl=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/PictureMarkerSymbol":function(){define(["exports","../chunks/tslib.es6","../core/lang","../core/screenUtils","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass","./MarkerSymbol","./support/urlUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p){"use strict";var d;return e.default=d=class extends u{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&"string"!=typeof e&&null==e.imageData)return e;const s={};return e&&(s.url=e),null!=t&&(s.width=o.toPt(t)),null!=r&&(s.height=o.toPt(r)),s}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new d({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",r.clone(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}},t.__decorate([s.property({json:{write:!1}})],e.default.prototype,"color",void 0),t.__decorate([a.enumeration({esriPMS:"picture-marker"},{readOnly:!0})],e.default.prototype,"type",void 0),t.__decorate([s.property(p.urlPropertyDefinition)],e.default.prototype,"url",void 0),t.__decorate([s.property(p.sourcePropertyDefinition)],e.default.prototype,"source",void 0),t.__decorate([s.property({type:Number,cast:o.toPt,json:{write:!0}})],e.default.prototype,"height",void 0),t.__decorate([l.reader("height",["height","size"])],e.default.prototype,"readHeight",null),t.__decorate([s.property({type:Number,cast:o.toPt,json:{write:!0}})],e.default.prototype,"width",void 0),t.__decorate([s.property({json:{write:!1}})],e.default.prototype,"size",void 0),e.default=d=t.__decorate([c.subclass("esri.symbols.PictureMarkerSymbol")],e.default),e.default})},"esri/symbols/MarkerSymbol":function(){define(["exports","../chunks/tslib.es6","../core/screenUtils","../core/accessorSupport/decorators/property","../core/accessorSupport/ensureType","../core/has","../core/RandomLCG","../core/accessorSupport/decorators/subclass","./Symbol"],function(e,t,r,o,s,i,n,a,l){"use strict";return e.default=class extends l{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}},t.__decorate([o.property({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],e.default.prototype,"angle",void 0),t.__decorate([o.property({type:["simple-marker","picture-marker"],readOnly:!0})],e.default.prototype,"type",void 0),t.__decorate([o.property({type:Number,cast:r.toPt,json:{write:!0}})],e.default.prototype,"xoffset",void 0),t.__decorate([o.property({type:Number,cast:r.toPt,json:{write:!0}})],e.default.prototype,"yoffset",void 0),t.__decorate([o.property({cast:e=>"auto"===e?e:s.ensureNumber(r.toPt(e)),json:{write:!0}})],e.default.prototype,"size",void 0),e.default=t.__decorate([a.subclass("esri.symbols.MarkerSymbol")],e.default),e.default})},"esri/symbols/PointSymbol3D":function(){define(["exports","../chunks/tslib.es6","../Color","../core/Collection","../core/lang","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","./IconSymbol3DLayer","./ObjectSymbol3DLayer","./Symbol3D","./TextSymbol3DLayer","./callouts/calloutUtils","./callouts/LineCallout3D","./support/Symbol3DVerticalOffset"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m){"use strict";var g;const b=o.ofType({base:null,key:"type",typeMap:{icon:u,object:p,text:h}});return e.default=g=class extends d{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new b,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return y.hasVisibleCallout(this)}hasVisibleVerticalOffset(){return y.hasVisibleVerticalOffset(this)}clone(){return new g({verticalOffset:s.clone(this.verticalOffset),callout:s.clone(this.callout),styleOrigin:s.clone(this.styleOrigin),symbolLayers:s.clone(this.symbolLayers),thumbnail:s.clone(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new g({symbolLayers:new o([u.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new g({symbolLayers:new o([u.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){const t=e.data?.symbol?.type;if("CIMPointSymbol"!==t)return null;const s=e.data.symbol;return new g(s?.callout?{symbolLayers:new o([u.fromCIMSymbol(e)]),callout:new f({size:.5,color:new r([0,0,0])}),verticalOffset:new m({screenLength:40})}:{symbolLayers:new o([u.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new g({symbolLayers:new o([h.fromTextSymbol(e)])})}},t.__decorate([i.property({type:m,json:{write:!0}})],e.default.prototype,"verticalOffset",void 0),t.__decorate([i.property(y.calloutProperty)],e.default.prototype,"callout",void 0),t.__decorate([i.property({type:b,json:{origins:{"web-scene":{write:!0}}}})],e.default.prototype,"symbolLayers",void 0),t.__decorate([l.enumeration({PointSymbol3D:"point-3d"},{readOnly:!0})],e.default.prototype,"type",void 0),e.default=g=t.__decorate([c.subclass("esri.symbols.PointSymbol3D")],e.default),e.default})},"esri/symbols/PolygonSymbol3D":function(){define(["exports","../chunks/tslib.es6","../core/Collection","../core/deprecate","../core/lang","../core/Logger","../core/reactiveUtils","../core/accessorSupport/decorators/property","../core/has","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","./ExtrudeSymbol3DLayer","./FillSymbol3DLayer","./IconSymbol3DLayer","./LineSymbol3DLayer","./ObjectSymbol3DLayer","./Symbol3D","./TextSymbol3DLayer","./WaterSymbol3DLayer"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b){"use strict";var _;const S=r.ofType({base:null,key:"type",typeMap:{extrude:p,fill:d,icon:h,line:y,object:f,text:g,water:b}});return e.default=_=class extends m{constructor(e){super(e),this.symbolLayers=new S,this.type="polygon-3d"}initialize(){const e=e=>{"line"===e.type&&o.deprecated(i.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),"text"===e.type&&o.deprecated(i.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(n.on(()=>this.symbolLayers,"after-add",({item:t})=>e(t),n.sync))}clone(){return new _({styleOrigin:s.clone(this.styleOrigin),symbolLayers:s.clone(this.symbolLayers),thumbnail:s.clone(this.thumbnail)})}static fromJSON(e){const t=new _;if(t.read(e),2===t.symbolLayers.length&&"fill"===t.symbolLayers.at(0).type&&"line"===t.symbolLayers.at(1).type){const r=t.symbolLayers.at(0),o=t.symbolLayers.at(1);!o.enabled||e.symbolLayers?.[1]&&!1===e.symbolLayers[1].enable||(r.outline={size:o.size,color:null!=o.material?o.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new _({symbolLayers:new r([d.fromSimpleFillSymbol(e)])})}},t.__decorate([a.property({type:S,json:{write:!0}})],e.default.prototype,"symbolLayers",void 0),t.__decorate([c.enumeration({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],e.default.prototype,"type",void 0),e.default=_=t.__decorate([u.subclass("esri.symbols.PolygonSymbol3D")],e.default),e.default})},"esri/symbols/SimpleFillSymbol":function(){define(["exports","../chunks/tslib.es6","../Color","../core/jsonMap","../core/lang","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","./FillSymbol","./SimpleLineSymbol"],function(e,t,r,o,s,i,n,a,l,c,u,p){"use strict";var d;const h=new o.JSONMap({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});return e.default=d=class extends u{constructor(...e){super(...e),this.color=new r([0,0,0,.25]),this.outline=new p,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,r){if(e&&"string"!=typeof e)return e;const o={};return e&&(o.style=e),t&&(o.outline=t),r&&(o.color=r),o}clone(){return new d({color:s.clone(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}},t.__decorate([i.property()],e.default.prototype,"color",void 0),t.__decorate([i.property()],e.default.prototype,"outline",void 0),t.__decorate([l.enumeration({esriSFS:"simple-fill"},{readOnly:!0})],e.default.prototype,"type",void 0),t.__decorate([i.property({type:h.apiValues,json:{read:h.read,write:h.write}})],e.default.prototype,"style",void 0),e.default=d=t.__decorate([c.subclass("esri.symbols.SimpleFillSymbol")],e.default),e.default})},"esri/symbols/SimpleMarkerSymbol":function(){define(["exports","../chunks/tslib.es6","../Color","../core/jsonMap","../core/lang","../core/screenUtils","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","./MarkerSymbol","./SimpleLineSymbol"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h){"use strict";var y;const f=new o.JSONMap({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});return e.default=y=class extends d{constructor(...e){super(...e),this.color=new r([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new h}normalizeCtorArgs(e,t,r,o){if(e&&"string"!=typeof e)return e;const s={};return e&&(s.style=e),null!=t&&(s.size=i.toPt(t)),r&&(s.outline=r),o&&(s.color=o),s}writeColor(e,t){e&&"x"!==this.style&&"cross"!==this.style&&(t.color=e.toJSON()),null===e&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new y({angle:this.angle,color:s.clone(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}},t.__decorate([n.property()],e.default.prototype,"color",void 0),t.__decorate([p.writer("color")],e.default.prototype,"writeColor",null),t.__decorate([c.enumeration({esriSMS:"simple-marker"},{readOnly:!0})],e.default.prototype,"type",void 0),t.__decorate([n.property()],e.default.prototype,"size",void 0),t.__decorate([n.property({type:f.apiValues,json:{read:f.read,write:f.write}})],e.default.prototype,"style",void 0),t.__decorate([n.property({type:String,json:{write:!0}})],e.default.prototype,"path",null),t.__decorate([n.property({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":h}},json:{default:null,write:!0}})],e.default.prototype,"outline",void 0),e.default=y=t.__decorate([u.subclass("esri.symbols.SimpleMarkerSymbol")],e.default),e.default})},"esri/symbols/TextSymbol":function(){define(["exports","../chunks/tslib.es6","../Color","../core/lang","../core/screenUtils","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/cast","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","./Font","./Symbol","./support/textUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d){"use strict";var h;return e.default=h=class extends p{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new u,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,r){if(e&&"string"!=typeof e)return e;const o={};return e&&(o.text=e),t&&(o.font=t),r&&(o.color=r),o}writeLineWidth(e,t,r,o){o&&"string"!=typeof o?o.origin:t[r]=e}castLineWidth(e){return s.toPt(e)}writeLineHeight(e,t,r,o){o&&"string"!=typeof o?o.origin:t[r]=e}clone(){return new h({angle:this.angle,backgroundColor:o.clone(this.backgroundColor),borderLineColor:o.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:o.clone(this.color),font:this.font&&this.font.clone(),haloColor:o.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor?.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor?.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}},t.__decorate([i.property({type:r,json:{write:!0}})],e.default.prototype,"backgroundColor",void 0),t.__decorate([i.property({type:r,json:{write:!0}})],e.default.prototype,"borderLineColor",void 0),t.__decorate([i.property({type:Number,json:{write:!0},cast:s.toPt})],e.default.prototype,"borderLineSize",void 0),t.__decorate([i.property({type:u,json:{write:!0}})],e.default.prototype,"font",void 0),t.__decorate([i.property({...d.horizontalAlignmentProperty,json:{write:!0}})],e.default.prototype,"horizontalAlignment",void 0),t.__decorate([i.property({type:Boolean,json:{write:!0}})],e.default.prototype,"kerning",void 0),t.__decorate([i.property({type:r,json:{write:!0}})],e.default.prototype,"haloColor",void 0),t.__decorate([i.property({type:Number,cast:s.toPt,json:{write:!0}})],e.default.prototype,"haloSize",void 0),t.__decorate([i.property({type:Boolean,json:{write:!0}})],e.default.prototype,"rightToLeft",void 0),t.__decorate([i.property({type:Boolean,json:{write:!0}})],e.default.prototype,"rotated",void 0),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"text",void 0),t.__decorate([a.enumeration({esriTS:"text"},{readOnly:!0})],e.default.prototype,"type",void 0),t.__decorate([i.property({...d.verticalAlignmentProperty,json:{write:!0}})],e.default.prototype,"verticalAlignment",void 0),t.__decorate([i.property({type:Number,cast:s.toPt,json:{write:!0}})],e.default.prototype,"xoffset",void 0),t.__decorate([i.property({type:Number,cast:s.toPt,json:{write:!0}})],e.default.prototype,"yoffset",void 0),t.__decorate([i.property({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],e.default.prototype,"angle",void 0),t.__decorate([i.property({type:Number,json:{write:!0}})],e.default.prototype,"width",void 0),t.__decorate([i.property({type:Number})],e.default.prototype,"lineWidth",void 0),t.__decorate([c.writer("lineWidth")],e.default.prototype,"writeLineWidth",null),t.__decorate([n.cast("lineWidth")],e.default.prototype,"castLineWidth",null),t.__decorate([i.property(d.lineHeightProperty)],e.default.prototype,"lineHeight",void 0),t.__decorate([c.writer("lineHeight")],e.default.prototype,"writeLineHeight",null),e.default=h=t.__decorate([l.subclass("esri.symbols.TextSymbol")],e.default),e.default})},"esri/symbols/WebStyleSymbol":function(){define(["require","exports","../chunks/tslib.es6","../core/deprecate","../core/Error","../core/Logger","../core/promiseUtils","../core/accessorSupport/decorators/property","../core/has","../core/RandomLCG","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","../portal/Portal","../chunks/persistableUrlUtils","./Symbol","./support/Thumbnail"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f){"use strict";var m;return t.default=m=class extends y{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=null!=this.portal?this.portal:d.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t?.portal,super.read(e,t)}clone(){return new m({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol(e)}async fetchCIMSymbol(e){o.deprecatedFunction(i.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const t=await this._fetchSymbol({...e,acceptedFormats:["cim"]});if("cim"!==t?.type)throw new s("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return t}async _fetchSymbol(t){const r=null!=t?t.cache:null,o=r?this._fetchCacheKey:null;if(null!=r){const e=o&&r.get(o);if(e)return e.clone()}const{resolveWebStyleSymbol:s}=await new Promise((t,r)=>e(["./support/webStyleSymbolUtils"],t,r));n.throwIfAborted(t);const a=s(this,{portal:this.portal},t);a.catch(e=>{i.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",e)});const l=await a;return null!=r&&r.set(o,l.clone()),l}},r.__decorate([a.property({json:{write:!1}})],t.default.prototype,"color",void 0),r.__decorate([a.property({type:String,json:{write:!0}})],t.default.prototype,"styleName",void 0),r.__decorate([a.property({type:d,json:{write:!1}})],t.default.prototype,"portal",void 0),r.__decorate([a.property({type:String,json:{read:h.read,write:h.write}})],t.default.prototype,"styleUrl",void 0),r.__decorate([a.property({type:f.Thumbnail,json:{read:!1}})],t.default.prototype,"thumbnail",void 0),r.__decorate([a.property({type:String,json:{write:!0}})],t.default.prototype,"name",void 0),r.__decorate([u.enumeration({styleSymbolReference:"web-style"},{readOnly:!0})],t.default.prototype,"type",void 0),r.__decorate([a.property()],t.default.prototype,"_fetchCacheKey",null),t.default=m=r.__decorate([p.subclass("esri.symbols.WebStyleSymbol")],t.default),t.default})},"esri/core/workers/workers":function(){define(["require","exports","../Error","../has","../promiseUtils","./Connection","./connectionRegistry","./RemoteClient","./WorkerOwner"],function(e,t,r,o,s,i,n,a,l){"use strict";function c(e){if(e&&e.__esModule)return e;const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e)for(const r in e)if("default"!==r){const o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>e[r]})}return t.default=e,Object.freeze(t)}const u=o("host-browser")?Math.min(navigator.hardwareConcurrency-1,o("workers-pool-size")??8):0;let p=o("esri-mobile")?Math.min(u,3):u;p||(p=o("safari")&&o("mac")?7:2);let d=0;const h=[];async function y(e,t){const r=new i,{registryTarget:o,...s}=t;return await r.open(e,s),o&&n.register(o,r),r}let f,m=null;async function g(){if(m)return m;f=new AbortController;const e=[];for(let t=0;t<p;t++){const r=l.create(t).then(e=>(h[t]=e,e));e.push(r)}return m=Promise.all(e),m}t.Connection=i,t.RemoteClient=a,t.initialize=function(){g()},t.open=async function(t,i={}){if("string"!=typeof t)throw new r("workers:undefined-module","modulePath is missing");let n=i.strategy||"distributed";if(o("host-webworker")&&!o("esri-workers")&&(n="local"),"local"===n){let r=await a.loadWorker(t);r||(r=await new Promise((r,o)=>e([t],e=>r(c(e)),o))),s.throwIfAborted(i.signal);const o=i.client||r;return y([a.connect(r,i.schedule)],{...i,client:o})}if(await g(),s.throwIfAborted(i.signal),"dedicated"===n){const e=d++%p;return y([await h[e].open(t,i)],i)}if(i.maxNumWorkers&&i.maxNumWorkers>0){const e=Math.min(i.maxNumWorkers,p);if(e<p){const r=new Array(e);for(let o=0;o<e;++o){const e=d++%p;r[o]=h[e].open(t,i)}return y(r,i)}}return y(h.map(e=>e.open(t,i)),i)},t.openWithPorts=function(e,t){return y(e,{client:t})},t.terminate=function(){m&&(f.abort(),m=null);for(let e=0;e<h.length;e++)h[e]&&h[e].terminate();h.length=0},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/core/workers/Connection":function(){define(["../handleUtils","../has","../promiseUtils","../Queue","./connectionRegistry","./InvokeHandler","./RemoteClient"],function(e,t,r,o,s,i,n){"use strict";return class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new o,this._ongoingLowPriorityJobsQueue=new o}destroy(){this.close()}get closed(){return!this._clients?.length}open(e,t){return new Promise((o,s)=>{let i=!0;const a=e=>{r.throwIfAborted(t.signal),i&&(i=!1,e())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let i=0;i<e.length;++i){const l=e[i];r.isPromiseLike(l)?this._clientPromises[i]=l.then(e=>(this._clients[i]=new n(e,t,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),a(o),this._clients[i]),()=>(a(s),null)):(this._clients[i]=new n(l,t,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[i]=Promise.resolve(this._clients[i]),a(o))}})}broadcast(e,t,r){const o=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const i=this._clientPromises[s];o[s]=i.then(o=>o?.invoke(e,t,r))}return o}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(r.createAbortError(`Worker closing, aborting job calling '${e.methodName}'`));for(;e=this._ongoingLowPriorityJobsQueue.pop();)e.resolver.reject(r.createAbortError(`Worker closing, aborting job calling '${e.methodName}'`));for(const e of this._clientPromises)e.then(e=>e?.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,s.unregister(this)}invoke(e,t,r){return this.apply(e,[t],r)}apply(e,t,o){const s=r.createResolver();("low"===o?.priority?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:e,data:t,invokeOptions:o,resolver:s});for(let e=0;e<this._clientPromises.length;e++){const t=this._clients[e];t?t.jobAdded():this._clientPromises[e].then(e=>e?.jobAdded())}return s.promise}createInvokeProxy(e){return i.createInvokeProxy(this,e)}on(t,r){return Promise.all(this._clientPromises).then(()=>e.handlesGroup(this._clients.map(e=>e.on(t,r))))}openPorts(){return new Promise(e=>{const t=new Array(this._clientPromises.length);let r=t.length;for(let o=0;o<this._clientPromises.length;++o)this._clientPromises[o].then(s=>{s&&(t[o]=s.openPort()),0===--r&&e(t)})})}get test(){}}})},"esri/core/Queue":function(){define(["./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(e,t){"use strict";class r{constructor(e=e=>e.values().next().value){this._peeker=e,this._observable=new t.SimpleObservable,this._items=new Set}get length(){return e.trackAccess(this._observable),this._items.size}clear(){0!==this.length&&(this._items.clear(),this._observable.notify())}last(){if(0===this.length)return;let e;for(e of this._items);return e}peek(){if(0!==this.length)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(t){return e.trackAccess(this._observable),this._items.has(t)}pop(){if(0===this.length)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(0===this.length)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const t=this.length;return this._items.forEach(t=>{e(t)||this._items.delete(t)}),t!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){e.trackAccess(this._observable),yield*this._items}}return r})},"esri/core/workers/connectionRegistry":function(){define(["exports"],function(e){"use strict";const t=new FinalizationRegistry(e=>{e.close()});e.register=function(e,r){t.register(e,r,r)},e.unregister=function(e){t.unregister(e)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/workers/InvokeHandler":function(){define(["exports"],function(e){"use strict";e.createInvokeProxy=function(e,t){return new Proxy({},{get:(r,o,s)=>(...r)=>{let s,i;const n=r[r.length-1];var a;return"object"!=typeof(a=n)||Array.isArray(a)||null==a||!("signal"in a)&&!("transferList"in a)&&0!==Object.keys(a).length||(s=n.signal,i=n.transferList,r.pop()),e.apply(t?`${t}.${o.toString()}`:o.toString(),r,{transferList:i,signal:s})}})},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/workers/RemoteClient":function(){define(["../../kernel","../Error","../events","../handleUtils","../maybe","../promiseUtils","./InvokeHandler","./registry","./utils","../../support/revision"],function(e,t,r,o,s,i,n,a,l,c){"use strict";const{CLOSE:u,ABORT:p,INVOKE:d,RESPONSE:h,OPEN_PORT:y,ON:f}=l.MessageType;class m{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===p?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class g{static{this.kernelInfo={buildDate:c.buildDate,fullVersion:e.fullVersion,revision:c.commitHash}}static{this.clients=new Map}static connect(e,t){const r=new MessageChannel;let o;o="function"==typeof e?new e:"default"in e&&"function"==typeof e.default?new e.default:e;const s=new g(r.port1,{channel:r,client:o,schedule:t});return"object"==typeof o&&"remoteClient"in o&&(o.remoteClient=s),g.clients.set(s,o),r.port2}static loadWorker(e){const t=a.registry[e];return t?t():Promise.resolve(null)}constructor(e,t,r,o){this._port=e,this._jobQueue=r,this._lowPriorityJobQueue=o,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new m(e=>this._onInvokeMessage(e)),this._client=t.client,this._onMessage=this._onMessage.bind(this),this._channel=t.channel,this._schedule=t.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:u}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,t,r){return this.apply(e,[t],r)}apply(e,r,o){const n=o?.signal,a=o?.transferList;if(!this._port)return Promise.reject(new t(l.portClosedErrorName,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:r}));const c=l.newJobId();return new Promise((t,o)=>{if(i.isAborted(n))return this._processWork(),void o(i.createAbortError());const l=i.onAbort(n,()=>{const e=this._outJobs.get(c);e&&(this._outJobs.delete(c),this._processWork(),s.removeMaybe(e.abortHandle),this._post({type:p,jobId:c}),o(i.createAbortError()))}),u={resolve:t,reject:o,abortHandle:l,debugInfo:e};this._outJobs.set(c,u),this._post({type:d,jobId:c,methodName:e,abortable:null!=n},r,a)})}createInvokeProxy(e){return n.createInvokeProxy(this,e)}on(e,t){const r=new MessageChannel;function s(e){t(e.data)}return this._port.postMessage({type:f,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",s),r.port1.start(),o.makeHandle(()=>{r.port1.postMessage({type:u}),r.port1.close(),r.port1.removeEventListener("message",s)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:y,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=2)return;const e=this._jobQueue?.pop()??this._lowPriorityJobQueue?.pop();if(!e)return;const{methodName:t,data:r,invokeOptions:o,resolver:s}=e;this.apply(t,r,o).then(e=>s.resolve(e)).catch(e=>s.reject(e))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{s.removeMaybe(e.abortHandle),e.reject(i.createAbortError(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null,this._onMessage=null,this._channel=null,this._jobQueue=void 0,this._invokeQueue=void 0,this._lowPriorityJobQueue=void 0}_onMessage(e){null!=this._schedule?this._schedule(()=>this._processMessage(e,!0)):this._processMessage(e,!1)}_processMessage(e,t){const r=l.receiveMessage(e);if(r)switch(r.type){case h:this._onResponseMessage(r);break;case d:t?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case p:this._onAbortMessage(r);break;case u:this._onCloseMessage();break;case y:this._onOpenPortMessage(r);break;case f:this._onOnMessage(r)}}_onAbortMessage(e){const t=this._inJobs,r=e.jobId,o=t.get(r);this._invokeQueue.push(e),o&&(o.controller&&o.controller.abort(),t.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&g.clients.get(this)===e&&e.destroy(),g.clients.delete(this),e?.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:t,jobId:r,data:o=[],abortable:s}=e,n=s?new AbortController:null,a=this._inJobs;let c,u=this._client,p=u[t];try{if(!p&&t&&t.includes(".")){const e=t.split(".");for(let t=0;t<e.length-1;t++)u=u[e[t]],p=u[e[t+1]]}if("function"!=typeof p)throw new TypeError(`${t} is not a function`);o.push({client:this,signal:n?n.signal:null}),c=p.apply(u,o)}catch(e){return void this._post({type:h,jobId:r,error:l.toInvokeError(e)})}i.isPromiseLike(c)?(a.set(r,{controller:n,promise:c}),c.then(e=>{a.has(r)&&(a.delete(r),this._post({type:h,jobId:r},e))},e=>{a.has(r)&&(a.delete(r),i.isAbortError(e)||this._post({type:h,jobId:r,error:l.toInvokeError(e||{message:`Error encountered at method ${t}`})}))})):this._post({type:h,jobId:r},c)}_onOpenPortMessage(e){new g(e.port,{client:this._client})}_onOnMessage(e){const{port:t}=e,o=this._client.on(e.eventType,e=>{t.postMessage(e)}),s=r.on(e.port,"message",e=>{const r=l.receiveMessage(e);r?.type===u&&(s.remove(),o.remove(),t.close())})}_onResponseMessage(e){const{jobId:r,error:o,data:i}=e,n=this._outJobs;if(!n.has(r))return;const a=n.get(r);n.delete(r),this._processWork(),s.removeMaybe(a.abortHandle),o?a.reject(t.fromJSON(JSON.parse(o))):a.resolve(i)}_post(e,t,r){return l.postMessage(this._port,e,t,r)}}return g})},"esri/core/workers/registry":function(){define(["require","exports"],function(e,t){"use strict";const r=e=>Object.freeze(Object.defineProperty({__proto__:null,default:e},Symbol.toStringTag,{value:"Module"})),o={statsWorker:()=>new Promise((t,r)=>e(["../../smartMapping/statistics/support/statsWorker"],t,r)),geometryEngineWorker:()=>new Promise((t,r)=>e(["../../geometry/geometryEngineWorker"],t,r)),arcadeGeometryOperatorsWorker:()=>new Promise((t,r)=>e(["../../arcade/geometry/operatorsWorker"],t,r)),CSVSourceWorker:()=>new Promise((t,o)=>e(["../../layers/graphics/sources/support/CSVSourceWorker"],e=>t(r(e)),o)),EdgeProcessingWorker:()=>new Promise((t,o)=>e(["../../views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker"],e=>t(r(e)),o)),ElevationSamplerWorker:()=>new Promise((t,o)=>e(["../../geometry/support/meshUtils/ElevationSamplerWorker"],e=>t(r(e)),o)),FeatureServiceSnappingSourceWorker:()=>new Promise((t,o)=>e(["../../views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceSnappingSourceWorker"],e=>t(r(e)),o)),GaussianSplatSortWorker:()=>new Promise((t,r)=>e(["../../views/3d/support/GaussianSplatSortWorker"],t,r)),GeoJSONSourceWorker:()=>new Promise((t,o)=>e(["../../layers/graphics/sources/geojson/GeoJSONSourceWorker"],e=>t(r(e)),o)),LercWorker:()=>new Promise((t,o)=>e(["../../layers/support/LercWorker"],e=>t(r(e)),o)),MemorySourceWorker:()=>new Promise((t,o)=>e(["../../layers/graphics/sources/support/MemorySourceWorker"],e=>t(r(e)),o)),PBFDecoderWorker:()=>new Promise((t,o)=>e(["../../views/3d/support/PBFDecoderWorker"],e=>t(r(e)),o)),FeaturePipelineWorker:()=>new Promise((t,o)=>e(["../../views/2d/layers/features/FeaturePipelineWorker"],e=>t(r(e)),o)),PointCloudWorker:()=>new Promise((t,o)=>e(["../../views/3d/layers/PointCloudWorker"],e=>t(r(e)),o)),RasterWorker:()=>new Promise((t,o)=>e(["../../layers/support/RasterWorker"],e=>t(r(e)),o)),SceneLayerSnappingSourceWorker:()=>new Promise((t,o)=>e(["../../views/interactive/snapping/featureSources/sceneLayerSource/SceneLayerSnappingSourceWorker"],e=>t(r(e)),o)),SceneLayerWorker:()=>new Promise((t,r)=>e(["../../views/3d/layers/SceneLayerWorker"],t,r)),WFSSourceWorker:()=>new Promise((t,o)=>e(["../../layers/graphics/sources/WFSSourceWorker"],e=>t(r(e)),o)),WorkerTileHandler:()=>new Promise((t,o)=>e(["../../views/2d/engine/vectorTiles/WorkerTileHandler"],e=>t(r(e)),o)),Lyr3DWorker:()=>new Promise((t,r)=>e(["../../views/3d/layers/Lyr3DWorker"],t,r)),Feature3DPipelineWorker:()=>new Promise((t,o)=>e(["../../views/3d/layers/graphics/pipeline/Feature3DPipelineWorker"],e=>t(r(e)),o)),TextureCompressionWorker:()=>new Promise((t,r)=>e(["../../views/support/TextureCompressionWorker"],t,r)),FlowWorker:()=>new Promise((t,o)=>e(["../../views/3d/support/flow/FlowWorker"],e=>t(r(e)),o)),ParquetSourceWorker:()=>new Promise((t,o)=>e(["../../layers/graphics/sources/support/ParquetSourceWorker"],e=>t(r(e)),o)),PanoramicMeshWorker:()=>new Promise((t,r)=>e(["../../widgets/PanoramicViewer/support/PanoramicMeshWorker"],t,r))};t.registry=o,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/core/workers/utils":function(){define(["exports","../has","../promiseUtils"],function(e,t,r){"use strict";const o="worker:port-closed",s={HANDSHAKE:0,OPEN:1,OPENED:2,RESPONSE:3,INVOKE:4,ABORT:5,CLOSE:6,OPEN_PORT:7,ON:8};let i=0;function n(e){return e&&"object"==typeof e&&("result"in e||"transferList"in e)}function a(e){return e?"string"==typeof e?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function l(e){if(!e?.length)return null;if(t("esri-workers-arraybuffer-transfer"))return e;const r=e.filter(e=>{return!((t=e)instanceof ArrayBuffer||"ArrayBuffer"===t?.constructor?.name);var t});return r.length?r:null}e.MessageType=s,e.ignoreConnectionErrors=async function(e){try{return await e}catch(e){const t=e?.name===o;if(!r.isAbortError(e)&&!t)throw e;return}},e.isTransferableResult=n,e.newJobId=function(){return i++},e.portClosedErrorName=o,e.postMessage=function e(r,o,i,c){if(o.type===s.OPEN_PORT)return void r.postMessage(o,[o.port]);if(o.type!==s.INVOKE&&o.type!==s.RESPONSE)return void r.postMessage(o);let u;if(n(i)?(u=l(i.transferList),o.data=i.result):(u=l(c),o.data=i),u){if(t("ff"))for(const t of u)if("byteLength"in t&&t.byteLength>267386880){const t="Worker call with large ArrayBuffer would crash Firefox";switch(o.type){case s.INVOKE:throw t;case s.RESPONSE:return void e(r,{type:s.RESPONSE,jobId:o.jobId,error:a(t)})}}r.postMessage(o,u)}else r.postMessage(o)},e.receiveMessage=function(e){if(!e)return null;const t=e.data;return t?"string"==typeof t?JSON.parse(t):t:null},e.toInvokeError=a,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/workers/WorkerOwner":function(){define(["../Error","../Logger","../maybe","../promiseUtils","./staticWorkerMessages","./utils","./workerFactory"],function(e,t,r,o,s,i,n){"use strict";const{ABORT:a,INVOKE:l,OPEN:c,OPENED:u,RESPONSE:p}=i.MessageType;class d{static async create(e){const t=await n.createWorker();return new d(t,e)}constructor(e,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=r,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",e=>{e.preventDefault(),t.getLogger("esri.core.workers.WorkerOwner").error(e)})}terminate(){this.worker.terminate()}async open(e,t={}){const{signal:r}=t,s=i.newJobId();return new Promise((t,i)=>{const n={resolve:t,reject:i,abortHandle:o.onAbortOrThrow(r,()=>{this._outJobs.delete(s),this._post({type:a,jobId:s})})};this._outJobs.set(s,n),this._post({type:c,jobId:s,modulePath:e})})}_onMessage(e){const t=i.receiveMessage(e);if(t)switch(t.type){case u:this._onOpenedMessage(t);break;case p:this._onResponseMessage(t);break;case a:this._onAbortMessage(t);break;case l:this._onInvokeMessage(t)}}_onAbortMessage(e){const t=this._inJobs,r=e.jobId,o=t.get(r);o&&(o.controller&&o.controller.abort(),t.delete(r))}_onInvokeMessage(e){const{methodName:t,jobId:r,data:n,abortable:a}=e,l=a?new AbortController:null,c=this._inJobs,u=s.staticWorkerMessages[t];let d;try{if("function"!=typeof u)throw new TypeError(`${t} is not a function`);d=u.call(null,n,{signal:l?l.signal:null})}catch(e){return void this._post({type:p,jobId:r,error:i.toInvokeError(e)})}o.isPromiseLike(d)?(c.set(r,{controller:l,promise:d}),d.then(e=>{c.has(r)&&(c.delete(r),this._post({type:p,jobId:r},e))},e=>{c.has(r)&&(c.delete(r),e||(e={message:"Error encountered at method"+t}),o.isAbortError(e)||this._post({type:p,jobId:r,error:i.toInvokeError(e||{message:`Error encountered at method ${t}`})}))})):this._post({type:p,jobId:r},d)}_onOpenedMessage(e){const{jobId:t,data:o}=e,s=this._outJobs.get(t);s&&(this._outJobs.delete(t),r.removeMaybe(s.abortHandle),s.resolve(o))}_onResponseMessage(t){const{jobId:o,error:s,data:i}=t,n=this._outJobs.get(o);n&&(this._outJobs.delete(o),r.removeMaybe(n.abortHandle),s?n.reject(e.fromJSON(JSON.parse(s))):n.resolve(i))}_post(e,t,r){return i.postMessage(this.worker,e,t,r)}}return d})},"esri/core/workers/staticWorkerMessages":function(){define(["exports","../../request","../urlUtils"],function(e,t,r){"use strict";const o={async request(e,o){const s=e.options,i=s.responseType;s.signal=o?.signal,s.responseType="native"===i||"native-request-init"===i?"native-request-init":i&&["blob","json","text"].includes(i)&&r.getInterceptor(e.url)?.after?i:"array-buffer";const n=await t(e.url,s),a={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch(n.requestOptions?.responseType){case"native-request-init":return delete a.data.signal,a;case"blob":a.data=await a.data.arrayBuffer();break;case"json":a.data=(new TextEncoder).encode(JSON.stringify(a.data)).buffer;break;case"text":a.data=(new TextEncoder).encode(a.data).buffer}return{result:a,transferList:[a.data]}}};e.staticWorkerMessages=o,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/workers/workerFactory":function(){define(["exports","../../config","../../request","../Error","../Logger","../urlUtils","../../intl","../../kernel","../has","./loaderConfig","./utils","./WorkerFallback","../../intl/locale","../../support/revision"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h){"use strict";const y=()=>s.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:f}=u.MessageType;let m,g;const b="Failed to create Worker. Fallback to execute module in main thread";async function _(e){return new Promise(t=>{function r(s){const i=u.receiveMessage(s);i&&i.type===f&&(e.removeEventListener("message",r),e.removeEventListener("error",o),t(e))}function o(t){t.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",o),y().warn("Failed to create Worker. Fallback to execute module in main thread",t),(e=new p).addEventListener("message",r),e.addEventListener("error",o)}e.addEventListener("message",r),e.addEventListener("error",o)})}let S=0;e.createWorker=async function(){if(!l("esri-workers"))return _(new p);if(!m&&!g)try{const e='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});'.split("{CONFIGURATION}").join(function(){let e;if(null!=t.default){const r={...t};delete r.default,e=JSON.parse(JSON.stringify(r))}else e=JSON.parse(JSON.stringify(t));e.assetsPath=i.makeAbsolute(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?i.makeAbsolute(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=d.getLocale(),e.has={"esri-csp-restrictions":l("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":l("esri-2d-update-debug"),"esri-2d-log-updating":l("esri-2d-log-updating"),"featurelayer-pbf":l("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":l("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":l("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":l("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":l("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":l("featurelayer-query-max-depth"),"featurelayer-query-tile-max-features":l("featurelayer-query-tile-max-features"),"featurelayer-query-tile-concurrency":l("featurelayer-query-tile-concurrency"),"featurelayer-query-pausing-enabled":l("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-concurrency":l("featurelayer-snapshot-concurrency"),"featurelayer-snapshot-enabled":l("featurelayer-snapshot-enabled"),"esri-atomics":l("esri-atomics"),"esri-shared-array-buffer":l("esri-shared-array-buffer"),"esri-tiles-debug":l("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":l("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":l("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl?e.workers.loaderUrl=i.makeAbsolute(e.workers.loaderUrl):c.defaultLoaderUrl&&(e.workers.loaderUrl=c.defaultLoaderUrl),e.workers.workerPath?e.workers.workerPath=i.makeAbsolute(e.workers.workerPath):e.workers.workerPath="esri/core/workers/RemoteClient",e.workers.useDynamicImport=!1;const r=t.workers.loaderConfig,o=c.loaderConfig({baseUrl:r?.baseUrl,locale:d.getLocale(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...r?.has},map:{...r?.map},paths:{...r?.paths},packages:r?.packages||[]}),s={buildDate:h.buildDate,fullVersion:a.fullVersion,revision:h.commitHash};return JSON.stringify({esriConfig:e,loaderConfig:o,kernelInfo:s})}());m=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){g=e||{}}let e;if(m)try{e=new Worker(m,{name:"esri-worker-"+S++})}catch(t){y().warn(b,g),e=new p}else y().warn(b,g),e=new p;return _(e)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/workers/loaderConfig":function(){define(["exports","../../assets","../has","../urlUtils"],function(e,t,r,o){"use strict";e.defaultLoaderUrl=null,e.defaultLoaderUrl=o.makeAbsolute(t.getAssetUrl("esri/core/workers/init.js"));const s={};s.baseUrl=o.makeAbsolute(t.getAssetUrl("dojo/")),s.packages=[{name:"esri",location:"../esri"}],e.loaderConfig=function(e){const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages?.slice()||[],paths:{...s.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=s.baseUrl),s.packages?.forEach(e=>{!function(e,t){for(const r of e)if(r.name===t.name)return;e.push(t)}(t.packages??[],e)}),t},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/workers/WorkerFallback":function(){define(["require","../nextTick","./RemoteClient","./utils"],function(e,t,r,o){"use strict";function s(e){if(e&&e.__esModule)return e;const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e)for(const r in e)if("default"!==r){const o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>e[r]})}return t.default=e,Object.freeze(t)}class i{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(t=>{this[t]=(...r)=>e[t](...r)})}}return class{constructor(){this._dispatcher=new i,this._workerPostMessage({type:o.MessageType.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){t.nextTick(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,t,r){this._dispatcher.addEventListener(e,t,r)}removeEventListener(e,t,r){this._dispatcher.removeEventListener(e,t,r)}_workerPostMessage(e){t.nextTick(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(t){const i=o.receiveMessage(t);if(i&&i.type===o.MessageType.OPEN){const{modulePath:t,jobId:n}=i;let a=await r.loadWorker(t);a||(a=await new Promise((r,o)=>e([t],e=>r(s(e)),o)));const l=r.connect(a);this._workerPostMessage({type:o.MessageType.OPENED,jobId:n,data:l})}}}})},"esri/rest/query/operations/editsZScale":function(){define(["exports","../../../core/unitUtils","../../../geometry/support/spatialReferenceUtils"],function(e,t,r){"use strict";function o(e,t,r){if(null==e.hasM||e.hasZ)for(const e of t)for(const t of e)t.length>2&&(t[2]*=r)}function s(e,t,r){if(e)for(const o of e)i(o.geometry,t,r)}function i(e,s,i){if(!e?.spatialReference||r.equals(e.spatialReference,s))return;const n=t.getMetersPerVerticalUnitForSR(e.spatialReference)/i;if(1!==n)if("x"in e)null!=e.z&&(e.z*=n);else if("rings"in e)o(e,e.rings,n);else if("paths"in e)o(e,e.paths,n);else if("points"in e&&(null==e.hasM||e.hasZ))for(const t of e.points)t.length>2&&(t[2]*=n)}e.unapplyEditsZUnitScaling=function(e,r,o){if(!e&&!r||!o)return;const i=t.getMetersPerVerticalUnitForSR(o);s(e,o,i),s(r,o,i)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/queryZScale":function(){define(["exports","../../../geometry/support/zscale"],function(e,t){"use strict";e.applyFeatureSetZUnitScaling=function(e,r,o){if(!o?.features||!o.hasZ)return;const s=t.getGeometryZScaler(o.geometryType,r,e.outSpatialReference);if(null!=s)for(const e of o.features)s(e.geometry)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/FeatureSet":function(){define(["exports","../../chunks/tslib.es6","../../Graphic","../../core/jsonMap","../../core/JSONSupport","../../core/lang","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","../../geometry/SpatialReference","../../geometry/support/jsonUtils","../../geometry/support/typeUtils","../../layers/support/Field"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f){"use strict";var m;const g=new o.JSONMap({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});return e.default=m=class extends s.JSONSupport{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){return this.readFeaturesWithClass(e,t,r)}writeGeometryType(e,t,r,o){if(e)return void g.write(e,t,r,o);const{features:s}=this;if(s)for(const e of s)if(null!=e?.geometry)return void g.write(e.geometry.type,t,r,o)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,o=h.fromJSON(e);return o&&!r&&t.spatialReference&&(o.spatialReference=d.fromJSON(t.spatialReference)),o}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const e of r)if(e&&null!=e.geometry&&e.geometry.spatialReference)return void(t.spatialReference=e.geometry.spatialReference.toJSON())}clone(){return new m(this.cloneProperties())}cloneProperties(){return i.clone({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const o=t.features[r];if(o.geometry){const t=e?.[r];o.geometry=t?.toJSON()||o.geometry}}return t}quantize(e){const{scale:[t,r],translate:[o,s]}=e,i=this.features,n=this._getQuantizationFunction(this.geometryType,e=>Math.round((e-o)/t),e=>Math.round((s-e)/r));for(let e=0,t=i.length;e<t;e++)n?.(i[e].geometry)||(i.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[o,s],scale:[i,n]}=r;let a=null,l=null;if(this.hasZ&&null!=r?.scale?.[2]){const{translate:[,,e],scale:[,,t]}=r;a=r=>r*t+e}if(this.hasM&&null!=r?.scale?.[3]){const{translate:[,,,e],scale:[,,,t]}=r;l=r=>null==r?r:r*t+e}const c=this._getHydrationFunction(e,e=>e*i+o,e=>s-e*n,a,l);for(const{geometry:e}of t)null!=e&&c&&c(e);return this.transform=null,this}readFeaturesWithClass(e,t,r){const o=d.fromJSON(t.spatialReference),s=[];for(let t=0;t<e.length;t++){const i=e[t],n=r.fromJSON(i),a=i.geometry?.spatialReference;null==n.geometry||a||(n.geometry.spatialReference=o);const l=i.aggregateGeometries,c=n.aggregateGeometries;if(l&&null!=c)for(const e in c){const t=c[e],r=l[e],s=r?.spatialReference;null==t||s||(t.spatialReference=o)}s.push(n)}return s}_quantizePoints(e,t,r){let o,s;const i=[];for(let n=0,a=e.length;n<a;n++){const a=e[n];if(n>0){const e=t(a[0]),n=r(a[1]);e===o&&n===s||(i.push([e-o,n-s]),o=e,s=n)}else o=t(a[0]),s=r(a[1]),i.push([o,s])}return i.length>0?i:null}_getQuantizationFunction(e,t,r){return"point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{const o=h.isPolygon(e)?e.rings:e.paths,s=[];for(let e=0,i=o.length;e<i;e++){const i=o[e],n=this._quantizePoints(i,t,r);n&&s.push(n)}return s.length>0?(h.isPolygon(e)?e.rings=s:e.paths=s,e):null}:"multipoint"===e?e=>{const o=this._quantizePoints(e.points,t,r);return o&&o.length>0?(e.points=o,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r,o,s){return"point"===e?e=>{e.x=t(e.x),e.y=r(e.y),o&&(e.z=o(e.z))}:"polyline"===e||"polygon"===e?e=>{const i=h.isPolygon(e)?e.rings:e.paths;let n,a;for(let e=0,o=i.length;e<o;e++){const o=i[e];for(let e=0,s=o.length;e<s;e++){const s=o[e];e>0?(n+=s[0],a+=s[1]):(n=s[0],a=s[1]),s[0]=t(n),s[1]=r(a)}}if(o&&s)for(let e=0,t=i.length;e<t;e++){const t=i[e];for(let e=0,r=t.length;e<r;e++){const r=t[e];r[2]=o(r[2]),r[3]=s(r[3])}}else if(o)for(let e=0,t=i.length;e<t;e++){const t=i[e];for(let e=0,r=t.length;e<r;e++){const r=t[e];r[2]=o(r[2])}}else if(s)for(let e=0,t=i.length;e<t;e++){const t=i[e];for(let e=0,r=t.length;e<r;e++){const r=t[e];r[2]=s(r[2])}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax),o&&null!=e.zmax&&null!=e.zmin&&(e.zmax=o(e.zmax),e.zmin=o(e.zmin)),s&&null!=e.mmax&&null!=e.mmin&&(e.mmax=s(e.mmax),e.mmin=s(e.mmin))}:"multipoint"===e?e=>{const i=e.points;let n,a;for(let e=0,o=i.length;e<o;e++){const o=i[e];e>0?(n+=o[0],a+=o[1]):(n=o[0],a=o[1]),o[0]=t(n),o[1]=r(a)}if(o&&s)for(let e=0,t=i.length;e<t;e++){const t=i[e];t[2]=o(t[2]),t[3]=s(t[3])}else if(o)for(let e=0,t=i.length;e<t;e++){const t=i[e];t[2]=o(t[2])}else if(s)for(let e=0,t=i.length;e<t;e++){const t=i[e];t[2]=s(t[2])}}:null}},t.__decorate([n.property({type:String,json:{write:!0}})],e.default.prototype,"displayFieldName",void 0),t.__decorate([n.property({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],e.default.prototype,"exceededTransferLimit",void 0),t.__decorate([n.property({type:[r],json:{write:!0}})],e.default.prototype,"features",void 0),t.__decorate([c.reader("features")],e.default.prototype,"readFeatures",null),t.__decorate([n.property({type:[f],json:{write:!0}})],e.default.prototype,"fields",void 0),t.__decorate([n.property({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:g.read}}})],e.default.prototype,"geometryType",void 0),t.__decorate([p.writer("geometryType")],e.default.prototype,"writeGeometryType",null),t.__decorate([n.property({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],e.default.prototype,"hasM",void 0),t.__decorate([n.property({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],e.default.prototype,"hasZ",void 0),t.__decorate([n.property({types:y.geometryTypes,json:{write:!0}})],e.default.prototype,"queryGeometry",void 0),t.__decorate([c.reader("queryGeometry")],e.default.prototype,"readQueryGeometry",null),t.__decorate([n.property({type:d,json:{write:!0}})],e.default.prototype,"spatialReference",void 0),t.__decorate([p.writer("spatialReference")],e.default.prototype,"writeSpatialReference",null),t.__decorate([n.property({json:{write:!0}})],e.default.prototype,"transform",void 0),e.default=m=t.__decorate([u.subclass("esri.rest.support.FeatureSet")],e.default),e.default.prototype.toJSON.isDefaultToJSON=!0,e.default})},"esri/layers/support/Field":function(){define(["exports","../../chunks/tslib.es6","../../core/jsonMap","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","./domains","./fieldType"],function(e,t,r,o,s,i,n,a,l,c,u,p,d){"use strict";var h;const y=new r.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",currency:"currency",dateAndTime:"date-and-time",description:"description",emailAddress:"email-address",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",phoneNumber:"phone-number",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});return e.default=class extends o.JSONSupport{static{h=this}constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch(e){}return r?.value??null}readValueType(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch(e){}return r?y.fromJSON(r.fieldValueType):null}clone(){return new h({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}},t.__decorate([s.property({type:String,json:{write:!0}})],e.default.prototype,"alias",void 0),t.__decorate([s.property({type:[String,Number],json:{write:{allowNull:!0}}})],e.default.prototype,"defaultValue",void 0),t.__decorate([s.property()],e.default.prototype,"description",void 0),t.__decorate([c.reader("description")],e.default.prototype,"readDescription",null),t.__decorate([s.property({types:p.types,json:{read:{reader:p.fromJSON},write:!0}})],e.default.prototype,"domain",void 0),t.__decorate([s.property({type:Boolean,json:{write:!0}})],e.default.prototype,"editable",void 0),t.__decorate([s.property({type:i.Integer,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],e.default.prototype,"length",void 0),t.__decorate([s.property({type:String,json:{write:!0}})],e.default.prototype,"name",void 0),t.__decorate([s.property({type:Boolean,json:{write:!0}})],e.default.prototype,"nullable",void 0),t.__decorate([l.enumeration(d.kebabDict)],e.default.prototype,"type",void 0),t.__decorate([s.property()],e.default.prototype,"valueType",void 0),t.__decorate([c.reader("valueType",["description"])],e.default.prototype,"readValueType",null),t.__decorate([s.property({type:Boolean,json:{read:!1}})],e.default.prototype,"visible",void 0),e.default=h=t.__decorate([u.subclass("esri.layers.support.Field")],e.default),e.default})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(e,t){"use strict";const r=new t.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});e.kebabDict=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/mixins/APIKeyMixin":function(){define(["exports","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n){"use strict";e.APIKeyMixin=e=>{const o=e;let s=class extends o{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?this.portalItem?.apiKey:null}set apiKey(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return t.__decorate([r.property({type:String})],s.prototype,"apiKey",null),s=t.__decorate([n.subclass("esri.layers.mixins.APIKeyMixin")],s),s},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/mixins/ArcGISService":function(){define(["exports","../../chunks/tslib.es6","../../core/Logger","../../core/accessorSupport/decorators/property","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../support/arcgisLayerUrl"],function(e,t,r,o,s,i,n,a){"use strict";e.ArcGISService=e=>{const s=e;let i=class extends s{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=a.parse(this.url);if(e?.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",a.sanitizeUrl(e,r.getLogger(this)))}};return t.__decorate([o.property()],i.prototype,"title",null),t.__decorate([o.property({type:String})],i.prototype,"url",null),i=t.__decorate([n.subclass("esri.layers.mixins.ArcGISService")],i),i},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/mixins/BlendLayer":function(){define(["exports","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/layerContainerType","../effects/jsonUtils"],function(e,t,r,o,s,i,n,a,l){"use strict";const c={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:a.excludeTables}},"portal-item":{read:!0,write:{layerContainerTypes:a.excludeTables}}}}},u={read:{reader:l.read},write:{allowNull:!0,writer:l.write,layerContainerTypes:a.excludeTables}},p={json:{read:!1,write:!1,origins:{"web-map":u,"portal-item":u}}};e.BlendLayer=e=>{const o=e;let s=class extends o{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return t.__decorate([r.property(c)],s.prototype,"blendMode",void 0),t.__decorate([r.property(p)],s.prototype,"effect",void 0),s=t.__decorate([n.subclass("esri.layers.mixins.BlendLayer")],s),s},e.blendModeProperty=c,e.effectProperty=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/jsonUtils":function(){define(["exports","../../core/Error","../../core/object","./parser","./utils"],function(e,t,r,o,s){"use strict";function i(e){const t=o.parse(e);return t?s.isEffectFunctions(t)?t.map(e=>e.toJSON()):t.map(({scale:e,effects:t})=>({scale:e,value:t.map(e=>e.toJSON())})):null}function n(e){if(!e||0===e.length)return null;if(function(e){const t=e[0];return!!t&&"scale"in t}(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:a(r.value)});return t}return a(e)}function a(e){if(!e?.length)return"";const t=[];for(const r of e){let e=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":e=[l(r,"amount")];break;case"blur":e=[l(r,"radius","pt")];break;case"hue-rotate":e=[l(r,"angle","deg")];break;case"drop-shadow":e=[l(r,"xoffset","pt"),l(r,"yoffset","pt"),l(r,"blurRadius","pt"),c(r,"color")];break;case"bloom":e=[l(r,"strength"),l(r,"radius","pt"),l(r,"threshold")]}const s=`${r.type}(${e.filter(Boolean).join(" ")})`;o.parse(s),t.push(s)}return t.join(" ")}function l(e,r,o){if(null==e[r])throw new t("effect:missing-parameter",`Missing parameter '${r}' in ${e.type} effect`,{effect:e});return o?e[r]+o:""+e[r]}function c(e,r){if(null==e[r])throw new t("effect:missing-parameter",`Missing parameter '${r}' in ${e.type} effect`,{effect:e});const o=e[r];return`rgba(${o[0]||0}, ${o[1]||0}, ${o[2]||0}, ${o[3]/255||0})`}e.effectFunctionsFromJSON=a,e.fromJSON=n,e.read=function(e,t,r){try{return n(e)}catch(e){r?.messages?.push(e)}return null},e.toJSON=i,e.write=function(e,t,o,s){try{const s=i(e);r.setDeepValue(o,s,t)}catch(e){s.messages&&s.messages.push(e)}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/parser":function(){define(["exports","../../colorUtils","../../core/Error","./effects","./utils"],function(e,t,r,o,s){"use strict";class i extends SyntaxError{constructor(e,t,r,o){super(e),this.expected=t,this.found=r,this.location=o,this.name="SyntaxError"}format(e){let t="Error: "+this.message;if(this.location){let r=null;const o=e.find(e=>e.source===this.location.source);o&&(r=o.text.split(/\r\n|\n|\r/g));const s=this.location.start,i=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(s):s,n=this.location.source+":"+i.line+":"+i.column;if(r){const e=this.location.end,o="".padEnd(i.line.toString().length," "),a=r[s.line-1],l=(s.line===e.line?e.column:a.length+1)-s.column||1;t+="\n --\x3e "+n+"\n"+o+" |\n"+i.line+" | "+a+"\n"+o+" | "+"".padEnd(s.column-1," ")+"".padEnd(l,"^")}else t+="\n at "+n}return t}static buildMessage(e,t){function r(e){return e.codePointAt(0).toString(16).toUpperCase()}const o=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function s(e){return o?e.replace(o,e=>"\\u{"+r(e)+"}"):e}function i(e){return s(e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,e=>"\\x0"+r(e)).replace(/[\x10-\x1F\x7F-\x9F]/g,e=>"\\x"+r(e)))}function n(e){return s(e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,e=>"\\x0"+r(e)).replace(/[\x10-\x1F\x7F-\x9F]/g,e=>"\\x"+r(e)))}const a={literal:e=>'"'+i(e.text)+'"',class(e){const t=e.parts.map(e=>Array.isArray(e)?n(e[0])+"-"+n(e[1]):n(e));return"["+(e.inverted?"^":"")+t.join("")+"]"+(e.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:e=>e.description};function l(e){return a[e.type](e)}return"Expected "+function(e){const t=e.map(l);if(t.sort(),t.length>0){let e=1;for(let r=1;r<t.length;r++)t[r-1]!==t[r]&&(t[e]=t[r],e++);t.length=e}switch(t.length){case 1:return t[0];case 2:return t[0]+" or "+t[1];default:return t.slice(0,-1).join(", ")+", or "+t[t.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."}}function n(e){let t;if(!e)return[];try{t=function(e,t){const r={},o=(t=void 0!==t?t:{}).grammarSource,s={start:ve};let n=ve;const a="none",l=")",c=",",u="(",p="%",d="px",h="cm",y="mm",f="in",m="pt",g="pc",b="deg",_="rad",S="grad",v="turn",w="#",x=".",T="e",M=/^[ \t\n\r]/,I=/^[a-z\-]/,O=/^[0-9a-fA-F]/,P=/^[+\-]/,k=/^[0-9]/,C=ge("none"),L=fe("none",!1),E=fe(")",!1),A=fe(",",!1),F=me([" ","\t","\n","\r"],!1,!1,!1),R=ge("function"),j=fe("(",!1),N=ge("identifier"),D=me([["a","z"],"-"],!1,!1,!1),U=ge("percentage"),V=fe("%",!1),q=ge("length"),z=fe("px",!1),G=fe("cm",!1),B=fe("mm",!1),$=fe("in",!1),J=fe("pt",!1),W=fe("pc",!1),H=ge("angle"),Z=fe("deg",!1),Q=fe("rad",!1),K=fe("grad",!1),Y=fe("turn",!1),X=ge("number"),ee=ge("color"),te=fe("#",!1),re=me([["0","9"],["a","f"],["A","F"]],!1,!1,!1),oe=me(["+","-"],!1,!1,!1),se=me([["0","9"]],!1,!1,!1),ie=fe(".",!1),ne=fe("e",!1);let ae=0|t.peg$currPos,le=ae;const ce=[{line:1,column:1}];let ue,pe=ae,de=t.peg$maxFailExpected||[],he=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in s))throw new Error("Can't start parsing from rule \""+t.startRule+'".');n=s[t.startRule]}function ye(){return e.substring(le,ae)}function fe(e,t){return{type:"literal",text:e,ignoreCase:t}}function me(e,t,r,o){return{type:"class",parts:e,inverted:t,ignoreCase:r,unicode:o}}function ge(e){return{type:"other",description:e}}function be(t){let r,o=ce[t];if(o)return o;if(t>=ce.length)r=ce.length-1;else for(r=t;!ce[--r];);for(o=ce[r],o={line:o.line,column:o.column};r<t;)10===e.charCodeAt(r)?(o.line++,o.column=1):o.column++,r++;return ce[t]=o,o}function _e(e,t,r){const s=be(e),i=be(t);return{source:o,start:{offset:e,line:s.line,column:s.column},end:{offset:t,line:i.line,column:i.column}}}function Se(e){ae<pe||(ae>pe&&(pe=ae,de=[]),de.push(e))}function ve(){let t;return t=function(){let t,o;return he++,t=ae,Te(),e.substr(ae,4)===a?(o=a,ae+=4):(o=r,0===he&&Se(L)),o!==r?(Te(),le=t,t=[]):(ae=t,t=r),he--,t===r&&0===he&&Se(C),t}(),t===r&&(t=function(){let e,t;if(e=[],t=we(),t!==r)for(;t!==r;)e.push(t),t=we();else e=r;return e}()),t}function we(){let t,o,s,i;return t=ae,Te(),o=function(){let t,o,s;return he++,t=ae,o=Me(),o!==r?(40===e.charCodeAt(ae)?(s=u,ae++):(s=r,0===he&&Se(j)),s!==r?(le=t,t=o):(ae=t,t=r)):(ae=t,t=r),he--,t===r&&(o=r,0===he&&Se(R)),t}(),o!==r?(Te(),s=function(){let t,o,s,i,n,a,l,u;if(t=ae,o=xe(),o!==r){for(s=[],i=ae,n=Te(),44===e.charCodeAt(ae)?(a=c,ae++):(a=r,0===he&&Se(A)),a===r&&(a=null),l=Te(),u=xe(),u!==r?(n=[n,a,l,u],i=n):(ae=i,i=r);i!==r;)s.push(i),i=ae,n=Te(),44===e.charCodeAt(ae)?(a=c,ae++):(a=r,0===he&&Se(A)),a===r&&(a=null),l=Te(),u=xe(),u!==r?(n=[n,a,l,u],i=n):(ae=i,i=r);le=t,p=o,t=(d=s).length>0?function(e,t){return[e].concat(t.map(function(e){return e[3]}))}(p,d):[p]}else ae=t,t=r;var p,d;return t}(),s===r&&(s=null),Te(),41===e.charCodeAt(ae)?(i=l,ae++):(i=r,0===he&&Se(E)),i!==r?(Te(),le=t,t={type:"function",name:o,parameters:s||[]}):(ae=t,t=r)):(ae=t,t=r),t}function xe(){let t,o;var s,i;return t=ae,o=function(){let t,o,s;return he++,t=ae,Te(),o=Ie(),o!==r?(37===e.charCodeAt(ae)?(s=p,ae++):(s=r,0===he&&Se(V)),s!==r?(le=t,t={value:o,unit:"%"}):(ae=t,t=r)):(ae=t,t=r),he--,t===r&&0===he&&Se(U),t}(),o===r&&(o=function(){let t,o,s;return he++,t=ae,Te(),o=Ie(),o!==r?(e.substr(ae,2)===d?(s=d,ae+=2):(s=r,0===he&&Se(z)),s!==r?(le=t,t={value:o,unit:"px"}):(ae=t,t=r)):(ae=t,t=r),t===r&&(t=ae,Te(),o=Ie(),o!==r?(e.substr(ae,2)===h?(s=h,ae+=2):(s=r,0===he&&Se(G)),s!==r?(le=t,t={value:o,unit:"cm"}):(ae=t,t=r)):(ae=t,t=r),t===r&&(t=ae,Te(),o=Ie(),o!==r?(e.substr(ae,2)===y?(s=y,ae+=2):(s=r,0===he&&Se(B)),s!==r?(le=t,t=function(e){return{value:e,unit:"mm"}}(o)):(ae=t,t=r)):(ae=t,t=r),t===r&&(t=ae,Te(),o=Ie(),o!==r?(e.substr(ae,2)===f?(s=f,ae+=2):(s=r,0===he&&Se($)),s!==r?(le=t,t=function(e){return{value:e,unit:"in"}}(o)):(ae=t,t=r)):(ae=t,t=r),t===r&&(t=ae,Te(),o=Ie(),o!==r?(e.substr(ae,2)===m?(s=m,ae+=2):(s=r,0===he&&Se(J)),s!==r?(le=t,t=function(e){return{value:e,unit:"pt"}}(o)):(ae=t,t=r)):(ae=t,t=r),t===r&&(t=ae,Te(),o=Ie(),o!==r?(e.substr(ae,2)===g?(s=g,ae+=2):(s=r,0===he&&Se(W)),s!==r?(le=t,t=function(e){return{value:e,unit:"pc"}}(o)):(ae=t,t=r)):(ae=t,t=r)))))),he--,t===r&&0===he&&Se(q),t}(),o===r&&(o=function(){let t,o,s;return he++,t=ae,o=Ie(),o!==r?(e.substr(ae,3)===b?(s=b,ae+=3):(s=r,0===he&&Se(Z)),s!==r?(le=t,t={value:o,unit:"deg"}):(ae=t,t=r)):(ae=t,t=r),t===r&&(t=ae,o=Ie(),o!==r?(e.substr(ae,3)===_?(s=_,ae+=3):(s=r,0===he&&Se(Q)),s!==r?(le=t,t={value:o,unit:"rad"}):(ae=t,t=r)):(ae=t,t=r),t===r&&(t=ae,o=Ie(),o!==r?(e.substr(ae,4)===S?(s=S,ae+=4):(s=r,0===he&&Se(K)),s!==r?(le=t,t=function(e){return{value:e,unit:"grad"}}(o)):(ae=t,t=r)):(ae=t,t=r),t===r&&(t=ae,o=Ie(),o!==r?(e.substr(ae,4)===v?(s=v,ae+=4):(s=r,0===he&&Se(Y)),s!==r?(le=t,t=function(e){return{value:e,unit:"turn"}}(o)):(ae=t,t=r)):(ae=t,t=r)))),he--,t===r&&(o=r,0===he&&Se(H)),t}(),o===r&&(o=function(){let e,t;return he++,e=ae,Te(),t=Ie(),t!==r?(le=e,e={value:t,unit:null}):(ae=e,e=r),he--,e===r&&0===he&&Se(X),e}()))),o!==r&&(le=t,o={type:"quantity",value:(s=o).value,unit:s.unit}),t=o,t===r&&(t=ae,o=function(){let t,o,s,i;if(he++,t=ae,35===e.charCodeAt(ae)?(o=w,ae++):(o=r,0===he&&Se(te)),o!==r){if(s=[],i=e.charAt(ae),O.test(i)?ae++:(i=r,0===he&&Se(re)),i!==r)for(;i!==r;)s.push(i),i=e.charAt(ae),O.test(i)?ae++:(i=r,0===he&&Se(re));else s=r;s!==r?(le=t,t={type:"hex",value:ye()}):(ae=t,t=r)}else ae=t,t=r;return t===r&&(t=ae,o=we(),o!==r&&(le=t,o={type:"function",value:o}),t=o,t===r&&(t=ae,o=Me(),o!==r&&(le=t,o={type:"named",value:ye()}),t=o)),he--,t===r&&(o=r,0===he&&Se(ee)),t}(),o!==r&&(le=t,o={type:"color",colorType:(i=o).type,value:i.value}),t=o),t}function Te(){let t,o;for(he++,t=[],o=e.charAt(ae),M.test(o)?ae++:(o=r,0===he&&Se(F));o!==r;)t.push(o),o=e.charAt(ae),M.test(o)?ae++:(o=r,0===he&&Se(F));return he--,t}function Me(){let t,o,s;if(he++,t=ae,o=[],s=e.charAt(ae),I.test(s)?ae++:(s=r,0===he&&Se(D)),s!==r)for(;s!==r;)o.push(s),s=e.charAt(ae),I.test(s)?ae++:(s=r,0===he&&Se(D));else o=r;return o!==r&&(le=t,o=ye()),t=o,he--,t===r&&(o=r,0===he&&Se(N)),t}function Ie(){let t,o,s,i,n,a,l,c;for(t=ae,o=e.charAt(ae),P.test(o)?ae++:(o=r,0===he&&Se(oe)),o===r&&(o=null),s=ae,i=[],n=e.charAt(ae),k.test(n)?ae++:(n=r,0===he&&Se(se));n!==r;)i.push(n),n=e.charAt(ae),k.test(n)?ae++:(n=r,0===he&&Se(se));if(46===e.charCodeAt(ae)?(n=x,ae++):(n=r,0===he&&Se(ie)),n!==r){if(a=[],l=e.charAt(ae),k.test(l)?ae++:(l=r,0===he&&Se(se)),l!==r)for(;l!==r;)a.push(l),l=e.charAt(ae),k.test(l)?ae++:(l=r,0===he&&Se(se));else a=r;a!==r?(i=[i,n,a],s=i):(ae=s,s=r)}else ae=s,s=r;if(s===r)if(s=[],i=e.charAt(ae),k.test(i)?ae++:(i=r,0===he&&Se(se)),i!==r)for(;i!==r;)s.push(i),i=e.charAt(ae),k.test(i)?ae++:(i=r,0===he&&Se(se));else s=r;if(s!==r){if(i=ae,101===e.charCodeAt(ae)?(n=T,ae++):(n=r,0===he&&Se(ne)),n!==r){if(a=e.charAt(ae),P.test(a)?ae++:(a=r,0===he&&Se(oe)),a===r&&(a=null),l=[],c=e.charAt(ae),k.test(c)?ae++:(c=r,0===he&&Se(se)),c!==r)for(;c!==r;)l.push(c),c=e.charAt(ae),k.test(c)?ae++:(c=r,0===he&&Se(se));else l=r;l!==r?(n=[n,a,l],i=n):(ae=i,i=r)}else ae=i,i=r;i===r&&(i=null),le=t,t=parseFloat(ye())}else ae=t,t=r;return t}ue=n();const Oe=ue!==r&&ae===e.length;function Pe(){throw ue!==r&&ae<e.length&&Se({type:"end"}),function(e,t,r){return new i(i.buildMessage(e,t),e,t,r)}(de,pe<e.length?function(t=ae){const r=e.codePointAt(t);return void 0===r?"":String.fromCodePoint(r)}(pe):null,pe<e.length?_e(pe,pe+1):_e(pe,pe))}return t.peg$library?{peg$result:ue,peg$currPos:ae,peg$FAILED:r,peg$maxFailExpected:de,peg$maxFailPos:pe,peg$success:Oe,peg$throw:Oe?void 0:Pe}:Oe?ue:void Pe()}(e)}catch(t){throw new r("effect:invalid-syntax","Invalid effect syntax",{value:e,error:t})}return t.map(e=>function(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return function(e){let t=1;return a(e.parameters,1),1===e.parameters.length&&(t=d(e.parameters[0])),new o.ColorMatrixEffect(e.name,t)}(e);case"opacity":return function(e){let t=1;return a(e.parameters,1),1===e.parameters.length&&(t=d(e.parameters[0])),new o.OpacityEffect(t)}(e);case"hue-rotate":return function(e){let t=0;var s;return a(e.parameters,1),1===e.parameters.length&&(function(e){if("quantity"!==e.type||!(0===e.value&&null===e.unit||e.unit&&null!=u[e.unit]))throw new r("effect:type-error",`Expected <angle>, Actual: ${l(e)}`,{term:e})}(s=e.parameters[0]),t=s.value*u[s.unit]||0),new o.HueRotateEffect(t)}(e);case"blur":return function(e){let t=0;return a(e.parameters,1),1===e.parameters.length&&(t=h(e.parameters[0]),c(t,e.parameters[0])),new o.BlurEffect(t)}(e);case"drop-shadow":return function(e){const t=[];let s=null;for(const o of e.parameters)if("color"===o.type){if(t.length&&Object.freeze(t),s)throw new r("effect:type-error","Accepts only one color",{});s=y(o)}else{const e=h(o);if(Object.isFrozen(t))throw new r("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(e),3===t.length&&c(e,o)}if(t.length<2||t.length>3)throw new r("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new o.DropShadowEffect(t[0],t[1],t[2]||0,s||f("black"))}(e);case"bloom":return function(e){let t=1,r=0,s=0;return a(e.parameters,3),e.parameters[0]&&(t=d(e.parameters[0])),e.parameters[1]&&(r=h(e.parameters[1]),c(r,e.parameters[1])),e.parameters[2]&&(s=d(e.parameters[2])),new o.BloomEffect(t,r,s)}(e)}}catch(t){throw t.details.filter=e,t}throw new r("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}(e))}function a(e,t){if(e.length>t)throw new r("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function l(e){if("color"===e.type)return"<color>";if(e.unit){if(e.unit in p)return"<length>";if(e.unit in u)return"<angle>";if("%"===e.unit)return"<percentage>"}return"<double>"}function c(e,t){if(e<0)throw new r("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}const u={deg:1,grad:.9,rad:180/Math.PI,turn:360},p={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function d(e){!function(e){if("quantity"!==e.type||null!==e.unit&&"%"!==e.unit)throw new r("effect:type-error",`Expected <double> or <percentage>, Actual: ${l(e)}`,{term:e})}(e);const t=e.value;return c(t,e),"%"===e.unit?.01*t:t}function h(e){return function(e){if("quantity"!==e.type||!(0===e.value&&null===e.unit||e.unit&&null!=p[e.unit]))throw new r("effect:type-error",`Expected <length>, Actual: ${l(e)}`,{term:e})}(e),e.value*p[e.unit]||0}function y(e){switch(e.colorType){case"hex":return t.hexToRgba(e.value);case"named":return f(e.value);case"function":return function(e){if(a(e.parameters,4),m.test(e.name))return[d(e.parameters[0]),d(e.parameters[1]),d(e.parameters[2]),e.parameters[3]?d(e.parameters[3]):1];if(g.test(e.name))return t.hslaToRgba(function(e){return function(e){if("quantity"!==e.type||null!==e.unit)throw new r("effect:type-error",`Expected <double>, Actual: ${l(e)}`,{term:e})}(e),c(e.value,e),e.value}(e.parameters[0]),d(e.parameters[1]),d(e.parameters[2]),e.parameters[3]?d(e.parameters[3]):1);throw new r("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}(e.value)}}function f(e){if(!t.isNamedColor(e))throw new r("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return t.getNamedColorCopy(e)}const m=/^rgba?/i,g=/^hsla?/i;e.parse=function(e){if(!e||0===e.length)return null;if("string"==typeof e){const t=n(e);return t&&0!==t.length?t:null}const t=e.map(e=>{if(!Number.isFinite(e.scale)||e.scale<=0)throw new r("effect:invalid-scale","scale must be finite and greater than 0",{stop:e});return{scale:e.scale,effects:n(e.value)}});t.sort((e,t)=>t.effects.length-e.effects.length);for(let e=0;e<t.length-1;e++){if(!s.canInterpolateEffects(t[e].effects,t[e+1].effects))throw new r("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[e].effects,b:t[e+1].effects});s.normalizeEffects(t[e].effects,t[e+1].effects)}return t.sort((e,t)=>t.scale-e.scale),t},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/mixins/CustomParametersMixin":function(){define(["exports","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n){"use strict";e.CustomParametersMixin=e=>{const o=e;let s=class extends o{constructor(){super(...arguments),this.customParameters=null}};return t.__decorate([r.property({type:Object,json:{write:{overridePolicy:e=>({enabled:!!(e&&Object.keys(e).length>0)})}}})],s.prototype,"customParameters",void 0),s=t.__decorate([n.subclass("esri.layers.mixins.CustomParametersMixin")],s),s},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/mixins/DisplayFilteredLayer":function(){define(["exports","../../chunks/tslib.es6","../../core/object","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/layerContainerType","../support/DisplayFilterInfo"],function(e,t,r,o,s,i,n,a,l,c){"use strict";const u={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:e=>!e},write:{layerContainerTypes:l.excludeTables,writer(e,t,o){r.setDeepValue(o,!e,t)}},origins:{"web-scene":{write:!1,read:!1}}}},p={type:c,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:l.excludeTables},origins:{"web-scene":{write:!1,read:!1}}}};e.DisplayFilteredLayer=e=>{const r=e;let s=class extends r{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return t.__decorate([o.property(u)],s.prototype,"displayFilterEnabled",void 0),t.__decorate([o.property(p)],s.prototype,"displayFilterInfo",void 0),s=t.__decorate([a.subclass("esri.layers.mixins.DisplayFilteredLayer")],s),s},e.displayFilterEnabledProperty=u,e.displayFilterInfoProperty=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/DisplayFilterInfo":function(){define(["exports","../../chunks/tslib.es6","../../core/Clonable","../../core/Collection","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","../../geometry/support/scaleUtils","./DisplayFilter","./displayFilterUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h){"use strict";return e.default=class extends(r.ClonableMixin(s.JSONSupport)){constructor(e){super(e),this.activeFilterId=null,this.filters=new(o.ofType(d)),this.mode="manual"}writeFilters(e,t,r,o){const s=e.toArray();"scale"===this.mode&&s.sort((e,t)=>{const r=p.compareMinScale(t.minScale,e.minScale),o=e.maxScale-t.maxScale;return 0===r?o:r}),t[r]=s.map(e=>e.toJSON(o))}write(e,t){return super.write(e,h.createDisplayFilterJSONContext(this,t))}},t.__decorate([i.property({type:String,json:{write:{overridePolicy:(e,t,r)=>({enabled:"manual"===r.filterMode,isRequired:!0})}}})],e.default.prototype,"activeFilterId",void 0),t.__decorate([i.property({type:o.ofType(d),nonNullable:!0,json:{write:!0}})],e.default.prototype,"filters",void 0),t.__decorate([u.writer("filters")],e.default.prototype,"writeFilters",null),t.__decorate([i.property({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],e.default.prototype,"mode",void 0),e.default=t.__decorate([c.subclass("esri.layers.support.DisplayFilterInfo")],e.default),e.default})},"esri/geometry/support/scaleUtils":function(){define(["exports","../../core/mathUtils","../../core/unitUtils"],function(e,t,r){"use strict";function o(e,t){return e/(r.getMetersPerUnitForSR(t)*r.inchesPerMeter*96)}e.compareMinScale=function(e,r){return t.floatEqualAbsolute(e,r)?0:(e||Number.POSITIVE_INFINITY)>(r||Number.POSITIVE_INFINITY)?1:-1},e.getExtentForScale=function(e,t){const r=e.extent,s=e.width-(e.padding?e.padding.left+e.padding.right:0),i=o(t,r.spatialReference);return r.clone().expand(i*s/r.width)},e.getResolutionForScale=o,e.getResolutionInMetersForScale=function(e){return e/(96*r.inchesPerMeter)},e.getScale=function(e,t){const o=t||e.extent,s=e.width,i=r.getMetersPerUnitForSR(o?.spatialReference);return o&&s?o.width/s*i*r.inchesPerMeter*96:0},e.getScaleForResolution=function(e,t){return e*(r.getMetersPerUnitForSR(t)*r.inchesPerMeter*96)},e.isInScaleRange=function(e,r,o){return function(e,r){return 0===r||t.floatEqualAbsolute(e,r)||e<r}(e,r)&&function(e,r){return 0===r||t.floatEqualAbsolute(e,r)||e>r}(e,o)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/DisplayFilter":function(){define(["exports","../../chunks/tslib.es6","../../core/Clonable","../../core/JSONSupport","../../core/uuid","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l,c){"use strict";const u={write:{overridePolicy:(e,t,r)=>({enabled:!r||"scale"===r.filterMode})}};return e.default=class extends(r.ClonableMixin(o.JSONSupport)){constructor(e){super(e),this.id=s.generateUUID(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}},t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"id",void 0),t.__decorate([i.property({type:Number,json:u})],e.default.prototype,"maxScale",void 0),t.__decorate([i.property({type:Number,json:u})],e.default.prototype,"minScale",void 0),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"title",void 0),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"where",void 0),e.default=t.__decorate([c.subclass("esri.layers.support.DisplayFilter")],e.default),e.default})},"esri/layers/support/displayFilterUtils":function(){define(["exports","../../core/mathUtils","../../core/sql"],function(e,t,r){"use strict";function*o(e,t,r){if("manual"===i(e)){const t=e.filters.find(t=>t.id===e.activeFilterId);t&&(yield t)}else{"object"==typeof t&&(t=t.scale);for(const o of e.filters)s(o.minScale,o.maxScale,t,r)&&(yield o)}}function s(e,r,o,s){return e=n(e),o=n(o),r=a(r),!(!t.floatEqualAbsolute(o,e)&&(s??o)>e||t.floatGreaterThanOrEqual(r,o)||void 0!==s&&t.floatEqualAbsolute(s,e))}function i(e){return"mode"in e?e.mode:e.filterMode}function n(e){return e||Number.POSITIVE_INFINITY}function a(e){return e||0}e.createDisplayFilterJSONContext=function(e,t){return{...t,filterMode:e.mode}},e.getClauseForScaleRange=function(e,s,l){const c=function(e){if("manual"===i(e))return null;const t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:r,maxScale:o}of e.filters)t[0]=Math.max(t[0],n(r)),t[1]=Math.min(t[1],a(o));return t}(e);if(c&&(t.floatGreaterThan(s,c[0])||t.floatLessThan(l,c[1])))return"";const u=Array.from(o(e,s,l)),p=function(e,r,o){if(0===e.length)return!0;const s=n(e.at(0)?.minScale),i=a(e.at(-1)?.maxScale);if(t.floatLessThan(s,r)||t.floatGreaterThan(i,o))return!0;for(let r=0;r<e.length-1;r++){const o=e[r],s=e[r+1];if(t.floatLessThan(n(s.minScale),a(o.maxScale)))return!0}return!1}(u,s,l)?"1=1":u.map(e=>e.where||"1=1").reduce((e,t)=>r.sqlOr(e,t),"");return p&&"1=1"!==p?p:""},e.getEffectiveDisplayFilter=function(e,t){return o(e,t).next().value??null},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/mixins/EditBusLayer":function(){define(["exports","../../chunks/tslib.es6","../../core/Evented","../../core/lang","../../core/promiseUtils","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/subclass","../../versionManagement/support/versionManagementUtils"],function(e,t,r,o,s,i,n,a,l,c){"use strict";const u=new r.EventEmitter;function p(e){return u.on("apply-edits",new WeakRef(e))}function d(e){return u.on("update-moment",new WeakRef(e))}const h=Symbol();function y(e){return null!=e&&"object"==typeof e&&"gdbVersion"in e}function f(e,t,r){const o=new URL(e).host,s=c.defaultVersionNameLookup.get(o),i=e=>!e||e===s;return i(t)&&i(r)||t===r}e.EditBusLayer=e=>{var r;const s=e;let n=class extends s{static{r=h}constructor(...e){super(...e),this[r]=!0,this._applyEditsHandler=e=>{const{serviceUrl:t,layerId:r,gdbVersion:s,mayReceiveServiceEdits:i,result:n}=e,a=t===this.url,l=null!=r&&null!=this.layerId&&r===this.layerId,c=y(this),u=y(this)&&f(t,s,this.gdbVersion);if(!a||c&&!u||!l&&!i)return;const p=n.then(e=>{if(this.lastEditsEventDate=new Date,l&&(e.addedFeatures.length||e.updatedFeatures.length||e.deletedFeatures.length||e.addedAttachments.length||e.updatedAttachments.length||e.deletedAttachments.length))return this.emit("edits",o.clone(e)),e;const r=e.editedFeatures?.find(({layerId:e})=>e===this.layerId);if(r){const{adds:t,updates:s,deletes:i}=r.editedFeatures,n={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:t?t.map(({attributes:e})=>({objectId:this.objectIdField&&e[this.objectIdField],globalId:this.globalIdField&&e[this.globalIdField]})):[],deletedFeatures:i?i.map(({attributes:e})=>({objectId:this.objectIdField&&e[this.objectIdField],globalId:this.globalIdField&&e[this.globalIdField]})):[],updatedFeatures:s?s.map(({current:{attributes:e}})=>({objectId:this.objectIdField&&e[this.objectIdField],globalId:this.globalIdField&&e[this.globalIdField]})):[],editedFeatures:o.clone(e.editedFeatures),exceededTransferLimit:!1,historicMoment:o.clone(e.historicMoment)};return this.emit("edits",n),n}const i={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:o.clone(e.editedFeatures),exceededTransferLimit:!1,historicMoment:o.clone(e.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(t,s,i.historicMoment)&&this.emit("edits",i),i}).then(e=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(t,s,e.historicMoment)&&(this.historicMoment=e.historicMoment),e));this.emit("apply-edits",{result:p})},this._updateMomentHandler=e=>{const{serviceUrl:t,gdbVersion:r,moment:o}=e,s=t===this.url,i=y(this),n=y(this)&&f(t,r,this.gdbVersion),a=y(this)&&!f(t,this.gdbVersion,null);s&&i&&n&&a&&"historicMoment"in this&&this.historicMoment!==o&&(this.historicMoment=o)},this.when().then(()=>{this.addHandles(p(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(d(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(e,t,r){return"historicMoment"in this&&this.historicMoment!==r&&c.isVersionInEditSession(e,t)}};return t.__decorate([i.property()],n.prototype,"lastEditsEventDate",void 0),n=t.__decorate([l.subclass("esri.layers.mixins.EditBusLayer")],n),n},e.emitApplyEditsEvent=function(e,t,r=null,o=!1){const i=s.createResolver();return o=null==t||o,u.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:r,mayReceiveServiceEdits:o,result:i.promise}),i},e.emitUpdateMomentEvent=function(e,t,r=null,o){u.emit("update-moment",{serviceUrl:e,layerId:t,gdbVersion:r,moment:o})},e.isEditBusLayer=function(e){return null!=e&&"object"==typeof e&&h in e},e.isLayerWithGDBVersion=y,e.onApplyEditsEvent=p,e.onUpdateMomentEvent=d,e.versionMatches=f,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/versionManagement/support/versionManagementUtils":function(){define(["require","exports","../../request","../../core/uuid"],function(e,t,r,o){"use strict";const s=e=>Object.freeze(Object.defineProperty({__proto__:null,default:e},Symbol.toStringTag,{value:"Module"})),i=o.generateLowercaseBracedUUID(),n=new Map,a=new Map,l=new Map;t.currentSessionId=i,t.defaultVersionNameLookup=n,t.isHistoricVersion=async function(e,t,o){if(!e||!o)return!1;if(!t)return!0;const s=new URL(e).host;let i=n.get(s);if(!i){const t=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");i=(await r(t,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return i===t},t.isSafeToEditVersion=async function(t,r,o=!1){if(!t||!r)return!0;const n=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),l=a.get(n)?.entries();if(l)for(const[t,a]of l)if(a.name===r){const r=!a.stack?.hasForwardEdits();if(!r&&o){const[{deleteForwardEdits:r},{default:o}]=await Promise.all([new Promise((t,r)=>e(["../../rest/versionManagement/gdbVersion/deleteForwardEdits"],t,r)),new Promise((t,r)=>e(["../../rest/versionManagement/gdbVersion/support/DeleteForwardEditsParameters"],e=>t(s(e)),r))]),l=await r(n,t,new o({sessionId:i,moment:a.moment}));return l.success&&a.stack?.clearForwardEdits(),l.success}return r}return!0},t.isVersionInEditSession=function(e,t){if(!e)return!1;const r=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),o=a.get(r)?.entries();if(o)for(const[e,r]of o)if(r.name===t)return"edit"===r.lockType;return!1},t.versionCollection=a,t.versionCollectionCount=l,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/layers/mixins/FeatureEffectLayer":function(){define(["exports","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../support/FeatureEffect"],function(e,t,r,o,s,i,n,a){"use strict";const l={write:{allowNull:!0}},c={type:a,json:{origins:{"web-map":l,"portal-item":l}}};e.FeatureEffectLayer=e=>{const o=e;let s=class extends o{constructor(){super(...arguments),this.featureEffect=null}};return t.__decorate([r.property(c)],s.prototype,"featureEffect",void 0),s=t.__decorate([n.subclass("esri.layers.mixins.FeatureEffectLayer")],s),s},e.featureEffectProperty=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FeatureEffect":function(){define(["exports","../../chunks/tslib.es6","../../core/Error","../../core/JSONSupport","../../core/object","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../effects/jsonUtils","./FeatureFilter"],function(e,t,r,o,s,i,n,a,l,c,u,p){"use strict";var d;const h={read:{reader:u.read},write:{writer:u.write,overridePolicy(){return{allowNull:null!=this.excludedEffect,isRequired:null==this.excludedEffect}}}},y={read:{reader:u.read},write:{writer:u.write,overridePolicy(){return{allowNull:null!=this.includedEffect,isRequired:null==this.includedEffect}}}},f={name:"showExcludedLabels",default:!0};return e.default=d=class extends o.JSONSupport{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){const o=super.write(e,t);if(t?.origin){if(o.filter){const e=Object.keys(o.filter);if(e.length>1||"where"!==e[0])return t.messages?.push(new r("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in o)return t.messages?.push(new r("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return o}clone(){return new d({filter:null!=this.filter?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}},t.__decorate([i.property({type:p,json:{write:{allowNull:!0,writer(e,t,r,o){const i=e?.write({},o);i&&0!==Object.keys(i).length?s.setDeepValue(r,i,t):s.setDeepValue(r,null,t)}}}})],e.default.prototype,"filter",void 0),t.__decorate([i.property({json:{read:u.read,write:{writer:u.write,allowNull:!0},origins:{"web-map":h,"portal-item":h}}})],e.default.prototype,"includedEffect",void 0),t.__decorate([i.property({json:{read:u.read,write:{writer:u.write,allowNull:!0},origins:{"web-map":y,"portal-item":y}}})],e.default.prototype,"excludedEffect",void 0),t.__decorate([i.property({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":f,"portal-item":f}}})],e.default.prototype,"excludedLabelsVisible",void 0),e.default=d=t.__decorate([c.subclass("esri.layers.support.FeatureEffect")],e.default),e.default})},"esri/layers/support/FeatureFilter":function(){define(["../../chunks/tslib.es6","../../core/jsonMap","../../core/JSONSupport","../../core/lang","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/subclass","../../geometry/support/typeUtils","../../rest/support/Query","../../chunks/TimeExtent"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";var p;const d=new t.JSONMap({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),h=new t.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let y=p=class extends r.JSONSupport{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:s,timeExtent:i,objectIds:n,units:a,distance:l}=this;return new c({geometry:o.clone(r),objectIds:o.clone(n),spatialRelationship:s,timeExtent:o.clone(i),where:t,units:a,distance:l,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,timeExtent:s,objectIds:i,units:n,distance:a}=this;return new p({geometry:o.clone(t),objectIds:o.clone(i),spatialRelationship:r,timeExtent:o.clone(s),where:e,units:n,distance:a})}};return e.__decorate([s.property({type:String,json:{write:!0}})],y.prototype,"where",void 0),e.__decorate([s.property({types:l.geometryTypes,json:{write:!0}})],y.prototype,"geometry",void 0),e.__decorate([s.property({type:d.apiValues,json:{name:"spatialRel",read:{reader:d.read},write:{allowNull:!1,writer:d.write,overridePolicy(){return{enabled:null!=this.geometry}}}}})],y.prototype,"spatialRelationship",void 0),e.__decorate([s.property({type:Number,json:{write:{overridePolicy(e){return{enabled:null!=e&&null!=this.geometry}}}}})],y.prototype,"distance",void 0),e.__decorate([s.property({type:[Number],json:{write:!0}})],y.prototype,"objectIds",void 0),e.__decorate([s.property({type:h.apiValues,json:{read:h.read,write:{writer:h.write,overridePolicy(e){return{enabled:null!=e&&null!=this.geometry}}}}})],y.prototype,"units",void 0),e.__decorate([s.property({type:u.TimeExtent,json:{write:!0}})],y.prototype,"timeExtent",void 0),y=p=e.__decorate([a.subclass("esri.layers.support.FeatureFilter")],y),y})},"esri/rest/support/Query":function(){define(["exports","../../chunks/tslib.es6","../../core/jsonMap","../../core/JSONSupport","../../core/lang","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/cast","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","../../core/accessorSupport/ensureType","../../geometry/Point","../../geometry/SpatialReference","../../geometry/support/jsonUtils","../../geometry/support/typeUtils","../../layers/support/source/DataLayerSource","./FullTextSearch","./QuantizationParameters","./spatialRelationships","./StatisticDefinition","../../chunks/TimeExtent"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b,_,S){"use strict";var v;const w=new r.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return e.default=class extends o.JSONSupport{static{v=this}static from(e){return u.ensureClass(v,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return"number"==typeof e||"object"==typeof e?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const t in e){const o=e[t];Array.isArray(o)?r[t]=o.map(e=>e instanceof Date?e.getTime():e):o instanceof Date?r[t]=o.getTime():r[t]=o}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new v(s.clone({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:null!=this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}static{this.MAX_MAX_RECORD_COUNT_FACTOR=5}},t.__decorate([i.property({json:{write:!0}})],e.default.prototype,"aggregateIds",void 0),t.__decorate([i.property({type:Boolean,json:{write:!0}})],e.default.prototype,"cacheHint",void 0),t.__decorate([i.property({type:Boolean,json:{default:!1,write:!0}})],e.default.prototype,"compactGeometryEnabled",void 0),t.__decorate([i.property({json:{write:!0}})],e.default.prototype,"datumTransformation",void 0),t.__decorate([n.cast("datumTransformation")],e.default.prototype,"castDatumTransformation",null),t.__decorate([i.property({type:Boolean,json:{default:!1,write:!0}})],e.default.prototype,"defaultSpatialReferenceEnabled",void 0),t.__decorate([i.property({type:Number,json:{write:!0}})],e.default.prototype,"distance",void 0),t.__decorate([i.property({type:f.DataLayerSource,json:{write:!0}})],e.default.prototype,"dynamicDataSource",void 0),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"formatOf3DObjects",void 0),t.__decorate([i.property({type:[m],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.fullText&&this.fullText.length>0}}}}})],e.default.prototype,"fullText",void 0),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"gdbVersion",void 0),t.__decorate([i.property({types:y.geometryTypes,json:{read:h.fromJSON,write:!0}})],e.default.prototype,"geometry",void 0),t.__decorate([i.property({type:Number,json:{write:!0}})],e.default.prototype,"geometryPrecision",void 0),t.__decorate([i.property({type:[String],json:{write:!0}})],e.default.prototype,"groupByFieldsForStatistics",void 0),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"having",void 0),t.__decorate([i.property({type:Date})],e.default.prototype,"historicMoment",void 0),t.__decorate([c.writer("historicMoment")],e.default.prototype,"writeHistoricMoment",null),t.__decorate([i.property({type:Number,json:{write:!0}})],e.default.prototype,"maxAllowableOffset",void 0),t.__decorate([i.property({type:Number,cast:t=>t<1?1:t>e.default.MAX_MAX_RECORD_COUNT_FACTOR?e.default.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],e.default.prototype,"maxRecordCountFactor",void 0),t.__decorate([i.property({type:["xyFootprint"],json:{write:!0}})],e.default.prototype,"multipatchOption",void 0),t.__decorate([i.property({type:Number,json:{read:{source:"resultRecordCount"}}})],e.default.prototype,"num",void 0),t.__decorate([i.property({json:{write:!0}})],e.default.prototype,"objectIds",void 0),t.__decorate([i.property({type:[String],json:{write:!0}})],e.default.prototype,"orderByFields",void 0),t.__decorate([i.property({type:[String],json:{write:!0}})],e.default.prototype,"outFields",void 0),t.__decorate([i.property({type:d,json:{name:"outSR",write:!0}})],e.default.prototype,"outSpatialReference",void 0),t.__decorate([i.property({type:[_],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.outStatistics&&this.outStatistics.length>0}}}}})],e.default.prototype,"outStatistics",void 0),t.__decorate([i.property({json:{write:!0}})],e.default.prototype,"parameterValues",void 0),t.__decorate([c.writer("parameterValues")],e.default.prototype,"writeParameterValues",null),t.__decorate([i.property({type:p,json:{write:!0}})],e.default.prototype,"pixelSize",void 0),t.__decorate([i.property({type:g,json:{write:!0}})],e.default.prototype,"quantizationParameters",void 0),t.__decorate([i.property({type:[Object],json:{write:!0}})],e.default.prototype,"rangeValues",void 0),t.__decorate([i.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],e.default.prototype,"relationParameter",void 0),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"resultType",void 0),t.__decorate([i.property({type:Boolean,json:{default:!1,write:!0}})],e.default.prototype,"returnCentroid",void 0),t.__decorate([i.property({type:Boolean,json:{default:!1,write:!0}})],e.default.prototype,"returnDistinctValues",void 0),t.__decorate([i.property({type:Boolean,json:{default:!0,write:!0}})],e.default.prototype,"returnExceededLimitFeatures",void 0),t.__decorate([i.property({type:Boolean,json:{write:!0}})],e.default.prototype,"returnGeometry",void 0),t.__decorate([i.property({type:Boolean,json:{default:!1,write:!0}})],e.default.prototype,"returnQueryGeometry",void 0),t.__decorate([i.property({type:Boolean,json:{default:!1,write:!0}})],e.default.prototype,"returnM",void 0),t.__decorate([i.property({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],e.default.prototype,"returnZ",void 0),t.__decorate([i.property({type:Boolean,json:{write:!0}})],e.default.prototype,"returnTrueCurves",void 0),t.__decorate([i.property({type:d,json:{write:!0}})],e.default.prototype,"sourceSpatialReference",void 0),t.__decorate([a.enumeration(b.spatialRelKebabDict,{ignoreUnknown:!1,name:"spatialRel"})],e.default.prototype,"spatialRelationship",void 0),t.__decorate([i.property({type:Number,json:{read:{source:"resultOffset"}}})],e.default.prototype,"start",void 0),t.__decorate([c.writer("start"),c.writer("num")],e.default.prototype,"writeStart",null),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"sqlFormat",void 0),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"text",void 0),t.__decorate([i.property({type:S.TimeExtent,json:{write:!0}})],e.default.prototype,"timeExtent",void 0),t.__decorate([i.property({type:Boolean,json:{default:!1,write:!0}})],e.default.prototype,"timeReferenceUnknownClient",void 0),t.__decorate([a.enumeration(w,{ignoreUnknown:!1}),i.property({json:{write:{overridePolicy(e){return{enabled:!!e&&null!=this.distance}}}}})],e.default.prototype,"units",void 0),t.__decorate([i.property({type:String,json:{write:{overridePolicy(e){return{enabled:null!=e||null!=this.start&&this.start>0}}}}})],e.default.prototype,"where",void 0),t.__decorate([c.writer("where")],e.default.prototype,"writeWhere",null),e.default=v=t.__decorate([l.subclass("esri.rest.support.Query")],e.default),e.default})},"esri/layers/support/source/DataLayerSource":function(){define(["exports","../../../chunks/tslib.es6","../../../core/jsonMap","../../../core/JSONSupport","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/decorators/cast","../../../core/accessorSupport/decorators/enumeration","../../../core/accessorSupport/decorators/reader","../../../core/accessorSupport/decorators/subclass","../../../core/accessorSupport/ensureType","../../../core/accessorSupport/extensions/serializableProperty/reader","../Field","./MapLayerSource","./QueryTableDataSource","./RasterDataSource","./TableDataSource"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f){"use strict";var m,g;const b=r.strict()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});e.JoinTableDataSource=m=class extends o.JSONSupport{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return S()(e,t,r)}castLeftTableSource(e){return c.ensureOneOfType(w(),e)}readRightTableSource(e,t,r){return S()(e,t,r)}castRightTableSource(e){return c.ensureOneOfType(w(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:r,rightTableSource:o,joinType:s}=this,i={leftTableKey:e,rightTableKey:t,leftTableSource:r?.clone()??void 0,rightTableSource:o?.clone()??void 0,joinType:s};return new m(i)}},t.__decorate([n.enumeration({joinTable:"join-table"}),s.property({json:{write:{isRequired:!0}}})],e.JoinTableDataSource.prototype,"type",void 0),t.__decorate([s.property({type:String,json:{write:!0}})],e.JoinTableDataSource.prototype,"leftTableKey",void 0),t.__decorate([s.property({type:String,json:{write:!0}})],e.JoinTableDataSource.prototype,"rightTableKey",void 0),t.__decorate([s.property({json:{write:!0}})],e.JoinTableDataSource.prototype,"leftTableSource",void 0),t.__decorate([a.reader("leftTableSource")],e.JoinTableDataSource.prototype,"readLeftTableSource",null),t.__decorate([i.cast("leftTableSource")],e.JoinTableDataSource.prototype,"castLeftTableSource",null),t.__decorate([s.property({json:{write:!0}})],e.JoinTableDataSource.prototype,"rightTableSource",void 0),t.__decorate([a.reader("rightTableSource")],e.JoinTableDataSource.prototype,"readRightTableSource",null),t.__decorate([i.cast("rightTableSource")],e.JoinTableDataSource.prototype,"castRightTableSource",null),t.__decorate([n.enumeration(b)],e.JoinTableDataSource.prototype,"joinType",void 0),e.JoinTableDataSource=m=t.__decorate([l.subclass("esri.layers.support.source.JoinTableDataSource")],e.JoinTableDataSource);let _=null;function S(){return _||(_=u.createTypeReader({types:w()})),_}let v=null;function w(){return v||(v={key:"type",base:null,typeMap:{"data-layer":e.DataLayerSource,"map-layer":d.MapLayerSource}}),v}const x={key:"type",base:null,typeMap:{"join-table":e.JoinTableDataSource,"query-table":h.QueryTableDataSource,raster:y.RasterDataSource,table:f.TableDataSource}};e.DataLayerSource=class extends o.JSONSupport{static{g=this}constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new g({fields:e,dataSource:t})}},t.__decorate([n.enumeration({dataLayer:"data-layer"}),s.property({json:{write:{isRequired:!0}}})],e.DataLayerSource.prototype,"type",void 0),t.__decorate([s.property({type:[p],json:{write:!0}})],e.DataLayerSource.prototype,"fields",void 0),t.__decorate([s.property({types:x,json:{write:!0}})],e.DataLayerSource.prototype,"dataSource",void 0),e.DataLayerSource=g=t.__decorate([l.subclass("esri.layers.support.source.DataLayerSource")],e.DataLayerSource),e.DataLayerSource.from=c.ensureType(e.DataLayerSource),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/MapLayerSource":function(){define(["exports","../../../chunks/tslib.es6","../../../core/JSONSupport","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/ensureType","../../../core/has","../../../core/RandomLCG","../../../core/accessorSupport/decorators/enumeration","../../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;e.MapLayerSource=c=class extends r.JSONSupport{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new c({mapLayerId:e,gdbVersion:t})}},t.__decorate([a.enumeration({mapLayer:"map-layer"}),o.property({json:{write:{isRequired:!0}}})],e.MapLayerSource.prototype,"type",void 0),t.__decorate([o.property({type:s.Integer,json:{write:{isRequired:!0}}})],e.MapLayerSource.prototype,"mapLayerId",void 0),t.__decorate([o.property({type:String,json:{write:!0}})],e.MapLayerSource.prototype,"gdbVersion",void 0),e.MapLayerSource=c=t.__decorate([l.subclass("esri.layers.support.source.MapLayerSource")],e.MapLayerSource),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/QueryTableDataSource":function(){define(["exports","../../../chunks/tslib.es6","../../../core/JSONSupport","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/enumeration","../../../core/accessorSupport/decorators/subclass","../../../geometry/SpatialReference","../../../geometry/support/typeUtils"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";var p;e.QueryTableDataSource=p=class extends r.JSONSupport{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:r,spatialReference:o,geometryType:s}=this,i={workspaceId:e,query:t,oidFields:r,spatialReference:o?.clone()??void 0,geometryType:s};return new p(i)}},t.__decorate([a.enumeration({queryTable:"query-table"}),o.property({json:{write:{isRequired:!0}}})],e.QueryTableDataSource.prototype,"type",void 0),t.__decorate([o.property({type:String,json:{write:!0}})],e.QueryTableDataSource.prototype,"workspaceId",void 0),t.__decorate([o.property({type:String,json:{write:!0}})],e.QueryTableDataSource.prototype,"query",void 0),t.__decorate([o.property({type:String,json:{write:!0}})],e.QueryTableDataSource.prototype,"oidFields",void 0),t.__decorate([o.property({type:c,json:{write:!0}})],e.QueryTableDataSource.prototype,"spatialReference",void 0),t.__decorate([a.enumeration(u.featureGeometryTypeKebabDictionary)],e.QueryTableDataSource.prototype,"geometryType",void 0),e.QueryTableDataSource=p=t.__decorate([l.subclass("esri.layers.support.source.QueryTableDataSource")],e.QueryTableDataSource),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/RasterDataSource":function(){define(["exports","../../../chunks/tslib.es6","../../../core/JSONSupport","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/enumeration","../../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;e.RasterDataSource=c=class extends r.JSONSupport{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new c({workspaceId:e,dataSourceName:t})}},t.__decorate([a.enumeration({raster:"raster"}),o.property({json:{write:{isRequired:!0}}})],e.RasterDataSource.prototype,"type",void 0),t.__decorate([o.property({type:String,json:{write:!0}})],e.RasterDataSource.prototype,"dataSourceName",void 0),t.__decorate([o.property({type:String,json:{write:!0}})],e.RasterDataSource.prototype,"workspaceId",void 0),e.RasterDataSource=c=t.__decorate([l.subclass("esri.layers.support.source.RasterDataSource")],e.RasterDataSource),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/TableDataSource":function(){define(["exports","../../../chunks/tslib.es6","../../../core/JSONSupport","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/enumeration","../../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;e.TableDataSource=c=class extends r.JSONSupport{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new c({workspaceId:e,gdbVersion:t,dataSourceName:r})}},t.__decorate([a.enumeration({table:"table"}),o.property({json:{write:{isRequired:!0}}})],e.TableDataSource.prototype,"type",void 0),t.__decorate([o.property({type:String,json:{write:!0}})],e.TableDataSource.prototype,"workspaceId",void 0),t.__decorate([o.property({type:String,json:{write:!0}})],e.TableDataSource.prototype,"gdbVersion",void 0),t.__decorate([o.property({type:String,json:{write:!0}})],e.TableDataSource.prototype,"dataSourceName",void 0),e.TableDataSource=c=t.__decorate([l.subclass("esri.layers.support.source.TableDataSource")],e.TableDataSource),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/FullTextSearch":function(){define(["../../chunks/tslib.es6","../../core/Clonable","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a){"use strict";let l=class extends(t.ClonableMixin(r.JSONSupport)){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};return e.__decorate([o.property({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.onFields&&this.onFields.length>0}}}}})],l.prototype,"onFields",void 0),e.__decorate([o.property({type:String,json:{write:!0}})],l.prototype,"operator",void 0),e.__decorate([o.property({type:String,json:{write:!0}})],l.prototype,"searchTerm",void 0),e.__decorate([o.property({type:String,json:{write:!0}})],l.prototype,"searchType",void 0),l=e.__decorate([a.subclass("esri.rest.support.FullTextSearch")],l),l})},"esri/rest/support/QuantizationParameters":function(){define(["exports","../../chunks/tslib.es6","../../core/jsonMap","../../core/JSONSupport","../../core/lang","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/subclass","../../geometry/Extent"],function(e,t,r,o,s,i,n,a,l,c){"use strict";var u;const p=new r.JSONMap({upperLeft:"upper-left",lowerLeft:"lower-left"});return e.default=u=class extends o.JSONSupport{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new u(s.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}},t.__decorate([i.property({type:c,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],e.default.prototype,"extent",void 0),t.__decorate([i.property({type:["view","edit"],json:{write:!0}})],e.default.prototype,"mode",void 0),t.__decorate([i.property({type:String,json:{read:p.read,write:p.write}})],e.default.prototype,"originPosition",void 0),t.__decorate([i.property({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],e.default.prototype,"tolerance",void 0),e.default=u=t.__decorate([l.subclass("esri.rest.support.QuantizationParameters")],e.default),e.default})},"esri/rest/support/spatialRelationships":function(){define(["exports","../../core/jsonMap"],function(e,t){"use strict";const r=new t.JSONMap({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});e.spatialRelKebabDict=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/StatisticDefinition":function(){define(["exports","../../chunks/tslib.es6","../../core/jsonMap","../../core/JSONSupport","../../core/lang","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer"],function(e,t,r,o,s,i,n,a,l,c){"use strict";var u;const p=new r.JSONMap({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});return e.default=u=class extends o.JSONSupport{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(t.statisticParameters=s.clone(e))}clone(){return new u({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:s.clone(this.statisticParameters)})}},t.__decorate([i.property({type:Number,json:{write:!0}})],e.default.prototype,"maxPointCount",void 0),t.__decorate([i.property({type:Number,json:{write:!0}})],e.default.prototype,"maxRecordCount",void 0),t.__decorate([i.property({type:Number,json:{write:!0}})],e.default.prototype,"maxVertexCount",void 0),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"onStatisticField",void 0),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"outStatisticFieldName",void 0),t.__decorate([i.property({type:String,json:{read:{source:"statisticType",reader:p.read},write:{target:"statisticType",writer:p.write}}})],e.default.prototype,"statisticType",void 0),t.__decorate([i.property({type:Object})],e.default.prototype,"statisticParameters",void 0),t.__decorate([c.writer("statisticParameters")],e.default.prototype,"writeStatisticParameters",null),e.default=u=t.__decorate([l.subclass("esri.rest.support.StatisticDefinition")],e.default),e.default})},"esri/layers/mixins/FeatureLayerBase":function(){define(["exports","../../chunks/tslib.es6","../../core/Collection","../../core/lang","../../core/urlUtils","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/layerContainerType","../../core/accessorSupport/PropertyOrigin","../../geometry/Extent","../../geometry/HeightModelInfo","../../geometry/SpatialReference","../support/commonProperties","../support/EditFieldsInfo","../support/FeatureIndex","../support/featureLayerUtils","../support/GeometryFieldsInfo","../support/LayerFloorInfo","../support/layerUtils","../support/multiLayerServiceUtils","../support/Relationship","../support/serviceCapabilitiesUtils","../support/Subtype","../../portal/support/portalItemUtils","../../time/timeZoneUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b,_,S,v,w,x,T,M,I,O){"use strict";e.FeatureLayerBase=e=>{const n=e;let a=class extends n{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(r.ofType(g.FeatureIndex)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=y.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.uniqueIdFields=null,this.url=null,this.version=void 0,this._isUrlHostModified=!1,this._isUrlHostModificationEnabled=!1}getFieldDomain(e,t){throw new Error("Not implemented")}getField(e){return this.fieldsIndex.get(e)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:e}=this;if(e){const{query:t,operations:r,editing:o}=e;if(!t.supportsQueryByOthers||!t.supportsQueryByAnonymous)return"load";if(r.supportsEditing&&!(o.supportsUpdateByOthers&&o.supportsUpdateByAnonymous&&o.supportsDeleteByOthers&&o.supportsDeleteByAnonymous))return"load"}if(b.hasCurrentUser(this.serviceDefinitionExpression)||b.hasCurrentUser(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(b.isLayerCacheStale(this))return"load";if(this.hasUpdateItemRestrictions)return e.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const t=this.editFieldsInfo;return(t?.creatorField||t?.editorField)&&e?.operations.supportsEditing?"editing":null}readCapabilitiesFromService(e,t){return T.getFeatureLayerCapabilities(t,this.url)}readEditingInfo(e,t){const{editingInfo:r}=t;return r?{lastEditDate:null!=r.lastEditDate?new Date(r.lastEditDate):null}:null}get effectiveCapabilities(){const e=this.capabilities;if(!e)return null;const t=o.clone(e),{operations:r,editing:s}=t;return b.supportsQueryOnly(this)?(this.userHasUpdateItemPrivileges&&(r.supportsQuery=!0),t):this.userHasUpdateItemPrivileges?(r.supportsAdd=r.supportsDelete=r.supportsEditing=r.supportsQuery=r.supportsUpdate=s.supportsDeleteByOthers=s.supportsGeometryUpdate=s.supportsUpdateByOthers=!0,t):(this.userHasFullEditingPrivileges&&r.supportsEditing&&(r.supportsAdd=r.supportsDelete=r.supportsUpdate=s.supportsGeometryUpdate=!0),t)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(e,t){return b.readGlobalIdField(t)}get hasFullEditingRestrictions(){const e=this.capabilities;if(!e||b.supportsQueryOnly(this))return!1;const{operations:t,editing:r}=e;return t.supportsEditing&&!(t.supportsAdd&&t.supportsDelete&&t.supportsUpdate&&r.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const e=this.capabilities;if(!e)return!1;const{operations:t,editing:r}=e;return b.supportsQueryOnly(this)?!t.supportsQuery:!(t.supportsAdd&&t.supportsDelete&&t.supportsEditing&&t.supportsQuery&&t.supportsUpdate&&r.supportsDeleteByOthers&&r.supportsGeometryUpdate&&r.supportsUpdateByOthers)}readIsTableFromService(e,t){return"Table"===t.type}readMaxScale(e,t){return t.effectiveMaxScale||e||0}readMinScale(e,t){return t.effectiveMinScale||e||0}readObjectIdFieldFromService(e,t){return b.readObjectIdField(t)}get parsedUrl(){return w.normalizeParsedUrlObject(this)}readServiceDefinitionExpression(e,t){return t.definitionQuery||t.definitionExpression}readUniqueIdFields(e,t){return t.uniqueIdInfo?.OIDFieldContainsHashValue?t.uniqueIdInfo.fields:null}readVersion(e,t){return b.readVersion(t)}get isUrlHostModified(){const{loaded:e,url:t,_isUrlHostModified:r}=this;if(r)return!0;if(!e||!t)return!1;if(this.originIdOf("url")<7)return!1;const o=this.sourceJSON?.preferredHost;if(!o)return!1;if(!s.hasSameOrigin(t,`https://${o}`,!0))return!1;for(let e=6;e>=3;e--){const r=this.getAtOrigin("url",p.idToName(e));if(r)return!s.hasSameOrigin(t,r,!0)}return!1}applyPreferredHost(e){const{url:t,portalItem:r}=this;if(!t||!v.isPreferredUrlApplicable(r))return;const o=v.getPreferredUrl();o&&this._isUrlHostModificationEnabled&&(this._set("url",o),this._isUrlHostModified=!0,r&&v.applyPreferredHostToPortalItem(r,v.getPreferredHost()))}applyHostFromPortalItem(){const{url:e,portalItem:t}=this;if(!e||7===this.originIdOf("url")||!t?.url||!v.isPreferredUrlApplicable(t)||!I.hasTypeKeyword(t,I.typeKeyword.HOSTED_SERVICE)||s.hasSameOrigin(e,t.url,!0)||!this._isUrlHostModificationEnabled)return;const r=s.getHost(t.url);this._set("url",s.changeHost(e,r)),this._isUrlHostModified=!0}};return t.__decorate([i.property({readOnly:!0})],a.prototype,"authenticationTriggerEvent",null),t.__decorate([i.property({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],a.prototype,"copyright",void 0),t.__decorate([i.property({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","maxUniqueIDCount","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],a.prototype,"capabilities",void 0),t.__decorate([l.reader("service","capabilities")],a.prototype,"readCapabilitiesFromService",null),t.__decorate([i.property(O.timeZoneProperty("dateFieldsTimeReference"))],a.prototype,"dateFieldsTimeZone",void 0),t.__decorate([i.property({type:Boolean})],a.prototype,"datesInUnknownTimezone",void 0),t.__decorate([i.property({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],a.prototype,"definitionExpression",void 0),t.__decorate([i.property({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],a.prototype,"displayField",void 0),t.__decorate([i.property({readOnly:!0,type:m})],a.prototype,"editFieldsInfo",void 0),t.__decorate([i.property({readOnly:!0})],a.prototype,"editingInfo",void 0),t.__decorate([l.reader("editingInfo")],a.prototype,"readEditingInfo",null),t.__decorate([i.property({readOnly:!0})],a.prototype,"effectiveCapabilities",null),t.__decorate([i.property()],a.prototype,"effectiveEditingEnabled",null),t.__decorate([i.property((()=>{const e=o.clone(f.elevationInfo),t=e.json.origins;return t["web-map"]={read:!1,write:!1},t["portal-item"]={read:!1,write:!1},e})())],a.prototype,"elevationInfo",void 0),t.__decorate([i.property()],a.prototype,"fieldsIndex",void 0),t.__decorate([i.property({type:S,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:u.excludeTables}}})],a.prototype,"floorInfo",void 0),t.__decorate([i.property({type:d,json:{origins:{service:{read:{source:"extent"}}}}})],a.prototype,"fullExtent",void 0),t.__decorate([i.property()],a.prototype,"gdbVersion",void 0),t.__decorate([i.property({readOnly:!0,type:_,json:{read:{source:"geometryProperties"}}})],a.prototype,"geometryFieldsInfo",void 0),t.__decorate([i.property({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:b.geometryTypeKebabDict.read}}}})],a.prototype,"geometryType",void 0),t.__decorate([i.property({type:String})],a.prototype,"globalIdField",void 0),t.__decorate([l.reader("service","globalIdField",["globalIdField","fields"])],a.prototype,"readGlobalIdFieldFromService",null),t.__decorate([i.property({readOnly:!0})],a.prototype,"hasFullEditingRestrictions",null),t.__decorate([i.property({type:Boolean,json:{origins:{service:{read:!0}}}})],a.prototype,"hasM",void 0),t.__decorate([i.property({readOnly:!0})],a.prototype,"hasUpdateItemRestrictions",null),t.__decorate([i.property({type:Boolean,json:{origins:{service:{read:!0}}}})],a.prototype,"hasZ",void 0),t.__decorate([i.property({readOnly:!0,type:h})],a.prototype,"heightModelInfo",void 0),t.__decorate([i.property({type:Date})],a.prototype,"historicMoment",void 0),t.__decorate([i.property({type:r.ofType(g.FeatureIndex),readOnly:!0})],a.prototype,"indexes",void 0),t.__decorate([i.property({readOnly:!0})],a.prototype,"isTable",void 0),t.__decorate([l.reader("service","isTable",["type"])],a.prototype,"readIsTableFromService",null),t.__decorate([i.property({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],a.prototype,"layerId",void 0),t.__decorate([i.property(f.maxScale)],a.prototype,"maxScale",void 0),t.__decorate([l.reader("service","maxScale",["maxScale","effectiveMaxScale"])],a.prototype,"readMaxScale",null),t.__decorate([i.property(f.minScale)],a.prototype,"minScale",void 0),t.__decorate([l.reader("service","minScale",["minScale","effectiveMinScale"])],a.prototype,"readMinScale",null),t.__decorate([i.property({type:String})],a.prototype,"objectIdField",void 0),t.__decorate([l.reader("service","objectIdField",["objectIdField","fields"])],a.prototype,"readObjectIdFieldFromService",null),t.__decorate([i.property({readOnly:!0})],a.prototype,"parsedUrl",null),t.__decorate([i.property(O.timeZoneProperty("preferredTimeReference"))],a.prototype,"preferredTimeZone",void 0),t.__decorate([i.property({type:[x],readOnly:!0})],a.prototype,"relationships",void 0),t.__decorate([i.property({type:Boolean})],a.prototype,"returnM",void 0),t.__decorate([i.property({type:Boolean})],a.prototype,"returnZ",void 0),t.__decorate([i.property({readOnly:!0,json:{write:!1}})],a.prototype,"serverGens",void 0),t.__decorate([i.property({readOnly:!0})],a.prototype,"serviceDefinitionExpression",void 0),t.__decorate([l.reader("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],a.prototype,"readServiceDefinitionExpression",null),t.__decorate([i.property({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],a.prototype,"serviceItemId",void 0),t.__decorate([i.property()],a.prototype,"sourceJSON",void 0),t.__decorate([i.property({type:y,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],a.prototype,"spatialReference",void 0),t.__decorate([i.property({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],a.prototype,"subtypeField",void 0),t.__decorate([i.property({type:[M],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],a.prototype,"subtypes",void 0),t.__decorate([i.property({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],a.prototype,"trackIdField",void 0),t.__decorate([i.property({type:[String],readOnly:!0})],a.prototype,"uniqueIdFields",void 0),t.__decorate([l.reader("service","uniqueIdFields",["uniqueIdInfo.OIDFieldContainsHashValue","uniqueIdInfo.fields"])],a.prototype,"readUniqueIdFields",null),t.__decorate([i.property(w.urlProperty({nonStandardUrlAllowed:!0}))],a.prototype,"url",void 0),t.__decorate([i.property({json:{origins:{service:{read:!0}},read:!1}})],a.prototype,"version",void 0),t.__decorate([l.reader("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],a.prototype,"readVersion",null),t.__decorate([i.property({readOnly:!0})],a.prototype,"isUrlHostModified",null),a=t.__decorate([c.subclass("esri.layers.mixins.FeatureLayerBase")],a),a},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/HeightModelInfo":function(){define(["exports","../chunks/tslib.es6","../core/arrayUtils","../core/jsonMap","../core/JSONSupport","../core/unitUtils","../core/Warning","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer"],function(e,t,r,o,s,i,n,a,l,c,u,p,d){"use strict";var h;const y=o.strict()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),f=y.jsonValues.slice();r.removeUnordered(f,"orthometric");const m=o.strict()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});function g(e,t){return new n("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}return e.default=h=class extends s.JSONSupport{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return y.write(e,t,r)}readHeightModel(e,t,r){return y.read(e)||(r?.messages&&r.messages.push(function(e,t){return new n("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}(e,{context:r})),null)}readHeightUnit(e,t,r){return m.read(e)||(r?.messages&&r.messages.push(g(e,{context:r})),null)}readHeightUnitService(e,t,r){return i.unitFromRESTJSON(e)||m.read(e)||(r?.messages&&r.messages.push(g(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new h({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=i.getVerticalUnitStringForSR(t);return new h({heightModel:e.heightModel,heightUnit:r??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new h;return t.read(e,{origin:"web-scene"}),t}},t.__decorate([a.property({type:y.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:f,default:"ellipsoidal",write:{isRequired:!0}}}}})],e.default.prototype,"heightModel",void 0),t.__decorate([d.writer("web-scene","heightModel")],e.default.prototype,"writeHeightModel",null),t.__decorate([u.reader(["web-scene","service"],"heightModel")],e.default.prototype,"readHeightModel",null),t.__decorate([a.property({type:m.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:m.jsonValues,write:{writer:m.write,isRequired:!0}}}}})],e.default.prototype,"heightUnit",void 0),t.__decorate([u.reader("web-scene","heightUnit")],e.default.prototype,"readHeightUnit",null),t.__decorate([u.reader("service","heightUnit")],e.default.prototype,"readHeightUnitService",null),t.__decorate([a.property({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],e.default.prototype,"vertCRS",void 0),t.__decorate([u.reader("service","vertCRS",["vertCRS","ellipsoid","geoid"])],e.default.prototype,"readVertCRS",null),e.default=h=t.__decorate([p.subclass("esri.geometry.HeightModelInfo")],e.default),e.default})},"esri/layers/support/EditFieldsInfo":function(){define(["exports","../../chunks/tslib.es6","../../core/Clonable","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../time/timeZoneUtils"],function(e,t,r,o,s,i,n,a,l,c){"use strict";return e.default=class extends(r.ClonableMixin(o.JSONSupport)){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}},t.__decorate([s.property()],e.default.prototype,"creatorField",void 0),t.__decorate([s.property()],e.default.prototype,"creationDateField",void 0),t.__decorate([s.property()],e.default.prototype,"editorField",void 0),t.__decorate([s.property()],e.default.prototype,"editDateField",void 0),t.__decorate([s.property()],e.default.prototype,"realm",void 0),t.__decorate([s.property(c.timeZoneProperty("dateFieldsTimeReference",!0))],e.default.prototype,"timeZone",void 0),e.default=t.__decorate([l.subclass("esri.layers.support.EditFieldsInfo")],e.default),e.default})},"esri/layers/support/FeatureIndex":function(){define(["exports","../../chunks/tslib.es6","../../core/Clonable","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";e.FeatureIndex=class extends(r.ClonableMixin(o.JSONSupport)){constructor(e){super(e)}},t.__decorate([s.property({constructOnly:!0,json:{write:!0}})],e.FeatureIndex.prototype,"name",void 0),t.__decorate([s.property({constructOnly:!0,json:{write:!0}})],e.FeatureIndex.prototype,"fields",void 0),t.__decorate([s.property({constructOnly:!0,json:{write:!0}})],e.FeatureIndex.prototype,"isAscending",void 0),t.__decorate([s.property({constructOnly:!0,json:{write:!0}})],e.FeatureIndex.prototype,"indexType",void 0),t.__decorate([s.property({constructOnly:!0,json:{write:!0}})],e.FeatureIndex.prototype,"isUnique",void 0),t.__decorate([s.property({constructOnly:!0,json:{write:!0}})],e.FeatureIndex.prototype,"description",void 0),e.FeatureIndex=t.__decorate([l.subclass("esri.layers.support.FeatureIndex")],e.FeatureIndex),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/featureLayerUtils":function(){define(["require","exports","../../kernel","../../core/asyncUtils","../../core/Error","../../core/jsonMap","../../core/sql","../../core/uuid","../../core/accessorSupport/extensions/serializableProperty/reader","./CodedValue","./CodedValueDomain","./featureQueryAll","./fieldUtils","./layerUtils","../../renderers/SimpleRenderer","../../renderers/UniqueValueRenderer","../../rest/support/AttachmentQuery","../../rest/support/NormalizationBinParametersMixin","../../rest/support/Query","../../rest/support/RelationshipQuery","../../symbols/support/typeUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b,_,S){"use strict";const v=new i.JSONMap({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});function w(e,t,r){const{attributes:o}=t,{objectIdField:i}=e;return e.capabilities?.data?.supportsAttachment?t?o?i&&o[i]?Promise.resolve():Promise.reject(new s(r,`feature is missing the identifying attribute ${i}`)):Promise.reject(new s(r,"'attributes' are required on a feature to query attachments")):Promise.reject(new s(r,"A feature is required to add/delete/update attachments")):Promise.reject(new s(r,"this layer doesn't support attachments"))}function x(e,t){const{subtypes:r,subtypeField:o}=e;if(!t?.attributes||!r?.length||!o)return null;const s=t.attributes[o];return null==s?null:r.find(e=>e.code===s)}function T(e,t){const{fieldsIndex:r,subtypeField:o}=e,{name:s,type:i}=r.get(t)??{};if(!s)return null;if((o&&r.get(o)?.name)===s&&e.subtypes?.length){const t=e.subtypes.map(e=>new c.CodedValue({code:I(e.code,i),name:e.name}));if(t?.length)return new u({codedValues:t})}return null}function M(e,t){const{fieldsIndex:r}=e,{name:o,type:s}=r.get(t)??{};if(!o)return null;if(("typeIdField"in e?r.get(e.typeIdField)?.name:null)===o&&"types"in e&&e.types?.length){const t=e.types.map(e=>new c.CodedValue({code:I(e.id,s),name:e.name}));return new u({codedValues:t})}return null}function I(e,t){return t?d.isStringField({type:t})&&"number"==typeof e?`${e}`:d.isIntegerField({type:t})&&"string"==typeof e?Number.parseInt(e,10):e:e}async function O(e){return(await e.load()).source}async function P(e,t){if(!r.id)return;if(r.id.findCredential(e))return;let o;try{const s=await h.getOwningPortalUrl(e,t);s&&(o=await r.id.checkSignInStatus(`${s}/sharing`))}catch(e){}if(o)try{const o=null!=t?t.signal:null;await r.id.getCredential(e,{signal:o})}catch(e){}}function k(e){return!!e?.toLowerCase().includes("current_user")}const C=l.createTypeReader({types:S.symbolTypesRenderer});async function L(e,t,r){if(null==t)return null;const s=[],{objectIdField:i}=e;if(t.forEach(e=>{let t=null;if("attributes"in e){const{attributes:o}=e;t={globalId:o[r],objectId:null!=o[i]&&-1!==o[i]?o[i]:null}}else t={globalId:e.globalId,objectId:null!=e.objectId&&-1!==e.objectId?e.objectId:null};null!=t.globalId&&(null!=t.objectId&&-1!==t.objectId||s.push(t.globalId))}),0===s.length)return null;const n=e.createQuery();n.where=s.map(e=>`${r}='${e}'`).join(" OR "),n.returnGeometry=!1,n.outFields=[i,r],n.cacheHint=!1;const l=await o.resultOrAbort(p.queryAllJSON(e,n));if(!l.ok)return null;const c=new Map,u=l.value.features;for(const e of u){const t=e.attributes[r],o=e.attributes[i];null!=t&&null!=o&&-1!==o&&c.set(a.normalizeGlobalID(t),o)}return c}function E(e,t,r){if(!t||!r||!e)return null;const o=r.getAttribute(t);return null==o?null:e.find(e=>{const{id:t}=e;return null!=t&&t.toString()===o.toString()})??null}function A(e){return e.sourceJSON?.isMultiServicesView||function(e){return!!e.sourceJSON?.capabilities?.toLowerCase().split(",").map(e=>e.trim()).includes("map")}(e)}function F(e,t){return null!=e&&!!t?.[g.normalizationTypeJsonMap.toJSON(e)]}t.addAttachment=async function(e,t,r,o){const i=await O(e);if(await w(e,t,o),!i.addAttachment)throw new s(o,"Layer source does not support addAttachment capability");return i.addAttachment(t,r)},t.applyEdits=async function(t,r,o){const{applyEdits:s}=await new Promise((t,r)=>e(["../graphics/editingSupport"],t,r)),i=await t.load();let n=o;return"feature"===i.type&&i.infoFor3D&&null!=r.deleteFeatures&&null!=i.globalIdField&&(n={...n,globalIdToObjectId:await L(i,r.deleteFeatures,i.globalIdField)}),s(i,i.source,r,o)},t.checkServiceCurrentUserSupport=async function(e){const t=e.parsedUrl?.path;t&&function(e){return function(e){return!(!h.isLayerWithFeatureCapabilities(e)||!e.capabilities?.query.supportsCurrentUser)}(e)&&("serviceDefinitionExpression"in e&&k(e.serviceDefinitionExpression)||"definitionExpression"in e&&k(e.definitionExpression))}(e)&&await P(t)},t.computeDomainFromSubtypes=T,t.computeDomainFromTypes=M,t.computeEffectiveEditingEnabled=function(e){return!A(e)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)},t.createDefaultRenderer=function(e,t){if(e.defaultSymbol)return e.types?.length?new f({defaultSymbol:C(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map(e=>({id:e.id,symbol:C(e.symbol,e,t)}))}):new y({symbol:C(e.defaultSymbol,e,t)})},t.createQuery=function(e){const t=new b;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,t.outFields=["*"],t.multipatchOption="multipatch"===e.geometryType?"xyFootprint":null;const r=e.capabilities?.query;r&&(t.compactGeometryEnabled=r.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference);const o=e.capabilities?.data;o?.supportsZ&&null!=e.returnZ&&(t.returnZ=e.returnZ),o?.supportsM&&null!=e.returnM&&(t.returnM=e.returnM);const{timeOffset:s,timeExtent:i}=e;return t.timeExtent=null!=s&&null!=i?i.offset(-s.value,s.unit):i||null,t},t.deleteAttachments=async function(e,t,r,o){const i=await O(e);if(await w(e,t,o),!i.deleteAttachments)throw new s(o,"Layer source does not support deleteAttachments capability");return i.deleteAttachments(t,r)},t.ensureCredentialIfSignedIn=P,t.ensureLayerCredential=async function(e,t,r){const o=e.parsedUrl?.path;o&&e.authenticationTriggerEvent===t&&await P(o,r)},t.fetchRecomputedExtents=async function(e,t,r){const o=(await e.load({signal:t?.signal})).source;if(!o.fetchRecomputedExtents)throw new s(r,"Layer source does not support fetchUpdates capability");return o.fetchRecomputedExtents(t)},t.geometryTypeKebabDict=v,t.getFeatureSubtype=x,t.getFeatureType=E,t.getFieldDomain=function(e,t,r,o){const s=r?.feature,i=!!e.subtypes?.length;if(i&&!r?.excludeImpliedDomains){const r=T(e,t);if(r)return r}const n=i&&x(e,s);if(n){const e=n?.domains?.[t];return"inherited"===e?.type?o:e}const a=E(e.types,e.typeIdField,s);if(a){const e=a.domains&&a.domains[t];if(e&&"inherited"!==e?.type)return e}if(o)return o;if(!r?.excludeImpliedDomains){const r=M(e,t);if(r)return r}return null},t.getGlobalIdToObjectIdMap=L,t.getSignedInUser=async function(e,t){if(!r.id)return;const o=r.id.findCredential(e);if(o)return o.userId;let s;try{const o=await h.getOwningPortalUrl(e,t);o&&(s=await r.id.checkSignInStatus(`${o}/sharing`))}catch(e){}return s?s.userId:null},t.hasCurrentUser=k,t.hasDataChanged=async function(e){const t=e.source;if(t?.refresh)try{const{dataChanged:r,updates:o}=await t.refresh();if(null!=o&&(e.sourceJSON={...e.sourceJSON,...o},e.read(o,{origin:"service",url:e.parsedUrl})),r)return!0}catch{}if(e.definitionExpression)try{return(await n.parseWhereClause(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1},t.isLayerCacheStale=function(e){let t=e.sourceJSON?.cacheMaxAge;if(!t)return!1;const r=e.editingInfo?.lastEditDate?.getTime();return null==r||(t*=1e3,Date.now()-r<t)},t.queryAttachments=async function(e,t,r,o){t=m.from(t),await e.load();const i=e.source,n=e.capabilities;if(!n?.data?.supportsAttachment)throw new s(o,"this layer doesn't support attachments");const{attachmentTypes:a,objectIds:l,globalIds:c,num:u,size:p,start:d,where:h}=t;if(!n?.operations?.supportsQueryAttachments&&(a?.length>0||c?.length>0||p?.length>0||u||d||h))throw new s(o,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(l?.length||c?.length||h))throw new s(o,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!i.queryAttachments)throw new s(o,"Layer source does not support queryAttachments capability",t);return!n?.attachment?.supportsOrderByFields&&t.orderByFields?.length&&((t=t.clone()).orderByFields=null),i.queryAttachments(t)},t.queryExtent=async function(e,t,r,o){const i=await O(e);if(!i.queryExtent)throw new s(o,"Layer source does not support queryExtent capability");return i.queryExtent(b.from(t)??e.createQuery(),r)},t.queryFeatureCount=async function(e,t,r,o){const i=await O(e);if(!i.queryFeatureCount)throw new s(o,"Layer source does not support queryFeatureCount capability");return i.queryFeatureCount(b.from(t)??e.createQuery(),r)},t.queryObjectIds=async function(e,t,r,o){const i=await O(e);if(!i.queryObjectIds)throw new s(o,"Layer source does not support queryObjectIds capability");return i.queryObjectIds(b.from(t)??e.createQuery(),r)},t.queryRelatedFeatures=async function(e,t,r,o){const i=await O(e);if(!i.queryRelatedFeatures)throw new s(o,"Layer source does not support queryRelatedFeatures capability");return i.queryRelatedFeatures(_.from(t),r)},t.queryRelatedFeaturesCount=async function(e,t,r,o){const i=await O(e);if(!i.queryRelatedFeaturesCount)throw new s(o,"Layer source does not support queryRelatedFeaturesCount capability");return i.queryRelatedFeaturesCount(_.from(t),r)},t.readGlobalIdField=function(e){const{globalIdField:t,fields:r}=e;if(t)return t;if(r)for(const e of r)if("esriFieldTypeGlobalID"===e.type)return e.name},t.readObjectIdField=function(e){const{objectIdField:t,fields:r}=e;if(t)return t;if(r)for(const e of r)if("esriFieldTypeOID"===e.type)return e.name},t.readVersion=function(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3},t.supportsQueryOnly=A,t.updateAttachment=async function(e,t,r,o,i){const n=await O(e);if(await w(e,t,i),!n.updateAttachment)throw new s(i,"Layer source does not support updateAttachment capability");return n.updateAttachment(t,r,o)},t.uploadAssets=async function(t,r,o){const{uploadAssets:s}=await new Promise((t,r)=>e(["../graphics/editingSupport"],t,r)),i=await t.load();return s(i,i.source,r,o)},t.validateBinsQuery=function(e,t,r){const o=t?.queryAttributeBins;if(!t?.operations?.supportsQueryBins||!o)throw new s(r,"Layer source does not support binning");switch(e.binParameters.type){case"auto-interval":if(!o.supportsAutoInterval)throw new s(r,"Layer source does not support auto-interval binning");if(e.binParameters.normalizationType&&(!o.supportsNormalization||!F(e.binParameters.normalizationType,o.supportedNormalizationTypes)))throw new s(r,"Layer source does not support normalization binning");break;case"date":if(!o.supportsDate)throw new s(r,"Layer source does not support date binning");if(e.binParameters.snapToData&&!o.supportsSnapToData)throw new s(r,"Layer source does not support snapToData binning");if(e.binParameters.returnFullIntervalBin&&!o.supportsReturnFullIntervalBin)throw new s(r,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!o.supportsFixedBoundaries)throw new s(r,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!o.supportsFixedInterval)throw new s(r,"Layer source does not support fixed-interval binning");if(e.binParameters.normalizationType&&(!o.supportsNormalization||!F(e.binParameters.normalizationType,o.supportedNormalizationTypes)))throw new s(r,"Layer source does not support normalization binning")}if(e.binParameters.stackBy&&!o.supportsStackBy)throw new s(r,"Layer source does not support stackBy binning");if(e.binParameters.splitBy&&!o.supportsSplitBy)throw new s(r,"Layer source does not support splitBy binning");if(e.binParameters.firstDayOfWeek&&!o.supportsFirstDayOfWeek)throw new s(r,"Layer source does not support firstDayOfWeek binning");const i=o?.supportedStatistics;if(e.outStatistics&&i){const t=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:o}of e.outStatistics){const e=t.get(o);if(e&&!i[e])throw new s(r,`Layer source does not support ${o} statistic type`)}}},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/featureQueryAll":function(){define(["exports","../../rest/support/Query"],function(e,t){"use strict";function r(e){return s(e)*o(e)}function o(e){return e.capabilities.query.maxRecordCount||2e3}function s(e){return e.capabilities.query.supportsMaxRecordCountFactor?t.MAX_MAX_RECORD_COUNT_FACTOR:1}e.getMaxRecordCountFactor=s,e.getMaximumQuerySize=r,e.getMaximumRecordCount=o,e.queryAllJSON=async function(e,t,o){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=s(e));const i=r(e),n=e.capabilities.query.supportsPagination;t.start=0,t.num=i;let a=null;for(;;){const r=await e.source.queryFeaturesJSON(t,o);if(null==a?a=r:a.features=a.features.concat(r.features),a.exceededTransferLimit=r.exceededTransferLimit,!n||!r.exceededTransferLimit)break;t.start+=i}return a},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/SimpleRenderer":function(){define(["exports","../chunks/tslib.es6","../core/lang","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","./Renderer","./mixins/VisualVariablesMixin","./support/commonProperties"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";var p;return e.default=p=class extends(c.VisualVariablesMixin(l)){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.symbols.map(r=>r.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables?.reduce((e,t)=>e+t.getAttributeHash(),"")??""}getMeshHash(){return this.symbols.reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new p({description:this.description,label:this.label,symbol:r.clone(this.symbol),visualVariables:r.clone(this.visualVariables),authoringInfo:r.clone(this.authoringInfo)})}},t.__decorate([o.property({type:String,json:{write:!0}})],e.default.prototype,"description",void 0),t.__decorate([o.property({type:String,json:{write:!0}})],e.default.prototype,"label",void 0),t.__decorate([o.property(u.requiredRendererSymbolProperty)],e.default.prototype,"symbol",void 0),t.__decorate([n.enumeration({simple:"simple"})],e.default.prototype,"type",void 0),e.default=p=t.__decorate([a.subclass("esri.renderers.SimpleRenderer")],e.default),e.default})},"esri/renderers/Renderer":function(){define(["exports","../chunks/tslib.es6","../core/jsonMap","../core/JSONSupport","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/subclass","./support/AuthoringInfo"],function(e,t,r,o,s,i,n,a,l,c){"use strict";const u=new r.JSONMap({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});return e.default=class extends o.JSONSupport{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}},t.__decorate([s.property({type:c,json:{write:!0}})],e.default.prototype,"authoringInfo",void 0),t.__decorate([s.property({type:u.apiValues,readOnly:!0,json:{type:u.jsonValues,read:!1,write:{writer:u.write,ignoreOrigin:!0,isRequired:!0}}})],e.default.prototype,"type",void 0),e.default=t.__decorate([l.subclass("esri.renderers.Renderer")],e.default),e.default})},"esri/renderers/support/AuthoringInfo":function(){define(["exports","../../chunks/tslib.es6","../../core/jsonMap","../../core/JSONSupport","../../core/lang","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","./AuthoringInfoFieldInfo","./AuthoringInfoVisualVariable","../../rest/support/colorRamps"],function(e,t,r,o,s,i,n,a,l,c,u,p){"use strict";var d;const h=new r.JSONMap({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),y=new r.JSONMap({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),f=new r.JSONMap({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),m=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"];return e.default=d=class extends o.JSONSupport{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&"relationship"!==t?"class-breaks-size"===t||"class-breaks-color"===t?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?p.fromJSON(e):void 0}get fields(){return this.type&&"predominance"!==this.type?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&"relationship"!==this.type?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&"relationship"!==this.type?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return"flow"===this.type?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&"relationship"!==this.type?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&"relationship"!==e&&"class-breaks-size"!==e&&"class-breaks-color"!==e||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;"classed-size"===e?t="class-breaks-size":"classed-color"===e&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new d({classificationMethod:this.classificationMethod,colorRamp:s.clone(this.colorRamp),fadeRatio:s.clone(this.fadeRatio),fields:this.fields?.slice(),field1:s.clone(this.field1),field2:s.clone(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}},t.__decorate([i.property({type:h.apiValues,value:null,json:{type:h.jsonValues,read:h.read,write:h.write,origins:{"web-document":{default:"manual",type:h.jsonValues,read:h.read,write:h.write}}}})],e.default.prototype,"classificationMethod",null),t.__decorate([i.property({types:p.types,json:{write:!0}})],e.default.prototype,"colorRamp",void 0),t.__decorate([a.reader("colorRamp")],e.default.prototype,"readColorRamp",null),t.__decorate([i.property({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],e.default.prototype,"fadeRatio",void 0),t.__decorate([i.property({type:[String],value:null,json:{write:!0}})],e.default.prototype,"fields",null),t.__decorate([i.property({type:c.AuthoringInfoFieldInfo,value:null,json:{write:!0}})],e.default.prototype,"field1",null),t.__decorate([i.property({type:c.AuthoringInfoFieldInfo,value:null,json:{write:!0}})],e.default.prototype,"field2",null),t.__decorate([i.property({type:["flow-line","wave-front"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],e.default.prototype,"flowTheme",null),t.__decorate([i.property({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],e.default.prototype,"focus",null),t.__decorate([i.property({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],e.default.prototype,"isAutoGenerated",void 0),t.__decorate([i.property({type:Number,value:null,json:{type:n.Integer,write:!0}})],e.default.prototype,"numClasses",null),t.__decorate([i.property({type:m,json:{type:m,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],e.default.prototype,"lengthUnit",void 0),t.__decorate([i.property({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],e.default.prototype,"maxSliderValue",void 0),t.__decorate([i.property({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],e.default.prototype,"minSliderValue",void 0),t.__decorate([i.property({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],e.default.prototype,"statistics",null),t.__decorate([i.property({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],e.default.prototype,"standardDeviationInterval",null),t.__decorate([i.property({type:y.apiValues,value:null,json:{type:y.jsonValues,read:y.read,write:y.write,origins:{"web-scene":{type:f.jsonValues,write:{writer:f.write,overridePolicy:e=>({enabled:"flow"!==e})}}}}})],e.default.prototype,"type",null),t.__decorate([i.property({type:[u],json:{write:!0}})],e.default.prototype,"visualVariables",void 0),t.__decorate([i.property({type:["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],e.default.prototype,"univariateSymbolStyle",null),t.__decorate([i.property({type:["high-to-low","above-and-below","above","below"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],e.default.prototype,"univariateTheme",null),e.default=d=t.__decorate([l.subclass("esri.renderers.support.AuthoringInfo")],e.default),e.default})},"esri/renderers/support/AuthoringInfoFieldInfo":function(){define(["exports","../../chunks/tslib.es6","../../core/JSONSupport","../../core/lang","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/subclass","./AuthoringInfoClassBreakInfo"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;e.AuthoringInfoFieldInfo=c=class extends r.JSONSupport{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new c({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:o.clone(this.classBreakInfos)})}},t.__decorate([s.property({type:String,json:{write:!0}})],e.AuthoringInfoFieldInfo.prototype,"field",void 0),t.__decorate([s.property({type:String,json:{write:!0}})],e.AuthoringInfoFieldInfo.prototype,"normalizationField",void 0),t.__decorate([s.property({type:String,json:{write:!0}})],e.AuthoringInfoFieldInfo.prototype,"label",void 0),t.__decorate([s.property({type:[l.AuthoringInfoClassBreakInfo],json:{write:!0}})],e.AuthoringInfoFieldInfo.prototype,"classBreakInfos",void 0),e.AuthoringInfoFieldInfo=c=t.__decorate([a.subclass("esri.renderers.support.AuthoringInfoFieldInfo")],e.AuthoringInfoFieldInfo),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/AuthoringInfoClassBreakInfo":function(){define(["exports","../../chunks/tslib.es6","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a){"use strict";var l;e.AuthoringInfoClassBreakInfo=l=class extends r.JSONSupport{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new l({minValue:this.minValue,maxValue:this.maxValue})}},t.__decorate([o.property({type:Number,json:{write:!0}})],e.AuthoringInfoClassBreakInfo.prototype,"minValue",void 0),t.__decorate([o.property({type:Number,json:{write:!0}})],e.AuthoringInfoClassBreakInfo.prototype,"maxValue",void 0),e.AuthoringInfoClassBreakInfo=l=t.__decorate([a.subclass("esri.renderers.support.AuthoringInfoClassBreakInfo")],e.AuthoringInfoClassBreakInfo),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/AuthoringInfoVisualVariable":function(){define(["../../chunks/tslib.es6","../../core/jsonMap","../../core/JSONSupport","../../core/lang","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/cast","../../core/accessorSupport/decorators/subclass","./AuthoringInfoSizeStop"],function(e,t,r,o,s,i,n,a){"use strict";var l;const c=new t.JSONMap({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),u=new t.JSONMap({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),p={key:e=>"number"==typeof e?"number":"string",typeMap:{number:Number,string:String},base:null},d=["high-to-low","above-and-below","centered-on","extremes"],h=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size","spike"])],y=["seconds","minutes","hours","days","months","years"];let f=l=class extends r.JSONSupport{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return"string"==typeof e||"number"==typeof e?e:null}get normalizationField(){return"reference-size"===this.theme||"spike"===this.theme?this._get("normalizationField"):null}set normalizationField(e){this._set("normalizationField",e)}get referenceSizeScale(){return"reference-size"===this.theme?this._get("referenceSizeScale"):null}set referenceSizeScale(e){this._set("referenceSizeScale",e)}get referenceSizeSymbolStyle(){return"reference-size"===this.theme?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(e){this._set("referenceSizeSymbolStyle",e)}get spikeSymbolStyle(){return"spike"===this.theme?this._get("spikeSymbolStyle"):null}set spikeSymbolStyle(e){this._set("spikeSymbolStyle",e)}castStartTime(e){return"string"==typeof e||"number"==typeof e?e:null}get sizeStops(){return"reference-size"===this.theme||"spike"===this.theme?this._get("sizeStops"):null}set sizeStops(e){this._set("sizeStops",e)}get style(){return"color"===this.type?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new l({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,spikeSymbolStyle:this.spikeSymbolStyle,sizeStops:o.clone(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};return e.__decorate([s.property({types:p,json:{write:!0}})],f.prototype,"endTime",void 0),e.__decorate([i.cast("endTime")],f.prototype,"castEndTime",null),e.__decorate([s.property({type:String,json:{write:!0}})],f.prototype,"field",void 0),e.__decorate([s.property({type:Number,json:{write:!0}})],f.prototype,"maxSliderValue",void 0),e.__decorate([s.property({type:Number,json:{write:!0}})],f.prototype,"minSliderValue",void 0),e.__decorate([s.property({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],f.prototype,"normalizationField",null),e.__decorate([s.property({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],f.prototype,"referenceSizeScale",null),e.__decorate([s.property({type:["circle","diamond","hexagon-flat","hexagon-pointy","square"],value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],f.prototype,"referenceSizeSymbolStyle",null),e.__decorate([s.property({type:["triangle-closed-outline","triangle-gradient-fill-closed","triangle-gradient-fill-closed-outline","triangle-gradient-fill-open","triangle-gradient-fill-open-outline","triangle-open-outline","triangle-solid-fill-closed","triangle-solid-fill-closed-outline","triangle-solid-fill-open","triangle-solid-fill-open-outline"],value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],f.prototype,"spikeSymbolStyle",null),e.__decorate([s.property({types:p,json:{write:!0}})],f.prototype,"startTime",void 0),e.__decorate([i.cast("startTime")],f.prototype,"castStartTime",null),e.__decorate([s.property({type:[a],json:{origins:{"web-scene":{write:!1}},write:!0}})],f.prototype,"sizeStops",null),e.__decorate([s.property({type:c.apiValues,value:null,json:{type:c.jsonValues,read:c.read,write:c.write}})],f.prototype,"style",null),e.__decorate([s.property({type:h,value:null,json:{type:h,origins:{"web-scene":{type:d,write:{writer:(e,t)=>{d.includes(e)&&(t.theme=e)}}}},write:!0}})],f.prototype,"theme",null),e.__decorate([s.property({type:u.apiValues,json:{type:u.jsonValues,read:u.read,write:u.write}})],f.prototype,"type",void 0),e.__decorate([s.property({type:y,json:{type:y,write:!0}})],f.prototype,"units",void 0),f=l=e.__decorate([n.subclass("esri.renderers.support.AuthoringInfoVisualVariable")],f),f})},"esri/renderers/support/AuthoringInfoSizeStop":function(){define(["../../chunks/tslib.es6","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n){"use strict";var a;let l=a=class extends t.JSONSupport{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new a({label:this.label,value:this.value,size:this.size})}};return e.__decorate([r.property({type:String,json:{write:!0}})],l.prototype,"label",void 0),e.__decorate([r.property({type:Number,json:{write:!0}})],l.prototype,"size",void 0),e.__decorate([r.property({type:Number,json:{write:!0}})],l.prototype,"value",void 0),l=a=e.__decorate([n.subclass("esri.renderers.support.AuthoringInfoSizeStop")],l),l})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(e,t,r,o){"use strict";const s={key:"type",base:r,typeMap:{algorithmic:t,multipart:o}};e.fromJSON=function(e){return e?.type?"algorithmic"===e.type?t.fromJSON(e):"multipart"===e.type?o.fromJSON(e):null:null},e.types=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/AlgorithmicColorRamp":function(){define(["exports","../../chunks/tslib.es6","../../Color","../../core/lang","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/subclass","./ColorRamp"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;return e.default=c=class extends l{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new c({fromColor:o.clone(this.fromColor),toColor:o.clone(this.toColor),algorithm:this.algorithm})}},t.__decorate([n.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],e.default.prototype,"algorithm",void 0),t.__decorate([s.property({type:r,json:{type:[i.Integer],write:{isRequired:!0}}})],e.default.prototype,"fromColor",void 0),t.__decorate([s.property({type:r,json:{type:[i.Integer],write:{isRequired:!0}}})],e.default.prototype,"toColor",void 0),t.__decorate([s.property({type:["algorithmic"],json:{write:{isRequired:!0}}})],e.default.prototype,"type",void 0),e.default=c=t.__decorate([a.subclass("esri.rest.support.AlgorithmicColorRamp")],e.default),e.default})},"esri/rest/support/ColorRamp":function(){define(["exports","../../chunks/tslib.es6","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a){"use strict";return e.default=class extends r.JSONSupport{constructor(e){super(e),this.type=null}},t.__decorate([o.property({readOnly:!0,json:{read:!1,write:!0}})],e.default.prototype,"type",void 0),e.default=t.__decorate([a.subclass("esri.rest.support.ColorRamp")],e.default),e.default})},"esri/rest/support/MultipartColorRamp":function(){define(["exports","../../chunks/tslib.es6","../../core/lang","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","./AlgorithmicColorRamp","./ColorRamp"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";var p;return e.default=p=class extends u{constructor(e){super(e),this.colorRamps=null,this.type="multipart",this.weights=void 0}writeColorRamps(e,t,r,o){const s=e?.map(e=>e.toJSON(o)),{weights:i}=this;if(s&&i?.length&&s.length===i?.length){const e=100/i.reduce((e,t)=>e+t);let t=0;s.forEach((r,o)=>{r.start=t,t+=i[o]*e,r.stop=t})}t.colorRamps=s}readWeights(e,t){const r=t.colorRamps?.map(({start:e,stop:t})=>null==e||null==t?-1:t-e);if(!r?.some(e=>e<0))return r}clone(){return new p({colorRamps:r.clone(this.colorRamps)})}},t.__decorate([o.property({type:[c],json:{write:{isRequired:!0}}})],e.default.prototype,"colorRamps",void 0),t.__decorate([l.writer("colorRamps")],e.default.prototype,"writeColorRamps",null),t.__decorate([o.property({type:["multipart"],json:{write:{isRequired:!0}}})],e.default.prototype,"type",void 0),t.__decorate([o.property({type:[Number]})],e.default.prototype,"weights",void 0),t.__decorate([n.reader("weights",["colorRamps"])],e.default.prototype,"readWeights",null),e.default=p=t.__decorate([a.subclass("esri.rest.support.MultipartColorRamp")],e.default),e.default})},"esri/renderers/mixins/VisualVariablesMixin":function(){define(["exports","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","../../layers/support/fieldUtils","../visualVariables/ColorVariable","../visualVariables/OpacityVariable","../visualVariables/RotationVariable","../visualVariables/SizeVariable","../visualVariables/VisualVariable","../visualVariables/VisualVariableFactory","../../support/arcadeExpressionUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m){"use strict";const g={base:y,key:"type",typeMap:{opacity:p,color:u,rotation:d,size:h}};function b(e,t,r){const o=m.matchRandomRotationExpression(e);return null!=o&&(c.collectField(t,r,o),!0)}e.VisualVariablesMixin=e=>{const o=e;let s=class extends o{constructor(){super(...arguments),this._vvFactory=new f}set visualVariables(e){this._vvFactory.visualVariables=e,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(e,t,r){return this._vvFactory.readVariables(e,t,r)}writeVisualVariables(e,t,r,o){t[r]=this._vvFactory.writeVariables(e,o)}get arcadeRequiredForVisualVariables(){return this.visualVariables?.some(({arcadeRequired:e})=>e)??!1}hasVisualVariables(e,t){return e?this.getVisualVariablesForType(e,t).length>0:this.getVisualVariablesForType("size",t).length>0||this.getVisualVariablesForType("color",t).length>0||this.getVisualVariablesForType("opacity",t).length>0||this.getVisualVariablesForType("rotation",t).length>0}getVisualVariablesForType(e,t){return this.visualVariables?.filter(r=>r.type===e&&("string"==typeof t?r.target===t:!1!==t||!r.target))??[]}async collectVVRequiredFields(e,t){let r=[];this.visualVariables&&(r=r.concat(this.visualVariables));for(const o of r)o&&(o.field&&c.collectField(e,t,o.field),o.normalizationField&&c.collectField(e,t,o.normalizationField),o.valueExpression&&(b(o.valueExpression,e,t)||await c.collectArcadeFieldNames(e,t,o.valueExpression)))}};return t.__decorate([r.property({types:[g],value:null,json:{write:!0}})],s.prototype,"visualVariables",null),t.__decorate([n.reader("visualVariables",["visualVariables","rotationType","rotationExpression"])],s.prototype,"readVisualVariables",null),t.__decorate([l.writer("visualVariables")],s.prototype,"writeVisualVariables",null),s=t.__decorate([a.subclass("esri.renderers.mixins.VisualVariablesMixin")],s),s},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/visualVariables/ColorVariable":function(){define(["exports","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./VisualVariable","./support/ColorStop"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;return e.default=c=class extends a{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(e=>!!e)).sort((e,t)=>e.value-t.value),this._set("stops",e)}clone(){return new c({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}},t.__decorate([r.property({readOnly:!0})],e.default.prototype,"cache",null),t.__decorate([r.property({type:["color"],json:{type:["colorInfo"]}})],e.default.prototype,"type",void 0),t.__decorate([r.property({type:String,json:{write:!0}})],e.default.prototype,"normalizationField",void 0),t.__decorate([r.property({type:[l],json:{write:!0}})],e.default.prototype,"stops",null),e.default=c=t.__decorate([n.subclass("esri.renderers.visualVariables.ColorVariable")],e.default),e.default})},"esri/renderers/visualVariables/VisualVariable":function(){define(["exports","../../chunks/tslib.es6","../../core/jsonMap","../../core/JSONSupport","../../core/Logger","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/cast","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/ensureType","./support/VisualVariableLegendOptions"],function(e,t,r,o,s,i,n,a,l,c){"use strict";const u=new r.JSONMap({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});return e.default=class extends o.JSONSupport{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return null==e?e:"function"==typeof e?(s.getLogger(this).error(".field: field must be a string value"),null):l.ensureString(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}},t.__decorate([i.property()],e.default.prototype,"index",void 0),t.__decorate([i.property({type:u.apiValues,readOnly:!0,json:{read:u.read,write:{writer:u.write,isRequired:!0}}})],e.default.prototype,"type",void 0),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"field",void 0),t.__decorate([n.cast("field")],e.default.prototype,"castField",null),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"valueExpression",void 0),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"valueExpressionTitle",void 0),t.__decorate([i.property({readOnly:!0})],e.default.prototype,"arcadeRequired",null),t.__decorate([i.property({type:c,json:{write:!0}})],e.default.prototype,"legendOptions",void 0),e.default=t.__decorate([a.subclass("esri.renderers.visualVariables.VisualVariable")],e.default),e.default})},"esri/renderers/visualVariables/support/VisualVariableLegendOptions":function(){define(["../../../chunks/tslib.es6","../../../core/Clonable","../../../core/JSONSupport","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a){"use strict";let l=class extends(t.ClonableMixin(r.JSONSupport)){constructor(){super(...arguments),this.showLegend=null,this.title=null}};return e.__decorate([o.property({type:Boolean,json:{write:!0}})],l.prototype,"showLegend",void 0),e.__decorate([o.property({type:String,json:{write:!0}})],l.prototype,"title",void 0),l=e.__decorate([a.subclass("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],l),l})},"esri/renderers/visualVariables/support/ColorStop":function(){define(["../../../chunks/tslib.es6","../../../Color","../../../core/JSONSupport","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/ensureType","../../../core/has","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","../../../core/accessorSupport/decorators/writer"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;let u=c=class extends r.JSONSupport{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,r){t[r]=e??0}clone(){return new c({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};return e.__decorate([o.property({type:t,json:{type:[s.Integer],write:{isRequired:!0}}})],u.prototype,"color",void 0),e.__decorate([o.property({type:String,json:{write:!0}})],u.prototype,"label",void 0),e.__decorate([o.property({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],u.prototype,"value",void 0),e.__decorate([l.writer("value")],u.prototype,"writeValue",null),u=c=e.__decorate([a.subclass("esri.renderers.visualVariables.support.ColorStop")],u),u})},"esri/renderers/visualVariables/OpacityVariable":function(){define(["exports","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./VisualVariable","./support/OpacityStop"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;return e.default=c=class extends a{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(e=>!!e)).sort((e,t)=>e.value-t.value),this._set("stops",e)}clone(){return new c({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}},t.__decorate([r.property({readOnly:!0})],e.default.prototype,"cache",null),t.__decorate([r.property({type:["opacity"],json:{type:["transparencyInfo"]}})],e.default.prototype,"type",void 0),t.__decorate([r.property({type:String,json:{write:!0}})],e.default.prototype,"normalizationField",void 0),t.__decorate([r.property({type:[l],json:{write:!0}})],e.default.prototype,"stops",null),e.default=c=t.__decorate([n.subclass("esri.renderers.visualVariables.OpacityVariable")],e.default),e.default})},"esri/renderers/visualVariables/support/OpacityStop":function(){define(["../../../chunks/tslib.es6","../../../core/JSONSupport","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/ensureType","../../../core/has","../../../core/RandomLCG","../../../core/accessorSupport/decorators/reader","../../../core/accessorSupport/decorators/subclass","../../../core/accessorSupport/decorators/writer","../../../webdoc/support/opacityUtils"],function(e,t,r,o,s,i,n,a,l,c){"use strict";var u;let p=u=class extends t.JSONSupport{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return c.transparencyToOpacity(t.transparency)}writeOpacity(e,t,r){t[r]=c.opacityToTransparency(e)}clone(){return new u({label:this.label,opacity:this.opacity,value:this.value})}};return e.__decorate([r.property({type:String,json:{write:!0}})],p.prototype,"label",void 0),e.__decorate([r.property({type:Number,json:{type:o.Integer,write:{target:"transparency",isRequired:!0}}})],p.prototype,"opacity",void 0),e.__decorate([n.reader("opacity",["transparency"])],p.prototype,"readOpacity",null),e.__decorate([l.writer("opacity")],p.prototype,"writeOpacity",null),e.__decorate([r.property({type:Number,json:{write:{isRequired:!0}}})],p.prototype,"value",void 0),p=u=e.__decorate([a.subclass("esri.renderers.visualVariables.support.OpacityStop")],p),p})},"esri/renderers/visualVariables/RotationVariable":function(){define(["exports","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./VisualVariable"],function(e,t,r,o,s,i,n,a){"use strict";var l;return e.default=l=class extends a{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){return new l({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions?.clone()})}},t.__decorate([r.property({readOnly:!0})],e.default.prototype,"cache",null),t.__decorate([r.property({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],e.default.prototype,"axis",void 0),t.__decorate([r.property({type:["rotation"],json:{type:["rotationInfo"]}})],e.default.prototype,"type",void 0),t.__decorate([r.property({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],e.default.prototype,"rotationType",void 0),e.default=l=t.__decorate([n.subclass("esri.renderers.visualVariables.RotationVariable")],e.default),e.default})},"esri/renderers/visualVariables/SizeVariable":function(){define(["exports","../../chunks/tslib.es6","../../core/Error","../../core/jsonMap","../../core/Logger","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/cast","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","./VisualVariable","./support/castSizeVariable","./support/SizeStop","./support/SizeVariableLegendOptions","./support/sizeVariableUtils","./support/visualVariableUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f){"use strict";var m;const g=new o.JSONMap({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),b=new o.JSONMap({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function _(t){if(null!=t)return"string"==typeof t||"number"==typeof t?p.castSizeFromStringOrNumber(t):"size"===t.type?y.isSizeVariable(t)?t:(delete(t={...t}).type,new e.default(t)):void 0}function S(t,r,o){if("object"!=typeof t)return t;const s=new e.default;return s.read(t,o),s}return e.default=m=class extends u{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:null!=this.valueExpression&&f.viewScaleRE.test(this.valueExpression)}}set index(e){y.isSizeVariable(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),y.isSizeVariable(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return y.getInputValueType(this)}set maxDataValue(e){e&&this.stops&&(s.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(s.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return _(e)}readMaxSize(e,t,r){return S(e,0,r)}set minDataValue(e){e&&this.stops&&(s.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(s.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return _(e)}readMinSize(e,t,r){return S(e,0,r)}get arcadeRequired(){return!!this.valueExpression||null!=this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||null!=this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired}set stops(e){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?e&&Array.isArray(e)&&(e=e.filter(e=>!!e)).sort((e,t)=>e.value-t.value):e&&(s.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return y.getTransformationType(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,o,s){if("$view.scale"===e){if(s?.messages){const e=this.index,t="string"==typeof e?e:`visualVariables[${e}]`;s.messages.push(new r("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:t+".valueExpression",context:s}))}}else t[o]=e}readValueUnit(e){return e?b.read(e):null}clone(){return new m({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:y.isSizeVariable(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:y.isSizeVariable(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops?.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions?.clone()})}flipSizes(){if("clamped-linear"===this.transformationType){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if("stops"===this.transformationType){const e=this.stops;if(!e)return this;const t=e.map(e=>e.size).reverse(),r=e.length;for(let o=0;o<r;o++)e[o].size=t[o];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops?.map(e=>e.value||0)}},t.__decorate([i.property({readOnly:!0})],e.default.prototype,"cache",null),t.__decorate([i.property({type:g.apiValues,json:{type:g.jsonValues,origins:{"web-map":{read:!1}},read:g.read,write:g.write}})],e.default.prototype,"axis",void 0),t.__decorate([i.property()],e.default.prototype,"index",null),t.__decorate([i.property({type:String,readOnly:!0})],e.default.prototype,"inputValueType",null),t.__decorate([i.property({type:h,json:{write:!0}})],e.default.prototype,"legendOptions",void 0),t.__decorate([i.property({type:Number,value:null,json:{write:!0}})],e.default.prototype,"maxDataValue",null),t.__decorate([i.property({type:Number,value:null,json:{write:!0}})],e.default.prototype,"maxSize",null),t.__decorate([n.cast("maxSize")],e.default.prototype,"castMaxSize",null),t.__decorate([a.reader("maxSize")],e.default.prototype,"readMaxSize",null),t.__decorate([i.property({type:Number,value:null,json:{write:!0}})],e.default.prototype,"minDataValue",null),t.__decorate([i.property({type:Number,value:null,json:{write:!0}})],e.default.prototype,"minSize",null),t.__decorate([n.cast("minSize")],e.default.prototype,"castMinSize",null),t.__decorate([a.reader("minSize")],e.default.prototype,"readMinSize",null),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"normalizationField",void 0),t.__decorate([i.property({readOnly:!0})],e.default.prototype,"arcadeRequired",null),t.__decorate([i.property({type:String})],e.default.prototype,"scaleBy",void 0),t.__decorate([i.property({type:[d],value:null,json:{write:!0}})],e.default.prototype,"stops",null),t.__decorate([i.property({type:["outline"],json:{write:!0}})],e.default.prototype,"target",void 0),t.__decorate([i.property({type:String,readOnly:!0})],e.default.prototype,"transformationType",null),t.__decorate([i.property({type:["size"],json:{type:["sizeInfo"]}})],e.default.prototype,"type",void 0),t.__decorate([i.property({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],e.default.prototype,"useSymbolValue",void 0),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"valueExpression",void 0),t.__decorate([a.reader("valueExpression",["valueExpression","expression"])],e.default.prototype,"readValueExpression",null),t.__decorate([c.writer("web-scene","valueExpression")],e.default.prototype,"writeValueExpressionWebScene",null),t.__decorate([i.property({type:["radius","diameter","area","width","distance"],json:{write:!0}})],e.default.prototype,"valueRepresentation",void 0),t.__decorate([i.property({type:b.apiValues,json:{write:b.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],e.default.prototype,"valueUnit",void 0),t.__decorate([a.reader("valueUnit")],e.default.prototype,"readValueUnit",null),e.default=m=t.__decorate([l.subclass("esri.renderers.visualVariables.SizeVariable")],e.default),e.default})},"esri/renderers/visualVariables/support/castSizeVariable":function(){define(["exports","../../../core/screenUtils"],function(e,t){"use strict";e.castSizeFromStringOrNumber=function(e){return t.toPt(e)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/visualVariables/support/SizeStop":function(){define(["exports","../../../chunks/tslib.es6","../../../core/JSONSupport","../../../core/screenUtils","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;return e.default=c=class extends r.JSONSupport{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new c({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}},t.__decorate([s.property({type:String,json:{write:!0}})],e.default.prototype,"label",void 0),t.__decorate([s.property({type:Number,cast:o.toPt,json:{write:{isRequired:!0}}})],e.default.prototype,"size",void 0),t.__decorate([s.property({type:Number,json:{write:{isRequired:!0}}})],e.default.prototype,"value",void 0),t.__decorate([s.property({type:Boolean,json:{write:!1}})],e.default.prototype,"useMinValue",void 0),t.__decorate([s.property({type:Boolean,json:{write:!1}})],e.default.prototype,"useMaxValue",void 0),e.default=c=t.__decorate([l.subclass("esri.renderers.visualVariables.support.SizeStop")],e.default),e.default})},"esri/renderers/visualVariables/support/SizeVariableLegendOptions":function(){define(["../../../chunks/tslib.es6","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","./VisualVariableLegendOptions"],function(e,t,r,o,s,i,n){"use strict";let a=class extends n{constructor(){super(...arguments),this.customValues=null}};return e.__decorate([t.property({type:[Number],json:{write:!0}})],a.prototype,"customValues",void 0),a=e.__decorate([i.subclass("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],a),a})},"esri/renderers/visualVariables/support/sizeVariableUtils":function(){define(["exports"],function(e){"use strict";function t(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}e.getInputValueType=t,e.getTransformationType=function(e,r){const o=r||t(e),s=e.valueUnit||"unknown";return"unknown"===o?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===s?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"},e.isSizeVariable=function(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass},e.isValidNumber=function(e){return null!=e&&!isNaN(e)&&isFinite(e)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/visualVariables/support/visualVariableUtils":function(){define(["exports","../../../Color","../../../Graphic","../../../core/compilerUtils","../../../core/Logger","../../support/lengthUtils","./sizeVariableUtils"],function(e,t,r,o,s,i,n){"use strict";const a=()=>s.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),l=e=>a().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),c=()=>a().error("Use of arcade expressions requires an arcade context"),u=new r,p=Math.PI;function d(e,r,o){const s="visualVariables"in e?e.visualVariables?.find(e=>"color"===e.type):e;if(!s)return;if("esri.renderers.visualVariables.ColorVariable"!==s.declaredClass)return void l("ColorVariable");const i="number"==typeof r,a=i?null:r,u=a?.attributes;let p=i?r:null;const d=s.field,{ipData:h,hasExpression:y}=s.cache;let f=s.cache.compiledFunc;if(!d&&!y){const e=s.stops;return e&&e[0]&&e[0].color}if("number"!=typeof p)if(y){if(null==o?.arcade)return void c();const e={viewingMode:o.viewingMode,scale:o.scale,spatialReference:o.spatialReference},t=o.arcade.arcadeUtils,r=t.getViewInfo(e),i=t.createExecContext(a,r,o.timeZone);if(!f){const e=t.createSyntaxTree(s.valueExpression);f=t.createFunction(e),s.cache.compiledFunc=f}p=t.executeFunction(f,i)}else u&&(p=u[d]);const m=s.normalizationField,g=null!=u&&null!=m?parseFloat(u[m]):void 0;if(null!=p&&(!m||i||!isNaN(g)&&0!==g)){n.isValidNumber(g)&&!i&&(p/=g);const e=_(p,h);if(e){const r=e[0],i=e[1],n=r===i?s.stops[r].color:t.blendColors(s.stops[r].color,s.stops[i].color,e[2],null!=o?o.color:void 0);return new t(n)}}}function h(e,t,r){const o="visualVariables"in e?e.visualVariables?.find(e=>"opacity"===e.type):e;if(!o)return;if("esri.renderers.visualVariables.OpacityVariable"!==o.declaredClass)return void l("OpacityVariable");const s="number"==typeof t,i=s?null:t,a=i?.attributes;let u=s?t:null;const p=o.field,{ipData:d,hasExpression:h}=o.cache;let y=o.cache.compiledFunc;if(!p&&!h){const e=o.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof u)if(h){if(null==r?.arcade)return void c();const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,s=t.getViewInfo(e),n=t.createExecContext(i,s,r.timeZone);if(!y){const e=t.createSyntaxTree(o.valueExpression);y=t.createFunction(e),o.cache.compiledFunc=y}u=t.executeFunction(y,n)}else a&&(u=a[p]);const f=o.normalizationField,m=null!=a&&null!=f?parseFloat(a[f]):void 0;if(null!=u&&(!f||s||!isNaN(m)&&0!==m)){n.isValidNumber(m)&&!s&&(u/=m);const e=_(u,d);if(e){const t=e[0],r=e[1];if(t===r)return o.stops[t].opacity;{const s=o.stops[t].opacity;return s+(o.stops[r].opacity-s)*e[2]}}}}function y(e,t,r){const o="visualVariables"in e?e.visualVariables?.find(e=>"rotation"===e.type):e;if(!o)return;if("esri.renderers.visualVariables.RotationVariable"!==o.declaredClass)return void l("RotationVariable");const s=o.axis||"heading",i="heading"===s&&"arithmetic"===o.rotationType?90:0,n="heading"===s&&"arithmetic"===o.rotationType?-1:1,a="number"==typeof t?null:t,u=a?.attributes,p=o.field,{hasExpression:d}=o.cache;let h=o.cache.compiledFunc,y=null;if(!p&&!d)return y;if(d){if(null==r?.arcade)return void c();const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,s=t.getViewInfo(e),i=t.createExecContext(a,s,r.timeZone);if(!h){const e=t.createSyntaxTree(o.valueExpression);h=t.createFunction(e),o.cache.compiledFunc=h}y=t.executeFunction(h,i)}else u&&(y=u[p]);return y="number"!=typeof y||isNaN(y)?null:i+n*y,y}function f(e,t,r){const o="visualVariables"in e?e.visualVariables?.find(e=>"size"===e.type):e;if(!o)return;if("esri.renderers.visualVariables.SizeVariable"!==o.declaredClass)return void l("SizeVariable");const s=function(e,t,r){const o="number"==typeof t,s=o?null:t,i=s?.attributes;let a=o?t:null;const{isScaleDriven:l}=e.cache;let u=e.cache.compiledFunc;if(l){const t=null!=r?r.scale:void 0,o=null!=r?r.view:void 0;a=null==t||"3d"===o?function(e){let t=null,r=null;const o=e.stops;return o?(t=o[0].value,r=o[o.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}(e):t}else if(!o)switch(e.inputValueType){case"expression":{if(null==r?.arcade)return void c();const t={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},o=r.arcade.arcadeUtils,i=o.getViewInfo(t),n=o.createExecContext(s,i,r.timeZone);if(!u){const t=o.createSyntaxTree(e.valueExpression);u=o.createFunction(t),e.cache.compiledFunc=u}a=o.executeFunction(u,n);break}case"field":i&&(a=i[e.field]);break;case"unknown":a=null}if(!n.isValidNumber(a))return null;if(o||!e.normalizationField)return a;const p=i?parseFloat(i[e.normalizationField]):null;return n.isValidNumber(p)&&0!==p?a/p:null}(o,t,r),i=b(s,o,t,r,o.cache.ipData);return null==i||isNaN(i)?void 0:i}function m(e,t,r){return null==e?null:n.isSizeVariable(e)?f(e,t,r):n.isValidNumber(e)?e:null}function g(e,t,r){return n.isValidNumber(r)&&e>r?r:n.isValidNumber(t)&&e<t?t:e}function b(e,t,r,o,s){switch(t.transformationType){case"additive":return function(e,t,r,o){const s=m(t.minSize,r,o)||t.minDataValue;return null==e&&null==s?null:(e??0)+(s??0)}(e,t,r,o);case"constant":return function(e,t,r){const o=e.stops;let s=o?.length&&o[0].size;return null==s&&(s=e.minSize),m(s,t,r)}(t,r,o);case"clamped-linear":return function(e,t,r,o){const s=m(t.minSize,r,o);if(null==e)return s;const{minDataValue:i,maxDataValue:n}=t;if(null==i||null==n)return null;const a=(e-i)/(n-i),l=m(t.maxSize,r,o),c=null!=o?o.shape:void 0;if(e<=i)return s;if(e>=n)return l;if(null==s||null==l)return null;if("area"===t.scaleBy&&c){const e="circle"===c,t=e?p*(s/2)**2:s*s,r=t+a*((e?p*(l/2)**2:l*l)-t);return e?2*Math.sqrt(r/p):Math.sqrt(r)}return s+a*(l-s)}(e,t,r,o);case"proportional":return function(e,t,r,o){const s=m(t.minSize,r,o);if(null==e||null==s)return s;const i=null!=o?o.shape:void 0,{minDataValue:n}=t;if(null==n)return null;const a=e/n,l=m(t.maxSize,r,o);let c=null;return c="circle"===i?2*Math.sqrt(a*(s/2)**2):"square"===i||"diamond"===i||"image"===i?Math.sqrt(a*s**2):a*s,g(c,s,l)}(e,t,r,o);case"stops":return function(e,t,r,o,s){if(null==e)return null;const[i,n,a]=_(e,s);if(i===n)return m(t.stops?.[i].size,r,o);{const e=m(t.stops?.[i].size,r,o),s=m(t.stops?.[n].size,r,o);return null==e||null==s?null:e+(s-e)*a}}(e,t,r,o,s);case"real-world-size":return function(e,t,r,o){const s=(o?.resolution??1)*i.meterIn[t.valueUnit],n=m(t.minSize,r,o),a=m(t.maxSize,r,o),{valueRepresentation:l}=t;if(null==e)return n;let c=null;return c="area"===l?2*Math.sqrt(e/p)/s:"radius"===l||"distance"===l?2*e/s:e/s,g(c,n,a)}(e,t,r,o);case"identity":return e;case"unknown":return null}}function _(e,t){if(!t)return;let r=0,o=t.length-1;return t.some((t,s)=>e<t?(o=s,!0):(r=s,!1)),[r,o,(e-t[r])/(t[o]-t[r])]}e.getAllSizes=function(e,t,r){const s=["proportional","proportional","proportional"];for(const i of e){const e=i.useSymbolValue?"symbol-value":f(i,t,r)??"proportional";switch(i.axis){case"width":s[0]=e;break;case"depth":s[1]=e;break;case"height":s[2]=e;break;case"width-and-depth":s[0]=e,s[1]=e;break;case"all":case void 0:case null:s[0]=e,s[1]=e,s[2]=e;break;default:o.neverReached(i.axis)}}return s},e.getColor=d,e.getOpacity=h,e.getRotationAngle=y,e.getSize=f,e.getSizeForValue=b,e.getSizeFromNumberOrVariable=m,e.getSizeRangeAtScale=function(e,t,r){const{isScaleDriven:o}=e.cache;if(!(o&&"3d"===r||t))return null;const s={scale:t,view:r};let i=m(e.minSize,u,s),n=m(e.maxSize,u,s);if(null!=i||null!=n){if(i>n){const e=n;n=i,i=e}return{minSize:i,maxSize:n}}},e.getVisualVariableValues=function(e,t,r){if(!e.visualVariables)return;const o=[],s=[],i=[],n=[],a=[];for(const t of e.visualVariables)switch(t.type){case"color":s.push(t);break;case"opacity":i.push(t);break;case"rotation":a.push(t);break;case"size":n.push(t)}return s.forEach(e=>{const s=d(e,t,r);o.push({variable:e,value:s})}),i.forEach(e=>{const s=h(e,t,r);o.push({variable:e,value:s})}),a.forEach(e=>{const s=y(e,t,r);o.push({variable:e,value:s})}),n.forEach(e=>{const s=f(e,t,r);o.push({variable:e,value:s})}),o},e.viewScaleRE=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/visualVariables/VisualVariableFactory":function(){define(["exports","../../chunks/tslib.es6","../../core/Accessor","../../core/jsonMap","../../core/Logger","../../core/Warning","../../core/accessorSupport/decorators/property","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./ColorVariable","./OpacityVariable","./RotationVariable","./SizeVariable"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h){"use strict";const y={color:u,size:h,opacity:p,rotation:d},f=new o.JSONMap({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),m=/^\[([^\]]+)\]$/i;return e.default=class extends r{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e?.filter(e=>!!e),e?.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some(e=>!!e.target)&&e.sort((e,t)=>{let r=null;return r=e.target===t.target?0:e.target?1:-1,r});for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,r){const{rotationExpression:o,rotationType:n}=t,a=o?.match(m),l=a?.[1];if(l&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:n,field:l})),e)return e.map(e=>{const t=f.read(e.type),o=y[t];o||(s.getLogger(this).warn(`Unknown variable type: ${t}`),r?.messages&&r.messages.push(new i("visual-variable:unsupported",`visualVariable of type '${t}' is not supported`,{definition:e,context:r})));const n=new o;return n.read(e,r),n})}writeVariables(e,t){const r=[];for(const o of e){const e=o.toJSON(t);e&&r.push(e)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}},t.__decorate([n.property()],e.default.prototype,"visualVariables",null),e.default=t.__decorate([c.subclass("esri.renderers.visualVariables.VisualVariableFactory")],e.default),e.default})},"esri/renderers/support/commonProperties":function(){define(["exports","../../core/object","../../core/accessorSupport/extensions/serializableProperty/reader","../../symbols/PolygonSymbol3D","../../symbols/Symbol","../../symbols/support/jsonUtils","../../symbols/support/typeUtils"],function(e,t,r,o,s,i,n){"use strict";const a={types:n.symbolTypesRenderer,json:{write:{writer:i.write},origins:{"web-scene":{types:n.symbolTypesRenderer3D,write:{writer:i.write},read:{reader:r.createTypeReader({types:n.symbolTypesRenderer3D})}}}}},l=t.deepMerge({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},a),c={types:{base:s,key:"type",typeMap:{"simple-fill":n.symbolTypes.typeMap["simple-fill"],"picture-fill":n.symbolTypes.typeMap["picture-fill"],"polygon-3d":n.symbolTypes.typeMap["polygon-3d"],cim:n.symbolTypes.typeMap.cim}},json:{write:{writer:i.write},origins:{"web-scene":{type:o,write:{writer:i.write}}}}},u={cast:e=>null==e||"string"==typeof e||"number"==typeof e?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e?.toString()}}}};e.rendererBackgroundFillSymbolProperty=c,e.rendererSymbolProperty=a,e.requiredRendererSymbolProperty=l,e.uniqueValueProperty=u,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/jsonUtils":function(){define(["exports","../../core/Error","../../core/object","../../layers/support/layerUtils","../WebStyleSymbol","./symbolConversion","./typeUtils"],function(e,t,r,o,s,i,n){"use strict";function a(e){return n.isSymbol3D(e)||e instanceof s}function l(e,r,s){if(null==e)return null;const{context:n,isLabelSymbol:l}=s,c=n?.origin,u=n?.messages;if("web-scene"===c&&!a(e)){const o=i.to3D(e,{retainCIM:!0,hasLabelingContext:l});return null!=o.symbol?o.symbol.write(r,n):(u?.push(new t("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:n,error:o.error})),null)}return o.isSceneServiceLayer(n?.layer)&&function(e){return"polygon-3d"===e?.type||"line-3d"===e?.type}(e)?(u?.push(new t("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported on layers of type '${n?.layer?.declaredClass}'.`,{symbol:e,context:n})),null):("web-map"===c||"portal-item"===c&&!o.isSceneServiceLayer(n?.layer))&&a(e)?(u?.push(new t("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:n})),null):e.write(r,n)}e.fromJSON=function(e,t){return n.readSymbol(e,null,t)},e.write=function(e,t,o,s){const i=l(e,{},{context:s,isLabelSymbol:!1});null!=i&&r.setDeepValue(o,i,t)},e.writeLabelSymbol=function(e,t,r,o){const s=l(e,{},{context:o,isLabelSymbol:!0});null!=s&&(t[r]=s)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/symbolConversion":function(){define(["exports","../../core/Error","../LabelSymbol3D","../LineSymbol3D","../MeshSymbol3D","../PictureMarkerSymbol","../PointSymbol3D","../PolygonSymbol3D","../SimpleFillSymbol","../SimpleLineSymbol","../SimpleMarkerSymbol","../TextSymbol","../WebStyleSymbol","./defaults3D","./typeUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y){"use strict";const f="#useCIMFallbackSymbology()",m={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};e.defaultTo3DOptions=m,e.to3D=function(e,g=m){if(!e)return{symbol:null};const{retainId:b=m.retainId,ignoreDrivers:_=m.ignoreDrivers,hasLabelingContext:S=m.hasLabelingContext,retainCIM:v=m.retainCIM,cimFallbackEnabled:w=m.cimFallbackEnabled}=g;let x=null;if(y.isSymbol3D(e))x=e.clone();else if("web-style"===e.type)x=e.clone();else if("cim"===e.type){const r=e.data?.symbol?.type;switch(r){case"CIMPointSymbol":x=v?e.clone():n.fromCIMSymbol(e);break;case"CIMLineSymbol":w&&(x=h.defaultRendererPolylineSymbol3D.clone(),g?.logWarning?.(f,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":w&&(x=h.defaultRendererPolygonSymbol3D.clone(),g?.logWarning?.(f,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!x)return{error:new t("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${r||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof c)x=o.fromSimpleLineSymbol(e);else if(e instanceof u)x=n.fromSimpleMarkerSymbol(e);else if(e instanceof i)x=n.fromPictureMarkerSymbol(e);else if(e instanceof l)x=g.geometryType&&"mesh"===g.geometryType?s.fromSimpleFillSymbol(e):a.fromSimpleFillSymbol(e);else{if(!(e instanceof p))return{error:new t("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};x=S?r.fromTextSymbol(e):n.fromTextSymbol(e)}return b&&x&&"cim"!==x.type&&(x.id=e.id),!_||"cim"===x.type||x instanceof d||x.symbolLayers.forEach(e=>e.ignoreDrivers=!0),{symbol:x}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/defaults3D":function(){define(["exports","../../Color","../../core/Collection","../../core/has","../../core/screenUtils","../FillSymbol3DLayer","../LineSymbol3D","../LineSymbol3DLayer","../MeshSymbol3D","../PointSymbol3D","../PolygonSymbol3D","../edges/SolidEdges3D","./defaults","./defaultsJSON"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h){"use strict";const y=c.fromSimpleMarkerSymbol(d.defaultPointSymbol2D),f=n.fromSimpleLineSymbol(d.defaultPolylineSymbol2D),m=u.fromSimpleFillSymbol(d.defaultPolygonSymbol2D),g=new l({symbolLayers:new r([new i({material:{color:h.defaultColor},edges:new p({size:s.px2pt(1),color:new t(h.defaultOutlineColor)})})])}),b=new n({symbolLayers:new r([new a({material:{color:new t([0,0,0])},size:s.px2pt(1)})])}),_=new u({symbolLayers:new r([new i({outline:{color:new t([0,0,0]),size:s.px2pt(1)}})])});e.defaultRendererPolygonSymbol3D=_,e.defaultRendererPolylineSymbol3D=b,e.getDefaultSymbol3D=function(e){if(null==e)return null;switch(e.type){case"mesh":return g;case"point":case"multipoint":return y;case"polyline":return f;case"polygon":case"extent":return m}return null},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/defaults":function(){define(["exports","../../core/has","../SimpleFillSymbol","../SimpleLineSymbol","../SimpleMarkerSymbol","../TextSymbol","./defaultsJSON"],function(e,t,r,o,s,i,n){"use strict";const a=s.fromJSON(n.defaultPointSymbolJSON),l=o.fromJSON(n.defaultPolylineSymbolJSON),c=r.fromJSON(n.defaultPolygonSymbolJSON),u=i.fromJSON(n.defaultTextSymbolJSON),p=s.fromJSON(n.errorPointSymbolJSON),d=o.fromJSON(n.errorPolylineSymbolJSON),h=r.fromJSON(n.errorPolygonSymbolJSON);e.defaultPointSymbol2D=a,e.defaultPolygonSymbol2D=c,e.defaultPolylineSymbol2D=l,e.defaultTextSymbol2D=u,e.errorPointSymbol2D=p,e.errorPolygonSymbol2D=h,e.errorPolylineSymbol2D=d,e.getDefaultSymbol2D=function(e){if(null==e)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return a;case"polyline":return l;case"polygon":case"extent":return c}return null},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(e){"use strict";const t=[252,146,31,255],r={type:"esriSMS",style:"esriSMSCircle",size:6,color:t,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o={type:"esriSLS",style:"esriSLSSolid",width:.75,color:t};e.defaultColor=t,e.defaultOutlineColor=[153,153,153,255],e.defaultPointSymbolJSON=r,e.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},e.defaultPolylineSymbolJSON=o,e.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},e.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},e.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},e.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/UniqueValueRenderer":function(){define(["exports","../chunks/tslib.es6","../core/Error","../core/lang","../core/Logger","../core/object","../core/reactiveUtils","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/cast","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","../core/accessorSupport/diffUtils","../core/accessorSupport/ensureType","../layers/support/fieldUtils","../portal/Portal","./Renderer","./mixins/VisualVariablesMixin","./support/commonProperties","./support/RendererLegendOptions","./support/UniqueValue","./support/UniqueValueClass","./support/UniqueValueGroup","./support/UniqueValueInfo","../support/loadArcade","../chunks/persistableUrlUtils","../symbols/WebStyleSymbol","../symbols/support/styleUtils","../symbols/support/typeUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b,_,S,v,w,x,T,M,I,O,P,k){"use strict";var C;const L="uvInfos-watcher",E="uvGroups-watcher",A=y.ensureType(T);function F(e){return null!=e&&""!==e&&("string"!=typeof e||""!==e.trim()&&"<null>"!==e.toLowerCase())||(e=null),e+""}return e.default=C=class extends(b.VisualVariablesMixin(g)){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,t){if(!e&&!t)return;if(!e||!t)return{type:"complete",oldValue:e,newValue:t};let r=!1;const o={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<t.length;s++){const i=e.find(e=>e.value===t[s].value);i?h.diff(i,t[s])?(o.changed.push({type:"complete",oldValue:i,newValue:t[s]}),r=!0):o.unchanged.push({oldValue:i,newValue:t[s]}):(o.added.push(t[s]),r=!0)}for(let s=0;s<e.length;s++)t.find(t=>t.value===e[s].value)||(o.removed.push(e[s]),r=!0);return r?o:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return null==e||"function"==typeof e?e:y.ensureString(e)}writeField(e,t,o,i){"string"==typeof e?t[o]=e:i?.messages?i.messages.push(new r("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):s.getLogger(this).error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,r){return r.portal||m.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const e=I.fromJSON(t.styleUrl,r);return Object.freeze({styleUrl:e})}}writeStyleOrigin(e,t,r,o){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=I.toJSON(e.styleUrl,o))}set uniqueValueGroups(e){this.styleOrigin?s.getLogger(this).error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?s.getLogger(this).error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void s.getLogger(this).error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r="object"==typeof e?A(e):new T({value:e,symbol:k.ensureType(t)}),this.uniqueValueInfos?.push(r),this._valueInfoMap[F(r.value)]=r,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void s.getLogger(this).error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let r=0;r<t.length;r++){const o=t[r];if(String(o.value)===String(e)){delete this._valueInfoMap[F(e)],t.splice(r,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let r=t;return this.valueExpression&&null==t?.arcade&&(r={...r,arcade:await M.loadArcade()}),this._getUniqueValueInfo(e,r)}getSymbol(e,t){if(this.valueExpression&&null==t?.arcade)return void s.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this._getUniqueValueInfo(e,t);return r?.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&null==r?.arcade){const e=await M.loadArcade(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),r={...r,arcade:e}}const o=this._getUniqueValueInfo(e,r);return o?.symbol||this.defaultSymbol}get symbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables?.reduce((e,t)=>e+t.getAttributeHash(),"")??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=this.uniqueValueInfos?.reduce((e,t)=>e+t.getMeshHash(),"");return`${e}.${t}.${r}.${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}.${this.valueExpression}`}clone(){const e=new C({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:o.clone(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:o.clone(this.visualVariables),legendOptions:o.clone(this.legendOptions),authoringInfo:o.clone(this.authoringInfo),backgroundFillSymbol:o.clone(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=o.clone(this.uniqueValueInfos),r=o.clone(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(o.clone(this.styleOrigin))),Object.freeze(t),Object.freeze(r)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",r),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.symbols.map(r=>r.collectRequiredFields(e,t)),f.collectArcadeFieldNames(e,t,this.valueExpression)];f.collectField(e,t,this.field),f.collectField(e,t,this.field2),f.collectField(e,t,this.field3),await Promise.all(r)}populateFromStyle(){return P.fetchStyle(this.styleOrigin,{portal:this.portal}).then(e=>{const t=[];return this._valueInfoMap={},e?.data&&Array.isArray(e.data.items)&&e.data.items.forEach(r=>{const o=new O({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=o,this._isDefaultSymbolDerived=!0);const s=new T({value:r.name,symbol:o});t.push(s),this._valueInfoMap[F(r.name)]=s}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&this.uniqueValueInfos?.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",",")}_updateUniqueValues(){null!=this._isInfosSource&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[F(t.value)]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(L);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const r of e)t.push(n.watch(()=>({symbol:r.symbol,value:r.value,label:r.label,description:r.description}),(e,t)=>{e!==t&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,L)}}_watchUniqueValueGroups(){this.removeHandles(E);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const r of e){t.push(n.watch(()=>({classes:r.classes}),(e,t)=>{e!==t&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const e of r.classes??[])t.push(n.watch(()=>({symbol:e.symbol,values:e.values,label:e.label,description:e.description}),(e,t)=>{e!==t&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,E)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:r,field3:o,fieldDelimiter:s,uniqueValueGroups:i,valueExpression:n}=this;if(!t&&!n)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!t||!r);for(const t of i)for(const i of t.classes??[]){const{symbol:t,label:n,values:l,description:c}=i;for(const i of l??[]){const{value:l,value2:u,value3:p}=i,d=[l];r&&d.push(u),o&&d.push(p);const h=a?d.join(s||""):d[0]??void 0;e.push(new T({symbol:t,label:n,value:h,description:c}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:r,valueExpression:o,fieldDelimiter:s,uniqueValueInfos:i}=this;if(!t&&!o||!i.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const n=!(!t||!r),a=i.map(e=>{const{symbol:t,label:r,value:o,description:i}=e,[a,l,c]=n?o?.toString()?.split(s||"")||[]:[o];return new w({symbol:t,label:r,description:i,values:[new v({value:a,value2:l,value3:c})]})}),l=[new x({classes:a})];e&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:o,spatialReference:s,arcade:i,timeZone:n}=t??{};let a=this._cache.compiledFunc;const l=i.arcadeUtils;if(!a){const e=l.createSyntaxTree(this.valueExpression);a=l.createFunction(e),this._cache.compiledFunc=a}const c=l.executeFunction(a,l.createExecContext(e,l.getViewInfo({viewingMode:r,scale:o,spatialReference:s}),n));return this._valueInfoMap[F(c)]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let o;if(this.field2){const e=this.field2,s=this.field3,i=[];t&&i.push(r[t]),e&&i.push(r[e]),s&&i.push(r[s]),o=i.join(this.fieldDelimiter||"")}else t&&(o=r[t]);return this._valueInfoMap[F(o)]}static fromPortalStyle(e,t){const r=new C(t?.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",t?.portal||m.getDefault());const o=r.populateFromStyle();return o.catch(t=>{s.getLogger(this.prototype).error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",t)}),o}static fromStyleUrl(e,t){const r=new C(t?.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const o=r.populateFromStyle();return o.catch(t=>{s.getLogger(this.prototype).error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",t)}),o}},t.__decorate([a.property({readOnly:!0})],e.default.prototype,"_cache",null),t.__decorate([c.enumeration({uniqueValue:"unique-value"})],e.default.prototype,"type",void 0),t.__decorate([a.property(_.rendererBackgroundFillSymbolProperty)],e.default.prototype,"backgroundFillSymbol",void 0),t.__decorate([a.property({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],e.default.prototype,"field",null),t.__decorate([l.cast("field")],e.default.prototype,"castField",null),t.__decorate([d.writer("field")],e.default.prototype,"writeField",null),t.__decorate([a.property({type:String,value:null,json:{write:!0}})],e.default.prototype,"field2",null),t.__decorate([a.property({type:String,value:null,json:{write:!0}})],e.default.prototype,"field3",null),t.__decorate([a.property({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],e.default.prototype,"orderByClassesEnabled",void 0),t.__decorate([a.property({type:String,value:null,json:{write:!0}})],e.default.prototype,"valueExpression",null),t.__decorate([a.property({type:String,json:{write:!0}})],e.default.prototype,"valueExpressionTitle",void 0),t.__decorate([a.property({type:S,json:{write:!0}})],e.default.prototype,"legendOptions",void 0),t.__decorate([a.property({type:String,json:{write:!0}})],e.default.prototype,"defaultLabel",void 0),t.__decorate([a.property(i.deepMerge({..._.rendererSymbolProperty},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],e.default.prototype,"defaultSymbol",null),t.__decorate([a.property({type:String,value:null,json:{write:!0}})],e.default.prototype,"fieldDelimiter",null),t.__decorate([a.property({type:m,readOnly:!0})],e.default.prototype,"portal",void 0),t.__decorate([u.reader("portal",["styleName"])],e.default.prototype,"readPortal",null),t.__decorate([a.property({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],e.default.prototype,"styleOrigin",void 0),t.__decorate([u.reader("styleOrigin",["styleName","styleUrl"])],e.default.prototype,"readStyleOrigin",null),t.__decorate([d.writer("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],e.default.prototype,"writeStyleOrigin",null),t.__decorate([a.property({type:[x],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,r)=>{const o=t.uniqueValueGroups||function(e){const{field1:t,field2:r,field3:o,fieldDelimiter:s,uniqueValueInfos:i,valueExpression:n}=e,a=!(!t||!r);return[{classes:(i??[]).map(e=>{const{symbol:i,label:l,value:c,description:u}=e,[p,d,h]=a?c?.toString()?.split(s||"")||[]:[c],y=[];return(t||n)&&y.push(p),r&&y.push(d),o&&y.push(h),{symbol:i,label:l,values:[y],description:u}})}]}(t);return o.map(e=>x.fromJSON(e,r))}},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],e.default.prototype,"uniqueValueGroups",null),t.__decorate([a.property({type:[T],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],e.default.prototype,"uniqueValueInfos",null),e.default=C=t.__decorate([p.subclass("esri.renderers.UniqueValueRenderer")],e.default),e.default})},"esri/core/accessorSupport/diffUtils":function(){define(["exports","../Accessor","../Collection","./utils"],function(e,t,r,o){"use strict";const s=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function i(e){return e instanceof t}function n(e){return e instanceof r?Object.keys(e.items):i(e)?o.getProperties(e).keys():e?Object.keys(e):[]}function a(e,t){return e instanceof r?e.items[t]:e[t]}function l(e){return e?e.declaredClass:null}function c(e,t){const r=e.diff;if(r&&"function"==typeof r)return r(e,t);const o=n(e),u=n(t);if(0===o.length&&0===u.length)return;if(!o.length||!u.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const p=u.filter(e=>!o.includes(e)),d=o.filter(e=>!u.includes(e)),h=o.filter(r=>u.includes(r)&&a(e,r)!==a(t,r)).concat(p,d).sort(),y=l(e);if(y&&s.has(y)&&h.length)return{type:"complete",oldValue:e,newValue:t};let f;const m=i(e)&&i(t);for(const o of h){const s=a(e,o),i=a(t,o);let n;if((m||"function"!=typeof s&&"function"!=typeof i)&&s!==i&&(null!=s||null!=i)){if(r&&r[o]&&"function"==typeof r[o])n=r[o]?.(s,i);else if(s instanceof Date&&i instanceof Date){if(s.getTime()===i.getTime())continue;n={type:"complete",oldValue:s,newValue:i}}else n="object"==typeof s&&"object"==typeof i&&l(s)===l(i)?c(s,i):{type:"complete",oldValue:s,newValue:i};null!=n&&(null!=f?f.diff[o]=n:f={type:"partial",diff:{[o]:n}})}}return f}function u(e,t){if(null==e)return!1;const r=t.split(".");let o=e;for(const e of r){if("complete"===o.type)return!0;if("partial"!==o.type)return!1;{const t=o.diff[e];if(!t)return!1;o=t}}return!0}e.diff=function(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&l(e)!==l(t)?{type:"complete",oldValue:e,newValue:t}:c(e,t)},e.hasDiff=u,e.hasRootDiff=function(e,t){return u(e,t)},e.hasRootDiffOnly=function(e,t){if(!e)return!1;if("partial"===e.type){const r=Object.keys(e.diff);return 1===r.length&&r[0]===t}return!1},e.isEmpty=function e(t){if(null==t)return!0;switch(t.type){case"complete":return!1;case"collection":{const r=t;for(const t of r.added)if(!e(t))return!1;for(const t of r.removed)if(!e(t))return!1;for(const t of r.changed)if(!e(t))return!1;return!0}case"partial":for(const r in t.diff)if(!e(t.diff[r]))return!1;return!0}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/RendererLegendOptions":function(){define(["../../chunks/tslib.es6","../../core/Clonable","../../core/jsonMap","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l,c){"use strict";var u;const p=r.strict()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let d=u=class extends(t.ClonableMixin(o.JSONSupport)){static from(e){return i.ensureClass(u,e)}constructor(e){super(e),this.title=null,this.order=null}};return e.__decorate([s.property({type:String,json:{write:!0}})],d.prototype,"title",void 0),e.__decorate([l.enumeration(p)],d.prototype,"order",void 0),d=u=e.__decorate([c.subclass("esri.renderers.support.RendererLegendOptions")],d),d})},"esri/renderers/support/UniqueValue":function(){define(["exports","../../chunks/tslib.es6","../../core/Clonable","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./commonProperties"],function(e,t,r,o,s,i,n,a,l,c){"use strict";return e.default=class extends(r.ClonableMixin(o.JSONSupport)){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}},t.__decorate([s.property(c.uniqueValueProperty)],e.default.prototype,"value",void 0),t.__decorate([s.property(c.uniqueValueProperty)],e.default.prototype,"value2",void 0),t.__decorate([s.property(c.uniqueValueProperty)],e.default.prototype,"value3",void 0),e.default=t.__decorate([l.subclass("esri.renderers.support.UniqueValue")],e.default),e.default})},"esri/renderers/support/UniqueValueClass":function(){define(["exports","../../chunks/tslib.es6","../../core/arrayUtils","../../core/Clonable","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/cast","../../core/has","../../core/accessorSupport/decorators/subclass","./commonProperties","./UniqueValue"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";return e.default=class extends(o.ClonableMixin(s.JSONSupport)){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(null==e)return null;const t=typeof(e=Array.isArray(e)?e:[e])[0];return"string"===t||"number"===t?e.map(e=>new u({value:e})):"object"===t?e[0]instanceof u?e:e.map(e=>new u(e)):null}},t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"description",void 0),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"label",void 0),t.__decorate([i.property(c.rendererSymbolProperty)],e.default.prototype,"symbol",void 0),t.__decorate([i.property({type:[u],json:{type:[[String]],read:{reader:e=>e?e.map(e=>new u({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(e,t)=>{const o=[];for(const t of e){const e=[t.value,t.value2,t.value3].filter(r.isSome).map(e=>e.toString());o.push(e)}t.values=o}}}})],e.default.prototype,"values",void 0),t.__decorate([n.cast("values")],e.default.prototype,"castValues",null),e.default=t.__decorate([l.subclass("esri.renderers.support.UniqueValueClass")],e.default),e.default})},"esri/renderers/support/UniqueValueGroup":function(){define(["exports","../../chunks/tslib.es6","../../core/Clonable","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./UniqueValueClass"],function(e,t,r,o,s,i,n,a,l,c){"use strict";return e.default=class extends(r.ClonableMixin(o.JSONSupport)){constructor(e){super(e),this.heading=null,this.classes=null}},t.__decorate([s.property({type:String,json:{write:!0}})],e.default.prototype,"heading",void 0),t.__decorate([s.property({type:[c],json:{write:{isRequired:!0}}})],e.default.prototype,"classes",void 0),e.default=t.__decorate([l.subclass("esri.renderers.support.UniqueValueGroup")],e.default),e.default})},"esri/renderers/support/UniqueValueInfo":function(){define(["exports","../../chunks/tslib.es6","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./commonProperties"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;return e.default=c=class extends r.JSONSupport{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new c({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol?.toJSON());return`${this.value}.${e}`}},t.__decorate([o.property({type:String,json:{write:!0}})],e.default.prototype,"description",void 0),t.__decorate([o.property({type:String,json:{write:!0}})],e.default.prototype,"label",void 0),t.__decorate([o.property(l.requiredRendererSymbolProperty)],e.default.prototype,"symbol",void 0),t.__decorate([o.property(l.uniqueValueProperty)],e.default.prototype,"value",void 0),e.default=c=t.__decorate([a.subclass("esri.renderers.support.UniqueValueInfo")],e.default),e.default})},"esri/symbols/support/styleUtils":function(){define(["exports","../../request","../../core/Error","../../core/has","../../core/promiseUtils","../../core/urlUtils","../../portal/Portal","../../portal/PortalQueryParams","./styleCache"],function(e,t,r,o,s,i,n,a,l){"use strict";function c(e,t){if(!o("enable-feature:force-wosr"))return e.formatInfos?.find(e=>e.type===t)?.href}function u(e,r){const o={responseType:"json",query:{f:"json"},...r};return t(i.normalize(e),o)}const p="esri_en",d="Style";e.Style2DUrlTemplate="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json",e.fetchStyle=function(e,t,o){return null!=e?.styleUrl?async function(e,t){try{return{data:(await u(e,t)).data,baseUrl:i.removeFile(e),styleUrl:e}}catch(e){return s.throwIfAbortError(e),null}}(e.styleUrl,o):null!=e?.styleName?function(e,t,o){const s=null!=t.portal?t.portal:n.getDefault();let i;const c=`${s.url} - ${s.user?.username} - ${e}`,u=l.cachedStyles.get(c);if(u)return u;const h=function(e,t,o){return t.load(o).then(()=>{const r=new a({disableExtraQuery:!0,query:`owner:${p} AND type:${d} AND typekeywords:"${e}"`});return t.queryItems(r,o)}).then(({results:t})=>{let s=null;const i=e.toLowerCase();if(t&&Array.isArray(t))for(const e of t){const t=e.typeKeywords?.some(e=>e.toLowerCase()===i);if(t&&e.type===d&&e.owner===p){s=e;break}}if(!s)throw new r("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return s.load(o)})}(e,s,o).then(e=>(i=e,e.fetchData())).then(t=>({data:t,baseUrl:i.itemUrl??"",styleName:e}));return l.cachedStyles.set(c,h),h}(e.styleName,t,o):Promise.reject(new r("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))},e.makeCIMSymbolRef=function(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}},e.requestJSON=u,e.symbolUrlFromStyleItem=function(e,t){for(const r of t)switch(r){case"cim":if(e.cimRef)return{format:r,url:encodeURI(e.cimRef)};break;case"web-gltf-basisu":{const t=c(e,"gltf_basisu");if(t)return{format:r,url:t};break}case"web-gltf":{const t=c(e,"gltf");if(t)return{format:r,url:t};break}case"web":{const t=c(e,"gltf");if(t)return{format:"web-gltf",url:t};if(e.webRef)return{format:r,url:encodeURI(e.webRef)};break}}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/styleCache":function(){define(["exports"],function(e){"use strict";const t=new Map;e.cachedStyles=t,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/AttachmentQuery":function(){define(["exports","../../chunks/tslib.es6","../../core/JSONSupport","../../core/lang","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer"],function(e,t,r,o,s,i,n,a){"use strict";var l;return e.default=class extends r.JSONSupport{static{l=this}constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new l(o.clone({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}},t.__decorate([s.property({type:[String],json:{write:!0}})],e.default.prototype,"attachmentTypes",void 0),t.__decorate([s.property({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],e.default.prototype,"attachmentsWhere",void 0),t.__decorate([s.property({type:Boolean,json:{write:!0}})],e.default.prototype,"cacheHint",void 0),t.__decorate([s.property({type:[String],json:{write:!0}})],e.default.prototype,"keywords",void 0),t.__decorate([s.property({type:[String],json:{write:!0}})],e.default.prototype,"globalIds",void 0),t.__decorate([s.property({json:{write:!0}})],e.default.prototype,"name",void 0),t.__decorate([s.property({type:Number,json:{read:{source:"resultRecordCount"}}})],e.default.prototype,"num",void 0),t.__decorate([s.property({type:[Number],json:{write:!0}})],e.default.prototype,"objectIds",void 0),t.__decorate([s.property({type:[String],json:{write:!0}})],e.default.prototype,"orderByFields",void 0),t.__decorate([s.property({type:Boolean,json:{default:!1,write:!0}})],e.default.prototype,"returnMetadata",void 0),t.__decorate([s.property({type:[Number],json:{write:!0}})],e.default.prototype,"size",void 0),t.__decorate([s.property({type:Number,json:{read:{source:"resultOffset"}}})],e.default.prototype,"start",void 0),t.__decorate([a.writer("start"),a.writer("num")],e.default.prototype,"writeStart",null),t.__decorate([s.property({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],e.default.prototype,"where",void 0),e.default=l=t.__decorate([n.subclass("esri.rest.support.AttachmentQuery")],e.default),e.default.from=i.ensureType(e.default),e.default})},"esri/rest/support/NormalizationBinParametersMixin":function(){define(["exports","../../chunks/tslib.es6","../../core/jsonMap","../../core/Logger","../../core/accessorSupport/decorators/property","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";const c=r.strict()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),u="percent-of-total",p="field";e.NormalizationBinParametersMixin=e=>{const r=e;let i=class extends r{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=null!=this.normalizationTotal;return t||r?(e=t&&p||r&&u||null,t&&r&&o.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==p&&e!==u||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}};return t.__decorate([s.property({type:String,json:{name:"parameters.normalizationField",write:!0}})],i.prototype,"normalizationField",void 0),t.__decorate([s.property({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],i.prototype,"normalizationMaxValue",void 0),t.__decorate([s.property({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],i.prototype,"normalizationMinValue",void 0),t.__decorate([s.property({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],i.prototype,"normalizationTotal",void 0),t.__decorate([a.enumeration(c,{name:"parameters.normalizationType"})],i.prototype,"normalizationType",null),i=t.__decorate([l.subclass("esri.rest.support.NormalizationBinParametersMixin")],i),i},e.normalizationTypeJsonMap=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/RelationshipQuery":function(){define(["exports","../../chunks/tslib.es6","../../core/JSONSupport","../../core/lang","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","../../geometry/SpatialReference","../../layers/support/source/DataLayerSource"],function(e,t,r,o,s,i,n,a,l,c){"use strict";var u;return e.default=class extends r.JSONSupport{static{u=this}constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&null==this.where&&(t.definitionExpression="1=1")}clone(){return new u(o.clone({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}},t.__decorate([s.property({type:Boolean,json:{write:!0}})],e.default.prototype,"cacheHint",void 0),t.__decorate([s.property({type:c.DataLayerSource,json:{write:!0}})],e.default.prototype,"dynamicDataSource",void 0),t.__decorate([s.property({type:String,json:{write:!0}})],e.default.prototype,"gdbVersion",void 0),t.__decorate([s.property({type:Number,json:{write:!0}})],e.default.prototype,"geometryPrecision",void 0),t.__decorate([s.property({type:Date})],e.default.prototype,"historicMoment",void 0),t.__decorate([a.writer("historicMoment")],e.default.prototype,"_writeHistoricMoment",null),t.__decorate([s.property({type:Number,json:{write:!0}})],e.default.prototype,"maxAllowableOffset",void 0),t.__decorate([s.property({json:{write:!0}})],e.default.prototype,"objectIds",void 0),t.__decorate([s.property({type:[String],json:{write:!0}})],e.default.prototype,"orderByFields",void 0),t.__decorate([s.property({type:[String],json:{write:!0}})],e.default.prototype,"outFields",void 0),t.__decorate([s.property({type:l,json:{read:{source:"outSR"},write:{target:"outSR"}}})],e.default.prototype,"outSpatialReference",void 0),t.__decorate([s.property({json:{write:!0}})],e.default.prototype,"relationshipId",void 0),t.__decorate([s.property({type:Number,json:{read:{source:"resultOffset"}}})],e.default.prototype,"start",void 0),t.__decorate([a.writer("start"),a.writer("num")],e.default.prototype,"writeStart",null),t.__decorate([s.property({type:Number,json:{read:{source:"resultRecordCount"}}})],e.default.prototype,"num",void 0),t.__decorate([s.property({json:{write:!0}})],e.default.prototype,"returnGeometry",void 0),t.__decorate([s.property({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],e.default.prototype,"returnM",void 0),t.__decorate([s.property({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],e.default.prototype,"returnZ",void 0),t.__decorate([s.property({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],e.default.prototype,"where",void 0),e.default=u=t.__decorate([n.subclass("esri.rest.support.RelationshipQuery")],e.default),e.default.from=i.ensureType(e.default),e.default})},"esri/layers/support/GeometryFieldsInfo":function(){define(["exports","../../chunks/tslib.es6","../../core/Clonable","../../core/JSONSupport","../../core/unitUtils","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l,c){"use strict";return e.default=class extends(r.ClonableMixin(o.JSONSupport)){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}},t.__decorate([i.property({type:String,json:{read:{source:"shapeAreaFieldName"}}})],e.default.prototype,"shapeAreaField",void 0),t.__decorate([i.property({type:String,json:{read:{source:"shapeLengthFieldName"}}})],e.default.prototype,"shapeLengthField",void 0),t.__decorate([i.property({type:String,json:{read:e=>s.areaUnitsJSONMap.read(e)||s.lengthUnitsJSONMap.read(e)}})],e.default.prototype,"units",void 0),e.default=t.__decorate([c.subclass("esri.layers.support.GeometryFieldsInfo")],e.default),e.default})},"esri/layers/support/LayerFloorInfo":function(){define(["exports","../../chunks/tslib.es6","../../core/Collection","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;return e.default=c=class extends o.JSONSupport{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new r}clone(){return new c({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}},t.__decorate([s.property({type:String,json:{write:{isRequired:!0}}})],e.default.prototype,"floorField",void 0),t.__decorate([s.property({json:{read:!1,write:!1}})],e.default.prototype,"viewAllMode",void 0),t.__decorate([s.property({json:{read:!1,write:!1}})],e.default.prototype,"viewAllLevelIds",void 0),e.default=c=t.__decorate([l.subclass("esri.layers.support.LayerFloorInfo")],e.default),e.default})},"esri/layers/support/multiLayerServiceUtils":function(){define(["exports","../../core/lang","../../core/Logger","../../core/urlUtils","./arcgisLayerUrl","./commonProperties"],function(e,t,r,o,s,i){"use strict";e.normalizeParsedUrlObject=function(e,t){const{separator:r}=t??{},s=o.urlToObject(e.url);return null!=s&&(null!=e.dynamicDataSource?s.path=o.join(s.path,"dynamicLayer"):null!=e.layerId&&(s.path=o.join(s.path,r??"",e.layerId.toString()))),s},e.urlProperty=function(e){const{nonStandardUrlAllowed:o=!1,separator:n}=e??{},a=t.clone(i.url),l=a.json?.write;return"object"==typeof l&&l&&(l.writer=function(e,t,r,o){s.writeUrlWithLayerId(this,e,n,t,o)}),{...a,set:function(e){if(null==e)return void this._set("url",e);const t=s.sanitizeUrlWithLayerId({layer:this,url:e,nonStandardUrlAllowed:o,logger:r.getLogger(this)});this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Relationship":function(){define(["exports","../../chunks/tslib.es6","../../core/Clonable","../../core/jsonMap","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l,c){"use strict";const u=new o.JSONMap({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),p=new o.JSONMap({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});return e.default=class extends(r.ClonableMixin(s.JSONSupport)){constructor(e){super(e),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}},t.__decorate([i.property({json:{read:u.read,write:u.write}})],e.default.prototype,"cardinality",void 0),t.__decorate([i.property({json:{name:"catalogID"}})],e.default.prototype,"catalogId",void 0),t.__decorate([i.property({json:{read:!0,write:!0}})],e.default.prototype,"composite",void 0),t.__decorate([i.property({json:{read:!0,write:!0}})],e.default.prototype,"id",void 0),t.__decorate([i.property({json:{read:!0,write:!0}})],e.default.prototype,"keyField",void 0),t.__decorate([i.property({json:{read:!0,write:!0}})],e.default.prototype,"keyFieldInRelationshipTable",void 0),t.__decorate([i.property({json:{read:!0,write:!0}})],e.default.prototype,"name",void 0),t.__decorate([i.property({json:{read:!0,write:!0}})],e.default.prototype,"relatedTableId",void 0),t.__decorate([i.property({json:{read:!0,write:!0}})],e.default.prototype,"relationshipTableId",void 0),t.__decorate([i.property({json:{read:p.read,write:p.write}})],e.default.prototype,"role",void 0),e.default=t.__decorate([c.subclass("esri.layers.support.Relationship")],e.default),e.default})},"esri/layers/support/serviceCapabilitiesUtils":function(){define(["exports","../../core/has","./arcgisLayerUrl","./infoFor3D","../../rest/support/jsonUtils"],function(e,t,r,o,s){"use strict";const i={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function n(e){const t=e?.supportedSpatialAggregationStatistics?.map(e=>e.toLowerCase());return{envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function a(e,t){const r=e?.supportedOperationsWithCacheHint?.map(e=>e.toLowerCase());return!!r?.includes(t.toLowerCase())}function l(e){const t=e?.supportedStatisticTypes?.map(e=>e.toLowerCase());return{count:!!t?.includes("count"),sum:!!t?.includes("sum"),min:!!t?.includes("min"),max:!!t?.includes("max"),avg:!!t?.includes("avg"),var:!!t?.includes("var"),stddev:!!t?.includes("stddev"),percentileContinuous:!!t?.includes("percentile_cont"),percentileDiscrete:!!t?.includes("percentile_disc"),envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function c(e){const t=e?.supportedNormalizationTypes?.map(e=>e.toLowerCase());return{field:!!t?.includes("field"),log:!!t?.includes("log"),naturalLog:!!t?.includes("naturallog"),percentOfTotal:!!t?.includes("percentoftotal"),squareRoot:!!t?.includes("squareroot")}}function u(e){return{supportsCacheHint:a(e.advancedQueryCapabilities,"queryAnalytics")}}function p(e){const t=e.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:a(e.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:s.readBoolean(e.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:s.readBoolean(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(e=>{const t=i[e.name];t&&(r[t]=!!e.isEnabled)}),r}function d(e){return{isVersioned:s.readBoolean(e,"isDataVersioned",!1),isBranchVersioned:s.readBoolean(e,"isDataBranchVersioned",!1),supportsAttachment:s.readBoolean(e,"hasAttachments",!1),supportsM:s.readBoolean(e,"hasM",!1),supportsZ:s.readBoolean(e,"hasZ",!1)}}function h(e){return{supportsAdvancedFieldProperties:s.readBoolean(e,"supportsFieldDescriptionProperty",!1)}}function y(e,t,o){const i=e?.toLowerCase().split(",").map(e=>e.trim())??[],n=o?r.parse(o):null,a=i.includes("MapServer"===n?.serverType?"data":"query"),l=i.includes("editing")&&!t.datesInUnknownTimezone&&!(!0===t.uniqueIdInfo?.OIDFieldContainsHashValue);let c=l&&i.includes("create"),u=l&&i.includes("delete"),p=l&&i.includes("update");const d=i.includes("changetracking"),h=t.advancedQueryCapabilities;return l&&!(c||u||p)&&(c=u=p=!0),{supportsCalculate:s.readBoolean(t,"supportsCalculate",!1),supportsTruncate:s.readBoolean(t,"supportsTruncate",!1),supportsValidateSql:s.readBoolean(t,"supportsValidateSql",!1),supportsAdd:c,supportsDelete:u,supportsEditing:l,supportsChangeTracking:d,supportsQuery:a,supportsQueryAnalytics:s.readBoolean(h,"supportsQueryAnalytic",!1),supportsQueryAttachments:s.readBoolean(h,"supportsQueryAttachments",!1),supportsQueryBins:s.readBoolean(h,"supportsQueryBins",!1)||!!t.queryBinsCapabilities,supportsQueryTopFeatures:s.readBoolean(h,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:s.readBoolean(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:p,supportsExceedsLimitStatistics:s.readBoolean(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:s.readBoolean(t,"supportsAsyncConvert3D",!1)}}function f(e,i){const l=e.advancedQueryCapabilities,c=e.ownershipBasedAccessControlForFeatures,u=e.archivingInfo,p=e.currentVersion,d=i?.includes("MapServer"),h=!d||p>=t("mapserver-pbf-version-support"),y=r.isHostedAgolService(i),f=new Set((e.supportedQueryFormats??"").split(",").map(e=>e.toLowerCase().trim()));return{maxRecordCount:s.readNumber(e,"maxRecordCount",void 0),maxRecordCountFactor:s.readNumber(e,"maxRecordCountFactor",void 0),maxUniqueIDCount:s.readNumber(e,"maxUniqueIDCount",void 0),standardMaxRecordCount:s.readNumber(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:n(l),supportsCacheHint:s.readBoolean(l,"supportsQueryWithCacheHint",!1)||a(l,"query"),supportsCentroid:s.readBoolean(l,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:y,supportsCurrentUser:s.readBoolean(l,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:s.readBoolean(l,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:s.readBoolean(l,"supportsDisjointSpatialRel",!1),supportsDistance:s.readBoolean(l,"supportsQueryWithDistance",!1),supportsDistinct:s.readBoolean(l,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:s.readBoolean(l,"supportsReturningQueryExtent",!1),supportsFormatPBF:h&&f.has("pbf"),supportsFullTextSearch:s.readBoolean(l,"supportsFullTextSearch",!1),supportsGeometryProperties:s.readBoolean(l,"supportsReturningGeometryProperties",!1),supportsHavingClause:s.readBoolean(l,"supportsHavingClause",!1),supportsHistoricMoment:s.readBoolean(u,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:s.readBoolean(l,"supportsMaxRecordCountFactor",!1),supportsOrderBy:s.readBoolean(l,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:s.readBoolean(l,"supportsPagination",!1),supportsPaginationOnAggregatedQueries:s.readBoolean(l,"supportsPaginationOnAggregatedQueries",!1),supportsPercentileStatistics:s.readBoolean(l,"supportsPercentileStatistics",!1),supportsQuantization:s.readBoolean(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:s.readBoolean(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:s.readBoolean(c,"allowAnonymousToQuery",!0),supportsQueryByOthers:s.readBoolean(c,"allowOthersToQuery",!0),supportsQueryGeometry:s.readBoolean(e,"supportsReturningQueryGeometry",!1),supportsResultType:s.readBoolean(l,"supportsQueryWithResultType",!1),supportsReturnMesh:!!o.getGltfQueryFormat(e.infoFor3D),supportsSpatialAggregationStatistics:s.readBoolean(l,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:s.readBoolean(l,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:s.readBoolean(e,"useStandardizedQueries",!1),supportsStatistics:s.readBoolean(l,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:s.readBoolean(l,"supportsTopFeaturesQuery",!1),supportsTrueCurve:s.readBoolean(l,"supportsTrueCurve",!1),tileMaxRecordCount:s.readNumber(e,"tileMaxRecordCount",void 0)}}function m(e){const t=e.advancedQueryCapabilities,r=s.readBoolean(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:s.readBoolean(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:a(t,"queryRelated")}}function g(e){return{supportsCacheHint:a(e.advancedQueryCapabilities,"queryTopFilter")}}function b(e){const t=e?e.queryBinsCapabilities:void 0;return{supportsDate:s.readBoolean(t,"supportsDateBin",!1),supportsFixedInterval:s.readBoolean(t,"supportsFixedIntervalBin",!1),supportsAutoInterval:s.readBoolean(t,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:s.readBoolean(t,"supportsFixedBoundariesBin",!1),supportsStackBy:s.readBoolean(t,"supportsStackBy",!1),supportsSplitBy:s.readBoolean(t,"supportsSplitBy",!1),supportsSnapToData:s.readBoolean(t,"supportsSnapToData",!1),supportsReturnFullIntervalBin:s.readBoolean(t,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:s.readBoolean(t,"supportsFirstDayOfWeek",!1),supportsNormalization:s.readBoolean(t,"supportsNormalization",!1),supportedStatistics:l(t),supportedNormalizationTypes:c(t)}}function _(e){const t=e.ownershipBasedAccessControlForFeatures,r=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:s.readBoolean(e,"allowGeometryUpdates",!0),supportsGlobalId:s.readBoolean(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:s.readBoolean(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:s.readBoolean(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:s.readBoolean(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:s.readBoolean(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:s.readBoolean(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:s.readBoolean(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:s.readBoolean(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:s.readBoolean(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:s.readBoolean(r,"supportsAsyncApplyEdits",!1),zDefault:s.readNumber(e,"zDefault",void 0)}}e.getFeatureLayerCapabilities=function(e,t){return{analytics:u(e),attachment:p(e),data:d(e),metadata:h(e),operations:y(e.capabilities,e,t),query:f(e,t),queryAttributeBins:b(e),queryRelated:m(e),queryTopFeatures:g(e),editing:_(e)}},e.getVideoLayerCapabilities=function(e){return{operations:{supportsAppend:s.readBoolean(e,"supportsAppend",!1),supportsCoverageQuery:e?.playbackInfo?.klv["0601"]??!1,supportsExportClip:s.readBoolean(e,"supportsExportClip",!1),supportsExportFrameset:s.readBoolean(e,"supportsExportFrameset",!1),supportsMensuration:s.readBoolean(e,"supportsMensuration",!1),supportsPreviews:s.readBoolean(e,"supportsPreviews",!1),supportsUpdate:s.readBoolean(e,"supportsUpdate",!1)}}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/infoFor3D":function(){define(["exports"],function(e){"use strict";const t=[["binary","application/octet-stream","bin",""]];function r(e,t){return u(function(e,t){const r=e.toLowerCase();return l(t).find(e=>p(e)===r)}(e,t))}function o(e,t){return u(c(e,t))}function s(e,t){return o(e.name,t)??r(e.type,t)}function i(e,t,s){return r(e,s)??o(t,s)}function n({supportedFormats:e}){return i("model/gltf-binary","glb",e)}function a({supportedFormats:e}){return i("model/gltf+json","gltf",e)}function l(e){return[...t,...e]}function c(e,t){const r=e.toLowerCase();return l(t).find(e=>d(e).some(e=>r.endsWith(e)))}function u(e){return e?.[0]}function p(e){return e?.[1].toLowerCase()}function d(e){return e?.[2].split(",").map(e=>e.toLowerCase())??[]}e.getAssetMapTable=function(e){return e.tables?.find(e=>"assetMaps"===e.role)},e.getFileFormatId=s,e.getFilePickerAcceptType=function(e){const t={};for(const r of l(e?.supportedFormats??[])){const[e,o]=p(r).split(";"),s=e.trim().toLowerCase(),i=d(r).map(e=>`.${e}`);t[s]??=[],t[s].push(...i)}return{description:"3D Models",accept:t}},e.getFilenameFormatId=o,e.getFormatDescription=function(e){return e?.[3]},e.getFormatExtensions=d,e.getFormatId=u,e.getFormatIdMimeType=function(e,t){return p(function(e,t){return l(t).find(t=>u(t)===e)}(e,t))},e.getFormatMimeType=p,e.getGlbFormatId=n,e.getGltfFormatId=a,e.getGltfQueryFormat=function(e){if(!e)return null;const t=n(e),r=a(e);let o=null;for(const s of e.queryFormats){if(s===t)return s;s===r&&(o=s)}return o},e.getMimeTypeFormatId=r,e.getMimeTypeOrFilenameFormatId=i,e.getPrjFormatId=function({supportedFormats:e}){return i("application/esri3do-SR_prj","prj",e)},e.getSupportedExtensions=function(e){return l(e?.supportedFormats??[]).flatMap(d).map(e=>`.${e}`)},e.getWorldFileFormatId=function({supportedFormats:e}){return i("application/esri3do-SR_world","wld",e)},e.isFileEditFormat=function(e,t){if(!e)return!1;const r=s(t,e.supportedFormats??[]);return null!=r&&e.editFormats.includes(r)},e.isFileSupported=function(e,t){return null!=c(t.name,e?.supportedFormats??[])},e.isGlbSupportedEditFormat=function(e){const t=n(e);return null!=t&&e.editFormats.includes(t)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/jsonUtils":function(){define(["exports"],function(e){"use strict";function t(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}e.readBoolean=function(e,r,o){return!!t(e,r,o)},e.readNumber=function(e,r,o){return t(e,r,o)},e.readValue=t,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Subtype":function(){define(["exports","../../chunks/tslib.es6","../../core/Clonable","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","./domains"],function(e,t,r,o,s,i,n,a,l,c,u,p){"use strict";return e.default=class extends(r.ClonableMixin(o.JSONSupport)){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const t={};for(const r of Object.keys(e))t[r]=p.fromJSON(e[r]);return t}writeDomains(e,t){if(!e)return;const r={};for(const t of Object.keys(e))e[t]&&(r[t]=e[t]?.toJSON());t.domains=r}},t.__decorate([s.property({type:Number,json:{write:!0}})],e.default.prototype,"code",void 0),t.__decorate([s.property({type:Object,json:{write:!0}})],e.default.prototype,"defaultValues",void 0),t.__decorate([s.property({json:{write:!0}})],e.default.prototype,"domains",void 0),t.__decorate([l.reader("domains")],e.default.prototype,"readDomains",null),t.__decorate([u.writer("domains")],e.default.prototype,"writeDomains",null),t.__decorate([s.property({type:String,json:{write:!0}})],e.default.prototype,"name",void 0),e.default=t.__decorate([c.subclass("esri.layers.support.Subtype")],e.default),e.default})},"esri/layers/mixins/FeatureReductionLayer":function(){define(["exports","../../chunks/tslib.es6","../../core/reactiveUtils","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../support/AggregateField","../support/featureReductionUtils","../../renderers/SimpleRenderer","../../renderers/visualVariables/SizeVariable","../../renderers/visualVariables/support/SizeStop","../../views/2d/layers/support/clusterUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h){"use strict";e.FeatureReductionLayer=e=>{const s=e;let i=class extends s{constructor(...e){super(...e),this.addHandles(r.watch(()=>this.renderer,()=>{if(this.featureReduction){const e=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",e)}},r.sync))}set featureReduction(e){const t=this._normalizeFeatureReduction(e);this._set("featureReduction",t)}set renderer(e){}_withClusterVariable(e,t,r){const o=e.clone();return"visualVariables"in o&&(o.visualVariables||(o.visualVariables=[]),o.visualVariables.some(e=>"size"===e.type)||o.visualVariables.push(new p({field:"cluster_count",stops:[new d({value:1}),new d({useMinValue:!0,size:t}),new d({useMaxValue:!0,size:r})]}))),o}_normalizeFeatureReduction(e){if("cluster"!==e?.type)return e;const t=e.clone(),r=[new l({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],o=(t.fields??[]).filter(e=>!e.isAutoGenerated),s=e.renderer&&!e.renderer.authoringInfo?.isAutoGenerated,{clusterMinSize:i,clusterMaxSize:n}=t;if(s){t.fields=[...r,...o];const e=this._withClusterVariable(t.renderer,i,n);return t.effectiveFeatureRenderer=e,t.effectiveClusterRenderer=e,t}if(e.symbol){if(t.fields=[...r,...o],t.renderer=null,!this.renderer)return t.effectiveFeatureRenderer=null,t.effectiveClusterRenderer=null,t;const s=h.createInferredClusterRenderer(r,this.renderer),a=this._withClusterVariable(s,i,n),l="visualVariables"in a&&a.visualVariables?a.visualVariables:[],c=new u({symbol:e.symbol,visualVariables:l});return t.fields=[...r,...o],t.effectiveFeatureRenderer=a,t.effectiveClusterRenderer=c,t}if(!this.renderer)return e;const a=h.createInferredClusterRenderer(r,this.renderer);t.fields=[...r,...o],t.renderer=a;const c=this._withClusterVariable(a,i,n);return t.effectiveFeatureRenderer=c,t.effectiveClusterRenderer=c,t}};return t.__decorate([o.property(c.featureReductionProperty)],i.prototype,"featureReduction",null),i=t.__decorate([a.subclass("esri.layers.mixins.FeatureReductionLayer")],i),i},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/AggregateField":function(){define(["exports","../../chunks/tslib.es6","../../core/JSONSupport","../../core/lang","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/subclass","./ExpressionInfo"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;return e.default=class extends r.JSONSupport{static{c=this}constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new c({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:o.clone(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}},t.__decorate([s.property({type:Boolean,json:{write:!0}})],e.default.prototype,"isAutoGenerated",void 0),t.__decorate([s.property({type:String,json:{write:!0}})],e.default.prototype,"name",void 0),t.__decorate([s.property({type:String,json:{write:!0}})],e.default.prototype,"alias",void 0),t.__decorate([s.property({type:String,json:{write:!0}})],e.default.prototype,"onStatisticField",void 0),t.__decorate([s.property({type:l,json:{write:!0}})],e.default.prototype,"onStatisticExpression",void 0),t.__decorate([s.property({type:String,json:{write:!0}})],e.default.prototype,"statisticType",void 0),e.default=c=t.__decorate([a.subclass("esri.layers.support.AggregateField")],e.default),e.default})},"esri/layers/support/ExpressionInfo":function(){define(["exports","../../chunks/tslib.es6","../../core/Clonable","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";return e.default=class extends(r.ClonableMixin(o.JSONSupport)){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}},t.__decorate([s.property({type:String,json:{write:!0}})],e.default.prototype,"expression",void 0),t.__decorate([s.property({type:String,json:{write:!0}})],e.default.prototype,"title",void 0),t.__decorate([s.property({type:String,json:{write:!0}})],e.default.prototype,"returnType",void 0),e.default=t.__decorate([l.subclass("esri.layers.support.ExpressionInfo")],e.default),e.default})},"esri/layers/support/featureReductionUtils":function(){define(["exports","../../core/accessorSupport/layerContainerType","./FeatureReduction","./FeatureReductionBinning","./FeatureReductionCluster","./FeatureReductionSelection"],function(e,t,r,o,s,i){"use strict";const n={key:"type",base:r.FeatureReduction,typeMap:{selection:i}},a={key:"type",base:r.FeatureReduction,typeMap:{cluster:s,binning:o}},l={types:{key:"type",base:r.FeatureReduction,typeMap:{selection:i,cluster:s,binning:o}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:a},"portal-item":{types:a},"web-scene":{types:n,name:"layerDefinition.featureReduction",write:{layerContainerTypes:t.excludeTables}}}}};e.featureReductionProperty=l,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FeatureReduction":function(){define(["exports","../../chunks/tslib.es6","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a){"use strict";e.FeatureReduction=class extends r.JSONSupport{constructor(){super(...arguments),this.type=null}},t.__decorate([o.property({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],e.FeatureReduction.prototype,"type",void 0),e.FeatureReduction=t.__decorate([a.subclass("esri.layers.support.FeatureReduction")],e.FeatureReduction),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FeatureReductionBinning":function(){define(["exports","../../chunks/tslib.es6","../../PopupTemplate","../../core/lang","../../core/object","../../core/screenUtils","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","./AggregateField","./commonProperties","./featureLayerUtils","./FeatureReduction","./LabelClass","../../renderers/support/jsonUtils","../../renderers/support/typeUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b){"use strict";var _;return e.default=_=class extends f.FeatureReduction{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=i.toPt("12px"),this.fields=[],this.renderer=null}writeFields(e,t,r){const o=e.filter(e=>"avg_angle"!==e.statisticType).map(e=>e.toJSON());s.setDeepValue(r,o,t)}readRenderer(e,t,r){const o=t.drawingInfo?.renderer;return o?g.read(o,t,r)??void 0:y.createDefaultRenderer(t,r)}clone(){return new _({fields:o.clone(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:o.clone(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:o.clone(this.popupTemplate),renderer:o.clone(this.renderer),binType:o.clone(this.binType),size:this.size})}},t.__decorate([l.enumeration({binning:"binning"})],e.default.prototype,"type",void 0),t.__decorate([l.enumeration({geohash:"geohash",square:"square"}),n.property({type:["geohash","square"]})],e.default.prototype,"binType",void 0),t.__decorate([n.property({type:Number,json:{write:!0}})],e.default.prototype,"fixedBinLevel",void 0),t.__decorate([n.property({type:[m],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],e.default.prototype,"labelingInfo",void 0),t.__decorate([n.property(h.labelsVisible)],e.default.prototype,"labelsVisible",void 0),t.__decorate([n.property({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],e.default.prototype,"maxScale",void 0),t.__decorate([n.property(h.popupEnabled)],e.default.prototype,"popupEnabled",void 0),t.__decorate([n.property({type:r,json:{name:"popupInfo",write:!0}})],e.default.prototype,"popupTemplate",void 0),t.__decorate([n.property({cast:e=>"auto"===e?e:a.ensureNumber(i.toPt(e))})],e.default.prototype,"size",void 0),t.__decorate([n.property({type:[d],json:{write:!0}})],e.default.prototype,"fields",void 0),t.__decorate([p.writer("fields")],e.default.prototype,"writeFields",null),t.__decorate([n.property({types:b.rendererTypes,json:{write:{target:"drawingInfo.renderer"}}})],e.default.prototype,"renderer",void 0),t.__decorate([c.reader("renderer",["drawingInfo.renderer"])],e.default.prototype,"readRenderer",null),e.default=_=t.__decorate([u.subclass("esri.layers.support.FeatureReductionBinning")],e.default),e.default})},"esri/layers/support/LabelClass":function(){define(["exports","../../chunks/tslib.es6","../../core/has","../../core/jsonMap","../../core/JSONSupport","../../core/lang","../../core/screenUtils","../../core/accessorSupport/decorators/property","../../core/Logger","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","./LabelExpressionInfo","./labelUtils","./layerUtils","../../symbols/support/defaults","../../symbols/support/jsonUtils","../../symbols/support/typeUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g){"use strict";var b;const _=new o.JSONMap({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function S(e,t,r){return{enabled:!y.isSceneServiceLayer(r?.layer)}}function v(e){return!e||"service"!==e.origin&&!("map-image"===e.layer?.type)}function w(e){return!!function(e){return"map-image"===e?.type}(e)&&!!e.capabilities?.exportMap?.supportsArcadeExpressionForLabeling}return e.default=class extends s.JSONSupport{static{b=this}static evaluateWhere(e,t){const r=(e,t,r)=>{switch(t){case"=":return e==r;case"<>":return e!=r;case">":return e>r;case">=":return e>=r;case"<":return e<r;case"<=":return e<=r}return!1};try{if(null==e)return!0;const o=e.split(" ");if(3===o.length)return r(t[o[0]],o[1],o[2]);if(7===o.length){const e=r(t[o[0]],o[1],o[2]),s=o[3],i=r(t[o[4]],o[5],o[6]);switch(s){case"AND":return e&&i;case"OR":return e||i}}return!1}catch(e){}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=f.defaultTextSymbol2D,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,t,r){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)e=h.templateStringToSql(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){const t=h.getSingleFieldArcadeExpression(this.labelExpressionInfo.expression);t&&(e="["+t+"]")}null!=e&&(t[r]=e)}writeLabelExpressionInfo(e,t,r,o){if(null==e&&null!=this.labelExpression&&v(o))e=new d({expression:this.getLabelExpressionArcade()});else if(!e)return;const s=e.toJSON(o);s.expression&&(t[r]=s)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return h.getLabelExpression(this)}getLabelExpressionArcade(){return h.getLabelExpressionArcade(this)}getLabelExpressionSingleField(){return h.getLabelExpressionSingleField(this)}hash(){return JSON.stringify(this)}clone(){return new b({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:i.clone(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:i.clone(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}},t.__decorate([a.property({type:String,json:{write:!0}})],e.default.prototype,"name",void 0),t.__decorate([a.property({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:S}}}}})],e.default.prototype,"allowOverrun",void 0),t.__decorate([a.property({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:S}}}}})],e.default.prototype,"deconflictionStrategy",void 0),t.__decorate([a.property({type:String,json:{write:{overridePolicy(e,t,r){return this.labelExpressionInfo&&"service"===r?.origin&&w(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],e.default.prototype,"labelExpression",void 0),t.__decorate([c.reader("labelExpression")],e.default.prototype,"readLabelExpression",null),t.__decorate([p.writer("labelExpression")],e.default.prototype,"writeLabelExpression",null),t.__decorate([a.property({type:d,json:{write:{overridePolicy:(e,t,r)=>function(e){return v(e)||w(e?.layer)}(r)?{allowNull:!0}:{enabled:!1}}}})],e.default.prototype,"labelExpressionInfo",void 0),t.__decorate([p.writer("labelExpressionInfo")],e.default.prototype,"writeLabelExpressionInfo",null),t.__decorate([a.property({type:_.apiValues,json:{type:_.jsonValues,read:_.read,write:_.write}})],e.default.prototype,"labelPlacement",void 0),t.__decorate([a.property({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],e.default.prototype,"labelPosition",void 0),t.__decorate([a.property({type:Number})],e.default.prototype,"maxScale",void 0),t.__decorate([p.writer("maxScale")],e.default.prototype,"writeMaxScale",null),t.__decorate([a.property({type:Number})],e.default.prototype,"minScale",void 0),t.__decorate([p.writer("minScale")],e.default.prototype,"writeMinScale",null),t.__decorate([a.property({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:S}}}}})],e.default.prototype,"repeatLabel",void 0),t.__decorate([a.property({type:Number,cast:n.toPt,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:S}}}}})],e.default.prototype,"repeatLabelDistance",void 0),t.__decorate([a.property({types:g.symbolTypesLabel,json:{origins:{"web-scene":{types:g.symbolTypesLabel3D,write:m.writeLabelSymbol,default:null}},write:m.writeLabelSymbol,default:null}})],e.default.prototype,"symbol",void 0),t.__decorate([a.property({type:Boolean,json:{write:!0}})],e.default.prototype,"useCodedValues",void 0),t.__decorate([a.property({type:String,json:{write:!0}})],e.default.prototype,"where",void 0),e.default=b=t.__decorate([u.subclass("esri.layers.support.LabelClass")],e.default),e.default})},"esri/layers/support/LabelExpressionInfo":function(){define(["exports","../../chunks/tslib.es6","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","./labelUtils"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";var p;return e.default=class extends r.JSONSupport{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}static{p=this}readExpression(e,t){return t.value?u.convertTemplatedStringToArcade(t.value):e}writeExpression(e,t,r){null!=this.value&&(e=u.convertTemplatedStringToArcade(this.value)),null!=e&&(t[r]=e)}clone(){return new p({expression:this.expression,title:this.title,value:this.value})}},t.__decorate([o.property({type:String,json:{write:{writerEnsuresNonNull:!0}}})],e.default.prototype,"expression",void 0),t.__decorate([a.reader("expression",["expression","value"])],e.default.prototype,"readExpression",null),t.__decorate([c.writer("expression")],e.default.prototype,"writeExpression",null),t.__decorate([o.property({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],e.default.prototype,"title",void 0),t.__decorate([o.property({json:{read:!1,write:!1}})],e.default.prototype,"value",void 0),e.default=p=t.__decorate([l.subclass("esri.layers.support.LabelExpressionInfo")],e.default),e.default})},"esri/layers/support/labelUtils":function(){define(["exports","../../core/string"],function(e,t){"use strict";const r="__begin__",o="__end__",s=new RegExp(r,"ig"),i=new RegExp(o,"ig"),n=new RegExp("^"+r,"i"),a=new RegExp(o+"$","i");function l(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function c(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=l(e.labelExpression),t.type="conventional"),t}function u(e){let l;return e?(l=t.replace(e,e=>r+'$feature["'+e+'"]'+o),l=n.test(l)?l.replace(n,""):'"'+l,l=a.test(l)?l.replace(a,""):l+'"',l=l.replaceAll(s,'" + ').replaceAll(i,' + "')):l='""',l}const p=/^\s*\{([^}]+)\}\s*$/i;function d(e){const t=e?.match(p);return t?.[1].trim()||null}const h=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,y=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,f=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function m(e){if(!e)return null;let t=h.exec(e)||y.exec(e);return t?t[1]||t[3]:(t=f.exec(e),t?t[2]:null)}e.convertTemplatedStringToArcade=u,e.getLabelExpression=c,e.getLabelExpressionArcade=function(e){const t=c(e);if(!t)return null;switch(t.type){case"conventional":return u(t.expression);case"arcade":return t.expression}return null},e.getLabelExpressionSingleField=function(e){const t=c(e);if(!t)return null;switch(t.type){case"conventional":return d(t.expression);case"arcade":return m(t.expression)}return null},e.getSingleFieldArcadeExpression=m,e.getSingleFieldTemplatedString=d,e.sqlToTemplateString=l,e.templateStringToSql=function(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/jsonUtils":function(){define(["exports","../../core/Warning","../../core/accessorSupport/extensions/serializableProperty/reader","./typeUtils"],function(e,t,r,o){"use strict";const s=r.createTypeReader({types:o.rendererTypes});function i(e,r,o){return e?e&&(e.styleName||e.styleUrl)&&"uniqueValue"!==e.type?(o?.messages&&o.messages.push(new t("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:o})),null):s(e,r,o):null}e.fromJSON=function(e,t){return i(e,null,t)},e.read=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/typeUtils":function(){define(["exports","../../core/Logger","../ClassBreaksRenderer","../DictionaryRenderer","../DotDensityRenderer","../HeatmapRenderer","../PieChartRenderer","../Renderer","../SimpleRenderer","../UniqueValueRenderer"],function(e,t,r,o,s,i,n,a,l,c){"use strict";const u={key:"type",base:a,typeMap:{heatmap:i,simple:l,"unique-value":c,"class-breaks":r,"dot-density":s,dictionary:o,"pie-chart":n},errorContext:"renderer"},p={key:"type",base:a,typeMap:{simple:l,"unique-value":c,"class-breaks":r,heatmap:i},errorContext:"renderer",validate:function(e){switch(e.type){case"simple":return function(e){if(e.symbol)return e;t.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}(e);case"unique-value":return function(e){const r=e.uniqueValueInfos,o=r?.filter(({symbol:e,label:r},o)=>(e||t.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${o}] ${r}) without a symbol from web scene.`),!!e));return o?.length!==r?.length&&(e.uniqueValueInfos=o),e}(e);case"class-breaks":return function(e){const r=e.classBreakInfos,o=r?.filter(({symbol:e,label:r},o)=>(e||t.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${o}] ${r}) without a symbol from web scene.`),!!e));return o?.length!==r?.length&&(e.classBreakInfos=o),e}(e);case"heatmap":return e}}};e.isRenderer=function(e){return e instanceof a},e.rendererTypes=u,e.webSceneRendererTypes=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/ClassBreaksRenderer":function(){define(["exports","../chunks/tslib.es6","../core/jsonMap","../core/lang","../core/Logger","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/cast","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","../core/accessorSupport/ensureType","../layers/support/fieldUtils","./Renderer","./mixins/VisualVariablesMixin","./support/ClassBreakInfo","./support/commonProperties","./support/RendererLegendOptions","../support/loadArcade","../symbols/support/typeUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b,_){"use strict";var S;const v="percent-of-total",w="field",x=new r.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:v,esriNormalizeByField:w}),T=p.ensureType(f);return e.default=S=class extends(y.VisualVariablesMixin(h)){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,r){if(!Array.isArray(e))return;let o=t.minValue;return e.map(e=>{const t=new f;return t.read(e,r),null==t.minValue&&(t.minValue=o),null==t.maxValue&&(t.maxValue=t.minValue),o=t.maxValue,t})}writeClassBreakInfos(e,t,r,o){const s=e.map(e=>e.write({},o));this._areClassBreaksConsecutive()&&s.forEach(e=>delete e.classMinValue),t[r]=s}castField(e){return null==e?e:"function"==typeof e?(s.getLogger(this).error(".field: field must be a string value"),null):p.ensureString(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=null!=this.normalizationTotal;return t||r?(e=t&&w||r&&v||null,t&&r&&s.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==w&&e!==v||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,r){let s=null;s="number"==typeof e?new f({minValue:e,maxValue:t,symbol:_.ensureType(r)}):T(o.clone(e)),this.classBreakInfos.push(s),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const r=this.classBreakInfos.length;for(let o=0;o<r;o++){const r=[this.classBreakInfos[o].minValue,this.classBreakInfos[o].maxValue];if(r[0]===e&&r[1]===t){this.classBreakInfos.splice(o,1);break}}}getBreakIndex(e,t){return this.valueExpression&&null==t?.arcade&&s.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let r=t;this.valueExpression&&null==t?.arcade&&(r={...r,arcade:await b.loadArcade()});const o=this.getBreakIndex(e,r);return-1!==o?this.classBreakInfos[o]:null}getSymbol(e,t){if(this.valueExpression&&null==t?.arcade)return void s.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&null==t?.arcade){const e=await b.loadArcade(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),r={...r,arcade:e}}const o=this.getBreakIndex(e,r);return o>-1?this.classBreakInfos[o].symbol:this.defaultSymbol}get symbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables?.reduce((e,t)=>e+t.getAttributeHash(),"")??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((e,t)=>e+t.getMeshHash(),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new S({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:o.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:o.clone(this.visualVariables),legendOptions:o.clone(this.legendOptions),authoringInfo:o.clone(this.authoringInfo)})}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.symbols.map(r=>r.collectRequiredFields(e,t)),d.collectArcadeFieldNames(e,t,this.valueExpression)];d.collectField(e,t,this.field),d.collectField(e,t,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(e,t){const{viewingMode:r,scale:o,spatialReference:s,arcade:i,timeZone:n}=t??{},{valueExpression:a}=this;let l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const c=i.arcadeUtils;if(!l){const e=c.createSyntaxTree(a);l=c.createFunction(e),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;const u=c.executeFunction(l,c.createExecContext(e,c.getViewInfo({viewingMode:r,scale:o,spatialReference:s}),n));return this._getBreakIndexfromInfos(u)}_getBreakIndexForField(e){const t=this.field,r=e.attributes,o=this.normalizationType;let s=parseFloat(r[t]);if(o){const e=this.normalizationTotal,t=parseFloat(this.normalizationField?r[this.normalizationField]:void 0);if("log"===o)s=Math.log(s)*Math.LOG10E;else if(o!==v||null==e||isNaN(e)){if(o===w&&!isNaN(t)){if(isNaN(s)||isNaN(t))return-1;s/=t}}else s=s/e*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(let r=0;r<this.classBreakInfos.length;r++){const o=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(o[0]<=e&&(t?e<=o[1]:e<o[1]))return r}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0}},t.__decorate([i.property(m.rendererBackgroundFillSymbolProperty)],e.default.prototype,"backgroundFillSymbol",void 0),t.__decorate([i.property({type:[f],json:{write:{isRequired:!0}}})],e.default.prototype,"classBreakInfos",void 0),t.__decorate([l.reader("classBreakInfos")],e.default.prototype,"readClassBreakInfos",null),t.__decorate([u.writer("classBreakInfos")],e.default.prototype,"writeClassBreakInfos",null),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"defaultLabel",void 0),t.__decorate([i.property(m.rendererSymbolProperty)],e.default.prototype,"defaultSymbol",void 0),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"field",void 0),t.__decorate([n.cast("field")],e.default.prototype,"castField",null),t.__decorate([i.property({type:Boolean})],e.default.prototype,"isMaxInclusive",void 0),t.__decorate([i.property({type:g,json:{write:!0}})],e.default.prototype,"legendOptions",void 0),t.__decorate([i.property({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],e.default.prototype,"minValue",null),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"normalizationField",void 0),t.__decorate([i.property({type:Number,json:{write:!0}})],e.default.prototype,"normalizationTotal",void 0),t.__decorate([i.property({type:x.apiValues,value:null,json:{type:x.jsonValues,read:x.read,write:x.write}})],e.default.prototype,"normalizationType",null),t.__decorate([a.enumeration({classBreaks:"class-breaks"})],e.default.prototype,"type",void 0),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"valueExpression",void 0),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"valueExpressionTitle",void 0),e.default=S=t.__decorate([c.subclass("esri.renderers.ClassBreaksRenderer")],e.default),e.default})},"esri/renderers/support/ClassBreakInfo":function(){define(["exports","../../chunks/tslib.es6","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./commonProperties"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;return e.default=c=class extends r.JSONSupport{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new c({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}},t.__decorate([o.property({type:String,json:{write:!0}})],e.default.prototype,"description",void 0),t.__decorate([o.property({type:String,json:{write:!0}})],e.default.prototype,"label",void 0),t.__decorate([o.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],e.default.prototype,"minValue",void 0),t.__decorate([o.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],e.default.prototype,"maxValue",void 0),t.__decorate([o.property(l.requiredRendererSymbolProperty)],e.default.prototype,"symbol",void 0),e.default=c=t.__decorate([a.subclass("esri.renderers.support.ClassBreakInfo")],e.default),e.default})},"esri/renderers/DictionaryRenderer":function(){define(["exports","../chunks/tslib.es6","../request","../core/lang","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","../layers/support/fieldUtils","./Renderer","./mixins/VisualVariablesMixin","./support/DictionaryLoader"],function(e,t,r,o,s,i,n,a,l,c,u,p,d){"use strict";var h;return e.default=h=class extends(p.VisualVariablesMixin(u)){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){const e=this.getDictionaryInfo();return new d.DictionaryLoader(this.url,this.config,this.fieldMap??{},e)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,o){o?.origin||super.writeVisualVariables(e,t,r,o)}clone(){return new h({config:o.clone(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:o.clone(this.fieldMap),url:o.clone(this.url),visualVariables:o.clone(this.visualVariables)})}async getSymbolAsync(e,t,r=!0){return this._loader.getSymbolAsync(e,t,r)}async getSymbolForControlString(e,t,r){return this._loader.getSymbolForControlString(e,t,r)}getDictionaryInfo(){return this._dictionaryInfoPromise||(this._dictionaryInfoPromise=this._fetchDictionaryInfo()),this._dictionaryInfoPromise}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await c.collectArcadeFieldNames(e,t,this.scaleExpression);for(const r in this.fieldMap){const o=this.fieldMap[r];t.has(o)&&e.add(o)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){return this.visualVariables?.reduce((e,t)=>e+t.getAttributeHash(),"")??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}async _fetchDictionaryInfo(){const{data:e}=await r(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"}});return e}},t.__decorate([s.property({type:d.DictionaryLoader})],e.default.prototype,"_loader",null),t.__decorate([s.property({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],e.default.prototype,"config",void 0),t.__decorate([s.property({type:Object,json:{write:!0}})],e.default.prototype,"fieldMap",void 0),t.__decorate([s.property({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],e.default.prototype,"scaleExpression",void 0),t.__decorate([l.writer("scaleExpression")],e.default.prototype,"writeData",null),t.__decorate([s.property({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],e.default.prototype,"scaleExpressionTitle",void 0),t.__decorate([s.property({type:String,json:{write:!0}})],e.default.prototype,"url",void 0),t.__decorate([l.writer("visualVariables")],e.default.prototype,"writeVisualVariables",null),e.default=h=t.__decorate([a.subclass("esri.renderers.DictionaryRenderer")],e.default),e.default})},"esri/renderers/support/DictionaryLoader":function(){define(["require","exports","../../request","../../core/lang","../../core/LRUCache","../../geometry/support/jsonUtils","./DictionaryControlString","./DictionaryScriptEvaluator","../../support/ArcadeExpression","../../symbols/CIMSymbol","../../symbols/cim/utils"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";const p={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};function d(e,t,r){if(!e||0===e.length)return null;const o={...e[0]};if(e.length>1){o.effects=null,o.symbolLayers=[];for(const t of e){const e=t;if(null!=e.effects)for(const t of e.symbolLayers)null==t.effects?t.effects=e.effects:t.effects.unshift(...e.effects);o.symbolLayers.unshift(...e.symbolLayers)}}return r&&(o.callout=p),{type:"CIMSymbolReference",symbol:o,primitiveOverrides:t}}t.DictionaryLoader=class{constructor(e,t,r,o){this.url=e,this.fieldMap=r,this.dictionaryInfo=o,this._symbolPartCache=new s.LRUCache(100),this._evaluator=(async()=>a.DictionaryScriptEvaluator.from(await o,t,r))()}async getSymbolAsync(e,t,r=!0){const o=await this._evaluator,s=t?.fields??l.deriveFields(e.attributes),a=o.createDictionaryFieldsIndex(s),c=o.evaluate(e,t?.scale??0,a,t?.spatialReference);if(null==c)return null;const u=i.getJsonType(e.geometry),p=n.DictionaryControlString.parse(c,o.itemNames,u),d="esriGeometryPoint"===u&&!e.geometry?.hasZ;return await this._cimPartsToCIMSymbol(e,p.partNames,p.overrides,d,t,r,a)}async getSymbolForControlString(e,t,r){const o=await this._evaluator,s=n.DictionaryControlString.parse(e,o.itemNames,t),i="esriGeometryPoint"===t&&!r,a=d(await Promise.all(s.partNames.map(e=>this._getSymbolPart(e))),s.overrides,i);return new c({data:a})}async _cimPartsToCIMSymbol(t,r,s,i,n,a,l){const p=r.map(e=>this._getSymbolPart(e,n));let h=await Promise.all(p);if(a&&this.fieldMap&&h.length>0){const{OverrideHelper:r}=await new Promise((t,r)=>e(["../../symbols/cim/OverrideHelper"],t,r));h=o.clone(h);for(const e of h)r.applyDictionaryTextOverrides(e,t,this.fieldMap,l,u.getTextCasing(e))}const y=d(h,s,i);return new c({data:y})}async _fetchSymbolPart(e,t){const o=await this.dictionaryInfo,s=(this.url+"/"+o.cimRefTemplateUrl).replaceAll(/\{itemName\}/gi,e),{data:i}=await r(s,{responseType:"json",query:{f:"json"},...t});return i}async _getSymbolPart(e,t){let r=this._symbolPartCache.get(e);return r||(r=this._fetchSymbolPart(e,t),this._symbolPartCache.put(e,r)),r}},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/core/LRUCache":function(){define(["exports","./MemCache"],function(e,t){"use strict";e.LRUCache=class{constructor(e,r){this.removeFunc=r,this._storage=new t.MemCacheStorage,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy(),this._storage=null}put(e,t,r=1){this._storage.put(this,e,t,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","./has"],function(e,t){"use strict";const r=!!t("esri-tests-disable-gpu-memory-measurements");class o{constructor(e,t,r,o=0){this.name=e,this._storage=t,this.removeFunc=r,this._defaultPriority=o,this.id=`${s++}${n}`,this.size=0,this._hit=0,this._miss=0,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(e){return this._storage.getSize(this,e)}set maxSize(e){this._storage.setMaxSize(this,e)}resetHitRate(){this._hit=this._miss=0}put(e,t,r=this._defaultPriority){this._storage.put(this,e,t,t.cachedMemory,r)}pop(e){const t=this._storage.pop(this,e);return void 0===t?++this._miss:++this._hit,t}get(e){const t=this._storage.get(this,e);return void 0===t?++this._miss:++this._hit,t}peek(e){return this._storage.peek(this,e)}updateSize(e,t){this._storage.updateSize(this,e,t,t.cachedMemory)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}*[Symbol.iterator](){yield*this._storage.values(this)}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}let s=0;class i{constructor(e,t,r){this.entry=e,this.size=t,this.lifetime=r,this.lives=r}}const n=":";e.MemCache=o,e.MemCacheStorage=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._users=new Map,this._sizeLimits=new Map}destroy(){this.clearAll(),this._sizeLimits.clear(),this._users.clear(),this._db=null}register(e){this._users.set(e.id.slice(0,-1),e)}deregister(e){this.clear(e),this._sizeLimits.delete(e),this._users.delete(e.id.slice(0,-1))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,t){const r=this._db.get(e.id+t);return r?.size??0}put(e,t,o,s,n){t=e.id+t;const a=this._db.get(t);if(a&&(this._size-=a.size,e.size-=a.size,this._db.delete(t),a.entry!==o&&this._notifyRemove(t,a.entry,a.size,0)),s>this._maxSize)return void this._notifyRemove(t,o,s,0);if(void 0===o)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return r||console.warn(`Refusing to cache entry with size ${s} for key ${t}`),void this._notifyRemove(t,o,0,0);const l=1+Math.max(n,-4)- -3;this._db.set(t,new i(o,s,l)),this._size+=s,e.size+=s,this._checkSize()}updateSize(e,t,r,o){t=e.id+t;const s=this._db.get(t);if(s&&s.entry===r){for(this._size-=s.size,e.size-=s.size;o>this._maxSize;){const e=this._notifyRemove(t,r,o,1);if(!(null!=e&&e>0))return void this._db.delete(t);o=e}s.size=o,this._size+=o,e.size+=o,this._checkSize()}}pop(e,t){t=e.id+t;const r=this._db.get(t);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(t),++this._hit,r.entry;++this._miss}get(e,t){t=e.id+t;const r=this._db.get(t);if(void 0!==r)return this._db.delete(t),r.lives=r.lifetime,this._db.set(t,r),++this._hit,r.entry;++this._miss}peek(e,t){const r=this._db.get(e.id+t);return r?++this._hit:++this._miss,r?.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},r=new Array;this._db.forEach((e,o)=>{const s=e.lifetime;r[s]=(r[s]||0)+e.size,this._users.forEach(r=>{const{id:s,name:i}=r;if(o.startsWith(s)){const r=t[i]||0;t[i]=r+e.size}})});const o={};this._users.forEach(e=>{const r=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){const s=t[r]||0;t[r]=s,o[r]=Math.round(100*e.hitRate)+"%"}else o[r]="0%"});const s=Object.keys(t);s.sort((e,r)=>t[r]-t[e]),s.forEach(r=>e[r]=Math.round(t[r]/2**20)+"MB / "+o[r]);for(let t=r.length-1;t>=0;--t){const o=r[t];o&&(e["Priority "+(t+-3-1)]=Math.round(o/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forEach(e=>e.resetHitRate())}clear(e){const t=e.id;this._db.forEach((e,r)=>{r.startsWith(t)&&(this._size-=e.size,this._db.delete(r),this._notifyRemove(r,e.entry,e.size,0))}),e.size=0}clearAll(){this._db.forEach((e,t)=>this._notifyRemove(t,e.entry,e.size,0)),this._users.forEach(e=>e.size=0),this._size=0,this._db.clear()}*values(e){for(const[t,r]of this._db)t.startsWith(e.id)&&(yield r.entry)}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,r,o){const s=this._users.get(e.split(n)[0])?.removeFunc,i=s?.(t,o,r);return"number"==typeof i?i:null}_checkSize(){this._sizeLimits.forEach((e,t)=>this._checkSizeLimits(e,t)),this._checkSizeLimits(this.maxSize)}setMaxSize(e,t){null==t||t<=0?this._sizeLimits.delete(e):this._sizeLimits.set(e,t)}_checkSizeLimits(e,t){const r=t??this;if(r.size<=e)return;const o=t?.id;let s=!0;for(;s;){s=!1;for(const[i,a]of this._db)if(0===a.lifetime&&(!o||i.startsWith(o))){const o=t??this._users.get(i.split(n)[0]);if(this._purgeItem(i,a,o),r.size<=.9*e)return;s||=this._db.has(i)}}for(const[s,i]of this._db)if(!o||s.startsWith(o)){const o=t??this._users.get(s.split(n)[0]);if(this._purgeItem(s,i,o),r.size<=.9*e)return}}_purgeItem(e,t,r){if(this._db.delete(e),t.lives<=1){this._size-=t.size,r&&(r.size-=t.size);const o=this._notifyRemove(e,t.entry,t.size,1);null!=o&&o>0&&(this._size+=o,r&&(r.size+=o),t.lives=t.lifetime,t.size=o,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}},e.MinPriority=-3,e.NoPriority=-4,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/DictionaryControlString":function(){define(["exports","../../Color"],function(e,t){"use strict";class r{static parse(e,t,i){const n=[],a=[],l=e.split(";");for(let e=0;e<l.length;e++){const r=l[e];if(r){if(r.includes("po:")){const e=r.slice(3).split("|");if(3===e.length){const[t,r,s]=e,i=o(t,r,s);i&&a.push(i)}continue}if(r.includes("|")){for(const e of r.split("|"))if(t.has(e)){n.push(e);break}}else if(t.has(r))n.push(r);else if(0===e){n.length=0,n.push(s(i));break}}}return new r(n,a)}constructor(e,t){this.partNames=e,this.overrides=t}}function o(e,r,o){const s=function(e,r){if("DashTemplate"===e)return r.split(" ").map(e=>Number(e));if("Color"===e){const e=new t(r).toRgba();return[e[0],e[1],e[2],255*e[3]]}return Number(r)}(r,o);return{primitiveName:e,propertyName:r,value:s,defaultValue:null}}function s(e){switch(e){case"esriGeometryPolyline":return"Invalid_L";case"esriGeometryPolygon":return"Invalid_A";default:return"Invalid_P"}}e.DictionaryControlString=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/DictionaryScriptEvaluator":function(){define(["exports","../../core/Error","../../core/Logger","../../core/Version","../../layers/support/FieldsIndex","../../support/ArcadeExpression"],function(e,t,r,o,s,i){"use strict";class n{static async from(e,s,l){const c=e.dictionary_version?o.Version.parse(e.dictionary_version):null,u=new Set(e.itemsNames),p={};if(s)for(const e in s)p[e]=s[e];if(e.authoringInfo.configuration)for(const t of e.authoringInfo.configuration)p.hasOwnProperty(t.name)||(p[t.name]=t.value);const d=new Set(e.authoringInfo.symbol);for(const e of Object.keys(l))d.delete(e);d.size&&r.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("missing-fields: fieldMap entries for the following symbol fields are missing",{symbolFields:d});const h=await i.createDictionaryExpression(e.expression,null,p);if(!h)throw new t("dictionary-renderer:expression-error","Unable to create dictionary renderer expression");const y=!c||!c.greaterEqual(4,0);y&&r.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("Dictionary script does not support native field types. Applying fallback",{version:c});const f=new a(l,y);return new n(y,u,h,f)}constructor(e,t,r,o){this._requiresFieldCoercionToString=e,this._itemNames=t,this._compiled=r,this._reader=o}get itemNames(){return this._itemNames}evaluate(e,t,o,s){try{return this._reader.bind(e,o,s),this._compiled.evaluate(this._reader,{$view:{scale:t}})}catch(e){r.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("arcade: dictionary script evaluation failed",{error:e})}return null}createDictionaryFieldsIndex(e){if(!this._requiresFieldCoercionToString)return new s(e);const t=e.map(e=>({...e,type:"esriFieldTypeString"}));return new s(t)}}class a extends i.ArcadeFeatureReader{constructor(e,t){super(),this._fieldMap=e,this._requiresFieldCoercionToString=t}_getField(e){const t=this._fieldMap[e]??e;return this._boundSchema.fieldsIndex.get(t)}field(e){if(!this._requiresFieldCoercionToString)return super.field(e,!1);const t=this._getField(e);return null==t||null==this._boundTarget.attributes[t.name]?"":""+this._boundTarget.attributes[t.name]}}e.DictionaryScriptEvaluator=n,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/Version":function(){define(["exports","./Error"],function(e,t){"use strict";e.Version=class e{constructor(e,t,r=""){this.major=e,this.minor=t,this._context=r}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}greaterEqual(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major){const r=this._context&&this._context+":",o=this._context&&this._context+" ";throw new t(r+"unsupported-version",`Required major ${o}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new e(this.major,this.minor,this._context)}static parse(r,o=""){const[s,i]=r.split("."),n=/^\s*\d+\s*$/;if(!s?.match||!n.test(s))throw new t((o&&o+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:r});if(!i?.match||!n.test(i))throw new t((o&&o+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:r});const a=parseInt(s,10),l=parseInt(i,10);return new e(a,l,o)}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define(["../../core/Error","../../core/Logger","../../core/MapUtils","../../core/sql/UnknownTimeZone","../../core/support/jsonUtils","./fieldUtils","../../time/constants","../../time/timeZoneUtils","../../chunks/datetime"],function(e,t,r,o,s,i,n,a,l){"use strict";const c=new Map;class u{static fromJSON(e){return new u(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new u(e.fields??[],y(e))}static fromLayerJSON(e){return new u(e.fields??[],y(e))}constructor(e=[],t){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;const r=[];for(const e of this.fields){const t=e?.name,o=d(t);if(t&&o){const s=p(t);this._fieldsMap.set(t,e),this._fieldsMap.set(s,e),this._normalizedFieldsMap.set(o,e),r.push(`${s}:${e.type}:${this._timeZoneByFieldName?.get(t)}`),i.isDateField(e)?(this.dateFields.push(e),this._dateFieldsSet.add(e)):i.isNumericField(e)&&(this._numericFieldsSet.add(e),this.numericFields.push(e)),i.isObjectIDField(e)||i.isGlobalIDField(e)||(e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)i.isObjectIDField(e)||i.isGlobalIDField(e)||e.nullable||void 0!==i.getFieldDefaultValue(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let t=this._fieldsMap.get(e);return t||(t=this._fieldsMap.get(p(e))??this._normalizedFieldsMap.get(d(e)),t&&this._fieldsMap.set(e,t),t)}getTimeZone(r){const o=this.get(r&&"string"!=typeof r?r.name:r);return o?this._timeZoneByFieldName?this._timeZoneByFieldName.get(o.name):"date"===o.type||"esriFieldTypeDate"===o.type?(t.getLogger("esri.layers.support.FieldsIndex").errorOnce(new e("getTimeZone:no-timezone-information",`no time zone information for field '${o.name}'`)),n.utc):h.has(o.type)?n.unknown:null:null}getLuxonTimeZone(e){const t=this.getTimeZone(e);return t?t===n.unknown?o.UnknownTimeZone.instance:t===n.utc?l.FixedOffsetZone.utcInstance:r.getOrCreateMapValue(c,t,()=>l.IANAZone.create(t)):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return i.isTimeOnlyField(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map(e=>s.isSerializable(e)?e.toJSON():e),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function p(e){return e.trim().toLowerCase()}function d(e){return i.normalizeFieldName(e)?.toLowerCase()??""}const h=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function y(e){const t=new Map;if(!e.fields)return t;const r=!0===e.datesInUnknownTimezone,{timeInfo:o,editFieldsInfo:s}=e,i=(o?"startField"in o?o.startField:o.startTimeField:"")??"",l=(o?"endField"in o?o.endField:o.endTimeField:"")??"",c="dateFieldsTimeZone"in e?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?a.fromTimeReference(e.dateFieldsTimeReference):null,u=s?"timeZone"in s?s.timeZone??c:s.dateFieldsTimeReference?a.fromTimeReference(s.dateFieldsTimeReference):c??n.utc:null,d=o?"timeZone"in o?o.timeZone??c:o.timeReference?a.fromTimeReference(o.timeReference):c:null,y=new Map([[p(s?.creationDateField??""),u],[p(s?.editDateField??""),u],[p(i),d],[p(l),d]]);for(const{name:o,type:s}of e.fields)if(h.has(s))t.set(o,n.unknown);else if("date"!==s&&"esriFieldTypeDate"!==s)t.set(o,null);else if(r)t.set(o,n.unknown);else{const e=y.get(p(o??""))??c;t.set(o,e)}return t}return u})},"esri/core/sql/UnknownTimeZone":function(){define(["exports","../../chunks/datetime"],function(e,t){"use strict";class r{static{this.instance=new t.IANAZone("Etc/UTC")}}function o(e){return e instanceof t.Zone?e===r.instance:"unknown"===e?.toString().toLowerCase()}e.UnknownTimeZone=r,e.isUnknownTimeZone=o,e.substituteUnknownTimezone=function(e){return o(e)?r.instance:e},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/ArcadeExpression":function(){define(["exports","../arcade/ArcadeDate","../core/Error","../core/has","../core/sql/DateOnly","../core/sql/TimeOnly","../geometry/support/jsonUtils","../layers/support/FieldsIndex","./loadArcade","../time/constants"],function(e,t,r,o,s,i,n,a,l,c){"use strict";const u=["geometry","scale","timeProperties"];class p{static async create(e,t,o,s){const{arcade:i,Dictionary:n}=await l.loadArcade();let a;try{a=i.parseScript(e)}catch(t){throw new r("arcade-bad-expression","Failed to parse arcade script",{script:e,error:t})}const c=i.scriptUsesGeometryEngine(a);c&&await i.enableGeometrySupport(),await i.loadDependentModules(new Set,a,null,!1,c);const u={vars:s.reduce((e,t)=>({...e,[t]:null}),{}),spatialReference:t,useAsync:!1},d=i.compileScript(a,u);let h=null;null!=o&&(h=new n(o),h.immutable=!0);const y=new n;return y.immutable=!1,y.setField("scale",0),new p(e,i,a,d,t,y,h,n)}constructor(e,t,r,o,s,i,n,a){this.script=e,this._arcade=t,this._syntaxTree=r,this._compiled=o,this._spatialReference=s,this._viewDict=i,this._configDict=n,this._dictionaryCtor=a,this._dependencies=new Map,this._featureReader=new d,this._dependencies.set("geometry",t.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}evaluate(e,r){const o=r.$view?.timeZone;if(r.$view){let e;if(this._viewDict.setField("scale",r.$view.scale),null!=r.$view.timeProperties){const{currentStart:s,currentEnd:i}=r.$view.timeProperties;e=new this._dictionaryCtor({currentStart:null!=s?null!=o?t.ArcadeDate.epochToArcadeDate(s,o):t.ArcadeDate.unknownEpochToArcadeDate(s):void 0,currentEnd:null!=i?null!=o?t.ArcadeDate.epochToArcadeDate(i,o):t.ArcadeDate.unknownEpochToArcadeDate(i):void 0,startIncluded:!0,endIncluded:!0})}this._viewDict.setField("timeProperties",e)}return this._compiled({vars:{$view:this._viewDict,$config:this._configDict,$feature:e},spatialReference:this._spatialReference,timeZone:o})}repurposeFeature(e,t){return this._featureReader.bind(e,t,this._spatialReference),this._featureReader}references(e){return this._dependencies.get(e)??!1}}class d{constructor(){this._boundTarget=null,this._boundSchema={fields:null,fieldsIndex:null,spatialReference:null,get geometryType(){return null},get objectIdField(){return null}},this.arcadeDeclaredClass="esri.arcade.Feature",this._contextTimeZone=null}bind(e,t,r){const o=t??new a(h(e.attributes));this._boundTarget=e,this._boundSchema.fields=o.fields,this._boundSchema.fieldsIndex=o,this._boundSchema.spatialReference=r}_getField(e){return this._boundSchema.fieldsIndex.get(e)}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(e){this._contextTimeZone=e}readArcadeFeature(){return this}hasField(e){return this._boundSchema.fieldsIndex.has(e)}geometry(){if("fromJSON"in this._boundTarget)return this._boundTarget.geometry;const e=n.fromJSON(this._boundTarget.geometry);if(e){if(!this._boundSchema.spatialReference)throw new Error("InternalError: Expected spatial reference to be defined");e.spatialReference=this._boundSchema.spatialReference}return e}isUnknownDateTimeField(e){return this._boundSchema.fieldsIndex.getTimeZone(e)===c.unknown}field(e,r=!0){const o=this._getField(e);if(o){const r=this._boundTarget.attributes[o.name];if(null==r)return null;switch(o.type){case"date-only":case"esriFieldTypeDateOnly":return s.DateOnly.fromReader(r);case"time-only":case"esriFieldTypeTimeOnly":return i.TimeOnly.fromReader(r);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return t.ArcadeDate.fromReaderAsTimeStampOffset(r);case"date":case"esriFieldTypeDate":return this.isUnknownDateTimeField(e)?t.ArcadeDate.unknownEpochToArcadeDate(r):t.ArcadeDate.epochToArcadeDate(r,this.contextTimeZone??c.system);default:return r}}if(r)throw new Error(`Field ${e} does not exist`);return null}setField(e,t){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this._boundSchema.fieldsIndex.fields.map(e=>e.name)}castToText(e=!1){return JSON.stringify(this._boundTarget)}gdbVersion(){return null}fullSchema(){return this._boundSchema}castAsJson(e=null){return{attributes:this._boundTarget.attributes,geometry:!0===e?.keepGeometryType?this.geometry():this.geometry()?.toJSON()??null}}castAsJsonAsync(e=null,t=null){return Promise.resolve(this.castAsJson(t))}}function h(e){const t=[];for(const r in e)t.push({name:r,alias:r,type:"string"==typeof e[r]?"esriFieldTypeString":"esriFieldTypeDouble"});return t}e.ArcadeExpression=p,e.ArcadeFeatureReader=d,e.collectExpressionDependencies=function(e,t){if(null!=t)for(const r of u)t.hasArcadeDependency(r)&&e.add(r);return e},e.createDictionaryExpression=function(e,t,r){return p.create(e,t,r,["$feature","$view","$config"])},e.createLabelExpression=function(e,t){return p.create(e,t,null,["$feature","$view"])},e.createRendererExpression=function(e,t){return p.create(e,t,null,["$feature","$view"])},e.deriveFields=h,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeDate":function(){define(["exports","./enum","../core/string","../core/sql/UnknownTimeZone","../chunks/datetime"],function(e,t,r,o,s){"use strict";const i={TimeZoneNotRecognized:"Timezone identifier has not been recognized."};class n extends Error{constructor(e,t){super(r.replace(i[e],t)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,n)}}function a(e,t,r){return e<t?e-t:e>r?e-r:0}function l(e,t,r){return e<t?t:e>r?r:e}class c{constructor(e){this._date=e,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(e=0,t=1,r=1,o=0,i=0,n=0,p=0,d){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(o)||isNaN(i)||isNaN(n)||isNaN(p))return null;const h=s.DateTime.local(e,t).daysInMonth;let y=s.DateTime.fromObject({day:l(r,1,h),year:e,month:l(t,1,12),hour:l(o,0,23),minute:l(i,0,59),second:l(n,0,59),millisecond:l(p,0,999)},{zone:u(d)});return y=y.plus({months:a(t,1,12),days:a(r,1,h),hours:a(o,0,23),minutes:a(i,0,59),seconds:a(n,0,59),milliseconds:a(p,0,999)}),new c(y)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(e,t){const r=u(t);return e.isUnknownTimeZone||r===o.UnknownTimeZone.instance?c.fromParts(e.year,e.monthJS+1,e.day,e.hour,e.minute,e.second,e.millisecond,r):new c(e._date.setZone(r))}static dateJSToArcadeDate(e){return new c(s.DateTime.fromJSDate(e,{zone:"system"}))}static dateJSAndZoneToArcadeDate(e,t="system"){const r=u(t);return new c(s.DateTime.fromJSDate(e,{zone:r}))}static unknownEpochToArcadeDate(e){return new c(s.DateTime.fromMillis(e,{zone:o.UnknownTimeZone.instance}))}static unknownDateJSToArcadeDate(e){return new c(s.DateTime.fromMillis(e.getTime(),{zone:o.UnknownTimeZone.instance}))}static epochToArcadeDate(e,t="system"){const r=u(t);return new c(s.DateTime.fromMillis(e,{zone:r}))}static dateTimeToArcadeDate(e){return new c(e)}clone(){return new c(this._date)}changeTimeZone(e){const t=u(e);return c.dateTimeToArcadeDate(this._date.setZone(t))}static dateTimeAndZoneToArcadeDate(e,t){const r=u(t);return e.zone===o.UnknownTimeZone.instance||r===o.UnknownTimeZone.instance?c.fromParts(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond,r):new c(e.setZone(r))}static nowToArcadeDate(e){const t=u(e);return new c(s.DateTime.fromJSDate(new Date,{zone:t}))}static nowUTCToArcadeDate(){return new c(s.DateTime.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===c.systemTimeZoneCanonicalName}equals(e){return this.isSystem&&e.isSystem?this.toNumber()===e.toNumber():this.isUnknownTimeZone===e.isUnknownTimeZone&&this._date.equals(e._date)}get isUnknownTimeZone(){return this._date.zone===o.UnknownTimeZone.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let e=this._date.weekday;return e>6&&(e=0),e}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";const e=this.zone;return"fixed"===e.type?0===e.fixed?"UTC":e.formatOffset(0,"short"):e.name}stringify(){return JSON.stringify(this.toJSDate())}plus(e){return new c(this._date.plus(e))}diff(e,t){return this._date.diff(e._date,t)[t]}toISODate(){return this._date.toISODate()}toISOString(e){return e?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(e,t){return this._date.toISOTime({suppressMilliseconds:e,includeOffset:t&&!this.isUnknownTimeZone})}toFormat(e,t){return this.isUnknownTimeZone&&(e=e.replaceAll("Z","")),this._date.toFormat(e,t)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new c(this._date.toUTC())}toLocal(){return new c(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(e){if(!e)return null;const t=s.DateTime.fromISO(e,{setZone:!0});return new c(t)}}function u(e,r=!0){if(e instanceof s.Zone)return e;switch(t.toStringEnumKey(e)){case"system":return"system";case"utc":return"UTC";case"unknown":return o.UnknownTimeZone.instance}if(/^[+-]?[0-9]{1,2}(:[0-9]{2})?$/.test(e)){const t=s.FixedOffsetZone.parseSpecifier("UTC"+(e.startsWith("+")||e.startsWith("-")?"":"+")+e);if(t)return t}const i=s.IANAZone.create(e);if(!i.isValid){if(r)throw new n("TimeZoneNotRecognized");return null}return i}e.ArcadeDate=c,e.ArcadeDateError=n,e.arcadeDateErrorMessages=i,e.createDateTimeZone=u,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/enum":function(){define(["exports","./executionError"],function(e,t){"use strict";function r(e){return e.toLowerCase().replaceAll(/[\s-]+/g,"")}e.StringEnum=class{constructor(e,t){const o=new Map;for(const t of e){const e=r(t);if(o.has(e))throw new Error(`${t} already added as ${o.get(e)}`);o.set(e,t)}if(null!=t)for(const[e,s]of t){const t=r(e);if(o.has(t))throw new Error(`${e} already associated with ${o.get(t)}`);o.set(t,s)}this._enumMap=o}lookup(e){return this._enumMap.get(r(e))}get(e){const r=this.lookup(e);if(null==r)throw new t.ArcadeExecutionError(null,"InvalidParameter",null);return r}},e.toStringEnumKey=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/executionError":function(){define(["exports","../core/string"],function(e,t){"use strict";const r={TypeNotAllowedInFeature:"Feature attributes only support dates, numbers, strings, guids.",LogicError:"Logic error - {reason}",CannotCompareDateAndTime:"Cannot compare date or dateonly with timeonly types",NeverReach:"Encountered unreachable logic",AsyncNotEnabled:"Async Arcade must be enabled for this script",ModuleAccessorMustBeString:"Module accessor must be a string",ModuleExportNotFound:"Module has no export with provided identifier",ModulesNotSupported:"Current profile does not support modules",ArrayAccessMustBeNumber:"Array accessor must be a number",FunctionNotFound:"Function not found",FieldNotFound:"Key not found - {key}",CircularModules:"Circular module dependencies are not allowed",Cancelled:"Execution cancelled",UnsupportedHashType:"Type not supported in hash function",IllegalResult:"Value is not a supported return type",PortalRequired:"Portal is required",InvalidParameter:"Invalid parameter",WrongNumberOfParameters:"Call with wrong number of parameters",Unrecognized:"Unrecognized code structure",UnrecognizedType:"Unrecognized type",WrongSpatialReference:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",BooleanConditionRequired:"Conditions must use booleans",NoFunctionInDictionary:"Dictionaries cannot contain functions.",NoFunctionInArray:"Arrays cannot contain functions.",NoFunctionInTemplateLiteral:"Template Literals do not expect functions by value.",KeyAccessorMustBeString:"Accessor must be a string",KeyMustBeString:"Object keys must be a string",Immutable:"Object is immutable",UnexpectedToken:"Unexpected token",MemberOfNull:"Cannot access property of null object",MaximumCallDepth:"Exceeded maximum function depth",OutOfBounds:"Out of bounds",InvalidIdentifier:"Identifier not recognized",CallNonFunction:"Expression is not a function",InvalidMemberAccessKey:"Cannot access value using a key of this type",AssignModuleFunction:"Cannot assign function to module variable",UnsupportUnaryOperator:"Unsupported unary operator",UnsupportedOperator:"Unsupported operator",LogicalExpressionOnlyBoolean:"Logical expressions must be boolean",LogicExpressionOrAnd:"Logical expression can only be combined with || or &&",CannotChangeTimeZoneTime:"Cannot change the timezone of a Time",CannotChangeTimeZoneDateOnly:"Cannot change the timezone of a DateOnly",FeatureSetDoesNotHaveSubtypes:"FeatureSet does not have subtypes"};class o extends Error{constructor(...e){super(...e)}}class s extends o{constructor(e,t){super(n(t)+e.message,{cause:e}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,s),t?.loc&&(this.loc=t.loc)}}class i extends Error{constructor(e,o,s,a){super("Execution error - "+n(s)+t.replace(r[o],a)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,i),s?.loc&&(this.loc=s.loc)}}function n(e){return e&&e.loc?`Line : ${e.loc.start?.line}, ${e.loc.start?.column}: `:""}class a extends Error{constructor(e,o,s,i){super("Compilation error - "+n(s)+t.replace(r[o],i)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,a),s?.loc&&(this.loc=s.loc)}}class l extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,l)}}const c={UnrecognizedUri:"Unrecognized uri - {uri}",UnsupportedUriProtocol:"Unrecognized uri protocol"};class u extends Error{constructor(e,r){super(t.replace(c[e],r)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,u)}}e.ArcadeCompilationError=a,e.ArcadeExecutionError=i,e.ArcadeUncompilableError=l,e.ErrorWithCause=o,e.LocatableArcadeExecutionError=s,e.ModuleError=u,e.ensureArcadeExecutionError=function(e,t,r){return"esri.arcade.arcadeexecutionerror"===r.declaredRootClass||"esri.arcade.arcadecompilationerror"===r.declaredRootClass?null===r.loc&&t?.loc?new s(r,{cause:r}):r:("esri.arcade.featureset.support.featureseterror"===r.declaredRootClass||"esri.arcade.featureset.support.sqlerror"===r.declaredRootClass||r.declaredRootClass,t?.loc?new s(r,{cause:r}):r)},e.executionErrorMessages=r,e.moduleErrorMessages=c,e.parsingValidationMessage=function(e,o,s){return"Parsing error - "+n(e)+t.replace(r[o],s)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/DateOnly":function(){define(["exports","../../arcade/ArcadeDate","../../intl/locale","../../chunks/datetime"],function(e,t,r,o){"use strict";function s(e){e=e.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let t="";const r=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const o of e.match(r)||[])switch(o){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"X":case"x":t+=o;break;default:o.length>=2&&o.startsWith("[")&&o.endsWith("]")?t+=`'${o.slice(1,-1)}'`:t+=`'${o}'`}return t}const i="esri.core.sql.dateonly";class n{constructor(e,t,r){this._year=e,this._month=t,this._day=r,this.declaredRootClass=i}static isDateOnly(e){return"object"==typeof e&&null!=e&&"declaredRootClass"in e&&e.declaredRootClass===i}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(e){return n.isDateOnly(e)&&e.day===this.day&&e.month===this.month&&e.year===this.year}clone(){return new n(this._year,this._month,this._day)}toDateTime(e){return o.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:t.createDateTimeZone(e)})}toDateTimeLuxon(e){return o.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:t.createDateTimeZone(e)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(e=null,o=!0){if(null===e||""===e)return this.toString();if(o&&(e=s(e)),!e)return"";const i=this.toDateTime("unknown");return t.ArcadeDate.dateTimeToArcadeDate(i).toFormat(e,{locale:r.getLocale(),numberingSystem:"latn"})}toArcadeDate(){const e=this.toDateTime("unknown");return t.ArcadeDate.dateTimeToArcadeDate(e)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(e,t){return n.fromDateTime(this.toUTCDateTime().plus({[e]:t}))}toUTCDateTime(){return o.DateTime.utc(this.year,this.month,this.day,0,0,0,0)}difference(e,t){switch(t.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return"M"===t?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}static fromMilliseconds(e){const t=o.DateTime.fromMillis(e,{zone:o.FixedOffsetZone.utcInstance});return t.isValid?n.fromParts(t.year,t.month,t.day):null}static fromSeconds(e){const t=o.DateTime.fromSeconds(e,{zone:o.FixedOffsetZone.utcInstance});return t.isValid?n.fromParts(t.year,t.month,t.day):null}static fromReader(e){if(!e)return null;const t=e.split("-");return 3!==t.length?null:new n(parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10))}static fromParts(e,t,r){const o=new n(e,t,r);return!1===o.isValid?null:o}static fromDateJS(e){return n.fromParts(e.getFullYear(),e.getMonth()+1,e.getDay())}static fromDateTime(e){return n.fromParts(e.year,e.month,e.day)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,t=null){if(""===e)return null;if(null===e)return null;const r=[];if(t)(t=s(t))&&r.push(t);else if(null===t||""===t){const t=o.DateTime.fromISO(e,{setZone:!0});return t.isValid?n.fromParts(t.year,t.month,t.day):null}for(const s of r){const r=o.DateTime.fromFormat(e,t??s);if(r.isValid)return new n(r.year,r.month,r.day)}return null}static fromNow(e="system"){const r=o.DateTime.fromJSDate(new Date).setZone(t.createDateTimeZone(e));return new n(r.year,r.month,r.day)}}e.DateOnly=n,e.standardizeDateOnlyFormat=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/TimeOnly":function(){define(["exports","../../arcade/kernel","../../intl/locale","../../chunks/datetime"],function(e,t,r,o){"use strict";function s(e){if(!e)return"";const t=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let r="";for(const o of e.match(t)||[])switch(o){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":r+=o;break;case"A":case"a":r+="a";break;default:r+=`'${o}'`}return r}const i="esri.core.sql.timeonly";class n{constructor(e,t,r,o){this._hour=e,this._minute=t,this._second=r,this._millisecond=o,this.declaredRootClass=i}static isTimeOnly(e){return"object"==typeof e&&null!=e&&"declaredRootClass"in e&&e.declaredRootClass===i}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(e){return n.isTimeOnly(e)&&e.hour===this.hour&&e.minute===this.minute&&e.second===this.second&&e.millisecond===this.millisecond}clone(){return new n(this.hour,this.minute,this.second,this.millisecond)}isValid(){return t.isInteger(this.hour)&&t.isInteger(this.minute)&&t.isInteger(this.second)&&t.isInteger(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(e=null){return null===e||""===e?this.toString():(e=s(e))?o.DateTime.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(e,{locale:r.getLocale(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(e,t,r,o){const s=new n(e,t,r,o);return s.isValid()?s:null}static fromReader(e){if(!e)return null;const t=e.split(":");return 3!==t.length?null:new n(parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10),0)}static fromMilliseconds(e){if(e>864e5||e<0)return null;const t=Math.floor(e/1e3%60),r=Math.floor(e/6e4%60),o=Math.floor(e/36e5%24),s=Math.floor(e%1e3);return new n(o,r,t,s)}static fromDateJS(e){return new n(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}static fromDateTime(e){return new n(e.hour,e.minute,e.second,e.millisecond)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,t=null){if(""===e)return null;if(null===e)return null;const r=[];t?(t=s(t))&&r.push(t):null!==t&&""!==t||(r.push("HH:mm:ss"),r.push("HH:mm:ss.SSS"),r.push("hh:mm:ss a"),r.push("hh:mm:ss.SSS a"),r.push("HH:mm"),r.push("hh:mm a"),r.push("H:mm"),r.push("h:mm a"),r.push("H:mm:ss"),r.push("h:mm:ss a"),r.push("H:mm:ss.SSS"),r.push("h:mm:ss.SSS a"));for(const t of r){const r=o.DateTime.fromFormat(e,t);if(r.isValid)return new n(r.hour,r.minute,r.second,r.millisecond)}return null}plus(e,t){switch(e){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return n.fromDateTime(this.toUTCDateTime().plus({[e]:t}))}return null}toUTCDateTime(){return o.DateTime.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(e,t){switch(t.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return"M"===t?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}}e.TimeOnly=n,e.standardizeTimeFormat=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/kernel":function(){define(["exports","../geometry/Extent"],function(e,t){"use strict";e.cloneGeometry=function(e){if(null==e)return null;const t=e.clone();return void 0!==e.cache._geVersion&&(t.cache._geVersion=e.cache._geVersion),t},e.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},e.sameGeomType=function(e,t){return e===t||"point"===e&&"esriGeometryPoint"===t||"polyline"===e&&"esriGeometryPolyline"===t||"polygon"===e&&"esriGeometryPolygon"===t||"extent"===e&&"esriGeometryEnvelope"===t||"multipoint"===e&&"esriGeometryMultipoint"===t||"point"===t&&"esriGeometryPoint"===e||"polyline"===t&&"esriGeometryPolyline"===e||"polygon"===t&&"esriGeometryPolygon"===e||"extent"===t&&"esriGeometryEnvelope"===e||"multipoint"===t&&"esriGeometryMultipoint"===e},e.shapeExtent=function(e){if(null==e)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new t({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/utils":function(){define(["require","exports","./defaultCIMValues"],function(e,t,r){"use strict";function o(e){return"function"==typeof e}function s(e){let t=e.length;for(;t--;)if(!" /-,\n".includes(e.charAt(t)))return!1;return!0}function i(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function n(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function a(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}class l{constructor(e){this._import=e}getImportPromise(){return null==this._promise&&(this._promise=this._import().then(e=>this.module=e)),this._promise}}function c(e){return new l(e)}const u=c(()=>new Promise((t,r)=>e(["../../geometry/geometryEngineJSON"],t,r)));function p(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}function d(e,t){if("color"===t||"outlinecolor"===t||"backgroundcolor"===t||"borderlinecolor"===t||"tintcolor"===t)return[...r.defaultCIMColor[t]];const o=r.defaultCIMValues[e];if(!o)throw new Error(`InternalError: default value for type ${e}.`);return o[t]}function h(e){return e.split(" ").map(e=>Number(e))}function y(e){return"string"==typeof e?h(e):e}function f(e,t){if(null!==t){const r=t.get(e);return r?r.name:e}return e}function m(e,t,r,o,s){const i=r*Math.PI/180;if(i){const r=Math.cos(i);return(Math.sin(i)*e+r*t)*o+s}return t*o+s}function g(e,t,r,o,s){const i=r*Math.PI/180;return i?(Math.cos(i)*e-Math.sin(i)*t)*o+s:e*o+s}function b(e,t,r){return t?r-e:r+e}t.adjustTextCase=i,t.analyzeTextParts=function(e,t){const r=[];let o=0,i=-1;do{if(i=e.indexOf("[",o),i>=o){if(i>o){const t=e.slice(o,i);r.push([t,null,s(t)])}if(o=i+1,i=e.indexOf("]",o),i>=o){if(i>o){const s=t[e.slice(o,i)];s&&r.push([null,s,!1])}o=i+1}}}while(-1!==i);if(o<e.length){const t=e.slice(o);r.push([t,null,s(t)])}return r},t.applyParentTransform=function(e,t,r,o,s,i,n=!0){const{infos:a}=i;let l=1,c=0,u=0,p=0,d=1;for(const{absoluteAnchorPoint:e,offsetX:t,offsetY:r,rotation:o,size:s,frameHeight:i,rotateClockWise:h,scaleSymbolsProportionally:y}of a)d=e?1:l,u=g(t,r,c,d,u),p=m(t,r,c,d,p),i&&(y||n)&&(l*=s/i),c=b(o,h,c);const h=g(o,s,c,d,u),y=m(o,s,c,d,p);return{size:e*l,rotation:b(t,r,c),offsetX:h,offsetY:y}},t.assignTextValuesFromFeature=function(e,t,r,o){let s="",n=null;for(const o of t){const[t,i,a]=o;if(null!=t&&""!==t)a?n=t:(null!=n&&(s+=n,n=null),s+=t);else{let t=i;null!=r&&(t=f(i,r));const o=e.attributes[t];null!=o&&""!==o&&(null!=n&&(s+=n,n=null),s+=o)}}return i(s,o)},t.attributesToFields=function(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"}))},t.colorToArray=function(e){return[e.r,e.g,e.b,e.a]},t.evaluateValueOrFunction=function(e,t,r,s){return o(e)?e(t,r,s):e},t.fromCIMFontDecoration=function(e){return e.underline?"underline":e.strikethrough?"line-through":"none"},t.fromCIMFontStyle=function(e){let t="normal",r="normal";if(e){const o=e.toLowerCase();o.includes("italic")?t="italic":o.includes("oblique")&&(t="oblique"),o.includes("bold")?r="bold":o.includes("light")&&(r="lighter")}return{style:t,weight:r}},t.fromCIMHorizontalAlignment=function(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}},t.fromCIMVerticalAlignment=function(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}},t.getDefaultCIMValue=d,t.getEnum=(e,t)=>e??t,t.getFieldName=f,t.getFillColor=function e(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const r of t.symbolLayers){const t=e(r);if(null!=t)return t}break;case"CIMTextSymbol":return e(t.symbol);case"CIMSolidFill":return t.color}return null},t.getFontStyle=function(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}},t.getFontWeight=function(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}},t.getNumericValue=(e,t=0)=>null==e||isNaN(e)?t:e,t.getProcessParam=function(e,t,r){const o="Color"===r||"TintColor"===r||"ToColor"===r,s="Rotation"===r||"Angle"===r||"ToRotation"===r;let i=t[p(r)];if(null!=i&&(o?i=[i[0]/255,i[1]/255,i[2]/255,i[3]/255]:s&&(i*=Math.PI/180)),null==i&&(i=d(t.type,r.toLowerCase()),null!=i&&(o?i=[i[0]/255,i[1]/255,i[2]/255,i[3]]:s&&(i*=Math.PI/180))),null!=t.primitiveName){const n=e[t.primitiveName];if(null!=n){const e=n[r];null==e||("string"==typeof e||"number"==typeof e||Array.isArray(e)?(i=e,null!=i&&(o?i=[i[0]/255,i[1]/255,i[2]/255,i[3]/255]:s&&(i*=Math.PI/180))):(i={valueExpressionInfo:e,defaultValue:i},null!=i&&(o?i={type:"Process",op:"ArcadeColor",value:i}:s&&(i={type:"Process",op:"Divide",left:i,right:180/Math.PI}))))}}if(null==i)throw new Error(`Failed to derive a value or an expression for "${r}".`);return i},t.getRelativeGradientSize=function(e,t){return Math.max(Math.min((e??t)/100,1),0)},t.getSize=function(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers)for(const o of e.symbolLayers)if(o)switch(o.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const e=o.size??r.defaultCIMValues.CIMVectorMarker.size;e>t&&(t=e);break}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers)for(const o of e.symbolLayers)if(o)switch(o.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const e=o.width;null!=e&&e>t&&(t=e);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(o.markerPlacement&&a(o.markerPlacement)){const e=o.size??r.defaultCIMValues.CIMVectorMarker.size;e>t&&(t=e)}break;case"CIMPictureFill":{const e=o.height;null!=e&&e>t&&(t=e)}}return t}}},t.getStrokeColor=function e(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const r=t.symbolLayers;if(r)for(const t of r){const r=e(t);if(null!=r)return r}break}case"CIMTextSymbol":return e(t.symbol);case"CIMSolidStroke":return t.color}},t.getStrokeWidth=function e(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const r of t.symbolLayers){const t=e(r);if(void 0!==t)return t}break;case"CIMTextSymbol":return e(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}},t.getTextCasing=function e(t){if(null==t)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const r=t.symbolLayers;if(!r)return"Normal";for(const t of r)if("CIMVectorMarker"===t.type)return e(t)}break;case"CIMVectorMarker":{const r=t.markerGraphics;if(!r)return"Normal";for(const t of r)if(t.symbol)return e(t.symbol)}}return"Normal"},t.getTextValuesFromFeatureHandle=function(e,t,r){let o="",s=null;for(const r of t){const[t,i,n]=r;if(null!=t&&""!==t)n?s=t:(null!=s&&(o+=s,s=null),o+=t);else{const t=e.readAttribute(i);null!=t&&""!==t&&(null!==s&&(o+=s,s=null),o+=t)}}return i(o,r)},t.getTintColor=e=>e.tintColor?n(e.tintColor):[255,255,255,1],t.getValue=(e,t)=>null!=e?e:t,t.hasProcessParam=function(e,t,r){if(null!=t[p(r)])return!0;if(null!=t.primitiveName){const o=e[t.primitiveName];if(null!=o&&null!=o[r])return!0}return!1},t.hasStrokeLayer=function(e){for(const t of e)if(t.enable)switch(t.type){case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return!0}return!1},t.importLazily=c,t.isCIMFill=function(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)},t.isCIMMarker=function(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type},t.isCIMMarkerStrokePlacement=a,t.isCIMStroke=function(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type},t.isFeatureValueFn=o,t.isSVGImage=e=>e.includes("data:image/svg+xml"),t.isValidCIMValue=function e(t){if(null==t)return!1;if(Array.isArray(t))return t.every(t=>e(t));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}},t.lazyGeometryEngine=u,t.mapCIMSymbolToGeometryType=function(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}},t.normalizeAlpha=n,t.normalizeDashEffectTemplate=function(e){return e?.dashTemplate&&(e.dashTemplate=y(e.dashTemplate)),e},t.normalizeDashTemplate=y,t.normalizePrimitiveOverrideProps=function(e){return e.map(e=>({...e,propertyName:p(e.propertyName)}))},t.parseDashTemplate=h,t.resampleHermite=function(e,t,r,o,s,i,n=!0){const a=t/s,l=r/i,c=Math.ceil(a/2),u=Math.ceil(l/2);for(let r=0;r<i;r++)for(let p=0;p<s;p++){const d=4*(p+(n?i-r-1:r)*s);let h=0,y=0,f=0,m=0,g=0,b=0,_=0;const S=(r+.5)*l;for(let o=Math.floor(r*l);o<(r+1)*l;o++){const r=Math.abs(S-(o+.5))/u,s=(p+.5)*a,i=r*r;for(let r=Math.floor(p*a);r<(p+1)*a;r++){let n=Math.abs(s-(r+.5))/c;const a=Math.sqrt(i+n*n);a>=-1&&a<=1&&(h=2*a*a*a-3*a*a+1,h>0&&(n=4*(r+o*t),_+=h*e[n+3],f+=h,e[n+3]<255&&(h=h*e[n+3]/250),m+=h*e[n],g+=h*e[n+1],b+=h*e[n+2],y+=h))}}o[d]=m/y,o[d+1]=g/y,o[d+2]=b/y,o[d+3]=_/f}},t.toCIMSymbolJSON=function(e){return e.data?.symbol??null},t.toLowerCaseProps=function(e){const t={};for(const r in e){const o=e[r];t[p(r)]=o}return t},t.uncapitalize=p,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/defaultCIMValues":function(){define(["exports"],function(e){"use strict";e.defaultCIMColor={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},e.defaultCIMValues={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:0,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:0,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:"Loop",repeatdelay:0,easing:"Linear"},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/DotDensityRenderer":function(){define(["exports","../chunks/tslib.es6","../Color","../core/lang","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","../layers/support/fieldUtils","./Renderer","./mixins/VisualVariablesMixin","./support/AttributeColorInfo","./support/DotDensityLegendOptions","../symbols/SimpleFillSymbol","../symbols/SimpleLineSymbol"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f){"use strict";var m;return e.default=m=class extends(p.VisualVariablesMixin(u)){constructor(e){super(e),this.attributes=null,this.backgroundColor=new r([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new f,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}set visualVariables(e){super.visualVariables=e}calculateDotValue(e){if(null==this.referenceScale)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new y({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce((e,t)=>e+t.getAttributeHash(),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new m({attributes:o.clone(this.attributes),backgroundColor:o.clone(this.backgroundColor),dotBlendingEnabled:o.clone(this.dotBlendingEnabled),dotShape:o.clone(this.dotShape),dotSize:o.clone(this.dotSize),dotValue:o.clone(this.dotValue),legendOptions:o.clone(this.legendOptions),outline:o.clone(this.outline),referenceScale:o.clone(this.referenceScale),seed:o.clone(this.seed),visualVariables:o.clone(this.visualVariables),authoringInfo:o.clone(this.authoringInfo)})}getControllerHash(){const e=this.attributes?.map(e=>e.field||e.valueExpression||"");return`${e}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes??[])r.valueExpression&&await c.collectArcadeFieldNames(e,t,r.valueExpression),r.field&&e.add(r.field)}},t.__decorate([s.property({type:[d],json:{write:!0}})],e.default.prototype,"attributes",void 0),t.__decorate([s.property({type:r,json:{write:!0}})],e.default.prototype,"backgroundColor",void 0),t.__decorate([s.property({type:Boolean,json:{write:!0}})],e.default.prototype,"dotBlendingEnabled",void 0),t.__decorate([s.property({type:String,json:{write:!1}})],e.default.prototype,"dotShape",void 0),t.__decorate([s.property({type:Number,json:{write:!0}})],e.default.prototype,"dotSize",void 0),t.__decorate([s.property({type:h,json:{write:!0}})],e.default.prototype,"legendOptions",void 0),t.__decorate([s.property({type:f,json:{default:null,write:!0}})],e.default.prototype,"outline",void 0),t.__decorate([s.property({type:Number,json:{write:!0}})],e.default.prototype,"dotValue",void 0),t.__decorate([s.property({type:Number,json:{write:!0}})],e.default.prototype,"referenceScale",void 0),t.__decorate([s.property({type:Number,json:{write:!0}})],e.default.prototype,"seed",void 0),t.__decorate([a.enumeration({dotDensity:"dot-density"})],e.default.prototype,"type",void 0),e.default=m=t.__decorate([l.subclass("esri.renderers.DotDensityRenderer")],e.default),e.default})},"esri/renderers/support/AttributeColorInfo":function(){define(["../../chunks/tslib.es6","../../Color","../../core/JSONSupport","../../core/Logger","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/cast","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/ensureType"],function(e,t,r,o,s,i,n,a,l,c){"use strict";var u;let p=u=class extends r.JSONSupport{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return null==e?e:"function"==typeof e?(o.getLogger(this).error(".field: field must be a string value"),null):c.ensureString(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new u({color:this.color?.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};return e.__decorate([s.property({type:t,json:{type:[Number],write:!0}})],p.prototype,"color",void 0),e.__decorate([s.property({type:String,json:{write:!0}})],p.prototype,"field",void 0),e.__decorate([i.cast("field")],p.prototype,"castField",null),e.__decorate([s.property({type:String,json:{write:!0}})],p.prototype,"label",void 0),e.__decorate([s.property({type:String,json:{write:!0}})],p.prototype,"valueExpression",void 0),e.__decorate([s.property({type:String,json:{write:!0}})],p.prototype,"valueExpressionTitle",void 0),p=u=e.__decorate([l.subclass("esri.renderers.support.AttributeColorInfo")],p),p})},"esri/renderers/support/DotDensityLegendOptions":function(){define(["../../chunks/tslib.es6","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n){"use strict";var a;let l=a=class extends t.JSONSupport{constructor(){super(...arguments),this.unit=null}clone(){return new a({unit:this.unit})}};return e.__decorate([r.property({type:String,json:{write:!0}})],l.prototype,"unit",void 0),l=a=e.__decorate([n.subclass("esri.renderers.support.DotDensityLegendOptions")],l),l})},"esri/renderers/HeatmapRenderer":function(){define(["exports","../chunks/tslib.es6","../Color","../core/lang","../core/screenUtils","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","../layers/support/fieldUtils","./Renderer","./support/AuthoringInfo","./support/HeatmapColorStop","./support/HeatmapLegendOptions","./support/heatmapUtils","../symbols/SimpleMarkerSymbol"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m){"use strict";var g;function b(e){if(null!=e){const{maxDensity:t,minDensity:r,radius:o}=e;if(null!=t||null!=r||null!=o){const{blurRadius:t,maxPixelIntensity:r,minPixelIntensity:o,...s}=e;return s}}return e}return e.default=g=class extends p{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new h({ratio:0,color:new r("rgba(255, 140, 0, 0)")}),new h({ratio:.75,color:new r("rgba(255, 140, 0, 1)")}),new h({ratio:.9,color:new r("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(e){return b(e)}get blurRadius(){return f.kernelDensityRadiusPtToGaussianBlurRadiusPx(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,r=this.minPixelIntensity;this._set("radius",f.gaussianBlurRadiusPxToKernelDensityRadiusPt(e)),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",r*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(f.magicKernelDensityRadiusInflationFactor**2*this.blurRadius**4)}read(e,t){e=b(e),super.read(e,t)}getSymbol(){return new m}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const r=this.field,o=this.valueExpression;r&&"string"==typeof r&&u.collectField(e,t,r),o&&"string"==typeof o&&await u.collectArcadeFieldNames(e,t,o)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new g({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:o.clone(this.colorStops),field:this.field,legendOptions:o.clone(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}},t.__decorate([i.property({type:d,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],e.default.prototype,"authoringInfo",void 0),t.__decorate([i.property({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],e.default.prototype,"blurRadius",null),t.__decorate([i.property({type:[h],json:{write:{isRequired:!0}}})],e.default.prototype,"colorStops",void 0),t.__decorate([i.property({type:String,json:{write:!0}})],e.default.prototype,"field",void 0),t.__decorate([i.property({type:y.HeatmapLegendOptions,json:{write:!0}})],e.default.prototype,"legendOptions",void 0),t.__decorate([i.property({type:Number,json:{write:!0}})],e.default.prototype,"maxDensity",void 0),t.__decorate([i.property({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],e.default.prototype,"maxPixelIntensity",null),t.__decorate([i.property({type:Number,json:{write:!0}})],e.default.prototype,"minDensity",void 0),t.__decorate([i.property({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],e.default.prototype,"minPixelIntensity",null),t.__decorate([i.property({type:Number,cast:s.toPt,json:{write:!0}})],e.default.prototype,"radius",void 0),t.__decorate([i.property({type:Number,range:{min:0},json:{default:0,write:!0}})],e.default.prototype,"referenceScale",void 0),t.__decorate([l.enumeration({heatmap:"heatmap"})],e.default.prototype,"type",void 0),t.__decorate([i.property({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],e.default.prototype,"valueExpression",void 0),t.__decorate([i.property({type:String})],e.default.prototype,"valueExpressionTitle",void 0),t.__decorate([i.property({readOnly:!0})],e.default.prototype,"_pixelIntensityToDensity",null),e.default=g=t.__decorate([c.subclass("esri.renderers.HeatmapRenderer")],e.default),e.default})},"esri/renderers/support/HeatmapColorStop":function(){define(["exports","../../chunks/tslib.es6","../../Color","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;return e.default=c=class extends o.JSONSupport{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new c({color:this.color&&this.color.clone(),ratio:this.ratio})}},t.__decorate([s.property({type:r,json:{type:[i.Integer],default:null,write:{isRequired:!0}}})],e.default.prototype,"color",void 0),t.__decorate([s.property({type:Number,json:{write:{isRequired:!0}}})],e.default.prototype,"ratio",void 0),e.default=c=t.__decorate([l.subclass("esri.renderers.support.HeatmapColorStop")],e.default),e.default})},"esri/renderers/support/HeatmapLegendOptions":function(){define(["exports","../../chunks/tslib.es6","../../core/Clonable","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";e.HeatmapLegendOptions=class extends(r.ClonableMixin(o.JSONSupport)){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}},t.__decorate([s.property({type:String,json:{write:!0}})],e.HeatmapLegendOptions.prototype,"minLabel",void 0),t.__decorate([s.property({type:String,json:{write:!0}})],e.HeatmapLegendOptions.prototype,"maxLabel",void 0),t.__decorate([s.property({type:String,json:{write:!0}})],e.HeatmapLegendOptions.prototype,"title",void 0),e.HeatmapLegendOptions=t.__decorate([l.subclass("esri.renderers.support.HeatmapLegendOptions")],e.HeatmapLegendOptions),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/heatmapUtils":function(){define(["exports","../../core/mathUtils","../../core/screenUtils","../../chunks/vec42","../../core/libs/gl-matrix-2/factories/vec4f64"],function(e,t,r,o,s){"use strict";function i(e,r,s,i){let{color:n,ratio:a}=r,{color:l,ratio:c}=s;if(c===a){const e=1e-6;1===c?a-=e:c+=e}const u=t.clamp((i-a)/(c-a),0,1);o.lerp(e,n.toArray(),l.toArray(),u)}e.createValueFunction=function(e){return"function"==typeof e?e:e?t=>+t[e]:()=>1},e.evaluateDensityKernel=function(e,t,r){const o=Math.sqrt(e**2+t**2)/r;return o>1?0:3/(Math.PI*r**2)*(1-o**2)**2},e.gaussianBlurRadiusPxToKernelDensityRadiusPt=function(e){return r.px2pt(2.4*e)},e.generateGradient=function(e){const t=new Uint8ClampedArray(2048);if((e=e.filter(({ratio:e})=>e>=0&&e<=1).sort((e,t)=>e.ratio-t.ratio).map(({color:e,ratio:t})=>({color:e,ratio:Math.max(t,.001)}))).length<1)return t;let r=e[0],o=e[0],n=1;const a=s.create();for(let s=0;s<512;s++){const l=(s+.5)/512;for(;l>o.ratio&&n<e.length;)r=o,o=e[n++];i(a,r,o,l),t.set(a,4*s)}return t},e.kernelDensityRadiusPtToGaussianBlurRadiusPx=function(e){return r.pt2px(e)/2.4},e.magicKernelDensityRadiusInflationFactor=2.4,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/vec42":function(){define(["exports","../core/libs/gl-matrix-2/math/common"],function(e,t){"use strict";function r(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function s(e,t,r,o,s){return e[0]=t,e[1]=r,e[2]=o,e[3]=s,e}function i(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function n(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function a(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function l(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function c(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function u(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function p(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function d(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function h(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function y(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function f(e,t,r,o){return e[0]=t[0]+r[0]*o,e[1]=t[1]+r[1]*o,e[2]=t[2]+r[2]*o,e[3]=t[3]+r[3]*o,e}function m(e,t){const r=t[0]-e[0],o=t[1]-e[1],s=t[2]-e[2],i=t[3]-e[3];return Math.sqrt(r*r+o*o+s*s+i*i)}function g(e,t){const r=t[0]-e[0],o=t[1]-e[1],s=t[2]-e[2],i=t[3]-e[3];return r*r+o*o+s*s+i*i}function b(e){const t=e[0],r=e[1],o=e[2],s=e[3];return Math.sqrt(t*t+r*r+o*o+s*s)}function _(e){const t=e[0],r=e[1],o=e[2],s=e[3];return t*t+r*r+o*o+s*s}function S(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function v(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function w(e,t){const r=t[0],o=t[1],s=t[2],i=t[3];let n=r*r+o*o+s*s+i*i;return n>0&&(n=1/Math.sqrt(n),e[0]=r*n,e[1]=o*n,e[2]=s*n,e[3]=i*n),e}function x(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function T(e,t,r,o){const s=t[0],i=t[1],n=t[2],a=t[3];return e[0]=s+o*(r[0]-s),e[1]=i+o*(r[1]-i),e[2]=n+o*(r[2]-n),e[3]=a+o*(r[3]-a),e}function M(e,r=1){const o=t.RANDOM;let s,i,n,a,l,c;do{s=2*o()-1,i=2*o()-1,l=s*s+i*i}while(l>=1);do{n=2*o()-1,a=2*o()-1,c=n*n+a*a}while(c>=1);const u=Math.sqrt((1-l)/c);return e[0]=r*s,e[1]=r*i,e[2]=r*n*u,e[3]=r*a*u,e}function I(e,t,r){const o=t[0],s=t[1],i=t[2],n=t[3];return e[0]=r[0]*o+r[4]*s+r[8]*i+r[12]*n,e[1]=r[1]*o+r[5]*s+r[9]*i+r[13]*n,e[2]=r[2]*o+r[6]*s+r[10]*i+r[14]*n,e[3]=r[3]*o+r[7]*s+r[11]*i+r[15]*n,e}function O(e,t,r){const o=t[0],s=t[1],i=t[2],n=r[0],a=r[1],l=r[2],c=r[3],u=c*o+a*i-l*s,p=c*s+l*o-n*i,d=c*i+n*s-a*o,h=-n*o-a*s-l*i;return e[0]=u*c+h*-n+p*-l-d*-a,e[1]=p*c+h*-a+d*-n-u*-l,e[2]=d*c+h*-l+u*-a-p*-n,e[3]=t[3],e}function P(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function k(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function C(e,r){const o=e[0],s=e[1],i=e[2],n=e[3],a=r[0],l=r[1],c=r[2],u=r[3],p=t.getEpsilon();return Math.abs(o-a)<=p*Math.max(1,Math.abs(o),Math.abs(a))&&Math.abs(s-l)<=p*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(i-c)<=p*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(n-u)<=p*Math.max(1,Math.abs(n),Math.abs(u))}const L=n,E=a,A=l,F=m,R=g,j=b,N=_,D=Object.freeze(Object.defineProperty({__proto__:null,add:i,ceil:c,copy:r,copyVec3:o,dist:F,distance:m,div:A,divide:l,dot:x,equals:C,exactEquals:k,floor:u,inverse:v,len:j,length:b,lerp:T,max:d,min:p,mul:E,multiply:a,negate:S,normalize:w,random:M,round:h,scale:y,scaleAndAdd:f,set:s,sqrDist:R,sqrLen:N,squaredDistance:g,squaredLength:_,str:P,sub:L,subtract:n,transformMat4:I,transformQuat:O},Symbol.toStringTag,{value:"Module"}));e.add=i,e.ceil=c,e.copy=r,e.copyVec3=o,e.dist=F,e.distance=m,e.div=A,e.divide=l,e.dot=x,e.equals=C,e.exactEquals=k,e.floor=u,e.inverse=v,e.len=j,e.length=b,e.lerp=T,e.max=d,e.min=p,e.mul=E,e.multiply=a,e.negate=S,e.normalize=w,e.random=M,e.round=h,e.scale=y,e.scaleAndAdd=f,e.set=s,e.sqrDist=R,e.sqrLen=N,e.squaredDistance=g,e.squaredLength=_,e.str=P,e.sub=L,e.subtract=n,e.transformMat4=I,e.transformQuat=O,e.vec4=D})},"esri/core/libs/gl-matrix-2/factories/vec4f64":function(){define(["exports"],function(e){"use strict";function t(){return[0,0,0,0]}function r(e){return[e[0],e[1],e[2],e[3]]}function o(e,t,r,o){return[e,t,r,o]}function s(e,t,r,o){return[e,t,r,o]}function i(e,t=[0,0,0,0]){const r=Math.min(4,e.length);for(let o=0;o<r;++o)t[o]=e[o];return t}function n(){return[0,0,0,0]}function a(){return o(1,1,1,1)}function l(){return o(1,0,0,0)}function c(){return o(0,1,0,0)}function u(){return o(0,0,1,0)}function p(){return o(0,0,0,1)}const d=[0,0,0,0],h=a(),y=l(),f=c(),m=u(),g=p(),b=Object.freeze(Object.defineProperty({__proto__:null,ONES:h,UNIT_W:g,UNIT_X:y,UNIT_Y:f,UNIT_Z:m,ZEROS:d,clone:r,create:t,freeze:s,fromArray:i,fromValues:o,ones:a,unitW:p,unitX:l,unitY:c,unitZ:u,zeros:n},Symbol.toStringTag,{value:"Module"}));e.ONES=h,e.UNIT_W=g,e.UNIT_X=y,e.UNIT_Y=f,e.UNIT_Z=m,e.ZEROS=d,e.clone=r,e.create=t,e.freeze=s,e.fromArray=i,e.fromValues=o,e.ones=a,e.unitW=p,e.unitX=l,e.unitY=c,e.unitZ=u,e.vec4f64=b,e.zeros=n,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/PieChartRenderer":function(){define(["exports","../chunks/tslib.es6","../Color","../core/arrayUtils","../core/Clonable","../core/screenUtils","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","../layers/support/fieldUtils","./Renderer","./mixins/VisualVariablesMixin","./support/AttributeColorInfo","./support/commonProperties","./support/OthersCategory","./support/RendererLegendOptions","./visualVariables/OpacityVariable","./visualVariables/SizeVariable","./visualVariables/VisualVariable","../symbols/SimpleLineSymbol","../symbols/SimpleMarkerSymbol"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b,_,S,v,w){"use strict";const x={base:S,key:"type",typeMap:{size:_,opacity:b}};return e.default=class extends(h.VisualVariablesMixin(s.ClonableMixin(d))){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new r([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new m.OthersCategory,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){return new w({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(o.isSome)}getAttributeHash(){return this.visualVariables?.reduce((e,t)=>e+t.getAttributeHash(),"")??""}getMeshHash(){return this.symbols.reduce((e,t)=>e+JSON.stringify(t),"")}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes)r.valueExpression&&await p.collectArcadeFieldNames(e,t,r.valueExpression),r.field&&e.add(r.field)}},t.__decorate([n.property({type:[y],json:{write:!0}})],e.default.prototype,"attributes",void 0),t.__decorate([n.property(f.rendererBackgroundFillSymbolProperty)],e.default.prototype,"backgroundFillSymbol",void 0),t.__decorate([n.property({type:r,json:{write:!0}})],e.default.prototype,"defaultColor",void 0),t.__decorate([n.property({type:String,json:{write:!0}})],e.default.prototype,"defaultLabel",void 0),t.__decorate([n.property({type:Number,range:{min:0,max:1},json:{write:!0}})],e.default.prototype,"holePercentage",void 0),t.__decorate([n.property({type:m.OthersCategory,json:{write:!0}})],e.default.prototype,"othersCategory",void 0),t.__decorate([n.property({type:g,json:{write:!0}})],e.default.prototype,"legendOptions",void 0),t.__decorate([n.property({type:v,json:{default:null,write:!0}})],e.default.prototype,"outline",void 0),t.__decorate([n.property({type:Number,cast:i.toPt,json:{write:!0}})],e.default.prototype,"size",void 0),t.__decorate([c.enumeration({pieChart:"pie-chart"})],e.default.prototype,"type",void 0),t.__decorate([n.property({types:[x]})],e.default.prototype,"visualVariables",void 0),e.default=t.__decorate([u.subclass("esri.renderers.PieChartRenderer")],e.default),e.default})},"esri/renderers/support/OthersCategory":function(){define(["exports","../../chunks/tslib.es6","../../Color","../../core/Clonable","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l,c){"use strict";e.OthersCategory=class extends(o.ClonableMixin(s.JSONSupport)){constructor(){super(...arguments),this.color=new r([0,0,0,0]),this.label=null,this.threshold=0}},t.__decorate([i.property({type:r,json:{write:!0}})],e.OthersCategory.prototype,"color",void 0),t.__decorate([i.property({type:String,json:{write:!0}})],e.OthersCategory.prototype,"label",void 0),t.__decorate([i.property({type:Number,range:{min:0,max:1},json:{write:!0}})],e.OthersCategory.prototype,"threshold",void 0),e.OthersCategory=t.__decorate([c.subclass("esri.renderers.support.OthersCategory")],e.OthersCategory),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FeatureReductionCluster":function(){define(["exports","../../chunks/tslib.es6","../../PopupTemplate","../../core/JSONSupport","../../core/lang","../../core/object","../../core/screenUtils","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","./AggregateField","./commonProperties","./featureLayerUtils","./LabelClass","../../renderers/SimpleRenderer","../../renderers/support/jsonUtils","../../renderers/support/typeUtils","../../symbols/support/typeUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b,_){"use strict";var S;function v(e){return"simple"===e.type&&!e.visualVariables?.length}return e.default=S=class extends o.JSONSupport{constructor(e){super(e),this.type="cluster",this.clusterRadius=n.toPt("80px"),this.clusterMinSize=n.toPt("12px"),this.clusterMaxSize=n.toPt("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(e,t,r){const o=t.drawingInfo?.renderer;return o?.authoringInfo?.isAutoGenerated?null:o?v(o)?null:g.read(o,t,r)??void 0:y.createDefaultRenderer(t,r)}readSymbol(e,t,r){const o=t.drawingInfo?.renderer;if(o?.authoringInfo?.isAutoGenerated)return null;if(o&&v(o)){const e=g.read(o,t,r);return e?.symbol}return null}writeSymbol(e,t,r,o){const s=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||s){const r=new m({symbol:e});t.drawingInfo={renderer:r.write({},o)}}}writeFields(e,t,r){const o=e.filter(e=>"avg_angle"!==e.statisticType).map(e=>e.toJSON());i.setDeepValue(r,o,t)}readFields(e,t,r){return e.filter(e=>!e.isAutoGenerated).map(e=>d.fromJSON(e))}clone(){return new S({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:s.clone(this.labelingInfo),labelsVisible:this.labelsVisible,fields:s.clone(this.fields),maxScale:this.maxScale,renderer:s.clone(this.renderer),symbol:s.clone(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:s.clone(this.popupTemplate)})}},t.__decorate([a.property({type:["cluster"],readOnly:!0,json:{write:!0}})],e.default.prototype,"type",void 0),t.__decorate([a.property({cast:e=>"auto"===e?e:l.ensureNumber(n.toPt(e)),json:{write:!0}})],e.default.prototype,"clusterRadius",void 0),t.__decorate([a.property({type:Number,cast:n.toPt,json:{write:!0}})],e.default.prototype,"clusterMinSize",void 0),t.__decorate([a.property({type:Number,cast:n.toPt,json:{write:!0}})],e.default.prototype,"clusterMaxSize",void 0),t.__decorate([a.property({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],e.default.prototype,"maxScale",void 0),t.__decorate([a.property(h.popupEnabled)],e.default.prototype,"popupEnabled",void 0),t.__decorate([a.property({type:r,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],e.default.prototype,"popupTemplate",void 0),t.__decorate([a.property({types:b.rendererTypes,json:{write:{target:"drawingInfo.renderer"}}})],e.default.prototype,"renderer",void 0),t.__decorate([c.reader("renderer",["drawingInfo.renderer"])],e.default.prototype,"readRenderer",null),t.__decorate([a.property({types:_.symbolTypesCluster})],e.default.prototype,"symbol",void 0),t.__decorate([c.reader("symbol",["drawingInfo.renderer"])],e.default.prototype,"readSymbol",null),t.__decorate([p.writer("symbol")],e.default.prototype,"writeSymbol",null),t.__decorate([a.property({type:[f],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],e.default.prototype,"labelingInfo",void 0),t.__decorate([a.property(h.labelsVisible)],e.default.prototype,"labelsVisible",void 0),t.__decorate([a.property({type:[d],json:{write:!0}})],e.default.prototype,"fields",void 0),t.__decorate([p.writer("fields")],e.default.prototype,"writeFields",null),t.__decorate([c.reader("fields")],e.default.prototype,"readFields",null),e.default=S=t.__decorate([u.subclass("esri.layers.support.FeatureReductionCluster")],e.default),e.default})},"esri/layers/support/FeatureReductionSelection":function(){define(["exports","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./FeatureReduction"],function(e,t,r,o,s,i,n,a){"use strict";var l;return e.default=l=class extends a.FeatureReduction{constructor(e){super(e),this.type="selection"}clone(){return new l}},t.__decorate([r.property({type:["selection"]})],e.default.prototype,"type",void 0),e.default=l=t.__decorate([n.subclass("esri.layers.support.FeatureReductionSelection")],e.default),e.default})},"esri/views/2d/layers/support/clusterUtils":function(){define(["exports","../../../../core/Error","../../../../core/has","../../../../core/Logger","../../../../core/MD5","../../../../layers/support/AggregateField","../../../../layers/support/ExpressionInfo","../../../../renderers/SimpleRenderer","../../../../renderers/support/AuthoringInfo","../../../../symbols/SimpleMarkerSymbol"],function(e,t,r,o,s,i,n,a,l,c){"use strict";r.add("esri-cluster-arcade-enabled",!0);const u=r("esri-cluster-arcade-enabled"),p=new Set(["simple-line","simple-fill","picture-fill"]),d=e=>{const r=r=>o.getLogger("esri.views.2d.layers.support.clusterUtils").error(new t("Unsupported-renderer",r,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return r("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const t=e.normalizationType;if("field"!==t)return r(`FeatureReductionCluster does not support a normalizationType of ${t}`),!1}break;case"simple":case"pie-chart":break;default:return r(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!u){if("valueExpression"in e&&e.valueExpression)return r("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some(e=>!(!("valueExpression"in e)||!e.valueExpression)))return r("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function h(e,t,r,o){const a=s.createMD5Hash(t),l="mode"===r?`cluster_type_${a}`:"sum"===r?`cluster_sum_${a}`:`cluster_avg_${a}`;return e.some(e=>e.name===l)||e.push(new i({name:l,isAutoGenerated:!0,onStatisticExpression:new n({expression:t,returnType:o}),statisticType:r})),l}function y(e,t,r,o,a){if("cluster_count"===t||e.some(e=>e.name===t))return t;const l=function(e,t,r){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const e=r,o="field",i=t.toLowerCase()+",norm:"+o+","+e.toLowerCase();return"cluster_avg_"+s.createMD5Hash(i)}}}(r,t,a);return e.some(e=>e.name===l)||("avg_norm"===r?e.push(new i({name:l,isAutoGenerated:!0,onStatisticExpression:new n({expression:`$feature.${t} / $feature.${a}`,returnType:o}),statisticType:"avg"})):e.push(new i({name:l,isAutoGenerated:!0,onStatisticField:t,statisticType:r}))),l}e.createInferredClusterRenderer=function(e,t){let r=t.clone();if(!d(r))return r;if(t.symbols.some(e=>p.has(e.type))&&(r=new a({symbol:new c})),r.authoringInfo||(r.authoringInfo=new l),r.authoringInfo.isAutoGenerated=!0,"visualVariables"in r){const t=(r.visualVariables||[]).filter(e=>"$view.scale"!==e.valueExpression);t.forEach(t=>{"rotation"===t.type?t.field?t.field=y(e,t.field,"avg_angle","number"):t.valueExpression&&(t.field=h(e,t.valueExpression,"avg_angle","number"),t.valueExpression=null):t.normalizationField?(t.field=y(e,t.field,"avg_norm","number",t.normalizationField),t.normalizationField=null):t.field?t.field=y(e,t.field,"avg","number"):t.valueExpression&&(t.field=h(e,t.valueExpression,"avg","number"),t.valueExpression=null)}),r.visualVariables=t}switch(r.type){case"simple":break;case"pie-chart":for(const t of r.attributes)t.field?t.field=y(e,t.field,"sum","number"):t.valueExpression&&(t.field=h(e,t.valueExpression,"sum","number"),t.valueExpression=null);break;case"unique-value":r.field?r.field=y(e,r.field,"mode","string"):r.valueExpression&&(r.field=h(e,r.valueExpression,"mode","string"),r.valueExpression=null);break;case"class-breaks":r.normalizationField?(r.field=y(e,r.field,"avg_norm","number",r.normalizationField),r.normalizationField=null):r.field?r.field=y(e,r.field,"avg","number"):r.valueExpression&&(r.field=h(e,r.valueExpression,"avg","number"),r.valueExpression=null)}return r},e.isClusterCompatibleRenderer=d,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/mixins/OrderedLayer":function(){define(["exports","../../chunks/tslib.es6","../../core/object","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../support/OrderByInfo"],function(e,t,r,o,s,i,n,a,l){"use strict";function c(e,t,r){if(!e)return null;const o=e.find(e=>!!e.field);if(!o)return null;const s=new l;return s.read(o,r),[s]}function u(e,t,o,s){const i=e.find(e=>!!e.field);i&&r.setDeepValue(o,[i.toJSON()],t)}const p={type:[l],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:c},write:{writer:u}}};e.OrderedLayer=e=>{const r=e;let s=class extends r{constructor(){super(...arguments),this.orderBy=null}};return t.__decorate([o.property(p)],s.prototype,"orderBy",void 0),s=t.__decorate([a.subclass("esri.layers.mixins.OrderedLayer")],s),s},e.orderByProperty=p,e.readOrderByInfos=c,e.writeOrderByInfos=u,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/OrderByInfo":function(){define(["exports","../../chunks/tslib.es6","../../core/jsonMap","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;const u=new r.JSONMap({asc:"ascending",desc:"descending"});return e.default=class extends o.JSONSupport{static{c=this}constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new c({field:this.field,valueExpression:this.valueExpression,order:this.order})}},t.__decorate([s.property({type:String,json:{write:!0}})],e.default.prototype,"field",void 0),t.__decorate([s.property({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],e.default.prototype,"valueExpression",void 0),t.__decorate([s.property({type:u.apiValues,json:{type:u.jsonValues,read:u.read,write:u.write}})],e.default.prototype,"order",void 0),e.default=c=t.__decorate([l.subclass("esri.layers.support.OrderByInfo")],e.default),e.default})},"esri/layers/mixins/PublishableLayer":function(){define(["exports","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../support/PublishingInfo"],function(e,t,r,o,s,i,n,a){"use strict";const l=Symbol();e.PublishableLayer=e=>{var o;const s=e;let i=class extends s{constructor(){super(...arguments),this[o]=!0}static{o=l}get publishingInfo(){if(this.destroyed)return null;const e=this._get("publishingInfo");if(e)return e;const t=new a;return this._checkPublishingStatus(t),t}_checkPublishingStatus(e){let t=0;const r=async s=>{let i;e.updating=!0;try{i=await this.fetchPublishingStatus()}catch(e){i="unavailable"}"published"!==i&&"unavailable"!==i||("publishing"===e.status&&this.refresh(),o.remove()),e.status=i,e.updating=!1,o.removed||(t=setTimeout(r,s,s+125))},o={removed:!1,remove(){this.removed=!0,clearTimeout(t)}};this.when().catch(()=>o.remove()),r(250),this.addHandles(o)}};return t.__decorate([r.property({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=t.__decorate([n.subclass("esri.layers.mixins.PublishableLayer")],i),i},e.isPublishableLayer=function(e){return null!=e&&"object"==typeof e&&l in e},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PublishingInfo":function(){define(["exports","../../chunks/tslib.es6","../../core/Accessor","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a){"use strict";return e.default=class extends r{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}},t.__decorate([o.property()],e.default.prototype,"updating",void 0),t.__decorate([o.property()],e.default.prototype,"status",void 0),e.default=t.__decorate([a.subclass("esri.layers.support.PublishingInfo")],e.default),e.default})},"esri/layers/mixins/TemporalLayer":function(){define(["exports","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/layerContainerType","../support/fieldUtils","../support/TimeInfo","../../portal/timeUnitKebabDictionary","../../chunks/TimeExtent","../../chunks/TimeInterval"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h){"use strict";const y={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:l.excludeTables}}};e.TemporalLayer=e=>{const o=e;let s=class extends o{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){const r=t.timeInfo.exportOptions;if(!r)return null;const o=r.timeOffset,s=p.timeUnitKebabDictionary.fromJSON(r.timeOffsetUnits);return o&&s?new h.TimeInterval({value:o,unit:s}):null}set timeInfo(e){c.fixTimeInfoFields(e,this.fieldsIndex),this._set("timeInfo",e)}};return t.__decorate([r.property({type:d.TimeExtent,json:{write:!1}})],s.prototype,"timeExtent",void 0),t.__decorate([r.property({type:h.TimeInterval})],s.prototype,"timeOffset",void 0),t.__decorate([n.reader("service","timeOffset",["timeInfo.exportOptions"])],s.prototype,"readOffset",null),t.__decorate([r.property({value:null,type:u,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],s.prototype,"timeInfo",null),t.__decorate([r.property(y)],s.prototype,"useViewTime",void 0),s=t.__decorate([a.subclass("esri.layers.mixins.TemporalLayer")],s),s},e.useViewTimeProperty=y,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/TimeInfo":function(){define(["exports","../../chunks/tslib.es6","../../core/Clonable","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","../../chunks/TimeExtent","../../chunks/TimeInterval","../../time/timeZoneUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h){"use strict";function y(e,t){return d.TimeInterval.fromJSON({value:e,unit:t})}return e.default=class extends(r.ClonableMixin(o.JSONSupport)){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,t){return t.timeExtent&&Array.isArray(t.timeExtent)&&2===t.timeExtent.length?p.TimeExtent.fromArray(t.timeExtent):null}writeFullTimeExtent(e,t){null!=e?.start&&null!=e.end?t.timeExtent=e.toArray():t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?y(t.timeInterval,t.timeIntervalUnits):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?y(t.defaultTimeInterval,t.defaultTimeIntervalUnits):null}writeInterval(e,t){t.timeInterval=e?.toJSON().value??null,t.timeIntervalUnits=e?.toJSON().unit??null}},t.__decorate([s.property({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],e.default.prototype,"cumulative",void 0),t.__decorate([s.property({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],e.default.prototype,"endField",void 0),t.__decorate([s.property({type:p.TimeExtent,json:{write:{enabled:!0,allowNull:!0}}})],e.default.prototype,"fullTimeExtent",void 0),t.__decorate([l.reader("fullTimeExtent",["timeExtent"])],e.default.prototype,"readFullTimeExtent",null),t.__decorate([u.writer("fullTimeExtent")],e.default.prototype,"writeFullTimeExtent",null),t.__decorate([s.property({type:Boolean,json:{write:!0}})],e.default.prototype,"hasLiveData",void 0),t.__decorate([s.property({type:d.TimeInterval,json:{write:{enabled:!0,allowNull:!0}}})],e.default.prototype,"interval",void 0),t.__decorate([l.reader("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],e.default.prototype,"readInterval",null),t.__decorate([u.writer("interval")],e.default.prototype,"writeInterval",null),t.__decorate([s.property({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],e.default.prototype,"startField",void 0),t.__decorate([s.property(h.timeZoneProperty("timeReference",!0))],e.default.prototype,"timeZone",void 0),t.__decorate([s.property({type:String,json:{write:{enabled:!0,allowNull:!0}}})],e.default.prototype,"trackIdField",void 0),t.__decorate([s.property({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],e.default.prototype,"useTime",void 0),t.__decorate([s.property({type:[Date],json:{read:!1}})],e.default.prototype,"stops",void 0),e.default=t.__decorate([c.subclass("esri.layers.support.TimeInfo")],e.default),e.default})},"esri/chunks/TimeInterval":function(){define(["exports","./tslib.es6","../core/Clonable","../core/JSONSupport","../core/timeUtils","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/enumeration","../core/accessorSupport/decorators/subclass","../portal/timeUnitKebabDictionary"],function(e,t,r,o,s,i,n,a,l,c,u,p){"use strict";e.TimeInterval=class extends(r.ClonableMixin(o.JSONSupport)){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return s.convertTime(this.value,this.unit,"milliseconds")}},t.__decorate([c.enumeration(p.timeUnitKebabDictionary,{nonNullable:!0})],e.TimeInterval.prototype,"unit",void 0),t.__decorate([i.property({type:Number,json:{write:!0},nonNullable:!0})],e.TimeInterval.prototype,"value",void 0),e.TimeInterval=t.__decorate([u.subclass("esri.time.TimeInterval")],e.TimeInterval),e.TimeInterval$1=e.TimeInterval})},"esri/portal/timeUnitKebabDictionary":function(){define(["exports","../core/jsonMap"],function(e,t){"use strict";const r=t.strict()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});e.timeUnitKebabDictionary=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/mixins/TrackableLayer":function(){define(["exports","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../support/TrackInfo"],function(e,t,r,o,s,i,n,a){"use strict";e.TrackableLayer=e=>{const o=e;let s=class extends o{constructor(){super(...arguments),this.trackInfo=null}};return t.__decorate([r.property({type:a})],s.prototype,"trackInfo",void 0),s=t.__decorate([n.subclass("esri.layers.mixins.TrackableLayer")],s),s},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/TrackInfo":function(){define(["exports","../../chunks/tslib.es6","../../PopupTemplate","../../core/Clonable","../../core/JSONSupport","../../core/object","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","./AggregateField","./commonProperties","./TrackPartInfo","../../renderers/SimpleRenderer","../../symbols/support/defaults","../../chunks/TimeInterval"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g){"use strict";return e.default=class extends(o.ClonableMixin(s.JSONSupport)){constructor(e){super(e),this.enabled=!0,this.fields=[],this.latestObservations=new y({renderer:new f({symbol:m.defaultPointSymbol2D.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new y({renderer:new f({symbol:m.defaultPointSymbol2D.clone()})}),this.trackLines=new y({renderer:new f({symbol:m.defaultPolylineSymbol2D.clone()})}),this.timeField="startTimeField"}writeFields(e,t,r){const o=e.filter(e=>"avg_angle"!==e.statisticType).map(e=>e.toJSON());i.setDeepValue(r,o,t)}},t.__decorate([n.property({type:Boolean,json:{write:!0}})],e.default.prototype,"enabled",void 0),t.__decorate([n.property({type:[d],json:{write:!0}})],e.default.prototype,"fields",void 0),t.__decorate([p.writer("fields")],e.default.prototype,"writeFields",null),t.__decorate([n.property({type:y,json:{write:!0}})],e.default.prototype,"latestObservations",void 0),t.__decorate([n.property({type:g.TimeInterval,json:{write:!0}})],e.default.prototype,"maxDisplayDuration",void 0),t.__decorate([n.property({type:Number,json:{write:!0}})],e.default.prototype,"maxDisplayObservationsPerTrack",void 0),t.__decorate([n.property(h.popupEnabled)],e.default.prototype,"popupEnabled",void 0),t.__decorate([n.property({type:r,json:{name:"popupInfo",write:!0}})],e.default.prototype,"popupTemplate",void 0),t.__decorate([n.property({type:y,json:{write:!0}})],e.default.prototype,"previousObservations",void 0),t.__decorate([n.property({type:y,json:{write:!0}})],e.default.prototype,"trackLines",void 0),t.__decorate([n.property({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],e.default.prototype,"timeField",void 0),e.default=t.__decorate([u.subclass("esri.layers.support.TrackInfo")],e.default),e.default})},"esri/layers/support/TrackPartInfo":function(){define(["exports","../../chunks/tslib.es6","../../core/Clonable","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./commonProperties","./LabelClass","../../renderers/support/typeUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p){"use strict";return e.default=class extends(r.ClonableMixin(o.JSONSupport)){constructor(e){super(e),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}},t.__decorate([s.property({type:[u],json:{write:!0}})],e.default.prototype,"labelingInfo",void 0),t.__decorate([s.property(c.labelsVisible)],e.default.prototype,"labelsVisible",void 0),t.__decorate([s.property({types:p.rendererTypes,json:{write:!0}})],e.default.prototype,"renderer",void 0),t.__decorate([s.property({type:Boolean,json:{write:!0}})],e.default.prototype,"visible",void 0),e.default=t.__decorate([l.subclass("esri.layers.support.TrackPartInfo")],e.default),e.default})},"esri/layers/support/FeatureTemplate":function(){define(["exports","../../chunks/tslib.es6","../../core/Clonable","../../core/jsonMap","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l,c){"use strict";const u=new o.JSONMap({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});return e.default=class extends(r.ClonableMixin(s.JSONSupport)){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}},t.__decorate([i.property({json:{write:!0}})],e.default.prototype,"name",void 0),t.__decorate([i.property({json:{write:!0}})],e.default.prototype,"description",void 0),t.__decorate([i.property({json:{read:u.read,write:u.write}})],e.default.prototype,"drawingTool",void 0),t.__decorate([i.property({json:{write:!0}})],e.default.prototype,"prototype",void 0),t.__decorate([i.property({json:{write:!0}})],e.default.prototype,"thumbnail",void 0),e.default=t.__decorate([c.subclass("esri.layers.support.FeatureTemplate")],e.default),e.default})},"esri/layers/support/FeatureType":function(){define(["exports","../../chunks/tslib.es6","../../core/Clonable","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","./domains","./FeatureTemplate"],function(e,t,r,o,s,i,n,a,l,c,u,p,d){"use strict";return e.default=class extends(r.ClonableMixin(o.JSONSupport)){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const r of Object.keys(e))t[r]=p.fromJSON(e[r]);return t}writeDomains(e,t){const r={};for(const t of Object.keys(e))e[t]&&(r[t]=e[t]?.toJSON());t.domains=r}},t.__decorate([s.property({json:{write:!0}})],e.default.prototype,"id",void 0),t.__decorate([s.property({json:{write:!0}})],e.default.prototype,"name",void 0),t.__decorate([s.property({json:{write:!0}})],e.default.prototype,"domains",void 0),t.__decorate([l.reader("domains")],e.default.prototype,"readDomains",null),t.__decorate([u.writer("domains")],e.default.prototype,"writeDomains",null),t.__decorate([s.property({type:[d],json:{write:!0}})],e.default.prototype,"templates",void 0),e.default=t.__decorate([c.subclass("esri.layers.support.FeatureType")],e.default),e.default})},"esri/layers/support/fieldProperties":function(){define(["exports","../../core/has","../../core/Logger","./Field","./FieldsIndex","./fieldUtils"],function(e,t,r,o,s,i){"use strict";e.defineFieldProperties=function(){return{fields:{type:[o],value:null,set:function(e){if(e&&t("big-integer-warning-enabled")){const t=e.filter(e=>"big-integer"===e.type||"oid"===e.type&&(e.length||0)>=8);if(t.length){const e=t.map(e=>`'${e.name}'`).join(", ");r.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${e}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return s.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e?.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e){const o=this.fieldsIndex?.has(t);o||r.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e})}return i.fixFields(this.fieldsIndex,e)}}}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/labelingInfo":function(){define(["exports","../../core/Error","../../core/Logger","./LabelClass"],function(e,t,r,o){"use strict";const s=()=>r.getLogger("esri.layers.support.labelingInfo"),i=/\[([^[\]]+)\]/gi,n=["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],a={esriGeometryPoint:n,esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:n,esriGeometryEnvelope:null};e.reader=function(e,t,r){return e?e.map(e=>{const s=new o;if(s.read(e,r),s.labelExpression){const e=t.fields||t.layerDefinition?.fields||this.fields;s.labelExpression=s.labelExpression.replaceAll(i,(t,r)=>`[${function(e,t){if(!t)return e;const r=e.toLowerCase();for(let e=0;e<t.length;e++){const o=t[e].name;if(o.toLowerCase()===r)return o}return e}(r,e)}]`)}return s}):null},e.validateLabelingInfo=function(e,r){const o=[];for(const i of e){const e=i.labelPlacement,n=a[r];if(!i.symbol)return s().warn("No ILabelClass symbol specified."),[];if(!n)return s().error(new t("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${r}' is not supported`)),[];if(n.includes(e))o.push(i);else{const t=n[0];e&&s().warn(`Found invalid label placement type ${e} for ${r}. Defaulting to ${t}`);const a=i.clone();a.labelPlacement=t,o.push(a)}}return o},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/TitleCreator":function(){define(["require","exports","../../chunks/tslib.es6","../../core/Accessor","../../core/arrayUtils","../../core/asyncUtils","../../core/Collection","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/subclass","./fieldUtils","../../support/loadArcade"],function(e,t,r,o,s,i,n,a,l,c,u,p,d){"use strict";return t.default=class extends o{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||i.createTask(()=>d.loadArcade()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??new Promise((t,r)=>e(["../../widgets/Feature/support/featureUtils"],t,r)).then(e=>this._featureUtils=e)}get calculatedExpressions(){const e=new n;if(!this.expressionsUsedInTitle.length)return e;if(!this._arcadeTask?.value){for(const t of this.expressionsUsedInTitle??[])e.push({name:t.name,invalid:!0});return e}for(const t of this.expressionsUsedInTitle)try{const r=this._arcadeTask.value.arcade.parseScript(t.expression,["$layer","$map","$datastore"]);if(r.isAsync){e.push({name:t.name,invalid:!0});break}e.push({name:t.name,syntax:r,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(r,{vars:{$feature:"any"}})})}catch{e.push({name:t.name,invalid:!0});break}return e}get expressionsUsedInTitle(){let e=this.effectivePopupTemplate?.title??"";return"string"!=typeof e?[]:(e=e.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter(t=>e.includes(`{expression/${t.name.toLowerCase()}}`))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(e=>!0===e.invalid)}get requiredFields(){const e=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const t of this.calculatedExpressions?.toArray()??[])try{const r=this._arcadeTask.value.arcade.extractFieldLiterals(t.syntax);for(const t of r){const r=t.split("."),o=this.fieldsIndex.get(r.at(-1)??"");o&&e.add(o.name)}}catch{}const t=this._extractFieldNames(this.workingTitle);for(const r of t){const t=this.fieldsIndex.get(r);t&&e.add(t.name)}return null!=this.objectIdField&&e.add(this.objectIdField),e}get titleFromDisplayField(){let e="";return this.displayField&&(e=this.fieldsIndex.get(this.displayField)?.name??""),e||(e=this.fieldsIndex.get(this.objectIdField)?.name??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return""===e||null==e||this.hasBadExpressions||"string"!=typeof e?this.titleFromDisplayField:e}async getTitle(e,t,r){const o=t.getObjectId()??t.attributes[e.objectIdField];return(await this.getTitles(e,[t],r)).get(o)??""}async getTitles(e,t,r){const o=new Map,s=r?.timeZone??"system";try{const[{substituteFieldsInLinksAndAttributes:i}]=await Promise.all([this.featureUtilsPromise,this._arcadeTask?.promise]);r?.fetchMissingFields&&(t=await this._checkAndReQueryGraphics(e,t));const{fieldInfoMap:n,workingTitle:a}=this,l=a&&n;t.forEach(t=>{const r=t.getObjectId()??t.attributes[e.objectIdField],c=l?i({attributes:t.attributes,expressionAttributes:null,fieldInfoMap:n,globalAttributes:this._createFormattedAttributes(e,t,s).global,layer:e,text:a}):"";o.set(r,c)})}catch{}return o}async _checkAndReQueryGraphics(e,t){const r=t.map(t=>t.getObjectId()??t.attributes[e.objectIdField]).filter(s.isSome);if(r.length!==t.length)return t;if(t.some(e=>!p.featureHasFields(e,this.requiredFields))){const o=e.createQuery();o.where="1=1",o.outFields=[...this.requiredFields],o.objectIds=r;const s=await e.queryFeatures(o);if(s?.features.length===t.length)return s.features}return t}_createFieldInfoMap(e){const t=new Map;if(!e)return t;for(const r of e){if(!r.fieldName)continue;const e=this.fieldsIndex.get(r.fieldName),o=e?.name??r.fieldName;r.fieldName=o,t.set(o.toLowerCase(),r)}return t}_createFormattedAttributes(e,t,r="system"){const o=this.effectivePopupTemplate?.fieldInfos??[],s={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const r=this._arcadeTask.value.Feature.createFromGraphicLikeObject(t.geometry,t.attributes,e,null);for(const e of this.calculatedExpressions)try{s[`expression/${e.name}`]=e.func({vars:{$feature:r}})}catch{}}const i={...t.attributes,...s};return{global:this._featureUtils.formatAttributes({fieldInfos:o,attributes:i,graphic:t,timeZone:r,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return p.extractSubstitutionTemplatesFromString(e).filter(e=>!(e.startsWith("relationships/")||e.startsWith("expression/")))}},r.__decorate([a.property({readOnly:!0})],t.default.prototype,"_arcadeTask",null),r.__decorate([a.property()],t.default.prototype,"_featureUtils",void 0),r.__decorate([a.property({readOnly:!0})],t.default.prototype,"featureUtilsPromise",null),r.__decorate([a.property({readOnly:!0})],t.default.prototype,"calculatedExpressions",null),r.__decorate([a.property()],t.default.prototype,"displayField",void 0),r.__decorate([a.property()],t.default.prototype,"effectivePopupTemplate",void 0),r.__decorate([a.property()],t.default.prototype,"expressionsUsedInTitle",null),r.__decorate([a.property()],t.default.prototype,"fieldsIndex",void 0),r.__decorate([a.property()],t.default.prototype,"fieldInfoMap",null),r.__decorate([a.property()],t.default.prototype,"fields",void 0),r.__decorate([a.property()],t.default.prototype,"objectIdField",void 0),r.__decorate([a.property()],t.default.prototype,"requiredFields",null),t.default=r.__decorate([u.subclass("esri.layers.support.TitleCreator")],t.default),t.default})},"esri/layers/support/versionUtils":function(){define(["exports","./arcgisLayerUrl"],function(e,t){"use strict";const r=[];r.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),r.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),r.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),r.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),r.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]),e.serviceSupportsSpatialReference=function(e,o){if(t.isHostedAgolService(e.url??""))return!0;const{wkid:s}=o;for(const t of r){if((e.version??0)>=t[0])return!0;if("function"==typeof t[1]&&(t[1]=t[1]()),t[1].has(s))return!1}return!0},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/popupUtils":function(){define(["exports","../PopupTemplate","../layers/support/fieldUtils","../popup/content/AttachmentsContent","../popup/content/Content","../popup/content/CustomContent","../popup/content/ExpressionContent","../popup/content/FieldsContent","../popup/content/MediaContent","../popup/content/RelationshipContent","../popup/content/TextContent","../popup/content/UtilityNetworkAssociationsContent","../popup/FieldInfo","../popup/support/FieldInfoFormat"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h){"use strict";const y=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):r.isFieldVisibleByDefault(e,t);function f(e,t){return"oid"===e.type?-1:"oid"===t.type?1:_(e)?-1:_(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function m(e,t){const o=t?.visibleFieldNames;return function({fields:e,ignoreFieldTypes:t,sortDisabled:r}){const o=e;return t&&(e=e.filter(e=>!t.includes(e.type))),e===o&&(e=e.slice()),!0!==r&&e.sort(f),e}({fields:e.fields??[],ignoreFieldTypes:t?.ignoreFieldTypes||S,sortDisabled:t?.sortDisabled}).map(t=>new d({fieldName:t.name,isEditable:r.isFieldEditable(t,e),label:t.alias,format:b(t),visible:y(t,{...e,visibleFieldNames:o})}))}function g(e,t){const{onStatisticField:r,onStatisticExpression:o,statisticType:s}=e;if(r){const e=t.find(e=>r===e.name);if(e)return b(e)}return"number"===o?.returnType?new h({digitSeparator:!0,places:2}):"count"===s?new h({digitSeparator:!0,places:0}):void 0}function b(e){switch(e.type){case"small-integer":case"integer":case"single":return new h({digitSeparator:!0,places:0});case"double":return new h({digitSeparator:!0,places:2});case"string":return r.isRasterPixelValueField(e.name)?new h({digitSeparator:!0,places:0}):void 0;default:return}}function _(e){if("name"===(e.name&&e.name.toLowerCase()))return!0;const t=e.alias?.toLowerCase();return"name"===t}const S=["geometry","blob","raster","guid","xml"];e.createFieldInfos=m,e.createFieldsContent=function(e,t){return new a({fieldInfos:m(e,t).filter(e=>e.visible)})},e.createPopupTemplate=function({displayField:e,editFieldsInfo:s,fields:i,objectIdField:n,title:l},c){if(!i)return null;const u=m({editFieldsInfo:s,fields:i,objectIdField:n},c);if(!u.length)return null;const p=function(e){const t=r.getDisplayFieldName(e),{titleBase:o}=e;return t?`${o}: {${t.trim()}}`:o??""}({titleBase:l,fields:i,displayField:e}),d=[new a,new o];return new t({title:p,content:d,fieldInfos:u})},e.createPopupTemplateForFeatureReduction=function(e){const{fields:r,featureReduction:o,title:s}=e,i=o.fields;if(!i)return null;const n=function(e,t){return e.map(e=>new d({fieldName:e.name,isEditable:!1,label:e.alias,format:g(e,t),visible:!0}))}(i,r??[]);if(!n.length)return null;const l=[new a];return new t({title:s,content:l,fieldInfos:n})},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/FeatureLayerSource":function(){define(["require","exports","../../../chunks/tslib.es6","../../../config","../../../request","../../../core/arrayUtils","../../../core/Error","../../../core/has","../../../core/jsonMap","../../../core/Loadable","../../../core/Logger","../../../core/object","../../../core/promiseUtils","../../../core/reactiveUtils","../../../core/urlUtils","../../../core/uuid","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/decorators/subclass","../../../geometry/Extent","../../../geometry/SpatialReference","../../../geometry/support/MeshGeoreferencedVertexSpace","../../../geometry/support/meshVertexSpaceUtils","../../../geometry/support/meshUtils/External","../applyEditsUtils","./support/clientSideDefaults","./support/QueryTask","../../support/arcgisLayerUrl","../../support/featureLayerUtils","../../support/infoFor3D","../../../rest/query/executeQueryJSON","../../../rest/query/operations/editsZScale","../../../rest/support/Query","../../../chunks/TimeExtent","../../../versionManagement/support/versionManagementUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b,_,S,v,w,x,T,M,I,O,P,k,C,L,E,A){"use strict";const F=new l.JSONMap({originalAndCurrentFeatures:"original-and-current-features",none:"none"}),R=new l.JSONMap({Started:"published",Publishing:"publishing",Stopped:"unavailable"});t.default=class extends c.Loadable{constructor(e){super(e),this.type="feature-layer",this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.refresh=d.debounce(async()=>{await this.load();const e=this.sourceJSON.editingInfo?.lastEditDate;if(null==e)return{dataChanged:!0,updates:{}};try{await this._fetchService(null)}catch{return{dataChanged:!0,updates:{}}}const t=e!==this.sourceJSON.editingInfo?.lastEditDate;return{dataChanged:t,updates:t?{editingInfo:this.sourceJSON.editingInfo,extent:this.sourceJSON.extent}:null}}),this._ongoingAssetUploads=new Map}load(e){const t=this.layer.sourceJSON,r=this._fetchService(t,{...e}).then(()=>this.layer.setUserPrivileges(this.sourceJSON.serviceItemId,e)).then(()=>this._ensureLatestMetadata(e));return this.addResolvingPromise(r),Promise.resolve(this)}initialize(){this.addHandles([h.watch(()=>{const e=this.layer;return e&&"lastEditsEventDate"in e?e.lastEditsEventDate:null},e=>this._handleLastEditsEventChange(e))])}destroy(){this._removeEditInterceptor()}get queryTask(){const{capabilities:e,parsedUrl:t,gdbVersion:r,spatialReference:o,fieldsIndex:s,uniqueIdFields:i}=this.layer,n="infoFor3D"in this.layer?this.layer.infoFor3D:null,l="dynamicDataSource"in this.layer?this.layer.dynamicDataSource:null,c=a("featurelayer-pbf")&&e?.query.supportsFormatPBF&&null==n;return new M({dynamicDataSource:l,fieldsIndex:s,gdbVersion:r,infoFor3D:n,pbfSupported:c,queryAttachmentsSupported:e?.operations?.supportsQueryAttachments??!1,sourceSpatialReference:o,uniqueIdFields:i,url:t.path})}async addAttachment(e,t){await this.load();const{layer:r}=this;await O.ensureLayerCredential(r,"editing");const o=e.attributes[r.objectIdField],i=r.parsedUrl.path+"/"+o+"/addAttachment",n=this._getLayerRequestOptions(),a=this._getFormDataForAttachment(t,n.query);try{const e=await s(i,{body:a});return x.createFeatureEditResult(e.data.addAttachmentResult)}catch(e){throw this._createAttachmentErrorResult(o,e)}}async updateAttachment(e,t,r){await this.load();const{layer:o}=this;await O.ensureLayerCredential(o,"editing");const i=e.attributes[o.objectIdField],n=o.parsedUrl.path+"/"+i+"/updateAttachment",a=this._getLayerRequestOptions({query:{attachmentId:t}}),l=this._getFormDataForAttachment(r,a.query);try{const e=await s(n,{body:l});return x.createFeatureEditResult(e.data.updateAttachmentResult)}catch(e){throw this._createAttachmentErrorResult(i,e)}}async applyEdits(e,t){await this.load();const{layer:r}=this;await O.ensureLayerCredential(r,"editing");const o="infoFor3D"in r?r.infoFor3D:null,a=null!=o,l=a||(t?.globalIdUsed??!1),c=a?await this._uploadMeshesAndGetAssetMapEditsJSON(e):null,u=e.addFeatures?.map(e=>x.getFeatureJSON(this.layer,e,o))??[],p=(await Promise.all(u)).filter(i.isSome),d=e.updateFeatures?.map(e=>x.getFeatureJSON(this.layer,e,o))??[],h=(await Promise.all(d)).filter(i.isSome),y=x.getFeatureIds(this.layer,e.deleteFeatures,l);C.unapplyEditsZUnitScaling(p,h,r.spatialReference);const f=await x.getAttachmentEditsJSON(this.layer,e),m=r.capabilities.editing.supportsAsyncApplyEdits&&a,g=t?.gdbVersion||r.gdbVersion,b={gdbVersion:g,rollbackOnFailure:t?.rollbackOnFailureEnabled,useGlobalIds:l,returnEditMoment:t?.returnEditMoment,usePreviousEditMoment:t?.usePreviousEditMoment,async:m};await A.isSafeToEditVersion(this.layer.url,g,!0);const _=A.isVersionInEditSession(this.layer.url,g||null);if(await A.isHistoricVersion(r.url,g,r.historicMoment))throw new n("feature-layer-source:historic-version","Editing a historic version is not allowed");t?.returnServiceEditsOption?(b.edits=JSON.stringify([{id:r.layerId,adds:p.length?p:null,updates:h.length?h:null,deletes:y.length?y:null,attachments:f,assetMaps:c}]),b.returnServiceEditsOption=F.toJSON(t?.returnServiceEditsOption),b.returnServiceEditsInSourceSR=t?.returnServiceEditsInSourceSR):(b.adds=p.length?JSON.stringify(p):null,b.updates=h.length?JSON.stringify(h):null,b.deletes=y.length?l?JSON.stringify(y):y.join(","):null,b.attachments=f&&JSON.stringify(f),b.assetMaps=null!=c?JSON.stringify(c):void 0);const S=this._getLayerRequestOptions({method:"post",query:b});_&&(S.authMode="immediate",S.query.returnEditMoment=!0,S.query.sessionId=A.currentSessionId);const v=t?.returnServiceEditsOption?r.url:r.parsedUrl.path;let w;try{w=m?await this._asyncApplyEdits(v+"/applyEdits",S):await s(v+"/applyEdits",S)}catch(e){if(!x.isProtectedOrPrivateVersionError(e))throw e;S.authMode="immediate",w=m?await this._asyncApplyEdits(v+"/applyEdits",S):await s(v+"/applyEdits",S)}return this._createEditsResult(w)}async deleteAttachments(e,t){await this.load();const{layer:r}=this;await O.ensureLayerCredential(r,"editing");const o=e.attributes[r.objectIdField],i=r.parsedUrl.path+"/"+o+"/deleteAttachments";try{return(await s(i,this._getLayerRequestOptions({query:{attachmentIds:t.join(",")},method:"post"}))).data.deleteAttachmentResults.map(x.createFeatureEditResult)}catch(e){throw this._createAttachmentErrorResult(o,e)}}fetchRecomputedExtents(e={}){const t=e.signal;return this.load({signal:t}).then(async()=>{const t=this._getLayerRequestOptions({...e,query:{returnUpdates:!0}}),{layerId:r,url:o}=this.layer,{data:i}=await s(`${o}/${r}`,t),{id:n,extent:a,fullExtent:l,timeExtent:c}=i,u=a||l;return{id:n,fullExtent:u&&b.fromJSON(u),timeExtent:c&&E.TimeExtent.fromJSON({start:c[0],end:c[1]})}})}async queryAttachments(e,t={}){await this.load();const r=this._getLayerRequestOptions(t);return this.queryTask.executeAttachmentQuery(e,r)}async queryFeatures(e,t){await this.load();const r=await this.queryTask.execute(e,{...t,query:this._createRequestQueryOptions(t)});if(e.outStatistics?.length&&r.features.length){const t=new Map;if(r.features.forEach(r=>{const o=r.attributes;e.outStatistics?.forEach(({outStatisticFieldName:e})=>{if(e){const r=e.toLowerCase();r&&r in o&&e!==r&&(o[e]=o[r],delete o[r],t.set(r,e))}})}),null!=r.fields)for(const e of r.fields){const r=t.get(e.name.toLowerCase());null!=r&&(e.name=r)}}return r}async queryFeaturesJSON(e,t){return await this.load(),this.queryTask.executeJSON(e,{...t,query:this._createRequestQueryOptions(t)})}async queryObjectIds(e,t){return await this.load(),this.queryTask.executeForIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryFeatureCount(e,t){return await this.load(),this.queryTask.executeForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryExtent(e,t){return await this.load(),this.queryTask.executeForExtent(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeatures(e,t){return await this.load(),this.queryTask.executeRelationshipQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeaturesCount(e,t){return await this.load(),this.queryTask.executeRelationshipQueryForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopFeatures(e,t){return await this.load(),this.queryTask.executeTopFeaturesQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryAttributeBins(e,t){return await this.load(),this.queryTask.executeAttributeBinsQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopObjectIds(e,t){return await this.load(),this.queryTask.executeForTopIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopExtents(e,t){return await this.load(),this.queryTask.executeForTopExtents(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopCount(e,t){return await this.load(),this.queryTask.executeForTopCount(e,{...t,query:this._createRequestQueryOptions(t)})}async fetchPublishingStatus(){if(!I.isHostedAgolService(this.layer.url))return"unavailable";const e=y.join(this.layer.url,"status"),t=await s(e,{query:{f:"json"}});return R.fromJSON(t.data.status)}async uploadAssets(t,r){const{uploadAssets:o}=await new Promise((t,r)=>e(["./support/uploadAssets"],t,r));return o(t,{layer:this.layer,ongoingUploads:this._ongoingAssetUploads},r)}_handleLastEditsEventChange(e){const t=this.layer;if(null==e||!("capabilities"in t)||!("effectiveCapabilities"in t))return;if(t.capabilities?.operations?.supportsEditing||!t.effectiveCapabilities?.operations?.supportsEditing)return;const r=t.url;null!=r&&("layerId"in t&&y.join(r,t.layerId.toString()),this._getOrCreateEditInterceptor(r).before=t=>{const r=t.requestOptions.method??"auto";if("auto"===r||"head"===r){const r=t.requestOptions.query??{};r._ts=e.getTime(),t.requestOptions.query=r}})}_getOrCreateEditInterceptor(e){return null==this._editInterceptor&&(this._editInterceptor={urls:e},o.request.internalInterceptors.push(this._editInterceptor)),this._editInterceptor}_removeEditInterceptor(){null!=this._editInterceptor&&(i.remove(o.request.internalInterceptors,this._editInterceptor),this._editInterceptor=null)}async _asyncApplyEdits(e,t){const r=(await s(e,t)).data.statusUrl;for(;;){const e=(await s(r,{query:{f:"json"},responseType:"json"})).data;switch(e.status){case"Completed":return s(e.resultUrl,{query:{f:"json"},responseType:"json"});case"CompletedWithErrors":throw new n("async-applyEdits-failed","asynchronous applyEdits call failed.");case"Failed ImportChanges":case"InProgress":case"Pending":case"ExportAttachments":case"ExportChanges":case"ExportingData":case"ExportingSnapshot":case"ImportAttachments":case"ProvisioningReplica":case"UnRegisteringReplica":break;default:throw new n("async-applyEdits-failed","asynchronous applyEdits call failed (undefined response status)")}await d.after(j)}}_createRequestQueryOptions(e){const t={...this.layer.customParameters,token:this.layer.apiKey,...e?.query};return this.layer.datesInUnknownTimezone&&(t.timeReferenceUnknownClient=!0),t}async _fetchService(e,t){if(!e){const r={};a("featurelayer-advanced-symbols")&&(r.returnAdvancedSymbols=!0),t?.cacheBust&&(r._ts=Date.now());const{data:o}=await s(this.layer.parsedUrl.path,this._getLayerRequestOptions({query:r,signal:t?.signal}));e=o}this.layer.applyPreferredHost(e),this.sourceJSON=await this._patchServiceJSON(e,t?.signal);const r=e.type;if(!this.supportedSourceTypes.has(r))throw new n("feature-layer-source:unsupported-type",`Source type "${r}" is not supported`)}async _patchServiceJSON(e,t){if("Table"!==e.type&&e.geometryType&&!e?.drawingInfo?.renderer&&!e.defaultSymbol){const t=T.createDrawingInfo(e.geometryType).renderer;p.setDeepValue("drawingInfo.renderer",t,e)}if("esriGeometryMultiPatch"===e.geometryType&&e.infoFor3D&&(e.geometryType="mesh"),null==e.extent)try{const{data:r}=await s(this.layer.url,this._getLayerRequestOptions({signal:t}));r.spatialReference&&(e.extent={xmin:0,ymin:0,xmax:0,ymax:0,spatialReference:r.spatialReference})}catch(e){d.throwIfAbortError(e)}return e}async _ensureLatestMetadata(e){if(this.layer.userHasUpdateItemPrivileges&&this.sourceJSON.cacheMaxAge>0)return this._fetchService(null,{...e,cacheBust:!0})}async _uploadMeshesAndGetAssetMapEditsJSON(t){const{addAssetFeatures:r}=t;if(!r?.length)return null;if(await this._areAllAssetsAlreadyMapped(r))return null;const o=t.addFeatures.filter(e=>e.geometry);if(r.length!==o.length+t.updateFeatures.length)throw new n("feature-layer-source:unsupported-mesh-edits","Mixing attribute only edits with mesh geometry edits is not currently supported");const s=new Array,i=new Map;for(const t of r){const{geometry:r}=t,{vertexSpace:o}=r;if(v.isRelativeVertexSpace(o))s.push(r);else{const o=r.origin,{convertMeshVertexSpace:n}=await new Promise((t,r)=>e(["../../../geometry/support/meshUtils/convertMeshVertexSpace"],t,r)),a=await n(r,new S({origin:[o.x,o.y,o.z??0]}));i.set(a,r),t.geometry=a,s.push(a)}}await this.uploadAssets(s);for(const[e,t]of i)t.addExternalSources(e.metadata.externalSources.items);return{adds:this._getAssetMapEditsJSON(r),updates:[],deletes:[]}}_getAssetMapEditsJSON(e){const t=new Array,r=this.layer.globalIdField,o=this.layer.parsedUrl;for(const s of e){const e=s.geometry,{metadata:i}=e,n=i.getExternalSourcesOnService(o),a=s.getAttribute(r);if(0===n.length){u.getLogger(this).error(`Skipping feature ${a}. The mesh it is associated with has not been uploaded to the service and cannot be mapped to it.`);continue}const{source:l}=n.find(w.isOriginalExternal)??n[0];for(const e of l.assets)1===e.parts.length?t.push({globalId:f.generateBracedUUID(),parentGlobalId:a,assetName:e.assetName,assetHash:e.parts[0].partHash,flags:[]}):u.getLogger(this).error(`Skipping asset ${e.assetName}. It does not have exactly one part, so we cannot map it to a feature.`)}return t}_createEditsResult(e){const t=e.data,{layerId:r}=this.layer,o=[];let s=null;if(Array.isArray(t))for(const e of t)o.push({id:e.id,editedFeatures:e.editedFeatures}),e.id===r&&(s={addResults:e.addResults??[],updateResults:e.updateResults??[],deleteResults:e.deleteResults??[],attachments:e.attachments,editMoment:e.editMoment});else s=t;const i=x.unpackEditResultData(s);if(o.length>0){i.editedFeatureResults=[];for(const e of o){const{editedFeatures:t}=e,r=t?.spatialReference?new _(t.spatialReference):null;i.editedFeatureResults.push({layerId:e.id,editedFeatures:x.createEditedFeatures(t,r)})}}return i}_createAttachmentErrorResult(e,t){const r=t.details.messages?.[0]||t.message,o=t.details.httpStatus||t.details.messageCode;return{objectId:e,globalId:null,error:new n("feature-layer-source:attachment-failure",r,{code:o})}}_getFormDataForAttachment(e,t){const r=e instanceof FormData?e:e&&e.elements?new FormData(e):null;if(r)for(const e in t){const o=t[e];null!=o&&(r.set?r.set(e,o):r.append(e,o))}return r}_getLayerRequestOptions(e={}){const{layer:t,layer:{parsedUrl:r,gdbVersion:o}}=this;return{...e,query:{gdbVersion:o,layer:"dynamicDataSource"in t&&t.dynamicDataSource?JSON.stringify({source:t.dynamicDataSource}):void 0,...r.query,f:"json",...this._createRequestQueryOptions(e)},responseType:"json"}}async _areAllAssetsAlreadyMapped(e){const{layer:t}=this,{globalIdField:r,parsedUrl:o}=t,s="infoFor3D"in t?t.infoFor3D:null;if(null==s||null==r)return!1;const n=P.getAssetMapTable(s);if(null==n)return!1;const a=y.join(o.path,`../${n.id}`),l=new Array;for(const t of e){if(!(t.geometry.metadata.getExternalSourcesOnService(o).length>0))return!1;l.push(t)}const c=l.map(e=>e.getAttribute(r)).filter(i.isSome);if(0===c.length)return!1;const{assetMapFieldRoles:{parentGlobalId:u,assetHash:p}}=s,d=new L({where:`${u} IN (${c.map(e=>`'${e}'`)})`,outFields:[p,u],returnGeometry:!1}),h=await k.executeQueryJSON(a,d),{features:f}=h;return 0!==f.length&&!l.some(e=>{const t=e.getAttribute(r);if(!t)return!0;const{metadata:s}=e.geometry,i=f.filter(e=>e.getAttribute(u)===t);if(0===i.length)return!0;const n=i.map(e=>e.getAttribute(p));return s.getExternalSourcesOnService(o).flatMap(({source:e})=>e.assets.flatMap(e=>e.parts.map(e=>e.partHash))).some(e=>n.every(t=>e!==t))})}},r.__decorate([m.property()],t.default.prototype,"type",void 0),r.__decorate([m.property({constructOnly:!0})],t.default.prototype,"layer",void 0),r.__decorate([m.property({constructOnly:!0})],t.default.prototype,"supportedSourceTypes",void 0),r.__decorate([m.property({readOnly:!0})],t.default.prototype,"queryTask",null),t.default=r.__decorate([g.subclass("esri.layers.graphics.sources.FeatureLayerSource")],t.default);const j=1e3;return t.default})},"esri/geometry/support/MeshGeoreferencedVertexSpace":function(){define(["exports","../../chunks/tslib.es6","../../core/Clonable","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l,c){"use strict";var u;return e.default=class extends(r.ClonableMixin(o.JSONSupport)){static{u=this}constructor(e){super(e),this.type="georeferenced",this.origin=null}static{this.absolute=new u}},t.__decorate([l.enumeration({georeferenced:"georeferenced"},{readOnly:!0})],e.default.prototype,"type",void 0),t.__decorate([s.property({type:[Number],nonNullable:!1,json:{write:!0}})],e.default.prototype,"origin",void 0),e.default=u=t.__decorate([c.subclass("esri.geometry.support.MeshGeoreferencedVertexSpace")],e.default),e.default})},"esri/geometry/support/meshVertexSpaceUtils":function(){define(["exports","../../chunks/vec32","../Point","./MeshGeoreferencedVertexSpace","./MeshLocalVertexSpace"],function(e,t,r,o,s){"use strict";function i(e){return null!=e.origin}e.isAbsoluteVertexSpace=function(e){return null==e.origin},e.isMeshWithRelativeVertexSpace=function(e){return i(e.vertexSpace)},e.isRelativeVertexSpace=i,e.selectVertexSpace=function(e,t){const{x:r,y:i,z:n,spatialReference:a}=e,l=[r,i,n??0];return"local"===(t?.vertexSpace??function(e){return e.isGeographic||e.isWebMercator?"local":"georeferenced"}(a))?new s({origin:l}):new o({origin:l})},e.vertexSpaceEquals=function(e,r){return e.type===r.type&&(e.origin===r.origin||null!=e.origin&&null!=r.origin&&t.exactEquals(e.origin,r.origin))},e.vertexSpaceOriginToPoint=function(e,t){if(!i(e))return null;const[o,s,n]=e.origin;return new r({x:o,y:s,z:n,spatialReference:t})},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/vec32":function(){define(["exports","../core/libs/gl-matrix-2/factories/vec3f64","../core/libs/gl-matrix-2/math/common"],function(e,t,r){"use strict";function o(e){const t=e[0],r=e[1],o=e[2];return Math.sqrt(t*t+r*r+o*o)}function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function i(e,t,r,o){return e[0]=t,e[1]=r,e[2]=o,e}function n(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function a(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function l(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function c(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function u(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function p(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function d(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function h(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function y(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function f(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function m(e,t=0,r=1){return e[0]=Math.min(Math.max(e[0],t),r),e[1]=Math.min(Math.max(e[1],t),r),e[2]=Math.min(Math.max(e[2],t),r),e}function g(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function b(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function _(e,t,r,o){return e[0]=t[0]+r[0]*o,e[1]=t[1]+r[1]*o,e[2]=t[2]+r[2]*o,e}function S(e,t){const r=t[0]-e[0],o=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(r*r+o*o+s*s)}function v(e,t){const r=t[0]-e[0],o=t[1]-e[1],s=t[2]-e[2];return r*r+o*o+s*s}function w(e){const t=e[0],r=e[1],o=e[2];return t*t+r*r+o*o}function x(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function T(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function M(e,t){const r=t[0],o=t[1],s=t[2];let i=r*r+o*o+s*s;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i),e}function I(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function O(e,t,r){const o=t[0],s=t[1],i=t[2],n=r[0],a=r[1],l=r[2];return e[0]=s*l-i*a,e[1]=i*n-o*l,e[2]=o*a-s*n,e}function P(e,t,r){const o=t[0],s=t[1],i=t[2],n=r[0],a=r[1],l=r[2],c=s*l-i*a,u=i*n-o*l,p=o*a-s*n,d=Math.sqrt(c*c+u*u+p*p);return e[0]=c/d,e[1]=u/d,e[2]=p/d,e}function k(e,t,r,o){const s=t[0],i=t[1],n=t[2];return e[0]=s+o*(r[0]-s),e[1]=i+o*(r[1]-i),e[2]=n+o*(r[2]-n),e}function C(e,t,r,o,s,i){const n=i*i,a=n*(2*i-3)+1,l=n*(i-2)+i,c=n*(i-1),u=n*(3-2*i);return e[0]=t[0]*a+r[0]*l+o[0]*c+s[0]*u,e[1]=t[1]*a+r[1]*l+o[1]*c+s[1]*u,e[2]=t[2]*a+r[2]*l+o[2]*c+s[2]*u,e}function L(e,t,r,o,s,i){const n=1-i,a=n*n,l=i*i,c=a*n,u=3*i*a,p=3*l*n,d=l*i;return e[0]=t[0]*c+r[0]*u+o[0]*p+s[0]*d,e[1]=t[1]*c+r[1]*u+o[1]*p+s[1]*d,e[2]=t[2]*c+r[2]*u+o[2]*p+s[2]*d,e}function E(e,t=1){const o=r.RANDOM,s=2*o()*Math.PI,i=2*o()-1,n=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(s)*n,e[1]=Math.sin(s)*n,e[2]=i*t,e}function A(e,t,r){const o=t[0],s=t[1],i=t[2];return e[0]=r[0]*o+r[4]*s+r[8]*i+r[12],e[1]=r[1]*o+r[5]*s+r[9]*i+r[13],e[2]=r[2]*o+r[6]*s+r[10]*i+r[14],e}function F(e,t,r){const o=t[0],s=t[1],i=t[2];return e[0]=o*r[0]+s*r[3]+i*r[6],e[1]=o*r[1]+s*r[4]+i*r[7],e[2]=o*r[2]+s*r[5]+i*r[8],e}function R(e,t,r){const o=r[0],s=r[1],i=r[2],n=r[3],a=t[0],l=t[1],c=t[2],u=s*c-i*l,p=i*a-o*c,d=o*l-s*a,h=s*d-i*p,y=i*u-o*d,f=o*p-s*u,m=2*n;return e[0]=a+u*m+2*h,e[1]=l+p*m+2*y,e[2]=c+d*m+2*f,e}function j(e,t,r,o){const s=[],i=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],i[0]=s[0],i[1]=s[1]*Math.cos(o)-s[2]*Math.sin(o),i[2]=s[1]*Math.sin(o)+s[2]*Math.cos(o),e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e}function N(e,t,r,o){const s=[],i=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],i[0]=s[2]*Math.sin(o)+s[0]*Math.cos(o),i[1]=s[1],i[2]=s[2]*Math.cos(o)-s[0]*Math.sin(o),e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e}function D(e,t,r,o){const s=[],i=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],i[0]=s[0]*Math.cos(o)-s[1]*Math.sin(o),i[1]=s[0]*Math.sin(o)+s[1]*Math.cos(o),i[2]=s[2],e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e}function U(e,t){M(V,e),M(q,t);const r=I(V,q);return r>1?0:r<-1?Math.PI:Math.acos(r)}const V=t.create(),q=t.create();function z(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function G(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function B(e,t){if(e===t)return!0;const o=e[0],s=e[1],i=e[2],n=t[0],a=t[1],l=t[2],c=r.getEpsilon();return Math.abs(o-n)<=c*Math.max(1,Math.abs(o),Math.abs(n))&&Math.abs(s-a)<=c*Math.max(1,Math.abs(s),Math.abs(a))&&Math.abs(i-l)<=c*Math.max(1,Math.abs(i),Math.abs(l))}function $(e,t,r){const o=r[0]-t[0],s=r[1]-t[1],i=r[2]-t[2];let n=o*o+s*s+i*i;return n>0?(n=1/Math.sqrt(n),e[0]=o*n,e[1]=s*n,e[2]=i*n,e):(e[0]=0,e[1]=0,e[2]=0,e)}const J=a,W=l,H=c,Z=S,Q=v,K=o,Y=w,X=Object.freeze(Object.defineProperty({__proto__:null,abs:d,add:n,angle:U,bezier:L,ceil:u,clamp:m,copy:s,cross:O,crossAndNormalize:P,direction:$,dist:Z,distance:S,div:H,divide:c,dot:I,equals:B,exactEquals:G,floor:p,hermite:C,inverse:T,len:K,length:o,lerp:k,max:f,min:y,mul:W,multiply:l,negate:x,normalize:M,random:E,rotateX:j,rotateY:N,rotateZ:D,round:g,scale:b,scaleAndAdd:_,set:i,sign:h,sqrDist:Q,sqrLen:Y,squaredDistance:v,squaredLength:w,str:z,sub:J,subtract:a,transformMat3:F,transformMat4:A,transformQuat:R},Symbol.toStringTag,{value:"Module"}));e.abs=d,e.add=n,e.angle=U,e.bezier=L,e.ceil=u,e.clamp=m,e.copy=s,e.cross=O,e.crossAndNormalize=P,e.direction=$,e.dist=Z,e.distance=S,e.div=H,e.divide=c,e.dot=I,e.equals=B,e.exactEquals=G,e.floor=p,e.hermite=C,e.inverse=T,e.len=K,e.length=o,e.lerp=k,e.max=f,e.min=y,e.mul=W,e.multiply=l,e.negate=x,e.normalize=M,e.random=E,e.rotateX=j,e.rotateY=N,e.rotateZ=D,e.round=g,e.scale=b,e.scaleAndAdd=_,e.set=i,e.sign=h,e.sqrDist=Q,e.sqrLen=Y,e.squaredDistance=v,e.squaredLength=w,e.str=z,e.sub=J,e.subtract=a,e.transformMat3=F,e.transformMat4=A,e.transformQuat=R,e.vec3=X})},"esri/geometry/support/MeshLocalVertexSpace":function(){define(["exports","../../chunks/tslib.es6","../../core/Clonable","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/subclass","../../core/libs/gl-matrix-2/factories/vec3f64"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";return e.default=class extends(r.ClonableMixin(o.JSONSupport)){constructor(e){super(e),this.type="local",this.origin=u.create()}},t.__decorate([l.enumeration({local:"local"},{readOnly:!0})],e.default.prototype,"type",void 0),t.__decorate([s.property({type:[Number],nonNullable:!0,json:{write:!0}})],e.default.prototype,"origin",void 0),e.default=t.__decorate([c.subclass("esri.geometry.support.MeshLocalVertexSpace")],e.default),e.default})},"esri/geometry/support/meshUtils/External":function(){define(["exports","../../../request","../../../core/arrayUtils","../../../core/has","../../../core/promiseUtils","../../../layers/support/infoFor3D"],function(e,t,r,o,s,i){"use strict";const n=/^(model\/gltf\+json)|(model\/gltf-binary)$/,a=/\.(gltf|glb)/i;function l(e){switch(e?.type){case"client":return Array.isArray(e.files)?e.files.some(c):c(e.files);case"service":return e.assets.some(c);case"loadable":return!0;default:return!1}}function c(e){if(e instanceof File){const{type:t,name:r}=e;return n.test(t)||a.test(r)}return n.test(e.assetMimeType)||a.test(e.assetName)}e.ServiceAsset=class{constructor(e,t,r){this.assetName=e,this.assetMimeType=t,this.parts=r}equals(e){return this===e||this.assetName===e.assetName&&this.assetMimeType===e.assetMimeType&&r.equals(this.parts,e.parts,(e,t)=>e.equals(t))}isOnService(e){return this.parts.every(t=>t.isOnService(e))}makeHash(){let e="";for(const t of this.parts)e+=t.partHash;return e}async toBlob(e){const{parts:t}=this;if(1===t.length)return t[0].toBlob(e);const r=await Promise.all(t.map(t=>t.toBlob(e)));return s.throwIfAborted(e),new Blob(r)}},e.ServiceAssetPart=class{constructor(e,t){this.partUrl=e,this.partHash=t}equals(e){return this===e||this.partUrl===e.partUrl&&this.partHash===e.partHash}isOnService(e){return this.partUrl.startsWith(`${e.path}/assets/`)}async toBlob(e){const{data:r}=await t(this.partUrl,{responseType:"blob"});return s.throwIfAborted(e),r}},e.assetFormatId=function(e,t){return e instanceof File?i.getFileFormatId(e,t):i.getMimeTypeOrFilenameFormatId(e.assetMimeType,e.assetName,t)},e.externalIsOnService=function(e,t){if(!e)return!1;const{source:r}=e;return function(e,t){return"service"===e.type&&e.assets.every(e=>e.isOnService(t))}(r,t)},e.externalSourceToMultiPart=function(e){switch(e.type){case"client":return Array.isArray(e.files)?e.files:[e.files];case"service":return e.assets;case"loadable":return}},e.externalSourcesAreEqual=function(e,t){if(e===t)return!0;const{source:r}=e,{source:o}=t;if(r===o)return!0;if("service"===r.type&&"service"===o.type){if(r.assets.length!==o.assets.length)return!1;const e=(e,t)=>e.assetName<t.assetName?-1:e.assetName>t.assetName?1:0,t=[...r.assets].sort(e),s=[...o.assets].sort(e);for(let e=0;e<t.length;++e)if(!t[e].equals(s[e]))return!1;return!0}return!1},e.isDisplayAsset=c,e.isDisplayExternal=function(e){return l(e?.source)},e.isDisplaySource=l,e.isOriginalExternal=function(e){return!!e.original},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/applyEditsUtils":function(){define(["exports","../../Graphic","../../core/Error","../../core/Logger","../../core/unitUtils","../../core/urlUtils","../../geometry/projectionUtils","../../geometry/support/jsonUtils","../../geometry/support/MeshTransform","../../geometry/support/spatialReferenceUtils","./editingSupport"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";async function p(e,t){const{feature:r,attachment:o}=t,{globalId:s,name:n,contentType:a,data:l,uploadId:c}=o,u={globalId:s};if(r&&("attributes"in r?u.parentGlobalId=r.attributes?.[e.globalIdField]:r.globalId&&(u.parentGlobalId=r.globalId)),c)u.uploadId=c;else if(l){const e=await i.parseData(l);e&&(u.contentType=e.mediaType,u.data=e.data),l instanceof File&&(u.name=l.name)}return n&&(u.name=n),a&&(u.contentType=a),u}function d(e){const t=!0===e.success?null:e.error||{code:void 0,description:"Feature edit failed"};return{objectId:e.objectId,globalId:e.globalId,error:t?new r("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}function h(e,r){return new t({attributes:e.attributes,geometry:a.fromJSON({...e.geometry,spatialReference:r})})}e.createEditedFeatures=function(e,t){return{adds:e?.adds?.map(e=>h(e,t))||[],updates:e?.updates?.map(e=>({original:h(e[0],t),current:h(e[1],t)}))||[],deletes:e?.deletes?.map(e=>h(e,t))||[],spatialReference:t}},e.createFeatureEditResult=d,e.getAttachmentEditsJSON=async function(e,t){const r=await Promise.all((t.addAttachments??[]).map(t=>p(e,t))),o=await Promise.all((t.updateAttachments??[]).map(t=>p(e,t))),s=t.deleteAttachments??[];return r.length||o.length||s.length?{adds:r,updates:o,deletes:[...s]}:null},e.getFeatureIds=function(e,t,r){if(!t||0===t.length)return[];if(r&&u.isFeatureIdentifierArrayWithGlobalId(t))return t.map(e=>e.globalId);if(u.isFeatureIdentifierArrayWithObjectId(t))return t.map(e=>e.objectId);const o=r?e.globalIdField:e.objectIdField;return o?t.map(e=>e.getAttribute(o)):[]},e.getFeatureJSON=async function(e,t,r){const{geometry:o}=t,i={...t.attributes};if(null!=r&&"mesh"===o?.type){const{transformFieldRoles:t}=r,{origin:a,spatialReference:u,vertexSpace:p}=o,d=o.transform??new l,h="local"===p.type,y=e.spatialReference,f=y.isGeographic,m=c.equals(y,u),g=n.isEqualBaseGCS(u,y)&&n.canProjectWithoutEngine(u,y);if(!(h&&f&&g||!h&&!f&&m))return null;const b=n.projectWithoutEngine(a,u,y);if(null==b)return null;if(i[t.originX]=b.x,i[t.originY]=b.y,i[t.originZ]=b.z??0,null!=d){const{translation:e,scale:r,rotation:o}=d,n=h?1:s.getMetersPerCartesianUnitForSR(u)/s.getMetersPerCartesianUnitForSR(y);i[t.translationX]=e[0]*n,i[t.translationY]=e[2]*n,i[t.translationZ]=-e[1]*n,i[t.scaleX]=r[0],i[t.scaleY]=r[2],i[t.scaleZ]=r[1],i[t.rotationX]=o[0],i[t.rotationY]=o[2],i[t.rotationZ]=-o[1],i[t.rotationDeg]=o[3]}return{attributes:i}}return null==o?{attributes:i}:"mesh"===o.type||"extent"===o.type?null:{geometry:o.toJSON(),attributes:i}},e.isProtectedOrPrivateVersionError=function(e){const t=e.details.raw,r=+t.code,o=+t.extendedCode;return 500===r&&(-2147217144===o||-2147467261===o)},e.unpackEditResultData=function(e){const t=e?.assetMaps;if(t){for(const e of t.addResults)e.success||o.getLogger("esri.layers.graphics.sources.support.sourceUtils").error(`Failed to map asset to feature with globalId ${e.globalId}.`);for(const e of t.updateResults)e.success||o.getLogger("esri.layers.graphics.sources.support.sourceUtils").error(`Failed to map asset to feature with globalId ${e.globalId}.`)}const r=e?.attachments,s={addFeatureResults:e?.addResults?.map(d)??[],updateFeatureResults:e?.updateResults?.map(d)??[],deleteFeatureResults:e?.deleteResults?.map(d)??[],addAttachmentResults:r?.addResults?r.addResults.map(d):[],updateAttachmentResults:r?.updateResults?r.updateResults.map(d):[],deleteAttachmentResults:r?.deleteResults?r.deleteResults.map(d):[]};return e?.editMoment&&(s.editMoment=e.editMoment),s},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/MeshTransform":function(){define(["exports","../../chunks/tslib.es6","../../core/Clonable","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../core/libs/gl-matrix-2/math/mat4","../../core/libs/gl-matrix-2/factories/mat4f64","../../core/libs/gl-matrix-2/math/quat","../../core/libs/gl-matrix-2/factories/quatf64","../../core/libs/gl-matrix-2/factories/vec3f64","./axisAngleDegrees"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y){"use strict";e.default=class extends(r.ClonableMixin(o.JSONSupport)){constructor(e){super(e),this.translation=h.create(),this.rotationAxis=h.fromArray(y.up),this.rotationAngle=0,this.scale=h.fromValues(1,1,1)}get rotation(){return y.fromAxisAndAngle(this.rotationAxis,this.rotationAngle)}set rotation(e){this.rotationAxis=h.clone(y.axis(e)),this.rotationAngle=y.angle(e)}get localMatrix(){const e=u.create();return p.setAxisAngle(f,y.axis(this.rotation),y.angleRad(this.rotation)),c.fromRotationTranslationScale(e,f,this.translation,this.scale),e}get localMatrixInverse(){return c.invert(u.create(),this.localMatrix)}equals(e){return this===e||null!=e&&c.exactEquals(this.localMatrix,e.localMatrix)}},t.__decorate([s.property({type:[Number],nonNullable:!0,json:{write:!0}})],e.default.prototype,"translation",void 0),t.__decorate([s.property({type:[Number],nonNullable:!0,json:{write:!0}})],e.default.prototype,"rotationAxis",void 0),t.__decorate([s.property({type:Number,nonNullable:!0,json:{write:!0}})],e.default.prototype,"rotationAngle",void 0),t.__decorate([s.property({type:[Number],nonNullable:!0,json:{write:!0}})],e.default.prototype,"scale",void 0),t.__decorate([s.property()],e.default.prototype,"rotation",null),t.__decorate([s.property()],e.default.prototype,"localMatrix",null),t.__decorate([s.property()],e.default.prototype,"localMatrixInverse",null),e.default=t.__decorate([l.subclass("esri.geometry.support.MeshTransform")],e.default);const f=d.create();return e.default})},"esri/core/libs/gl-matrix-2/factories/mat4f64":function(){define(["exports"],function(e){"use strict";function t(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function o(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f){return[e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f]}const s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],i=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:r,create:t,fromValues:o},Symbol.toStringTag,{value:"Module"}));e.IDENTITY=s,e.clone=r,e.create=t,e.fromValues=o,e.mat4f64=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/quat":function(){define(["exports","../factories/mat3f64","../factories/quatf64","../factories/vec3f64","./common","../../../../chunks/vec32","../../../../chunks/vec42"],function(e,t,r,o,s,i,n){"use strict";function a(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function l(e,t,r){r*=.5;const o=Math.sin(r);return e[0]=o*t[0],e[1]=o*t[1],e[2]=o*t[2],e[3]=Math.cos(r),e}function c(e,t){const r=2*Math.acos(t[3]),o=Math.sin(r/2);return o>s.getEpsilon()?(e[0]=t[0]/o,e[1]=t[1]/o,e[2]=t[2]/o):(e[0]=1,e[1]=0,e[2]=0),r}function u(e,t,r){const o=t[0],s=t[1],i=t[2],n=t[3],a=r[0],l=r[1],c=r[2],u=r[3];return e[0]=o*u+n*a+s*c-i*l,e[1]=s*u+n*l+i*a-o*c,e[2]=i*u+n*c+o*l-s*a,e[3]=n*u-o*a-s*l-i*c,e}function p(e,t,r){r*=.5;const o=t[0],s=t[1],i=t[2],n=t[3],a=Math.sin(r),l=Math.cos(r);return e[0]=o*l+n*a,e[1]=s*l+i*a,e[2]=i*l-s*a,e[3]=n*l-o*a,e}function d(e,t,r){r*=.5;const o=t[0],s=t[1],i=t[2],n=t[3],a=Math.sin(r),l=Math.cos(r);return e[0]=o*l-i*a,e[1]=s*l+n*a,e[2]=i*l+o*a,e[3]=n*l-s*a,e}function h(e,t,r){r*=.5;const o=t[0],s=t[1],i=t[2],n=t[3],a=Math.sin(r),l=Math.cos(r);return e[0]=o*l+s*a,e[1]=s*l-o*a,e[2]=i*l+n*a,e[3]=n*l-i*a,e}function y(e,t){const r=t[0],o=t[1],s=t[2];return e[0]=r,e[1]=o,e[2]=s,e[3]=Math.sqrt(Math.abs(1-r*r-o*o-s*s)),e}function f(e,t,r,o){const i=t[0],n=t[1],a=t[2],l=t[3];let c,u,p,d,h,y=r[0],f=r[1],m=r[2],g=r[3];return u=i*y+n*f+a*m+l*g,u<0&&(u=-u,y=-y,f=-f,m=-m,g=-g),1-u>s.getEpsilon()?(c=Math.acos(u),p=Math.sin(c),d=Math.sin((1-o)*c)/p,h=Math.sin(o*c)/p):(d=1-o,h=o),e[0]=d*i+h*y,e[1]=d*n+h*f,e[2]=d*a+h*m,e[3]=d*l+h*g,e}function m(e){const t=s.RANDOM,r=t(),o=t(),i=t(),n=Math.sqrt(1-r),a=Math.sqrt(r);return e[0]=n*Math.sin(2*Math.PI*o),e[1]=n*Math.cos(2*Math.PI*o),e[2]=a*Math.sin(2*Math.PI*i),e[3]=a*Math.cos(2*Math.PI*i),e}function g(e,t){const r=t[0],o=t[1],s=t[2],i=t[3],n=r*r+o*o+s*s+i*i,a=n?1/n:0;return e[0]=-r*a,e[1]=-o*a,e[2]=-s*a,e[3]=i*a,e}function b(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function _(e,t){const r=t[0]+t[4]+t[8];let o;if(r>0)o=Math.sqrt(r+1),e[3]=.5*o,o=.5/o,e[0]=(t[5]-t[7])*o,e[1]=(t[6]-t[2])*o,e[2]=(t[1]-t[3])*o;else{let r=0;t[4]>t[0]&&(r=1),t[8]>t[3*r+r]&&(r=2);const s=(r+1)%3,i=(r+2)%3;o=Math.sqrt(t[3*r+r]-t[3*s+s]-t[3*i+i]+1),e[r]=.5*o,o=.5/o,e[3]=(t[3*s+i]-t[3*i+s])*o,e[s]=(t[3*s+r]+t[3*r+s])*o,e[i]=(t[3*i+r]+t[3*r+i])*o}return e}function S(e,t,r,o){const s=.5*Math.PI/180;t*=s,r*=s,o*=s;const i=Math.sin(t),n=Math.cos(t),a=Math.sin(r),l=Math.cos(r),c=Math.sin(o),u=Math.cos(o);return e[0]=i*l*u-n*a*c,e[1]=n*a*u+i*l*c,e[2]=n*l*c-i*a*u,e[3]=n*l*u+i*a*c,e}function v(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}const w=n.copy,x=n.set,T=n.add,M=u,I=n.scale,O=n.dot,P=n.lerp,k=n.length,C=k,L=n.squaredLength,E=L,A=n.normalize,F=n.exactEquals,R=n.equals;function j(e,t,r){const o=i.dot(t,r);return o<-.999999?(i.cross(N,D,t),i.len(N)<1e-6&&i.cross(N,U,t),i.normalize(N,N),l(e,N,Math.PI),e):o>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(i.cross(N,t,r),e[0]=N[0],e[1]=N[1],e[2]=N[2],e[3]=1+o,A(e,e))}const N=o.create(),D=o.fromValues(1,0,0),U=o.fromValues(0,1,0);function V(e,t,r,o,s,i){return f(q,t,s,i),f(z,r,o,i),f(e,q,z,2*i*(1-i)),e}const q=r.create(),z=r.create();function G(e,t,r,o){const s=B;return s[0]=r[0],s[3]=r[1],s[6]=r[2],s[1]=o[0],s[4]=o[1],s[7]=o[2],s[2]=-t[0],s[5]=-t[1],s[8]=-t[2],A(e,_(e,s))}const B=t.create(),$=Object.freeze(Object.defineProperty({__proto__:null,add:T,calculateW:y,conjugate:b,copy:w,dot:O,equals:R,exactEquals:F,fromEuler:S,fromMat3:_,getAxisAngle:c,identity:a,invert:g,len:C,length:k,lerp:P,mul:M,multiply:u,normalize:A,random:m,rotateX:p,rotateY:d,rotateZ:h,rotationTo:j,scale:I,set:x,setAxes:G,setAxisAngle:l,slerp:f,sqlerp:V,sqrLen:E,squaredLength:L,str:v},Symbol.toStringTag,{value:"Module"}));e.add=T,e.calculateW=y,e.conjugate=b,e.copy=w,e.dot=O,e.equals=R,e.exactEquals=F,e.fromEuler=S,e.fromMat3=_,e.getAxisAngle=c,e.identity=a,e.invert=g,e.len=C,e.length=k,e.lerp=P,e.mul=M,e.multiply=u,e.normalize=A,e.quat=$,e.random=m,e.rotateX=p,e.rotateY=d,e.rotateZ=h,e.rotationTo=j,e.scale=I,e.set=x,e.setAxes=G,e.setAxisAngle=l,e.slerp=f,e.sqlerp=V,e.sqrLen=E,e.squaredLength=L,e.str=v,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat3f64":function(){define(["exports"],function(e){"use strict";function t(){return[1,0,0,0,1,0,0,0,1]}function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]}function o(e,t,r,o,s,i,n,a,l){return[e,t,r,o,s,i,n,a,l]}const s=[1,0,0,0,1,0,0,0,1],i=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:r,create:t,fromValues:o},Symbol.toStringTag,{value:"Module"}));e.IDENTITY=s,e.clone=r,e.create=t,e.fromValues=o,e.mat3f64=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/quatf64":function(){define(["exports"],function(e){"use strict";function t(){return[0,0,0,1]}function r(e){return[e[0],e[1],e[2],e[3]]}function o(e,t,r,o){return[e,t,r,o]}const s=[0,0,0,1],i=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:r,create:t,fromValues:o},Symbol.toStringTag,{value:"Module"}));e.IDENTITY=s,e.clone=r,e.create=t,e.fromValues=o,e.quatf64=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/axisAngleDegrees":function(){define(["exports","../../core/mathUtils","../../core/libs/gl-matrix-2/math/mat4","../../core/libs/gl-matrix-2/math/quat","../../core/libs/gl-matrix-2/factories/quatf64","../../chunks/vec32","../../core/libs/gl-matrix-2/factories/vec3f64"],function(e,t,r,o,s,i,n){"use strict";function a(e=h){return[e[0],e[1],e[2],e[3]]}function l(e,t,r,o,s=a()){return s[0]=e,s[1]=t,s[2]=r,s[3]=o,s}function c(e,t,r=a()){return i.copy(r,e),r[3]=t,r}function u(e,r,s=a()){return o.setAxisAngle(y,e,p(e)),o.setAxisAngle(f,r,p(r)),o.multiply(y,f,y),d(s,t.rad2deg(o.getAxisAngle(s,y)))}function p(e){return t.deg2rad(e[3])}function d(e,t){return e[3]=t,e}const h=[0,0,1,0],y=s.create(),f=s.create(),m=a(),g=a(),b=a(),_=a();e.angle=function(e){return e[3]},e.angleRad=p,e.axis=function(e){return e},e.compose=u,e.composeAxes=function(e,t,r,o=a()){return c(n.UNIT_X,e,g),c(n.UNIT_Y,t,b),c(n.UNIT_Z,r,_),u(g,b,g),u(g,_,o),o},e.copy=function(e,t=a()){return l(e[0],e[1],e[2],e[3],t)},e.create=a,e.fromAxisAndAngle=c,e.fromMatrix=function(e,s=a()){const i=r.getRotation(y,e);return d(s,t.rad2deg(o.getAxisAngle(s,i))),s},e.fromPoints=function(e,t,r){return i.cross(r,e,t),i.normalize(r,r),r[3]=-i.angle(e,t),r},e.fromValues=l,e.setAngle=d,e.up=h,e.wrap=function(e,t,r,o){return l(e,t,r,o,m)},e.wrapAxisAngle=function(e,t){return l(e[0],e[1],e[2],t,m)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/editingSupport":function(){define(["exports","../../Graphic","../../core/Collection","../../core/Error","../../core/lang","../../core/Logger","../../core/promiseUtils","../../core/urlUtils","../../core/uuid","../../geometry/support/normalizeUtils","../../geometry/support/spatialReferenceUtils","../mixins/EditBusLayer","../support/fieldUtils","../support/infoFor3D","../support/layerUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y){"use strict";function f(e){return null!=e?.applyEdits}function m(e){return"object"==typeof e&&null!=e&&"objectId"in e&&!!e.objectId}function g(e){return"object"==typeof e&&null!=e&&"globalId"in e&&!!e.globalId}function b(e,t,r,s){if(r){if("attributes"in e&&!e.attributes[t.globalIdField])throw new o(`${t.type}-layer:invalid-parameter`,`Feature should have '${t.globalIdField}' when 'globalIdUsed' is true`);if(!("attributes"in e)&&!e.globalId)throw new o(`${t.type}-layer:invalid-parameter`,"`'globalId' of the feature should be passed when 'globalIdUsed' is true")}if(s.length&&"attributes"in e)for(const r of s){const s=e.attributes[r.name];if(void 0!==s&&!d.isValidFieldValue(r,s))throw new o(`${t.type}-layer:invalid-parameter`,`Big-integer field '${r.name}' of the feature must be less than ${Number.MAX_SAFE_INTEGER}`,{feature:e})}if("geometry"in e&&null!=e.geometry){if(e.geometry.hasZ&&!1===t.capabilities?.data.supportsZ)throw new o(`${t.type}-layer:z-unsupported`,"Layer does not support z values while feature has z values.");if(e.geometry.hasM&&!1===t.capabilities?.data.supportsM)throw new o(`${t.type}-layer:m-unsupported`,"Layer does not support m values while feature has m values.")}}function _(e,t){if("geometry"in e&&"mesh"===e.geometry?.type&&null!=t.infoFor3D&&null!=t.spatialReference){const{geometry:r}=e,{spatialReference:s,vertexSpace:i}=r,n=t.spatialReference,a="local"===i.type,l=u.isGeographic(n),c=u.equals(n,s),p=c||u.isWGS84(n)&&(u.isWGS84(s)||u.isWebMercator(s));if(!(a&&l&&p||!a&&!l&&c))throw new o(`${t.type}-layer:mesh-unsupported`,`Uploading a mesh with a ${i.type} vertex space and a spatial reference wkid:${s.wkid} to a layer with a spatial reference wkid:${n.wkid} is not supported.`)}}function S(e,t){const{feature:r,attachment:s}=e;if(!r||"attributes"in r&&!r.attributes[t.globalIdField])throw new o(`${t.type}-layer:invalid-parameter`,"Attachment should have reference to a feature with 'globalId'");if(!("attributes"in r)&&!r.globalId)throw new o(`${t.type}-layer:invalid-parameter`,"Attachment should have reference to 'globalId' of the parent feature");if(!s.globalId)throw new o(`${t.type}-layer:invalid-parameter`,"Attachment should have 'globalId'");if(!s.data&&!s.uploadId)throw new o(`${t.type}-layer:invalid-parameter`,"Attachment should have 'data' or 'uploadId'");if(!(s.data instanceof File&&s.data.name||s.name))throw new o(`${t.type}-layer:invalid-parameter`,"'name' is required when attachment is specified as Base64 encoded string using 'data'");if(!t.capabilities?.editing.supportsUploadWithItemId&&s.uploadId)throw new o(`${t.type}-layer:invalid-parameter`,"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'");if("string"==typeof s.data){const e=a.dataComponents(s.data);if(e&&!e.isBase64)throw new o(`${t.type}-layer:invalid-parameter`,"Attachment 'data' should be a Blob, File or Base64 encoded string")}}async function v(e){const t=e.addFeatures??[],r=e.updateFeatures??[],o=t.concat(r).map(e=>e.geometry),s=await c.normalizeCentralMeridian(o),i=t.length,n=r.length;return s.slice(0,i).forEach((e,r)=>t[r].geometry=e),s.slice(i,i+n).forEach((e,t)=>r[t].geometry=e),e}function w(e){return{addFeatures:Array.from(e?.addFeatures??[]),updateFeatures:Array.from(e?.updateFeatures??[]),deleteFeatures:e&&r.isCollection(e.deleteFeatures)?e.deleteFeatures.toArray():e.deleteFeatures||[],addAttachments:e.addAttachments||[],updateAttachments:e.updateAttachments||[],deleteAttachments:e.deleteAttachments||[]}}function x(e,t,r){const s=w(e);if(s.addFeatures?.length&&!t.operations.supportsAdd)throw new o(`${r}:unsupported-operation`,"Layer does not support adding features.");if(s.updateFeatures?.length&&!t.operations.supportsUpdate)throw new o(`${r}:unsupported-operation`,"Layer does not support updating features.");if(s.deleteFeatures?.length&&!t.operations.supportsDelete)throw new o(`${r}:unsupported-operation`,"Layer does not support deleting features.");return s.addFeatures=s.addFeatures.map(M),s.updateFeatures=s.updateFeatures.map(M),s.addAssetFeatures=[],s}function T(e,t,r,s,i,n){if(!(e&&(s||i)||r?.usingTelecomOperations))throw new o(`${n}:missing-parameters`,"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required");if(!t.editing.supportsGlobalId&&r?.globalIdUsed&&!r.usingFeatureServiceEndpoint)throw new o(`${n}:invalid-parameter`,"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'");if(!t.editing.supportsGlobalId&&i)throw new o(`${n}:invalid-parameter`,"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'");if(!r?.globalIdUsed&&i)throw new o(`${n}:invalid-parameter`,"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true")}function M(e){const r=new t;return e.attributes||(e.attributes={}),r.geometry=e.geometry,r.attributes=e.attributes,r}function I(e){return"mesh"===e?.geometry?.type}e.applyEdits=async function(e,t,r,a={}){let c;const u="gdbVersion"in e?e.gdbVersion:null,d=a.gdbVersion??u;if(p.isEditBusLayer(e)&&e.url)c=p.emitApplyEditsEvent(e.url,e.layerId,d,"original-and-current-features"===a.returnServiceEditsOption);else{c=n.createResolver(),c.promise.then(t=>{(t.addedFeatures.length||t.updatedFeatures.length||t.deletedFeatures.length||t.addedAttachments.length||t.updatedAttachments.length||t.deletedAttachments.length)&&e.emit("edits",t)});const t={result:c.promise};e.emit("apply-edits",t)}try{const{results:n,edits:u}=await async function(e,t,r,s){if(await e.load(),!f(t))throw new o(`${e.type}-layer:no-editing-support`,"Layer source does not support applyEdits capability",{layer:e});if(!y.getEffectiveEditingEnabled(e))throw new o(`${e.type}-layer:editing-disabled`,"Editing is disabled for layer",{layer:e});const{edits:n,options:a}=await async function(e,t,r){const s=y.getEffectiveLayerCapabilities(e),n=t&&(t.addFeatures||t.updateFeatures||t.deleteFeatures),a=t&&(t.addAttachments||t.updateAttachments||t.deleteAttachments),c=null!=e.infoFor3D;if(T(t,s,r,!!n,!!a,`${e.type}-layer`),!s.data.isVersioned&&r?.gdbVersion)throw new o(`${e.type}-layer:invalid-parameter`,"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'");if(!s.editing.supportsRollbackOnFailure&&r?.rollbackOnFailureEnabled)throw new o(`${e.type}-layer:invalid-parameter`,"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'");const u={...r};if(null!=u.rollbackOnFailureEnabled||s.editing.supportsRollbackOnFailure||(u.rollbackOnFailureEnabled=!0),u.rollbackOnFailureEnabled||"original-and-current-features"!==u.returnServiceEditsOption||(!1===u.rollbackOnFailureEnabled&&i.getLogger("esri.layers.graphics.editingSupport").warn(`${e.type}-layer:invalid-parameter`,"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true, but 'rollBackOnFailure' was set to false. 'rollBackOnFailure' has been overwritten and set to true."),u.rollbackOnFailureEnabled=!0),!s.editing.supportsReturnServiceEditsInSourceSpatialReference&&u.returnServiceEditsInSourceSR)throw new o(`${e.type}-layer:invalid-parameter`,"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'");if(u.returnServiceEditsInSourceSR&&"original-and-current-features"!==u.returnServiceEditsOption)throw new o(`${e.type}-layer:invalid-parameter`,"'returnServiceEditsInSourceSR' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'");const p=x(t,s,`${e.type}-layer`),d=r?.globalIdUsed||c,f=e.fields.filter(e=>"big-integer"===e.type||"oid"===e.type&&(e.length||0)>=8);if(d){const{globalIdField:t}=e;if(null==t)throw new o(`${e.type}-layer:invalid-parameter`,"Layer does not specify a global id field.");p.addFeatures.forEach(e=>function(e,t){const{attributes:r}=e;null==r[t]&&(r[t]=l.generateBracedUUID())}(e,t))}return p.addFeatures.forEach(t=>function(e,t,r,o){b(e,t,r,o),_(e,t)}(t,e,d,f)),p.updateFeatures.forEach(t=>function(e,t,r,s){b(e,t,r,s),_(e,t);const i=y.getEffectiveLayerCapabilities(t);if("geometry"in e&&null!=e.geometry&&!i?.editing.supportsGeometryUpdate)throw new o(`${t.type}-layer:unsupported-operation`,"Layer does not support geometry updates.")}(t,e,d,f)),p.deleteFeatures.forEach(t=>function(e,t,r,o){b(e,t,r,o)}(t,e,d,f)),p.addAttachments.forEach(t=>S(t,e)),p.updateAttachments.forEach(t=>S(t,e)),c&&await async function(e,t){const{infoFor3D:r}=t;if(null==r)return;if(!h.isGlbSupportedEditFormat(r))throw new o(`${t.type}-layer:binary-gltf-asset-not-supported`,"3DObjectFeatureLayer requires binary glTF (.glb) support for updating mesh geometry.");e.addAssetFeatures??=[];const{addAssetFeatures:s}=e;for(const t of e.addFeatures??[])I(t)&&s.push(t);for(const t of e.updateFeatures??[])I(t)&&s.push(t)}(p,e),{edits:await v(p),options:u}}(e,r,s);return n.addFeatures?.length||n.updateFeatures?.length||n.deleteFeatures?.length||n.addAttachments?.length||n.updateAttachments?.length||n.deleteAttachments?.length?{edits:n,results:await t.applyEdits(n,a)}:{edits:n,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}}(e,t,r,a),p=e=>e.filter(e=>!e.error).map(s.clone),d={edits:u,addedFeatures:p(n.addFeatureResults),updatedFeatures:p(n.updateFeatureResults),deletedFeatures:p(n.deleteFeatureResults),addedAttachments:p(n.addAttachmentResults),updatedAttachments:p(n.updateAttachmentResults),deletedAttachments:p(n.deleteAttachmentResults),exceededTransferLimit:!1,historicMoment:n.editMoment?new Date(n.editMoment):null,globalIdToObjectId:a.globalIdToObjectId};return n.editedFeatureResults?.length&&(d.editedFeatures=n.editedFeatureResults),c.resolve(d),n}catch(e){throw c.reject(e),e}},e.checkEditingCapabilities=T,e.isFeatureIdentifierArrayWithGlobalId=function(e){return e.every(g)},e.isFeatureIdentifierArrayWithObjectId=function(e){return e.every(m)},e.isFeatureIdentifierWithGlobalId=g,e.isFeatureIdentifierWithObjectId=m,e.normalizeCollections=w,e.normalizeEdits=x,e.normalizeGeometries=v,e.shallowCloneFeature=M,e.uploadAssets=function(e,t,r,s){if(!f(t))throw new o(`${e.type}-layer:no-editing-support`,"Layer source does not support applyEdits capability",{layer:e});if(!t.uploadAssets)throw new o(`${e.type}-layer:no-asset-upload-support`,"Layer source does not support uploadAssets capability",{layer:e});return t.uploadAssets(r,s)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define(["exports","../../config","../../core/Error","../../core/Logger","../Polygon","../Polyline","./normalizeUtilsCommon","./spatialReferenceUtils","./webMercatorUtils","../../rest/geometryService/cut","../../rest/geometryService/simplify"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";const p=()=>o.getLogger("esri.geometry.support.normalizeUtils");function d(e){return"polygon"===e[0].type}function h(e){return"polyline"===e[0].type}function y(e){const t=[];let r=0,o=0;for(let s=0;s<e.length;s++){const i=e[s];let n=null;for(let e=0;e<i.length;e++)n=i[e],t.push(n),0===e?(r=n[0],o=r):(r=Math.min(r,n[0]),o=Math.max(o,n[0]));n&&t.push([(r+o)/2,0])}return t}function f(e,t){if(!(e instanceof i||e instanceof s)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw p().error(e),new r("internal:geometry",e)}const o=n.getGeometryParts(e),a=[];for(const e of o){const r=[];a.push(r),r.push([e[0][0],e[0][1]]);for(let o=0;o<e.length-1;o++){const s=e[o][0],i=e[o][1],n=e[o+1][0],a=e[o+1][1],l=Math.sqrt((n-s)*(n-s)+(a-i)*(a-i)),c=(a-i)/l,u=(n-s)/l,p=l/t;if(p>1){for(let e=1;e<=p-1;e++){const o=e*t,n=u*o+s,a=c*o+i;r.push([n,a])}const e=(l+Math.floor(p-1)*t)/2,o=u*e+s,n=c*e+i;r.push([o,n])}r.push([n,a])}}return function(e){return"polygon"===e.type}(e)?new s({rings:a,spatialReference:e.spatialReference}):new i({paths:a,spatialReference:e.spatialReference})}function m(e,t,r){if(t){const t=f(e,1e6);e=l.webMercatorToGeographic(t,!0)}return r&&(e=n.updatePolyGeometry(e,r)),e}function g(e,t,r){if(Array.isArray(e)){const o=e[0];if(o>t){const r=n.offsetMagnitude(o,t);e[0]=o+r*(-2*t)}else if(o<r){const t=n.offsetMagnitude(o,r);e[0]=o+t*(-2*r)}}else{const o=e.x;if(o>t){const r=n.offsetMagnitude(o,t);e=e.clone().offset(r*(-2*t),0)}else if(o<r){const t=n.offsetMagnitude(o,r);e=e.clone().offset(t*(-2*r),0)}}return e}e.getClosestDenormalizedXToReference=function(e,t,r){const o=a.getInfo(r);if(null==o)return e;const[s,i]=o.valid,n=2*i;let l=0,c=0;t>i?l=Math.ceil(Math.abs(t-i)/n):t<s&&(l=-Math.ceil(Math.abs(t-s)/n)),e>i?c=Math.ceil(Math.abs(e-i)/n):e<s&&(c=-Math.ceil(Math.abs(e-s)/n));let u=e+(l-c)*n;const p=u-t;return p>i?u-=n:p<s&&(u+=n),u},e.getDenormalizedExtent=function(e){if(!e)return null;const t=e.extent;if(!t)return null;const r=e.spatialReference&&a.getInfo(e.spatialReference);if(!r)return t;const[o,s]=r.valid,i=2*s,{width:n}=t;let l,{xmin:c,xmax:u}=t;if([c,u]=[u,c],"extent"===e.type||0===n||n<=s||n>i||c<o||u>s)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;l=y(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;l=y(e.paths);break;case"multipoint":l=e.points}const p=t.clone();for(let e=0;e<l.length;e++){let t=l[e][0];t<0?(t+=s,u=Math.max(t,u)):(t-=s,c=Math.min(t,c))}return p.xmin=c,p.xmax=u,p.width<n?(p.xmin-=s,p.xmax-=s,p):t},e.normalizeCentralMeridian=async function e(r,o,y){if(!Array.isArray(r))return e([r],o);o&&"string"!=typeof o&&p().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const f="string"==typeof o?o:o?.url??t.geometryServiceUrl;let b,_,S,v,w,x,T,M,I=0;const O=[],P=[];for(const e of r)if(null!=e)if(b||(b=e.spatialReference,_=a.getInfo(b),S=b.isWebMercator,x=S?102100:4326,v=n.cutParams[x].maxX,w=n.cutParams[x].minX,T=n.cutParams[x].plus180Line,M=n.cutParams[x].minus180Line),_)if("mesh"===e.type)P.push(e);else if("point"===e.type)P.push(g(e.clone(),v,w));else if("multipoint"===e.type){const t=e.clone();t.points=t.points.map(e=>g(e,v,w)),P.push(t)}else if("extent"===e.type){const t=e.clone()._normalize(!1,!1,_);P.push(t.rings?new s(t):t)}else if(e.extent){const t=e.extent,r=n.offsetMagnitude(t.xmin,w)*(2*v);let o=0===r?e.clone():n.updatePolyGeometry(e.clone(),r);t.offset(r,0);let{xmin:s,xmax:i}=t;s=Number(s.toFixed(9)),i=Number(i.toFixed(9)),t.intersects(T)&&i!==v?(I=i>I?i:I,o=m(o,S),O.push(o),P.push("cut")):t.intersects(M)&&s!==w?(I=i*(2*v)>I?i*(2*v):I,o=m(o,S,360),O.push(o),P.push("cut")):P.push(o)}else P.push(e.clone());else P.push(e);else P.push(e);let k=n.offsetMagnitude(I,v),C=-90;const L=k,E=new i;for(;k>0;){const e=360*k-180;E.addPath([[e,C],[e,-1*C]]),C*=-1,k--}if(O.length>0&&L>0){const e=function(e,t){let r=-1;for(let o=0;o<t.cutIndexes.length;o++){const s=t.cutIndexes[o],i=t.geometries[o],a=n.getGeometryParts(i);for(let e=0;e<a.length;e++){const t=a[e];t.some(r=>{if(r[0]<180)return!0;{let r=0;for(let e=0;e<t.length;e++){const o=t[e][0];r=o>r?o:r}r=Number(r.toFixed(9));const o=-360*n.offsetMagnitude(r,180);for(let r=0;r<t.length;r++){const t=i.getPoint(e,r);i.setPoint(e,r,t.clone().offset(o,0))}return!0}})}if(s===r){if(d(e))for(const t of n.getGeometryParts(i))e[s]=e[s].addRing(t);else if(h(e))for(const t of n.getGeometryParts(i))e[s]=e[s].addPath(t)}else r=s,e[s]=i}return e}(O,await c.cut(f,O,E,y)),t=[],o=[];for(let s=0;s<P.length;s++){const i=P[s];if("cut"!==i)o.push(i);else{const i=e.shift(),n=r[s];null!=n&&"polygon"===n.type&&n.rings&&n.rings.length>1&&i.rings.length>=n.rings.length?(t.push(i),o.push("simplify")):o.push(S?l.geographicToWebMercator(i):i)}}if(!t.length)return o;const s=await u.simplify(f,t,y),i=[];for(let e=0;e<o.length;e++){const t=o[e];"simplify"!==t?i.push(t):i.push(S?l.geographicToWebMercator(s.shift()):s.shift())}return i}const A=[];for(let e=0;e<P.length;e++){const t=P[e];if("cut"!==t)A.push(t);else{const e=O.shift();A.push(!0===S?l.geographicToWebMercator(e):e)}}return A},e.normalizeMapX=function(e,t){const r=a.getInfo(t);if(r){const[t,o]=r.valid,s=o-t;if(e<t)for(;e<t;)e+=s;if(e>o)for(;e>o;)e-=s}return e},e.straightLineDensify=f,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(e,t,r,o){"use strict";const s={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new t({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:r.WebMercator}),minus180Line:new t({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:r.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new t({paths:[[[180,-180],[180,180]]],spatialReference:r.WGS84}),minus180Line:new t({paths:[[[-180,-180],[-180,180]]],spatialReference:r.WGS84})}};function i(e){return o.isPolygon(e)?e.rings:e.paths}e.cutParams=s,e.getGeometryParts=i,e.offsetMagnitude=function(e,t){return Math.ceil((e-t)/(2*t))},e.updatePolyGeometry=function(e,t){const r=i(e);for(const e of r)for(const r of e)r[0]+=t;return e},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define(["exports","../../request","../../geometry/support/jsonUtils","../../geometry/support/spatialReferenceUtils","../utils"],function(e,t,r,o,s){"use strict";e.cut=async function(e,i,n,a){const l=s.parseUrl(e),c=i[0].spatialReference,u={...a,responseType:"json",query:{...l.query,f:"json",sr:o.srToRESTValue(c),target:JSON.stringify({geometryType:r.getJsonType(i[0]),geometries:i}),cutter:JSON.stringify(n)}},p=await t(l.path+"/cut",u),{cutIndexes:d,geometries:h=[]}=p.data;return{cutIndexes:d,geometries:h.map(e=>{const t=r.fromJSON(e);return t.spatialReference=c,t})}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define(["require","exports","../config","../kernel","../core/lang","../core/urlUtils","../support/apiKeyUtils"],function(e,t,r,o,s,i,n){"use strict";const a=e=>Object.freeze(Object.defineProperty({__proto__:null,default:e},Symbol.toStringTag,{value:"Module"}));function l(e,t){return e?t&&n.supportsApiKey(e)?t:n.getApiKey(e)??o.id?.findCredential(e)?.token:null}t.asValidOptions=function(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}},t.encode=function e(t,r,o){const s={};for(const i in t){if("declaredClass"===i)continue;const n=t[i];if(null!=n&&"function"!=typeof n)if(Array.isArray(n))s[i]=n.map(t=>e(t));else if("object"==typeof n)if(n.toJSON){const e=n.toJSON(o?.[i]);s[i]=r?e:JSON.stringify(e)}else s[i]=r?n:JSON.stringify(n);else s[i]=n}return s},t.findToken=l,t.getToken=async function(t,s,i){const n=l(t,s);if(n)return n;!o.id&&r.request.useIdentity&&await new Promise((t,r)=>e(["../identity/IdentityManager"],e=>t(a(e)),r));const c=await o.id.getCredential(t,i);return c?.token},t.parseUrl=function(e){return"string"==typeof e?i.urlToObject(e):s.clone(e)},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define(["exports","../../request","../../core/urlUtils","../../geometry/support/jsonUtils","../../geometry/support/spatialReferenceUtils","./utils"],function(e,t,r,o,s,i){"use strict";e.simplify=async function(e,n,a){const l="string"==typeof e?r.urlToObject(e):e,c=n[0].spatialReference,u=o.getJsonType(n[0]),p={...a,query:{...l.query,f:"json",sr:s.srToRESTValue(c),geometries:JSON.stringify(i.encodeGeometries(n))}},{data:d}=await t(l.path+"/simplify",p);return i.decodeGeometries(d.geometries,u,c)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(e,t){"use strict";e.decodeGeometries=function(e,r,o){const s=t.getGeometryType(r);return e.map(e=>{const t=s.fromJSON(e);return t.spatialReference=o,t})},e.encodeGeometries=function(e){return{geometryType:t.getJsonType(e[0]),geometries:e.map(e=>e.toJSON())}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(e,t,r,o,s){"use strict";const i=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let n=1;function a(e){return i.test(e)?`.${e}`:`["${e}"]`}e.createCapabilities=function(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:o.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:o.queryBinsCapabilities,editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}},e.createDefaultAttributesFunction=function(e,r){if(t("esri-csp-restrictions"))return()=>({[r]:null,...e});try{let t=`this${a(r)} = null;`;for(const r in e)t+=`this${a(r)} = ${JSON.stringify(e[r])};`;const o=new Function(`\n      return class AttributesClass$${n++} {\n        constructor() {\n          ${t};\n        }\n      }\n    `)();return()=>new o}catch(t){return()=>({[r]:null,...e})}},e.createDefaultTemplate=function(e={}){return[{name:"New Feature",description:"",prototype:{attributes:r.clone(e)}}]},e.createDrawingInfo=function(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?s.defaultPointSymbolJSON:"esriGeometryPolyline"===e?s.defaultPolylineSymbolJSON:s.defaultPolygonSymbolJSON}}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(e){"use strict";e.queryBinsCapabilities={supportsDate:!0,supportsFixedInterval:!0,supportsAutoInterval:!0,supportsFixedBoundaries:!0,supportsStackBy:!0,supportsSplitBy:!0,supportsSnapToData:!1,supportsReturnFullIntervalBin:!1,supportsFirstDayOfWeek:!1,supportsNormalization:!0,supportedStatistics:{count:!0,sum:!0,avg:!0,var:!0,stddev:!0,min:!0,max:!0,percentileContinuous:!0,percentileDiscrete:!0,envelope:!0,centroid:!0,convexHull:!0},supportedNormalizationTypes:{field:!0,log:!0,naturalLog:!0,percentOfTotal:!0,squareRoot:!0}},e.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!0,supportsCurrentUser:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsPaginationOnAggregatedQueries:!1,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!0,supportsReturnMesh:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,maxUniqueIDCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0,supportsTrueCurve:!1},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/QueryTask":function(){define(["require","exports","../../../../chunks/tslib.es6","../../../../core/Accessor","../../../../core/Error","../../../../core/has","../../../../core/promiseUtils","../../../../core/urlUtils","../../../../core/accessorSupport/decorators/property","../../../../core/Logger","../../../../core/RandomLCG","../../../../core/accessorSupport/decorators/subclass","../../../../geometry/support/spatialReferenceUtils","../../../support/infoFor3D","../../../support/source/DataLayerSource","../../../../rest/utils","../../../../rest/query/executeForCount","../../../../rest/query/executeForExtent","../../../../rest/query/executeForIds","../../../../rest/query/executeQueryJSON","../../../../rest/query/executeQueryPBF","../../../../rest/support/FeatureSet","../../../../rest/support/Query"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b,_,S,v,w){"use strict";const x=e=>Object.freeze(Object.defineProperty({__proto__:null,default:e},Symbol.toStringTag,{value:"Module"}));return t.default=class extends o{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.uniqueIdFields=null,this.url=null}get parsedUrl(){return a.urlToObject(this.url)}async execute(e,t){const r=await this.executeJSON(e,t);return this.featureSetFromJSON(e,r,t)}async executeJSON(e,t){const r=this._normalizeQuery(e),o=null!=e.outStatistics?.[0],s=i("featurelayer-pbf-statistics"),n=(!o||s)&&!0!==e.returnTrueCurves;let a;if(this.pbfSupported&&n)try{a=await S.executeRawQueryPBF(this.url,r,t,{uniqueIdFields:this.uniqueIdFields})}catch(e){if("query:parsing-pbf"!==e.name)throw e;this.pbfSupported=!1}return this.pbfSupported&&n||(a=await _.executeRawQueryJSON(this.url,r,t,{uniqueIdFields:this.uniqueIdFields})),this._normalizeFields(a.fields),a}async featureSetFromJSON(t,r,o){if(!this._queryIs3DObjectFormat(t)||null==this.infoFor3D||!r.features)return v.fromJSON(r);const{meshFeatureSetFromJSON:s}=await n.whenOrAbort(new Promise((t,r)=>e(["../../../../rest/support/meshFeatureSet"],t,r)),o);return s(t,this.infoFor3D,r)}executeForCount(e,t){return m.executeForCount(this.url,this._normalizeQuery(e),t,{uniqueIdFields:this.uniqueIdFields})}executeForExtent(e,t){return g.executeForExtent(this.url,this._normalizeQuery(e),t)}executeForIds(e,t){return b.executeForIds(this.url,this._normalizeQuery(e),t,{uniqueIdFields:this.uniqueIdFields})}async executeRelationshipQuery(t,r){const[{default:o},{executeRelationshipQuery:s}]=await n.whenOrAbort(Promise.all([new Promise((t,r)=>e(["../../../../rest/support/RelationshipQuery"],e=>t(x(e)),r)),new Promise((t,r)=>e(["../../../../rest/query/executeRelationshipQuery"],t,r))]),r);return t=o.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),s(this.url,t,r)}async executeRelationshipQueryForCount(t,r){const[{default:o},{executeRelationshipQueryForCount:s}]=await n.whenOrAbort(Promise.all([new Promise((t,r)=>e(["../../../../rest/support/RelationshipQuery"],e=>t(x(e)),r)),new Promise((t,r)=>e(["../../../../rest/query/executeRelationshipQuery"],t,r))]),r);return t=o.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),s(this.url,t,r)}async executeAttachmentQuery(t,r){const{executeAttachmentQuery:o,fetchAttachments:s,processAttachmentQueryResult:i}=await n.whenOrAbort(new Promise((t,r)=>e(["../../../../rest/query/operations/queryAttachments"],t,r)),r),a=f.parseUrl(this.url);return i(a,await(this.queryAttachmentsSupported?o(a,t,r):s(a,t,r)))}async executeAttributeBinsQuery(t,r){const{executeAttributeBinsQuery:o}=await n.whenOrAbort(new Promise((t,r)=>e(["../../../../rest/query/executeAttributeBinsQuery"],t,r)),r);return o(this.parsedUrl,t,r)}async executeTopFeaturesQuery(t,r){const{executeTopFeaturesQuery:o}=await n.whenOrAbort(new Promise((t,r)=>e(["../../../../rest/query/executeTopFeaturesQuery"],t,r)),r);return o(this.parsedUrl,t,this.sourceSpatialReference,r)}async executeForTopIds(t,r){const{executeForTopIds:o}=await n.whenOrAbort(new Promise((t,r)=>e(["../../../../rest/query/executeForTopIds"],t,r)),r);return o(this.parsedUrl,t,r)}async executeForTopExtents(t,r){const{executeForTopExtents:o}=await n.whenOrAbort(new Promise((t,r)=>e(["../../../../rest/query/executeForTopExtents"],t,r)),r);return o(this.parsedUrl,t,r)}async executeForTopCount(t,r){const{executeForTopCount:o}=await n.whenOrAbort(new Promise((t,r)=>e(["../../../../rest/query/executeForTopCount"],t,r)),r);return o(this.parsedUrl,t,r)}_normalizeQuery(e){let t=w.from(e);t.sourceSpatialReference=t.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(t=t===e?t.clone():t,t.gdbVersion=e.gdbVersion||this.gdbVersion,t.dynamicDataSource=e.dynamicDataSource?y.DataLayerSource.from(e.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:r}=this;if(null!=r&&this._queryIs3DObjectFormat(e)){if(t=t===e?t.clone():t,t.formatOf3DObjects=h.getGltfQueryFormat(r),!t.formatOf3DObjects)throw new s("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(t.outSpatialReference&&!d.equals(t.outSpatialReference,this.sourceSpatialReference))throw new s("query:unsupported-out-spatial-reference","3D object feature services do not support projection of geometries");if(null==t.outFields||!t.outFields.includes("*")){t=t===e?t.clone():t,null==t.outFields&&(t.outFields=[]);const{originX:o,originY:s,originZ:i,translationX:n,translationY:a,translationZ:l,scaleX:c,scaleY:u,scaleZ:p,rotationX:d,rotationY:h,rotationZ:y,rotationDeg:f}=r.transformFieldRoles;t.outFields.push(o,s,i,n,a,l,c,u,p,d,h,y,f)}}return t}_normalizeFields(e){if(null!=this.fieldsIndex&&null!=e)for(const t of e){const e=this.fieldsIndex.get(t.name);e&&Object.assign(t,e.toJSON())}}_queryIs3DObjectFormat(e){return null!=this.infoFor3D&&!0===e.returnGeometry&&"xyFootprint"!==e.multipatchOption&&!e.outStatistics}},r.__decorate([l.property({type:y.DataLayerSource})],t.default.prototype,"dynamicDataSource",void 0),r.__decorate([l.property()],t.default.prototype,"fieldsIndex",void 0),r.__decorate([l.property()],t.default.prototype,"gdbVersion",void 0),r.__decorate([l.property()],t.default.prototype,"infoFor3D",void 0),r.__decorate([l.property({readOnly:!0})],t.default.prototype,"parsedUrl",null),r.__decorate([l.property()],t.default.prototype,"pbfSupported",void 0),r.__decorate([l.property()],t.default.prototype,"queryAttachmentsSupported",void 0),r.__decorate([l.property()],t.default.prototype,"sourceSpatialReference",void 0),r.__decorate([l.property()],t.default.prototype,"uniqueIdFields",void 0),r.__decorate([l.property({type:String})],t.default.prototype,"url",void 0),t.default=r.__decorate([p.subclass("esri.layers.graphics.sources.support.QueryTask")],t.default),t.default})},"esri/rest/query/executeForCount":function(){define(["exports","../utils","./operations/query","../support/Query"],function(e,t,r,o){"use strict";e.executeForCount=async function(e,s,i,n){const a=t.parseUrl(e),{data:l}=await r.executeQueryForCount(a,o.from(s),i,n);return l.count},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/query":function(){define(["exports","../../../request","../../../core/urlUtils","../../../geometry/support/jsonUtils","../../../geometry/support/normalizeUtils","../../../geometry/support/spatialReferenceUtils","../../operations/urlUtils","./pbfQueryUtils","./queryZScale"],function(e,t,r,o,s,i,n,a,l){"use strict";const c="Layer does not support extent calculation.";function u(e,t){if(t&&"extent"===e.type)return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&"point"===e.type)return`${e.x},${e.y}`;const r=e.toJSON();return delete r.spatialReference,JSON.stringify(r)}function p(e,t,r){const s=e.geometry,n=e.toJSON();delete n.compactGeometryEnabled,delete n.defaultSpatialReferenceEnabled;const a=n;let l,c,p;if(s&&(c=s.spatialReference,p=i.srToRESTValue(c),a.geometryType=o.getJsonType(s),a.geometry=u(s,e.compactGeometryEnabled),a.inSR=p),n.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(",")),n.objectIds)switch(r?.uniqueIdFields?.length){case void 0:a.objectIds=n.objectIds.join(",");break;case 1:a.uniqueIds=JSON.stringify(n.objectIds),delete a.objectIds;break;default:a.uniqueIds=JSON.stringify(n.objectIds.map(e=>JSON.parse(e))),delete a.objectIds}if(n.orderByFields&&(a.orderByFields=n.orderByFields.join(",")),!n.outFields||!n.returnDistinctValues&&(t?.returnCountOnly||t?.returnExtentOnly||t?.returnIdsOnly)?delete a.outFields:n.outFields.includes("*")?a.outFields="*":a.outFields=n.outFields.join(","),n.outSR?(a.outSR=i.srToRESTValue(n.outSR),l=e.outSpatialReference):s&&(n.returnGeometry||n.returnCentroid)&&(a.outSR=a.inSR,l=c),n.returnGeometry&&delete n.returnGeometry,n.outStatistics&&(a.outStatistics=JSON.stringify(n.outStatistics)),n.fullText&&(a.fullText=JSON.stringify(n.fullText)),n.pixelSize&&(a.pixelSize=JSON.stringify(n.pixelSize)),n.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&null!=c&&null!=e.quantizationParameters?.extent&&c.equals(e.quantizationParameters.extent.spatialReference)&&delete n.quantizationParameters.extent.spatialReference,a.quantizationParameters=JSON.stringify(n.quantizationParameters)),n.parameterValues&&(a.parameterValues=JSON.stringify(n.parameterValues)),n.rangeValues&&(a.rangeValues=JSON.stringify(n.rangeValues)),n.dynamicDataSource&&(a.layer=JSON.stringify({source:n.dynamicDataSource}),delete n.dynamicDataSource),n.timeExtent){const e=n.timeExtent,{start:t,end:r}=e;null==t&&null==r||(a.time=t===r?t:`${t??"null"},${r??"null"}`),delete n.timeExtent}return e.defaultSpatialReferenceEnabled&&null!=c&&null!=l&&c.equals(l)&&(a.defaultSR=a.inSR,delete a.inSR,delete a.outSR),a}function d(e,t,r,o){return y(e,t,"pbf",r,void 0,o)}function h(e,t){if(!e.returnIdsOnly||!t.uniqueIdFields)return e;const r={...e,returnUniqueIdsOnly:!0};return delete r.returnIdsOnly,r}async function y(e,o,i,a={},l={},c={}){const u="string"==typeof e?r.urlToObject(e):e,d=o.geometry?[o.geometry]:[],y=await s.normalizeCentralMeridian(d,null,{signal:a.signal}),f=y?.[0];null!=f&&((o=o.clone()).geometry=f);const m=n.mapParameters({...u.query,f:i,...h(l,c),...p(o,l,c)});return t(r.join(u.path,function(e,t){return null!=e.formatOf3DObjects&&!(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)}(o,l)?"query3d":"query"),{...a,responseType:"pbf"===i?"array-buffer":"json",query:{...m,...a.query}})}e.encodeGeometry=u,e.executeQuery=async function(e,t,r,o,s){const i=t.timeExtent?.isEmpty?{data:{features:[]}}:await y(e,t,"json",o,void 0,s);return l.applyFeatureSetZUnitScaling(t,r,i.data),i},e.executeQueryForCount=function(e,t,r,o){return t.timeExtent?.isEmpty?Promise.resolve({data:{count:0}}):y(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0},o)},e.executeQueryForExtent=async function(e,t,r){if(t.timeExtent?.isEmpty)return{data:{count:0,extent:null}};const o=await y(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}),s=o.data;if(s.hasOwnProperty("extent"))return o;if(s.features)throw new Error(c);if(s.hasOwnProperty("count"))throw new Error(c);return o},e.executeQueryForIds=function(e,t,r,o){return t.timeExtent?.isEmpty?Promise.resolve({data:{objectIds:[]}}):y(e,t,"json",r,{returnIdsOnly:!0},o)},e.executeQueryPBF=async function(e,t,r,o,s){if(t.timeExtent?.isEmpty)return{data:r.createFeatureResult()};const i=await d(e,t,o,s),n=i;return n.data=a.parsePBFFeatureQuery(i.data,r),n},e.executeQueryPBFBuffer=d,e.queryToQueryStringParameters=p,e.runQuery=y,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/operations/urlUtils":function(){define(["exports"],function(e){"use strict";e.mapParameters=function e(t){const r={};for(const o in t){if("declaredClass"===o)continue;const s=t[o];if(null!=s&&"function"!=typeof s)if(Array.isArray(s)){r[o]=[];for(let t=0;t<s.length;t++)r[o][t]=e(s[t])}else"object"==typeof s?s.toJSON&&(r[o]=JSON.stringify(s)):r[o]=s}return r},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/pbfQueryUtils":function(){define(["exports","./pbfFeatureServiceParser"],function(e,t){"use strict";e.parsePBFFeatureQuery=function(e,r){const o=t.parseFeatureQuery(e,r),s=o.queryResult.featureResult,i=o.queryResult.queryGeometry,n=o.queryResult.queryGeometryType;if(s&&s.features&&s.features.length&&s.objectIdFieldName){const e=s.objectIdFieldName;for(const t of s.features)t.attributes&&(t.objectId=t.attributes[e])}return s&&(s.queryGeometry=i,s.queryGeometryType=n),s},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/pbfFeatureServiceParser":function(){define(["exports","../../../core/Error","../../../core/pbf","../../../layers/graphics/OptimizedGeometry","./pbfOptimizedFeatureSet"],function(e,t,r,o,s){"use strict";const i=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],n=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],a=["upperLeft","lowerLeft"];function l(e){return e>=i.length?null:i[e]}function c(e){return e>=n.length?null:n[e]}function u(e){return e>=a.length?null:a[e]}function p(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function d(e,t,r){const o=e.asUnsafe(),s=t.createPointGeometry(r);for(;o.next();)switch(o.tag()){case 3:{const e=o.getUInt32(),r=o.pos()+e;let i=0;for(;o.pos()<r;)t.addCoordinatePoint(s,o.getSInt64(),i++);break}default:o.skip()}return s}function h(e,t,r){const o=e.asUnsafe(),s=t.createGeometry(r),i=2+(r.hasZ?1:0)+(r.hasM?1:0);for(;o.next();)switch(o.tag()){case 2:{const e=o.getUInt32(),r=o.pos()+e;let i=0;for(;o.pos()<r;)t.addLength(s,o.getUInt32(),i++);break}case 3:{const e=o.getUInt32(),r=o.pos()+e;let n=0;for(t.allocateCoordinates(s);o.pos()<r;)t.addCoordinate(s,o.getSInt64(),n),n++,n===i&&(n=0);break}default:o.skip()}return s}function y(e){const t=e.asUnsafe(),r=new o;let i="esriGeometryPoint";for(;t.next();)switch(t.tag()){case 2:{const e=t.getUInt32(),o=t.pos()+e;for(;t.pos()<o;)r.lengths.push(t.getUInt32());break}case 3:{const e=t.getUInt32(),o=t.pos()+e;for(;t.pos()<o;)r.coords.push(t.getSInt64());break}case 1:i=s.optimizedGeometryTypes[t.getEnum()];break;default:t.skip()}return{queryGeometry:r,queryGeometryType:i}}function f(e){const t=e.asUnsafe();for(;t.next();)switch(t.tag()){case 1:return t.getString();case 2:return t.getFloat();case 3:return t.getDouble();case 4:return t.getSInt32();case 5:return t.getUInt32();case 6:return t.getInt64();case 7:return t.getUInt64();case 8:return t.getSInt64();case 9:return t.getBool();default:return t.skip(),null}return null}function m(e){const t=e.asUnsafe(),r={type:l(0)};for(;t.next();)switch(t.tag()){case 1:r.name=t.getString();break;case 2:r.type=l(t.getEnum());break;case 3:r.alias=t.getString();break;case 4:r.sqlType=c(t.getEnum());break;case 5:default:t.skip();break;case 6:r.defaultValue=t.getString()}return r}function g(e){const t={},r=e.asUnsafe();for(;r.next();)switch(r.tag()){case 1:t.name=r.getString();break;case 2:t.isSystemMaintained=r.getBool();break;default:r.skip()}return t}function b(e,t,r,o){const s=t.createFeature(r);let i=0;for(;e.next();)switch(e.tag()){case 1:{const t=o[i++].name;s.attributes[t]=e.processMessage(f);break}case 2:s.geometry=e.processMessageWithArgs(h,t,r);break;case 4:s.centroid=e.processMessageWithArgs(d,t,r);break;default:e.skip()}return s}function _(e){const t=[1,1,1,1],r=e.asUnsafe();for(;r.next();)switch(r.tag()){case 1:t[0]=r.getDouble();break;case 2:t[1]=r.getDouble();break;case 4:t[2]=r.getDouble();break;case 3:t[3]=r.getDouble();break;default:r.skip()}return t}function S(e){const t=[0,0,0,0],r=e.asUnsafe();for(;r.next();)switch(r.tag()){case 1:t[0]=r.getDouble();break;case 2:t[1]=r.getDouble();break;case 4:t[2]=r.getDouble();break;case 3:t[3]=r.getDouble();break;default:r.skip()}return t}function v(e){const t={originPosition:u(0)},r=e.asUnsafe();for(;r.next();)switch(r.tag()){case 1:t.originPosition=u(r.getEnum());break;case 2:t.scale=r.processMessage(_);break;case 3:t.translate=r.processMessage(S);break;default:r.skip()}return t}function w(e){const t={},r=e.asUnsafe();for(;r.next();)switch(r.tag()){case 1:t.shapeAreaFieldName=r.getString();break;case 2:t.shapeLengthFieldName=r.getString();break;case 3:t.units=r.getString();break;default:r.skip()}return t}function x(e,t){const r=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:r.wkid=e.getUInt32();break;case 5:r.wkt=e.getString();break;case 2:r.latestWkid=e.getUInt32();break;case 3:r.vcsWkid=e.getUInt32();break;case 4:r.latestVcsWkid=e.getUInt32();break;default:e.skip()}return r}function T(e,t){const r=t.createFeatureResult(),o=e.asUnsafe();r.geometryType=p(t,0);let s=!1;for(;o.next();)switch(o.tag()){case 1:r.objectIdFieldName=o.getString();break;case 3:r.globalIdFieldName=o.getString();break;case 4:r.geohashFieldName=o.getString();break;case 5:r.geometryProperties=o.processMessage(w);break;case 7:r.geometryType=p(t,o.getEnum());break;case 8:r.spatialReference=o.processMessageWithArgs(x,t);break;case 10:r.hasZ=o.getBool();break;case 11:r.hasM=o.getBool();break;case 12:r.transform=o.processMessage(v);break;case 9:r.exceededTransferLimit=o.getBool();break;case 13:t.addField(r,o.processMessage(m));break;case 15:s||(t.prepareFeatures(r),s=!0),t.addFeature(r,o.processMessageWithArgs(b,t,r,r.fields));break;case 2:r.uniqueIdField=o.processMessage(g);break;default:o.skip()}return t.finishFeatureResult(r),r}function M(e,t){const r={};let o=null;for(;e.next();)switch(e.tag()){case 4:o=e.processMessageWithArgs(y);break;case 1:r.featureResult=e.processMessageWithArgs(T,t);break;default:e.skip()}return null!=o&&r.featureResult&&t.addQueryGeometry(r,o),r}e.parseFeatureQuery=function(e,o){try{const t=2,s=new r(new Uint8Array(e),new DataView(e)),i={};for(;s.next();)s.tag()===t?i.queryResult=s.processMessageWithArgs(M,o):s.skip();return i}catch(e){throw new t("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e})}},e.parseField=m,e.parseFieldType=l,e.parseTransform=v,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/pbf":function(){define(["./has","./memoryEstimations","./ObjectPool"],function(e,t,r){"use strict";const o=4294967296,s=new TextDecoder("utf-8"),i=e("safari")||e("ios")?6:e("ff")?12:32;class n{constructor(e,t,r=0,o=(e?e.byteLength:0)){this._tag=0,this._dataType=99,this._init(e,t,r,o)}_init(e,t,r,o){this._data=e,this._dataView=t,this._pos=r,this._end=o}get usedMemory(){return 64+t.estimateNumberArrayMemory(this._data)}asUnsafe(){return this}clone(){return new n(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;if(e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128)return e;if(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)return e;if(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)return e;if(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)return e;if(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128)return e;throw new Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();return e>>>1^-(1&e)}getSInt64(){return this._decodeSVarint()}getBool(){const e=0!==this._data[this._pos];return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+e.getUint32(t+4,!0)*o;return this._skip(8),r}getSFixed64(){const e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+e.getInt32(t+4,!0)*o;return this._skip(8),r}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),t=this._pos,r=this._toString(this._data,t,t+e);return this._skip(e),r}getBytes(){const e=this._getLength(),t=this._pos,r=this._toBytes(this._data,t,t+e);return this._skip(e),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,t,r,o){const s=this.getMessage(),i=e(s,t,r,o);return s.release(),i}processMessage(e){const t=this.getMessage(),r=e(t);return t.release(),r}getMessage(){const e=this._getLength(),t=n.pool.acquire();return t._init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),t}release(){n.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let t=this._pos,r=0,o=0;if(this._end-t>=10)do{if(o=e[t++],r|=127&o,!(128&o))break;if(o=e[t++],r|=(127&o)<<7,!(128&o))break;if(o=e[t++],r|=(127&o)<<14,!(128&o))break;if(o=e[t++],r|=(127&o)<<21,!(128&o))break;if(o=e[t++],r+=268435456*(127&o),!(128&o))break;if(o=e[t++],r+=34359738368*(127&o),!(128&o))break;if(o=e[t++],r+=4398046511104*(127&o),!(128&o))break;if(o=e[t++],r+=562949953421312*(127&o),!(128&o))break;if(o=e[t++],r+=72057594037927940*(127&o),!(128&o))break;if(o=e[t++],r+=0x8000000000000000*(127&o),!(128&o))break;throw new Error("Varint too long!")}while(0);else{let s=1;for(;t!==this._end&&(o=e[t],128&o);)++t,r+=(127&o)*s,s*=128;if(t===this._end)throw new Error("Varint overrun!");++t,r+=o*s}return this._pos=t,r}_decodeSVarint(){const e=this._data;let t,r=0,o=0;const s=1&e[this._pos];if(o=e[this._pos++],r|=127&o,!(128&o))return s?-(r+1)/2:r/2;if(o=e[this._pos++],r|=(127&o)<<7,!(128&o))return s?-(r+1)/2:r/2;if(o=e[this._pos++],r|=(127&o)<<14,!(128&o))return s?-(r+1)/2:r/2;if(o=e[this._pos++],r|=(127&o)<<21,!(128&o))return s?-(r+1)/2:r/2;if(o=e[this._pos++],r+=268435456*(127&o),!(128&o))return s?-(r+1)/2:r/2;if(o=e[this._pos++],r+=34359738368*(127&o),!(128&o))return s?-(r+1)/2:r/2;if(o=e[this._pos++],r+=4398046511104*(127&o),!(128&o))return s?-(r+1)/2:r/2;if(t=BigInt(r),o=e[this._pos++],t+=0x2000000000000n*BigInt(127&o),!(128&o))return Number(s?-(t+1n)/2n:t/2n);if(o=e[this._pos++],t+=0x100000000000000n*BigInt(127&o),!(128&o))return Number(s?-(t+1n)/2n:t/2n);if(o=e[this._pos++],t+=0x8000000000000000n*BigInt(127&o),!(128&o))return Number(s?-(t+1n)/2n:t/2n);throw new Error("Varint too long!")}_getLength(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,t,r){if((r=Math.min(this._end,r))-t>i){const o=e.subarray(t,r);return s.decode(o)}let o="",n="";for(let s=t;s<r;++s){const t=e[s];128&t?n+="%"+t.toString(16):(o+=decodeURIComponent(n)+String.fromCharCode(t),n="")}return n.length&&(o+=decodeURIComponent(n)),o}_toBytes(e,t,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,t,r-t)}static{this.pool=new r(n,void 0,e=>{e._data=null,e._dataView=null})}}return n})},"esri/core/memoryEstimations":function(){define(["exports","./typedArrayUtil"],function(e,t){"use strict";function r(e){return 32+e.length}function o(e){if(!e)return 0;if("number"==typeof e[0])return i(e);if(Array.isArray(e))return function(e){const t=e.length;if(0===t||"number"==typeof e[0])return n(e,8);let r=l;for(let o=0;o<t;o++)r+=s(e[o]);return r}(e);let t=a;for(const r in e)e.hasOwnProperty(r)&&(t+=s(e[r]));return t}function s(e,t=!0){switch(typeof e){case"object":return t?o(e):a;case"string":return r(e);case"number":return 16;case"boolean":return 4;default:return 8}}function i(...e){return e.reduce((e,r)=>e+(r?t.isTypedArray(r)?r.byteLength+c:Array.isArray(r)?n(r,16):0:0),0)}function n(e,t){return l+e.length*t}const a=32,l=16,c=145;e.baseArrayMemory=l,e.baseObjectMemory=a,e.baseTypedArrayMemory=c,e.estimateAttributesMemory=function(e){if(!e)return 0;let t=a;for(const r in e)e.hasOwnProperty(r)&&(t+=s(e[r],!1));return t},e.estimateFixedArrayMemory=n,e.estimateNestedObjectMemory=o,e.estimateNumberArrayMemory=i,e.estimateNumberMemory=16,e.estimateStringMemory=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../core/memoryEstimations"],function(e){"use strict";class t{constructor(e=[],t=[]){this.lengths=e??[],this.coords=t??[]}static fromJSON(e){return new t(e.lengths,e.coords)}static fromRect(e){const[r,o,s,i]=e,n=s-r,a=i-o;return new t([5],[r,o,n,0,0,a,-n,0,0,-a])}get isPoint(){return 0===this.lengths.length&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,t)=>e+t)}get usedMemory(){return 64+e.estimateNumberArrayMemory(this.lengths,this.coords)}area(){let e=0,t=0;if(!this.lengths.length)return 0;for(let r=0;r<this.lengths.length;r++){const o=this.lengths[r];if(o<3)continue;let s=this.coords[2*t],i=this.coords[2*t+1];for(let r=1;r<o;r+=1){const o=this.coords[2*(r+t)],n=this.coords[2*(r+t)+1];e+=-.5*(o-s)*(n+i),s=o,i=n}t+=o}return e}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const o=this.lengths[r];for(let r=0;r<o;r++)e(this.coords[2*(r+t)],this.coords[2*(r+t)+1]);t+=o}}deltaDecode(){const e=this.clone(),{coords:t,lengths:r}=e;let o=0;for(const e of r){for(let r=1;r<e;r++)t[2*(o+r)]+=t[2*(o+r)-2],t[2*(o+r)+1]+=t[2*(o+r)-1];o+=e}return e}clone(e){if(0===this.lengths.length)return new t([],[this.coords[0],this.coords[1]]);const r=2*(0===this.lengths.length?1:this.lengths.reduce((e,t)=>e+t)),o=this.coords.slice(0,r);return e?(e.set(o),new t(this.lengths,e)):new t(Array.from(this.lengths),Array.from(o))}}return t})},"esri/rest/query/operations/pbfOptimizedFeatureSet":function(){define(["exports","../../../core/unitUtils","../../../geometry/support/spatialReferenceUtils","../../../layers/graphics/OptimizedFeature","../../../layers/graphics/OptimizedFeatureSet","../../../layers/graphics/OptimizedGeometry"],function(e,t,r,o,s,i){"use strict";const n=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];e.OptimizedFeatureSetParserContext=class{constructor(e){this._options=e,this.geometryTypes=n,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new s}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e?.features||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||r.equals(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const s=t.getMetersPerVerticalUnitForSR(this._options.sourceSpatialReference)/t.getMetersPerVerticalUnitForSR(e.spatialReference);if(1!==s)for(const t of e.features){if(!o.hasGeometry(t))continue;const e=t.geometry.coords;for(let t=2;t<e.length;t+=3)e[t]*=s}}addFeature(e,t){e.features.push(t)}createFeature(){return new o.OptimizedFeature(null,{},null,0)}createSpatialReference(){return{wkid:0}}createGeometry(){return new i}addField(e,t){e.fields.push(t)}allocateCoordinates(e){e.coords.length=e.lengths.reduce((e,t)=>e+t,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,t){e.coords[this._coordinatePtr++]=t}addCoordinatePoint(e,t){e.coords.push(t)}addLength(e,t){e.lengths.push(t)}addQueryGeometry(e,t){e.queryGeometry=t.queryGeometry,e.queryGeometryType=t.queryGeometryType}createPointGeometry(){return new i}},e.optimizedGeometryTypes=n,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../core/memoryEstimations","./centroid","./OptimizedGeometry"],function(e,t,r,o){"use strict";class s{constructor(e=null,t={},r,o,s=0){this.geometry=e,this.attributes=t,this.centroid=r,this.objectId=o,this.displayId=s}static fromJSON(e){const t=e.geometry?o.fromJSON(e.geometry):null,r=e.centroid?o.fromJSON(e.centroid):null,i=e.objectId;return new s(t,e.attributes,r,i)}weakClone(){const e=new s(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e}clone(){const e=this.geometry?.clone(),t=new s(e,{...this.attributes},this.centroid?.clone(),this.objectId);return t.displayId=this.displayId,t}ensureCentroid(e){return this.centroid??=r.getCentroidOptimizedGeometry(new o,this.geometry,e.hasZ,e.hasM),this.centroid}get usedMemory(){return 128+t.estimateAttributesMemory(this.attributes)+(this.geometry?.usedMemory??0)}}e.OptimizedFeature=s,e.OptimizedFeatureWithGeometry=class extends s{},e.hasGeometry=function(e){return!!e.geometry?.coords?.length},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(e){"use strict";function t(e,t){return e?t?4:3:t?3:2}function r(e,r,o,s,i,n){const a=t(i,n);let l=o,c=o+a,u=0,p=0,d=0,h=0,y=0;for(let t=0,o=s-1;t<o;t++,l+=a,c+=a){const t=r[l],o=r[l+1],s=r[l+2],n=r[c],a=r[c+1],f=r[c+2];let m=t*a-n*o;h+=m,u+=(t+n)*m,p+=(o+a)*m,i&&(m=t*f-n*s,d+=(s+f)*m,y+=m),t<e[0]&&(e[0]=t),t>e[1]&&(e[1]=t),o<e[2]&&(e[2]=o),o>e[3]&&(e[3]=o),i&&(s<e[4]&&(e[4]=s),s>e[5]&&(e[5]=s))}if(h>0&&(h*=-1),y>0&&(y*=-1),!h)return null;const f=[u,p,.5*h];return i&&(f[3]=d,f[4]=.5*y),f}function o(e,r,o,l,c){const u=t(l,c);let p=r,d=r+u,h=0,y=0,f=0,m=0;for(let t=0,r=o-1;t<r;t++,p+=u,d+=u){const t=e[p],r=e[p+1],o=e[p+2],c=e[d],u=e[d+1],g=e[d+2],b=l?i(t,r,o,c,u,g):s(t,r,c,u);if(b)if(h+=b,l){const e=a(t,r,o,c,u,g);y+=b*e[0],f+=b*e[1],m+=b*e[2]}else{const e=n(t,r,c,u);y+=b*e[0],f+=b*e[1]}}return h>0?l?[y/h,f/h,m/h]:[y/h,f/h]:o>0?l?[e[r],e[r+1],e[r+2]]:[e[r],e[r+1]]:null}function s(e,t,r,o){const s=r-e,i=o-t;return Math.sqrt(s*s+i*i)}function i(e,t,r,o,s,i){const n=o-e,a=s-t,l=i-r;return Math.sqrt(n*n+a*a+l*l)}function n(e,t,r,o){return[e+.5*(r-e),t+.5*(o-t)]}function a(e,t,r,o,s,i){return[e+.5*(o-e),t+.5*(s-t),r+.5*(i-r)]}e.getCentroidOptimizedGeometry=function(e,s,i,n){if(!s?.lengths.length)return null;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);const a=e.coords,l=[],c=i?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:u,coords:p}=s,d=t(i,n);let h=0;for(const e of u){const t=r(c,p,h,e,i,n);t&&l.push(t),h+=e*d}if(l.sort((e,t)=>{let r=e[2]-t[2];return 0===r&&i&&(r=e[4]-t[4]),r}),l.length){let e=6*l[0][2];a[0]=l[0][0]/e,a[1]=l[0][1]/e,i&&(e=6*l[0][4],a[2]=0!==e?l[0][3]/e:0),(a[0]<c[0]||a[0]>c[1]||a[1]<c[2]||a[1]>c[3]||i&&(a[2]<c[4]||a[2]>c[5]))&&(a.length=0)}if(!a.length){const e=s.lengths[0]?o(p,0,u[0],i,n):null;if(!e)return null;a[0]=e[0],a[1]=e[1],i&&e.length>2&&(a[2]=e[2])}return e},e.lineCentroid=o,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){"use strict";class e{constructor(){this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new e;return t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}return e})},"esri/rest/query/executeForExtent":function(){define(["exports","../../geometry/Extent","../utils","./operations/query","../support/Query"],function(e,t,r,o,s){"use strict";e.executeForExtent=async function(e,i,n){const a=r.parseUrl(e),l=await o.executeQueryForExtent(a,s.from(i),{...n}),c=l.data.extent;return!c||isNaN(c.xmin)||isNaN(c.ymin)||isNaN(c.xmax)||isNaN(c.ymax)?{count:l.data.count,extent:null}:{count:l.data.count,extent:t.fromJSON(c)}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/executeForIds":function(){define(["exports","../utils","./operations/query","../support/Query"],function(e,t,r,o){"use strict";e.executeForIds=async function(e,s,i,n){const a=t.parseUrl(e),{data:l}=await r.executeQueryForIds(a,o.from(s),i,n);return l.objectIds??function(e){var t;if(e)return t=e,Array.isArray(t[0])?e.map(e=>JSON.stringify(e)):e}(l.uniqueIds)??[]},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/executeQueryJSON":function(){define(["exports","../utils","./operations/query","../support/FeatureSet","../support/Query"],function(e,t,r,o,s){"use strict";async function i(e,o,i,n){const a=t.parseUrl(e),l={...i},c=s.from(o),{data:u}=await r.executeQuery(a,c,c.sourceSpatialReference,l,n);return u}e.executeQueryJSON=async function(e,t,r,s){const n=await i(e,t,r,s);return o.fromJSON(n)},e.executeRawQueryJSON=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/executeQueryPBF":function(){define(["exports","../utils","./operations/pbfJSONFeatureSet","./operations/query","../support/FeatureSet","../support/Query"],function(e,t,r,o,s,i){"use strict";async function n(e,s,n,a){const l=t.parseUrl(e),c={...n},u=i.from(s),p=!u.quantizationParameters,{data:d}=await o.executeQueryPBF(l,u,new r.JSONFeatureSetParserContext({sourceSpatialReference:u.sourceSpatialReference,applyTransform:p}),c,a);return d}e.executeQueryPBF=async function(e,t,r,o){const a=await n(e,i.from(t),r,o);return s.fromJSON(a)},e.executeRawQueryPBF=n,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/pbfJSONFeatureSet":function(){define(["exports","../../../core/maybe","../../../geometry/support/zscale","../../../layers/graphics/featureConversionUtils"],function(e,t,r,o){"use strict";function s(e,t){return t}function i(e,t,r,o){switch(r){case 0:return c(e,t+o,0);case 1:return"lowerLeft"===e.originPosition?c(e,t+o,1):function({translate:e,scale:t},r,o){return e[o]-r*t[o]}(e,t+o,1)}}function n(e,t,r,o){return 2===r?c(e,t,2):i(e,t,r,o)}function a(e,t,r,o){return 2===r?0===t?0:c(e,t,3):i(e,t,r,o)}function l(e,t,r,o){return 3===r?0===t?0:c(e,t,3):n(e,t,r,o)}function c({translate:e,scale:t},r,o){return e[o]+r*t[o]}e.JSONFeatureSetParserContext=class{constructor(e){this._options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=s,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const t=r.getGeometryZScaler(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(null!=t)for(const r of e.features)t(r.geometry)}createSpatialReference(){return{}}addField(e,r){const o=e.fields;t.assertIsSome(o),o.push(r);const s=o.map(e=>e.name);this._attributesConstructor=function(){for(const e of s)this[e]=null}}addFeature(e,t){e.features.push(t)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._mValueOffset=null,this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),e.geometryType){case"esriGeometryPoint":this.addCoordinate=(e,t,r)=>this.addCoordinatePoint(e,t,r),this.createGeometry=e=>this.createPointGeometry(e);break;case"esriGeometryPolygon":this.addCoordinate=(e,t,r)=>this._addCoordinatePolygon(e,t,r),this.createGeometry=e=>this._createPolygonGeometry(e);break;case"esriGeometryPolyline":this.addCoordinate=(e,t,r)=>this._addCoordinatePolyline(e,t,r),this.createGeometry=e=>this._createPolylineGeometry(e);break;case"esriGeometryMultipoint":this.addCoordinate=(e,t,r)=>this._addCoordinateMultipoint(e,t,r),this.createGeometry=e=>this._createMultipointGeometry(e)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,t,r){0===this._lengths.length&&(this._toAddInCurrentPath=t),this._lengths.push(t)}addQueryGeometry(e,t){const{queryGeometry:r,queryGeometryType:s}=t,i=this._transform?o.unquantizeOptimizedGeometry(r.clone(),r,!1,!1,this._transform):r.clone(),n=o.convertToGeometry(i,s,!1,!1);e.queryGeometryType=s,e.queryGeometry={...n}}createPointGeometry(e){const t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}addCoordinatePoint(e,t,r){const o=this._transform;switch(t=this._applyTransform(o,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:"z"in e?e.z=t:e.m=t;break;case 3:e.m=t}}_transformPathLikeValue(e,t){let r=0;t<=1&&(r=this._previousCoordinate[t],this._previousCoordinate[t]+=e);const o=this._transform;return null!==this._mValueOffset&&0===e&&t>0&&!(t%this._mValueOffset)?0:this._applyTransform(o,e,t,r)}_addCoordinatePolyline(e,t,r){this._dehydratedAddPointsCoordinate(e.paths,t,r)}_addCoordinatePolygon(e,t,r){this._dehydratedAddPointsCoordinate(e.rings,t,r)}_addCoordinateMultipoint(e,t,r){0===r&&e.points.push([]);const o=this._transformPathLikeValue(t,r);e.points[e.points.length-1].push(o)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,t,r){0===r&&0===this._toAddInCurrentPath--&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const o=this._transformPathLikeValue(t,r),s=e[e.length-1];0===r&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),s.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=o}_deriveApplyTransform(e){const{hasZ:t,hasM:r}=e;return t&&r?l:t?n:r?a:i}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/featureConversionUtils":function(){define(["exports","../../core/Error","../../core/Logger","../../core/maybe","../../geometry/support/aaBoundingBox","../../geometry/support/aaBoundingRect","../../geometry/support/jsonUtils","./OptimizedFeature","./OptimizedFeatureSet","./OptimizedGeometry","./data/createFeatureId"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";function p(e,t){return e?t?4:3:t?3:2}const d=()=>r.getLogger("esri.layers.graphics.featureConversionUtils"),h={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryMultiPatch:3,esriGeometryEnvelope:0},y=(e,t,r,o,s,i)=>{e[r]=s,e[r+1]=i},f=(e,t,r,o,s,i)=>{e[r]=s,e[r+1]=i,e[r+2]=t[o+2]},m=(e,t,r,o,s,i)=>{e[r]=s,e[r+1]=i,e[r+2]=t[o+3]},g=(e,t,r,o,s,i)=>{e[r]=s,e[r+1]=i,e[r+2]=t[o+2],e[r+3]=t[o+3]};function b(e,t,r,o){if(e){if(r)return t&&o?g:f;if(t&&o)return m}else if(t&&o)return f;return y}function _({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function S({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function v({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function w({scale:e,translate:t},r){return Math.round((r-t[1])/e[1])}function x({scale:e,translate:t},r,o){return r*e[o]+t[o]}function T(e){const t=e.coords;return{x:t[0],y:t[1]}}function M(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function I(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function O(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function P(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function k(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function C(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function L(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function E(e,t){return e&&t?L:e?O:t?k:M}function A(e,t,r,o,s){const i=E(r,o);for(const r of t){const t=null!=r.geometry?i(new c,r.geometry):null;e.push(new a.OptimizedFeature(t,r.attributes,null,u.createFeatureId(r,s)))}return e}function F(e,t,r=E(null!=t.z,null!=t.m)){return r(e,t)}function R(e,t,r,o){for(const{geometry:s,attributes:i}of t)e.push({attributes:i,geometry:null!=s?j(s,r,o):null});return e}function j(e,t,r){if(null==e)return null;const o=p(t,r),s=[];for(let t=0;t<e.coords.length;t+=o){const r=[];for(let s=0;s<o;s++)r.push(e.coords[t+s]);s.push(r)}return t?r?{points:s,hasZ:t,hasM:r}:{points:s,hasZ:t}:r?{points:s,hasM:r}:{points:s}}function N(e,t,r,o,s){const i=p(r,o);for(const r of t){const t=null!=r.geometry?D(new c,r.geometry,i):null;e.push(new a.OptimizedFeature(t,r.attributes,null,u.createFeatureId(r,s)))}return e}function D(e,t,r=p(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const o=e.coords;let s=0;for(const e of t.points)for(let t=0;t<r;t++)o[s++]=e[t];return e}function U(e,t,r){if(!e)return null;const o=p(t,r),{coords:s,lengths:i}=e,n=[];let a=0;for(const e of i){const t=[];for(let r=0;r<e;r++){const e=[];for(let t=0;t<o;t++)e.push(s[a++]);t.push(e)}n.push(t)}return t?r?{paths:n,hasZ:t,hasM:r}:{paths:n,hasZ:t}:r?{paths:n,hasM:r}:{paths:n}}function V(e,t,r,o,s){const i=p(r,o);for(const r of t){const t=null!=r.geometry?q(new c,r.geometry,i):null,o=null!=r.centroid?F(new c,r.centroid):null;e.push(new a.OptimizedFeature(t,r.attributes,o,u.createFeatureId(r,s)))}return e}function q(e,t,r=p(t.hasZ,t.hasM)){const{lengths:o,coords:s}=e;let i=0;for(const e of t.paths){for(const t of e)for(let e=0;e<r;e++)s[i++]=t[e];o.push(e.length)}return e}function z(e,t,r){if(!e)return null;const o=p(t,r),{coords:s,lengths:i}=e,n=[];let a=0;for(const e of i){const t=[];for(let r=0;r<e;r++){const e=[];for(let t=0;t<o;t++)e.push(s[a++]);t.push(e)}n.push(t)}return t?r?{rings:n,hasZ:t,hasM:r}:{rings:n,hasZ:t}:r?{rings:n,hasM:r}:{rings:n}}function G(e,t,r=t.hasZ,o=t.hasM){return B(e,t.rings,r,o)}function B(e,t,r,o){const s=p(r,o),{lengths:i,coords:n}=e;let a=0;re(e);for(const e of t){for(const t of e)for(let e=0;e<s;e++)n[a++]=t[e];i.push(e.length)}return e}const $=[],J=[];function W(e,r,o,s,i,n){if(oe(e),!o){for(const t of r){const r=u.createFeatureId(t,n);e.push(new a.OptimizedFeature(null,t.attributes,null,r))}return e}switch(o){case"esriGeometryPoint":return A(e,r,s,i,n);case"esriGeometryMultipoint":return N(e,r,s,i,n);case"esriGeometryPolyline":return V(e,r,s,i,n);case"esriGeometryPolygon":case"esriGeometryMultiPatch":return function(e,t,r,o,s){for(const i of t){const t=null!=i.geometry?G(new c,i.geometry,r,o):null,n=u.createFeatureId(i,s);null!=i.centroid?e.push(new a.OptimizedFeature(t,i.attributes,M(new c,i.centroid),n)):e.push(new a.OptimizedFeature(t,i.attributes,null,n))}return e}(e,r,s,i,n);default:d().error("convertToFeatureSet:unknown-geometry",new t("internal:geometry",`Unable to parse unknown geometry type '${o}'`)),oe(e)}return e}function H(e,r,o,s){const i=e&&("coords"in e?e:e.geometry);if(null==i)return null;switch(r){case"esriGeometryPoint":{let e=T;return o&&s?e=C:o?e=I:s&&(e=P),e(i)}case"esriGeometryMultipoint":return j(i,o,s);case"esriGeometryPolyline":return U(i,o,s);case"esriGeometryPolygon":return z(i,o,s);default:return d().error("convertToGeometry:unknown-geometry",new t("internal:geometry",`Unable to parse unknown geometry type '${r}'`)),null}}function Z(e,r,o,s,i){if(oe(e),null==o)return function(e,t){for(const r of t)e.push({attributes:r.attributes});return e}(e,r);switch(o){case"esriGeometryPoint":return function(e,t,r,o){let s=T;r&&o?s=C:r?s=I:o&&(s=P);for(const r of t){const{geometry:t,attributes:o}=r,i=null!=t?s(t):null;e.push({attributes:o,geometry:i})}return e}(e,r,s,i);case"esriGeometryMultipoint":return R(e,r,s,i);case"esriGeometryPolyline":return function(e,t,r,o){for(const{geometry:s,attributes:i}of t)e.push({attributes:i,geometry:null!=s?U(s,r,o):null});return e}(e,r,s,i);case"esriGeometryPolygon":return function(e,t,r,o){for(const{geometry:s,attributes:i,centroid:n}of t){const t=null!=s?z(s,r,o):null;if(null!=n){const r=T(n);e.push({attributes:i,centroid:r,geometry:t})}else e.push({attributes:i,geometry:t})}return e}(e,r,s,i);default:d().error("convertToFeatureSet:unknown-geometry",new t("internal:geometry",`Unable to parse unknown geometry type '${o}'`))}return e}function Q(e,t,r,o,s,i,n=r,a=o){if(re(e),!t?.coords.length)return null;const l=h[s],{coords:c,lengths:u}=t,d=p(r,o),y=p(r&&n,o&&a),f=b(r,o,n,a);if(!u.length)return f(e.coords,c,0,0,_(i,c[0]),S(i,c[1])),re(e,d,0),e;let m,g,v,w,x=0,T=0,M=T;for(const t of u){if(t<l)continue;let r=0;T=M,v=m=_(i,c[x]),w=g=S(i,c[x+1]),f(e.coords,c,T,x,v,w),r++,x+=d,T+=y;for(let o=1;o<t;o++,x+=d)v=_(i,c[x]),w=S(i,c[x+1]),v===m&&w===g||(f(e.coords,c,T,x,v-m,w-g),T+=y,r++,m=v,g=w);r>=l&&(e.lengths.push(r),M=T)}return oe(e.coords,M),e.coords.length?e:null}function K(e,t,r,o){const s=e[t],i=e[t+1],n=e[r],a=e[r+1],l=e[o],c=e[o+1];let u=n,p=a,d=l-u,h=c-p;if(0!==d||0!==h){const e=((s-u)*d+(i-p)*h)/(d*d+h*h);e>1?(u=l,p=c):e>0&&(u+=d*e,p+=h*e)}return d=s-u,h=i-p,d*d+h*h}function Y(e,t,r,o,s,i,n){let a,l=o,c=0;for(let e=i+r;e<n;e+=r)a=K(t,e,i,n),a>l&&(c=e,l=a);l>o&&(c-i>r&&Y(e,t,r,o,s,i,c),s(e,t,e.length,c,t[c],t[c+1]),n-c>r&&Y(e,t,r,o,s,c,n))}function X(e,t,r,s,i){const{coords:n,lengths:a}=t,l=p(r,s);if(!n.length)return e!==t&&re(e),e;o.assertIsSome(i);const{originPosition:c,scale:u,translate:d}=i,h=se;h.originPosition=c;const y=h.scale;y[0]=u[0]??1,y[1]=-(u[1]??1),y[2]=u[2]??1,y[3]=u[3]??1;const f=h.translate;if(f[0]=d[0]??0,f[1]=d[1]??0,f[2]=d[2]??0,f[3]=d[3]??0,!a.length){for(let t=0;t<l;++t)e.coords[t]=x(h,n[t],t);return e!==t&&re(e,l,0),e}let m=0;for(let t=0;t<a.length;t++){const r=a[t];e.lengths[t]=r;for(let t=0;t<l;++t)e.coords[m+t]=x(h,n[m+t],t);let o=e.coords[m],s=e.coords[m+1];m+=l;for(let t=1;t<r;t++,m+=l){o+=n[m]*y[0],s+=n[m+1]*y[1],e.coords[m]=o,e.coords[m+1]=s;for(let t=2;t<l;++t)e.coords[m+t]=x(h,n[m+t],t)}}return e!==t&&re(e,n.length,a.length),e}function ee(e,t,r,o){let s=0,i=e[o*t],n=e[o*(t+1)];for(let a=1;a<r;a++){const r=i+e[o*(t+a)],l=n+e[o*(t+a)+1],c=(r-i)*(l+n);i=r,n=l,s+=c}return.5*s}function te(e,t,r,o){return 0===e*o-r*t&&e*r+t*o>0}function re(e,t=0,r=0){oe(e.lengths,r),oe(e.coords,t)}function oe(e,t=0){e.length!==t&&(e.length=t)}const se={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};e.convertFromFeature=function(e,t,r,o,s){$[0]=e;const[i]=W(J,$,t,r,o,s);return oe($),oe(J),i},e.convertFromFeatureSet=function(e,t){const r=new l,{hasM:o,hasZ:s,features:i,spatialReference:n,geometryType:a,exceededTransferLimit:c,transform:u,fields:p}=e;return p&&(r.fields=p),r.geometryType=a??null,r.spatialReference=n??null,i&&W(r.features,i,a,s,o,t),c&&(r.exceededTransferLimit=c),o&&(r.hasM=o),s&&(r.hasZ=s),u&&(r.transform=u),r},e.convertFromFeatures=W,e.convertFromGeometry=function(e,r,o){if(null==e)return null;const s=new c;return"hasZ"in e&&null==r&&(r=e.hasZ),"hasM"in e&&null==o&&(o=e.hasM),n.isPoint(e)?E(null!=r?r:null!=e.z,null!=o?o:null!=e.m)(s,e):n.isPolygon(e)?G(s,e,r,o):n.isPolyline(e)?q(s,e,p(r,o)):n.isMultipoint(e)?D(s,e,p(r,o)):void d().error("convertFromGeometry:unknown-geometry",new t("internal:geometry",`Unable to parse unknown geometry type '${e}'`))},e.convertFromMultipoint=D,e.convertFromMultipointFeatures=N,e.convertFromNestedArray=B,e.convertFromPoint=F,e.convertFromPointFeatures=A,e.convertFromPolygon=G,e.convertFromPolyline=q,e.convertFromPolylineFeatures=V,e.convertToFeature=function(e,t,r,o){J[0]=e,Z($,J,t,r,o);const s=$[0];return oe($),oe(J),s},e.convertToFeatureSet=function(e){const{spatialReference:t,transform:r,fields:o,hasM:s,hasZ:i,features:n,geometryType:a,exceededTransferLimit:l,queryGeometry:c,queryGeometryType:u}=e,p={features:Z([],n,a,i,s),fields:o,geometryType:a,spatialReference:t,queryGeometry:H(c,u,!1,!1)};return r&&(p.transform=r),l&&(p.exceededTransferLimit=l),s&&(p.hasM=s),i&&(p.hasZ=i),p},e.convertToFeatures=Z,e.convertToGeometry=H,e.convertToMultipoint=j,e.convertToMultipointFeatures=R,e.convertToPoint=function(e,t,r){return e?t?r?C(e):I(e):r?P(e):T(e):null},e.convertToPolygon=z,e.convertToPolyline=U,e.generalizeOptimizedGeometry=function(e,t,r,o,s,i,n=r,a=o){if(re(e),!t?.coords.length)return null;const l=h[s],{coords:c,lengths:u}=t,d=p(r,o),y=p(r&&n,o&&a),f=b(r,o,n,a);if(!u.length)return f(e.coords,c,0,0,c[0],c[1]),re(e,d,0),e;let m=0;const g=i*i;for(const t of u){if(t<l){m+=t*d;continue}const r=e.coords.length/y,o=m,s=m+(t-1)*d;f(e.coords,c,e.coords.length,o,c[o],c[o+1]),Y(e.coords,c,d,g,f,o,s),f(e.coords,c,e.coords.length,s,c[s],c[s+1]);const i=e.coords.length/y-r;i>=l?e.lengths.push(i):oe(e.coords,r*y),m+=t*d}return e.coords.length?e:null},e.getBoundsOptimizedGeometry=function(e,t,r,o){if(!t?.coords?.length)return null;const n=p(r,o);let a=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY;if(t&&t.coords){const e=t.coords;for(let t=0;t<e.length;t+=n){const r=e[t],o=e[t+1];a=Math.min(a,r),c=Math.max(c,r),l=Math.min(l,o),u=Math.max(u,o)}}return s.is(e)?s.fromRectValues(e,a,l,c,u):i.fromValues(a,l,c,u,e),e},e.getQuantizedArea=function(e,t){const{coords:r,lengths:o}=e;let s=0,i=0;for(let e=0;e<o.length;e++){const n=o[e];i+=ee(r,s,n,t),s+=n}return Math.abs(i)},e.getQuantizedBoundsOptimizedGeometry=function(e,t,r,o){const s=p(r,o),{lengths:i,coords:n}=t;let a=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY,d=0;for(const e of i){let t=n[d],r=n[d+1];a=Math.min(t,a),l=Math.min(r,l),c=Math.max(t,c),u=Math.max(r,u),d+=s;for(let o=1;o<e;o++,d+=s){const e=n[d],o=n[d+1];t+=e,r+=o,e<0&&(a=Math.min(a,t)),e>0&&(c=Math.max(c,t)),o<0?l=Math.min(l,r):o>0&&(u=Math.max(u,r))}}return e[0]=a,e[1]=l,e[2]=c,e[3]=u,e},e.getSignedQuantizedRingArea=ee,e.quantizeForDisplay=function(e,t,r,o,s){const i=p(o,s);if(!e.lengths.length){if(e.coords.length<2)return null;const[r,o]=e.coords,s=v(t,r),i=w(t,o);return new c([],[s,i])}const n=new c([],[0,0]),a=h[r],l="esriGeometryPolygon"===r||"esriGeometryPolyline"===r;let u=0,d=0;for(let r=0;r<e.lengths.length;r++){const o=e.lengths[r],s=d;let c=v(t,e.coords[i*u]),p=w(t,e.coords[i*u+1]);n.coords[d++]=c,n.coords[d++]=p;let h=0,y=0,f=1;for(let r=1;r<o;r++){const o=v(t,e.coords[i*(r+u)]),s=w(t,e.coords[i*(r+u)+1]);if(o!==c||s!==p){const e=o-c,t=s-p;l&&te(h,y,e,t)?(n.coords[d-2]+=e,n.coords[d-1]+=t,c+=e,p+=t):(n.coords[d++]=o,n.coords[d++]=s,c=o,p=s,h=e,y=t,f+=1)}}f<a?d=s:n.lengths.push(f),u+=o}return 0===n.lengths.length?null:n},e.quantizeOptimizedFeatureSet=function(e,t){const{geometryType:r,features:o,hasM:s,hasZ:i}=t;if(!e)return t;for(let t=0;t<o.length;t++){const n=o[t],a=n.weakClone();a.geometry=new c,Q(a.geometry,n.geometry,s,i,r,e),n.centroid&&(a.centroid=new c,Q(a.centroid,n.centroid,s,i,"esriGeometryPoint",e)),o[t]=a}return t.transform=e,t},e.quantizeOptimizedGeometry=Q,e.quantizeX=_,e.quantizeY=S,e.removeCollinearVertices=function(e,t,r,o,s){if(!t?.coords?.length)return null;const i=h[r],{coords:n,lengths:a}=t,l=b(o,s,o,s),c=p(o,s);let u=0,d=0,y=0,f=0;for(const t of a){d=f,l(e.coords,n,d,u,n[u],n[u+1]),u+=c;let r=n[u],o=n[u+1],s=r,a=o,p=o/r;d+=c,l(e.coords,n,d,u,s,a),u+=c;for(let i=2;i<t;i++){r=n[u],o=n[u+1];const t=o/r,i=p===t||!isFinite(p)&&!isFinite(t),h=i&&isFinite(t)?p>=0&&t>=0||p<=0&&t<=0:a>=0&&o>=0||a<=0&&o<=0;i&&h?(s+=r,a+=o):(s=r,a=o,d+=c),l(e.coords,n,d,u,s,a),u+=c,p=t}d+=c;const h=(d-f)/c;h>=i&&(e.lengths[y]=h,f=d,y++)}return e.coords.length>f&&(e.coords.length=f),e.lengths.length>y&&(e.lengths.length=y),e.coords.length&&e.lengths.length?e:null},e.removeZMValues=function(e,t,r,o,s,i){if(re(e),e.lengths.push(...t.lengths),r===s&&o===i)for(let r=0;r<t.coords.length;r++)e.coords.push(t.coords[r]);else{const n=p(r,o),a=b(r,o,s,i),l=t.coords;for(let t=0;t<l.length;t+=n)a(e.coords,l,e.coords.length,t,l[t],l[t+1])}return e},e.unquantizeOptimizedFeatureSet=function(e){const{transform:t,features:r,hasM:o,hasZ:s}=e;if(!t)return e;for(const e of r)null!=e.geometry&&X(e.geometry,e.geometry,o,s,t),null!=e.centroid&&X(e.centroid,e.centroid,o,s,t);return e.transform=null,e},e.unquantizeOptimizedGeometry=X,e.unquantizeValue=x,e.unquantizeX=function(e,t){return x(e,t,0)},e.unquantizeY=function(e,t){return x(e,-t,1)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/View":function(){define(["../chunks/tslib.es6","../Map","../core/asyncUtils","../core/Collection","../core/CollectionFlattener","../core/collectionUtils","../core/Error","../core/Evented","../core/Handles","../core/handleUtils","../core/has","../core/Loadable","../core/Logger","../core/maybe","../core/Promise","../core/promiseUtils","../core/reactiveUtils","../core/accessorSupport/decorators/property","../core/RandomLCG","../core/accessorSupport/decorators/subclass","../core/support/OwningCollection","../core/support/UpdatingHandles","../geometry/Extent","../geometry/HeightModelInfo","../geometry/SpatialReference","../geometry/support/spatialReferenceUtils","../support/AnalysesCollection","../support/GraphicsCollection","../time/constants","../chunks/TimeExtent","../time/timeZoneUtils","./BasemapView","./Magnifier","./SelectionManager","./Theme","./ToolViewManager","./3d/support/DefaultHighlights","./input/Input","./input/ViewEvents","./navigation/Navigation","./support/DefaultsFromMap","./support/HighlightOptions","./support/LayerViewManager","./support/RequiredFieldsOptions"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b,_,S,v,w,x,T,M,I,O,P,k,C,L,E,A,F,R,j,N,D,U,V,q,z,G){"use strict";var B;let $=class extends(a.EventedMixin(y.EsriPromise)){static{B=this}constructor(e){super(e),this._userSpatialReference=null,this.handles=new l,this.updatingHandles=new v.UpdatingHandles,this.allLayerViews=new s({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:W}),this.analyses=new I.AnalysesCollection,this.basemapView=null,this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new O.GraphicsCollection,this.groundView=null,this.typeSpecificPreconditionsReady=!0,this.layerViews=new o,this.magnifier=new E,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this._lowPriorityCursorHandles=new o,this._highPriorityCursorHandles=new o,this.input=new N,this.navigation=new U,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new D.ViewEvents(this),this.persistableViewModels=new o,this.requiredFieldsOptions=new G,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(m.watch(()=>this.preconditionsReady,e=>{const t=this.ready;if(e?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,B.views.add(this)):(this._lockedSpatialReference=null,B.views.remove(this)),this.notifyChange("spatialReference"),!e&&t)this.toolViewManager?.detach(),null!=this.analysisViewManager&&this.analysisViewManager.detach(),this.layerViewManager?.clear(),this._teardown();else if(e&&!t){try{this._startup()}catch(e){return void queueMicrotask(()=>{this.fatalError=new n("view:startup-error","View._startup failed",e)})}null!=this.analysisViewManager&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},m.sync))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,m.whenOnce(()=>this.ready)))),this.basemapView=new L({view:this}),this.layerViewManager=new z({view:this,layerViewFilter:e=>this.layerViewFilter?.(e)??!0,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new R.ToolViewManager({view:this}),this.selectionManager=new A({view:this}),this.addHandles([m.when(()=>"map-content-error"===this.readyState&&!this.spatialReference,()=>{d.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),m.watch(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},m.syncAndInitial),m.watch(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},m.sync),m.watch(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},m.syncAndInitial)])}destroy(){this.destroyed||(B.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=h.destroyMaybe(this.graphics),this.analyses=h.destroyMaybe(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),h.destroyMaybe(this.analysisViewManager),this.toolViewManager=h.destroyMaybe(this.toolViewManager),this.layerViewManager=h.destroyMaybe(this.layerViewManager),this.selectionManager=h.destroyMaybe(this.selectionManager),this.basemapView=h.destroyMaybe(this.basemapView),this.groundView?.destroy(),this.layerViews?.forEach(e=>e.destroy()),this.layerViews.length=0,this.invalidate(),this.handles.destroy(),this.map=h.destroyMaybe(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return d.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new V.DefaultsFromMap({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??j.makeDefaultHighlightOptions()}set highlights(e){this._set("highlights",i.referenceSetter(e,this._get("highlights"),o.ofType(q)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||p.isLoadable(this.map)&&!this.map.loaded||0===this.width||0===this.height||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(d.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),p.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if(this.defaultsFromMap?.ready&&!this.spatialReference){const e=!("loaded"in this.map)||this.map.loaded,t=this.map.ground.loaded,o=this.map.basemap?.loaded??!0;return e&&o&&t&&!this.map?.allLayers.length?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=r.createTask(e=>f.after(u("view-readyState-waiting-delay"),null,e)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),this._readyStateWaitingTask?.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=h.abortMaybe(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){const t=e.clone();return t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,t}return e}set spatialReference(e){const t=!M.equals(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??P.system}set timeZone(e){this._userTimeZone=e,C.isTimeZoneValid(e)||d.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._highPriorityCursorHandles.at(-1)?.cursor??this._lowPriorityCursorHandles.at(-1)?.cursor??"default"}acquireCursor(e,t="low"){const r="high"===t?this._highPriorityCursorHandles:this._lowPriorityCursorHandles,o={cursor:e},s=c.makeHandle(()=>r.remove(o));return r.add(o),this.addHandles(s),s}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new F}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(e){throw new n("view:importLayerView-missing","importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return null!=this.getSpatialReferenceSupport(e)}when(e,t){return this.isResolved()&&!this.ready&&d.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(m.when(()=>this.destroyed||!1===this.preconditionsReady,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}on(e,t){return super.on(e,t)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}static{this.views=new o}};e.__decorate([g.property()],$.prototype,"_userSpatialReference",void 0),e.__decorate([g.property()],$.prototype,"activeTool",null),e.__decorate([g.property({readOnly:!0})],$.prototype,"allLayerViews",void 0),e.__decorate([g.property(S.owningCollectionProperty(I.AnalysesCollection,"analyses"))],$.prototype,"analyses",void 0),e.__decorate([g.property()],$.prototype,"animation",null),e.__decorate([g.property()],$.prototype,"basemapView",void 0),e.__decorate([g.property()],$.prototype,"center",null),e.__decorate([g.property()],$.prototype,"defaultsFromMapSettings",null),e.__decorate([g.property()],$.prototype,"defaultsFromMap",null),e.__decorate([g.property()],$.prototype,"displayFilterEnabled",void 0),e.__decorate([g.property({type:w})],$.prototype,"extent",null),e.__decorate([g.property()],$.prototype,"fatalError",void 0),e.__decorate([g.property(S.owningCollectionProperty(O.GraphicsCollection,"graphics"))],$.prototype,"graphics",void 0),e.__decorate([g.property()],$.prototype,"groundView",void 0),e.__decorate([g.property({readOnly:!0,type:x})],$.prototype,"heightModelInfo",null),e.__decorate([g.property({type:o.ofType(q)})],$.prototype,"highlights",null),e.__decorate([g.property({readOnly:!0})],$.prototype,"interacting",null),e.__decorate([g.property({constructOnly:!0})],$.prototype,"layerViewFilter",void 0),e.__decorate([g.property({readOnly:!0})],$.prototype,"navigating",null),e.__decorate([g.property({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],$.prototype,"preconditionsReady",null),e.__decorate([g.property({readOnly:!0})],$.prototype,"typeSpecificPreconditionsReady",void 0),e.__decorate([g.property({type:o,readOnly:!0})],$.prototype,"layerViews",void 0),e.__decorate([g.property()],$.prototype,"resolution",null),e.__decorate([g.property({type:E})],$.prototype,"magnifier",void 0),e.__decorate([g.property({value:null,type:t})],$.prototype,"map",null),e.__decorate([g.property()],$.prototype,"padding",void 0),e.__decorate([g.property({readOnly:!0})],$.prototype,"ready",void 0),e.__decorate([g.property()],$.prototype,"_readyStateWaitingTask",void 0),e.__decorate([g.property({readOnly:!0})],$.prototype,"readyState",null),e.__decorate([g.property({type:T})],$.prototype,"spatialReference",null),e.__decorate([g.property()],$.prototype,"stationary",null),e.__decorate([g.property({readOnly:!0})],$.prototype,"supportsGround",void 0),e.__decorate([g.property({type:k.TimeExtent})],$.prototype,"timeExtent",null),e.__decorate([g.property({type:String,nonNullable:!0})],$.prototype,"timeZone",null),e.__decorate([g.property()],$.prototype,"tools",null),e.__decorate([g.property()],$.prototype,"toolViewManager",void 0),e.__decorate([g.property({readOnly:!0})],$.prototype,"type",void 0),e.__decorate([g.property({type:Number})],$.prototype,"scale",void 0),e.__decorate([g.property({readOnly:!0})],$.prototype,"updating",void 0),e.__decorate([g.property({readOnly:!0})],$.prototype,"initialExtentRequired",void 0),e.__decorate([g.property({readOnly:!0})],$.prototype,"initialExtent",null),e.__decorate([g.property()],$.prototype,"cursor",null),e.__decorate([g.property({readOnly:!0})],$.prototype,"input",void 0),e.__decorate([g.property({type:U,nonNullable:!0})],$.prototype,"navigation",void 0),e.__decorate([g.property()],$.prototype,"layerViewManager",void 0),e.__decorate([g.property()],$.prototype,"analysisViewManager",void 0),e.__decorate([g.property()],$.prototype,"selectionManager",void 0),e.__decorate([g.property()],$.prototype,"width",void 0),e.__decorate([g.property()],$.prototype,"height",void 0),e.__decorate([g.property({readOnly:!0})],$.prototype,"resizing",void 0),e.__decorate([g.property({value:null,readOnly:!0})],$.prototype,"size",null),e.__decorate([g.property({readOnly:!0})],$.prototype,"suspended",void 0),e.__decorate([g.property({readOnly:!0})],$.prototype,"viewEvents",void 0),e.__decorate([g.property({readOnly:!0})],$.prototype,"persistableViewModels",void 0),e.__decorate([g.property()],$.prototype,"_isValid",void 0),e.__decorate([g.property()],$.prototype,"_readyCycleForced",void 0),e.__decorate([g.property()],$.prototype,"_lockedSpatialReference",void 0),e.__decorate([g.property()],$.prototype,"_userTimeZone",void 0),e.__decorate([g.property()],$.prototype,"_lockedTimeZone",void 0),e.__decorate([g.property()],$.prototype,"_userTimeExtent",void 0),e.__decorate([g.property()],$.prototype,"_lockedTimeExtent",void 0),e.__decorate([g.property({type:F})],$.prototype,"theme",void 0),e.__decorate([g.property({readOnly:!0,type:F})],$.prototype,"effectiveTheme",null),$=B=e.__decorate([_.subclass("esri.views.View")],$);const J=globalThis.$arcgis;function W(e){return e.layerViews}return J&&!J.views&&Object.defineProperty(J,"views",{configurable:!1,enumerable:!0,writable:!1,value:$.views}),$})},"esri/core/support/OwningCollection":function(){define(["exports","../../chunks/tslib.es6","../Collection","../collectionUtils","../has","../Logger","../accessorSupport/decorators/property","../RandomLCG","../accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";e.OwningCollection=class extends r{constructor(e){super(e),this.addHandles([this.on("before-add",e=>{null==e.item&&e.preventDefault()}),this.on("after-add",e=>this._own(e.item)),this.on("after-remove",e=>this._release(e.item))])}get owner(){return this._get("owner")}set owner(e){this.destroyed||e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(r.ofType(this.itemType.Type))(e):new r(e)}},t.__decorate([n.property()],e.OwningCollection.prototype,"owner",null),e.OwningCollection=t.__decorate([l.subclass("esri.core.support.OwningCollection")],e.OwningCollection),e.owningCollectionProperty=function(e,t){return{type:e,cast:o.castForReferenceSetter,set(r){const s=o.referenceSetter(r,this._get(t),e);s&&!s.destroyed&&(s.owner=this),this._set(t,s)}}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/support/UpdatingHandles":function(){define(["exports","../../chunks/tslib.es6","../Accessor","../handleUtils","../reactiveUtils","../scheduling","../accessorSupport/decorators/property","../accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a){"use strict";e.UpdatingHandles=class extends r{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,t,r={}){return this._installWatch(e,t,r,s.watch)}addWhen(e,t,r={}){return this._installWatch(e,t,r,s.when)}addOnCollectionChange(e,t,{initial:r=!1,final:i=!1}={}){const n=++this._handleId;return this.addHandles([s.on(e,"after-changes",this._createSyncUpdatingCallback(),s.sync),s.on(e,"change",t,{onListenerAdd:r?e=>t({added:e.toArray(),removed:[]}):void 0,onListenerRemove:i?e=>t({added:[],removed:e.toArray()}):void 0})],n),o.makeHandle(()=>this.removeHandles(n))}addPromise(e){if(null==e)return e;const t=++this._handleId;this.addHandles(o.makeHandle(()=>{this._pendingPromises.delete(e)&&(0!==this._pendingPromises.size||this.hasHandles(l)||this._set("updating",!1))}),t),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this.removeHandles(t);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,t,r={},s){const i=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,i);const n=s(e,t,r);return this.addHandles(n,i),o.makeHandle(()=>this.removeHandles(i))}_installSyncUpdatingWatch(e,t){const r=this._createSyncUpdatingCallback(),o=s.watch(e,r,{sync:!0,equals:()=>!1});return this.addHandles(o,t),o}_createSyncUpdatingCallback(){return()=>{this.removeHandles(l),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(i.schedule(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(l))}),l)}}},t.__decorate([n.property({readOnly:!0})],e.UpdatingHandles.prototype,"updating",void 0),e.UpdatingHandles=t.__decorate([a.subclass("esri.core.support.UpdatingHandles")],e.UpdatingHandles);const l=-42;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/AnalysesCollection":function(){define(["exports","../chunks/tslib.es6","../core/Logger","../core/has","../core/RandomLCG","../core/Error","../core/accessorSupport/decorators/subclass","../core/support/OwningCollection"],function(e,t,r,o,s,i,n,a){"use strict";e.AnalysesCollection=class extends a.OwningCollection{constructor(e){super(e),this.addHandles(this.on("before-add",e=>{null!=e.item&&e.item.parent===this.owner&&(r.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),e.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}},e.AnalysesCollection=t.__decorate([n.subclass("esri.support.AnalysesCollection")],e.AnalysesCollection),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/GraphicsCollection":function(){define(["exports","../chunks/tslib.es6","../Graphic","../core/Logger","../core/accessorSupport/ensureType","../core/has","../core/RandomLCG","../core/Error","../core/accessorSupport/decorators/shared","../core/accessorSupport/decorators/subclass","../core/support/OwningCollection"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";e.GraphicsCollection=class extends u.OwningCollection{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}},t.__decorate([l.shared({Type:r,ensureType:s.ensureType(r)})],e.GraphicsCollection.prototype,"itemType",void 0),e.GraphicsCollection=t.__decorate([c.subclass("esri.support.GraphicsCollection")],e.GraphicsCollection),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/BasemapView":function(){define(["../chunks/tslib.es6","../core/Accessor","../core/Collection","../core/reactiveUtils","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";let c=class extends t{constructor(e){super(e),this.view=null,this.baseLayerViews=new r,this.referenceLayerViews=new r,this._loadingHandle=o.watch(()=>this.view?.map?.basemap,e=>{e&&e.load().catch(()=>{})},o.initial)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return this.view?.suspended??!0}get updating(){if(this.view?.suspended)return!1;const e=this.view?.map?.basemap;return!!e?.loaded&&(this.baseLayerViews.some(e=>e.updating)||this.referenceLayerViews.some(e=>e.updating))}};return e.__decorate([s.property({constructOnly:!0})],c.prototype,"view",void 0),e.__decorate([s.property({readOnly:!0})],c.prototype,"baseLayerViews",void 0),e.__decorate([s.property({readOnly:!0})],c.prototype,"referenceLayerViews",void 0),e.__decorate([s.property({readOnly:!0})],c.prototype,"suspended",null),e.__decorate([s.property({type:Boolean,readOnly:!0})],c.prototype,"updating",null),c=e.__decorate([l.subclass("esri.views.BasemapView")],c),c})},"esri/views/Magnifier":function(){define(["../chunks/tslib.es6","../core/Accessor","../core/screenUtils","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a){"use strict";let l=class extends t{constructor(e){super(e),this.factor=1.5,this.offset=r.createScreenPoint(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};return e.__decorate([o.property({type:Number})],l.prototype,"factor",void 0),e.__decorate([o.property({nonNullable:!0})],l.prototype,"offset",void 0),e.__decorate([o.property()],l.prototype,"position",void 0),e.__decorate([o.property({type:Number,range:{min:0}})],l.prototype,"size",void 0),e.__decorate([o.property()],l.prototype,"maskUrl",void 0),e.__decorate([o.property()],l.prototype,"maskEnabled",void 0),e.__decorate([o.property()],l.prototype,"overlayUrl",void 0),e.__decorate([o.property()],l.prototype,"overlayEnabled",void 0),e.__decorate([o.property({readOnly:!0})],l.prototype,"version",null),e.__decorate([o.property({type:Boolean})],l.prototype,"visible",void 0),l=e.__decorate([a.subclass("esri.views.Magnifier")],l),l})},"esri/views/SelectionManager":function(){define(["../chunks/tslib.es6","../core/arrayUtils","../core/Collection","../core/collectionUtils","../core/Evented","../core/Logger","../core/MapUtils","../core/maybe","../core/ReactiveMap","../core/reactiveUtils","../core/SetUtils","../core/accessorSupport/decorators/property","../core/has","../core/accessorSupport/decorators/subclass","../layers/support/layerUtils","../rest/support/Query","./support/selectionUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m){"use strict";let g=class extends s.EventedAccessor{constructor(e){super(e),this._selectionMap=new l,this._sources=new r,this._trashCan=[],this._layerEditHandles=new r,this._vizTaskId=0,this.view=null,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([c.watch(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),c.watch(()=>this.view,e=>{e?.when().then(()=>this.syncSources())},c.initial),c.on(()=>this.sources,"change",e=>{const t=this._selectionMap,r=[];for(const o of e.removed){const e=t.get(o);e&&(t.delete(o),e.highlightHandle?.remove(),r.push({layer:o,selection:[],added:[],removed:[...e.selection]}))}this._refreshListeners(),r.length&&this._onSelectionChange(r)},{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.drain(a.removeMaybe)}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{const[t,r]=e;return{layer:t,selection:[...r.selection]}})}get count(){let e=0;for(const t of this._selectionMap.values())e+=t.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){o.referenceSetter(e,this._sources)}syncSources(){const e=new Set,t=this.view?.map;if(!t)return;const r=t=>{y.isKnowledgeGraphLayer(t)?(t.layers?.forEach(r),t.tables?.forEach(r)):y.isMapImageLayer(t)?(t.sublayers?.forEach(r),t.subtables?.forEach(r)):y.isSubtypeGroupLayer(t)?t.sublayers?.forEach(r):m.isSelectableLayer(t)&&e.add(t)};t.allLayers.forEach(r),t.allTables.forEach(r),this.sources=[...e]}async getSelectedFeatures(e,r={},o="layerView"){const{view:s,selections:n}=this;if(!s&&"layerView"===o)return i.getLogger(this).warn("Cannot query layer views without a view."),[];const a=(e?.length?n.filter(t=>e.includes(t.layer)):n).map(async e=>{const{layer:t,selection:i}=e;if(!i.length)return;const n=y.isSubtypeSublayer(t)?t.parent:t;if(null!=n){if(s&&"layerView"===o&&!b(n)&&_(n)){const e=await s.whenLayerView(n).catch(()=>null);if(e)return v(e,i,r)}return v(n,i,r)}}).filter(t.isSome);return(await Promise.all(a)).filter(t.isSome)}updateSelection(e){const r=new Map;for(const[e,t]of this._selectionMap)r.set(e,[...t.selection]);let o=!1;const s=e.current.concat(e.added);for(const e of s){const t=e.sourceLayer,s=e.getObjectId();if(this.sources.includes(t)&&(m.isSelectableLayer(t)||y.isSubtypeSublayer(t))&&null!==s){const e=n.getOrCreateMapValue(r,t,()=>[]);e.includes(s)||(e.push(s),o=!0)}}for(const t of e.removed){const e=t.sourceLayer,s=t.getObjectId();if(this.sources.includes(e)&&(m.isSelectableLayer(e)||y.isSubtypeSublayer(e))&&null!==s){const t=r.get(e),i=t?.indexOf(s);void 0!==i&&i>=0&&(t?.splice(i,1),o=!0)}}if(o){const{_selectionMap:e,_trashCan:o}=this,s=[];for(const[i,n]of r){const r=e.get(i);void 0!==r&&o.push(r),e.set(i,{selection:n}),s.push({layer:i,selection:n,...t.difference(void 0!==r?r.selection:[],n)})}this._onSelectionChange(s)}}setSelection(e,t){this._setSelection(e,t)}getSelection(e){const t=this._selectionMap.get(e);return t?.selection}appendToSelection(e,t){const r=this._selectionMap.get(e),o=void 0!==r?[...r.selection]:[];for(const e of t)o.includes(e)||o.push(e);this._setSelection(e,o)}removeFromSelection(e,t){const r=this._selectionMap.get(e);if(!r)return;const o=[];for(const e of r.selection)t.includes(e)||o.push(e);this._setSelection(e,o)}toggleInSelection(e,t){const r=this._selectionMap.get(e);if(!r||0===r.selection.length)return void this._setSelection(e,t);const o=new Set(r.selection),s=new Set(t),i=u.symmetricDifference(o,s);this._setSelection(e,Array.from(i))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const t=[];for(const[e,r]of this._selectionMap.entries())t.push({layer:e,added:[],removed:[...r.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(t)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){for(this._vizTaskId++;this._trashCan.length>0;){const e=this._trashCan.pop();e?.highlightHandle?.remove()}if(null==this.view)return;const{sources:e,view:t,_selectionMap:r,showHighlight:o}=this,s=this._vizTaskId;for(const i of e){const e=r.get(i),n=y.isSubtypeSublayer(i)?i.parent:i;if(null!=n&&_(n)){if(b(n))continue;t.whenLayerView(n).then(t=>{e?.highlightHandle?.remove(),null!=e&&o&&s===this._vizTaskId&&"highlight"in t&&"function"==typeof t.highlight&&e.selection.length>0&&(e.highlightHandle=t.highlight(e.selection,this.highlightName))}).catch(()=>{e?.highlightHandle?.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(a.removeMaybe);const e=new Set(this.sources.map(e=>y.isSubtypeSublayer(e)?e.parent:e));for(const t of e)m.isSelectableLayer(t)&&"on"in t&&t.on&&this._layerEditHandles.push(t.on("edits",e=>this._onLayerEdit(e,t)))}_onLayerEdit(e,t){if(y.isSubtypeGroupLayer(t))this._onParentLayerEdit(e,t);else if(e.deletedFeatures.length&&this._selectionMap.has(t)){const r=[];e.deletedFeatures.forEach(({error:e,objectId:t})=>{null!=t&&null==e&&r.push(t)}),this.removeFromSelection(t,r)}}_onParentLayerEdit(e,t){const{deletedFeatures:r,edits:o,updatedFeatures:s}=e;if(o?.updateFeatures?.forEach(e=>{const r=e.getObjectId()??e.attributes[t.objectIdField];if(null==r)return;if(s.find(e=>e.objectId===r)?.error)return;const o=t.findSublayerForFeature(e);if(!m.isSelectableLayer(o))return;const i=t.sublayers.find(e=>!(!m.isSelectableLayer(e)||!this.getSelection(e)?.includes(r)));m.isSelectableLayer(i)&&i!==o&&(this.removeFromSelection(i,[r]),this.appendToSelection(o,[r]))}),r.length){const e=[];r.forEach(({error:t,objectId:r})=>{null!=r&&null==t&&e.push(r)}),t.sublayers.forEach(t=>{m.isSelectableLayer(t)&&this._selectionMap.has(t)&&this.removeFromSelection(t,e)})}}_setSelection(e,r){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const o=this._selectionMap.get(e);if(void 0===o||!S(o,{selection:r})){void 0!==o&&this._trashCan.push(o),this._selectionMap.set(e,{selection:[...r]});const s={layer:e,selection:[...r],...t.difference(void 0!==o?o.selection:[],r)};this._onSelectionChange([s])}}};e.__decorate([p.property()],g.prototype,"_selectionMap",void 0),e.__decorate([p.property()],g.prototype,"_sources",void 0),e.__decorate([p.property({readOnly:!0,nonNullable:!0})],g.prototype,"selections",null),e.__decorate([p.property({readOnly:!0,nonNullable:!0})],g.prototype,"count",null),e.__decorate([p.property()],g.prototype,"view",void 0),e.__decorate([p.property({readOnly:!0,nonNullable:!0})],g.prototype,"hasSelection",null),e.__decorate([p.property()],g.prototype,"showHighlight",void 0),e.__decorate([p.property()],g.prototype,"sources",null),e.__decorate([p.property()],g.prototype,"highlightName",void 0),g=e.__decorate([h.subclass("esri.views.SelectionManager")],g);const b=e=>y.isSubtypeSublayer(e)?!0===e.parent?.isTable:e.isTable,_=e=>void 0!==e?.when,S=(e,t)=>{if(null==e&&null==t)return!0;if(null!=e&&null==t||null==e&&null!=t)return!1;if(null!=e&&null!=t&&null!=e.selection&&null!=t.selection){const r=[...e.selection],o=[...t.selection];if(r.length!==o.length)return!1;r.sort(),o.sort();for(let e=0;e<r.length;e++)if(r[e]!==o[e])return!1}return!0},v=async(e,t,r={})=>{let o;if(void 0===e.layer){const s=e;o=void 0===s?null:await s.queryFeatures(new f({...r,objectIds:t})).then(e=>({data:e,layer:s}))}else{const s=e;o=void 0===s?null:await s.queryFeatures(new f({...r,objectIds:t})).then(t=>({data:t,layer:e.layer}))}return o};return g})},"esri/core/ReactiveMap":function(){define(["./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(e,t){"use strict";class r{constructor(e){this._observable=new t.SimpleObservable,this._map=new Map(e)}get size(){return e.trackAccess(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const t=this._map.delete(e);return t&&this._observable.notify(),t}entries(){return e.trackAccess(this._observable),this._map.entries()}forEach(t,r){e.trackAccess(this._observable),this._map.forEach((e,o)=>t.call(r,e,o,this),r)}get(t){return e.trackAccess(this._observable),this._map.get(t)}has(t){return e.trackAccess(this._observable),this._map.has(t)}keys(){return e.trackAccess(this._observable),this._map.keys()}set(e,t){return this._map.set(e,t),this._observable.notify(),this}values(){return e.trackAccess(this._observable),this._map.values()}[Symbol.iterator](){return e.trackAccess(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}}return r})},"esri/views/support/selectionUtils":function(){define(["exports"],function(e){"use strict";e.isSelectableLayer=function(e){return!(null==e||"object"!=typeof e||!("createQuery"in e)||!e.createQuery)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/Theme":function(){define(["../chunks/tslib.es6","../Color","../core/Accessor","../core/Clonable","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";let c=class extends(o.ClonableMixin(r)){constructor(e){super(e),this.accentColor=new t([255,127,0]),this.textColor=new t([255,255,255])}};return e.__decorate([s.property({type:t,nonNullable:!0})],c.prototype,"accentColor",void 0),e.__decorate([s.property({type:t,nonNullable:!0})],c.prototype,"textColor",void 0),c=e.__decorate([l.subclass("esri.views.Theme")],c),c})},"esri/views/ToolViewManager":function(){define(["exports","../chunks/tslib.es6","../core/Accessor","../core/clock","../core/Collection","../core/has","../core/Logger","../core/maybe","../core/reactiveUtils","../core/accessorSupport/decorators/property","../core/RandomLCG","../core/accessorSupport/decorators/subclass","../core/support/UpdatingHandles","./input/InputManager","./input/ViewEvents","./interactive/interactiveToolUtils","./interactive/ToolViewManagerManipulatorState"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m){"use strict";const g="attached",b="tools";e.ToolViewManager=class extends r{constructor(e){super(e),this._updatingHandles=new d.UpdatingHandles,this._clock=o.clock,this._manipulatorState=new m.ToolViewManagerManipulatorState,this.tools=new s,this.cursor=null,this._interacting=!1,this._interactingTimeout=1e3,this._interactingTimeoutHandle=null,this._forEachTool=e=>{for(const t of this.tools.items)if(e(t))return}}initialize(){this.addHandles([this.view.on(y.eventTypes,e=>{this._handleInputEvent(e)},h.ViewEventPriorities.TOOL),...f.getToolCollectionHandles(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(null!=e&&!this.view.ready)return void n.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const t=this.activeTool;this._set("activeTool",e),null!=t&&t.deactivate(),null!=e&&e.activate(),this._removeIncompleteTools(e);for(const e of this.tools){this._updateToolEditableFlag(e);const t=f.areToolManipulatorsEditable(e);null!=this.activeTool&&t||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!t)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=a.removeMaybe(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){"3d"===this.view.type?this.addHandles([l.watch(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>this._forEachManipulator(e=>e.onViewChange())),this.view.elevationProvider?.on("elevation-change",e=>this._forEachManipulator(t=>t.onElevationChange(e)))],g):this.addHandles(l.watch(()=>this.view.extent,()=>this._forEachManipulator(e=>e.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(g),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:r})=>e(r,t))})}_handleInputEvent(e){let t=!1;const r={...e,stopPropagation:()=>{t=!0,e.stopPropagation()}};null!=this.activeTool?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(e=>{!t&&e.visible&&e.handleInputEvent(r)}),!t&&f.isCancelEvent(e)&&this.activeTool&&(e.stopPropagation(),e.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),t||null==this.activeTool||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor(),"pointer-move"===e.type&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(b),this._forEachTool(e=>{if(e instanceof r){const t=l.watch(()=>[e.cursor,e.visible,e.editable],()=>{f.areToolManipulatorsEditable(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(t,b)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",t=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,t.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],b)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){e.setEditableFlag?.(1,null==this.activeTool||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;null==e&&this._forEachTool(t=>!(null==t.cursor||!t.visible||(e=t.cursor,0))),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(t=>(null==e||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(e=>{this.tools.remove(e)})}get test(){}},t.__decorate([c.property({constructOnly:!0,nonNullable:!0})],e.ToolViewManager.prototype,"view",void 0),t.__decorate([c.property({value:null})],e.ToolViewManager.prototype,"activeTool",null),t.__decorate([c.property({readOnly:!0,type:s})],e.ToolViewManager.prototype,"tools",void 0),t.__decorate([c.property({readOnly:!0})],e.ToolViewManager.prototype,"cursor",void 0),t.__decorate([c.property({readOnly:!0})],e.ToolViewManager.prototype,"updating",null),t.__decorate([c.property()],e.ToolViewManager.prototype,"_interacting",void 0),t.__decorate([c.property({readOnly:!0})],e.ToolViewManager.prototype,"interacting",null),e.ToolViewManager=t.__decorate([p.subclass("esri.views.ToolViewManager")],e.ToolViewManager),e.interactingTimeout=1e3,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/InputManager":function(){define(["exports","../../chunks/tslib.es6","../../core/Accessor","../../core/has","../../core/Logger","../../core/Queue","../../core/accessorSupport/decorators/property","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./keys","./handlers/LatestPointer","./handlers/MultiTouch","../support/PropertiesPool"],function(e,t,r,o,s,i,n,a,l,c,u,p,d){"use strict";e.InputManager=class extends r{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=c.primaryKey,this._latestPointerType="mouse",this._propertiesPool=new d.PropertiesPool({latestPointerLocation:f},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,t,r=y.INTERNAL){if(this._nameToGroup[e])return;if(0===t.length)return;const o={name:e,handlers:t.map(e=>({handler:e,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=o;for(let e=o.handlers.length-1;e>=0;e--){const t=o.handlers[e];this._handlers.push(t),t.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(e,r,o,s,i)=>{this._emitInputEvent(t.priorityIndex+1,e,r,o,i,s)},setPointerCapture:(e,r)=>{this._setPointerCapture(o,t,e,r)},setEventCallback:e=>{t.eventCallback=e},setUninstallCallback:e=>{t.uninstallCallback=e},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach(e=>{e.removed=!0,e.uninstallCallback?.()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):s.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return void 0!==this._nameToGroup[e]}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let e=this._handlers.length-1;e>=0;e--){const t=this._handlers[e];t.priorityIndex=e,this._handlersPriority.push(t)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const o=this._handlersPriority[r];o.priorityIndex=r;let s=o.handler.hasSideEffects;if(!s)for(const t of o.handler.outgoingEventTypes)if(e.has(t)){s=!0;break}if(s)for(const r of o.handler.incomingEventMatches){e.add(r.eventType);for(const e of r.keyModifiers)c.isSystemModifier(e)||t.add(e)}o.active=s}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,r){this._latestPointerType=e;const o=this._get("latestPointerLocation");if(null==o||o.x!==t||o.y!==r){const e=this._propertiesPool.get("latestPointerLocation");e.x=t,e.y=r,this._set("latestPointerLocation",e)}}_onEventReceived(e,t){if("pointer-capture-lost"===e){const e=t;this._pointerCaptures.delete(e.native.pointerId)}this._updateKeyModifiers(e,t);const r=null!=this.test.timestamp?this.test.timestamp:t.native?t.native.timestamp:void 0,o=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,r,o)}_updateKeyModifiers(e,t){if(!t)return;let r=!1;const o=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},s=(e,t)=>{t&&!this._activeKeyModifiers.has(e)?(o(),this._activeKeyModifiers.add(e)):!t&&this._activeKeyModifiers.has(e)&&(o(),this._activeKeyModifiers.delete(e))};if("key-down"===e||"key-up"===e){const r=t.key;this._keyModifiers.has(r)&&s(r,"key-down"===e)}const i=t.native;s("Alt",!!i?.altKey),s("Control",!!i?.ctrlKey),s("Ctrl",!!i?.ctrlKey),s("Shift",!!i?.shiftKey),s("Meta",!!i?.metaKey),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new u.LatestPointer((e,t,r)=>this._setLatestPointer(e,t,r)),this._multiTouchHandler=new p.MultiTouch,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],y.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,y.INTERNAL)}_setPointerCapture(e,t,r,o){const s=e.name+"-"+t.priorityIndex,i=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,i),o?(i.add(s),1===i.size&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):i.has(s)&&(i.delete(s),0===i.size&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,t,r,o){this._emitInputEvent(0,e,t,r,o)}_emitInputEvent(e,t,r,o,s,i){const n=void 0!==o?o:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),a=void 0!==s&&s,l={event:new h(t,r,n,i||this._activeKeyModifiers,a),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(l):this._doNewPropagation(l)}_doNewPropagation(e){this._currentPropagation={events:new i,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:t,priorityIndex:r}=e.events.pop(),o=t.data?.eventId;if(null==o||!this._stoppedPropagationEventIds.has(o))for(e.currentHandler=this._handlersPriority[r];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback?.(t),t.shouldStopPropagation()){null!=o&&this._stoppedPropagationEventIds.add(o);break}if(t.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const t=new i;t.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)t.push(r.events.pop());r.events=t,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const e of t.handler.incomingEventMatches){if(r.eventType!==e.eventType)continue;const t=r.keyModifiers.filter(t=>e.keyModifiers.includes(t));if(t.length===r.keyModifiers.length!=(t.length===e.keyModifiers.length))return r.keyModifiers.length>e.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const r of e){let e=0;for(;e<t.length&&this._compareHandlerPriority(r,t[e])>=0;)e++;t.splice(e,0,r)}return t}get debug(){const e=e=>{const t=this._setPointerCapture;this._setPointerCapture=()=>{},e(),this._setPointerCapture=t};return{injectEvent:(t,r)=>{e(()=>this._onEventReceived(t,r))},disablePointerCapture:e}}},t.__decorate([n.property({readOnly:!0})],e.InputManager.prototype,"hasPendingInputs",null),t.__decorate([n.property({constructOnly:!0})],e.InputManager.prototype,"eventSource",void 0),t.__decorate([n.property({constructOnly:!0})],e.InputManager.prototype,"recognizers",void 0),t.__decorate([n.property()],e.InputManager.prototype,"_latestPointerType",void 0),t.__decorate([n.property()],e.InputManager.prototype,"latestPointerType",null),t.__decorate([n.property()],e.InputManager.prototype,"multiTouchActive",null),t.__decorate([n.property({readOnly:!0})],e.InputManager.prototype,"latestPointerLocation",void 0),t.__decorate([n.property()],e.InputManager.prototype,"_paused",void 0),t.__decorate([n.property({readOnly:!0})],e.InputManager.prototype,"updating",null),e.InputManager=t.__decorate([l.subclass("esri.views.input.InputManager")],e.InputManager);class h{constructor(e,t,r,o,s){this.type=e,this.data=t,this.timestamp=r,this.modifiers=o,this.cancelable=s,this._propagationState=0,this._resumeCallback=null}stopPropagation(){this._propagationState|=1}shouldStopPropagation(){return!!(1&this._propagationState)}defer(e){this._propagationState|=2;const t=(e,t)=>{this._propagationState&=-3;const r=this._resumeCallback;if(this._resumeCallback=null,r&&r(),t)throw e;return e};return("function"==typeof e?e():e).then(e=>t(e,!1),e=>t(e,!0))}shouldPausePropagation(e){return!!(2&this._propagationState)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}}const y={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3},f=class{};e.ViewEventPriorities=y,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/keys":function(){define(["exports","../../core/has"],function(e,t){"use strict";const r=t("mac")?"Meta":"Control",o=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]);e.isSystemModifier=e=>o.has(e),e.primaryKey=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/handlers/LatestPointer":function(){define(["exports","../InputHandler"],function(e,t){"use strict";class r extends t.InputHandler{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",e=>this._update(e.data))}_update(e){const t="touch"===e.native.pointerType?"touch":"mouse",{x:r,y:o}=e;t===this._value&&this._x===r&&this._y===o||(this._value=t,this._x=r,this._y=o,this._onChange(t,r,o))}}e.LatestPointer=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/InputHandler":function(){define(["exports","../../core/has","../../core/Logger","./EventMatch"],function(e,t,r,o){"use strict";class s{constructor(e,t,r){this.match=e,this._callback=t,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class i{constructor(e,t){this.eventType=e,this._removed=!1,this._handler=t}emit(e,t,r){this._removed||this._handler.onEmit(this,e,t,r)}remove(){this._removed=!0,this._handler.onRemove(this)}}e.InputHandler=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const t=this._incoming[e];for(const e of t)this._incomingEventMatches.push(e.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback(e=>this._handleEvent(e)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,t,r){let i;"function"==typeof t?(r=t,i=[]):i=t||[];const n="string"==typeof e?new o.EventMatch(e,i):e,a=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},l=e=>{const t=this._incoming[e.match.eventType];if(t){const r=t.indexOf(e);t.splice(r,1),a(),this._manager&&this._manager.updateDependencies()}},c=new s(n,r,{onPause:l,onRemove:l,onResume:e=>{const t=this._incoming[e.match.eventType];t&&!t.includes(e)&&(t.push(e),a(),this._manager&&this._manager.updateDependencies())}});let u=this._incoming[n.eventType];return u||(u=[],this._incoming[n.eventType]=u),u.push(c),a(),this._manager&&this._manager.updateDependencies(),c}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const t=new i(e,{onEmit:(e,t,r,o)=>{this._manager?.emit(e.eventType,t,r,o)},onRemove:e=>{delete this._outgoing[e.eventType],this._manager?.updateDependencies()}});return this._outgoing[e]=t,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),t}startCapturingPointer(e){this._manager?.setPointerCapture(e,!0)}stopCapturingPointer(e){this._manager?.setPointerCapture(e,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){const t=this._incoming[e.type];if(t)for(const r of t)if(r.match.matches(e)&&(r.callback?.(e),e.shouldStopPropagation()))break}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/EventMatch":function(){define(["exports"],function(e){"use strict";e.EventMatch=class{constructor(e,t=[]){this.eventType=e,this.keyModifiers=t}matches(e){if(e.type!==this.eventType)return!1;if(0===this.keyModifiers.length)return!0;const t=e.modifiers;for(const e of this.keyModifiers)if(!t.has(e))return!1;return!0}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/handlers/MultiTouch":function(){define(["exports","../../../core/signal","../InputHandler"],function(e,t,r){"use strict";class o extends r.InputHandler{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=t.signal(!1),this._onPointerAdd=({data:e})=>{"touch"===e.pointerType&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{"touch"===e.pointerType&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}}e.MultiTouch=o,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/signal":function(){define(["exports","./lang","./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(e,t,r,o){"use strict";class s{constructor(e,t){this._observable=new o.SimpleObservable,this._value=e,this._equalityFunction=t}get value(){return r.trackAccess(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}}e.signal=function(e,r=t.equalsShallow){return new s(e,r)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/PropertiesPool":function(){define(["exports","../../core/ReentrantObjectPool","../../core/accessorSupport/watch"],function(e,t,r){"use strict";e.PropertiesPool=class{constructor(e,o){this._owner=o,this._properties={},this._afterDispatchHandle=null;for(const r in e){const o=e[r],s=new t.ReentrantObjectPool(o,void 0,void 0,2,2);this._properties[r]={pool:s,acquired:[]}}this._afterDispatchHandle=r.afterDispatch(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const t=this._properties[e];for(const e of t.acquired)r.isValueInUse(e)||t.pool.release(e);t.pool.destroy(),t.pool=null,t.acquired=null}this._properties=null,this._owner=null}get(e){const t=this._owner._get(e),r=this._properties[e];let o=r.pool.acquire();for(r.acquired.push(o);o===t;)r.acquired.push(o),o=r.pool.acquire();return o}_release(){for(const e in this._properties){const t=this._properties[e];let o=0;for(const e of t.acquired)r.isValueInUse(e)?t.acquired[o++]=e:t.pool.release(e);t.acquired.length=o}}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/ViewEvents":function(){define(["exports","../../core/has","../../core/handleUtils","../../core/mathUtils","../../core/screenUtils","./InputHandler","./InputManager"],function(e,t,r,o,s,i,n){"use strict";const a=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],l={};function c(e){return!!l[e]}a.forEach(e=>{l[e]=!0});class u extends i.InputHandler{constructor(e,t,r,o){super(!0),this._latestDragStart=void 0,this.view=e;for(const s of t)switch(s){case"click":this.registerIncoming("click",r,t=>o(p(e,t)));break;case"double-click":this.registerIncoming("double-click",r,t=>o(d(e,t)));break;case"immediate-click":this.registerIncoming("immediate-click",r,t=>o(h(e,t)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,t=>o(y(e,t)));break;case"hold":this.registerIncoming("hold",r,t=>o(f(e,t)));break;case"drag":this.registerIncoming("drag",r,e=>{const t=this._wrapDrag(e);t&&o(t)});break;case"key-down":this.registerIncoming("key-down",r,e=>o(g(e)));break;case"key-up":this.registerIncoming("key-up",r,e=>o(b(e)));break;case"pointer-down":this.registerIncoming("pointer-down",r,e=>o(_(e,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,e=>o(_(e,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,e=>o(_(e,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,e=>o(S(e)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,e=>o(v(e)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,e=>o(_(e,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,e=>o(_(e,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,e=>{o(w(e))});break;case"focus":this.registerIncoming("focus",r,e=>{var t;o({type:"focus",timestamp:(t=e).timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()})});break;case"blur":this.registerIncoming("blur",r,e=>{var t;o({type:"blur",timestamp:(t=e).timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()})})}}_wrapDrag(e){const t=e.data,{x:r,y:s}=t.center,{action:i,pointerType:n,button:a}=t;if("start"===i&&(this._latestDragStart=t),!this._latestDragStart)return;const l=t.pointer.native,c=t.buttons,{cancelable:u,timestamp:p}=e,d={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return"end"===i&&(this._latestDragStart=void 0),{type:"drag",action:i,x:r,y:s,origin:d,pointerType:n,button:a,buttons:c,radius:t.radius,angle:o.rad2deg(t.angle),native:l,timestamp:p,cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:t=>e.defer(t),preventDefault:()=>e.preventDefault()}}}function p(e,t){const{pointerType:r,button:o,buttons:i,x:n,y:a,native:l,eventId:c}=t.data,{cancelable:u,timestamp:p}=t;return{type:"click",pointerType:r,button:o,buttons:i,x:n,y:a,native:l,timestamp:p,screenPoint:s.createScreenPoint(n,a),mapPoint:m(e,n,a),eventId:c,cancelable:u,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function d(e,t){const{pointerType:r,button:o,buttons:s,x:i,y:n,native:a,eventId:l}=t.data,{cancelable:c,timestamp:u}=t;return{type:"double-click",pointerType:r,button:o,buttons:s,x:i,y:n,native:a,timestamp:u,mapPoint:m(e,i,n),eventId:l,cancelable:c,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function h(e,t){const{pointerType:r,button:o,buttons:s,x:i,y:n,native:a,eventId:l}=t.data,c=a.pointerId,{cancelable:u,timestamp:p}=t;return{type:"immediate-click",pointerId:c,pointerType:r,button:o,buttons:s,x:i,y:n,native:a,timestamp:p,mapPoint:m(e,i,n),eventId:l,cancelable:u,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function y(e,t){const{pointerType:r,button:o,buttons:s,x:i,y:n,native:a,eventId:l}=t.data,c=a.pointerId,{cancelable:u,timestamp:p}=t;return{type:"immediate-double-click",pointerId:c,pointerType:r,button:o,buttons:s,x:i,y:n,native:a,timestamp:p,mapPoint:m(e,i,n),eventId:l,cancelable:u,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function f(e,t){const{pointerType:r,button:o,buttons:s,x:i,y:n,native:a}=t.data,{cancelable:l,timestamp:c}=t;return{type:"hold",pointerType:r,button:o,buttons:s,x:i,y:n,native:a,timestamp:c,mapPoint:m(e,i,n),cancelable:l,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function m(e,t,r){return e.toMap(s.createScreenPoint(t,r),{exclude:[]})}function g(e){const{key:t,repeat:r,native:o}=e.data,{cancelable:s,timestamp:i}=e;return{type:"key-down",key:t,repeat:r,native:o,timestamp:i,cancelable:s,stopPropagation:()=>e.stopPropagation(),defer:t=>e.defer(t),preventDefault:()=>e.preventDefault()}}function b(e){const{key:t,native:r}=e.data,{cancelable:o,timestamp:s}=e;return{type:"key-up",key:t,native:r,timestamp:s,cancelable:o,stopPropagation:()=>e.stopPropagation(),defer:t=>e.defer(t),preventDefault:()=>e.preventDefault()}}function _(e,t){const{x:r,y:o,button:s,buttons:i,native:n,eventId:a}=e.data,l=n.pointerId,c=n.pointerType,{cancelable:u,timestamp:p}=e;return{type:t,x:r,y:o,pointerId:l,pointerType:c,button:s,buttons:i,native:n,timestamp:p,eventId:a,cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:t=>e.defer(t),preventDefault:()=>e.preventDefault()}}function S(e){const{x:t,y:r,buttons:o,native:s,eventId:i}=e.data.currentEvent,{button:n}=e.data.startEvent,a=e.data.startEvent.native.pointerId,l=e.data.startEvent.native.pointerType,c=e.data.action,u={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:p,timestamp:d}=e;return{type:"pointer-drag",x:t,y:r,pointerId:a,pointerType:l,button:n,buttons:o,action:c,origin:u,native:s,timestamp:d,eventId:i,cancelable:p,stopPropagation:()=>e.stopPropagation(),defer:t=>e.defer(t),preventDefault:()=>e.preventDefault()}}function v(e){const{cancelable:t,data:r,timestamp:o}=e,{x:s,y:i,deltaY:n,native:a}=r;return{type:"mouse-wheel",x:s,y:i,deltaY:n,native:a,timestamp:o,cancelable:t,stopPropagation:()=>e.stopPropagation(),defer:t=>e.defer(t),preventDefault:()=>e.preventDefault()}}function w(e){const{action:t,state:r,device:o}=e.data,{cancelable:s,timestamp:i}=e,{buttons:n,axes:a}=r;return{type:"gamepad",device:o,timestamp:i,action:t,buttons:n,axes:a,cancelable:s,stopPropagation:()=>e.stopPropagation(),defer:t=>e.defer(t),preventDefault:()=>e.preventDefault()}}e.ViewEvents=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:e,priority:t},r)=>this.inputManager?.installHandlers(r,[e],t))}disconnect(){this.inputManager&&this._handlers.forEach((e,t)=>this.inputManager?.uninstallHandlers(t)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,t,o,s){const i=Array.isArray(e)?e:e.split(",");if(!function(e){for(const t of e)if(!c(t))return!1;return!0}(i))return i.some(c)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let a,l;Array.isArray(t)?l=t:(a=t,l=[]),"function"==typeof o?a=o:s=o,s=null!=s?s:n.ViewEventPriorities.DEFAULT;const p=this._createUniqueGroupName(),d=new u(this.view,i,l,a);this._handlers.set(p,{handler:d,priority:s});for(const e of i){const t=this._handlerCounts.get(e)||0;this._handlerCounts.set(e,t+1)}return this.inputManager&&this.inputManager.installHandlers(p,[d],s),r.makeHandle(()=>this._removeHandler(p,i))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,t){if(this._handlers.has(e)){this._handlers.delete(e);for(const e of t){const t=this._handlerCounts.get(e);void 0===t||(1===t?this._handlerCounts.delete(e):this._handlerCounts.set(e,t-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},e.eventTypes=a,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/interactiveToolUtils":function(){define(["exports","../../core/Logger","./keybindings"],function(e,t,r){"use strict";e.areToolManipulatorsEditable=function(e){return e.visible&&null!=e.getEditableFlag&&e.getEditableFlag(0)&&e.getEditableFlag(1)},e.getToolCollectionHandles=function(e){return[e.on("before-add",r=>{const o=r.item;if(null==o||e.includes(o))return t.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void r.preventDefault();o.onAdd()}),e.on("after-remove",e=>{const t=e.item;t.active&&(t.view.activeTool=null),t.destroy()})]},e.isCancelEvent=function(e){return"key-down"===e.type&&e.key===r.interactiveToolKeys.cancel},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/keybindings":function(){define(["exports","../../core/arrayUtils","../../core/handleUtils","../../core/MapUtils","../input/InputManager","../input/keys"],function(e,t,r,o,s,i){"use strict";const n={cancel:"Escape",complete:"Enter"},a={...n,redo:"r",undo:"z",center:"Alt",constraint:"Shift",delete:["Backspace","Delete"],vertexAdd:"f",pan:" "},l={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:i.primaryKey,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0},editSourcePoints:{key:"Alt",continuePropagation:!0},undo:"z",redo:"r"};class c{constructor(e,t,r,o,s){this.key=e,this.modifiers=t,this.repeats=r,this.continuePropagation=o,this.callback=s}process(e,t){if(!(t.key!==this.key||"repeat"in t&&t.repeat&&!this.repeats)){for(const t of this.modifiers)if(!e.isModifierKeyDown(t))return;this.continuePropagation||t.stopPropagation(),this.callback(t)}}static fromDefinition(e,t){if("string"==typeof e)return new c(e,[],!1,!1,t);const{key:r,modifier:o,repeats:s,continuePropagation:i}=e;return new c(r,o?Array.isArray(o)?o:[o]:[],!!s,!!i,t)}}e.KeyBindings=class{constructor(){this._bindings=new Map}add(e,t){return this.addToggle(e,e=>{"key-down"===e.type&&t(e)})}addToggle(e,s){const i=c.fromDefinition(e,s),n=o.getOrCreateMapValue(this._bindings,i.key,()=>[]);return n.push(i),r.makeHandle(()=>t.remove(n,i))}register(e,t=s.ViewEventPriorities.WIDGET){return r.handlesGroup([e.on("key-down",t=>this.dispatch(e.inputManager,t),t),e.on("key-up",t=>this.dispatch(e.inputManager,t),t)])}dispatch(e,t){const r=t.key,o=this._bindings.get(r);if(o)for(const r of o)r.process(e,t)}},e.interactiveToolKeys=n,e.mediaKeys=l,e.selectionKeys={invertType:["Control","Meta"]},e.sketchKeys=a,e.snappingKeys={toggle:"Control"},e.tooltipKeys={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/ToolViewManagerManipulatorState":function(){define(["exports","../../core/iteratorUtils","../../core/mathUtils","../../core/screenUtils","./interactiveToolUtils","../support/screenUtils"],function(e,t,r,o,s,i){"use strict";function n(e){for(const{manipulator:t}of e.values())if(null!=t&&t.interactive){if(t.grabbing&&t.grabCursor)return t.grabCursor;if(t.cursor)return t.cursor}return null}function a(e,t,r){let o=null;return r(r=>{if(null==r.manipulators||!s.areToolManipulatorsEditable(r))return!1;const i=r.manipulators.intersect(e,t);return null!=i&&(o={tool:r,manipulator:i},!0)}),o}function l(e){return"mouse"===e}function c(e){return"mouse"!==e.pointerType||0===e.button}function u(e,t){e?.consumesClicks&&t()}e.ToolViewManagerManipulatorState=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,t){const o=()=>e.stopPropagation();switch(e.type){case"pointer-move":l(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:"start"===e.action?this._externallyDragging=!0:"end"===e.action&&(this._externallyDragging=!1),this._stopDrag&&(o(),"end"===e.action&&(this._stopDrag=!1));break;case"pointer-down":{if(!c(e))break;const r=i.createScreenPointFromEvent(e),s=a(r,e.pointerType,t.forEachTool);if(null==s)break;const n=s.manipulator,l=s.tool;null==n||null==l||!n.interactive||n.grabbable&&n.grabbableForEvent(e)||!n.grabbing||n.dragging||this._releaseManipulatorBeforeDragging(n,e,t),null!=n&&null!=l&&n.interactive&&n.grabbable&&n.grabbableForEvent(e)&&!n.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:n,tool:l,start:r,pointerType:e.pointerType}),1===this._grabbedManipulators.size&&null==t.activeTool&&(this._revertToNullActiveTool=!0,t.setActiveTool(s.tool)),n.grabbing=!0,n.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:r}),o());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,t);break;case"pointer-drag":{if(!c(e))break;const s=this._grabbedManipulators.get(e.pointerId),n=s?.manipulator,a=s?.tool;if(null==n||null==a)break;const l=i.createScreenPointFromEvent(e);l.x=r.clamp(l.x,0,t.view.width),l.y=r.clamp(l.y,0,t.view.height);const u=s.start,p=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":"update"!==e.action&&1!==this._grabbedManipulators.size||(n.dragging=!0,p?n.events.emit("drag",{action:"update",start:u,screenPoint:l}):n.events.emit("drag",{action:"start",start:u,screenPoint:l,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:a,manipulator:n,start:u}));break;case"end":n.dragging=!1,p&&n.events.emit("drag",{action:"end",start:u,screenPoint:l}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,t)}o();break}case"immediate-click":{const r=i.createScreenPointFromEvent(e),s=a(r,e.pointerType,t.forEachTool);if(e.native.shiftKey||t.forEachTool(e=>{if((null==s||s.tool!==e||e.automaticManipulatorSelection)&&e.manipulators){let t=!1;e.manipulators.forEach(({manipulator:e})=>{e.selected&&(e.selected=!1,t=!0)}),t&&e.onManipulatorSelectionChanged&&e.onManipulatorSelectionChanged()}}),null==s)break;const{manipulator:n,tool:l}=s;if(!n.interactive)break;n.selectable&&l.automaticManipulatorSelection&&(n.selected=!n.selected,l.onManipulatorSelectionChanged&&l.onManipulatorSelectionChanged());const c=e.native.shiftKey;n.events.emit("immediate-click",{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:c,stopPropagation:o}),u(n,o);break}case"click":{const r=i.createScreenPointFromEvent(e),s=a(r,e.pointerType,t.forEachTool),n=s?.manipulator;if(null==n||!n.interactive)break;const l=e.native.shiftKey;n.events.emit(e.type,{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:l}),o();break}case"double-click":{const r=i.createScreenPointFromEvent(e),s=a(r,e.pointerType,t.forEachTool),n=null!=s?s.manipulator:null;if(null==n||!n.interactive)break;const l=e.native.shiftKey;n.events.emit("double-click",{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:o}),u(n,o);break}case"immediate-double-click":{const r=i.createScreenPointFromEvent(e),s=a(r,e.pointerType,t.forEachTool),n=null!=s?s.manipulator:null;if(null==n||!n.interactive)break;const l=e.native.shiftKey;n.events.emit("immediate-double-click",{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:o}),"mouse"===e.pointerType&&u(n,o);break}}this._onFocusChange(t.forEachTool)}_releaseManipulatorBeforeDragging(e,t,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:i.createScreenPointFromEvent(t)}),this._grabbedManipulators.forEach(({manipulator:t},r)=>{t===e&&this._grabbedManipulators.delete(r)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(e,t){const r=this._grabbedManipulators.get(e.pointerId)?.manipulator;null!=r&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:i.createScreenPointFromEvent(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(t.setActiveTool))}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=n(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=n(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const r=new Set,o=new Set;this._grabbedManipulators.forEach(({tool:e})=>{r.add(e)}),this._hoveredManipulators.forEach(({tool:e})=>{o.add(e)}),e(e=>{e.hasGrabbedManipulators=r.has(e),e.hasHoveredManipulators=o.has(e);const s=this._grabbedManipulators.values(),i=t.find(s,({tool:t})=>t===e);e.firstGrabbedManipulator=null!=i?i.manipulator:null})}clearPointers(e,{forEachTool:t,setActiveTool:r},o=!0,s){const i=(t,r)=>t===e&&(null==s||s===r);this._grabbedManipulators.forEach(({tool:e,manipulator:t,pointerType:r},o)=>{i(e,t)&&(this._grabbedManipulators.delete(o),t.grabbing=!1,t.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:r}))}),this._draggedManipulators.forEach(({tool:e,manipulator:t},r)=>{i(e,t)&&(this._draggedManipulators.delete(r),t.dragging=!1,t.events.emit("drag",{action:"cancel"}))}),o&&this._hoveredManipulators.forEach(({tool:e,manipulator:t},r)=>{i(e,t)&&(this._hoveredManipulators.delete(r),t.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(t)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((t,r)=>{this._updateHoveredStateForPointerAtScreenPosition(o.createScreenPoint(t.x,t.y),r,t.pointerType,e)})}handleHoverEvent(e,t){const r=e.type;"pointer-up"!==r&&"immediate-click"!==r&&"pointer-move"!==r||!l(e.pointerType)||("pointer-up"!==r&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(i.createScreenPointFromEvent(e),e.pointerId,e.pointerType,t))}_updateHoveredStateForPointerAtScreenPosition(e,t,r,o){let s=a(e,r,o);const i=this._hoveredManipulators.get(t)?.manipulator;null==s||s.manipulator.interactive||(s=null),null!=s&&i===s.manipulator||(null!=i&&(i.hovering=!1),null!=s?(s.manipulator.hovering=!0,this._hoveredManipulators.set(t,s)):this._hoveredManipulators.delete(t),this._onFocusChange(o))}_afterManipulatorRelease(e){0===this._grabbedManipulators.size&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach(({manipulator:t},r)=>{e===r&&(this._hoveredManipulators.delete(e),t.hovering=!1)})}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/screenUtils":function(){define(["exports","../../core/has","../../core/screenUtils"],function(e,t,r){"use strict";function o(e){return r.createScreenPoint(e.x,e.y)}function s(e,t){const o=(e instanceof HTMLElement?e:e.surface)?.getBoundingClientRect();return o?r.createScreenPoint(t.clientX-o.left,t.clientY-o.top):r.createScreenPoint(0,0)}e.createScreenPointArrayFromEvent=function(e){return r.createScreenPointArray(e.x,e.y)},e.createScreenPointFromEvent=o,e.createScreenPointFromNativeEvent=s,e.createScreenPointFromSupportedEvent=function(e,t){return t instanceof Event?s(e,t):o(t)},e.isSupportedScreenPointEvent=function(e){if(e instanceof Event)return!0;if("object"==typeof e&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/DefaultHighlights":function(){define(["exports","../../../core/Collection","../../support/HighlightDefaults","../../support/HighlightOptions"],function(e,t,r,o){"use strict";e.makeDefaultHighlightOptions=function(){return new(t.ofType(o))([new o({name:r.defaultHighlightName}),new o({name:r.temporaryHighlightName,color:r.temporaryHighlightColor})])},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/HighlightDefaults":function(){define(["exports","../../Color"],function(e,t){"use strict";const r=new t("cyan"),o=new t("black"),s=new t("yellow");e.defaultColor=r,e.defaultFillOpacity=.25,e.defaultHaloOpacity=1,e.defaultHighlightName="default",e.defaultOccludedFactor=.25,e.defaultShadowColor=o,e.defaultShadowDifference=.2,e.defaultShadowOpacity=.4,e.maximumHighlights=8,e.temporaryHighlightColor=s,e.temporaryHighlightName="temporary",Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/HighlightOptions":function(){define(["../../chunks/tslib.es6","../../Color","../../core/Accessor","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./HighlightDefaults"],function(e,t,r,o,s,i,n,a,l){"use strict";var c;let u=c=class extends r{constructor(e){super(e),this.name=l.defaultHighlightName,this.color=l.defaultColor.clone(),this.haloColor=null,this.haloOpacity=l.defaultHaloOpacity,this.fillOpacity=l.defaultFillOpacity,this.shadowColor=l.defaultShadowColor.clone(),this.shadowOpacity=l.defaultShadowOpacity,this.shadowDifference=l.defaultShadowDifference,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity&&this.haloWidth===e.haloWidth&&this.haloBlur===e.haloBlur&&this.shadowColor.equals(e.shadowColor)&&this.shadowOpacity===e.shadowOpacity&&this.shadowDifference===e.shadowDifference}clone(){return new c({...this,color:this.color.clone(),haloColor:this.haloColor?.clone(),shadowColor:this.shadowColor?.clone()})}assignFrom(e){this.color=e.color.clone(),this.haloColor=e.haloColor?.clone(),this.haloOpacity=e.haloOpacity,this.fillOpacity=e.fillOpacity,this.shadowColor=e.shadowColor.clone(),this.shadowDifference=e.shadowDifference,this.shadowOpacity=e.shadowOpacity,this.haloBlur=e.haloBlur,this.haloWidth=e.haloWidth}};return e.__decorate([o.property({type:String,constructOnly:!0,nonNullable:!0})],u.prototype,"name",void 0),e.__decorate([o.property({type:t,nonNullable:!0})],u.prototype,"color",void 0),e.__decorate([o.property({type:t})],u.prototype,"haloColor",void 0),e.__decorate([o.property({nonNullable:!0})],u.prototype,"haloOpacity",void 0),e.__decorate([o.property({nonNullable:!0})],u.prototype,"fillOpacity",void 0),e.__decorate([o.property({type:t,nonNullable:!0})],u.prototype,"shadowColor",void 0),e.__decorate([o.property({nonNullable:!0})],u.prototype,"shadowOpacity",void 0),e.__decorate([o.property({nonNullable:!0})],u.prototype,"shadowDifference",void 0),e.__decorate([o.property({nonNullable:!0})],u.prototype,"haloWidth",void 0),e.__decorate([o.property({nonNullable:!0})],u.prototype,"haloBlur",void 0),u=c=e.__decorate([a.subclass("esri.views.support.HighlightOptions")],u),u})},"esri/views/input/Input":function(){define(["../../chunks/tslib.es6","../../core/Accessor","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./gamepad/GamepadSettings"],function(e,t,r,o,s,i,n,a){"use strict";let l=class extends t{constructor(){super(...arguments),this.gamepad=new a}};return e.__decorate([r.property({readOnly:!0})],l.prototype,"gamepad",void 0),l=e.__decorate([n.subclass("esri.views.input.Input")],l),l})},"esri/views/input/gamepad/GamepadSettings":function(){define(["../../../chunks/tslib.es6","../../../core/Accessor","../../../core/Collection","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","./GamepadInputDevice"],function(e,t,r,o,s,i,n,a,l){"use strict";let c=class extends t{constructor(...e){super(...e),this.devices=new r,this.enabledFocusMode="document"}};return e.__decorate([o.property({type:r.ofType(l),readOnly:!0})],c.prototype,"devices",void 0),e.__decorate([o.property({type:["document","view","none"]})],c.prototype,"enabledFocusMode",void 0),c=e.__decorate([a.subclass("esri.views.input.gamepad.GamepadSettings")],c),c})},"esri/views/input/gamepad/GamepadInputDevice":function(){define(["../../../chunks/tslib.es6","../../../core/Accessor","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n){"use strict";let a=class extends t{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown","standard"===e.mapping?this._detectedDeviceType="standard":c.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return null!=this.nativeIndex&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return u[this.deviceType]}};e.__decorate([r.property({nonNullable:!0,readOnly:!0})],a.prototype,"nativeIndex",void 0),e.__decorate([r.property({type:String,readOnly:!0})],a.prototype,"deviceType",null),e.__decorate([r.property({type:Number,readOnly:!0})],a.prototype,"axisThreshold",null),a=e.__decorate([n.subclass("esri.views.input.gamepad.GamepadInputDevice")],a);const l=a,c=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),u={standard:.15,spacemouse:.025,unknown:0};return l})},"esri/views/navigation/Navigation":function(){define(["../../chunks/tslib.es6","../../core/a11yUtils","../../core/Accessor","../../core/deprecate","../../core/Logger","../../core/accessorSupport/decorators/property","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","./NavigationActionMap","./gamepad/GamepadSettings"],function(e,t,r,o,s,i,n,a,l,c,u){"use strict";let p=class extends r{constructor(e){super(e),this.actionMap=new c,this.browserTouchPanEnabled=!0,this.gamepad=new u,this.momentumEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!t.prefersReducedMotion()}get mouseWheelZoomEnabled(){return"zoom"===this.actionMap.mouseWheel}set mouseWheelZoomEnabled(e){o.deprecatedProperty(s.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=e?"zoom":"none"}};return e.__decorate([i.property({type:c,nonNullable:!0})],p.prototype,"actionMap",void 0),e.__decorate([i.property({type:Boolean})],p.prototype,"browserTouchPanEnabled",void 0),e.__decorate([i.property({type:u,nonNullable:!0})],p.prototype,"gamepad",void 0),e.__decorate([i.property({type:Boolean})],p.prototype,"momentumEnabled",void 0),e.__decorate([i.property({type:Boolean})],p.prototype,"mouseWheelZoomEnabled",null),p=e.__decorate([l.subclass("esri.views.navigation.Navigation")],p),p})},"esri/core/a11yUtils":function(){define(["exports","../config"],function(e,t){"use strict";e.prefersReducedMotion=()=>t.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/navigation/NavigationActionMap":function(){define(["../../chunks/tslib.es6","../../core/Accessor","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n){"use strict";const a=()=>r.property({type:["pan","rotate","zoom","none"],nonNullable:!0});let l=class extends t{constructor(e){super(e),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};return e.__decorate([a()],l.prototype,"dragPrimary",void 0),e.__decorate([a()],l.prototype,"dragSecondary",void 0),e.__decorate([a()],l.prototype,"dragTertiary",void 0),e.__decorate([r.property({type:["zoom","none"],nonNullable:!0})],l.prototype,"mouseWheel",void 0),l=e.__decorate([n.subclass("esri.views.navigation.NavigationActionMap")],l),l})},"esri/views/navigation/gamepad/GamepadSettings":function(){define(["../../../chunks/tslib.es6","../../../core/Accessor","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","../../input/gamepad/GamepadInputDevice"],function(e,t,r,o,s,i,n,a){"use strict";let l=class extends t{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};return e.__decorate([r.property({type:Boolean,nonNullable:!0})],l.prototype,"enabled",void 0),e.__decorate([r.property({type:a})],l.prototype,"device",void 0),e.__decorate([r.property({type:["pan","zoom"],nonNullable:!0})],l.prototype,"mode",void 0),e.__decorate([r.property({type:["forward-down","forward-up"],nonNullable:!0})],l.prototype,"tiltDirection",void 0),e.__decorate([r.property({type:Number,nonNullable:!0})],l.prototype,"velocityFactor",void 0),l=e.__decorate([n.subclass("esri.views.navigation.gamepad.GamepadSettings")],l),l})},"esri/views/support/DefaultsFromMap":function(){define(["exports","../../chunks/tslib.es6","../../core/Accessor","../../core/asyncUtils","../../core/maybe","../../core/promiseUtils","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../geometry/support/heightModelInfoUtils","./projectionUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d){"use strict";e.DefaultsFromMap=class extends r{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=s.abortMaybe(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return null==this.userSpatialReference||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const e=this.map?.(),t=[];return null!=this.priorityCollection&&t.push(this.priorityCollection),t.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),t}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,t=>{const r=this._getSupportedSpatialReferences(t);if(r.length>0){const t=this._narrowDownSpatialReferenceCandidates(e,r);null!=t&&(e=t)}return 1===e?.length})&&1!==e?.length)return{updating:!0};const t=this._pickSpatialReferenceCandidate(e);return{spatialReference:t?.spatialReference??null,viewingMode:t?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=this.map?.(),t=this.spatialReference;if(!t)return{updating:this._spatialReferenceTask.updating};let r;const o=this._collectLayers([{parent:e?.basemap,layers:e?.basemap?.baseLayers},{layers:e?.layers}],e=>!(!("tileInfo"in e)||!e.tileInfo?.spatialReference.equals(t)||(r=e,0)),e=>"tileInfo"in e);return r?{tileInfo:r.tileInfo,updating:!1}:{updating:o}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let e={};const t=this._collectLayers(this.mapCollections,t=>{const r=p.deriveHeightModelInfoFromLayer(t);return!!r&&(e={heightModelInfo:r,vcsWkid:t.spatialReference?.vcsWkid,latestVcsWkid:t.spatialReference?.latestVcsWkid},!0)},e=>p.supportsHeightModelInfo(e));return{...e,updating:t}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],t=this._collectLayers(this.mapCollections,t=>{const r="fullExtents"in t&&t.fullExtents||(null!=t.fullExtent?[t.fullExtent]:[]),o=this.requiresExtentInSpatialReference?null:r[0],s=r.find(e=>e.spatialReference.equals(this.spatialReference))??o;if(s)return e.push({extent:s,layer:t}),!0;if(this._getSupportedSpatialReferences(t).length>0)for(const o of r)e.push({extent:o,layer:t});return!1});return{candidates:e,updating:t}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(null==e||0===e.length)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),n=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:null!=this._projectExtentTask.task&&!this._projectExtentTask.task.finished}:(null!=this._projectExtentTask.task&&(this._projectExtentTask.task=s.abortMaybe(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:n.clone(),task:o.createTask(async e=>{try{const t=await d.projectWithEngineOrService(r.extent,n,"portalItem"in r.layer?r.layer.portalItem:void 0,e);this._projectExtentTask={...this._projectExtentTask,task:null,output:t}}catch(t){if(i.isAborted(e))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(null==e)return t;const r=new Array;for(const o of e)for(const e of t){if(!o.spatialReference.equals(e.spatialReference))continue;const t=y(o.viewingMode,e.viewingMode);if(!1!==t){r.push({spatialReference:o.spatialReference,viewingMode:t});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return null==e||e.length<1?t?{spatialReference:t,viewingMode:null}:null:(null!=t&&e.length>1&&e.some(({spatialReference:e})=>e.equals(t))&&(e=e.filter(({spatialReference:e})=>e.equals(t))),e.length>1&&e.some(({viewingMode:e})=>2!==e)&&(e=e.filter(({viewingMode:e})=>2!==e)),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(0===t.length)return[];const r=[];for(const o of t){const t=this.getSpatialReferenceSupport(o,e);if(null!=t){const e=t.constraints??[{spatialReference:o,viewingMode:null}];for(const{spatialReference:t,viewingMode:o}of e)this.requiresExtentInSpatialReference&&null!=this.userSpatialReference&&!t.equals(this.userSpatialReference)||r.push({spatialReference:t,viewingMode:o})}}return r}_pickExtentCandidate(e){const t=this.spatialReference;return e.find(({extent:e})=>t.equals(e.spatialReference))||e[0]}_collectLayers(e,t,r=()=>!0){switch(this._loadMaybe(this.map?.())){case"loading":return!0;case"failed":return!1}const o=new h(r,t);for(const t of e)if(this._collectCollection(t,o),o.done||o.preloading===this.sourcePreloadCount)break;return o.updating}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const r of e.layers)if(t.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":if(t.updating||(t.done=t.pushLayer(r)),t.done||t.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},t)}if(t.done||t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&null!=e.loadStatus?"not-loaded"===e.loadStatus?(e.load().catch(e=>{i.isAbortError(e)}),"loading"):e.loadStatus:"loaded"}},t.__decorate([n.property()],e.DefaultsFromMap.prototype,"required",void 0),t.__decorate([n.property({constructOnly:!0})],e.DefaultsFromMap.prototype,"map",void 0),t.__decorate([n.property({constructOnly:!0})],e.DefaultsFromMap.prototype,"getSpatialReferenceSupport",void 0),t.__decorate([n.property()],e.DefaultsFromMap.prototype,"defaultSpatialReference",void 0),t.__decorate([n.property()],e.DefaultsFromMap.prototype,"userSpatialReference",void 0),t.__decorate([n.property()],e.DefaultsFromMap.prototype,"sourcePreloadCount",void 0),t.__decorate([n.property()],e.DefaultsFromMap.prototype,"priorityCollection",void 0),t.__decorate([n.property()],e.DefaultsFromMap.prototype,"requiresExtentInSpatialReference",void 0),t.__decorate([n.property()],e.DefaultsFromMap.prototype,"suspended",void 0),t.__decorate([n.property({readOnly:!0})],e.DefaultsFromMap.prototype,"ready",null),t.__decorate([n.property({readOnly:!0})],e.DefaultsFromMap.prototype,"heightModelInfoReady",null),t.__decorate([n.property({readOnly:!0})],e.DefaultsFromMap.prototype,"spatialReference",null),t.__decorate([n.property({readOnly:!0})],e.DefaultsFromMap.prototype,"extent",null),t.__decorate([n.property({readOnly:!0})],e.DefaultsFromMap.prototype,"heightModelInfo",null),t.__decorate([n.property({readOnly:!0})],e.DefaultsFromMap.prototype,"vcsWkid",null),t.__decorate([n.property({readOnly:!0})],e.DefaultsFromMap.prototype,"latestVcsWkid",null),t.__decorate([n.property({readOnly:!0})],e.DefaultsFromMap.prototype,"viewingMode",null),t.__decorate([n.property({readOnly:!0})],e.DefaultsFromMap.prototype,"tileInfo",null),t.__decorate([n.property({readOnly:!0})],e.DefaultsFromMap.prototype,"mapCollections",null),t.__decorate([n.property({readOnly:!0})],e.DefaultsFromMap.prototype,"_spatialReferenceTask",null),t.__decorate([n.property({readOnly:!0})],e.DefaultsFromMap.prototype,"_tileInfoTask",null),t.__decorate([n.property({readOnly:!0})],e.DefaultsFromMap.prototype,"_heightModelInfoTask",null),t.__decorate([n.property({readOnly:!0})],e.DefaultsFromMap.prototype,"_extentCandidatesTask",null),t.__decorate([n.property()],e.DefaultsFromMap.prototype,"_extentTask",null),t.__decorate([n.property()],e.DefaultsFromMap.prototype,"_projectExtentTask",void 0),e.DefaultsFromMap=t.__decorate([u.subclass("esri.views.support.DefaultsFromMap")],e.DefaultsFromMap);class h{constructor(e,t){this.layerFilter=e,this.pushLayer=t,this.preloading=-1,this.updating=!1,this.done=!1}}function y(e,t){return null!=e?null!=t?e===t&&e:e:t}Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/heightModelInfoUtils":function(){define(["exports","../../core/has","../../core/Error","../HeightModelInfo","../../layers/support/arcgisLayerUrl"],function(e,t,r,o,s){"use strict";function i(e){return null==e||null!=e.heightModel&&null!=e.heightUnit}function n(e){if("integrated-mesh-3dtiles"===e.type)return null;const t=e.url?s.parse(e.url):void 0,r=e.spatialReference?.vcsWkid;return(null!=r||null==t||"ImageServer"!==t.serverType)&&a(e)&&e.heightModelInfo?e.heightModelInfo:c(e)?o.deriveUnitFromSR(p,e.spatialReference):null}function a(e){return"heightModelInfo"in e}function l(e){if("unknown"===e.type||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function c(e){return l(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):u(e)}function u(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"gaussian-splat":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}const p=new o({heightModel:"gravity-related-height"});e.deriveHeightModelInfoFromLayer=n,e.rejectLayerError=function(e,t,s){const a=n(e),l=t,u=function(e,t,r){if(!i(e)||!i(t))return 4;if(null==e||null==t)return 0;if(!r&&e.heightUnit!==t.heightUnit)return 1;if(e.heightModel!==t.heightModel)return 2;switch(e.heightModel){case"gravity-related-height":return 0;case"ellipsoidal":return e.vertCRS===t.vertCRS?0:3;default:return 4}}(a,l,s);if(a){const t=o.deriveUnitFromSR(a,e.spatialReference).heightUnit;if(!s&&t!==a.heightUnit){const e=new r("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${t})`,{horizontalUnit:t});return new r("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:a,error:e})}}if(!function(e){return"heightModelInfo"in e&&null!=e.heightModelInfo||null!=e.spatialReference||!c(e)}(e)||4===u)return new r("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:a});switch(u){case 1:{const e=a?.heightUnit||"unknown",t=l?.heightUnit||"unknown",o=new r("layerview:incompatible-height-unit",`The vertical units of the layer (${e}) must match the vertical units of the scene (${t})`,{layerUnit:e,sceneUnit:t});return new r("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:a,sceneHeightModelInfo:l,error:o})}case 2:{const e=a?.heightModel||"unknown",t=l?.heightModel||"unknown",o=new r("layerview:incompatible-height-model",`The height model of the layer (${e}) must match the height model of the scene (${t})`,{layerHeightModel:e,sceneHeightModel:t});return new r("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:a,sceneHeightModelInfo:l,error:o})}case 3:{const e=a?.vertCRS||"unknown",t=l?.vertCRS||"unknown",o=new r("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${e}) must match the vertical datum of the scene (${t})`,{layerDatum:e,sceneDatum:t});return new r("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:a,sceneHeightModelInfo:l,error:o})}}return null},e.supportsHeightModelInfo=function(e){return null!=e.layers||u(e)||l(e)||a(e)},e.validateWebSceneError=function(e,t){if(!e)return null;if(!i(e))return new r("webscene:unsupported-height-model-info","The vertical coordinate system of the scene is not supported",{heightModelInfo:e});const s=e.heightUnit,n=o.deriveUnitFromSR(e,t).heightUnit;return s!==n?new r("webscene:incompatible-height-unit",`The vertical units of the scene (${s}) must match the horizontal units of the scene (${n})`,{verticalUnit:s,horizontalUnit:n}):null},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/projectionUtils":function(){define(["require","exports","../../core/promiseUtils","../../geometry/projectionUtils"],function(e,t,r,o){"use strict";let s,i=null;async function n(t){i||(i=new Promise((t,r)=>e(["../../portal/support/geometryServiceUtils"],t,r)).then(e=>s=e)),await i,r.throwIfAborted(t)}t.projectWithEngineOrService=async function e(t,r,i,a){if(!t)return null;const l=t.spatialReference;return o.isLoaded()||o.canProjectWithoutEngine(l,r)?o.project(t,r):s?s.projectGeometry(t,r,i,a):(await Promise.race([n(a),o.load(a)]),e(t,r,i,a))},t.projectWithZConversionSilent=async function(e,t){try{return e?.spatialReference?await o.projectWithZConversion(e,t):null}catch{return null}},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/LayerViewManager":function(){define(["../../chunks/tslib.es6","../../core/Accessor","../../core/Error","../../core/Logger","../../core/MapUtils","../../core/promiseUtils","../../core/reactiveUtils","../../core/scheduling","../../core/accessorSupport/decorators/property","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/get","../../core/support/UpdatingHandles","../../support/collectionUtils","./LayerLayerViewInfo"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f){"use strict";function m(e){return null!=e&&"object"==typeof e&&"layerViews"in e}let g=class extends t{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new h.UpdatingHandles,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const e=this.view.map?.allLayers;if(e)for(const t of e)!1!==this.layerViewFilter?.(t)&&this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t)},this._reschedule=()=>this.destroyed?Promise.reject():(null==this._workPromise&&(this._workPromise=i.createResolver(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(a.schedule(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;const{map:e}=this.view;if(!e)return void this.clear();if(this._map!==e&&(this.clear(),this._map=e),null==this._workPromise)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const t=new Set,r=[],o=this.view.ready,s=e=>{if(null!=e)for(const i of e)if(i){if(!1===this.layerViewFilter?.(i))continue;t.add(i);const e=this._layerLayerViewInfoMap.get(i);e&&o?e.start():e||this._recyclingInfoMap.has(i)||r.push(i),"layers"in i&&i.layers&&s(i.layers)}};for(const e of this._rootCollectionNames)s(d.get(this,e));const n=new Array,a=e=>{const t=e.tryRecycle(r);t?(this._recyclingInfoMap.set(e.layer,e),this.notifyChange("updating"),t.then(()=>{this._recyclingInfoMap.delete(e.layer),this._layerLayerViewInfoMap.set(e.layer,e),this._reschedule(),this.notifyChange("updating")}).catch(t=>{i.isAbortError(t)||(this._recyclingInfoMap.delete(e.layer),e.destroy(),this._reschedule(),this.notifyChange("updating"))})):n.push(e)};for(const e of this._layerLayerViewInfoMap.values())t.has(e.layer)||(this._layerLayerViewInfoMap.delete(e.layer),a(e));for(const e of this._recyclingInfoMap.values())t.has(e.layer)||(this._recyclingInfoMap.delete(e.layer),a(e));for(const e of r)this._createLayerView(e);this._refreshCollections(),n.forEach(e=>e.destroy());const l=[e?.ground?.layers,e?.basemap?.baseLayers,e?.basemap?.referenceLayers,e?.layers].filter(e=>!!e);t.forEach(e=>"layers"in e&&l.push(e.layers)),this.addHandles(l.map(e=>this._watchUpdatingTracking.addOnCollectionChange(()=>e,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([n.on(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),n.watch(()=>{const e=this.view,t=e?.map;return[t?.basemap,t?.ground,t?.layers,e?.ready]},()=>this._reschedule(),n.syncAndInitial)]),this._preloadLayerViewModules(),this._reschedule()}clearHandles(){this._watchUpdatingTracking.removeAll()}destroy(){this.clear(),y.destroyMap(this._recyclingInfoMap),y.destroyMap(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,null!=this._workPromise&&(this._workPromise.reject(i.createAbortError()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return null!=this._workPromise||this._watchUpdatingTracking.updating||s.someMap(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){this.destroyed||(this._clearCollections(),y.destroyMap(this._layerLayerViewInfoMap))}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new r("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}isCreatingLayerViewsForLayer(e,t){this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(e);if(!r?.done)return!0;const o=r.layerView;return!(!o||!t||o.parent===t)||!!(r.done&&o&&"layers"in e&&e.layers?.length)&&e.layers.some(e=>this.isCreatingLayerViewsForLayer(e,o))}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(d.get(this,e),d.get(this,t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_clearCollections(){for(const e of this._layersToLayerViews.values())d.get(this,e)?.removeAll()}_populateLayerViewsOwners(e,t,r){if(!e||!t)return void t?.removeAll();let o=0;for(const s of e){const e=this._layerLayerViewInfoMap.get(s);if(!e?.layerView)continue;const i=e.layerView;i.layer=s,i.parent=r,t.at(o)!==i&&t.splice(o,0,i),"layers"in s&&m(i)&&this._populateLayerViewsOwners(s.layers,i.layerViews,i),o+=1}o<t.length&&t.splice(o)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new f.LayerLayerViewInfo(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),t=>{t&&(i.isAbortError(t)||"cancelled:layerview-create"===t.name)||o.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:t}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};return e.__decorate([l.property()],g.prototype,"_workPromise",void 0),e.__decorate([l.property({readOnly:!0})],g.prototype,"_watchUpdatingTracking",void 0),e.__decorate([l.property({readOnly:!0})],g.prototype,"_layersToLayerViews",null),e.__decorate([l.property({readOnly:!0})],g.prototype,"_rootCollectionNames",null),e.__decorate([l.property({constructOnly:!0})],g.prototype,"layerViewFilter",void 0),e.__decorate([l.property()],g.prototype,"layerViewImporter",void 0),e.__decorate([l.property()],g.prototype,"supportsGround",void 0),e.__decorate([l.property({readOnly:!0})],g.prototype,"updating",null),e.__decorate([l.property({readOnly:!0})],g.prototype,"updatingRemaining",null),e.__decorate([l.property({constructOnly:!0})],g.prototype,"view",void 0),g=e.__decorate([p.subclass("esri.views.support.LayerViewManager")],g),g})},"esri/views/support/LayerLayerViewInfo":function(){define(["exports","../../core/Error","../../core/maybe","../../core/promiseUtils","../../layers/Layer"],function(e,t,r,o,s){"use strict";e.LayerLayerViewInfo=class{constructor(e,r,s){this.layer=e,this.view=r,this.layerViewImporter=s,this._controller=new AbortController,this._deferred=o.createResolver(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,o.onAbort(this._controller.signal,()=>{this._recycleController?.abort();const r=new t("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(r)})}tryRecycle(e){if(!this.done||!this.layerView||!("tryRecycleWith"in this.layerView))return null;this._recycleController?.abort(),this._recycleController=new AbortController;const t=this.layer.type,r=this._recycleController.signal;for(let s=0;s<e.length;s++){const i=e[s];if(i.type!==t)continue;const n=this.layerView.tryRecycleWith(i,{signal:r});if(n){e.splice(s,1),this.layer=i;const t=this.layerView,a=t.view;return this.promise=n.then(()=>(o.throwIfAborted(r),i.emit("layerview-destroy",{view:a,layerView:t}),a.emit("layerview-destroy",{view:a,layerView:t}),i.emit("layerview-create",{view:a,layerView:t}),a.emit("layerview-create",{view:a,layerView:t}),t)),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:t,view:r}=this;t.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:t,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){const{view:e}=this;if(this._started||!e.map)return;this._started=!0;const{_controller:{signal:i},layer:n}=this;this._map=e.map;try{let a,l;if(await n.load({signal:i}),n.prefetchResources&&await n.prefetchResources({signal:i}),function(e){return e.createLayerView!==s.prototype.createLayerView}(n))a=await n.createLayerView(e,{signal:i});else{if(!this.layerViewImporter.hasLayerViewModule(n))throw new t("layer:view-not-supported","No layerview implementation was found");const r=await this.layerViewImporter.importLayerView(n);o.throwIfAborted(i),a="default"in r?new r.default({layer:n,view:e}):new r({layer:n,view:e})}const c=()=>{l=r.removeMaybe(l),a.destroyed||a.destroy(),this.done=!0};l=o.onAbort(i,c),o.throwIfAborted(i);try{await a.when()}catch(e){throw c(),e}const u=this._map?.allLayers?.includes(n);if(!u)return c(),void this._deferred.reject(new t("view:no-layerview-for-layer","The layer has been removed from the map",{layer:n}));this.layerView=a,n.emit("layerview-create",{view:e,layerView:a}),e.emit("layerview-create",{layer:n,layerView:a}),this.done=!0,this._deferred.resolve(a)}catch(r){n.emit("layerview-create-error",{view:e,error:r}),e.emit("layerview-create-error",{layer:n,error:r}),this.done=!0,this._deferred.reject(new t("layerview:create-error","layerview creation failed",{layer:n,error:r}))}}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/RequiredFieldsOptions":function(){define(["../../chunks/tslib.es6","../../core/Accessor","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n){"use strict";let a=class extends t{constructor(e){super(e),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};return e.__decorate([r.property()],a.prototype,"featureTitleFields",void 0),e.__decorate([r.property()],a.prototype,"utilityNetworkFields",void 0),e.__decorate([r.property()],a.prototype,"globalIdField",void 0),a=e.__decorate([n.subclass("esri.views.support.RequiredFieldsOptions")],a),a})},"esri/views/ViewAnimation":function(){define(["../chunks/tslib.es6","../core/Error","../core/Promise","../core/promiseUtils","../core/accessorSupport/decorators/property","../core/has","../core/Logger","../core/RandomLCG","../core/accessorSupport/decorators/subclass"],function(e,t,r,o,s,i,n,a,l){"use strict";let c=class extends r.EsriPromise{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=o.createResolver(),this.addResolvingPromise(this._resolver.promise)}get done(){return"finished"===this.state||"stopped"===this.state}stop(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),this._resolver?.reject(new t("view:animation-stopped","ViewAnimation stopped")))}finish(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),this._resolver?.resolve())}update(e,t){t||(t=o.isPromiseLike(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}static{this.state={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}};return e.__decorate([s.property({readOnly:!0})],c.prototype,"done",null),e.__decorate([s.property({readOnly:!0,type:String})],c.prototype,"state",void 0),e.__decorate([s.property()],c.prototype,"target",void 0),c=e.__decorate([l.subclass("esri.views.ViewAnimation")],c),c})},"esri/views/layers/LayerView":function(){define(["exports","../../chunks/tslib.es6","../../core/Evented","../../core/Identifiable","../../core/Logger","../../core/maybe","../../core/Promise","../../core/accessorSupport/decorators/property","../../core/has","../../core/RandomLCG","../../core/accessorSupport/decorators/subclass","../../core/support/UpdatingHandles","../support/layerViewUtils"],function(e,t,r,o,s,i,n,a,l,c,u,p,d){"use strict";return e.default=class extends(o.IdentifiableMixin(n.EsriPromiseMixin(r.EventedAccessor))){get spatialReferenceSupported(){return!0}constructor(e){super(e),this._updatingHandles=new p.UpdatingHandles,this.layer=null,this.parent=null}initialize(){this.when().catch(e=>{if("layerview:create-error"!==e.name){const t=this.layer&&this.layer.id||"no id",r=this.layer?.title||"no title";s.getLogger(this).error("#resolve()",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e)}})}destroy(){this._updatingHandles=i.destroyMaybe(this._updatingHandles),this._set("parent",null)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return this.destroyed||!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get updateSuspended(){return this.suspended}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome("visible",e)}get visibleAtCurrentScale(){return!0}get visibleAtCurrentTimeExtent(){const e=this.view.timeExtent,t=this.layer?.visibilityTimeExtent;return!e||!t||!e.intersection(t).isEmpty}canResume(){const e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&this.layer?.loaded&&this.parent&&!this.parent.suspended&&this.view?.ready&&d.validateScaleRange(e)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}getSuspendInfo(){const e=this.parent?.suspended?this.parent.suspendInfo:{};this.view?.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0);const t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return d.validateScaleRange(t)&&this.visibleAtCurrentScale||(e.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(e.outsideVisibilityTimeExtent=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}},t.__decorate([a.property({readOnly:!0})],e.default.prototype,"spatialReferenceSupported",null),t.__decorate([a.property()],e.default.prototype,"view",void 0),t.__decorate([a.property()],e.default.prototype,"fullOpacity",null),t.__decorate([a.property()],e.default.prototype,"layer",void 0),t.__decorate([a.property()],e.default.prototype,"parent",void 0),t.__decorate([a.property({readOnly:!0})],e.default.prototype,"suspended",null),t.__decorate([a.property({readOnly:!0})],e.default.prototype,"suspendInfo",null),t.__decorate([a.property({readOnly:!0})],e.default.prototype,"legendEnabled",null),t.__decorate([a.property({type:Boolean,readOnly:!0})],e.default.prototype,"updating",null),t.__decorate([a.property({readOnly:!0})],e.default.prototype,"updatingProgress",null),t.__decorate([a.property()],e.default.prototype,"updateSuspended",null),t.__decorate([a.property()],e.default.prototype,"visible",null),t.__decorate([a.property({readOnly:!0})],e.default.prototype,"visibleAtCurrentScale",null),t.__decorate([a.property({readOnly:!0})],e.default.prototype,"visibleAtCurrentTimeExtent",null),e.default=t.__decorate([u.subclass("esri.views.layers.LayerView")],e.default),e.default})},"esri/views/support/layerViewUtils":function(){define(["exports","../../core/Error","../../core/has"],function(e,t,r){"use strict";function o(e,t,r){return null==e||e>=r&&(0===t||e<=t)}function s(e,t){return null!=e&&e>0||null!=t&&t>0}e.hasLayerBasedScaleVisibility=()=>!r("disable-feature:layer-based-scale-visibility"),e.highlightsSupported=function(e){return e&&"function"==typeof e.highlight},e.isInEffectiveScaleRange=function(e,t){if(t&&e){const{minScale:r,maxScale:i}=e;if(s(r,i))return o(t,r,i)}return!0},e.isScaleRangeActive=s,e.isSelectableLayerView2D=function(e){return null!=e&&"object"==typeof e&&"createQuery"in e&&"queryFeatures"in e&&"layer"in e&&"view"in e},e.occludeesSupported=function(e){return e&&"function"==typeof e.maskOccludee},e.scaleBoundsPredicate=o,e.spatialReferenceIncompatibleError=function(e,r,o){return new t("layerview:spatial-reference-incompatible",`The spatial reference of this ${e} (wkid: ${r??"undefined"}) is incompatible with the spatial reference of the view (wkid: ${o??"undefined"}).`,{})},e.validateScaleRange=function(e){return!e?.minScale||!e.maxScale||e.minScale>=e.maxScale},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Widget":function(){define(["../chunks/tslib.es6","../intl","../core/domUtils","../core/Evented","../core/events","../core/has","../core/lang","../core/Logger","../core/maybe","../core/Promise","../core/promiseUtils","../core/reactiveUtils","../core/uuid","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/cast","../core/accessorSupport/decorators/subclass","../core/accessorSupport/tracking","../core/accessorSupport/tracking/SimpleTrackingTarget","../libs/maquette-advanced-projector/projector","../chunks/componentsUtils","./support/jsxWidgetSupport","./support/symbols","./support/tests","./support/vnodeCache","./support/widgetUtils","../intl/messages","../intl/locale"],function(e,t,r,o,s,i,n,a,l,c,u,p,d,h,y,f,m,g,b,_,S,v,w,x,T,M,I){"use strict";var O;let P=0;function k(e,t){const r=Object.prototype.hasOwnProperty;for(const o in t)r.call(t,o)&&r.call(e,o)&&(null!=e[o]&&null!=t[o]&&"object"==typeof e[o]&&"object"==typeof t[o]?k(e[o],t[o]):e[o]=t[o]);return e}const C=b.createAdvancedProjector({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(e,o,s,i)=>{const n=t?.(e,o,s,i),a=r.test(e);if(!((e=e.replace(r,"")).toLowerCase()in s)||a){const t=e[2].toLowerCase()+e.slice(3),r=e=>n?.call(s,e);s.addEventListener(t,r,a);const o=()=>s.removeEventListener(t,r,a),l=i.afterRemoved;i.afterRemoved=e=>{l?.(e),o()}}return n}},handleInterceptedEvent(e,t,r,o){const{eventPhase:s,type:i}=o,n=s===Event.CAPTURING_PHASE;let a=`on${i}${n?"capture":""}`;const l=t.properties;(l&&a in l||(a=`on${i[0].toUpperCase()}${i.slice(1)}${n?"Capture":""}`,l&&a in l))&&(x.clearVNodeCache(),e.scheduleRender(),l[a].call(l.bind||r,o))}});let L=!1,E=class extends(c.EsriPromiseMixin(o.EventedAccessor)){static{this[O]=!0}constructor(e,t){super(e,t),this._attached=!1,this._projector=C,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=u.debounce(async()=>{if(this._messageBundleProps?.length){const e=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:e,propertyName:t})=>{if(this.destroyed)return;let r=await M.fetchMessageBundle(e);this.destroyed||(this.uiStrings&&Object.keys(this.uiStrings)&&(r=k(n.clone(r),this.uiStrings)),this[t]=r)}));if(this.destroyed)return;for(const t of e)"rejected"===t.status&&a.getLogger(this).error("widget-intl:locale-error",this.declaredClass,t.reason)}await this.loadLocale()}),this.addHandles(w.registerAlive()),_.commitAssetPath();const r="esri-widget-uid-"+d.generateUUID(),o=this.render.bind(this);this._trackingTarget=new g.SimpleTrackingTarget(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const s=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),i=()=>{if(!this._readyForTrueRender||this.destroyed)return null;const e=o()??s(),t=e.properties??={};if(t.key??=r,S.isWidgetConstructor(e.vnodeSelector)){if(!this.visible)return s()}else this.visible?t.styles||(t.styles={}):(t.class="",t.styles={display:"none"}),t.styles.display??="";let i=0;return e.children?.forEach(e=>{S.isWidgetConstructor(e.vnodeSelector)||(e.properties??={},e.properties.key??=`${this.id}--${i++}`)}),S.processWidgets(this,e)};this.render=()=>{if(L)return i();let e=x.getVNodeCache(this)??null;if(e)return e;this._trackingTarget.clear(),L=!0;try{e=m.runTracked(this._trackingTarget,i)}catch(e){throw a.getLogger(this).error(e),e}finally{L=!1}return e&&x.setVNodeCache(this,e),e};const l=this.beforeFirstRender();l?this._resourcesFetch=l.then(()=>{this.destroyed||(this._readyForTrueRender=!0,this._postInitialize())}):(this._resourcesFetch=Promise.resolve().then(()=>{this.destroyed||this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),w.registerLoading(this._resourcesFetch)}normalizeCtorArgs(e,t){const r={...e};return t&&(r.container=t),r}postInitialize(){}beforeFirstRender(){const e=this.loadDependencies();return this._messageBundleProps?.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(u.throwIfNotAbortError):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(l.destroyMaybe(this._trackingTarget),l.destroyMaybe(this.viewModel),this._detach(this.container),this._set("container",null),this.render=()=>null,this._projector=null,x.deleteVNodeCache(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return r.byId(e)}get destroyed(){return super.destroyed}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){return this._get("id")||this.container?.id||Date.now().toString(16)+"-widget-"+P++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(O=v.widgetSymbol,v.widgetTestDataSymbol)](){return{projector:this._projector}}static{this.vnodeSelector="div"}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(x.deleteVNodeCache(this),this._projector.scheduleRender())}classes(...e){return T.classes.apply(this,e)}renderNow(){x.deleteVNodeCache(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles(p.watch(()=>this.viewModel,(e,t)=>{t&&this.removeHandles("delegated-events"),e&&s.isEventedOrEventTarget(e)&&this.addHandles(this._delegatedEventNames.map(t=>s.on(e,t,e=>{this.emit(t,e)})),"delegated-events")},p.syncAndInitial)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(u.throwIfNotAbortError),this.scheduleRender()};this.addHandles([I.onLocaleChange(e),p.watch(()=>this.uiStrings,e)]),this.addHandles(p.when(()=>this.container,e=>{this.destroyed||this._attach(e)},{initial:!0,once:!0}))}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){this._attached&&(this._projector.detach(this.render),this._attached=!1),e?.parentNode?.removeChild(e)}};return e.__decorate([h.property()],E.prototype,"_readyForTrueRender",void 0),e.__decorate([h.property({value:null})],E.prototype,"container",null),e.__decorate([y.cast("container")],E.prototype,"castContainer",null),e.__decorate([h.property()],E.prototype,"icon",null),e.__decorate([h.property()],E.prototype,"id",null),e.__decorate([h.property()],E.prototype,"label",null),e.__decorate([h.property()],E.prototype,"renderable",null),e.__decorate([h.property()],E.prototype,"uiStrings",void 0),e.__decorate([h.property()],E.prototype,"viewModel",void 0),e.__decorate([h.property({value:!0})],E.prototype,"visible",null),e.__decorate([h.property()],E.prototype,"key",void 0),e.__decorate([h.property()],E.prototype,"children",void 0),e.__decorate([h.property()],E.prototype,"afterCreate",void 0),e.__decorate([h.property()],E.prototype,"afterUpdate",void 0),e.__decorate([h.property()],E.prototype,"afterRemoved",void 0),E=e.__decorate([f.subclass("esri.widgets.Widget")],E),E})},"esri/core/domUtils":function(){define(["exports"],function(e){"use strict";e.byId=function(e){return"string"==typeof e?document.getElementById(e):e??null},e.reparent=function(e,t){for(;;){const r=e.firstChild;if(!r)break;t.appendChild(r)}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/libs/maquette-advanced-projector/projector":function(){define(["exports","../maquette/dom","../maquette/projector","./advanced-projector-options","./utils"],function(e,t,r,o,s){"use strict";const i=(e,t,r=!1)=>{let o=e;return t.forEach((e,s)=>{const i=o?.children?(n=t=>t.domNode===e,o.children.find(n)):void 0;var n;r&&!i&&s!==t.length-1||(o=i)}),o};e.createAdvancedProjector=e=>{let r;const n={...o.defaultAdvancedProjectorOptions,...e},a=s.applyDefaultProjectionOptions(n),l=a.performanceLogger;let c,u=!0,p=!1;const d=[],h=[],y=(e,t,o)=>{let s;a.eventHandlerInterceptor=(e,t,o,a)=>function(e){let t;l("domEvent",e);const o=((e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r})(e.currentTarget,s.domNode),a=o.some(e=>customElements.get(e?.tagName?.toLowerCase()));if(e.eventPhase!==Event.CAPTURING_PHASE&&a){const r=e.composedPath(),o=r.slice(r.indexOf(e.currentTarget),r.indexOf(s.domNode)).reverse();t=i(s.getLastRender(),o,!0)}else o.reverse(),t=i(s.getLastRender(),o);let c;return t&&(c=n.handleInterceptedEvent(r,t,this,e)),l("domEventProcessed",e),c},n.postProcessProjectionOptions?.(a);const c=o();s=e(t,c,a),a.eventHandlerInterceptor=void 0,d.push(s),h.push(o),n.afterFirstVNodeRendered&&n.afterFirstVNodeRendered(s,c)};let f=()=>{if(c=void 0,u){u=!1,l("renderStart",void 0);for(let e=0;e<d.length;e++){const t=h[e]();l("rendered",void 0);try{d[e].update(t)}catch(e){console.error(e)}l("patched",void 0)}l("renderDone",void 0),u=!0}};return n.modifyDoRenderImplementation&&(f=n.modifyDoRenderImplementation(f,d,h)),r={renderNow:f,scheduleRender:()=>{c||p||(c=requestAnimationFrame(f))},stop:()=>{c&&(cancelAnimationFrame(c),c=void 0),p=!0},resume:()=>{p=!1,u=!0,r.scheduleRender()},append:(e,r)=>{y(t.dom.append,e,r)},insertBefore:(e,r)=>{y(t.dom.insertBefore,e,r)},merge:(e,r)=>{y(t.dom.merge,e,r)},replace:(e,r)=>{y(t.dom.replace,e,r)},detach:e=>{for(let t=0;t<h.length;t++)if(h[t]===e)return h.splice(t,1),d.splice(t,1)[0];throw new Error("renderFunction was not found")}},r},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/libs/maquette/dom":function(){define(["exports","./projection"],function(e,t){"use strict";const r={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{"-"===t.charAt(0)?e.style.setProperty(t,r):e.style[t]=r}};let o=e=>t.extend(r,e),s={create:(e,r)=>(r=o(r),t.createDom(e,document.createElement("div"),void 0,r),t.createProjection(e,r)),append:(e,r,s)=>(s=o(s),t.createDom(r,e,void 0,s),t.createProjection(r,s)),insertBefore:(e,r,s)=>(s=o(s),t.createDom(r,e.parentNode,e,s),t.createProjection(r,s)),merge:(e,r,s)=>(s=o(s),r.domNode=e,t.initPropertiesAndChildren(e,r,s),t.createProjection(r,s)),replace:(e,r,s)=>(s=o(s),t.createDom(r,e.parentNode,e,s),e.parentNode.removeChild(e),t.createProjection(r,s))};e.applyDefaultProjectionOptions=o,e.dom=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/libs/maquette/projection":function(){define(["exports","../../core/sanitizerUtils"],function(e,t){"use strict";const r="http://www.w3.org/",o=`${r}2000/svg`,s=`${r}1999/xlink`;let i=[],n=(e,t)=>{let r={};return Object.keys(e).forEach(t=>{r[t]=e[t]}),t&&Object.keys(t).forEach(e=>{r[e]=t[e]}),r},a=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),l=e=>{if("string"!=typeof e)throw new Error("Style values must be strings")},c=(e,t,r)=>{if(""!==t.vnodeSelector)for(let o=r;o<e.length;o++)if(a(e[o],t))return o;return-1},u=(e,t,r,o)=>{let s=e[t];if(""===s.vnodeSelector)return;let i=s.properties;if(!(i?void 0===i.key?i.bind:i.key:void 0))for(let i=0;i<e.length;i++)if(i!==t){let t=e[i];if(a(t,s))throw new Error(`${r.vnodeSelector} had a ${s.vnodeSelector} child ${"added"===o?o:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}},p=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},d=[],h=!1,y=e=>{(e.children||[]).forEach(y),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},f=()=>{h=!1,d.forEach(y),d.length=0},m=e=>{d.push(e),h||(h=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(f,{timeout:16}):setTimeout(f,16))},g=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r){t.style.pointerEvents="none";let o=()=>{t.parentNode&&(t.parentNode.removeChild(t),m(e))};return void r(t,o,e.properties)}}t.parentNode&&(t.parentNode.removeChild(t),m(e))},b=(e,r,i)=>{if(!r)return;let n=i.eventHandlerInterceptor,a=Object.keys(r),c=a.length;for(let u=0;u<c;u++){let c=a[u],p=r[c];if("className"===c)throw new Error('Property "className" is not supported, use "class".');if("class"===c)x(e,p,!0);else if("classes"===c){let t=Object.keys(p),r=t.length;for(let o=0;o<r;o++){let r=t[o];p[r]&&e.classList.add(r)}}else if("styles"===c){let t=Object.keys(p),r=t.length;for(let o=0;o<r;o++){let r=t[o],s=p[r];s&&(l(s),i.styleApplyer(e,r,s))}}else if("key"!==c&&null!=p){let a=typeof p;"function"===a?(0===c.lastIndexOf("on",0)&&(n&&(p=n(c,p,e,r)),"oninput"===c&&function(){let e=p;p=function(t){e.apply(this,[t]),t.target["oninput-value"]=t.target.value}}()),e[c]=p):i.namespace===o?"href"===c?e.setAttributeNS(s,c,p):e.setAttribute(c,p):"string"===a&&"value"!==c?"innerHTML"===c?e[c]=t.renderingSanitizer.sanitize(p):_(e)&&c in e?e[c]=p:e.setAttribute(c,p):e[c]=p}}};function _(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let S,v=(e,t,r)=>{((e,t,r)=>{if(t)for(let o of t)w(o,e,void 0,r)})(e,t.children,r),t.text&&(e.textContent=t.text),b(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},w=(e,t,r,s)=>{let i,a=0,l=e.vnodeSelector,c=t.ownerDocument;if(""===l)i=e.domNode=c.createTextNode(e.text),void 0!==r?t.insertBefore(i,r):t.appendChild(i);else{for(let u=0;u<=l.length;++u){let p=l.charAt(u);if(u===l.length||"."===p||"#"===p){let p=l.charAt(a-1),d=l.slice(a,u);"."===p?i.classList.add(d):"#"===p?i.id=d:("svg"===d&&(s=n(s,{namespace:o})),void 0!==s.namespace?i=e.domNode=c.createElementNS(s.namespace,d):(i=e.domNode=e.domNode||c.createElement(d),"input"===d&&e.properties&&void 0!==e.properties.type&&i.setAttribute("type",e.properties.type)),void 0!==r?t.insertBefore(i,r):i.parentNode!==t&&t.appendChild(i)),a=u+1}}v(i,e,s)}},x=(e,t,r)=>{t&&t.split(" ").forEach(t=>{t&&e.classList.toggle(t,r)})};S=(e,r,d)=>{let h=e.domNode,y=!1;if(e===r)return!1;let f=!1;if(""===r.vnodeSelector){if(r.text!==e.text){let e=h.ownerDocument.createTextNode(r.text);return h.parentNode.replaceChild(e,h),r.domNode=e,y=!0,y}r.domNode=h}else 0===r.vnodeSelector.lastIndexOf("svg",0)&&(d=n(d,{namespace:o})),e.text!==r.text&&(f=!0,void 0===r.text?h.removeChild(h.firstChild):h.textContent=r.text),r.domNode=h,f=((e,t,r,o,s)=>{if(r===o)return!1;o=o||i;let n,l=(r=r||i).length,d=o.length,h=0,y=0,f=!1;for(;y<d;){let i=h<l?r[h]:void 0,d=o[y];if(void 0!==i&&a(i,d))f=S(i,d,s)||f,h++;else{let i=c(r,d,h+1);if(i>=0){for(n=h;n<i;n++)g(r[n]),u(r,n,e,"removed");f=S(r[i],d,s)||f,h=i+1}else w(d,t,h<l?r[h].domNode:void 0,s),p(d),u(o,y,e,"added")}y++}if(l>h)for(n=h;n<l;n++)g(r[n]),u(r,n,e,"removed");return f})(r,h,e.children,r.children,d)||f,f=((e,r,i,n)=>{if(!i)return;let a=!1,c=Object.keys(i),u=c.length;for(let p=0;p<u;p++){let u=c[p],d=i[u],h=r[u];if("class"===u)h!==d&&(x(e,h,!1),x(e,d,!0));else if("classes"===u){let t=e.classList,r=Object.keys(d),o=r.length;for(let e=0;e<o;e++){let o=r[e],s=!!d[o];s!==!!h[o]&&(a=!0,s?t.add(o):t.remove(o))}}else if("styles"===u){let t=Object.keys(d),r=t.length;for(let o=0;o<r;o++){let r=t[o],s=d[r];s!==h[r]&&(a=!0,s?(l(s),n.styleApplyer(e,r,s)):n.styleApplyer(e,r,""))}}else if(d||"string"!=typeof h||(d=""),"value"!==u||_(e)){if(d!==h){let r=typeof d;"function"===r&&n.eventHandlerInterceptor||(n.namespace===o?"href"===u?e.setAttributeNS(s,u,d):e.setAttribute(u,d):"string"===r?"innerHTML"===u?e[u]=t.renderingSanitizer.sanitize(d):"role"===u&&""===d?e.removeAttribute(u):_(e)&&u in e?e[u]=d:e.setAttribute(u,d):e[u]!==d&&(e[u]=d),a=!0)}}else{let t=e[u];t!==d&&(e["oninput-value"]?t===e["oninput-value"]:d!==h)&&(e[u]=d,e["oninput-value"]=void 0),d!==h&&(a=!0)}}return a})(h,e.properties,r.properties,d)||f,r.properties&&r.properties.afterUpdate&&r.properties.afterUpdate.apply(r.properties.bind||r.properties,[h,d,r.vnodeSelector,r.properties,r.children]);return f&&r.properties&&r.properties.updateAnimation&&r.properties.updateAnimation(h,r.properties,e.properties),y},e.createDom=w,e.createProjection=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let o=e;e=r,S(o,r,t)},domNode:e.domNode}),e.extend=n,e.initPropertiesAndChildren=v,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/sanitizerUtils":function(){define(["exports"],function(e){"use strict";var t=function(){return t=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},t.apply(this,arguments)},r={exports:{}},o={},s={exports:{}},i={};var n=/javascript\s*\:/gim;i.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},i.getDefaultWhiteList=function(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}},i.onAttr=function(e,t,r){},i.onIgnoreAttr=function(e,t,r){},i.safeAttrValue=function(e,t){return n.test(t)?"":t};var a=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},l=i,c=function(e,t){var r;";"!==(r=e,e=String.prototype.trimRight?r.trimRight():r.replace(/(\s*$)/g,""))[e.length-1]&&(e+=";");var o=e.length,s=!1,i=0,n=0,l="";function c(){if(!s){var r=a(e.slice(i,n)),o=r.indexOf(":");if(-1!==o){var c=a(r.slice(0,o)),u=a(r.slice(o+1));if(c){var p=t(i,l.length,c,u,r);p&&(l+=p+"; ")}}}i=n+1}for(;n<o;n++){var u=e[n];if("/"===u&&"*"===e[n+1]){var p=e.indexOf("*/",n+2);if(-1===p)break;i=(n=p+1)+1,s=!1}else"("===u?s=!0:")"===u?s=!1:";"===u?s||c():"\n"===u&&c()}return a(l)};function u(e){return null==e}function p(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).whiteList=e.whiteList||l.whiteList,e.onAttr=e.onAttr||l.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||l.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||l.safeAttrValue,this.options=e}p.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,o=t.onAttr,s=t.onIgnoreAttr,i=t.safeAttrValue;return c(e,function(e,t,n,a,l){var c=r[n],p=!1;if(!0===c?p=c:"function"==typeof c?p=c(a):c instanceof RegExp&&(p=c.test(a)),!0!==p&&(p=!1),a=i(n,a)){var d,h={position:t,sourcePosition:e,source:l,isWhite:p};return p?u(d=o(n,a,h))?n+":"+a:d:u(d=s(n,a,h))?void 0:d}})};var d=p;!function(e,t){var r=i,o=d;for(var s in(t=e.exports=function(e,t){return new o(t).process(e)}).FilterCSS=o,r)t[s]=r[s]}(s,s.exports);var h=s.exports,y={indexOf:function(e,t){var r,o;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,o=e.length;r<o;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var o,s;if(Array.prototype.forEach)return e.forEach(t,r);for(o=0,s=e.length;o<s;o++)t.call(r,e[o],o,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}},f=h.FilterCSS,m=h.getDefaultWhiteList,g=y,b=new f;function _(e){return e.replace(S,"&lt;").replace(v,"&gt;")}var S=/</g,v=/>/g,w=/"/g,x=/&quot;/g,T=/&#([a-zA-Z0-9]*);?/gim,M=/&colon;?/gim,I=/&newline;?/gim,O=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,P=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,k=/u\s*r\s*l\s*\(.*/gi;function C(e){return e.replace(w,"&quot;")}function L(e){return e.replace(x,'"')}function E(e){return e.replace(T,function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))})}function A(e){return e.replace(M,":").replace(I," ")}function F(e){for(var t="",r=0,o=e.length;r<o;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return g.trim(t)}function R(e){return F(e=A(e=E(e=L(e))))}function j(e){return _(e=C(e))}o.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},o.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},o.onTag=function(e,t,r){},o.onIgnoreTag=function(e,t,r){},o.onTagAttr=function(e,t,r){},o.onIgnoreTagAttr=function(e,t,r){},o.safeAttrValue=function(e,t,r,o){if(r=R(r),"href"===t||"src"===t){if("#"===(r=g.trim(r)))return"#";if("http://"!==r.substr(0,7)&&"https://"!==r.substr(0,8)&&"mailto:"!==r.substr(0,7)&&"tel:"!==r.substr(0,4)&&"data:image/"!==r.substr(0,11)&&"ftp://"!==r.substr(0,6)&&"./"!==r.substr(0,2)&&"../"!==r.substr(0,3)&&"#"!==r[0]&&"/"!==r[0])return""}else if("background"===t){if(O.lastIndex=0,O.test(r))return""}else if("style"===t){if(P.lastIndex=0,P.test(r))return"";if(k.lastIndex=0,k.test(r)&&(O.lastIndex=0,O.test(r)))return"";!1!==o&&(r=(o=o||b).process(r))}return j(r)},o.escapeHtml=_,o.escapeQuote=C,o.unescapeQuote=L,o.escapeHtmlEntities=E,o.escapeDangerHtml5Entities=A,o.clearNonPrintableCharacter=F,o.friendlyAttrValue=R,o.escapeAttrValue=j,o.onIgnoreTagStripAll=function(){return""},o.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var r=!Array.isArray(e),o=[],s=!1;return{onIgnoreTag:function(i,n,a){if(function(t){return!!r||-1!==g.indexOf(e,t)}(i)){if(a.isClosing){var l=a.position+10;return o.push([!1!==s?s:a.position,l]),s=!1,"[/removed]"}return s||(s=a.position),"[removed]"}return t(i,n,a)},remove:function(e){var t="",r=0;return g.forEach(o,function(o){t+=e.slice(r,o[0]),r=o[1]}),t+=e.slice(r)}}},o.stripCommentTag=function(e){for(var t="",r=0;r<e.length;){var o=e.indexOf("\x3c!--",r);if(-1===o){t+=e.slice(r);break}t+=e.slice(r,o);var s=e.indexOf("--\x3e",o);if(-1===s)break;r=s+3}return t},o.stripBlankChar=function(e){var t=e.split("");return(t=t.filter(function(e){var t=e.charCodeAt(0);return!(127===t||t<=31&&10!==t&&13!==t)})).join("")},o.cssFilter=b,o.getDefaultCSSWhiteList=m;var N={},D=y;function U(e){var t,r=D.spaceIndex(e);return t=-1===r?e.slice(1,-1):e.slice(1,r+1),"/"===(t=D.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}function V(e){return"</"===e.slice(0,2)}var q=/[^a-zA-Z0-9\\_:.-]/gim;function z(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"="===r?t:-1}}function G(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"'"===r||'"'===r?t:-1}}function B(e,t){for(;t>0;t--){var r=e[t];if(" "!==r)return"="===r?t:-1}}function $(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}N.parseTag=function(e,t,r){var o="",s=0,i=!1,n=!1,a=0,l=e.length,c="",u="";e:for(a=0;a<l;a++){var p=e.charAt(a);if(!1===i){if("<"===p){i=a;continue}}else if(!1===n){if("<"===p){o+=r(e.slice(s,a)),i=a,s=a;continue}if(">"===p){o+=r(e.slice(s,i)),c=U(u=e.slice(i,a+1)),o+=t(i,o.length,c,u,V(u)),s=a+1,i=!1;continue}if('"'===p||"'"===p)for(var d=1,h=e.charAt(a-d);""===h.trim()||"="===h;){if("="===h){n=p;continue e}h=e.charAt(a-++d)}}else if(p===n){n=!1;continue}}return s<e.length&&(o+=r(e.substr(s))),o},N.parseAttr=function(e,t){var r=0,o=0,s=[],i=!1,n=e.length;function a(e,r){if(!((e=(e=D.trim(e)).replace(q,"").toLowerCase()).length<1)){var o=t(e,r||"");o&&s.push(o)}}for(var l=0;l<n;l++){var c,u=e.charAt(l);if(!1!==i||"="!==u)if(!1===i||l!==o){if(/\s|\n|\t/.test(u)){if(e=e.replace(/\s|\n|\t/g," "),!1===i){if(-1===(c=z(e,l))){a(D.trim(e.slice(r,l))),i=!1,r=l+1;continue}l=c-1;continue}if(-1===(c=B(e,l-1))){a(i,$(D.trim(e.slice(r,l)))),i=!1,r=l+1;continue}}}else{if(-1===(c=e.indexOf(u,l+1)))break;a(i,D.trim(e.slice(o+1,c))),i=!1,r=(l=c)+1}else i=e.slice(r,l),r=l+1,o='"'===e.charAt(r)||"'"===e.charAt(r)?r:G(e,l+1)}return r<e.length&&(!1===i?a(e.slice(r)):a(i,$(D.trim(e.slice(r))))),D.trim(s.join(" "))};var J=h.FilterCSS,W=o,H=N,Z=H.parseTag,Q=H.parseAttr,K=y;function Y(e){return null==e}function X(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=W.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=function(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map(function(e){return e.toLowerCase()}):t[r.toLowerCase()]=e[r];return t}(e.whiteList||e.allowList):e.whiteList=W.whiteList,e.onTag=e.onTag||W.onTag,e.onTagAttr=e.onTagAttr||W.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||W.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||W.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||W.safeAttrValue,e.escapeHtml=e.escapeHtml||W.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new J(e.css))}X.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,o=t.onTag,s=t.onIgnoreTag,i=t.onTagAttr,n=t.onIgnoreTagAttr,a=t.safeAttrValue,l=t.escapeHtml,c=this.cssFilter;t.stripBlankChar&&(e=W.stripBlankChar(e)),t.allowCommentTag||(e=W.stripCommentTag(e));var u=!1;t.stripIgnoreTagBody&&(u=W.StripTagBody(t.stripIgnoreTagBody,s),s=u.onIgnoreTag);var p=Z(e,function(e,t,u,p,d){var h={sourcePosition:e,position:t,isClosing:d,isWhite:Object.prototype.hasOwnProperty.call(r,u)},y=o(u,p,h);if(!Y(y))return y;if(h.isWhite){if(h.isClosing)return"</"+u+">";var f=function(e){var t=K.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var r="/"===(e=K.trim(e.slice(t+1,-1)))[e.length-1];return r&&(e=K.trim(e.slice(0,-1))),{html:e,closing:r}}(p),m=r[u],g=Q(f.html,function(e,t){var r=-1!==K.indexOf(m,e),o=i(u,e,t,r);return Y(o)?r?(t=a(u,e,t,c))?e+'="'+t+'"':e:Y(o=n(u,e,t,r))?void 0:o:o});return p="<"+u,g&&(p+=" "+g),f.closing&&(p+=" /"),p+">"}return Y(y=s(u,p,h))?l(p):y},l);return u&&(p=u.remove(p)),p};var ee=X;!function(e,t){var r=o,s=N,i=ee;function n(e,t){return new i(t).process(e)}(t=e.exports=n).filterXSS=n,t.FilterXSS=i,function(){for(var e in r)t[e]=r[e];for(var o in s)t[o]=s[o]}(),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)}(r,r.exports);var te=r.exports,re=function(){function e(e,r){var o,s=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=t(t({},te.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(e,t,r,o){return"a"===e&&"href"===t||("img"===e||"source"===e)&&"src"===t?s.sanitizeUrl(r):te.safeAttrValue(e,t,r,o)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"},e&&!r?o=e:e&&r?((o=Object.create(this.arcgisFilterOptions)).css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(t){if("whiteList"===t)o.whiteList=s._extendObjectOfArrays([s.arcgisWhiteList,e.whiteList||{}]);else if("css"===t){var r=e.css.whiteList;null!=r&&e.css instanceof Object&&Object.keys(r).forEach(function(e){return o.css.whiteList[e]=r[e]})}else o[t]=e[t]})):((o=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,o.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=o,this._xssFilter=new te.FilterXSS(o)}return e.prototype.sanitize=function(e,t){switch(void 0===t&&(t={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,t);default:if(t.allowUndefined&&void 0===e)return;return null}},e.prototype.sanitizeUrl=function(e,t){var r=(null!=t?t:{}).isProtocolRequired,o=void 0===r||r,s=this._trim(e.substring(0,e.indexOf(":"))),i="/"===e,n=/^#/.test(e),a=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return i||n||a?te.escapeAttrValue(e):s||o?"":te.escapeAttrValue("https://".concat(e))},e.prototype.sanitizeHTMLAttribute=function(e,t,r,o){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(e,t,r,o):te.safeAttrValue(e,t,r,o)},e.prototype.validate=function(e,t){void 0===t&&(t={});var r=this.sanitize(e,t);return{isValid:e===r,sanitized:r}},e.prototype.encodeHTML=function(e){var t=this;return String(e).replace(/[&<>"'\/]/g,function(e){return t._entityMap[e]})},e.prototype.encodeAttrValue=function(e){var t=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,o){return t.test(r)?r:"&#x".concat(Number(e.charCodeAt(o)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(e){var t={};return e.forEach(function(e){Object.keys(e).forEach(function(r){Array.isArray(e[r])&&Array.isArray(t[r])?t[r]=t[r].concat(e[r]):t[r]=e[r]})}),t},e.prototype._iterateOverObject=function(e,t){var r=this;void 0===t&&(t={});try{var o=!1,s=void 0;if(Array.isArray(e))s=e.reduce(function(e,s){var i=r.validate(s,t);return i.isValid?e.concat([s]):(o=!0,e.concat([i.sanitized]))},[]);else{if(!function(e){if("object"!=typeof e||null===e)return!1;if("[object Object]"!==Object.prototype.toString.call(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e)){if(t.allowUndefined&&void 0===e)return;return null}s=Object.keys(e).reduce(function(s,i){var n=e[i],a=r.validate(n,t);return a.isValid?s[i]=n:(o=!0,s[i]=a.sanitized),s},{})}return o?s:e}catch(e){return null}},e.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},e}();const oe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],se=oe.reduce((e,t)=>(e[t]=[],e),{}),ie=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],ne=new re({whiteList:se,onTagAttr:(e,t,r)=>{const o=`${t}="${r}"`;if(ie.includes(t))return o},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);e.additionalAllowedTags=oe,e.renderingSanitizer=ne,e.safeAttrs=ie,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/libs/maquette/projector":function(){define(["exports","./dom"],function(e,t){"use strict";let r;r=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let o=(e,t,o)=>{let s=function(s){o("domEvent",s);let i=t(),n=((e,t)=>{let r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r})(s.currentTarget,i.domNode);n.reverse();let a,l=((e,t)=>{let o=e;return t.forEach(e=>{o=o&&o.children?r(o.children,t=>t.domNode===e):void 0}),o})(i.getLastRender(),n);return e.scheduleRender(),l&&(a=l.properties[`on${s.type}`].apply(l.properties.bind||this,arguments)),o("domEventProcessed",s),a};return(e,t,r,o)=>s};e.createProjector=e=>{let r,s,i=t.applyDefaultProjectionOptions(e),n=i.performanceLogger,a=!0,l=!1,c=[],u=[],p=(e,t,s)=>{let a;i.eventHandlerInterceptor=o(r,()=>a,n),a=e(t,s(),i),c.push(a),u.push(s)},d=()=>{if(s=void 0,a){a=!1,n("renderStart",void 0);for(let e=0;e<c.length;e++){let t=u[e]();n("rendered",void 0),c[e].update(t),n("patched",void 0)}n("renderDone",void 0),a=!0}};return r={renderNow:d,scheduleRender:()=>{s||l||(s=requestAnimationFrame(d))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),l=!0},resume:()=>{l=!1,a=!0,r.scheduleRender()},append:(e,r)=>{p(t.dom.append,e,r)},insertBefore:(e,r)=>{p(t.dom.insertBefore,e,r)},merge:(e,r)=>{p(t.dom.merge,e,r)},replace:(e,r)=>{p(t.dom.replace,e,r)},detach:e=>{for(let t=0;t<u.length;t++)if(u[t]===e)return u.splice(t,1),c.splice(t,1)[0];throw new Error("renderFunction was not found")}},r},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/libs/maquette-advanced-projector/advanced-projector-options":function(){define(["exports"],function(e){"use strict";e.defaultAdvancedProjectorOptions={handleInterceptedEvent:(e,t,r,o)=>(e.scheduleRender(),t.properties[`on${o.type}`].apply(t.properties.bind||r,[o]))},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/libs/maquette-advanced-projector/utils":function(){define(["exports"],function(e){"use strict";const t={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.startsWith("-")?e.style.setProperty(t,r):e.style[t]=r}};e.applyDefaultProjectionOptions=e=>({...t,...e}),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/componentsUtils":function(){define(["exports","../assets","../core/has","../core/urlUtils"],function(e,t,r,o){"use strict";class s{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}const i={},n=(e,t,...r)=>{try{return e?.call(t,...r)}catch(t){console.error(t,e)}},a=async(e,t,...r)=>{try{const o=e?.call(t,...r);return await o}catch(t){console.error(t,e)}},l="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),c=new Set(l),u="en",p={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},d={},h=async(e,t)=>{const r=`${t}${e}.json`;try{const e=await fetch(r);if(e.ok)return await e.json()}catch(e){return console.error(e),{}}return e===u?{}:await h(u,t)},y=e=>{const t=((e,t,r)=>{const o=((e,t)=>{let r=e;for(;r;){const e=r.closest?.(t);if(e)return e;const o=r.getRootNode?.();if(o===globalThis.document)return null;r=o.host}return null})(e,`[${t}]`);return o?.getAttribute(t)??r})(e,"lang",globalThis.navigator?.language||u);return{lang:t,t9nLocale:f(t)}},f=e=>{const[t,r]=e.split("-"),o=t.toLowerCase();let s=o;return r&&(s=`${o}-${r.toUpperCase()}`),s=p[s]??s,c.has(s)?s:r?f(o):u},m=/[A-Z]+(?![a-z])|[A-Z]/gu,g=globalThis,b=g.ShadowRoot&&(void 0===g.ShadyCSS||g.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,_=Symbol(),S=new WeakMap;let v=class{constructor(e,t,r){if(this._$cssResult$=!0,r!==_)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(b&&void 0===e){const r=void 0!==t&&1===t.length;r&&(e=S.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&S.set(t,e))}return e}toString(){return this.cssText}};const w=(e,t)=>{if(b)e.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet);else for(const r of t){const t=document.createElement("style"),o=g.litNonce;void 0!==o&&t.setAttribute("nonce",o),t.textContent=r.cssText,e.appendChild(t)}},x=b?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const r of e.cssRules)t+=r.cssText;return(e=>new v("string"==typeof e?e:e+"",void 0,_))(t)})(e):e,{is:T,defineProperty:M,getOwnPropertyDescriptor:I,getOwnPropertyNames:O,getOwnPropertySymbols:P,getPrototypeOf:k}=Object,C=globalThis,L=C.trustedTypes,E=L?L.emptyScript:"",A=C.reactiveElementPolyfillSupport,F=(e,t)=>e,R={toAttribute(e,t){switch(t){case Boolean:e=e?E:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=null!==e;break;case Number:r=null===e?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch(e){r=null}}return r}},j=(e,t)=>!T(e,t),N={attribute:!0,type:String,converter:R,reflect:!1,useDefault:!1,hasChanged:j};Symbol.metadata??=Symbol("metadata"),C.litPropertyMetadata??=new WeakMap;let D=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=N){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const r=Symbol(),o=this.getPropertyDescriptor(e,r,t);void 0!==o&&M(this.prototype,e,o)}}static getPropertyDescriptor(e,t,r){const{get:o,set:s}=I(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get:o,set(t){const i=o?.call(this);s?.call(this,t),this.requestUpdate(e,i,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??N}static _$Ei(){if(this.hasOwnProperty(F("elementProperties")))return;const e=k(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(F("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(F("properties"))){const e=this.properties,t=[...O(e),...P(e)];for(const r of t)this.createProperty(r,e[r])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,r]of t)this.elementProperties.set(e,r)}this._$Eh=new Map;for(const[e,t]of this.elementProperties){const r=this._$Eu(e,t);void 0!==r&&this._$Eh.set(r,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const e of r)t.unshift(x(e))}else void 0!==e&&t.push(x(e));return t}static _$Eu(e,t){const r=t.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const r of t.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return w(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$ET(e,t){const r=this.constructor.elementProperties.get(e),o=this.constructor._$Eu(e,r);if(void 0!==o&&!0===r.reflect){const s=(void 0!==r.converter?.toAttribute?r.converter:R).toAttribute(t,r.type);this._$Em=e,null==s?this.removeAttribute(o):this.setAttribute(o,s),this._$Em=null}}_$AK(e,t){const r=this.constructor,o=r._$Eh.get(e);if(void 0!==o&&this._$Em!==o){const e=r.getPropertyOptions(o),s="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:R;this._$Em=o;const i=s.fromAttribute(t,e.type);this[o]=i??this._$Ej?.get(o)??i,this._$Em=null}}requestUpdate(e,t,r){if(void 0!==e){const o=this.constructor,s=this[e];if(r??=o.getPropertyOptions(e),!((r.hasChanged??j)(s,t)||r.useDefault&&r.reflect&&s===this._$Ej?.get(e)&&!this.hasAttribute(o._$Eu(e,r))))return;this.C(e,t,r)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(e,t,{useDefault:r,reflect:o,wrapped:s},i){r&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,i??t??this[e]),!0!==s||void 0!==i)||(this._$AL.has(e)||(this.hasUpdated||r||(t=void 0),this._$AL.set(e,t)),!0===o&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,r]of e){const{wrapped:e}=r,o=this[t];!0!==e||this._$AL.has(t)||void 0===o||this.C(t,void 0,r,o)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach(e=>e.hostUpdate?.()),this.update(t)):this._$EM()}catch(t){throw e=!1,this._$EM(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach(e=>e.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(e=>this._$ET(e,this[e])),this._$EM()}updated(e){}firstUpdated(e){}};D.elementStyles=[],D.shadowRootOptions={mode:"open"},D[F("elementProperties")]=new Map,D[F("finalized")]=new Map,A?.({ReactiveElement:D}),(C.reactiveElementVersions??=[]).push("2.1.1");const U=globalThis,V=U.trustedTypes,q=V?V.createPolicy("lit-html",{createHTML:e=>e}):void 0,z="$lit$",G=`lit$${Math.random().toFixed(9).slice(2)}$`,B="?"+G,$=`<${B}>`,J=document,W=()=>J.createComment(""),H=e=>null===e||"object"!=typeof e&&"function"!=typeof e,Z=Array.isArray,Q="[ \t\n\f\r]",K=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Y=/-->/g,X=/>/g,ee=RegExp(`>|${Q}(?:([^\\s"'>=/]+)(${Q}*=${Q}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),te=/'/g,re=/"/g,oe=/^(?:script|style|textarea|title)$/i,se=e=>(t,...r)=>({_$litType$:e,strings:t,values:r}),ie=se(1),ne=se(2),ae=Symbol.for("lit-noChange"),le=Symbol.for("lit-nothing"),ce=new WeakMap,ue=J.createTreeWalker(J,129);function pe(e,t){if(!Z(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==q?q.createHTML(t):t}const de=(e,t)=>{const r=e.length-1,o=[];let s,i=2===t?"<svg>":3===t?"<math>":"",n=K;for(let t=0;t<r;t++){const r=e[t];let a,l,c=-1,u=0;for(;u<r.length&&(n.lastIndex=u,l=n.exec(r),null!==l);)u=n.lastIndex,n===K?"!--"===l[1]?n=Y:void 0!==l[1]?n=X:void 0!==l[2]?(oe.test(l[2])&&(s=RegExp("</"+l[2],"g")),n=ee):void 0!==l[3]&&(n=ee):n===ee?">"===l[0]?(n=s??K,c=-1):void 0===l[1]?c=-2:(c=n.lastIndex-l[2].length,a=l[1],n=void 0===l[3]?ee:'"'===l[3]?re:te):n===re||n===te?n=ee:n===Y||n===X?n=K:(n=ee,s=void 0);const p=n===ee&&e[t+1].startsWith("/>")?" ":"";i+=n===K?r+$:c>=0?(o.push(a),r.slice(0,c)+z+r.slice(c)+G+p):r+G+(-2===c?t:p)}return[pe(e,i+(e[r]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),o]};class he{constructor({strings:e,_$litType$:t},r){let o;this.parts=[];let s=0,i=0;const n=e.length-1,a=this.parts,[l,c]=de(e,t);if(this.el=he.createElement(l,r),ue.currentNode=this.el.content,2===t||3===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(o=ue.nextNode())&&a.length<n;){if(1===o.nodeType){if(o.hasAttributes())for(const e of o.getAttributeNames())if(e.endsWith(z)){const t=c[i++],r=o.getAttribute(e).split(G),n=/([.?@])?(.*)/.exec(t);a.push({type:1,index:s,name:n[2],strings:r,ctor:"."===n[1]?be:"?"===n[1]?_e:"@"===n[1]?Se:ge}),o.removeAttribute(e)}else e.startsWith(G)&&(a.push({type:6,index:s}),o.removeAttribute(e));if(oe.test(o.tagName)){const e=o.textContent.split(G),t=e.length-1;if(t>0){o.textContent=V?V.emptyScript:"";for(let r=0;r<t;r++)o.append(e[r],W()),ue.nextNode(),a.push({type:2,index:++s});o.append(e[t],W())}}}else if(8===o.nodeType)if(o.data===B)a.push({type:2,index:s});else{let e=-1;for(;-1!==(e=o.data.indexOf(G,e+1));)a.push({type:7,index:s}),e+=G.length-1}s++}}static createElement(e,t){const r=J.createElement("template");return r.innerHTML=e,r}}function ye(e,t,r=e,o){if(t===ae)return t;let s=void 0!==o?r._$Co?.[o]:r._$Cl;const i=H(t)?void 0:t._$litDirective$;return s?.constructor!==i&&(s?._$AO?.(!1),void 0===i?s=void 0:(s=new i(e),s._$AT(e,r,o)),void 0!==o?(r._$Co??=[])[o]=s:r._$Cl=s),void 0!==s&&(t=ye(e,s._$AS(e,t.values),s,o)),t}class fe{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:r}=this._$AD,o=(e?.creationScope??J).importNode(t,!0);ue.currentNode=o;let s=ue.nextNode(),i=0,n=0,a=r[0];for(;void 0!==a;){if(i===a.index){let t;2===a.type?t=new me(s,s.nextSibling,this,e):1===a.type?t=new a.ctor(s,a.name,a.strings,this,e):6===a.type&&(t=new ve(s,this,e)),this._$AV.push(t),a=r[++n]}i!==a?.index&&(s=ue.nextNode(),i++)}return ue.currentNode=J,o}p(e){let t=0;for(const r of this._$AV)void 0!==r&&(void 0!==r.strings?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}}class me{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,r,o){this.type=2,this._$AH=le,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=o,this._$Cv=o?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=ye(this,e,t),H(e)?e===le||null==e||""===e?(this._$AH!==le&&this._$AR(),this._$AH=le):e!==this._$AH&&e!==ae&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):(e=>Z(e)||"function"==typeof e?.[Symbol.iterator])(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==le&&H(this._$AH)?this._$AA.nextSibling.data=e:this.T(J.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:r}=e,o="number"==typeof r?this._$AC(e):(void 0===r.el&&(r.el=he.createElement(pe(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===o)this._$AH.p(t);else{const e=new fe(o,this),r=e.u(this.options);e.p(t),this.T(r),this._$AH=e}}_$AC(e){let t=ce.get(e.strings);return void 0===t&&ce.set(e.strings,t=new he(e)),t}k(e){Z(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let r,o=0;for(const s of e)o===t.length?t.push(r=new me(this.O(W()),this.O(W()),this,this.options)):r=t[o],r._$AI(s),o++;o<t.length&&(this._$AR(r&&r._$AB.nextSibling,o),t.length=o)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class ge{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,r,o,s){this.type=1,this._$AH=le,this._$AN=void 0,this.element=e,this.name=t,this._$AM=o,this.options=s,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=le}_$AI(e,t=this,r,o){const s=this.strings;let i=!1;if(void 0===s)e=ye(this,e,t,0),i=!H(e)||e!==this._$AH&&e!==ae,i&&(this._$AH=e);else{const o=e;let n,a;for(e=s[0],n=0;n<s.length-1;n++)a=ye(this,o[r+n],t,n),a===ae&&(a=this._$AH[n]),i||=!H(a)||a!==this._$AH[n],a===le?e=le:e!==le&&(e+=(a??"")+s[n+1]),this._$AH[n]=a}i&&!o&&this.j(e)}j(e){e===le?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class be extends ge{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===le?void 0:e}}class _e extends ge{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==le)}}class Se extends ge{constructor(e,t,r,o,s){super(e,t,r,o,s),this.type=5}_$AI(e,t=this){if((e=ye(this,e,t,0)??le)===ae)return;const r=this._$AH,o=e===le&&r!==le||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==le&&(r===le||o);o&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class ve{constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){ye(this,e)}}const we={I:me},xe=U.litHtmlPolyfillSupport;xe?.(he,me),(U.litHtmlVersions??=[]).push("3.3.1");const Te=(e,t,r)=>{const o=r?.renderBefore??t;let s=o._$litPart$;if(void 0===s){const e=r?.renderBefore??null;o._$litPart$=s=new me(t.insertBefore(W(),e),e,void 0,r??{})}return s._$AI(e),s},Me=globalThis;let Ie=class extends D{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Te(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return ae}};Ie._$litElement$=!0,Ie.finalized=!0,Me.litElementHydrateSupport?.({LitElement:Ie});const Oe=Me.litElementPolyfillSupport;Oe?.({LitElement:Ie}),(Me.litElementVersions??=[]).push("4.2.1");const Pe=Symbol.for("controller");let ke;const Ce=e=>{ke!==e&&(ke=e,queueMicrotask(()=>ke===e?ke=void 0:0))},Le=e=>ke;let Ee=[];const Ae=e=>{if(void 0===e)return void(Ee=[]);const t=Ee.indexOf(e);Ee=-1===t?[...Ee,e]:Ee.slice(0,t+1),queueMicrotask(()=>Ee=[])},Fe=()=>Ee;let Re;const je=async(e,t)=>{const r=De(e);if(void 0===r)return e;if(await r.ready,"function"==typeof t){const e=r.watchExports(r=>t(r,e))}return r.exports},Ne=async e=>{const t=De(e);return await t.ready,t},De=e=>{const t=Le().manager.X(e);if(void 0!==t)return t;if((e=>"object"==typeof e&&null!==e&&(Pe in e||"hostConnected"in e||"hostDisconnected"in e||"hostUpdate"in e||"hostUpdated"in e))(e))return e;const r=(()=>{const e=Re;return Re=void 0,e})();return void 0!==r?r:void 0};let Ue,Ve=!1;const qe=()=>{Ue?.forEach(({callbacks:e},t)=>{const r=Object.keys(t);e.forEach(e=>e(r))}),Ue=void 0},ze=(e,t,r)=>{const o=e.manager;return o.V!==le&&o.V!==r&&o.S(void 0,void 0),0===o.T.length&&queueMicrotask(()=>o.S(void 0,void 0)),o.V=r,o.T.push((e,o)=>n(t,void 0,r===o?e:void 0)),r},Ge=(e=[Le(),...Fe()],t,r)=>{const o=Array.isArray(e)?e:[e];let s=o.length+1;const i=e=>{s-=1,void 0!==e&&(s=Math.min(s,0)),0===s&&t(e)};o.forEach(e=>((e,t,r)=>{const o=Object.keys(e),s=o.length;void 0===Ue&&queueMicrotask(qe),Ue??=new Map;let i=Ue.get(e);return void 0===i&&(i={callbacks:[],keyCount:s},Ue.set(e,i)),i.keyCount!==s&&(i.callbacks.forEach(e=>e(o)),i.callbacks=[],i.keyCount=s),i.callbacks.push(o=>{const i=e=>n(t,null,e),a=o[s];void 0===a?i(void 0):e[a]===r?i(a):i(void 0)}),r})(e,t=>i(void 0===t?void 0:{key:t,host:e,isReactive:!1}),r));for(const e of o)if("manager"in e&&e.manager.component===e){ze(e,t=>i(void 0===t?void 0:{key:t,host:e,isReactive:!0}),r);break}return r},Be=((e="",t={},r=Le())=>{const o={emit:o=>{""===e&&qe();const s=new CustomEvent(e,{detail:o,cancelable:!0,bubbles:!0,composed:!0,...t});return r.el.dispatchEvent(s),s}};return""===e&&Ge(void 0,t=>e=t.key,o),o}).bind(null,"");var $e;$e=Pe;class Je{constructor(e){this.#e=[],this.#t=[],this.#r=[],this.#o=[],this.#s=[],this.#i=[],this.#n=[],this.#a=[],this.#l=[],this.#c=!1,this.P=new s,this.connectedCalled=!1,this.loadedCalled=!1,this[$e]=!0,this.#u=[];const t=this,r=e??Le();t.#p=r,t.ready=t.P.promise,t.#d=Ze(t),t.component=r,t.#p.addController(t),void 0===t.#p.manager||(Ae(t),queueMicrotask(()=>t.catchUpLifecycle()))}#e;#t;#r;#o;#s;#i;#n;#a;#l;#c;#p;catchUpLifecycle(){const{manager:e}=this.#p;!e.connectedCalled||this.connectedCalled||this.triggerConnected(),!e.#c||this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}#d;get exports(){return this.#d}set exports(e){const t=this.#d;t!==e&&(this.#d=e,this.#u.forEach(n),this.connectedCalled&&!1!==this.O&&this.#p.requestUpdate(this.O,t)),this.P.resolve(e)}setProvisionalExports(e,t=!0){this.#d=t?Ze(e):e,this.#u.forEach(n)}#u;watchExports(e){const t=()=>e(this.#d);return this.#u.push(t),()=>{this.#u.splice(this.#u.indexOf(t),1)}}get use(){return Ce(this.#p),je}get useRef(){return Ce(this.#p),Ne}get useRefSync(){return Ce(this.#p),De}controllerRemoved(){this.#p.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){this.#e.push(e)}onDisconnected(e){this.#t.push(e)}onLoad(e){this.#r.push(e)}onLoaded(e){this.#o.push(e)}onUpdate(e){this.#s.push(e)}onUpdated(e){this.#i.push(e)}onDestroy(e){this.#n.push(e)}onLifecycle(e){this.#a.push(e),this.connectedCalled&&this.#p.el.isConnected&&this.#h(e)}triggerConnected(){const e=this;e.hostConnected&&n(e.hostConnected,e),e.#e.forEach(n),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&n(e.hostDisconnected,e),e.#t.forEach(n),e.#l.forEach(n),e.#l=[]}async triggerLoad(){if(this.#c)return;this.#c=!0;const e=this;e.hostLoad&&await a(e.hostLoad,e),this.#r.length>0&&await Promise.allSettled(this.#r.map(a)),this.P.resolve(this.#d)}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&n(this.hostLoaded,this),this.#o.forEach(n),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&n(this.hostUpdate,this,e),this.#s.forEach(We,e)}triggerUpdated(e){this.hostUpdated&&n(this.hostUpdated,this,e),this.#i.forEach(We,e)}triggerDestroy(){this.hostDestroy&&n(this.hostDestroy,this),this.#n.forEach(n)}triggerLifecycle(){this.hostLifecycle&&this.#h(()=>this.hostLifecycle()),this.#a.forEach(this.#h,this)}#h(e){Ce(this.#p);const t=n(e);(Array.isArray(t)?t:[t]).forEach(e=>{"function"==typeof e?this.#l.push(e):"object"==typeof e&&"function"==typeof e.remove&&this.#l.push(e.remove)})}}function We(e){n(e,void 0,this)}const He=Je,Ze=e=>{if("object"!=typeof e&&"function"!=typeof e||null===e)return e;const t=new Proxy(e,{get(e,r,o){if("exports"!==r&&"_exports"!==r||!(r in e)||e[r]!==t)return r in e||r in Promise.prototype||"symbol"==typeof r?"function"==typeof e?e[r]:Reflect.get(e,r,o):void 0}});return t},Qe=e=>{let t=e;for(;t=t.parentNode??t.host;)if(t?.constructor?.lumina){const r=t;return r.manager?.loadedCalled||(r.J??r._offspring).push(e),(r.I??r._postLoad).promise}return!1},Ke={};function Ye(){}const Xe=Object.defineProperty,et=globalThis.HTMLElement??Ye;class tt extends et{constructor(){super(),this.#y={},this.#f=[],this.I=new s,this.H=new s,this.J=[];const e=this,t=e.constructor;e._offspring=e.J,e._postLoad=e.I,t.C?.forEach(t=>{Object.hasOwn(e,t)&&(e.#y[t]=e[t],delete e[t])}),t.A?e.#m({a:t.A}):t.B.then(async r=>{await t.K.p,e.#m(await(r.default?.then(e=>"function"==typeof e?{a:e}:e)??r))}).catch(t=>{e.H.reject(t),setTimeout(()=>{throw t})})}static{this.lumina=!0}static F(){for(const e of this.C??[])Xe(this.prototype,e,{configurable:!0,enumerable:!0,get(){return this.#y[e]},set(t){this.#y[e]=t}});for(const e of this.E??[])Xe(this.prototype,e,{async value(...t){this.#g||await this.H.promise;const r=this.#g;return await r[e](...t)},configurable:!0});for(const e of this.D??[])Xe(this.prototype,e,{value(...t){return this.#g[e](...t)},configurable:!0})}#g;#y;#f;get manager(){return this.#g?.manager}attributeChangedCallback(e,t,r){this.#g?.attributeChangedCallback(e,t,r),this.#g||this.#f.push(e)}connectedCallback(){this.#g?this.#g.connectedCallback?.():queueMicrotask(()=>this.G=Qe(this))}disconnectedCallback(){this.#g?.disconnectedCallback?.()}async componentOnReady(){return await this.H.promise,this}#m(e){const t=this.constructor,r=t.L,o=this.#y,s=Object.values(e).find(e=>e.L===r),i=`${r}--lazy`;let n=s;for(;n&&!Object.hasOwn(n,"lumina");)n=Object.getPrototypeOf(n);ot(n),!t.A&&(t.A=s,customElements.define(i,s)),s.N=this;const a=document.createElement(i);s.N=void 0,this.#g=a,this.#y=a,this.#f.forEach(e=>a.attributeChangedCallback(e,null,this.getAttribute(e))),Object.entries(o).forEach(rt,a);const l=this.isConnected;(l||this.G)&&(a.connectedCallback?.(),l||a.disconnectedCallback())}addController(){}requestUpdate(){this.#g?.requestUpdate()}}function rt([e,t]){this[e]=t}const ot=e=>{const t=e.prototype,r=Element.prototype;Object.hasOwn(t,"isConnected")||(t.setAttribute=function(e,t){r.setAttribute.call(this.el,e,t)},t.removeAttribute=function(e){r.removeAttribute.call(this.el,e)},Xe(t,"isConnected",{get(){return Reflect.get(r,"isConnected",this.el)}}))},st={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},it=e=>(...t)=>({_$litDirective$:e,values:t});let nt=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,r){this._$Ct=e,this._$AM=t,this._$Ci=r}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};const at=it(class extends nt{constructor(e){if(super(e),e.type!==st.ATTRIBUTE||"class"!==e.name||e.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter(t=>e[t]).join(" ")+" "}update(e,[t]){if(void 0===this.st){this.st=new Set,void 0!==e.strings&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter(e=>""!==e)));for(const e in t)t[e]&&!this.nt?.has(e)&&this.st.add(e);return this.render(t)}const r=e.element.classList;for(const e of this.st)e in t||(r.remove(e),this.st.delete(e));for(const e in t){const o=!!t[e];o===this.st.has(e)||this.nt?.has(e)||(o?(r.add(e),this.st.add(e)):(r.remove(e),this.st.delete(e)))}return ae}}),lt="important",ct=" !"+lt,ut=it(class extends nt{constructor(e){if(super(e),e.type!==st.ATTRIBUTE||"style"!==e.name||e.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce((t,r)=>{const o=e[r];return null==o?t:t+`${r=r.includes("-")?r:r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${o};`},"")}update(e,[t]){const{style:r}=e.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(t)),this.render(t);for(const e of this.ft)null==t[e]&&(this.ft.delete(e),e.includes("-")?r.removeProperty(e):r[e]=null);for(const e in t){const o=t[e];if(null!=o){this.ft.add(e);const t="string"==typeof o&&o.endsWith(ct);e.includes("-")||t?r.setProperty(e,t?o.slice(0,-11):o,t?lt:""):r[e]=o}}return ae}});class pt extends He{constructor(e){super(e),this.destroyed=!1,this.R=!1,this.V=le,this.T=[],this.#b=new WeakMap,this.#p=e,this.exports=void 0,this.hasDestroy=ht in e&&"function"==typeof e.destroy,Ie.prototype.addController.call(e,{hostConnected:()=>{if(this.destroyed){const t=e.el.localName;throw e.el.remove(),new Error(`The ${t} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${ht} prop.`)}void 0!==this.#_&&clearTimeout(this.#_),qe();for(const t of e.M)"triggerConnected"in t?t.triggerConnected():n(t.hostConnected,t)},hostDisconnected:()=>{for(const t of e.M)"triggerDisconnected"in t?t.triggerDisconnected():n(t.hostDisconnected,t);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const t of e.M)"triggerUpdate"in t?t.triggerUpdate(this.Q):n(t.hostUpdate,t,this.Q)},hostUpdated:()=>{for(const t of e.M)"triggerUpdated"in t?t.triggerUpdated(this.Q):n(t.hostUpdated,t,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),Ce(e)}#_;#p;async destroy(){if(!this.destroyed){this.#p.el.isConnected&&(this.hasDestroy=!1,this.#p.el.remove()),this.#_=void 0,this.destroyed=!0;for(const e of this.#p.M)"triggerDestroy"in e?e.triggerDestroy():n(e.hostDestroy,e);this.#p.M.splice(0)}}U(){if(void 0!==this.#_&&clearTimeout(this.#_),!this.#p.el.isConnected&&!this.#p.autoDestroyDisabled){const e=()=>{this.#p.destroy()};this.#_=((e,t)=>{const r=t/4;let o=0;const s=setInterval(()=>{o+=r,o>=t&&(clearInterval(s),e())},r);return s})(e,dt)}}S(e,t){const r=this.T;this.V=le,this.T=[],r.forEach(r=>r(e,t))}#b;W(e,t){("object"==typeof t&&null!==t||"function"==typeof t)&&this.#b.set(t,e)}X(e){return"object"==typeof e&&null!==e||"function"==typeof e?this.#b.get(e):void 0}}let dt=1e3;const ht="autoDestroyDisabled";class yt extends Ie{constructor(){super(),this.M=[],this.manager=new pt(this);const e=this,t=e.constructor,r=t.N,o=t.K.o,i=yt.prototype.shouldUpdate;e.#S=r?.H??new s,e.I=r?.I??new s,e.J=r?.J??[],e._offspring=e.J,e._postLoad=e.I,e.el=r??e,e.#v=e.enableUpdating,e.enableUpdating=Ye,e.shouldUpdate!==i&&(e.#w=e.shouldUpdate,e.shouldUpdate=i),o&&(e.#x=new Map,t.elementProperties.forEach((t,r)=>e.#x.set(r,o())))}static finalizeStyles(e){const t=super.finalizeStyles(e),r=this.shadowRootOptions===Ke;return void 0===this.K?.commonStyles||r?t:[this.K.commonStyles,...t]}static createProperty(e,t){const r="number"==typeof t?t:Array.isArray(t)?t[0]:0,o=Array.isArray(t)?t[1]:void 0,s=o?.hasChanged??j,i={attribute:!!(1&r&&"string"==typeof e)&&(n=e,n.replace(m,(e,t)=>`${0===t?"":"-"}${e.toLowerCase()}`)),reflect:!!(2&r),type:4&r?Boolean:8&r?Number:void 0,state:!!(16&r),readOnly:!!(32&r),noAccessor:!!(64&r),c:!1,...o,hasChanged(e,t){const r=s(e,t);return i.c=r,r}};var n;super.createProperty(e,i)}static getPropertyDescriptor(e,t,r){const o=this.K,s=super.getPropertyDescriptor(e,t,r);return r.d=s,{...s,get(){return o.t?.(this.#x.get(e)),s.get?.call(this)},set(t){const o=this.manager;if(r.readOnly&&!Ve&&(o.R||o.connectedCalled))throw Error(`Cannot assign to read-only property "${e}" of ${this.el.localName}. Trying to assign "${t}"`);s.set.call(this,t??void 0),r.c&&this.#x?.get(e)?.notify(),o.T.length>0&&o?.S(e,t)}}}static{this.lumina=!0}#x;#w;#v;#S;#T;connectedCallback(){if(this.el.hasAttribute("defer-hydration"))return;const e=this.constructor.K.c?.(()=>this.requestUpdate());this.#T=e;const t=!this.manager.connectedCalled;super.connectedCallback(),t?queueMicrotask(()=>this.#M().catch(e=>{this.#S.reject(e),setTimeout(()=>{throw e})})):e&&this.requestUpdate()}#I(e){try{this.#T.clear(),this.constructor.K.r(this.#T,()=>super.update(e))}catch(e){throw this.#T.clear(),e}}disconnectedCallback(){super.disconnectedCallback(),this.#T?.destroy(),this.#T=void 0}createRenderRoot(){const e=this.el.shadowRoot,t=this.constructor,r=t.shadowRootOptions,o=e??(r===Ke?this.el:this.el.attachShadow(r));if(e)return Ie.prototype.createRenderRoot.call(this),e;if(this.isConnected){const e=o.getRootNode();e.adoptedStyleSheets=[...e.adoptedStyleSheets,...t.elementStyles.map(e=>"styleSheet"in e?e.styleSheet:e)]}return o}async#M(){const e=this.el.G??Qe(this.el);e&&await e;const t=[];for(const e of this.M)"triggerLoad"in e?t.push(e.triggerLoad()):t.push(a(e.hostLoad,e));await Promise.all(t),await(this.load?.()),this.manager.hasDestroy&&this.manager.onUpdate(e=>e.has(ht)&&this.manager.U()),this.#v(!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const r=this.J.filter(e=>!e.manager?.loadedCalled);r.length&&await Promise.allSettled(r.map(async e=>await e.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const e of this.M)"triggerLoaded"in e?e.triggerLoaded():n(e.hostLoaded,e);this.loaded?.(),this.#S.resolve()}shouldUpdate(e){return this.manager.Q=e,this.#w?.(e)??!0}update(e){this.#T?this.#I(e):super.update(e)}listen(e,t,r){const o=t?.bind(this)??t;this.manager.onLifecycle(()=>(this.el.addEventListener(e,o,r),()=>this.el.removeEventListener(e,o,r)))}listenOn(e,t,r,o){const s=r?.bind(this)??r;this.manager.onLifecycle(()=>(e.addEventListener(t,s,o),()=>e.removeEventListener(t,s,o)))}async componentOnReady(){return await this.#S.promise,this}addController(e){this.M.push(e),!(Pe in e)&&this.renderRoot&&this.el.isConnected&&e.hostConnected?.()}removeController(e){this.M.splice(this.M.indexOf(e),1),e.controllerRemoved?.()}}const ft=le,mt="calcite-mode-auto",gt="calcite-mode-dark",bt={autoMode:mt,darkMode:gt,lightMode:"calcite-mode-light",rtl:"calcite--rtl"};function _t(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=()=>e.contains(gt)||e.contains(mt)&&t?"dark":"light",o=e=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:e}})),s=e=>{i!==e&&o(e),i=e};let i=r();o(i),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>s(e.matches?"dark":"light")),new MutationObserver(()=>s(r())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const St=globalThis.calciteConfig,vt=St?.focusTrapStack||[],wt=St?.logLevel||"info",xt="3.2.1";"interactive"===document.readyState?_t():document.addEventListener("DOMContentLoaded",()=>_t(),{once:!0}),function(){if(St&&St.version)return;console.info(`Using Calcite Components ${xt} [Date: 2025-05-29, Revision: 618973fec]`);const e=St||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:xt,writable:!1}),globalThis.calciteConfig=e}();const Tt=(e=>{let t;const r=e=>{t=new URL(e,globalThis.location?.href||void 0).href},o={...e,getAssetPath(e){const r=new URL(e,t);return r.origin!==globalThis.location?.origin?r.href:r.pathname},setAssetPath:r,customElement(e,t){t.K=o,t.L=e,customElements.get(e)||customElements.define(e,t)}};return r(e.defaultAssetPath),o})({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.2.1/",hydratedAttribute:"calcite-hydrated"}),{customElement:Mt,getAssetPath:It,setAssetPath:Ot}=Tt;let Pt,kt=!1;Pt="esri/widgets/support/components/assets",e.B=Te,e.CSS_UTILITY=bt,e.Controller=Je,e.DEBOUNCE={filter:250,nextTick:0,resize:150,reposition:100},e.E=le,e.GenericController=He,e.LitElement=yt,e.S=w,e.T=ae,e.Z=we,e.b=ne,e.bypassReadOnly=e=>{Ve=!0;try{return e()}finally{Ve=!1}},e.commitAssetPath=function(){var e;kt||(e=o.makeAbsolute(t.getAssetUrl("esri/widgets/support/components/assets")),kt=!0,Ot(e))},e.createEvent=Be,e.customElement=Mt,e.e=it,e.focusTrapStack=vt,e.getAssetPath=It,e.getElementLocales=y,e.i=(e,...t)=>{const r=1===e.length?e[0]:t.reduce((t,r,o)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+e[o+1],e[0]);return new v(r,e,_)},e.i$1=nt,e.i$2=Ie,e.isPromise=e=>"function"==typeof e?.then,e.loadCalciteComponents=function(e){const t=[];for(const r of Object.keys(e))customElements.get(`calcite-${r}`)||t.push(e[r]?.());return t.length>0?Promise.all(t):null},e.logLevel=wt,e.n=v,e.nothing=ft,e.resizeShiftStep=25,e.resizeStep=10,e.retrieveParentControllers=Fe,e.safeClassMap=e=>"object"==typeof e&&null!=e?at(e):e,e.safeStyleMap=e=>"object"==typeof e&&null!=e?ut(e):e,e.setAmbientChildController=e=>{Re!==e&&(Re=e,queueMicrotask(()=>Re===e?Re=void 0:0))},e.setAmbientComponent=Ce,e.setAttribute=function(e,t,r){null==r?e.removeAttribute(t):e.setAttribute(t,r)},e.setParentController=Ae,e.startLocaleObserver=(e,t,r,o)=>{let s;const n=()=>(async(e,t,r=e.localName.split("-").slice(1).join("-"))=>{const{lang:o,t9nLocale:s}=y(e),i=`${t}/${r}/t9n`,n=null===r?{}:await(async(e,t,r="")=>{const o=`${t}/${r}`,s=`${o}${e}.json`;return d[s]??(d[s]=h(e,o)),await d[s]})(s,i,"messages.");return{lang:o,t9nLocale:s,t9nStrings:n}})(e,t(),o).then(e=>{s?.lang===e.lang&&s.t9nLocale===e.t9nLocale&&s.t9nStrings===e.t9nStrings||r(e),s=e}).catch(console.error);return queueMicrotask(n),((e,t,r)=>(0,(e=>{const t=e.join(","),r=i[t];if(void 0!==r)return r;const o=new Set,s=new MutationObserver(e=>o.forEach(t=>t(e)));globalThis.document&&s.observe(document.documentElement,{attributes:!0,attributeFilter:e,subtree:!0});const n={subscribe:e=>(o.add(e),()=>{o.delete(e),0===o.size&&(s.disconnect(),i[t]=void 0)})};return i[t]=n,n})(["lang"]).subscribe)(t=>{const o=t.some(t=>((e,t)=>{let r=e;for(;r;){if(r===t)return!0;if(!r.parentNode)return!1;r=r.parentNode instanceof ShadowRoot?r.parentNode.host:r.parentNode}return!1})(e,t.target));o&&r()}))(e,0,n)},e.stringOrBoolean={toAttribute:e=>!0===e?"":!1===e?null:e},e.t=st,e.trackKey=Ge,e.x=ie})},"esri/widgets/support/jsxWidgetSupport":function(){define(["exports","../../core/handleUtils","./symbols"],function(e,t,r){"use strict";const o=[],s={},i=new WeakMap;function n(e,o,s,{parentWidget:n,widgetConstructor:a,widgetProperties:c}){const u=new a(c);u.container=e,i.set(e,u),u.afterCreate?.(u,e),n.addHandles(t.makeHandle(()=>l(e))),queueMicrotask(()=>{u[r.widgetTestDataSymbol].projector.renderNow()})}function a(e,t,r,{widgetProperties:o}){const s=i.get(e);s&&(s.set(o),s.afterUpdate?.(s,e))}function l(e){const t=i.get(e);t&&(t.afterRemoved?.(t,e),t.destroy(),i.delete(e))}function c(e){return"function"==typeof e&&e[r.widgetSymbol]}e.isWidgetConstructor=c,e.processWidgets=function e(t,r){let i=r.children;if(i?.length)for(let r=0;r<i.length;++r)i[r]=e(t,i[r]);else i=o;const u=r.vnodeSelector;if(c(u)){const e=r.properties||s,o=e.key||u,c={key:o,afterCreate:n,afterUpdate:a,afterRemoved:l,parentWidget:t,widgetConstructor:u,widgetProperties:{...e,key:o,children:i}};return{vnodeSelector:u.vnodeSelector,properties:c,children:void 0,text:void 0,domNode:null}}return r},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/symbols":function(){define(["exports"],function(e){"use strict";const t=Symbol("widget"),r=Symbol("widget-test-data");e.widgetSymbol=t,e.widgetTestDataSymbol=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/tests":function(){define(["exports","../../core/handleUtils","../../core/has"],function(e,t,r){"use strict";const o=new Set,s=new Map;e.assertNoAlive=function(){const e=Array.from(s.values())[0],t=s.size;if(s.clear(),0!==t)throw new Error(`Still ${t} alive widget instances.${e?` For example:\n${e}`:" Set enableLiveTracing in esri/widgets/support/tests.ts to include a stack trace."}`)},e.hasPendingLoading=function(){return o.size>0},e.registerAlive=function(e){return t.makeHandle()},e.registerLoading=function(e){o.add(e),e.finally(()=>o.delete(e))},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/vnodeCache":function(){define(["exports"],function(e){"use strict";const t=new Map;e.clearVNodeCache=function(){t.clear()},e.deleteVNodeCache=function(e){t.delete(e)},e.getVNodeCache=function(e){return t.get(e)},e.setVNodeCache=function(e,r){t.set(e,r)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/widgetUtils":function(){define(["exports","../../core/ArrayPool","../../core/handleUtils","../../core/has","../../core/Logger","../../core/promiseUtils","../../core/reactiveUtils","../../core/scheduling","./vnodeCache"],function(e,t,r,o,s,i,n,a,l){"use strict";var c,u,p=function(e){c||function(e){if("WebkitTransition"in e.style)c="webkitTransitionEnd",u="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");c="transitionend",u="animationend"}}(e)},d=function(e,t){return void 0===t&&(t=e+"-active"),function(r){p(r);var o=!1,s=function(i){o||(o=!0,r.removeEventListener(c,s),r.removeEventListener(u,s),r.classList.remove(e),r.classList.remove(t))};r.classList.add(e),r.addEventListener(c,s),r.addEventListener(u,s),requestAnimationFrame(function(){r.classList.add(t)})}},h=function(e,t){return void 0===t&&(t=e+"-active"),function(r,o){p(r);var s=!1,i=function(e){s||(s=!0,r.removeEventListener(c,i),r.removeEventListener(u,i),o())};r.classList.add(e),r.addEventListener(c,i),r.addEventListener(u,i),requestAnimationFrame(function(){r.classList.add(t)})}};const y=(()=>{const e=new Map,t=new ResizeObserver(t=>{l.clearVNodeCache();for(const r of t)e.get(r.target)?.(r)});return(o,s,i)=>{let a=null;return r.handlesGroup([n.watch(()=>"function"==typeof o?o():o,o=>{a?.remove(),o&&(a=((o,s,i)=>(e.set(o,s),t.observe(o,i),r.makeHandle(()=>{t.unobserve(o),e.delete(o)})))(o,s,i))},n.syncAndInitial),r.makeHandle(()=>a?.remove())])}})();e.classes=function(...e){const r=t.acquire();for(let t=0;t<e.length;t++){const o=e[t],s=typeof o;if("string"===s)r.push(o);else if(Array.isArray(o))r.push.apply(r,o);else if("object"===s)for(const e in o)o[e]&&r.push(e)}const o=r.join(" ");return t.release(r),o},e.cssTransition=function(e,t){return("enter"===e?d:h)(t)},e.discardNode=function(e){this[e.getAttribute("data-node-ref")]=null},e.isActivationKey=function(e){return"Enter"===e||" "===e},e.isRTL=function(e){const t=e?.closest("[dir]");return null!==t&&t instanceof HTMLElement&&"rtl"===t.dir||"rtl"===document.dir},e.onResize=y,e.setFocus=async function(e,t){await a.waitAnimationFrame(i.signalFromSignalOrOptions(t));const r="function"==typeof e?e():e;r&&("setFocus"in r&&"function"==typeof r.setFocus?await r.setFocus():r instanceof HTMLElement&&r.focus())},e.storeNode=function(e){this[e.getAttribute("data-node-ref")]=e},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/widget":function(){define(["exports","./decorators/accessibleHandler","./decorators/messageBundle","./decorators/vmEvent","./jsxFactory","./widgetUtils","../../support/modeUtils"],function(e,t,r,o,s,i,n){"use strict";e.accessibleHandler=t.accessibleHandler,e.messageBundle=r.messageBundle,e.vmEvent=o.vmEvent,e.tsx=s.tsx,e.tsxFragment=s.tsxFragment,e.classes=i.classes,e.cssTransition=i.cssTransition,e.discardNode=i.discardNode,e.isActivationKey=i.isActivationKey,e.isRTL=i.isRTL,e.onResize=i.onResize,e.setFocus=i.setFocus,e.storeNode=i.storeNode,e.getCalciteModeClass=n.getCalciteModeClass,e.isDarkMode=n.isDarkMode,e.modeNameCustomCSSProp=n.modeNameCustomCSSProp,e.setCalciteModeClass=n.setCalciteModeClass,e.hasDomNode=function(e){return e&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup},e.isWidget=function(e){return e&&"function"==typeof e.render},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/decorators/accessibleHandler":function(){define(["exports","../widgetUtils"],function(e,t){"use strict";e.accessibleHandler=function(){return function(e,r){if(!e[r])throw new TypeError(`Cannot auto bind undefined function '${String(r)}'`);return{value:(o=e[r],function(e,...r){!function(e){const t=e?.type;return e instanceof KeyboardEvent||"keyup"===t||"keydown"===t||"keypress"===t}(e)?o.call(this,e,...r):t.isActivationKey(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click())})};var o}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/decorators/messageBundle":function(){define(["exports"],function(e){"use strict";e.messageBundle=function(e){return(t,r)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/decorators/vmEvent":function(){define(["exports"],function(e){"use strict";e.vmEvent=function(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const r=t._delegatedEventNames,o=Array.isArray(e)?e:e.split(",").map(e=>e.trim());r.push(...o)}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/jsxFactory":function(){define(["exports","./jsxWidgetSupport"],function(e,t){"use strict";var r=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},o=function(e,t){for(var s=0,i=e.length;s<i;s++){var n=e[s];Array.isArray(n)?o(n,t):null!=n&&!1!==n&&(n.hasOwnProperty("vnodeSelector")||(n=r(n)),t.push(n))}};e.tsx=function(e,r,...s){return"function"!=typeof e||t.isWidgetConstructor(e)?function(e,t){for(var r=[],s=2;s<arguments.length;s++)r[s-2]=arguments[s];if(1===r.length&&"string"==typeof r[0])return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var i=[];return o(r,i),{vnodeSelector:e,properties:t||void 0,children:i,text:void 0,domNode:null}}(e,r??null,...s):e(r,...s)},e.tsxFragment=function(...e){return e},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/modeUtils":function(){define(["exports"],function(e){"use strict";const t="calcite-mode-",r="dark",o=/\W/g,s="--esri-calcite-mode-name";function i(){return getComputedStyle(document.body).getPropertyValue(s).replaceAll(o,"").toLowerCase()}function n(){const e=i();switch(e){case r:case"light":return`${t}${e}`;default:return null}}e.getCalciteModeClass=n,e.isDarkMode=function(){return i()===r},e.modeNameCustomCSSProp=s,e.setCalciteModeClass=function(e){const r=n();r&&(function(e){Array.from(e.classList).forEach(r=>{r.startsWith(t)&&e.classList.remove(r)})}(e),e.classList.add(r))},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"*noref":1}}),require.boot&&require.apply(null,require.boot);